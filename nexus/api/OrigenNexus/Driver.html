<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: OrigenNexus::Driver
  
    &mdash; Origen Nexus 0.8.0
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!OrigenNexus/Driver.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (D)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../OrigenNexus.html" title="OrigenNexus (module)">OrigenNexus</a></span></span>
     &raquo; 
    <span class="title">Driver</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: OrigenNexus::Driver
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">OrigenNexus::Driver</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2">Origen::Registers, OrigenJTAG</dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/origen_nexus/driver.rb</dd>
  
</dl>
<div class="clear"></div>


  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="JTAG_CONFIG-constant" class="">JTAG_CONFIG =
          <div class="docstring">
  <div class="discussion">
    
<p>Allow for JTAG optionality blank for now</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='rbrace'>}</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#cpuscr_reg_width-instance_method" title="#cpuscr_reg_width (instance method)">- (Object) <strong>cpuscr_reg_width</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute cpuscr_reg_width.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#nexus_command_width-instance_method" title="#nexus_command_width (instance method)">- (Object) <strong>nexus_command_width</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Nexus command width width of commands used in first DR pass to read/write a
Nexus register.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#once_bypass_instr-instance_method" title="#once_bypass_instr (instance method)">- (Object) <strong>once_bypass_instr</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The OnCE bypass instruction (BYPASS) OnCE command value to bypass OnCE.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#once_cpuscr_go_exit_instr-instance_method" title="#once_cpuscr_go_exit_instr (instance method)">- (Object) <strong>once_cpuscr_go_exit_instr</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute once_cpuscr_go_exit_instr.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#once_nexus_access_instr-instance_method" title="#once_nexus_access_instr (instance method)">- (Object) <strong>once_nexus_access_instr</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The OnCE Nexus access instruction (NEXUS-ACCESS) OnCE command value to
enable Nexus.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#once_ocmd_width-instance_method" title="#once_ocmd_width (instance method)">- (Object) <strong>once_ocmd_width</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>OnCE Command Register (OCMD) width in bits OnCE (On-Chip Emulation).</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#owner-instance_method" title="#owner (instance method)">- (Object) <strong>owner</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the object that included the Nexus module, should always be the
top-level model.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#block_read_access-instance_method" title="#block_read_access (instance method)">- (Object) <strong>block_read_access</strong>(address, block_data = [], options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Block Read of memory-mapped resources for now only supports 32-bit data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#block_write_access-instance_method" title="#block_write_access (instance method)">- (Object) <strong>block_write_access</strong>(address, block_data = [], options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Block Write to memory-mapped resources for now only supports 32-bit data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#define_cpu_registers-instance_method" title="#define_cpu_registers (instance method)">- (Object) <strong>define_cpu_registers</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#define_nexus_registers-instance_method" title="#define_nexus_registers (instance method)">- (Object) <strong>define_nexus_registers</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define Nexus registers For now only those related to RWA will be defined.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disable_once-instance_method" title="#disable_once (instance method)">- (Object) <strong>disable_once</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Disable OnCE.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enable_nexus_access-instance_method" title="#enable_nexus_access (instance method)">- (Object) <strong>enable_nexus_access</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Enable Nexus module Loads NEXUS-ACCESS instruction into JTAG Instruction
Register (OnCE OCMD register).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exact_address-instance_method" title="#exact_address (instance method)">- (Object) <strong>exact_address</strong>(reg_or_val, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Provides exact address value either if a defined register is provided or if
an address is provided.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exact_data-instance_method" title="#exact_data (instance method)">- (Object) <strong>exact_data</strong>(reg_or_val, _options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Provides exact data value either if a defined register is provided or if an
address is provided.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exact_name-instance_method" title="#exact_name (instance method)">- (Object) <strong>exact_name</strong>(reg_or_val, _options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Provide name of register, if real register passed otherwise given
&#39;undef&#39; as name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exact_size-instance_method" title="#exact_size (instance method)">- (Object) <strong>exact_size</strong>(reg_or_val, _options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Provide size of register if real register passed–  otherwise indicate
number of bits of data value.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#go_exit-instance_method" title="#go_exit (instance method)">- (Object) <strong>go_exit</strong>(code_start_address = 0x4) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Driver) <strong>initialize</strong>(owner, options = {}) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of Driver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#jtag-instance_method" title="#jtag (instance method)">- (Object) <strong>jtag</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the underlying JTAG driver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#local_jtag-instance_method" title="#local_jtag (instance method)">- (Object) <strong>local_jtag</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#log-instance_method" title="#log (instance method)">- (Object) <strong>log</strong>(msg) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#log2-instance_method" title="#log2 (instance method)">- (Object) <strong>log2</strong>(msg) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_created-instance_method" title="#on_created (instance method)">- (Object) <strong>on_created</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pin-instance_method" title="#pin (instance method)">- (Object) <strong>pin</strong>(*args) </a>
    

    
      (also: #pins)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This proxies all pin requests from our local JTAG driver to our parent DUT
model.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_data_only-instance_method" title="#read_data_only (instance method)">- (Object) <strong>read_data_only</strong>(reg_or_val, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Read data cycles only for RWD Register.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_nexus_register-instance_method" title="#read_nexus_register (instance method)">- (Object) <strong>read_nexus_register</strong>(reg_or_val, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Read a given Nexus register.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_register-instance_method" title="#read_register (instance method)">- (Object) <strong>read_register</strong>(reg_or_val, options = {}) </a>
    

    
      (also: #read)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Read the given register (or system memory location) or given value from a
specified address reg_or_val          := register symbol to use – assumes
register preloaded with                        required data to use, can
override by using :address option                        in which case data
to use provided here.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#real_reg%3F-instance_method" title="#real_reg? (instance method)">- (Boolean) <strong>real_reg?</strong>(reg_or_val) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>determines whether real register or not.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#single_read_access-instance_method" title="#single_read_access (instance method)">- (Object) <strong>single_read_access</strong>(address, data, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Single Read from memory-mapped resource for now only supports 32-bit data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#single_write_access-instance_method" title="#single_write_access (instance method)">- (Object) <strong>single_write_access</strong>(address, data, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Single Write to memory-mapped resource for now only supports 32-bit data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_data_only-instance_method" title="#write_data_only (instance method)">- (Object) <strong>write_data_only</strong>(reg_or_val, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Write data cycles only for a Register Used if only want data cycles for
overlay subroutines.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_nexus_register-instance_method" title="#write_nexus_register (instance method)">- (Object) <strong>write_nexus_register</strong>(reg_or_val, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Write a given Nexus register.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_register-instance_method" title="#write_register (instance method)">- (Object) <strong>write_register</strong>(reg_or_val, options = {}) </a>
    

    
      (also: #write)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Write the given register (or system memory location) or given value to a
specified address reg_or_val          := register symbol to use – assumes
register preloaded with                        required data to use, can
override by using :address option                        in which case data
to use provided here.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="OrigenNexus::Driver (class)">Driver</a></span></tt>) <strong>initialize</strong>(owner, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of Driver</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 47</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_owner'>owner</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='op'>::</span><span class='const'>NEXUS_CONFIG</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='op'>::</span><span class='const'>NEXUS_CONFIG</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Fallback defaults
</span>  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>tclk_format:</span>               <span class='symbol'>:rh</span><span class='comma'>,</span>                      <span class='comment'># format of JTAG clock used:  ReturnHigh (:rh), ReturnLo (:rl)
</span>    <span class='label'>tclk_multiple:</span>             <span class='int'>1</span><span class='comma'>,</span>                      <span class='comment'># number of cycles for one clock pulse, assumes 50% duty cycle. Uses tester non-return format to spread TCK across multiple cycles.
</span>    <span class='comment'>#    e.g. @tclk_multiple = 2, @tclk_format = :rh, means one cycle with Tck low (non-return), one with Tck high (NR)
</span>    <span class='comment'>#         @tclk_multiple = 4, @tclk_format = :rl, means 2 cycles with Tck high (NR), 2 with Tck low (NR)
</span>    <span class='label'>tdo_strobe:</span>                <span class='symbol'>:tclk_high</span><span class='comma'>,</span>                <span class='comment'># when using multiple cycles for TCK, which state of TCK to strobe for TDO, :tclk_high or :tclk_low or :tclk_all
</span>    <span class='label'>tdo_store_cycle:</span>           <span class='int'>0</span><span class='comma'>,</span>                    <span class='comment'># store vector cycle within TCK (i.e. when to indicate to tester to store vector within TCK cycle.  0 is first vector, 1 is second, etc.)
</span>    <span class='comment'>#
</span>    <span class='label'>once_ocmd_width:</span>           <span class='int'>10</span><span class='comma'>,</span>                   <span class='comment'># Width of OnCE OCMD instruction reg in bits
</span>    <span class='label'>once_nexus_access_instr:</span>   <span class='int'>0b0001111100</span><span class='comma'>,</span> <span class='comment'># Instruction used to access nexus via OnCE, default: 0x07C.
</span>    <span class='label'>once_bypass_instr:</span>         <span class='int'>0b0001111111</span><span class='comma'>,</span>       <span class='comment'># Instruction used to bypass OnCE, default: 0x07F.
</span>    <span class='label'>once_cpuscr_go_exit_instr:</span> <span class='int'>0b0110010000</span><span class='comma'>,</span>  <span class='comment'># Instruction used to exit debug mode and kick off code execution from desired address.
</span>    <span class='label'>nexus_command_width:</span>       <span class='int'>8</span><span class='comma'>,</span>                <span class='comment'># Width of Nexus command data regs, default: 8.
</span>    <span class='label'>cpuscr_reg_width:</span>          <span class='int'>192</span><span class='comma'>,</span>              <span class='comment'># Width of cpuscr reg
</span>  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='comment'># Define JTAG configs based on Nexus config
</span>  <span class='const'>JTAG_CONFIG</span><span class='lbracket'>[</span><span class='symbol'>:tclk_format</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:tclk_format</span><span class='rbracket'>]</span>
  <span class='const'>JTAG_CONFIG</span><span class='lbracket'>[</span><span class='symbol'>:tclk_multiple</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:tclk_multiple</span><span class='rbracket'>]</span>
  <span class='const'>JTAG_CONFIG</span><span class='lbracket'>[</span><span class='symbol'>:tdo_strobe</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:tdo_strobe</span><span class='rbracket'>]</span>
  <span class='const'>JTAG_CONFIG</span><span class='lbracket'>[</span><span class='symbol'>:tdo_store_cycle</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:tdo_store_cycle</span><span class='rbracket'>]</span>

  <span class='ivar'>@once_ocmd_width</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:once_ocmd_width</span><span class='rbracket'>]</span>
  <span class='ivar'>@once_nexus_access_instr</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:once_nexus_access_instr</span><span class='rbracket'>]</span>
  <span class='ivar'>@once_bypass_instr</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:once_bypass_instr</span><span class='rbracket'>]</span>
  <span class='ivar'>@once_cpuscr_go_exit_instr</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:once_cpuscr_go_exit_instr</span><span class='rbracket'>]</span>
  <span class='ivar'>@nexus_command_width</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:nexus_command_width</span><span class='rbracket'>]</span>
  <span class='ivar'>@cpuscr_reg_width</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:cpuscr_reg_width</span><span class='rbracket'>]</span>

  <span class='comment'># Define nexus registers
</span>  <span class='id identifier rubyid_define_nexus_registers'>define_nexus_registers</span>

  <span class='comment'># Define CPU registers
</span>  <span class='id identifier rubyid_define_cpu_registers'>define_cpu_registers</span>

  <span class='ivar'>@owner</span> <span class='op'>=</span> <span class='id identifier rubyid_owner'>owner</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="cpuscr_reg_width-instance_method">
  
    - (<tt>Object</tt>) <strong>cpuscr_reg_width</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute cpuscr_reg_width</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 43</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cpuscr_reg_width'>cpuscr_reg_width</span>
  <span class='ivar'>@cpuscr_reg_width</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="nexus_command_width-instance_method">
  
    - (<tt>Object</tt>) <strong>nexus_command_width</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Nexus command width width of commands used in first DR pass to read/write a
Nexus register</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 41</span>

<span class='kw'>def</span> <span class='id identifier rubyid_nexus_command_width'>nexus_command_width</span>
  <span class='ivar'>@nexus_command_width</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="once_bypass_instr-instance_method">
  
    - (<tt>Object</tt>) <strong>once_bypass_instr</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The OnCE bypass instruction (BYPASS) OnCE command value to bypass OnCE</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_once_bypass_instr'>once_bypass_instr</span>
  <span class='ivar'>@once_bypass_instr</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="once_cpuscr_go_exit_instr-instance_method">
  
    - (<tt>Object</tt>) <strong>once_cpuscr_go_exit_instr</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute once_cpuscr_go_exit_instr</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 45</span>

<span class='kw'>def</span> <span class='id identifier rubyid_once_cpuscr_go_exit_instr'>once_cpuscr_go_exit_instr</span>
  <span class='ivar'>@once_cpuscr_go_exit_instr</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="once_nexus_access_instr-instance_method">
  
    - (<tt>Object</tt>) <strong>once_nexus_access_instr</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The OnCE Nexus access instruction (NEXUS-ACCESS) OnCE command value to
enable Nexus</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_once_nexus_access_instr'>once_nexus_access_instr</span>
  <span class='ivar'>@once_nexus_access_instr</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="once_ocmd_width-instance_method">
  
    - (<tt>Object</tt>) <strong>once_ocmd_width</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>OnCE Command Register (OCMD) width in bits OnCE (On-Chip Emulation)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 28</span>

<span class='kw'>def</span> <span class='id identifier rubyid_once_ocmd_width'>once_ocmd_width</span>
  <span class='ivar'>@once_ocmd_width</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="owner-instance_method">
  
    - (<tt>Object</tt>) <strong>owner</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the object that included the Nexus module, should always be the
top-level model</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 24</span>

<span class='kw'>def</span> <span class='id identifier rubyid_owner'>owner</span>
  <span class='ivar'>@owner</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="block_read_access-instance_method">
  
    - (<tt>Object</tt>) <strong>block_read_access</strong>(address, block_data = [], options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Block Read of memory-mapped resources for now only supports 32-bit data</p>

<p>address = address at start of block block_data = array of 32-bit values of
block data to read</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


391
392
393</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 391</span>

<span class='kw'>def</span> <span class='id identifier rubyid_block_read_access'>block_read_access</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_block_data'>block_data</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_block_write_access'>block_write_access</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_block_data'>block_data</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>write:</span> <span class='kw'>false</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="block_write_access-instance_method">
  
    - (<tt>Object</tt>) <strong>block_write_access</strong>(address, block_data = [], options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Block Write to memory-mapped resources for now only supports 32-bit data</p>

<p>address = address at start of block block_data = array of 32-bit values of
block data to write</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 351</span>

<span class='kw'>def</span> <span class='id identifier rubyid_block_write_access'>block_write_access</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_block_data'>block_data</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>write:</span> <span class='kw'>true</span><span class='comma'>,</span>          <span class='comment'># whether to write or read the block
</span>              <span class='label'>width:</span> <span class='int'>32</span>       <span class='comment'># width default to 32 bits
</span>          <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_block_data'>block_data</span><span class='period'>.</span><span class='id identifier rubyid_each_index'>each_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>==</span> <span class='int'>0</span>                                  <span class='comment'># first do single write access with count &gt; 1
</span>      <span class='id identifier rubyid_single_write_access'>single_write_access</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_block_data'>block_data</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>count:</span> <span class='id identifier rubyid_block_data'>block_data</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:width</span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='int'>32</span>
        <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_block_data'>block_data</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>+</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write</span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_write_nexus_register'>write_nexus_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_read_nexus_register'>read_nexus_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_i'>i</span><span class='period'>.</span><span class='id identifier rubyid_odd?'>odd?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:width</span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='int'>32</span>
      <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_block_data'>block_data</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_write_nexus_register'>write_nexus_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_read_nexus_register'>read_nexus_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:width</span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='int'>32</span>
        <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_block_data'>block_data</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>+</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write</span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_write_nexus_register'>write_nexus_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_read_nexus_register'>read_nexus_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="define_cpu_registers-instance_method">
  
    - (<tt>Object</tt>) <strong>define_cpu_registers</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137
138
139
140
141
142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_define_cpu_registers'>define_cpu_registers</span>
  <span class='id identifier rubyid_reg'>reg</span> <span class='symbol'>:cpuscr</span><span class='comma'>,</span> <span class='int'>0x0</span><span class='comma'>,</span> <span class='label'>size:</span> <span class='int'>192</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>191</span><span class='op'>..</span><span class='int'>160</span><span class='comma'>,</span> <span class='symbol'>:ctl</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>159</span><span class='op'>..</span><span class='int'>128</span><span class='comma'>,</span> <span class='symbol'>:ir</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>127</span><span class='op'>..</span><span class='int'>96</span><span class='comma'>,</span>  <span class='symbol'>:pc</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>95</span><span class='op'>..</span><span class='int'>64</span><span class='comma'>,</span>   <span class='symbol'>:msr</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>63</span><span class='op'>..</span><span class='int'>32</span><span class='comma'>,</span>   <span class='symbol'>:wbbrh</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>31</span><span class='op'>..</span><span class='int'>0</span><span class='comma'>,</span>    <span class='symbol'>:wbbrl</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="define_nexus_registers-instance_method">
  
    - (<tt>Object</tt>) <strong>define_nexus_registers</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define Nexus registers For now only those related to RWA will be defined.
RWA (read/write access) provides DMA-like access to memory-mapped resources
on the AHB system bus either while the processor is halted or during
runtime.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 105</span>

<span class='kw'>def</span> <span class='id identifier rubyid_define_nexus_registers'>define_nexus_registers</span>
  <span class='comment'># Each register has a Nexus Opcode, which we will use as &#39;address&#39; below, and
</span>  <span class='comment'>#  corresponding read addresses and write addresses
</span>
  <span class='comment'># RWCS - Read/Write Access Control Register
</span>  <span class='comment'>#        read addr = 0x0E, write addr = 0x0F
</span>  <span class='id identifier rubyid_reg'>reg</span> <span class='symbol'>:rwcs</span><span class='comma'>,</span> <span class='int'>0x0E</span><span class='comma'>,</span> <span class='label'>size:</span> <span class='int'>32</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>31</span><span class='comma'>,</span>     <span class='symbol'>:ac</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>30</span><span class='comma'>,</span>     <span class='symbol'>:rw</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>29</span><span class='op'>..</span><span class='int'>27</span><span class='comma'>,</span> <span class='symbol'>:sz</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>26</span><span class='op'>..</span><span class='int'>24</span><span class='comma'>,</span> <span class='symbol'>:map</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>23</span><span class='op'>..</span><span class='int'>22</span><span class='comma'>,</span> <span class='symbol'>:pr</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>15</span><span class='op'>..</span><span class='int'>2</span><span class='comma'>,</span>  <span class='symbol'>:cnt</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>1</span><span class='comma'>,</span>      <span class='symbol'>:err</span><span class='comma'>,</span> <span class='label'>writable:</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>0</span><span class='comma'>,</span>      <span class='symbol'>:dv</span><span class='comma'>,</span> <span class='label'>writable:</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='comment'># RWD - Read/Write Access Data
</span>  <span class='comment'>#       read addr = 0x12, write addr = 0x13
</span>  <span class='id identifier rubyid_reg'>reg</span> <span class='symbol'>:rwa</span><span class='comma'>,</span> <span class='int'>0x12</span><span class='comma'>,</span> <span class='label'>size:</span> <span class='int'>32</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>31</span><span class='op'>..</span><span class='int'>0</span><span class='comma'>,</span> <span class='symbol'>:addr</span>
  <span class='kw'>end</span>

  <span class='comment'># RWD - Read/Write Access Data
</span>  <span class='comment'>#       read addr = 0x14, write addr = 0x15
</span>  <span class='id identifier rubyid_reg'>reg</span> <span class='symbol'>:rwd</span><span class='comma'>,</span> <span class='int'>0x14</span><span class='comma'>,</span> <span class='label'>size:</span> <span class='int'>32</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_bit'>bit</span> <span class='int'>31</span><span class='op'>..</span><span class='int'>0</span><span class='comma'>,</span> <span class='symbol'>:data</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="disable_once-instance_method">
  
    - (<tt>Object</tt>) <strong>disable_once</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Disable OnCE</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173
174
175
176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 171</span>

<span class='kw'>def</span> <span class='id identifier rubyid_disable_once'>disable_once</span>
  <span class='kw'>if</span> <span class='ivar'>@ir_reg_value</span> <span class='op'>!=</span> <span class='id identifier rubyid_once_bypass_instr'>once_bypass_instr</span>
    <span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_write_ir'>write_ir</span> <span class='id identifier rubyid_once_bypass_instr'>once_bypass_instr</span><span class='comma'>,</span> <span class='label'>size:</span> <span class='id identifier rubyid_once_ocmd_width'>once_ocmd_width</span><span class='comma'>,</span> <span class='label'>msg:</span> <span class='id identifier rubyid_log2'>log2</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bypass OnCE: OnCE_Send(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_once_ocmd_width'>once_ocmd_width</span><span class='embexpr_end'>}</span><span class='tstring_content'>, 0x%02X)</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span><span class='id identifier rubyid_once_bypass_instr'>once_bypass_instr</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='ivar'>@ir_reg_value</span> <span class='op'>=</span> <span class='id identifier rubyid_once_bypass_instr'>once_bypass_instr</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enable_nexus_access-instance_method">
  
    - (<tt>Object</tt>) <strong>enable_nexus_access</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Enable Nexus module Loads NEXUS-ACCESS instruction into JTAG Instruction
Register (OnCE OCMD register). repeated calls will not generate vectors if
the instruction is already loaded</p>

<p>Optionally also accepts a block to allow temporary Nexus access</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_nexus'>nexus</span><span class='period'>.</span><span class='id identifier rubyid_enable_nexus_access'>enable_nexus_access</span> <span class='kw'>do</span>
   <span class='comment'># Do something with nexus enabled
</span><span class='kw'>end</span>
<span class='comment'># Nexus access disabled</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


159
160
161
162
163
164
165
166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 159</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enable_nexus_access'>enable_nexus_access</span>
  <span class='kw'>if</span> <span class='ivar'>@ir_reg_value</span> <span class='op'>!=</span> <span class='id identifier rubyid_once_nexus_access_instr'>once_nexus_access_instr</span>
    <span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_write_ir'>write_ir</span> <span class='id identifier rubyid_once_nexus_access_instr'>once_nexus_access_instr</span><span class='comma'>,</span> <span class='label'>size:</span> <span class='id identifier rubyid_once_ocmd_width'>once_ocmd_width</span><span class='comma'>,</span> <span class='label'>msg:</span> <span class='id identifier rubyid_log2'>log2</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Enable Nexus Access: OnCE_Send(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_once_ocmd_width'>once_ocmd_width</span><span class='embexpr_end'>}</span><span class='tstring_content'>, 0x%02X)</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span><span class='id identifier rubyid_once_nexus_access_instr'>once_nexus_access_instr</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='ivar'>@ir_reg_value</span> <span class='op'>=</span> <span class='id identifier rubyid_once_nexus_access_instr'>once_nexus_access_instr</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='kw'>yield</span>
    <span class='id identifier rubyid_disable_once'>disable_once</span>
  <span class='kw'>end</span>  <span class='comment'># whether to mark all bits in RWD for read
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exact_address-instance_method">
  
    - (<tt>Object</tt>) <strong>exact_address</strong>(reg_or_val, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Provides exact address value either if a defined register is provided or if
an address is provided</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


490
491
492
493
494
495
496
497
498
499
500
501</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 490</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exact_address'>exact_address</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_address'>address</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:addr</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:address</span><span class='rbracket'>]</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_address'>address</span>
    <span class='comment'># if no address provided as option then use register address
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_real_reg?'>real_reg?</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='rparen'>)</span>             <span class='comment'># if real register
</span>      <span class='id identifier rubyid_address'>address</span> <span class='op'>=</span> <span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='period'>.</span><span class='id identifier rubyid_address'>address</span>       <span class='comment'># use register address
</span>    <span class='kw'>else</span>
      <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>An :address option must be supplied when not providing a register to Nexus!\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_address'>address</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exact_data-instance_method">
  
    - (<tt>Object</tt>) <strong>exact_data</strong>(reg_or_val, _options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Provides exact data value either if a defined register is provided or if an
address is provided</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


505
506
507
508
509
510
511
512
513</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 505</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exact_data'>exact_data</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid__options'>_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='comment'># if no data provided as option then use register data
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_real_reg?'>real_reg?</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='rparen'>)</span>             <span class='comment'># if real register
</span>    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span>             <span class='comment'># use register value
</span>  <span class='kw'>else</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_reg_or_val'>reg_or_val</span>                  <span class='comment'># use reg_or_val passed as data
</span>  <span class='kw'>end</span>
  <span class='id identifier rubyid_data'>data</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exact_name-instance_method">
  
    - (<tt>Object</tt>) <strong>exact_name</strong>(reg_or_val, _options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Provide name of register, if real register passed otherwise given
&#39;undef&#39; as name</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


528
529
530
531
532
533
534
535</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 528</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exact_name'>exact_name</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid__options'>_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_real_reg?'>real_reg?</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='rparen'>)</span>             <span class='comment'># if real register
</span>    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>             <span class='comment'># use register name
</span>  <span class='kw'>else</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>undef</span><span class='tstring_end'>&#39;</span></span>                     <span class='comment'># undefined register
</span>  <span class='kw'>end</span>
  <span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exact_size-instance_method">
  
    - (<tt>Object</tt>) <strong>exact_size</strong>(reg_or_val, _options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Provide size of register if real register passed–</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_otherwise'>otherwise</span> <span class='id identifier rubyid_indicate'>indicate</span> <span class='id identifier rubyid_number'>number</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_bits'>bits</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_data'>data</span> <span class='id identifier rubyid_value'>value</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


517
518
519
520
521
522
523
524</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 517</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exact_size'>exact_size</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid__options'>_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_real_reg?'>real_reg?</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='rparen'>)</span>             <span class='comment'># if real register
</span>    <span class='id identifier rubyid_size'>size</span> <span class='op'>=</span> <span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>             <span class='comment'># use register size
</span>  <span class='kw'>else</span>
    <span class='id identifier rubyid_size'>size</span> <span class='op'>=</span> <span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>     <span class='comment'># get number of bits in value
</span>  <span class='kw'>end</span>
  <span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="go_exit-instance_method">
  
    - (<tt>Object</tt>) <strong>go_exit</strong>(code_start_address = 0x4) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


178
179
180
181
182
183
184
185
186
187</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 178</span>

<span class='kw'>def</span> <span class='id identifier rubyid_go_exit'>go_exit</span><span class='lparen'>(</span><span class='id identifier rubyid_code_start_address'>code_start_address</span> <span class='op'>=</span> <span class='int'>0x4</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_write_ir'>write_ir</span> <span class='id identifier rubyid_once_cpuscr_go_exit_instr'>once_cpuscr_go_exit_instr</span><span class='comma'>,</span> <span class='label'>size:</span> <span class='id identifier rubyid_once_ocmd_width'>once_ocmd_width</span><span class='comma'>,</span> <span class='label'>msg:</span> <span class='id identifier rubyid_log2'>log2</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Enabling CPUSCR register for read/write access</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_regs'>regs</span><span class='lparen'>(</span><span class='symbol'>:cpuscr</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_bit'>bit</span><span class='lparen'>(</span><span class='symbol'>:wbbrl</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='int'>0x00000000</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_regs'>regs</span><span class='lparen'>(</span><span class='symbol'>:cpuscr</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_bit'>bit</span><span class='lparen'>(</span><span class='symbol'>:wbbrh</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='int'>0x00000000</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_regs'>regs</span><span class='lparen'>(</span><span class='symbol'>:cpuscr</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_bit'>bit</span><span class='lparen'>(</span><span class='symbol'>:msr</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='int'>0x00000000</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_regs'>regs</span><span class='lparen'>(</span><span class='symbol'>:cpuscr</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_bit'>bit</span><span class='lparen'>(</span><span class='symbol'>:pc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_code_start_address'>code_start_address</span> <span class='op'>-</span> <span class='int'>4</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_regs'>regs</span><span class='lparen'>(</span><span class='symbol'>:cpuscr</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_bit'>bit</span><span class='lparen'>(</span><span class='symbol'>:ir</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='int'>0x7c0004ac</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_regs'>regs</span><span class='lparen'>(</span><span class='symbol'>:cpuscr</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_bit'>bit</span><span class='lparen'>(</span><span class='symbol'>:ctl</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='int'>0x00000000</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_write_dr'>write_dr</span> <span class='id identifier rubyid_regs'>regs</span><span class='lparen'>(</span><span class='symbol'>:cpuscr</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='label'>size:</span> <span class='id identifier rubyid_cpuscr_reg_width'>cpuscr_reg_width</span><span class='comma'>,</span> <span class='label'>msg:</span> <span class='id identifier rubyid_log2'>log2</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Writing GO+EXIT to CPUSCR</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="jtag-instance_method">
  
    - (<tt>Object</tt>) <strong>jtag</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the underlying JTAG driver.  If the owner has its own JTAG driver
then this will be returned, otherwise it will be a fall back driver
included by the Nexus module.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 18</span>

<span class='kw'>def</span> <span class='id identifier rubyid_jtag'>jtag</span>
  <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:jtag</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_jtag'>jtag</span> <span class='op'>:</span> <span class='id identifier rubyid_local_jtag'>local_jtag</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="local_jtag-instance_method">
  
    - (<tt>Object</tt>) <strong>local_jtag</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 13</span>

<span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbol'>:local_jtag</span><span class='comma'>,</span> <span class='symbol'>:jtag</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="log-instance_method">
  
    - (<tt>Object</tt>) <strong>log</strong>(msg) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


541
542
543</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 541</span>

<span class='kw'>def</span> <span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_log2'>log2</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="log2-instance_method">
  
    - (<tt>Object</tt>) <strong>log2</strong>(msg) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


537
538
539</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 537</span>

<span class='kw'>def</span> <span class='id identifier rubyid_log2'>log2</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='rparen'>)</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Nexus::Driver - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_msg'>msg</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_created-instance_method">
  
    - (<tt>Object</tt>) <strong>on_created</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


91
92</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 91</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_created'>on_created</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pin-instance_method">
  
    - (<tt>Object</tt>) <strong>pin</strong>(*args) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='pins-instance_method'>pins</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This proxies all pin requests from our local JTAG driver to our parent DUT
model</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 96</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pin'>pin</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_pin'>pin</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_data_only-instance_method">
  
    - (<tt>Object</tt>) <strong>read_data_only</strong>(reg_or_val, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Read data cycles only for RWD Register</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


277
278
279</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 277</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read_data_only'>read_data_only</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_write_data_only'>write_data_only</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>write:</span> <span class='kw'>false</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_nexus_register-instance_method">
  
    - (<tt>Object</tt>) <strong>read_nexus_register</strong>(reg_or_val, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Read a given Nexus register</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


233
234
235</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 233</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read_nexus_register'>read_nexus_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_write_nexus_register'>write_nexus_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>write:</span> <span class='kw'>false</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_register-instance_method">
  
    - (<tt>Object</tt>) <strong>read_register</strong>(reg_or_val, options = {}) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='read-instance_method'>read</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Read the given register (or system memory location) or given value from a
specified address reg_or_val          := register symbol to use – assumes
register preloaded with</p>

<pre class="code ruby"><code class="ruby">required data to use, can override by using :address option
in which case data to use provided here</code></pre>

<p><a href=":address">options</a>   := address to read from.  This is
mandatory in the case of the</p>

<pre class="code ruby"><code class="ruby">reg_or_val argument being a value (for data), if it is a
Register object then this is optional and if present then
will override the register&#39;s address.</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


483
484
485</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 483</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read_register'>read_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_write_register'>write_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>write:</span> <span class='kw'>false</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="real_reg?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>real_reg?</strong>(reg_or_val) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>determines whether real register or not</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


426
427
428</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 426</span>

<span class='kw'>def</span> <span class='id identifier rubyid_real_reg?'>real_reg?</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="single_read_access-instance_method">
  
    - (<tt>Object</tt>) <strong>single_read_access</strong>(address, data, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Single Read from memory-mapped resource for now only supports 32-bit data</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


342
343
344</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 342</span>

<span class='kw'>def</span> <span class='id identifier rubyid_single_read_access'>single_read_access</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_single_write_access'>single_write_access</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>write:</span> <span class='kw'>false</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="single_write_access-instance_method">
  
    - (<tt>Object</tt>) <strong>single_write_access</strong>(address, data, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Single Write to memory-mapped resource for now only supports 32-bit data</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 283</span>

<span class='kw'>def</span> <span class='id identifier rubyid_single_write_access'>single_write_access</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>write:</span>      <span class='kw'>true</span><span class='comma'>,</span>          <span class='comment'># whether to write or read the register
</span>              <span class='label'>undef:</span>      <span class='kw'>true</span><span class='comma'>,</span>          <span class='comment'># whether IPS being accessed is a register or undefined
</span>              <span class='label'>count:</span>      <span class='int'>1</span><span class='comma'>,</span>             <span class='comment'># by default use single address access mode
</span>              <span class='label'>overlay:</span>    <span class='kw'>false</span><span class='comma'>,</span>                         <span class='comment'># default: assume not a real register
</span>              <span class='label'>nexus_init:</span> <span class='kw'>true</span><span class='comma'>,</span>
              <span class='label'>width:</span>      <span class='int'>32</span><span class='comma'>,</span>      <span class='comment'># default write width to 32 bits
</span>          <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:width</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>8</span>
    <span class='id identifier rubyid_write_width'>write_width</span> <span class='op'>=</span> <span class='int'>0b0</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:width</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>16</span>
    <span class='id identifier rubyid_write_width'>write_width</span> <span class='op'>=</span> <span class='int'>0b1</span>
  <span class='kw'>elsif</span>  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:width</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>32</span>
    <span class='id identifier rubyid_write_width'>write_width</span> <span class='op'>=</span> <span class='int'>0b10</span>
  <span class='kw'>elsif</span>  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:width</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>64</span>
    <span class='id identifier rubyid_write_width'>write_width</span> <span class='op'>=</span> <span class='int'>0b11</span>
  <span class='kw'>else</span>
    <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Nexus 3 width supplied is invalid, defaulting to 32 bit width.</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:nexus_init</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_enable_nexus_access'>enable_nexus_access</span>
  <span class='kw'>end</span>
  <span class='comment'># Send command to write RWA reg
</span>  <span class='comment'># Send address value to RWA reg
</span>  <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwa</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_write_nexus_register'>write_nexus_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwa</span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='comment'># Send command to write RWCS reg
</span>  <span class='comment'># Send settings to RWCS
</span>  <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwcs</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_bits'>bits</span><span class='lparen'>(</span><span class='symbol'>:ac</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwcs</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_bits'>bits</span><span class='lparen'>(</span><span class='symbol'>:rw</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>0</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwcs</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_bits'>bits</span><span class='lparen'>(</span><span class='symbol'>:sz</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_write_width'>write_width</span><span class='rparen'>)</span>                 <span class='comment'># write_width, defaul value = 32 bits.
</span>  <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwcs</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_bits'>bits</span><span class='lparen'>(</span><span class='symbol'>:map</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='int'>0b000</span><span class='rparen'>)</span>                <span class='comment'># map select = primary
</span>  <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwcs</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_bits'>bits</span><span class='lparen'>(</span><span class='symbol'>:pr</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='int'>0b11</span><span class='rparen'>)</span>                  <span class='comment'># priority = highest
</span>  <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwcs</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_bits'>bits</span><span class='lparen'>(</span><span class='symbol'>:cnt</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='rparen'>)</span>      <span class='comment'># single access
</span>  <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwcs</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_bits'>bits</span><span class='lparen'>(</span><span class='symbol'>:err</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>                    <span class='comment'># read/write access error
</span>  <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwcs</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_bits'>bits</span><span class='lparen'>(</span><span class='symbol'>:dv</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>                     <span class='comment'># read/write access data valid
</span>  <span class='id identifier rubyid_write_nexus_register'>write_nexus_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwcs</span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write</span><span class='rbracket'>]</span>
    <span class='comment'># Send command to write RWD reg
</span>    <span class='comment'># Send data value to be written to RWD reg
</span>    <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_write_nexus_register'>write_nexus_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='symbol'>:address</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='comment'># If undefined reg, then mark all bits for read
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:undef</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span>
    <span class='kw'>end</span>
    <span class='comment'># Send command to read RWD reg
</span>    <span class='comment'># Read RWD reg value
</span>    <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_read_nexus_register'>read_nexus_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>==</span> <span class='symbol'>:address</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_data_only-instance_method">
  
    - (<tt>Object</tt>) <strong>write_data_only</strong>(reg_or_val, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Write data cycles only for a Register Used if only want data cycles for
overlay subroutines</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 239</span>

<span class='kw'>def</span> <span class='id identifier rubyid_write_data_only'>write_data_only</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>write:</span> <span class='kw'>true</span><span class='comma'>,</span>        <span class='comment'># whether to write or read
</span>            <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_exact_data'>exact_data</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='comment'># Size of RWD register being used for output
</span>  <span class='id identifier rubyid_size'>size</span> <span class='op'>=</span> <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>

  <span class='comment'># if reading a real register then need to handle copying over all data and flags
</span>  <span class='comment'># undefined regs will be handled in lower function so that default is to treat
</span>  <span class='comment'># as undefined reg (just simple accesses)
</span>  <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_overlay'>overlay</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span>  <span class='comment'># clear overlay flags if there, as sticky
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_real_reg?'>real_reg?</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_copy_all'>copy_all</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write</span><span class='rbracket'>]</span>
    <span class='comment'># Send command to write RWD reg
</span>    <span class='comment'># Send data value to be written to RWD reg
</span>    <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span><span class='lparen'>(</span><span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>size:</span> <span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='label'>cycle_last:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>includes_last_bit:</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='kw'>else</span>
    <span class='comment'># Mark all bits for read
</span>    <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span>

    <span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span><span class='lparen'>(</span><span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>size:</span> <span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='label'>read:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>cycle_last:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>includes_last_bit:</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='kw'>end</span>

  <span class='comment'># Clear flags so as to not affect subsequent reg reads/writes
</span>  <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_clear_flags'>clear_flags</span>
  <span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='period'>.</span><span class='id identifier rubyid_clear_flags'>clear_flags</span> <span class='kw'>if</span> <span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:clear_flags</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_nexus_register-instance_method">
  
    - (<tt>Object</tt>) <strong>write_nexus_register</strong>(reg_or_val, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Write a given Nexus register</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 190</span>

<span class='kw'>def</span> <span class='id identifier rubyid_write_nexus_register'>write_nexus_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>write:</span>    <span class='kw'>true</span><span class='comma'>,</span>        <span class='comment'># whether to write or read
</span>              <span class='label'>overlay:</span>  <span class='kw'>false</span><span class='comma'>,</span>
              <span class='label'>care_out:</span> <span class='kw'>false</span>
            <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_addr'>addr</span> <span class='op'>=</span> <span class='id identifier rubyid_exact_address'>exact_address</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_addr'>addr</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write</span><span class='rbracket'>]</span> <span class='comment'># offset address by 1 since writing
</span>  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_exact_data'>exact_data</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_size'>size</span> <span class='op'>=</span> <span class='id identifier rubyid_exact_size'>exact_size</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_exact_name'>exact_name</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Write Nexus Reg: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'> at 0x%04X with 0x%08X</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Read Nexus Reg: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'> at 0x%04X with 0x%08X</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='comment'># first pass : select register via nexus command
</span>  <span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_write_dr'>write_dr</span> <span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='label'>size:</span> <span class='id identifier rubyid_nexus_command_width'>nexus_command_width</span><span class='comma'>,</span> <span class='label'>msg:</span> <span class='id identifier rubyid_log2'>log2</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OnCE_Send(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_nexus_command_width'>nexus_command_width</span><span class='embexpr_end'>}</span><span class='tstring_content'>, 0x%02X)</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span><span class='id identifier rubyid_addr'>addr</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:overlay</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>true</span>
    <span class='comment'># if we want to overlay expect values, then
</span>    <span class='comment'>#   put dummy data in vectors to force them to be uncompressable by pattern generator.
</span>    <span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='int'>0x55555555</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_exact_data'>exact_data</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:capture</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write</span><span class='rbracket'>]</span>
    <span class='comment'># second pass : pass data to register
</span>    <span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_write_dr'>write_dr</span> <span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='label'>overlay:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:overlay</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>overlay_label:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:overlay_label</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>size:</span> <span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='label'>msg:</span> <span class='id identifier rubyid_log2'>log2</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OnCE_Send(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'>, 0x%08X)</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span><span class='id identifier rubyid_data'>data</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:care_output</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span>
    <span class='kw'>end</span>
    <span class='comment'># second pass : read data from register
</span>    <span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_read_dr'>read_dr</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='label'>overlay:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:overlay</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>overlay_label:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:overlay_label</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>size:</span> <span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='label'>msg:</span> <span class='id identifier rubyid_log2'>log2</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OnCE_Read(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'>, 0x%08X)</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span><span class='id identifier rubyid_data'>data</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_register-instance_method">
  
    - (<tt>Object</tt>) <strong>write_register</strong>(reg_or_val, options = {}) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='write-instance_method'>write</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Write the given register (or system memory location) or given value to a
specified address reg_or_val          := register symbol to use – assumes
register preloaded with</p>

<pre class="code ruby"><code class="ruby">required data to use, can override by using :address option
in which case data to use provided here</code></pre>

<p><a href=":address">options</a>   := address to write to.  This is mandatory
in the case of the</p>

<pre class="code ruby"><code class="ruby">reg_or_val argument being a value (for data), if it is a
Register object then this is optional and if present then
will override the register&#39;s address.</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_nexus/driver.rb', line 440</span>

<span class='kw'>def</span> <span class='id identifier rubyid_write_register'>write_register</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>write:</span>   <span class='kw'>true</span><span class='comma'>,</span>    <span class='comment'># whether to write or read the register
</span>              <span class='label'>overlay:</span> <span class='kw'>false</span>
          <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_address'>address</span> <span class='op'>=</span> <span class='id identifier rubyid_exact_address'>exact_address</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_exact_data'>exact_data</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_size'>size</span> <span class='op'>=</span> <span class='id identifier rubyid_exact_size'>exact_size</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_exact_name'>exact_name</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span>

  <span class='id identifier rubyid_op'>op</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Write</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Read</span><span class='tstring_end'>&#39;</span></span>

  <span class='comment'># Set undefined register flag to override option for simple_write_access below
</span>  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:undef</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='op'>!</span><span class='id identifier rubyid_real_reg?'>real_reg?</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='rparen'>)</span>

  <span class='comment'># if reading a real register then need to handle copying over all data and flags
</span>  <span class='comment'># undefined regs will be handled in lower function so that default is to treat
</span>  <span class='comment'># as undefined reg (just simple accesses)
</span>  <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_overlay'>overlay</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span>  <span class='comment'># clear overlay flags if there, as sticky
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_real_reg?'>real_reg?</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_copy_all'>copy_all</span><span class='lparen'>(</span><span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>**************************** NEXUS REGISTER </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'> BEGIN ****************************</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>- </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_op'>op</span><span class='embexpr_end'>}</span><span class='tstring_content'> Register </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>: addr: 0x%08X, data: 0x%08X\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_single_write_access'>single_write_access</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>**************************** NEXUS REGISTER </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_op'>op</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'> END ****************************</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># Clear flags so as to not affect subsequent reg reads/writes
</span>  <span class='id identifier rubyid_reg'>reg</span><span class='lparen'>(</span><span class='symbol'>:rwd</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_clear_flags'>clear_flags</span>
  <span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='period'>.</span><span class='id identifier rubyid_clear_flags'>clear_flags</span> <span class='kw'>if</span> <span class='id identifier rubyid_reg_or_val'>reg_or_val</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:clear_flags</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Tue Sep  1 09:39:14 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.1.5).
</div>

  </body>
</html>