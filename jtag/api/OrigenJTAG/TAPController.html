<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: OrigenJTAG::TAPController
  
    &mdash; Origen JTAG 0.22.3
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "OrigenJTAG::TAPController";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (T)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../OrigenJTAG.html" title="OrigenJTAG (module)">OrigenJTAG</a></span></span>
     &raquo; 
    <span class="title">TAPController</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: OrigenJTAG::TAPController
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="Driver.html" title="OrigenJTAG::Driver (class)">Driver</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/origen_jtag/tap_controller.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Provides methods specifically for controlling the state of the TAP Controller</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="STATES-constant" class="">STATES =
          <div class="docstring">
  <div class="discussion">
    
<p>Map of internal state symbols to human readable names</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='label'>reset:</span>          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Test-Logic-Reset</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>idle:</span>           <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Run-Test/Idle</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>select_dr_scan:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Select-DR-Scan</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>capture_dr:</span>     <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Capture-DR</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>shift_dr:</span>       <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Shift-DR</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>exit1_dr:</span>       <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Exit1-DR</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>pause_dr:</span>       <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Pause-DR</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>exit2_dr:</span>       <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Exit2-DR</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>update_dr:</span>      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Update-DR</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>select_ir_scan:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Select-IR-Scan</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>capture_ir:</span>     <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Capture-IR</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>shift_ir:</span>       <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Shift-IR</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>exit1_ir:</span>       <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Exit1-IR</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>pause_ir:</span>       <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Pause-IR</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>exit2_ir:</span>       <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Exit2-IR</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>update_ir:</span>      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Update-IR</span><span class='tstring_end'>&#39;</span></span>
<span class='rbrace'>}</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#state-instance_method" title="#state (instance method)">#<strong>state</strong>  &#x21d2; Object </a>
    

    
      (also: #current_state)
    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the current state of the JTAG TAP Controller.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#idle-instance_method" title="#idle (instance method)">#<strong>idle</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Forces the state to Run-Test/Idle regardless of the current state.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pause_dr-instance_method" title="#pause_dr (instance method)">#<strong>pause_dr</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Goto Pause-DR state then exit back to Run-Test/Idle.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pause_ir-instance_method" title="#pause_ir (instance method)">#<strong>pause_ir</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Goto Pause-IR state then exit back to Run-Test/Idle.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset-instance_method" title="#reset (instance method)">#<strong>reset</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Force state to Test-Logic-Reset regardless of the current state.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shift_dr-instance_method" title="#shift_dr (instance method)">#<strong>shift_dr</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Goto Shift-DR state then exit back to Run-Test/Idle.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shift_ir-instance_method" title="#shift_ir (instance method)">#<strong>shift_ir</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Goto Shift-IR state then exit back to Run-Test/Idle.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#state_str-instance_method" title="#state_str (instance method)">#<strong>state_str</strong>  &#x21d2; Object </a>
    

    
      (also: #current_state_str)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the current state as a human readable string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_state-instance_method" title="#update_state (instance method)">#<strong>update_state</strong>(state)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="state-instance_method">
  
    #<strong>state</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='current_state-instance_method'>current_state</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the current state of the JTAG TAP Controller</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_jtag/tap_controller.rb', line 26</span>

<span class='kw'>def</span> <span class='id identifier rubyid_state'>state</span>
  <span class='ivar'>@state</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="idle-instance_method">
  
    #<strong>idle</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Forces the state to Run-Test/Idle regardless of the current state.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


330
331
332
333
334
335
336
337
338
339</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_jtag/tap_controller.rb', line 330</span>

<span class='kw'>def</span> <span class='id identifier rubyid_idle'>idle</span>
  <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Force transition to Run-Test/Idle...</span><span class='tstring_end'>&#39;</span></span>
  <span class='comment'># From the JTAG2IPS block guide holding TMS high for 5 cycles
</span>  <span class='comment'># will force it to reset regardless of the state, let&#39;s give
</span>  <span class='comment'># it 6 for luck:
</span>  <span class='int'>6</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='comment'># Now a couple of cycles low to get it into idle
</span>  <span class='int'>2</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:idle</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pause_dr-instance_method">
  
    #<strong>pause_dr</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Goto Pause-DR state then exit back to Run-Test/Idle</p>

<p>This method can be nested inside of a shift_dr block to transition into the Pause-DR state and then back to Shift-DR</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Trandition into Pause-DR</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># State is Run-Test/Idle
</span><span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_pause_dr'>pause_dr</span> <span class='kw'>do</span>
  <span class='comment'># State is Pause-DR
</span><span class='kw'>end</span>
<span class='comment'># State is Run-Test/Idle</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>Switching between Shift-DR and Pause-DR</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># State is Run-Test/Idle
</span><span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_shift_dr'>shift_dr</span> <span class='kw'>do</span>
  <span class='comment'># State is Shift-DR
</span>  <span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_pause_dr'>pause_dr</span> <span class='kw'>do</span>
    <span class='comment'># State is Pause-DR
</span>  <span class='kw'>end</span>
  <span class='comment'># State is Shift-DR
</span><span class='kw'>end</span>
<span class='comment'># State is Run-Test/Idle</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_jtag/tap_controller.rb', line 138</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pause_dr'>pause_dr</span>
  <span class='id identifier rubyid_validate_state'>validate_state</span><span class='lparen'>(</span><span class='symbol'>:idle</span><span class='comma'>,</span> <span class='symbol'>:shift_dr</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Transition to Pause-DR...</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='symbol'>:idle</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Select-DR-Scan
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:select_dr_scan</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Capture-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:capture_dr</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Exit1-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:exit1_dr</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Pause-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:pause_dr</span>
    <span class='kw'>yield</span>
    <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Transition to Run-Test/Idle...</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Exit2-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:exit2_dr</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Update-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:update_dr</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Run-Test/Idle
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:idle</span>
  <span class='kw'>else</span>  <span class='comment'># shift_dr
</span>    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Exit1-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:exit1_dr</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Pause-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:pause_dr</span>
    <span class='kw'>yield</span>
    <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Transition to Shift-DR...</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Exit2-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:exit2_dr</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Shift-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:shift_dr</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pause_ir-instance_method">
  
    #<strong>pause_ir</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Goto Pause-IR state then exit back to Run-Test/Idle</p>

<p>This method can be nested inside of a shift_ir block to transition into the Pause-IR state and then back to Shift-IR</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Trandition into Pause-iR</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># State is Run-Test/Idle
</span><span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_pause_ir'>pause_ir</span> <span class='kw'>do</span>
  <span class='comment'># State is Pause-IR
</span><span class='kw'>end</span>
<span class='comment'># State is Run-Test/Idle</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>Switching between Shift-IR and Pause-IR</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># State is Run-Test/Idle
</span><span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_shift_ir'>shift_ir</span> <span class='kw'>do</span>
  <span class='comment'># State is Shift-IR
</span>  <span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_pause_ir'>pause_ir</span> <span class='kw'>do</span>
    <span class='comment'># State is Pause-IR
</span>  <span class='kw'>end</span>
  <span class='comment'># State is Shift-IR
</span><span class='kw'>end</span>
<span class='comment'># State is Run-Test/Idle</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_jtag/tap_controller.rb', line 286</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pause_ir'>pause_ir</span>
  <span class='id identifier rubyid_validate_state'>validate_state</span><span class='lparen'>(</span><span class='symbol'>:idle</span><span class='comma'>,</span> <span class='symbol'>:shift_ir</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Transition to Pause-IR...</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='symbol'>:idle</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Select-DR-Scan
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:select_dr_scan</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Select-IR-Scan
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:select_ir_scan</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Capture-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:capture_ir</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Exit1-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:exit1_ir</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Pause-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:pause_ir</span>
    <span class='kw'>yield</span>
    <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Transition to Run-Test/Idle...</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Exit2-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:exit2_ir</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Update-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:update_ir</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Run-Test/Idle
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:idle</span>
  <span class='kw'>else</span> <span class='comment'># :shift_ir
</span>    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Exit1-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:exit1_ir</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Pause-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:pause_ir</span>
    <span class='kw'>yield</span>
    <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Transition to Shift-IR...</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Exit2-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:exit2_ir</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Shift-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:shift_ir</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset-instance_method">
  
    #<strong>reset</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Force state to Test-Logic-Reset regardless of the current state</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


343
344
345
346
347</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_jtag/tap_controller.rb', line 343</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reset'>reset</span>
  <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Force transition to Test-Logic-Reset...</span><span class='tstring_end'>&#39;</span></span>
  <span class='comment'># JTAG reset
</span>  <span class='int'>6</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shift_dr-instance_method">
  
    #<strong>shift_dr</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Goto Shift-DR state then exit back to Run-Test/Idle</p>

<p>This method can be nested inside of a pause_dr block to transition into the Shift-DR state and then back to Pause-DR</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Trandition into Shift-DR</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># State is Run-Test/Idle
</span><span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_shift_dr'>shift_dr</span> <span class='kw'>do</span>
  <span class='comment'># State is Shift-DR
</span><span class='kw'>end</span>
<span class='comment'># State is Run-Test/Idle</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>Switching between Pause-DR and Shift-DR</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># State is Run-Test/Idle
</span><span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_pause_dr'>pause_dr</span> <span class='kw'>do</span>
  <span class='comment'># State is Pause-DR
</span>  <span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_shift_dr'>shift_dr</span> <span class='kw'>do</span>
    <span class='comment'># State is Shift-DR
</span>  <span class='kw'>end</span>
  <span class='comment'># State is Pause-DR
</span><span class='kw'>end</span>
<span class='comment'># State is Run-Test/Idle</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_jtag/tap_controller.rb', line 52</span>

<span class='kw'>def</span> <span class='id identifier rubyid_shift_dr'>shift_dr</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>start_state:</span> <span class='symbol'>:idle</span><span class='comma'>,</span>   <span class='comment'># Allowed start states: :idle, :select_dr_scan, :update_ir, :update_dr
</span>    <span class='label'>end_state:</span>   <span class='symbol'>:idle</span>    <span class='comment'># Allowed end states: :idle, :update_dr
</span>  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:start_state</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:idle</span>  <span class='comment'># allow for pause_dr state also if called from pause_dr block
</span>    <span class='id identifier rubyid_validate_state'>validate_state</span><span class='lparen'>(</span><span class='symbol'>:idle</span><span class='comma'>,</span> <span class='symbol'>:pause_dr</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:state_state</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:select_dr_scan</span>
    <span class='id identifier rubyid_validate_state'>validate_state</span><span class='lparen'>(</span><span class='symbol'>:select_dr_scan</span><span class='comma'>,</span> <span class='symbol'>:pause_dr</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:state_state</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:update_dr</span>
    <span class='id identifier rubyid_validate_state'>validate_state</span><span class='lparen'>(</span><span class='symbol'>:update_dr</span><span class='comma'>,</span> <span class='symbol'>:pause_dr</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:state_state</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:update_ir</span>
    <span class='id identifier rubyid_validate_state'>validate_state</span><span class='lparen'>(</span><span class='symbol'>:update_ir</span><span class='comma'>,</span> <span class='symbol'>:pause_dr</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Transition to Shift-DR...</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='symbol'>:idle</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='symbol'>:select_dr_scan</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='symbol'>:update_ir</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='symbol'>:update_dr</span>
    <span class='comment'># Non-pause states
</span>    <span class='kw'>unless</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='symbol'>:select_dr_scan</span>
      <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Select-DR-Scan
</span>      <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:select_dr_scan</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Capture-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:capture_dr</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Shift-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:shift_dr</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Write DR: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:read</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Read DR: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:read</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>DR Data</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_log'>log</span> <span class='id identifier rubyid_msg'>msg</span><span class='comma'>,</span> <span class='label'>always:</span> <span class='kw'>true</span> <span class='kw'>do</span>
      <span class='kw'>yield</span>
      <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Transition to Run-Test/Idle...</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>if</span> <span class='ivar'>@last_data_vector_shifted</span>
        <span class='ivar'>@last_data_vector_shifted</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Exit1-DR
</span>        <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:exit1_dr</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Update-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:update_dr</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:end_state</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:idle</span>
      <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Run-Test/Idle
</span>      <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:idle</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span> <span class='comment'># :pause_dr
</span>    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Exit2-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:exit2_dr</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Shift-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:shift_dr</span>
    <span class='kw'>yield</span>
    <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Transition to Pause-DR...</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Exit1-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:exit1_dr</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Pause-DR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:pause_dr</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shift_ir-instance_method">
  
    #<strong>shift_ir</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Goto Shift-IR state then exit back to Run-Test/Idle</p>

<p>This method can be nested inside of a pause_ir block to transition into the Shift-IR state and then back to Pause-IR</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Trandition into Shift-IR</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># State is Run-Test/Idle
</span><span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_shift_ir'>shift_ir</span> <span class='kw'>do</span>
  <span class='comment'># State is Shift-IR
</span><span class='kw'>end</span>
<span class='comment'># State is Run-Test/Idle</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>Switching between Pause-IR and Shift-IR</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># State is Run-Test/Idle
</span><span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_pause_ir'>pause_ir</span> <span class='kw'>do</span>
  <span class='comment'># State is Pause-IR
</span>  <span class='id identifier rubyid_jtag'>jtag</span><span class='period'>.</span><span class='id identifier rubyid_shift_ir'>shift_ir</span> <span class='kw'>do</span>
    <span class='comment'># State is Shift-IR
</span>  <span class='kw'>end</span>
  <span class='comment'># State is Pause-IR
</span><span class='kw'>end</span>
<span class='comment'># State is Run-Test/Idle</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_jtag/tap_controller.rb', line 195</span>

<span class='kw'>def</span> <span class='id identifier rubyid_shift_ir'>shift_ir</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>start_state:</span> <span class='symbol'>:idle</span><span class='comma'>,</span>   <span class='comment'># Allowed start states: :idle, :select_ir_scan
</span>    <span class='label'>end_state:</span>   <span class='symbol'>:idle</span>    <span class='comment'># Allowed end states: :idle, :update_ir, :select_dr_scan
</span>  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:start_state</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:idle</span>
    <span class='id identifier rubyid_validate_state'>validate_state</span><span class='lparen'>(</span><span class='symbol'>:idle</span><span class='comma'>,</span> <span class='symbol'>:pause_ir</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_validate_state'>validate_state</span><span class='lparen'>(</span><span class='symbol'>:select_ir_scan</span><span class='comma'>,</span> <span class='symbol'>:pause_ir</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Transition to Shift-IR...</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='symbol'>:idle</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='symbol'>:select_ir_scan</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='symbol'>:select_ir_scan</span>
      <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Select-DR-Scan
</span>      <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:select_dr_scan</span>
      <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Select-IR-Scan
</span>      <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:select_ir_scan</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Capture-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:capture_ir</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Shift-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:shift_ir</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Write IR: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:write</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:read</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Read IR: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:read</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>IR Data</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_log'>log</span> <span class='id identifier rubyid_msg'>msg</span><span class='comma'>,</span> <span class='label'>always:</span> <span class='kw'>true</span> <span class='kw'>do</span>
      <span class='kw'>yield</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:end_state</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:idle</span>
        <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Transition to Run-Test/Idle...</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:end_state</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:update_ir</span>
        <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Transition to Update-IR...</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:end_state</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:select_dr_scan</span>
        <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Transition to Select-DR-Scan...</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='ivar'>@last_data_vector_shifted</span>
        <span class='ivar'>@last_data_vector_shifted</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Exit1-IR
</span>        <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:exit1_ir</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Update-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:update_ir</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:end_state</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:idle</span>
      <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Run-Test/Idle
</span>      <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:idle</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:end_state</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:select_dr_scan</span>
      <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Select-DR-Scan
</span>      <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:select_dr_scan</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span> <span class='comment'># :pause_ir
</span>    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Exit2-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:exit2_ir</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Shift-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:shift_ir</span>
    <span class='kw'>yield</span>
    <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Transition to Pause-IR...</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Exit1-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:exit1_ir</span>
    <span class='id identifier rubyid_tms!'>tms!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>  <span class='comment'># =&gt; Pause-IR
</span>    <span class='id identifier rubyid_update_state'>update_state</span> <span class='symbol'>:pause_ir</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="state_str-instance_method">
  
    #<strong>state_str</strong>  &#x21d2; <tt>Object</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='current_state_str-instance_method'>current_state_str</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the current state as a human readable string</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


323
324
325</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_jtag/tap_controller.rb', line 323</span>

<span class='kw'>def</span> <span class='id identifier rubyid_state_str'>state_str</span>
  <span class='const'><span class='object_link'><a href="#STATES-constant" title="OrigenJTAG::TAPController::STATES (constant)">STATES</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_state'>state</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_state-instance_method">
  
    #<strong>update_state</strong>(state)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


349
350
351
352
353
354</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_jtag/tap_controller.rb', line 349</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_state'>update_state</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='rparen'>)</span>
  <span class='ivar'>@state</span> <span class='op'>=</span> <span class='id identifier rubyid_state'>state</span>
  <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Current state: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_state_str'>state_str</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_log_state_changes'>log_state_changes</span>
  <span class='ivar'>@listeners</span> <span class='op'>||=</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_listeners_for'>listeners_for</span><span class='lparen'>(</span><span class='symbol'>:on_jtag_state_change</span><span class='rparen'>)</span>
  <span class='ivar'>@listeners</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_l'>l</span><span class='op'>|</span> <span class='id identifier rubyid_l'>l</span><span class='period'>.</span><span class='id identifier rubyid_on_jtag_state_change'>on_jtag_state_change</span><span class='lparen'>(</span><span class='ivar'>@state</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Jan  2 18:34:22 2024 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-2.6.6).
</div>

    </div>
  </body>
</html>