<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Origen::Utility::Diff
  
    &mdash; Origen Core 0.44.0
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Origen::Utility::Diff";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (D)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Origen.html" title="Origen (module)">Origen</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Utility.html" title="Origen::Utility (module)">Utility</a></span></span>
     &raquo; 
    <span class="title">Diff</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Origen::Utility::Diff
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Origen::Utility::Diff</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/origen/utility/diff.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Diff provides an easy way to diff the contents of two files while
optionally ignoring any differences in file comments.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_differ'>differ</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Origen.html" title="Origen (module)">Origen</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Utility.html" title="Origen::Utility (module)">Utility</a></span></span><span class='op'>::</span><span class='const'>Diff</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Origen::Utility::Diff#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='symbol'>:ignore_blank_lines</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:comment_char</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='id identifier rubyid_differ'>differ</span><span class='period'>.</span><span class='id identifier rubyid_file_a'>file_a</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="../../Origen.html" title="Origen (module)">Origen</a></span></span><span class='period'>.</span><span class='id identifier rubyid_root'><span class='object_link'><a href="../../Origen.html#root-class_method" title="Origen.root (method)">root</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/my/file1.v</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_differ'>differ</span><span class='period'>.</span><span class='id identifier rubyid_file_b'>file_b</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="../../Origen.html" title="Origen (module)">Origen</a></span></span><span class='period'>.</span><span class='id identifier rubyid_root'><span class='object_link'><a href="../../Origen.html#root-class_method" title="Origen.root (method)">root</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/my/file2.v</span><span class='tstring_end'>&quot;</span></span>

<span class='kw'>if</span> <span class='id identifier rubyid_differ'>differ</span><span class='period'>.</span><span class='id identifier rubyid_diffs?'>diffs?</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You&#39;ve changed something!</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#comment_char-instance_method" title="#comment_char (instance method)">#<strong>comment_char</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set this attribute to the comment char used by the given file and comments
will be ignored by the diff.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#file_a-instance_method" title="#file_a (instance method)">#<strong>file_a</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Full path to File A, this attribute must be set before calling any diff
actions.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#file_b-instance_method" title="#file_b (instance method)">#<strong>file_b</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Full path to File B, this attribute must be set before calling any diff
actions.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ignore_blank_lines-instance_method" title="#ignore_blank_lines (instance method)">#<strong>ignore_blank_lines</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>When true the diff will ignore blank lines, or lines that contain only
whitespace.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#diffs%3F-instance_method" title="#diffs? (instance method)">#<strong>diffs?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if there are differences between the two files based on the
current configuration.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(options = {})  &#x21d2; Diff </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new diff, attributes can be initialized via the options, or can be
set later.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(options = {})  &#x21d2; <tt><span class='object_link'><a href="" title="Origen::Utility::Diff (class)">Diff</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new diff, attributes can be initialized via the options, or can be
set later.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


28
29
30
31
32
33
34
35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/utility/diff.rb', line 28</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_options'><span class='object_link'><a href="../GlobalMethods.html#options-instance_method" title="Origen::GlobalMethods#options (method)">options</a></span></span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@file_a</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="../GlobalMethods.html#options-instance_method" title="Origen::GlobalMethods#options (method)">options</a></span></span><span class='lbracket'>[</span><span class='symbol'>:file_a</span><span class='rbracket'>]</span>
  <span class='ivar'>@file_b</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="../GlobalMethods.html#options-instance_method" title="Origen::GlobalMethods#options (method)">options</a></span></span><span class='lbracket'>[</span><span class='symbol'>:file_b</span><span class='rbracket'>]</span>
  <span class='ivar'>@ignore_blank_lines</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="../GlobalMethods.html#options-instance_method" title="Origen::GlobalMethods#options (method)">options</a></span></span><span class='lbracket'>[</span><span class='symbol'>:ignore_blank_lines</span><span class='rbracket'>]</span>
  <span class='ivar'>@comment_char</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="../GlobalMethods.html#options-instance_method" title="Origen::GlobalMethods#options (method)">options</a></span></span><span class='lbracket'>[</span><span class='symbol'>:comment_char</span><span class='rbracket'>]</span>
  <span class='ivar'>@suspend_string</span> <span class='op'>=</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="../GlobalMethods.html#options-instance_method" title="Origen::GlobalMethods#options (method)">options</a></span></span><span class='lbracket'>[</span><span class='symbol'>:suspend_string</span><span class='rbracket'>]</span> <span class='comment'># permits suspending diff check based on a string
</span>  <span class='ivar'>@resume_string</span>  <span class='op'>=</span> <span class='id identifier rubyid_options'><span class='object_link'><a href="../GlobalMethods.html#options-instance_method" title="Origen::GlobalMethods#options (method)">options</a></span></span><span class='lbracket'>[</span><span class='symbol'>:resume_string</span><span class='rbracket'>]</span>  <span class='comment'># permits resuming diff check based on a string
</span>  <span class='ivar'>@suspend_diff</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@resume_diff</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="comment_char=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="comment_char-instance_method">
  
    #<strong>comment_char</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Set this attribute to the comment char used by the given file and comments
will be ignored by the diff. An array of strings can be passed in to mask
multiple comment identifiers.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/utility/diff.rb', line 24</span>

<span class='kw'>def</span> <span class='id identifier rubyid_comment_char'>comment_char</span>
  <span class='ivar'>@comment_char</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="file_a=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="file_a-instance_method">
  
    #<strong>file_a</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Full path to File A, this attribute must be set before calling any diff
actions</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/utility/diff.rb', line 16</span>

<span class='kw'>def</span> <span class='id identifier rubyid_file_a'>file_a</span>
  <span class='ivar'>@file_a</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="file_b=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="file_b-instance_method">
  
    #<strong>file_b</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Full path to File B, this attribute must be set before calling any diff
actions</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/utility/diff.rb', line 18</span>

<span class='kw'>def</span> <span class='id identifier rubyid_file_b'>file_b</span>
  <span class='ivar'>@file_b</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="ignore_blank_lines=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="ignore_blank_lines-instance_method">
  
    #<strong>ignore_blank_lines</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>When true the diff will ignore blank lines, or lines that contain only
whitespace</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/utility/diff.rb', line 20</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ignore_blank_lines'>ignore_blank_lines</span>
  <span class='ivar'>@ignore_blank_lines</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="diffs?-instance_method">
  
    #<strong>diffs?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if there are differences between the two files based on the
current configuration</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/utility/diff.rb', line 41</span>

<span class='kw'>def</span> <span class='id identifier rubyid_diffs?'>diffs?</span>
  <span class='id identifier rubyid_initialize_counters'>initialize_counters</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_content_a'>content_a</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_readlines'>readlines</span><span class='lparen'>(</span><span class='ivar'>@file_a</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_content_b'>content_b</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_readlines'>readlines</span><span class='lparen'>(</span><span class='ivar'>@file_b</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_changes'>changes</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_lines_remaining'>lines_remaining</span> <span class='op'>=</span> <span class='kw'>true</span>

  <span class='kw'>while</span> <span class='id identifier rubyid_lines_remaining'>lines_remaining</span>
    <span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='id identifier rubyid_get_next_line_a'>get_next_line_a</span><span class='lparen'>(</span><span class='id identifier rubyid_content_a'>content_a</span><span class='rparen'>)</span>   <span class='comment'># Get the next vectors
</span>    <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_get_next_line_b'>get_next_line_b</span><span class='lparen'>(</span><span class='id identifier rubyid_content_b'>content_b</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_a'>a</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_b'>b</span>       <span class='comment'># If both patterns finished
</span>      <span class='id identifier rubyid_lines_remaining'>lines_remaining</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_a'>a</span> <span class='op'>||</span> <span class='op'>!</span><span class='id identifier rubyid_b'>b</span>    <span class='comment'># If only 1 pattern finished
</span>      <span class='id identifier rubyid_lines_remaining'>lines_remaining</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='id identifier rubyid_changes'>changes</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>unless</span> <span class='ivar'>@suspend_diff</span>     <span class='comment'># There are extra vectors in one of the patterns
</span>    <span class='kw'>elsif</span> <span class='id identifier rubyid_a'>a</span> <span class='op'>!=</span> <span class='id identifier rubyid_b'>b</span>      <span class='comment'># If the vectors don&#39;t match
</span>      <span class='id identifier rubyid_changes'>changes</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>unless</span> <span class='ivar'>@suspend_diff</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='ivar'>@resume_diff</span> <span class='comment'># resume checking diffs for subsequent lines
</span>      <span class='ivar'>@suspend_diff</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='ivar'>@resume_diff</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_changes'>changes</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu May 16 16:37:17 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 (ruby-2.5.1).
</div>

    </div>
  </body>
</html>