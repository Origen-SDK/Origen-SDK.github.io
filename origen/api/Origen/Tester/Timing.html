<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: Origen::Tester::Timing
  
    &mdash; Origen Core 0.1.3
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!Origen/Tester/Timing.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (T)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Origen.html" title="Origen (module)">Origen</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Tester.html" title="Origen::Tester (module)">Tester</a></span></span>
     &raquo; 
    <span class="title">Timing</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: Origen::Tester::Timing
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
    <dt class="r1">Included in:</dt>
    <dd class="r1"><span class='object_link'><a href="../Tester.html" title="Origen::Tester (module)">Origen::Tester</a></span></dd>
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/origen/tester/timing.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Timing/Timeset.html" title="Origen::Tester::Timing::Timeset (class)">Timeset</a></span>
    
  
</p>







  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#before_timeset_change-instance_method" title="#before_timeset_change (instance method)">- (Object) <strong>before_timeset_change</strong>(_options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#called_timesets-instance_method" title="#called_timesets (instance method)">- (Object) <strong>called_timesets</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#count-instance_method" title="#count (instance method)">- (Object) <strong>count</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This function can be used to generate a clock or some other repeating
function that spans accross a range of vectors.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_period_in_ns-instance_method" title="#current_period_in_ns (instance method)">- (Object) <strong>current_period_in_ns</strong> </a>
    

    
      (also: #current_period, #period)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_timeset-instance_method" title="#current_timeset (instance method)">- (Object) <strong>current_timeset</strong> </a>
    

    
      (also: #timeset)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cycles_to_ms-instance_method" title="#cycles_to_ms (instance method)">- (Object) <strong>cycles_to_ms</strong>(cycles) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cycles_to_time-instance_method" title="#cycles_to_time (instance method)">- (Object) <strong>cycles_to_time</strong>(cycles) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Convert the supplied number of cycles to a time, based on the SoC defined
cycle period.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cycles_to_ts-instance_method" title="#cycles_to_ts (instance method)">- (Object) <strong>cycles_to_ts</strong>(cycles) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Cycles to tenths of a second.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cycles_to_us-instance_method" title="#cycles_to_us (instance method)">- (Object) <strong>cycles_to_us</strong>(cycles) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delay-instance_method" title="#delay (instance method)">- (Object) <strong>delay</strong>(cycles, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>This should not be called directly, call via tester#wait.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#max_repeat_loop-instance_method" title="#max_repeat_loop (instance method)">- (Object) <strong>max_repeat_loop</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ms_to_cycles-instance_method" title="#ms_to_cycles (instance method)">- (Object) <strong>ms_to_cycles</strong>(time) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ns_to_cycles-instance_method" title="#ns_to_cycles (instance method)">- (Object) <strong>ns_to_cycles</strong>(time) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#s_to_cycles-instance_method" title="#s_to_cycles (instance method)">- (Object) <strong>s_to_cycles</strong>(time) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_timeset-instance_method" title="#set_timeset (instance method)">- (Object) <strong>set_timeset</strong>(timeset, period_in_ns = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the timeset for the next vectors, this will remain in place until the
next time this is called.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#timeset_changed-instance_method" title="#timeset_changed (instance method)">- (Object) <strong>timeset_changed</strong>(timeset) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#us_to_cycles-instance_method" title="#us_to_cycles (instance method)">- (Object) <strong>us_to_cycles</strong>(time) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#wait-instance_method" title="#wait (instance method)">- (Object) <strong>wait</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Cause the pattern to wait.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="before_timeset_change-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>before_timeset_change</strong>(_options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 77</span>

<span class='kw'>def</span> <span class='id identifier rubyid_before_timeset_change'>before_timeset_change</span><span class='lparen'>(</span><span class='id identifier rubyid__options'>_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="called_timesets-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>called_timesets</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


189
190
191</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 189</span>

<span class='kw'>def</span> <span class='id identifier rubyid_called_timesets'>called_timesets</span>
  <span class='ivar'>@called_timesets</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="count-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>count</strong>(options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This function can be used to generate a clock or some other repeating
function that spans accross a range of vectors. The period of each cycle
and the duration of the sequence are supplied via the following options:</p>
<ul><li>
<p>:period_in_cycles</p>
</li><li>
<p>:period_in_ns</p>
</li><li>
<p>:period_in_us</p>
</li><li>
<p>:period_in_ms</p>
</li><li>
<p>:duration_in_cycles</p>
</li><li>
<p>:duration_in_ns</p>
</li><li>
<p>:duration_in_us</p>
</li><li>
<p>:duration_in_ms</p>
</li></ul>

<p>If multiple definitions for either option are supplied then they will be
added together.</p>

<h4 id="label-Example">Example</h4>

<pre class="code ruby"><code class="ruby"><span class='comment'># Supply a clock pulse on :pinA for 100ms
</span><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span><span class='lparen'>(</span><span class='symbol'>:period_in_cycles</span> <span class='op'>=&gt;</span> <span class='int'>10</span><span class='comma'>,</span> <span class='symbol'>:duration_in_ms</span> <span class='op'>=&gt;</span> <span class='int'>100</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='gvar'>$top</span><span class='period'>.</span><span class='id identifier rubyid_pin'>pin</span><span class='lparen'>(</span><span class='symbol'>:pinA</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_drive!'>drive!</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='gvar'>$top</span><span class='period'>.</span><span class='id identifier rubyid_pin'>pin</span><span class='lparen'>(</span><span class='symbol'>:pinA</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_drive!'>drive!</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 233</span>

<span class='kw'>def</span> <span class='id identifier rubyid_count'>count</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>period_in_cycles:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>period_in_ms:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>period_in_us:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>period_in_ns:</span> <span class='int'>0</span><span class='comma'>,</span>
              <span class='label'>duration_in_cycles:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>duration_in_ms:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>duration_in_us:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>duration_in_ns:</span> <span class='int'>0</span>
            <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_period_cycles'>period_cycles</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:period_in_cycles</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_ms_to_cycles'>ms_to_cycles</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:period_in_ms</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>+</span>
                  <span class='id identifier rubyid_us_to_cycles'>us_to_cycles</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:period_in_us</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id identifier rubyid_ns_to_cycles'>ns_to_cycles</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:period_in_ns</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_duration_cycles'>duration_cycles</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:duration_in_cycles</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_ms_to_cycles'>ms_to_cycles</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:duration_in_ms</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>+</span>
                    <span class='id identifier rubyid_us_to_cycles'>us_to_cycles</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:duration_in_us</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id identifier rubyid_ns_to_cycles'>ns_to_cycles</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:duration_in_ns</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_total'>total</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_total'>total</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_duration_cycles'>duration_cycles</span>
    <span class='id identifier rubyid_wait'>wait</span><span class='lparen'>(</span><span class='label'>time_in_cycles:</span> <span class='id identifier rubyid_period_cycles'>period_cycles</span><span class='rparen'>)</span>
    <span class='kw'>yield</span>								<span class='comment'># Return control back to caller
</span>    <span class='id identifier rubyid_total'>total</span> <span class='op'>+=</span> <span class='id identifier rubyid_period_cycles'>period_cycles</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_period_in_ns-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>current_period_in_ns</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='current_period-instance_method'>current_period</span>, <span id='period-instance_method'>period</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


193
194
195
196
197
198
199</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 193</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_period_in_ns'>current_period_in_ns</span>
  <span class='kw'>if</span> <span class='ivar'>@timeset</span>
    <span class='ivar'>@timeset</span><span class='period'>.</span><span class='id identifier rubyid_period_in_ns'>period_in_ns</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>No timeset has been specified yet!</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_timeset-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>current_timeset</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='timeset-instance_method'>timeset</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 203</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_timeset'>current_timeset</span>
  <span class='ivar'>@timeset</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cycles_to_ms-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>cycles_to_ms</strong>(cycles) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 180</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cycles_to_ms'>cycles_to_ms</span><span class='lparen'>(</span><span class='id identifier rubyid_cycles'>cycles</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_cycles'>cycles</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='id identifier rubyid_current_period_in_ns'>current_period_in_ns</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='lparen'>(</span><span class='int'>1000</span> <span class='op'>*</span> <span class='int'>1000</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_ceil'>ceil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cycles_to_time-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>cycles_to_time</strong>(cycles) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Convert the supplied number of cycles to a time, based on the SoC defined
cycle period</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 209</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cycles_to_time'>cycles_to_time</span><span class='lparen'>(</span><span class='id identifier rubyid_cycles'>cycles</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='lparen'>(</span><span class='id identifier rubyid_cycles'>cycles</span> <span class='op'>*</span> <span class='id identifier rubyid_current_period_in_ns'>current_period_in_ns</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='int'>1_000_000_000</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cycles_to_ts-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>cycles_to_ts</strong>(cycles) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Cycles to tenths of a second</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


185
186
187</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 185</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cycles_to_ts'>cycles_to_ts</span><span class='lparen'>(</span><span class='id identifier rubyid_cycles'>cycles</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_cycles'>cycles</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='id identifier rubyid_current_period_in_ns'>current_period_in_ns</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='lparen'>(</span><span class='int'>1000</span> <span class='op'>*</span> <span class='int'>1000</span> <span class='op'>*</span> <span class='int'>100</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_ceil'>ceil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cycles_to_us-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>cycles_to_us</strong>(cycles) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 176</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cycles_to_us'>cycles_to_us</span><span class='lparen'>(</span><span class='id identifier rubyid_cycles'>cycles</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_cycles'>cycles</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='id identifier rubyid_current_period_in_ns'>current_period_in_ns</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='lparen'>(</span><span class='int'>1000</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_ceil'>ceil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delay-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>delay</strong>(cycles, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>This should not be called directly, call via tester#wait</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146
147
148
149
150
151
152
153
154</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delay'>delay</span><span class='lparen'>(</span><span class='id identifier rubyid_cycles'>cycles</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_cycles'>cycles</span> <span class='op'>/</span> <span class='id identifier rubyid_max_repeat_loop'>max_repeat_loop</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
      <span class='kw'>yield</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>repeat:</span> <span class='id identifier rubyid_max_repeat_loop'>max_repeat_loop</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_cycle'>cycle</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>repeat:</span> <span class='id identifier rubyid_max_repeat_loop'>max_repeat_loop</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>repeat:</span> <span class='lparen'>(</span><span class='id identifier rubyid_cycles'>cycles</span> <span class='op'>%</span> <span class='id identifier rubyid_max_repeat_loop'>max_repeat_loop</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_cycle'>cycle</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>repeat:</span> <span class='lparen'>(</span><span class='id identifier rubyid_cycles'>cycles</span> <span class='op'>%</span> <span class='id identifier rubyid_max_repeat_loop'>max_repeat_loop</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="max_repeat_loop-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>max_repeat_loop</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


156
157
158</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 156</span>

<span class='kw'>def</span> <span class='id identifier rubyid_max_repeat_loop'>max_repeat_loop</span>
  <span class='ivar'>@max_repeat_loop</span> <span class='op'>||</span> <span class='int'>65_535</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ms_to_cycles-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>ms_to_cycles</strong>(time) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 164</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ms_to_cycles'>ms_to_cycles</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='int'>1000</span> <span class='op'>*</span> <span class='int'>1000</span> <span class='op'>/</span> <span class='id identifier rubyid_current_period_in_ns'>current_period_in_ns</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_int'>to_int</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ns_to_cycles-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>ns_to_cycles</strong>(time) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 172</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ns_to_cycles'>ns_to_cycles</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='id identifier rubyid_current_period_in_ns'>current_period_in_ns</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_int'>to_int</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="s_to_cycles-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>s_to_cycles</strong>(time) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 160</span>

<span class='kw'>def</span> <span class='id identifier rubyid_s_to_cycles'>s_to_cycles</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='int'>1000</span> <span class='op'>*</span> <span class='int'>1000</span> <span class='op'>*</span> <span class='int'>1000</span> <span class='op'>/</span> <span class='id identifier rubyid_current_period_in_ns'>current_period_in_ns</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_int'>to_int</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_timeset-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_timeset</strong>(timeset, period_in_ns = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Set the timeset for the next vectors, this will remain in place until the
next time this is called.</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_set_timeset'>set_timeset</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bist_25mhz</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>40</span><span class='rparen'>)</span>
</code></pre>

<p>This method also accepts a block in which case the contained vectors will
generate with the supplied timeset and subsequent vectors will return to
the previous timeset automatically.</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_set_timeset'>set_timeset</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bist_25mhz</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>40</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_cycle'>cycle</span>
<span class='kw'>end</span>
</code></pre>

<p>The arguments can also be supplied as a single array, or not at all. In the
latter case the existing timeset will simply be preserved. This is useful
if you have timesets that can be conditionally set based on the target.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Target 1
</span><span class='gvar'>$soc</span><span class='period'>.</span><span class='id identifier rubyid_readout_timeset'>readout_timeset</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>readout</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>120</span><span class='rbracket'>]</span>
<span class='comment'># Target 2
</span><span class='gvar'>$soc</span><span class='period'>.</span><span class='id identifier rubyid_readout_timeset'>readout_timeset</span> <span class='op'>=</span> <span class='kw'>false</span>

<span class='comment'># This code is compatible with both targets, in the first case the timeset will switch
</span><span class='comment'># over, in the second case the existing timeset will be preserved.
</span><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_set_timeset'>set_timeset</span><span class='lparen'>(</span><span class='gvar'>$soc</span><span class='period'>.</span><span class='id identifier rubyid_readout_timeset'>readout_timeset</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_cycle'>cycle</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 41</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_timeset'>set_timeset</span><span class='lparen'>(</span><span class='id identifier rubyid_timeset'>timeset</span><span class='comma'>,</span> <span class='id identifier rubyid_period_in_ns'>period_in_ns</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_timeset'>timeset</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_timeset'>timeset</span><span class='comma'>,</span> <span class='id identifier rubyid_period_in_ns'>period_in_ns</span> <span class='op'>=</span> <span class='id identifier rubyid_timeset'>timeset</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_timeset'>timeset</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_timeset'>timeset</span> <span class='op'>||=</span> <span class='ivar'>@timeset</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_timeset'>timeset</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Timeset</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>You must supply a period_in_ns argument to set_timeset</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_period_in_ns'>period_in_ns</span>
    <span class='id identifier rubyid_timeset'>timeset</span> <span class='op'>=</span> <span class='const'>Timeset</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='id identifier rubyid_timeset'>timeset</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='comma'>,</span> <span class='label'>period_in_ns:</span> <span class='id identifier rubyid_period_in_ns'>period_in_ns</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_called_timesets'>called_timesets</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_timeset'>timeset</span> <span class='kw'>unless</span> <span class='id identifier rubyid_called_timesets'>called_timesets</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_timeset'>timeset</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_original'>original</span> <span class='op'>=</span> <span class='ivar'>@timeset</span>
    <span class='id identifier rubyid_timeset_changed'>timeset_changed</span><span class='lparen'>(</span><span class='id identifier rubyid_timeset'>timeset</span><span class='rparen'>)</span>
    <span class='ivar'>@timeset</span> <span class='op'>=</span> <span class='id identifier rubyid_timeset'>timeset</span>
    <span class='kw'>yield</span>
    <span class='id identifier rubyid_timeset_changed'>timeset_changed</span><span class='lparen'>(</span><span class='id identifier rubyid_original'>original</span><span class='rparen'>)</span>
    <span class='ivar'>@timeset</span> <span class='op'>=</span> <span class='id identifier rubyid_original'>original</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_timeset_changed'>timeset_changed</span><span class='lparen'>(</span><span class='id identifier rubyid_timeset'>timeset</span><span class='rparen'>)</span>
    <span class='ivar'>@timeset</span> <span class='op'>=</span> <span class='id identifier rubyid_timeset'>timeset</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="timeset_changed-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>timeset_changed</strong>(timeset) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66
67
68
69
70
71
72
73
74
75</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 64</span>

<span class='kw'>def</span> <span class='id identifier rubyid_timeset_changed'>timeset_changed</span><span class='lparen'>(</span><span class='id identifier rubyid_timeset'>timeset</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_last_vector'>last_vector</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_last_vector'>last_vector</span><span class='period'>.</span><span class='id identifier rubyid_timeset'>timeset</span> <span class='op'>!=</span> <span class='id identifier rubyid_timeset'>timeset</span>
    <span class='id identifier rubyid_change'>change</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>old:</span> <span class='id identifier rubyid_last_vector'>last_vector</span><span class='period'>.</span><span class='id identifier rubyid_timeset'>timeset</span><span class='comma'>,</span> <span class='label'>new:</span> <span class='id identifier rubyid_timeset'>timeset</span> <span class='rbrace'>}</span>
    <span class='comment'># Suppress any duplicate calls
</span>    <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@_last_timeset_change</span> <span class='op'>||</span>
       <span class='lparen'>(</span><span class='ivar'>@_last_timeset_change</span><span class='lbracket'>[</span><span class='symbol'>:new</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='id identifier rubyid_change'>change</span><span class='lbracket'>[</span><span class='symbol'>:new</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span>
         <span class='ivar'>@_last_timeset_change</span><span class='lbracket'>[</span><span class='symbol'>:old</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='id identifier rubyid_change'>change</span><span class='lbracket'>[</span><span class='symbol'>:old</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_before_timeset_change'>before_timeset_change</span><span class='lparen'>(</span><span class='id identifier rubyid_change'>change</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='ivar'>@_last_timeset_change</span> <span class='op'>=</span> <span class='id identifier rubyid_change'>change</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="us_to_cycles-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>us_to_cycles</strong>(time) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 168</span>

<span class='kw'>def</span> <span class='id identifier rubyid_us_to_cycles'>us_to_cycles</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='int'>1000</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_current_period_in_ns'>current_period_in_ns</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_int'>to_int</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="wait-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>wait</strong>(options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Cause the pattern to wait. The following options are available to help you
specify the time to wait:</p>
<ul><li>
<p>:cycles - delays specified in raw cycles, the test model is responsible for
translating this into a sequence of valid repeat statements</p>
</li><li>
<p>:time_in_ns - time specified in nano-seconds</p>
</li><li>
<p>:time_in_us - time specified in micro-seconds</p>
</li><li>
<p>:time_in_ms - time specified in milli-seconds</p>
</li><li>
<p>:time_in_s - time specified in seconds</p>
</li></ul>

<p>If more than one option is supplied they will get added together to give a
final delay time expressed in cycles.</p>

<h4 id="label-Examples">Examples</h4>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span><span class='lparen'>(</span><span class='symbol'>:cycles</span> <span class='op'>=&gt;</span> <span class='int'>100</span><span class='comma'>,</span> <span class='symbol'>:time_in_ns</span> <span class='op'>=&gt;</span> <span class='int'>200</span><span class='rparen'>)</span>   <span class='comment'># Wait for 100 cycles + 200ns
</span></code></pre>

<p>This method can also be used to trigger a match loop in which case the
supplied time becomes the time out for the match. See the J750#match method
for full details of the available options.</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span><span class='lparen'>(</span><span class='symbol'>:match</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:state</span> <span class='op'>=&gt;</span> <span class='symbol'>:high</span><span class='comma'>,</span> <span class='symbol'>:pin</span> <span class='op'>=&gt;</span> <span class='gvar'>$top</span><span class='period'>.</span><span class='id identifier rubyid_pin'>pin</span><span class='lparen'>(</span><span class='symbol'>:done</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='symbol'>:time_in_ms</span> <span class='op'>=&gt;</span> <span class='int'>500</span><span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/timing.rb', line 95</span>

<span class='kw'>def</span> <span class='id identifier rubyid_wait'>wait</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>cycles:</span>         <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>time_in_cycles:</span> <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>time_in_us:</span>     <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>time_in_ns:</span>     <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>time_in_ms:</span>     <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>time_in_s:</span>      <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>match:</span>          <span class='kw'>false</span><span class='comma'>,</span>   <span class='comment'># Set to true to invoke a match loop where the supplied delay
</span>    <span class='comment'># will become the timeout duration
</span>  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_cycles'>cycles</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_cycles'>cycles</span> <span class='op'>+=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:cycles</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:time_in_cycles</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_cycles'>cycles</span> <span class='op'>+=</span> <span class='id identifier rubyid_s_to_cycles'>s_to_cycles</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:time_in_s</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cycles'>cycles</span> <span class='op'>+=</span> <span class='id identifier rubyid_ms_to_cycles'>ms_to_cycles</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:time_in_ms</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cycles'>cycles</span> <span class='op'>+=</span> <span class='id identifier rubyid_us_to_cycles'>us_to_cycles</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:time_in_us</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cycles'>cycles</span> <span class='op'>+=</span> <span class='id identifier rubyid_ns_to_cycles'>ns_to_cycles</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:time_in_ns</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_time'>time</span> <span class='op'>=</span> <span class='id identifier rubyid_cycles'>cycles</span> <span class='op'>*</span> <span class='id identifier rubyid_current_period_in_ns'>current_period_in_ns</span>   <span class='comment'># Total delay in ns
</span>  <span class='kw'>case</span>
    <span class='kw'>when</span> <span class='id identifier rubyid_time'>time</span> <span class='op'>&lt;</span> <span class='int'>1000</span>                      <span class='comment'># When less than 1us
</span>      <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Wait for </span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a maximum of </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:match</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time'>time</span><span class='embexpr_end'>}</span><span class='tstring_content'>ns</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>when</span> <span class='id identifier rubyid_time'>time</span> <span class='op'>&lt;</span> <span class='int'>1_000_000</span>                   <span class='comment'># When less than 1ms
</span>      <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Wait for </span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a maximum of </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:match</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='int'>1000</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_round'>round</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>us</span><span class='tstring_end'>&quot;</span></span>        <span class='comment'># Display delay in us
</span>    <span class='kw'>when</span> <span class='id identifier rubyid_time'>time</span> <span class='op'>&lt;</span> <span class='int'>1_000_000_000</span>                <span class='comment'># When less than 1s
</span>      <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Wait for </span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a maximum of </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:match</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='int'>1_000_000</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_round'>round</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>ms</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Wait for </span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a maximum of </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:match</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>%.2fs</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='int'>1_000_000_000</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_cycles'>cycles</span> <span class='op'>&gt;</span> <span class='int'>0</span>   <span class='comment'># Allow this function to be called with 0 in which case it will just return
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:match</span><span class='rbracket'>]</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
        <span class='id identifier rubyid_match_block'>match_block</span><span class='lparen'>(</span><span class='id identifier rubyid_cycles'>cycles</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='kw'>yield</span> <span class='rbrace'>}</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_cycles'>cycles</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_delay'>delay</span><span class='lparen'>(</span><span class='id identifier rubyid_cycles'>cycles</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Mon Jul 13 17:26:18 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.2.2).
</div>

  </body>
</html>