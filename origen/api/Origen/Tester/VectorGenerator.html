<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: Origen::Tester::VectorGenerator
  
    &mdash; Origen Core 0.2.5
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!Origen/Tester/VectorGenerator.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (V)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Origen.html" title="Origen (module)">Origen</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Tester.html" title="Origen::Tester (module)">Tester</a></span></span>
     &raquo; 
    <span class="title">VectorGenerator</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: Origen::Tester::VectorGenerator
  
  
  
</h1>

<dl class="box">
  
  
    
      <dt class="r1">Extended by:</dt>
      <dd class="r1">ActiveSupport::Concern</dd>
      
    
  
    
  
  
    <dt class="r2">Included in:</dt>
    <dd class="r2"><span class='object_link'><a href="../Tester.html" title="Origen::Tester (module)">Origen::Tester</a></span></dd>
    
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/origen/tester/vector_generator.rb</dd>
  
</dl>
<div class="clear"></div>








  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#_render-instance_method" title="#_render (instance method)">- (Object) <strong>_render</strong>(method) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_microcode_to_last_or_cycle-instance_method" title="#add_microcode_to_last_or_cycle (instance method)">- (Object) <strong>add_microcode_to_last_or_cycle</strong>(code) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Adds the given microcode to the last vector if possible.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#before_write_pattern_line-instance_method" title="#before_write_pattern_line (instance method)">- (Object) <strong>before_write_pattern_line</strong>(line) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Tester models can overwrite this if they wish to inject any additional
pattern lines at final pattern dump time.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#compressable_vector%3F-instance_method" title="#compressable_vector? (instance method)">- (Boolean) <strong>compressable_vector?</strong>(vec) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_pin_vals-instance_method" title="#current_pin_vals (instance method)">- (Object) <strong>current_pin_vals</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cycle_count-instance_method" title="#cycle_count (instance method)">- (Object) <strong>cycle_count</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>init cycle count when first accessed, otherwise return value.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dec_vec_count-instance_method" title="#dec_vec_count (instance method)">- (Object) <strong>dec_vec_count</strong>(num = 1) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>decrement vector count.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dont_compress-instance_method" title="#dont_compress (instance method)">- (Object) <strong>dont_compress</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dont_compress%3D-instance_method" title="#dont_compress= (instance method)">- (Object) <strong>dont_compress=</strong>(val) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#expand_vector-instance_method" title="#expand_vector (instance method)">- (Object) <strong>expand_vector</strong>(vec) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>expands (uncompresses to pattern) vector if desired or leaves it as is
allows for tracking and formatting of vector if comment then return without
modification.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#format-instance_method" title="#format (instance method)">- (Object) <strong>format</strong>(vector_array, section) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Final pass of a generator vector array which returns lines suitable for
writing to the output file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#format_pin_state-instance_method" title="#format_pin_state (instance method)">- (Object) <strong>format_pin_state</strong>(pin) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#format_vector-instance_method" title="#format_vector (instance method)">- (Object) <strong>format_vector</strong>(_vec) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_pingroup-instance_method" title="#get_pingroup (instance method)">- (Object) <strong>get_pingroup</strong>(pin) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inc_cycle_count-instance_method" title="#inc_cycle_count (instance method)">- (Object) <strong>inc_cycle_count</strong>(num = 1) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>increment cycle count.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inc_vec_count-instance_method" title="#inc_vec_count (instance method)">- (Object) <strong>inc_vec_count</strong>(num = 1) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>increment vector count.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inhibit_pin-instance_method" title="#inhibit_pin (instance method)">- (Object) <strong>inhibit_pin</strong>(*pins) </a>
    

    
      (also: #inhibit_pins)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Call to prevent the given pins from appearing in the generated vectors.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inhibited_pins-instance_method" title="#inhibited_pins (instance method)">- (Object) <strong>inhibited_pins</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an array of pin IDs that are currently inhibited (will not be
included when vectors are generated).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#last_object-instance_method" title="#last_object (instance method)">- (Object) <strong>last_object</strong>(offset = 0) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#last_vector-instance_method" title="#last_vector (instance method)">- (Object) <strong>last_vector</strong>(offset = 0) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#multi_mode_optimize-instance_method" title="#multi_mode_optimize (instance method)">- (Object) <strong>multi_mode_optimize</strong>(vec, _options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#optimize-instance_method" title="#optimize (instance method)">- (Object) <strong>optimize</strong>(vec, options = {}) </a>
    

    
      (also: #buffer)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ordered_pins-instance_method" title="#ordered_pins (instance method)">- (Object) <strong>ordered_pins</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ordered_pins_cache-instance_method" title="#ordered_pins_cache (instance method)">- (Object) <strong>ordered_pins_cache</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Cache the pin ordering for later use since all vectors should be formatted
the same.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pingroup_map-instance_method" title="#pingroup_map (instance method)">- (Object) <strong>pingroup_map</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pipeline-instance_method" title="#pipeline (instance method)">- (Object) <strong>pipeline</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#preset_next_vector-instance_method" title="#preset_next_vector (instance method)">- (Object) <strong>preset_next_vector</strong>(attrs = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Allows the attributes for the next vector to be setup prior to generating
it.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#push_comment-instance_method" title="#push_comment (instance method)">- (Object) <strong>push_comment</strong>(msg) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#push_microcode-instance_method" title="#push_microcode (instance method)">- (Object) <strong>push_microcode</strong>(code, options = {}) </a>
    

    
      (also: #microcode)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#push_vector-instance_method" title="#push_vector (instance method)">- (Object) <strong>push_vector</strong>(attrs = {}) </a>
    

    
      (also: #vector)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Called by every $tester.cycle command to push a vector to the stage object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#render-instance_method" title="#render (instance method)">- (Object) <strong>render</strong>(template, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Render content directly into a pattern, any options will be passed to the
template.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#render_body-instance_method" title="#render_body (instance method)">- (Object) <strong>render_body</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Same as the render method, except the template method should be called
body_template.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#render_footer-instance_method" title="#render_footer (instance method)">- (Object) <strong>render_footer</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>If the tester defines a method named footer_template this method will
compile whatever template file is returned by that method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#render_header-instance_method" title="#render_header (instance method)">- (Object) <strong>render_header</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>If the tester defines a method named header_template this method will
compile whatever template file is returned by that method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#render_template-instance_method" title="#render_template (instance method)">- (Object) <strong>render_template</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>If the tester defines a method named template this method will compile
whatever template file is returned by that method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_cycle_count-instance_method" title="#reset_cycle_count (instance method)">- (Object) <strong>reset_cycle_count</strong>(num = 0) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>reset_cycle_count.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stage-instance_method" title="#stage (instance method)">- (Object) <strong>stage</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#track_and_format_vector-instance_method" title="#track_and_format_vector (instance method)">- (Object) <strong>track_and_format_vector</strong>(vec) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Update tracking info (stats object) and allow for any additional formatting
via format_vector method if overridden.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_pin_from_formatted_state-instance_method" title="#update_pin_from_formatted_state (instance method)">- (Object) <strong>update_pin_from_formatted_state</strong>(pin, state) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_vector-instance_method" title="#update_vector (instance method)">- (Object) <strong>update_vector</strong>(attrs = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_vector_pin_val-instance_method" title="#update_vector_pin_val (instance method)">- (Object) <strong>update_vector_pin_val</strong>(pin, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#vec_count-instance_method" title="#vec_count (instance method)">- (Object) <strong>vec_count</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>init vector count when first accessed, otherwise return value.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#vector_group_size-instance_method" title="#vector_group_size (instance method)">- (Object) <strong>vector_group_size</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#vector_group_size%3D-instance_method" title="#vector_group_size= (instance method)">- (Object) <strong>vector_group_size=</strong>(number) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_vector_group_size-instance_method" title="#with_vector_group_size (instance method)">- (Object) <strong>with_vector_group_size</strong>(number) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="_render-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>_render</strong>(method) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144
145
146
147
148
149
150
151
152
153
154
155
156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 142</span>

<span class='kw'>def</span> <span class='id identifier rubyid__render'>_render</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span>  <span class='comment'># :nodoc:
</span>  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_template'>template</span> <span class='op'>=</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span>
    <span class='comment'># Record the current file, this can be used to resolve any relative path
</span>    <span class='comment'># references in the file about to be compiled
</span>    <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_file_handler'>file_handler</span><span class='period'>.</span><span class='id identifier rubyid_current_file'>current_file</span> <span class='op'>=</span> <span class='id identifier rubyid_template'>template</span>
    <span class='comment'># Ran into crosstalk problems when rendering ERB templates recursively, setting eoutvar based
</span>    <span class='comment'># on the name of the file will causes each template to be rendered into its own &#39;bank&#39;.
</span>    <span class='comment'># Not sure why the final gsub is needed but seems to fail to parse correctly otherwise.
</span>    <span class='id identifier rubyid_eoutvar'>eoutvar</span> <span class='op'>=</span> <span class='const'>Pathname</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.*</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.*</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='comment'># Make the file name available to the template
</span>    <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_generator'>generator</span><span class='period'>.</span><span class='id identifier rubyid_compiler'>compiler</span><span class='period'>.</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:file</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_template'>template</span>
    <span class='id identifier rubyid_push_microcode'>push_microcode</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_generator'>generator</span><span class='period'>.</span><span class='id identifier rubyid_compiler'>compiler</span><span class='period'>.</span><span class='id identifier rubyid_insert'>insert</span><span class='lparen'>(</span><span class='const'>ERB</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_erb_trim_mode'>erb_trim_mode</span><span class='comma'>,</span> <span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_microcode_to_last_or_cycle-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>add_microcode_to_last_or_cycle</strong>(code) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Adds the given microcode to the last vector if possible. If not possible
(meaning the vector already contains microcode) then a new cycle will be
added with the given microcode.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


244
245
246
247</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 244</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_microcode_to_last_or_cycle'>add_microcode_to_last_or_cycle</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cycle'>cycle</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_stage'>stage</span><span class='period'>.</span><span class='id identifier rubyid_last_vector'>last_vector</span> <span class='op'>||</span> <span class='id identifier rubyid_stage'>stage</span><span class='period'>.</span><span class='id identifier rubyid_last_vector'>last_vector</span><span class='period'>.</span><span class='id identifier rubyid_has_microcode?'>has_microcode?</span>
  <span class='id identifier rubyid_stage'>stage</span><span class='period'>.</span><span class='id identifier rubyid_last_vector'>last_vector</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='label'>microcode:</span> <span class='id identifier rubyid_code'>code</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="before_write_pattern_line-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>before_write_pattern_line</strong>(line) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Tester models can overwrite this if they wish to inject any additional
pattern lines at final pattern dump time</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


291
292
293</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 291</span>

<span class='kw'>def</span> <span class='id identifier rubyid_before_write_pattern_line'>before_write_pattern_line</span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='rparen'>)</span>
  <span class='lbracket'>[</span><span class='id identifier rubyid_line'>line</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="compressable_vector?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>compressable_vector?</strong>(vec) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


378
379
380
381</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 378</span>

<span class='kw'>def</span> <span class='id identifier rubyid_compressable_vector?'>compressable_vector?</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='rparen'>)</span>
  <span class='op'>!</span><span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_compress'>compress</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Vector</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_has_microcode?'>has_microcode?</span> <span class='op'>&amp;&amp;</span>
     <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_pin_vals'>pin_vals</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_dont_compress'>dont_compress</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_pin_vals-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>current_pin_vals</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


565
566
567</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 565</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_pin_vals'>current_pin_vals</span>
  <span class='id identifier rubyid_ordered_pins_cache'>ordered_pins_cache</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_vector</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cycle_count-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>cycle_count</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>init cycle count when first accessed, otherwise return value</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 58</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cycle_count'>cycle_count</span>
  <span class='ivar'>@cycle_count</span> <span class='op'>||=</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dec_vec_count-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>dec_vec_count</strong>(num = 1) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>decrement vector count</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


52
53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 52</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dec_vec_count'>dec_vec_count</span><span class='lparen'>(</span><span class='id identifier rubyid_num'>num</span> <span class='op'>=</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_vec_count'>vec_count</span> <span class='kw'>if</span> <span class='ivar'>@vec_count</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>  <span class='comment'># define if not already
</span>  <span class='ivar'>@vec_count</span> <span class='op'>=</span> <span class='ivar'>@vec_count</span> <span class='op'>-</span> <span class='id identifier rubyid_num'>num</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dont_compress-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>dont_compress</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


363
364
365
366
367
368
369
370
371
372</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 363</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dont_compress'>dont_compress</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_orig'>orig</span> <span class='op'>=</span> <span class='ivar'>@dont_compress</span>
    <span class='ivar'>@dont_compress</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>yield</span>
    <span class='ivar'>@dont_compress</span> <span class='op'>=</span> <span class='id identifier rubyid_orig'>orig</span>
  <span class='kw'>else</span>
    <span class='ivar'>@dont_compress</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dont_compress=-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>dont_compress=</strong>(val) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


374
375
376</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 374</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dont_compress='>dont_compress=</span><span class='lparen'>(</span><span class='id identifier rubyid_val'>val</span><span class='rparen'>)</span>
  <span class='ivar'>@dont_compress</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="expand_vector-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>expand_vector</strong>(vec) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>expands (uncompresses to pattern) vector if desired or leaves it as is
allows for tracking and formatting of vector if comment then return without
modification</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


386
387
388
389
390
391
392
393
394
395
396
397
398
399</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 386</span>

<span class='kw'>def</span> <span class='id identifier rubyid_expand_vector'>expand_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Vector</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_expand_repeats'>expand_repeats</span>
      <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_repeat'>repeat</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_repeat'>repeat</span> <span class='op'>=</span> <span class='int'>1</span>
        <span class='kw'>yield</span> <span class='id identifier rubyid_track_and_format_vector'>track_and_format_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='kw'>yield</span> <span class='id identifier rubyid_track_and_format_vector'>track_and_format_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_vec'>vec</span>  <span class='comment'># Return comments without modification
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="format-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>format</strong>(vector_array, section) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Final pass of a generator vector array which returns lines suitable for
writing to the output file. This gives the tester model a chance to
concatenate repeats and any other last optimization/formatting changes it
wishes to make.</p>

<p>At this point vector array contains a combination of non-vector lines and
uncompressed Vector objects (vector lines)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 256</span>

<span class='kw'>def</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='id identifier rubyid_vector_array'>vector_array</span><span class='comma'>,</span> <span class='id identifier rubyid_section'>section</span><span class='rparen'>)</span>
  <span class='comment'># Go through vector_array and print out both
</span>  <span class='comment'># vectors and non-vectors to pattern (via &#39;yield line&#39;)
</span>  <span class='id identifier rubyid_vector_array'>vector_array</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_vec'>vec</span><span class='op'>|</span>
    <span class='comment'># These may eventually be merged to the same method, but splitting for now
</span>    <span class='comment'># so that multi mode development can proceed without upsetting single mode
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_vector_group_size'>vector_group_size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
      <span class='id identifier rubyid_multi_mode_optimize'>multi_mode_optimize</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='comma'>,</span> <span class='label'>section:</span> <span class='id identifier rubyid_section'>section</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
        <span class='kw'>yield</span> <span class='id identifier rubyid_line'>line</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_optimize'>optimize</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='comma'>,</span> <span class='label'>section:</span> <span class='id identifier rubyid_section'>section</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
        <span class='kw'>yield</span> <span class='id identifier rubyid_line'>line</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='comment'># now flush buffer if there is still a vector
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_vector_group_size'>vector_group_size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
    <span class='id identifier rubyid_pipeline'>pipeline</span><span class='period'>.</span><span class='id identifier rubyid_empty'>empty</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_vector'>vector</span><span class='op'>|</span>
      <span class='id identifier rubyid_expand_vector'>expand_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_vector'>vector</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
        <span class='kw'>yield</span> <span class='id identifier rubyid_line'>line</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='kw'>if</span> <span class='ivar'>@buffered_vector</span>
      <span class='id identifier rubyid_expand_vector'>expand_vector</span><span class='lparen'>(</span><span class='ivar'>@buffered_vector</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
        <span class='kw'>yield</span> <span class='id identifier rubyid_line'>line</span>
      <span class='kw'>end</span>
      <span class='ivar'>@buffered_vector</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="format_pin_state-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>format_pin_state</strong>(pin) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 604</span>

<span class='kw'>def</span> <span class='id identifier rubyid_format_pin_state'>format_pin_state</span><span class='lparen'>(</span><span class='id identifier rubyid_pin'>pin</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_repeat_previous?'>repeat_previous?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@support_repeat_previous</span>
    <span class='ivar'>@repeat_previous</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_driving?'>driving?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='int'>1</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_high_voltage?'>high_voltage?</span>
        <span class='ivar'>@drive_very_hi_state</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>else</span>
        <span class='ivar'>@drive_hi_state</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='ivar'>@drive_lo_state</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_comparing_midband?'>comparing_midband?</span>
    <span class='ivar'>@expect_mid_state</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>M</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_comparing?'>comparing?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='int'>1</span>
      <span class='ivar'>@expect_hi_state</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>H</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>else</span>
      <span class='ivar'>@expect_lo_state</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>L</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_driving_mem?'>driving_mem?</span>
    <span class='ivar'>@drive_mem_state</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>D</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_comparing_mem?'>comparing_mem?</span>
    <span class='ivar'>@expect_mem_state</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>E</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_to_be_captured?'>to_be_captured?</span>
    <span class='ivar'>@capture_state</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>C</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='ivar'>@dont_care_state</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>X</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="format_vector-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>format_vector</strong>(_vec) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


425
426</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 425</span>

<span class='kw'>def</span> <span class='id identifier rubyid_format_vector'>format_vector</span><span class='lparen'>(</span><span class='id identifier rubyid__vec'>_vec</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_pingroup-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>get_pingroup</strong>(pin) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


569
570
571
572
573
574</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 569</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_pingroup'>get_pingroup</span><span class='lparen'>(</span><span class='id identifier rubyid_pin'>pin</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pingroup_map'>pingroup_map</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_pins'>pins</span><span class='op'>|</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_id'>id</span> <span class='kw'>if</span> <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_pin'>pin</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inc_cycle_count-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>inc_cycle_count</strong>(num = 1) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>increment cycle count</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


63
64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 63</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inc_cycle_count'>inc_cycle_count</span><span class='lparen'>(</span><span class='id identifier rubyid_num'>num</span> <span class='op'>=</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cycle_count'>cycle_count</span> <span class='kw'>if</span> <span class='ivar'>@cycle_count</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='comment'># define if not already
</span>  <span class='ivar'>@cycle_count</span> <span class='op'>=</span> <span class='ivar'>@cycle_count</span> <span class='op'>+</span> <span class='id identifier rubyid_num'>num</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inc_vec_count-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>inc_vec_count</strong>(num = 1) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>increment vector count</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


46
47
48
49</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 46</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inc_vec_count'>inc_vec_count</span><span class='lparen'>(</span><span class='id identifier rubyid_num'>num</span> <span class='op'>=</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_vec_count'>vec_count</span> <span class='kw'>if</span> <span class='ivar'>@vec_count</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>  <span class='comment'># define if not already
</span>  <span class='ivar'>@vec_count</span> <span class='op'>=</span> <span class='ivar'>@vec_count</span> <span class='op'>+</span> <span class='id identifier rubyid_num'>num</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inhibit_pin-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>inhibit_pin</strong>(*pins) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='inhibit_pins-instance_method'>inhibit_pins</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Call to prevent the given pins from appearing in the generated vectors.</p>

<p>This is a convenient way to inhibit something like a J750 mux pin from
appearing in the patterns when generating the pattern for a different
platform.</p>

<p>When used this method must be called before the first vector is generated -
it will not be retrospectively applied to existing vectors.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


83
84
85
86
87
88
89
90</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 83</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inhibit_pin'>inhibit_pin</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_pins'>pins</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span>
    <span class='id identifier rubyid_inhibited_pins'>inhibited_pins</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pin'>pin</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_inhibited_pins'>inhibited_pins</span><span class='period'>.</span><span class='id identifier rubyid_uniq!'>uniq!</span>
  <span class='id identifier rubyid_inhibited_pins'>inhibited_pins</span><span class='period'>.</span><span class='id identifier rubyid_compact!'>compact!</span>
  <span class='id identifier rubyid_inhibited_pins'>inhibited_pins</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inhibited_pins-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>inhibited_pins</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an array of pin IDs that are currently inhibited (will not be
included when vectors are generated)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inhibited_pins'>inhibited_pins</span>
  <span class='ivar'>@inhibited_pins</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="last_object-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>last_object</strong>(offset = 0) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


182
183
184</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 182</span>

<span class='kw'>def</span> <span class='id identifier rubyid_last_object'>last_object</span><span class='lparen'>(</span><span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='int'>0</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_stage'>stage</span><span class='period'>.</span><span class='id identifier rubyid_last_object'>last_object</span><span class='lparen'>(</span><span class='id identifier rubyid_offset'>offset</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="last_vector-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>last_vector</strong>(offset = 0) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


178
179
180</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 178</span>

<span class='kw'>def</span> <span class='id identifier rubyid_last_vector'>last_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='int'>0</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_stage'>stage</span><span class='period'>.</span><span class='id identifier rubyid_last_vector'>last_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_offset'>offset</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="multi_mode_optimize-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>multi_mode_optimize</strong>(vec, _options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


299
300
301
302
303
304
305
306</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 299</span>

<span class='kw'>def</span> <span class='id identifier rubyid_multi_mode_optimize'>multi_mode_optimize</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='comma'>,</span> <span class='id identifier rubyid__options'>_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pipeline'>pipeline</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_vec'>vec</span>
  <span class='id identifier rubyid_pipeline'>pipeline</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_vector'>vector</span><span class='op'>|</span>
    <span class='id identifier rubyid_expand_vector'>expand_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_vector'>vector</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
      <span class='kw'>yield</span> <span class='id identifier rubyid_line'>line</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="optimize-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>optimize</strong>(vec, options = {}) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='buffer-instance_method'>buffer</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 308</span>

<span class='kw'>def</span> <span class='id identifier rubyid_optimize'>optimize</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>section:</span> <span class='kw'>false</span>
          <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='comment'># Flush the buffer if this vector is not compressible or if it doesn&#39;t
</span>  <span class='comment'># match the existing buffer (to get ready for new vector)
</span>  <span class='kw'>if</span> <span class='ivar'>@buffered_vector</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_compressable_vector?'>compressable_vector?</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_vec'>vec</span> <span class='op'>==</span> <span class='ivar'>@buffered_vector</span><span class='rparen'>)</span> <span class='op'>||</span>
    <span class='ivar'>@buffered_vector</span><span class='period'>.</span><span class='id identifier rubyid_repeat'>repeat</span> <span class='op'>==</span> <span class='ivar'>@max_repeat_loop</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_expand_vector'>expand_vector</span><span class='lparen'>(</span><span class='ivar'>@buffered_vector</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
      <span class='comment'># if last vector in pattern then pad if insufficient vectors
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:section</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:footer</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='ivar'>@min_pattern_vectors</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_vec_count'>vec_count</span> <span class='op'>&lt;</span> <span class='ivar'>@min_pattern_vectors</span><span class='rparen'>)</span>
        <span class='kw'>yield</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_comment_char'>comment_char</span><span class='embexpr_end'>}</span><span class='tstring_content'> PADDING VECTORS ADDED TO MEET MIN </span><span class='embexpr_beg'>#{</span><span class='ivar'>@min_pattern_vectors</span><span class='embexpr_end'>}</span><span class='tstring_content'> FOR PATTERN</span><span class='tstring_end'>&quot;</span></span>
        <span class='lparen'>(</span><span class='ivar'>@min_pattern_vectors</span> <span class='op'>-</span> <span class='id identifier rubyid_vec_count'>vec_count</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
          <span class='kw'>yield</span> <span class='id identifier rubyid_line'>line</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_inc_vec_count'>inc_vec_count</span><span class='lparen'>(</span><span class='ivar'>@min_pattern_vectors</span> <span class='op'>-</span> <span class='id identifier rubyid_vec_count'>vec_count</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='kw'>yield</span> <span class='id identifier rubyid_line'>line</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='ivar'>@buffered_vector</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_compressable_vector?'>compressable_vector?</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='rparen'>)</span>
    <span class='comment'># The new vector has already been identified as equal to the buffer
</span>    <span class='comment'># so just increment vector if buffered already, otherwise it is the
</span>    <span class='comment'># first encounter with this vector and create buffer with it
</span>    <span class='kw'>if</span> <span class='ivar'>@buffered_vector</span>
      <span class='comment'># simply increment repeat count
</span>      <span class='ivar'>@buffered_vector</span><span class='period'>.</span><span class='id identifier rubyid_repeat'>repeat</span> <span class='op'>+=</span> <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_repeat'>repeat</span>
      <span class='comment'># decrement vector count only once with each added repeat
</span>      <span class='id identifier rubyid_dec_vec_count'>dec_vec_count</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
      <span class='comment'># if new repeat exceeds @max_repeat_loop
</span>      <span class='kw'>if</span> <span class='ivar'>@buffered_vector</span><span class='period'>.</span><span class='id identifier rubyid_repeat'>repeat</span> <span class='op'>&gt;</span> <span class='ivar'>@max_repeat_loop</span>
        <span class='id identifier rubyid_delay'>delay</span><span class='lparen'>(</span><span class='ivar'>@buffered_vector</span><span class='period'>.</span><span class='id identifier rubyid_repeat'>repeat</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_options'>options</span><span class='op'>|</span>
          <span class='ivar'>@buffered_vector</span><span class='period'>.</span><span class='id identifier rubyid_repeat'>repeat</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:repeat</span><span class='rbracket'>]</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:repeat</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='ivar'>@max_repeat_loop</span>
            <span class='id identifier rubyid_expand_vector'>expand_vector</span><span class='lparen'>(</span><span class='ivar'>@buffered_vector</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
              <span class='kw'>yield</span> <span class='id identifier rubyid_line'>line</span>
            <span class='kw'>end</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='comment'># not buffered vector, set buffer to vector
</span>      <span class='ivar'>@buffered_vector</span> <span class='op'>=</span> <span class='id identifier rubyid_vec'>vec</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='comment'># not compressible
</span>    <span class='id identifier rubyid_expand_vector'>expand_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
      <span class='kw'>yield</span> <span class='id identifier rubyid_line'>line</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ordered_pins-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>ordered_pins</strong>(options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 437</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ordered_pins'>ordered_pins</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>include_inhibited_pins:</span> <span class='kw'>false</span><span class='comma'>,</span>
    <span class='label'>include_pingroups:</span>      <span class='kw'>true</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_profile'>profile</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Working out pin pattern order</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_pinorder'>pinorder</span> <span class='op'>=</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_app'>app</span><span class='period'>.</span><span class='id identifier rubyid_pin_pattern_order'>pin_pattern_order</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
    <span class='id identifier rubyid_pinexclude'>pinexclude</span> <span class='op'>=</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_app'>app</span><span class='period'>.</span><span class='id identifier rubyid_pin_pattern_exclude'>pin_pattern_exclude</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>

    <span class='kw'>if</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_app'>app</span><span class='period'>.</span><span class='id identifier rubyid_pin_pattern_order'>pin_pattern_order</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_pinorder'>pinorder</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_app'>app</span><span class='period'>.</span><span class='id identifier rubyid_pin_pattern_exclude'>pin_pattern_exclude</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_pinexclude'>pinexclude</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_ordered_pins'>ordered_pins</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

    <span class='comment'># Create a copy of all pins and groups to be output, pins/groups will be delete from here as
</span>    <span class='comment'># they are output, so that at the end of the user defined pin order what is left in here can
</span>    <span class='comment'># either be discarded or output at the end
</span>    <span class='id identifier rubyid_pins'>pins</span> <span class='op'>=</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_pin_bank'>pin_bank</span><span class='period'>.</span><span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
    <span class='id identifier rubyid_pingroups'>pingroups</span> <span class='op'>=</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_pin_bank'>pin_bank</span><span class='period'>.</span><span class='id identifier rubyid_pin_groups'>pin_groups</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_pinorder'>pinorder</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_pinorder'>pinorder</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_pinorder'>pinorder</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_id'>id</span><span class='op'>|</span>
        <span class='comment'># If the ID refers to a pin group
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_group'>group</span> <span class='op'>=</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_pin_bank'>pin_bank</span><span class='period'>.</span><span class='id identifier rubyid_pin_groups'>pin_groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span>
          <span class='comment'># If the group has still to be output just do that now
</span>          <span class='kw'>if</span> <span class='id identifier rubyid_pingroups'>pingroups</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_group'>group</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
            <span class='id identifier rubyid_ordered_pins'>ordered_pins</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_group'>group</span>
            <span class='comment'># Now delete the group from the list of groups still to be output and all of its pins
</span>            <span class='comment'># from the list pins still to be output
</span>            <span class='id identifier rubyid_group'>group</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span>
              <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
              <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_groups'>groups</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid__group'>_group</span><span class='op'>|</span>
                <span class='id identifier rubyid_pingroups'>pingroups</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
              <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_pingroups'>pingroups</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_group'>group</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
          <span class='comment'># To get here the some of the pins in the group have already been output which is preventing
</span>          <span class='comment'># output of the complete group at this point, in that case output any of its pins that have
</span>          <span class='comment'># still to go
</span>          <span class='kw'>else</span>
            <span class='id identifier rubyid_group'>group</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span>
              <span class='kw'>if</span> <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
                <span class='id identifier rubyid_ordered_pins'>ordered_pins</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pin'>pin</span>
                <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_groups'>groups</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid__group'>_group</span><span class='op'>|</span>
                  <span class='id identifier rubyid_pingroups'>pingroups</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
                <span class='kw'>end</span>
              <span class='kw'>end</span>
            <span class='kw'>end</span>
          <span class='kw'>end</span>
        <span class='comment'># this is a pin
</span>        <span class='kw'>else</span>
          <span class='id identifier rubyid_pin'>pin</span> <span class='op'>=</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_pin_bank'>pin_bank</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Undefined pin (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>) added to pin_pattern_order</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_pin'>pin</span>
          <span class='id identifier rubyid_ordered_pins'>ordered_pins</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pin'>pin</span>
          <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_groups'>groups</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid__group'>_group</span><span class='op'>|</span>
            <span class='id identifier rubyid_pingroups'>pingroups</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
          <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_id'>id</span>
          <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_pinexclude'>pinexclude</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_pinexclude'>pinexclude</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_pinexclude'>pinexclude</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_id'>id</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_group'>group</span> <span class='op'>=</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_pin_bank'>pin_bank</span><span class='period'>.</span><span class='id identifier rubyid_pin_groups'>pin_groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span>
          <span class='comment'># see if group is already in ordered_pins
</span>          <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Pin group </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'> is defined both in pin_pattern_order and pin_pattern_exclude</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_pingroups'>pingroups</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_id'>id</span>
          <span class='comment'># this is a pin group, delete all pins in group
</span>          <span class='id identifier rubyid_pingroups'>pingroups</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_group'>group</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span>
            <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Pin (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>) in group (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group'>group</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>) is defined both in pin_pattern_order and pin_pattern_exclude</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
            <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
        <span class='kw'>else</span> <span class='comment'># this is a pin, delete the pin
</span>          <span class='id identifier rubyid_pin'>pin</span> <span class='op'>=</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_pin_bank'>pin_bank</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Undefined pin (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>) added to pin_pattern_exclude</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_pin'>pin</span>
          <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Pin </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> is defined both in pin_pattern_order and pin_pattern_exclude</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
          <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_id'>id</span>
          <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_groups'>groups</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid__group'>_group</span><span class='op'>|</span>
            <span class='id identifier rubyid_pingroups'>pingroups</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:only</span><span class='rbracket'>]</span>
      <span class='comment'># all the rest of the pins to the end of the pattern order
</span>      <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__id'>_id</span><span class='comma'>,</span> <span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span>
        <span class='comment'># check for port
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_belongs_to_a_pin_group?'>belongs_to_a_pin_group?</span>
          <span class='comment'># Are any of this pin&#39;s groups still waiting to be output? pingroups at this point contains
</span>          <span class='comment'># those groups which have not been rendered yet
</span>          <span class='id identifier rubyid_group'>group</span> <span class='op'>=</span> <span class='id identifier rubyid_pingroups'>pingroups</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__id'>_id</span><span class='comma'>,</span> <span class='id identifier rubyid_group'>group</span><span class='op'>|</span>
            <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_groups'>groups</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__pid'>_pid</span><span class='comma'>,</span> <span class='id identifier rubyid_pgroup'>pgroup</span><span class='op'>|</span> <span class='id identifier rubyid_group'>group</span> <span class='op'>==</span> <span class='id identifier rubyid_pgroup'>pgroup</span> <span class='rbrace'>}</span>
          <span class='kw'>end</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_group'>group</span>
            <span class='id identifier rubyid_ordered_pins'>ordered_pins</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_group'>group</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_group'>group</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span> <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
          <span class='kw'>else</span>
            <span class='id identifier rubyid_ordered_pins'>ordered_pins</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pin'>pin</span>
          <span class='kw'>end</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_ordered_pins'>ordered_pins</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pin'>pin</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_ordered_pins'>ordered_pins</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:include_inhibited_pins</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_pin'>pin</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_inhibited_pins'>inhibited_pins</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_pin'>pin</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='id identifier rubyid_pin'>pin</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ordered_pins_cache-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>ordered_pins_cache</strong>(options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Cache the pin ordering for later use since all vectors should be formatted
the same</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


433
434
435</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 433</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ordered_pins_cache'>ordered_pins_cache</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@ordered_pins_cache</span> <span class='op'>||=</span> <span class='id identifier rubyid_ordered_pins'>ordered_pins</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pingroup_map-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>pingroup_map</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


428
429
430</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 428</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pingroup_map'>pingroup_map</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_app'>app</span><span class='period'>.</span><span class='id identifier rubyid_pingroup_map'>pingroup_map</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pipeline-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>pipeline</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


295
296
297</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 295</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pipeline'>pipeline</span>
  <span class='ivar'>@pipeline</span> <span class='op'>||=</span> <span class='const'>VectorPipeline</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_vector_group_size'>vector_group_size</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="preset_next_vector-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>preset_next_vector</strong>(attrs = {}, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Allows the attributes for the next vector to be setup prior to generating
it.</p>

<p>A block can be optionally supplied to act as a clean up method, that is the
block will be saved and executed after the next cycle has been generated.</p>

<p>See the V93K store_next_cycle method for an example of using this.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


195
196
197
198</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 195</span>

<span class='kw'>def</span> <span class='id identifier rubyid_preset_next_vector'>preset_next_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@preset_next_vector</span> <span class='op'>=</span> <span class='id identifier rubyid_attrs'>attrs</span>
  <span class='ivar'>@preset_next_vector_cleanup</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="push_comment-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>push_comment</strong>(msg) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164
165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 162</span>

<span class='kw'>def</span> <span class='id identifier rubyid_push_comment'>push_comment</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='rparen'>)</span>
  <span class='comment'># Comments are stored verbatim for now, can&#39;t see much use for a dedicated comment object
</span>  <span class='id identifier rubyid_stage'>stage</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span> <span class='id identifier rubyid_msg'>msg</span> <span class='kw'>unless</span> <span class='ivar'>@inhibit_comments</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="push_microcode-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>push_microcode</strong>(code, options = {}) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='microcode-instance_method'>microcode</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


167
168
169
170
171
172
173
174
175</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 167</span>

<span class='kw'>def</span> <span class='id identifier rubyid_push_microcode'>push_microcode</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='ivar'>@inhibit_vectors</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='id identifier rubyid_stage'>stage</span><span class='period'>.</span><span class='id identifier rubyid_insert_from_end'>insert_from_end</span> <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_stage'>stage</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span> <span class='id identifier rubyid_code'>code</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="push_vector-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>push_vector</strong>(attrs = {}) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='vector-instance_method'>vector</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Called by every $tester.cycle command to push a vector to the stage object</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 201</span>

<span class='kw'>def</span> <span class='id identifier rubyid_push_vector'>push_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>dont_compress:</span> <span class='ivar'>@dont_compress</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='ivar'>@inhibit_vectors</span>
    <span class='kw'>if</span> <span class='ivar'>@preset_next_vector</span>
      <span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='ivar'>@preset_next_vector</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_preset'>preset</span><span class='comma'>,</span> <span class='id identifier rubyid_current'>current</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_preset'>preset</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current'>current</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current'>current</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
          <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Value for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'> set by preset_next_vector clashed with the next vector!</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_preset'>preset</span> <span class='op'>||</span> <span class='id identifier rubyid_current'>current</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='ivar'>@preset_next_vector</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_stage'>stage</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span> <span class='const'>Vector</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_inc_vec_count'>inc_vec_count</span>
    <span class='id identifier rubyid_inc_cycle_count'>inc_cycle_count</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='symbol'>:repeat</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>1</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='ivar'>@preset_next_vector_cleanup</span>
      <span class='ivar'>@preset_next_vector_cleanup</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>
      <span class='ivar'>@preset_next_vector_cleanup</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>render</strong>(template, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Render content directly into a pattern, any options will be passed to the
template</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96
97
98
99
100
101
102
103
104
105
106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 94</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render'>render</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='comment'># Record the current file, this can be used to resolve any relative path
</span>  <span class='comment'># references in the file about to be compiled
</span>  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_file_handler'>file_handler</span><span class='period'>.</span><span class='id identifier rubyid_current_file'>current_file</span> <span class='op'>=</span> <span class='id identifier rubyid_template'>template</span>
  <span class='comment'># Ran into crosstalk problems when rendering ERB templates recursively, setting eoutvar based
</span>  <span class='comment'># on the name of the file will causes each template to be rendered into its own &#39;bank&#39;.
</span>  <span class='comment'># Not sure why the final gsub is needed but seems to fail to parse correctly otherwise.
</span>  <span class='id identifier rubyid_eoutvar'>eoutvar</span> <span class='op'>=</span> <span class='const'>Pathname</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.*</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.*</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='comment'># Make the file name available to the template
</span>  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_generator'>generator</span><span class='period'>.</span><span class='id identifier rubyid_compiler'>compiler</span><span class='period'>.</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:file</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_template'>template</span>
  <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_generator'>generator</span><span class='period'>.</span><span class='id identifier rubyid_compiler'>compiler</span><span class='period'>.</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_generator'>generator</span><span class='period'>.</span><span class='id identifier rubyid_compiler'>compiler</span><span class='period'>.</span><span class='id identifier rubyid_insert'>insert</span><span class='lparen'>(</span><span class='const'>ERB</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_erb_trim_mode'>erb_trim_mode</span><span class='comma'>,</span> <span class='id identifier rubyid_eoutvar'>eoutvar</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_result'>result</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_code'>code</span><span class='period'>.</span><span class='id identifier rubyid_strip!'>strip!</span>
  <span class='id identifier rubyid_push_microcode'>push_microcode</span> <span class='id identifier rubyid_code'>code</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_body-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>render_body</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Same as the render method, except the template method should be called
body_template.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 120</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_body'>render_body</span>
  <span class='id identifier rubyid__render'>_render</span><span class='lparen'>(</span><span class='symbol'>:body_template</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_footer-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>render_footer</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>If the tester defines a method named footer_template this method will
compile whatever template file is returned by that method.</p>

<p>This method is called automatically during the footer section of a
Pattern.create operation.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 129</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_footer'>render_footer</span>
  <span class='id identifier rubyid__render'>_render</span><span class='lparen'>(</span><span class='symbol'>:footer_template</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_header-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>render_header</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>If the tester defines a method named header_template this method will
compile whatever template file is returned by that method.</p>

<p>This method is called automatically during the header section of a
Pattern.create operation.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 138</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_header'>render_header</span>
  <span class='id identifier rubyid__render'>_render</span><span class='lparen'>(</span><span class='symbol'>:header_template</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="render_template-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>render_template</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>If the tester defines a method named template this method will compile
whatever template file is returned by that method.</p>

<p>This method is called automatically after the body section of a
Pattern.create operation has completed.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


115
116
117</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 115</span>

<span class='kw'>def</span> <span class='id identifier rubyid_render_template'>render_template</span>
  <span class='id identifier rubyid__render'>_render</span><span class='lparen'>(</span><span class='symbol'>:template</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset_cycle_count-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>reset_cycle_count</strong>(num = 0) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>reset_cycle_count</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


69
70
71
72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 69</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reset_cycle_count'>reset_cycle_count</span><span class='lparen'>(</span><span class='id identifier rubyid_num'>num</span> <span class='op'>=</span> <span class='int'>0</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cycle_count'>cycle_count</span> <span class='kw'>if</span> <span class='ivar'>@cycle_count</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='comment'># define if not already
</span>  <span class='ivar'>@cycle_count</span> <span class='op'>=</span> <span class='id identifier rubyid_num'>num</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stage-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>stage</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 158</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stage'>stage</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_generator'>generator</span><span class='period'>.</span><span class='id identifier rubyid_stage'>stage</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="track_and_format_vector-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>track_and_format_vector</strong>(vec) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Update tracking info (stats object) and allow for any additional formatting
via format_vector method if overridden</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 404</span>

<span class='kw'>def</span> <span class='id identifier rubyid_track_and_format_vector'>track_and_format_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_timeset'>timeset</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>No timeset defined!</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Add one to your top level startup method or target like this:</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>$tester.set_timeset(&quot;nvmbist&quot;, 40)   # Where 40 is the period in ns</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_exit'>exit</span> <span class='int'>1</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_stats'>stats</span> <span class='op'>=</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_app'>app</span><span class='period'>.</span><span class='id identifier rubyid_stats'>stats</span>
  <span class='id identifier rubyid_stats'>stats</span><span class='period'>.</span><span class='id identifier rubyid_add_vector'>add_vector</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_vector_group_size'>vector_group_size</span> <span class='op'>&gt;</span> <span class='int'>1</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_repeat'>repeat</span> <span class='op'>&gt;</span> <span class='int'>1</span>
    <span class='id identifier rubyid_stats'>stats</span><span class='period'>.</span><span class='id identifier rubyid_add_cycle'>add_cycle</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_stats'>stats</span><span class='period'>.</span><span class='id identifier rubyid_add_cycle'>add_cycle</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_repeat'>repeat</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='id identifier rubyid_vector_group_size'>vector_group_size</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_stats'>stats</span><span class='period'>.</span><span class='id identifier rubyid_add_time_in_ns'>add_time_in_ns</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_timeset'>timeset</span><span class='period'>.</span><span class='id identifier rubyid_period_in_ns'>period_in_ns</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_stats'>stats</span><span class='period'>.</span><span class='id identifier rubyid_add_time_in_ns'>add_time_in_ns</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_repeat'>repeat</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='id identifier rubyid_vector_group_size'>vector_group_size</span> <span class='op'>*</span> <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_timeset'>timeset</span><span class='period'>.</span><span class='id identifier rubyid_period_in_ns'>period_in_ns</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_stats'>stats</span><span class='period'>.</span><span class='id identifier rubyid_add_cycle'>add_cycle</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_repeat'>repeat</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_stats'>stats</span><span class='period'>.</span><span class='id identifier rubyid_add_time_in_ns'>add_time_in_ns</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_repeat'>repeat</span> <span class='op'>*</span> <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_timeset'>timeset</span><span class='period'>.</span><span class='id identifier rubyid_period_in_ns'>period_in_ns</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_format_vector'>format_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_pin_from_formatted_state-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>update_pin_from_formatted_state</strong>(pin, state) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 576</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_pin_from_formatted_state'>update_pin_from_formatted_state</span><span class='lparen'>(</span><span class='id identifier rubyid_pin'>pin</span><span class='comma'>,</span> <span class='id identifier rubyid_state'>state</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='ivar'>@repeat_previous</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_repeat_previous'>repeat_previous</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='ivar'>@drive_very_hi_state</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_drive_very_hi'>drive_very_hi</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='ivar'>@drive_hi_state</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_drive_hi'>drive_hi</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='ivar'>@drive_lo_state</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_drive_lo'>drive_lo</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='ivar'>@expect_hi_state</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>H</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_expect_hi'>expect_hi</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='ivar'>@expect_lo_state</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>L</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_expect_lo'>expect_lo</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='ivar'>@expect_mid_state</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>M</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_expect_mid'>expect_mid</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='ivar'>@drive_mem_state</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>D</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_drive_mem'>drive_mem</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='ivar'>@expect_mem_state</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>E</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_expect_mem'>expect_mem</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='ivar'>@capture_state</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>C</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_capture'>capture</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='ivar'>@dont_care_state</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>X</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_dont_care'>dont_care</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unknown pin state: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_state'>state</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_vector-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>update_vector</strong>(attrs = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


227
228
229
230
231
232</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 227</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_vector'>update_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='ivar'>@inhibit_vectors</span>
    <span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:offset</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_abs'>abs</span>
    <span class='id identifier rubyid_stage'>stage</span><span class='period'>.</span><span class='id identifier rubyid_last_vector'>last_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_offset'>offset</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_vector_pin_val-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>update_vector_pin_val</strong>(pin, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


234
235
236
237
238
239</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 234</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_vector_pin_val'>update_vector_pin_val</span><span class='lparen'>(</span><span class='id identifier rubyid_pin'>pin</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='ivar'>@inhibit_vectors</span>
    <span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:offset</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_abs'>abs</span>
    <span class='id identifier rubyid_stage'>stage</span><span class='period'>.</span><span class='id identifier rubyid_last_vector'>last_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_offset'>offset</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_update_pin_val'>update_pin_val</span><span class='lparen'>(</span><span class='id identifier rubyid_pin'>pin</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="vec_count-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>vec_count</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>init vector count when first accessed, otherwise return value</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 41</span>

<span class='kw'>def</span> <span class='id identifier rubyid_vec_count'>vec_count</span>
  <span class='ivar'>@vec_count</span> <span class='op'>||=</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="vector_group_size-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>vector_group_size</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 14</span>

<span class='kw'>def</span> <span class='id identifier rubyid_vector_group_size'>vector_group_size</span>
  <span class='ivar'>@vector_group_size</span> <span class='op'>||</span> <span class='int'>1</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="vector_group_size=-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>vector_group_size=</strong>(number) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20
21
22
23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 18</span>

<span class='kw'>def</span> <span class='id identifier rubyid_vector_group_size='>vector_group_size=</span><span class='lparen'>(</span><span class='id identifier rubyid_number'>number</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_number'>number</span> <span class='op'>&gt;</span> <span class='int'>1</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_number'>number</span><span class='period'>.</span><span class='id identifier rubyid_odd?'>odd?</span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Only even numbers can be supplied for the vector_group_size!</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='comment'># Each pattern should run with its own tester instance, but just in case
</span>  <span class='ivar'>@pipeline</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@vector_group_size</span> <span class='op'>=</span> <span class='id identifier rubyid_number'>number</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with_vector_group_size-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>with_vector_group_size</strong>(number) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29
30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen/tester/vector_generator.rb', line 27</span>

<span class='kw'>def</span> <span class='id identifier rubyid_with_vector_group_size'>with_vector_group_size</span><span class='lparen'>(</span><span class='id identifier rubyid_number'>number</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_orig'>orig</span> <span class='op'>=</span> <span class='id identifier rubyid_vector_group_size'>vector_group_size</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_vector_group_size'>vector_group_size</span> <span class='op'>=</span> <span class='id identifier rubyid_number'>number</span>
  <span class='kw'>yield</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_vector_group_size'>vector_group_size</span> <span class='op'>=</span> <span class='id identifier rubyid_orig'>orig</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Mon Aug 31 04:10:15 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.1.5).
</div>

  </body>
</html>