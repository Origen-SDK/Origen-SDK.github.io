<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Origen</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.10.0/application.js' type='text/javascript'></script>    
    <link href='./assets/0.10.0/application.css' media='screen, projection, print' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" type="image/png" href="./assets/0.10.0/favicon_red.png" />
    <link rel="icon" type="image/png" href="./assets/0.10.0/favicon.png" />
  </head>
  
  <body>
    <div id="loading">
      <img src="./assets/0.10.0/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" style="display:none;">
      <div class="timestamp">Generated <abbr class="timeago" title="2016-05-26T05:27:30-05:00">2016-05-26T05:27:30-05:00</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent"><span class="red">75.92%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         331.52
       </span>
    </span> hits/line)
  </h2>
  <a name="AllFiles"></a>
  <div>
    <b>91</b> files in total.
    <b>8115</b> relevant lines. 
    <span class="green"><b>6161</b> lines covered</span> and
    <span class="red"><b>1954</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#ff7e18c03316a9dbe3412b6475ecfc47fa179c5e" class="src_link" title="lib/c99/ate_interface.rb">lib/c99/ate_interface.rb</a></td>
        <td class="green strong">97.56 %</td>
        <td>77</td>
        <td>41</td>
        <td>40</td>
        <td>1</td>
        <td>41.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#cf19c71c30f33ec52ec5672002df1f4ce5c511d2" class="src_link" title="lib/c99/doc_interface.rb">lib/c99/doc_interface.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>56</td>
        <td>26</td>
        <td>26</td>
        <td>0</td>
        <td>34.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#ab0230dd7c84dee5bfc822a568b9468bbef45ec4" class="src_link" title="lib/c99/nvm.rb">lib/c99/nvm.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>94</td>
        <td>52</td>
        <td>52</td>
        <td>0</td>
        <td>2.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#92156c1ad83d63a1eee8ef7933ead16e6dfca6c9" class="src_link" title="lib/origen/application/configuration.rb">lib/origen/application/configuration.rb</a></td>
        <td class="green strong">90.14 %</td>
        <td>188</td>
        <td>71</td>
        <td>64</td>
        <td>7</td>
        <td>126.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#dd0a7e4d13556ee3fc397673d15dbe0d9a50585c" class="src_link" title="lib/origen/application/environment.rb">lib/origen/application/environment.rb</a></td>
        <td class="red strong">62.22 %</td>
        <td>186</td>
        <td>90</td>
        <td>56</td>
        <td>34</td>
        <td>15.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c39403aa5fb549e6da0bf209202b0f02ed9d1fb6" class="src_link" title="lib/origen/application/lsf.rb">lib/origen/application/lsf.rb</a></td>
        <td class="red strong">37.5 %</td>
        <td>145</td>
        <td>72</td>
        <td>27</td>
        <td>45</td>
        <td>0.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#01a1577f1c67c90f6a5bdb2a1c837ed86b7c0f76" class="src_link" title="lib/origen/application/lsf_manager.rb">lib/origen/application/lsf_manager.rb</a></td>
        <td class="red strong">19.25 %</td>
        <td>660</td>
        <td>348</td>
        <td>67</td>
        <td>281</td>
        <td>2.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#cd57154ccbcf32c5d24e8295103062b6c802a887" class="src_link" title="lib/origen/application/plugins.rb">lib/origen/application/plugins.rb</a></td>
        <td class="yellow strong">83.05 %</td>
        <td>117</td>
        <td>59</td>
        <td>49</td>
        <td>10</td>
        <td>262.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#53ed6d5447a9628f5d7ca88adb2455bd7e05635b" class="src_link" title="lib/origen/application/runner.rb">lib/origen/application/runner.rb</a></td>
        <td class="red strong">62.07 %</td>
        <td>252</td>
        <td>116</td>
        <td>72</td>
        <td>44</td>
        <td>23.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#185ffb35c06411074bf576d96e7a39c97f8cab77" class="src_link" title="lib/origen/application/statistics.rb">lib/origen/application/statistics.rb</a></td>
        <td class="yellow strong">81.74 %</td>
        <td>191</td>
        <td>115</td>
        <td>94</td>
        <td>21</td>
        <td>64.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#3af970bc9346618898d3710ca3c682de9ccd6b4d" class="src_link" title="lib/origen/application/target.rb">lib/origen/application/target.rb</a></td>
        <td class="red strong">68.45 %</td>
        <td>395</td>
        <td>168</td>
        <td>115</td>
        <td>53</td>
        <td>45.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#37e67316ed500e4995c35df7b0c418ff08bd3d27" class="src_link" title="lib/origen/bugs.rb">lib/origen/bugs.rb</a></td>
        <td class="red strong">79.17 %</td>
        <td>45</td>
        <td>24</td>
        <td>19</td>
        <td>5</td>
        <td>6.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#f685ee11828e3707c573ecc9748616be6ca8fe7c" class="src_link" title="lib/origen/bugs/bug.rb">lib/origen/bugs/bug.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>36</td>
        <td>20</td>
        <td>20</td>
        <td>0</td>
        <td>3.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#41cec756475f423d142dc06c543ee3a2447d12e4" class="src_link" title="lib/origen/chip_mode.rb">lib/origen/chip_mode.rb</a></td>
        <td class="red strong">79.37 %</td>
        <td>118</td>
        <td>63</td>
        <td>50</td>
        <td>13</td>
        <td>30.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#831dc94d9eeb385503f99da3f0ecf3b03fad2d81" class="src_link" title="lib/origen/chip_package.rb">lib/origen/chip_package.rb</a></td>
        <td class="red strong">23.63 %</td>
        <td>461</td>
        <td>237</td>
        <td>56</td>
        <td>181</td>
        <td>1.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#553f1e7e167c50fb39fe95d9526543610ac9af97" class="src_link" title="lib/origen/commands/compile.rb">lib/origen/commands/compile.rb</a></td>
        <td class="green strong">96.77 %</td>
        <td>61</td>
        <td>31</td>
        <td>30</td>
        <td>1</td>
        <td>1.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#a8f857ccf9756068479fd050ab66b19396607825" class="src_link" title="lib/origen/commands/generate.rb">lib/origen/commands/generate.rb</a></td>
        <td class="yellow strong">88.64 %</td>
        <td>130</td>
        <td>44</td>
        <td>39</td>
        <td>5</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#19edf863ff5257176e2de98ff90761042d445b50" class="src_link" title="lib/origen/commands/program.rb">lib/origen/commands/program.rb</a></td>
        <td class="yellow strong">89.36 %</td>
        <td>70</td>
        <td>47</td>
        <td>42</td>
        <td>5</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#9c9bf3b4bb330a48e2e7f163aff2596f983d4dc8" class="src_link" title="lib/origen/controller.rb">lib/origen/controller.rb</a></td>
        <td class="red strong">75.81 %</td>
        <td>121</td>
        <td>62</td>
        <td>47</td>
        <td>15</td>
        <td>12.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#6508cd8a123306aab4946da60fe50eb693f80624" class="src_link" title="lib/origen/database.rb">lib/origen/database.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>6</td>
        <td>4</td>
        <td>4</td>
        <td>0</td>
        <td>2.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#9effa583a24f0cb741601eecbd1ca359e17422ba" class="src_link" title="lib/origen/database/key_value_store.rb">lib/origen/database/key_value_store.rb</a></td>
        <td class="red strong">72.13 %</td>
        <td>111</td>
        <td>61</td>
        <td>44</td>
        <td>17</td>
        <td>28.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#ecfdb0a12c8c0d3c6d0aee1b8c7efe589b7461a4" class="src_link" title="lib/origen/database/key_value_stores.rb">lib/origen/database/key_value_stores.rb</a></td>
        <td class="red strong">50.94 %</td>
        <td>108</td>
        <td>53</td>
        <td>27</td>
        <td>26</td>
        <td>16.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#7f8e0daf171a6e98139d48357bf9ffdb07496edf" class="src_link" title="lib/origen/errata.rb">lib/origen/errata.rb</a></td>
        <td class="green strong">95.65 %</td>
        <td>117</td>
        <td>46</td>
        <td>44</td>
        <td>2</td>
        <td>11.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#114a17bfed913dc8a45336b48318c44c1739354b" class="src_link" title="lib/origen/errata/hw_erratum.rb">lib/origen/errata/hw_erratum.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>47</td>
        <td>22</td>
        <td>22</td>
        <td>0</td>
        <td>1.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#63c6445d232aaafef69158e8e325bec1810be759" class="src_link" title="lib/origen/errata/sw_erratum_workaround.rb">lib/origen/errata/sw_erratum_workaround.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>39</td>
        <td>18</td>
        <td>18</td>
        <td>0</td>
        <td>2.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#4661a56ebf990e999242e5af2b6432550219f790" class="src_link" title="lib/origen/features.rb">lib/origen/features.rb</a></td>
        <td class="yellow strong">88.68 %</td>
        <td>104</td>
        <td>53</td>
        <td>47</td>
        <td>6</td>
        <td>53.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#16c450c003aa29a34776937382480a6e5ad0c0c0" class="src_link" title="lib/origen/features/feature.rb">lib/origen/features/feature.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>22</td>
        <td>13</td>
        <td>13</td>
        <td>0</td>
        <td>2.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#9460c459899c72afa207383273f513ee59c9bb62" class="src_link" title="lib/origen/file_handler.rb">lib/origen/file_handler.rb</a></td>
        <td class="red strong">68.94 %</td>
        <td>442</td>
        <td>235</td>
        <td>162</td>
        <td>73</td>
        <td>26.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#6b3b252934c00837a735c189ac70a6f2823aa009" class="src_link" title="lib/origen/generator/compiler.rb">lib/origen/generator/compiler.rb</a></td>
        <td class="red strong">72.79 %</td>
        <td>290</td>
        <td>147</td>
        <td>107</td>
        <td>40</td>
        <td>9.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c2d109cada38cd403208a51fd34bbfdb1b81a31c" class="src_link" title="lib/origen/generator/job.rb">lib/origen/generator/job.rb</a></td>
        <td class="yellow strong">82.89 %</td>
        <td>129</td>
        <td>76</td>
        <td>63</td>
        <td>13</td>
        <td>54.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#e8db790f0d141dbdd0cec66dedd360e8045d367a" class="src_link" title="lib/origen/generator/pattern_finder.rb">lib/origen/generator/pattern_finder.rb</a></td>
        <td class="red strong">72.5 %</td>
        <td>156</td>
        <td>80</td>
        <td>58</td>
        <td>22</td>
        <td>5.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#26fbc97bc25d25735fac31d4bd342ad10a630620" class="src_link" title="lib/origen/generator/pattern_iterator.rb">lib/origen/generator/pattern_iterator.rb</a></td>
        <td class="yellow strong">86.67 %</td>
        <td>55</td>
        <td>30</td>
        <td>26</td>
        <td>4</td>
        <td>29.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#5fa7bfba14991019381b35ec207e213900ff8b71" class="src_link" title="lib/origen/generator/renderer.rb">lib/origen/generator/renderer.rb</a></td>
        <td class="red strong">68.75 %</td>
        <td>115</td>
        <td>64</td>
        <td>44</td>
        <td>20</td>
        <td>29.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c374e5c42b9c57bd2945359bafb019ab6d1da4b9" class="src_link" title="lib/origen/generator/stage.rb">lib/origen/generator/stage.rb</a></td>
        <td class="green strong">92.68 %</td>
        <td>89</td>
        <td>41</td>
        <td>38</td>
        <td>3</td>
        <td>239.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#cb637135b176bbe7bf46ef67b57a5d3d8cba80fa" class="src_link" title="lib/origen/location.rb">lib/origen/location.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>6</td>
        <td>4</td>
        <td>4</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#37dfe588dbb909da7881d27c9bf282d203899d65" class="src_link" title="lib/origen/location/base.rb">lib/origen/location/base.rb</a></td>
        <td class="yellow strong">86.36 %</td>
        <td>116</td>
        <td>66</td>
        <td>57</td>
        <td>9</td>
        <td>11.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c50ede80f32b649a5bd1d9fc701555470109bce7" class="src_link" title="lib/origen/location/map.rb">lib/origen/location/map.rb</a></td>
        <td class="green strong">95.56 %</td>
        <td>83</td>
        <td>45</td>
        <td>43</td>
        <td>2</td>
        <td>4.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#304dd40bd3e3adf26d9af835fe84adac3140ed40" class="src_link" title="lib/origen/mode.rb">lib/origen/mode.rb</a></td>
        <td class="green strong">96.88 %</td>
        <td>65</td>
        <td>32</td>
        <td>31</td>
        <td>1</td>
        <td>90.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#4b0a303846df38baad017eb60c900758826e1dab" class="src_link" title="lib/origen/model_initializer.rb">lib/origen/model_initializer.rb</a></td>
        <td class="green strong">96.67 %</td>
        <td>49</td>
        <td>30</td>
        <td>29</td>
        <td>1</td>
        <td>535.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#ea295037472c2457cb90160e8a2903e2efaddb5d" class="src_link" title="lib/origen/models.rb">lib/origen/models.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>6</td>
        <td>4</td>
        <td>4</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#82c1cde5f872753523269703db95836b43285f6b" class="src_link" title="lib/origen/models/mux.rb">lib/origen/models/mux.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>26</td>
        <td>15</td>
        <td>15</td>
        <td>0</td>
        <td>6.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#7b91bf3441c1ffd15e83fc1ec5a500e2223c35df" class="src_link" title="lib/origen/models/scan_register.rb">lib/origen/models/scan_register.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>74</td>
        <td>44</td>
        <td>44</td>
        <td>0</td>
        <td>25.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#a183f59228d45cf2f28fe5aa68537953b8f101ab" class="src_link" title="lib/origen/netlist.rb">lib/origen/netlist.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>24</td>
        <td>14</td>
        <td>14</td>
        <td>0</td>
        <td>158.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#8ae0b7495a540ac0bc29c49b24cdfc1ea43b819e" class="src_link" title="lib/origen/netlist/connectable.rb">lib/origen/netlist/connectable.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>18</td>
        <td>11</td>
        <td>11</td>
        <td>0</td>
        <td>10.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#6c05b8c4623442eedafc2e7cefbc3900fb9129a7" class="src_link" title="lib/origen/netlist/list.rb">lib/origen/netlist/list.rb</a></td>
        <td class="green strong">93.1 %</td>
        <td>152</td>
        <td>87</td>
        <td>81</td>
        <td>6</td>
        <td>209.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#db705f69b4123272853ab0cca20849142f255dc7" class="src_link" title="lib/origen/parameters.rb">lib/origen/parameters.rb</a></td>
        <td class="green strong">98.33 %</td>
        <td>107</td>
        <td>60</td>
        <td>59</td>
        <td>1</td>
        <td>47.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#2457e8cce1c8876418124bc9b5211b99f3ac6a2b" class="src_link" title="lib/origen/parameters/live.rb">lib/origen/parameters/live.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>22</td>
        <td>14</td>
        <td>14</td>
        <td>0</td>
        <td>36.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#e44fa72f12ba5c36a058302acb1f02c24b04657b" class="src_link" title="lib/origen/parameters/missing.rb">lib/origen/parameters/missing.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>28</td>
        <td>10</td>
        <td>10</td>
        <td>0</td>
        <td>1.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#8dd9e2a0b42778504cb617c161e9dd7f5aa746b7" class="src_link" title="lib/origen/parameters/set.rb">lib/origen/parameters/set.rb</a></td>
        <td class="green strong">96.3 %</td>
        <td>144</td>
        <td>81</td>
        <td>78</td>
        <td>3</td>
        <td>207.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#6b5f3769dc54d5d373446a277df0b0b7201541bb" class="src_link" title="lib/origen/pins.rb">lib/origen/pins.rb</a></td>
        <td class="red strong">79.92 %</td>
        <td>700</td>
        <td>254</td>
        <td>203</td>
        <td>51</td>
        <td>366.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#e060d3ef6e171d73c8a48e0677d3d0e9db35f0a2" class="src_link" title="lib/origen/pins/function_proxy.rb">lib/origen/pins/function_proxy.rb</a></td>
        <td class="green strong">94.12 %</td>
        <td>36</td>
        <td>17</td>
        <td>16</td>
        <td>1</td>
        <td>5.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#223ce79f459ac8eb5f8d604b22df94cf3628167f" class="src_link" title="lib/origen/pins/ground_pin.rb">lib/origen/pins/ground_pin.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>6</td>
        <td>3</td>
        <td>3</td>
        <td>0</td>
        <td>2.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#70639eba32e561882ef3bca28a107f35827ceb8d" class="src_link" title="lib/origen/pins/pin.rb">lib/origen/pins/pin.rb</a></td>
        <td class="yellow strong">84.39 %</td>
        <td>912</td>
        <td>474</td>
        <td>400</td>
        <td>74</td>
        <td>616.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#f79e891f7a05d64c65b6705d1afdf0e27493988f" class="src_link" title="lib/origen/pins/pin_bank.rb">lib/origen/pins/pin_bank.rb</a></td>
        <td class="green strong">93.62 %</td>
        <td>386</td>
        <td>188</td>
        <td>176</td>
        <td>12</td>
        <td>2563.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#6c65673e61352c9d5720c24cbc07fbd36ec1bfb3" class="src_link" title="lib/origen/pins/pin_clock.rb">lib/origen/pins/pin_clock.rb</a></td>
        <td class="green strong">96.05 %</td>
        <td>124</td>
        <td>76</td>
        <td>73</td>
        <td>3</td>
        <td>59.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#69a0276238b962c5356f731c8196c6b96aa4f1aa" class="src_link" title="lib/origen/pins/pin_collection.rb">lib/origen/pins/pin_collection.rb</a></td>
        <td class="yellow strong">89.31 %</td>
        <td>505</td>
        <td>262</td>
        <td>234</td>
        <td>28</td>
        <td>875.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#09498499b6455cd39f7f00eabbde5677b9c0322d" class="src_link" title="lib/origen/pins/pin_common.rb">lib/origen/pins/pin_common.rb</a></td>
        <td class="yellow strong">82.61 %</td>
        <td>206</td>
        <td>92</td>
        <td>76</td>
        <td>16</td>
        <td>3452.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#b5c6fc2cf027659144bf72d5696be365c913dafb" class="src_link" title="lib/origen/pins/power_pin.rb">lib/origen/pins/power_pin.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>30</td>
        <td>12</td>
        <td>12</td>
        <td>0</td>
        <td>2.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#28205a53448dcbd9a80e317e5cc7c288fbdd80dc" class="src_link" title="lib/origen/pins/virtual_pin.rb">lib/origen/pins/virtual_pin.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>9</td>
        <td>5</td>
        <td>5</td>
        <td>0</td>
        <td>2.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#6577354511c3194d9783d4e870a4f361a66dbbea" class="src_link" title="lib/origen/ports.rb">lib/origen/ports.rb</a></td>
        <td class="yellow strong">89.47 %</td>
        <td>66</td>
        <td>38</td>
        <td>34</td>
        <td>4</td>
        <td>1286.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#a74a379d6f3da623d14abbcd5ce6ebd9df882635" class="src_link" title="lib/origen/ports/bit_collection.rb">lib/origen/ports/bit_collection.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>6</td>
        <td>3</td>
        <td>3</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#133170f65c9dfa26e3debb760811d300184af0ba" class="src_link" title="lib/origen/ports/port.rb">lib/origen/ports/port.rb</a></td>
        <td class="yellow strong">89.61 %</td>
        <td>129</td>
        <td>77</td>
        <td>69</td>
        <td>8</td>
        <td>59.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#69d1b158ac6d5197c0bbf9ec3c890b4c3d2b5f79" class="src_link" title="lib/origen/ports/port_collection.rb">lib/origen/ports/port_collection.rb</a></td>
        <td class="green strong">90.91 %</td>
        <td>19</td>
        <td>11</td>
        <td>10</td>
        <td>1</td>
        <td>37.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#281417ea977ec3e668b542106cf17865c1100769" class="src_link" title="lib/origen/ports/section.rb">lib/origen/ports/section.rb</a></td>
        <td class="green strong">90.63 %</td>
        <td>116</td>
        <td>64</td>
        <td>58</td>
        <td>6</td>
        <td>132.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#4dd68ea3c45cf6c6aa7bbb708fa7de0055cada3a" class="src_link" title="lib/origen/registers.rb">lib/origen/registers.rb</a></td>
        <td class="red strong">77.51 %</td>
        <td>674</td>
        <td>338</td>
        <td>262</td>
        <td>76</td>
        <td>667.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#131797889f1f195d22128ccaa2db9fc45ada6e2b" class="src_link" title="lib/origen/registers/bit.rb">lib/origen/registers/bit.rb</a></td>
        <td class="yellow strong">80.21 %</td>
        <td>568</td>
        <td>288</td>
        <td>231</td>
        <td>57</td>
        <td>1501.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#4536e70f12f26dca765a78bbada36f31ebc6d8c9" class="src_link" title="lib/origen/registers/bit_collection.rb">lib/origen/registers/bit_collection.rb</a></td>
        <td class="red strong">73.95 %</td>
        <td>902</td>
        <td>403</td>
        <td>298</td>
        <td>105</td>
        <td>72.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#3586531aa057b6a16b21e65ccf7b47bc3c1ccfd7" class="src_link" title="lib/origen/registers/container.rb">lib/origen/registers/container.rb</a></td>
        <td class="green strong">90.63 %</td>
        <td>288</td>
        <td>96</td>
        <td>87</td>
        <td>9</td>
        <td>75.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#173bfdff56bd1704f856953552c2e24db0e77009" class="src_link" title="lib/origen/registers/domain.rb">lib/origen/registers/domain.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>16</td>
        <td>9</td>
        <td>9</td>
        <td>0</td>
        <td>11.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c93e9f48dab4384e8392c7b71727a5aa6e3300b2" class="src_link" title="lib/origen/registers/reg.rb">lib/origen/registers/reg.rb</a></td>
        <td class="yellow strong">80.31 %</td>
        <td>1437</td>
        <td>701</td>
        <td>563</td>
        <td>138</td>
        <td>156.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#637e921b4e0b273bd7da9382cd7181aa209d504c" class="src_link" title="lib/origen/registers/reg_collection.rb">lib/origen/registers/reg_collection.rb</a></td>
        <td class="yellow strong">90.0 %</td>
        <td>24</td>
        <td>10</td>
        <td>9</td>
        <td>1</td>
        <td>144.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#6712e3f1693f18385e895bc5814454dc06e243fa" class="src_link" title="lib/origen/revision_control.rb">lib/origen/revision_control.rb</a></td>
        <td class="red strong">69.23 %</td>
        <td>44</td>
        <td>13</td>
        <td>9</td>
        <td>4</td>
        <td>1.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#757d4a591660b487a84edf4d97e2604246495661" class="src_link" title="lib/origen/revision_control/base.rb">lib/origen/revision_control/base.rb</a></td>
        <td class="red strong">57.14 %</td>
        <td>257</td>
        <td>63</td>
        <td>36</td>
        <td>27</td>
        <td>2.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#9a306651418c62aec868bdac8be614934e5e868c" class="src_link" title="lib/origen/revision_control/git.rb">lib/origen/revision_control/git.rb</a></td>
        <td class="red strong">36.45 %</td>
        <td>369</td>
        <td>203</td>
        <td>74</td>
        <td>129</td>
        <td>5.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c24f41348606feab2212761a36c28a7bb4db774b" class="src_link" title="lib/origen/specs.rb">lib/origen/specs.rb</a></td>
        <td class="green strong">96.76 %</td>
        <td>761</td>
        <td>370</td>
        <td>358</td>
        <td>12</td>
        <td>44.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c1de94ef97b6b142551c6b2e1eaa65819f2417c5" class="src_link" title="lib/origen/specs/checkers.rb">lib/origen/specs/checkers.rb</a></td>
        <td class="red strong">71.64 %</td>
        <td>112</td>
        <td>67</td>
        <td>48</td>
        <td>19</td>
        <td>26.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#4eacb7547787cb285cd1cfdb4de27b576708cb87" class="src_link" title="lib/origen/specs/creation_info.rb">lib/origen/specs/creation_info.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>39</td>
        <td>13</td>
        <td>13</td>
        <td>0</td>
        <td>2.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#4a011e1d2a2fe53cbc9516934d4bc8b042706d4e" class="src_link" title="lib/origen/specs/doc_resource.rb">lib/origen/specs/doc_resource.rb</a></td>
        <td class="red strong">35.71 %</td>
        <td>139</td>
        <td>70</td>
        <td>25</td>
        <td>45</td>
        <td>4.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#f2c40f045dd67acaf56b39d04fae6e5292abb295" class="src_link" title="lib/origen/specs/documentation.rb">lib/origen/specs/documentation.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>65</td>
        <td>24</td>
        <td>24</td>
        <td>0</td>
        <td>6.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#bfd2a793d573c06bcc04c7950aeb531757c6a1a6" class="src_link" title="lib/origen/specs/exhibit.rb">lib/origen/specs/exhibit.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>54</td>
        <td>27</td>
        <td>27</td>
        <td>0</td>
        <td>4.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#f4527ff7a084add7030262f51f816b7867e3b85e" class="src_link" title="lib/origen/specs/mode_select.rb">lib/origen/specs/mode_select.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>60</td>
        <td>22</td>
        <td>22</td>
        <td>0</td>
        <td>3.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#04eebd198aa26af3614e015aa6538af9b30571ab" class="src_link" title="lib/origen/specs/note.rb">lib/origen/specs/note.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>52</td>
        <td>18</td>
        <td>18</td>
        <td>0</td>
        <td>7.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#abade76dce54e58597c3c816f108268a46eb87d5" class="src_link" title="lib/origen/specs/override.rb">lib/origen/specs/override.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>22</td>
        <td>16</td>
        <td>16</td>
        <td>0</td>
        <td>6.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#37d0f0d261018d52040d54bb30bf11619c675398" class="src_link" title="lib/origen/specs/power_supply.rb">lib/origen/specs/power_supply.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>47</td>
        <td>16</td>
        <td>16</td>
        <td>0</td>
        <td>8.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#ade197bb8e0f0c2dff4fbd20f6162212e6c30159" class="src_link" title="lib/origen/specs/spec.rb">lib/origen/specs/spec.rb</a></td>
        <td class="red strong">41.1 %</td>
        <td>321</td>
        <td>146</td>
        <td>60</td>
        <td>86</td>
        <td>3.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#69bd9065c0b7c0e9926054f44ac7624c31543aa5" class="src_link" title="lib/origen/specs/spec_features.rb">lib/origen/specs/spec_features.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>46</td>
        <td>18</td>
        <td>18</td>
        <td>0</td>
        <td>4.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#36ad9ef4e31ece70f513aa833136b85935bc8282" class="src_link" title="lib/origen/specs/version_history.rb">lib/origen/specs/version_history.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>14</td>
        <td>8</td>
        <td>8</td>
        <td>0</td>
        <td>1.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#efa58c1e259647be7f3b51d719d6649dfbbea7bb" class="src_link" title="lib/origen/sub_blocks.rb">lib/origen/sub_blocks.rb</a></td>
        <td class="yellow strong">83.15 %</td>
        <td>336</td>
        <td>178</td>
        <td>148</td>
        <td>30</td>
        <td>177.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#02441df4eab3218f402d2ef4f93da55f7b9f62d7" class="src_link" title="lib/origen/utility/block_args.rb">lib/origen/utility/block_args.rb</a></td>
        <td class="yellow strong">81.25 %</td>
        <td>93</td>
        <td>16</td>
        <td>13</td>
        <td>3</td>
        <td>4.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#a08aa52bcb9a6b1af7ebc1dbeb703a4212022330" class="src_link" title="lib/origen/utility/diff.rb">lib/origen/utility/diff.rb</a></td>
        <td class="yellow strong">86.59 %</td>
        <td>162</td>
        <td>82</td>
        <td>71</td>
        <td>11</td>
        <td>2453.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#78c4dc281a1a1c0a5e4260ffdab85d1304401c6b" class="src_link" title="lib/origen/version_string.rb">lib/origen/version_string.rb</a></td>
        <td class="yellow strong">84.27 %</td>
        <td>362</td>
        <td>178</td>
        <td>150</td>
        <td>28</td>
        <td>33.3</td>
      </tr>
      
    </tbody>
  </table>
</div>


        
          <div class="file_list_container" id="Application">
  <h2>
    <span class="group_name">Application</span>
    (<span class="covered_percent"><span class="red">52.36%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         42.69
       </span>
    </span> hits/line)
  </h2>
  <a name="Application"></a>
  <div>
    <b>8</b> files in total.
    <b>1039</b> relevant lines. 
    <span class="green"><b>544</b> lines covered</span> and
    <span class="red"><b>495</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#92156c1ad83d63a1eee8ef7933ead16e6dfca6c9" class="src_link" title="lib/origen/application/configuration.rb">lib/origen/application/configuration.rb</a></td>
        <td class="green strong">90.14 %</td>
        <td>188</td>
        <td>71</td>
        <td>64</td>
        <td>7</td>
        <td>126.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#dd0a7e4d13556ee3fc397673d15dbe0d9a50585c" class="src_link" title="lib/origen/application/environment.rb">lib/origen/application/environment.rb</a></td>
        <td class="red strong">62.22 %</td>
        <td>186</td>
        <td>90</td>
        <td>56</td>
        <td>34</td>
        <td>15.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c39403aa5fb549e6da0bf209202b0f02ed9d1fb6" class="src_link" title="lib/origen/application/lsf.rb">lib/origen/application/lsf.rb</a></td>
        <td class="red strong">37.5 %</td>
        <td>145</td>
        <td>72</td>
        <td>27</td>
        <td>45</td>
        <td>0.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#01a1577f1c67c90f6a5bdb2a1c837ed86b7c0f76" class="src_link" title="lib/origen/application/lsf_manager.rb">lib/origen/application/lsf_manager.rb</a></td>
        <td class="red strong">19.25 %</td>
        <td>660</td>
        <td>348</td>
        <td>67</td>
        <td>281</td>
        <td>2.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#cd57154ccbcf32c5d24e8295103062b6c802a887" class="src_link" title="lib/origen/application/plugins.rb">lib/origen/application/plugins.rb</a></td>
        <td class="yellow strong">83.05 %</td>
        <td>117</td>
        <td>59</td>
        <td>49</td>
        <td>10</td>
        <td>262.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#53ed6d5447a9628f5d7ca88adb2455bd7e05635b" class="src_link" title="lib/origen/application/runner.rb">lib/origen/application/runner.rb</a></td>
        <td class="red strong">62.07 %</td>
        <td>252</td>
        <td>116</td>
        <td>72</td>
        <td>44</td>
        <td>23.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#185ffb35c06411074bf576d96e7a39c97f8cab77" class="src_link" title="lib/origen/application/statistics.rb">lib/origen/application/statistics.rb</a></td>
        <td class="yellow strong">81.74 %</td>
        <td>191</td>
        <td>115</td>
        <td>94</td>
        <td>21</td>
        <td>64.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#3af970bc9346618898d3710ca3c682de9ccd6b4d" class="src_link" title="lib/origen/application/target.rb">lib/origen/application/target.rb</a></td>
        <td class="red strong">68.45 %</td>
        <td>395</td>
        <td>168</td>
        <td>115</td>
        <td>53</td>
        <td>45.8</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Commands">
  <h2>
    <span class="group_name">Commands</span>
    (<span class="covered_percent"><span class="green">90.98%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         1.03
       </span>
    </span> hits/line)
  </h2>
  <a name="Commands"></a>
  <div>
    <b>3</b> files in total.
    <b>122</b> relevant lines. 
    <span class="green"><b>111</b> lines covered</span> and
    <span class="red"><b>11</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#553f1e7e167c50fb39fe95d9526543610ac9af97" class="src_link" title="lib/origen/commands/compile.rb">lib/origen/commands/compile.rb</a></td>
        <td class="green strong">96.77 %</td>
        <td>61</td>
        <td>31</td>
        <td>30</td>
        <td>1</td>
        <td>1.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#a8f857ccf9756068479fd050ab66b19396607825" class="src_link" title="lib/origen/commands/generate.rb">lib/origen/commands/generate.rb</a></td>
        <td class="yellow strong">88.64 %</td>
        <td>130</td>
        <td>44</td>
        <td>39</td>
        <td>5</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#19edf863ff5257176e2de98ff90761042d445b50" class="src_link" title="lib/origen/commands/program.rb">lib/origen/commands/program.rb</a></td>
        <td class="yellow strong">89.36 %</td>
        <td>70</td>
        <td>47</td>
        <td>42</td>
        <td>5</td>
        <td>1.0</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="CoreExt">
  <h2>
    <span class="group_name">CoreExt</span>
    (<span class="covered_percent"><span class="green">100.0%</span></span>
     covered at
     <span class="covered_strength">
       <span class="red">
         0.0
       </span>
    </span> hits/line)
  </h2>
  <a name="CoreExt"></a>
  <div>
    <b>0</b> files in total.
    <b>0.0</b> relevant lines. 
    <span class="green"><b>0.0</b> lines covered</span> and
    <span class="red"><b>0.0</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Generator">
  <h2>
    <span class="group_name">Generator</span>
    (<span class="covered_percent"><span class="red">76.71%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         42.23
       </span>
    </span> hits/line)
  </h2>
  <a name="Generator"></a>
  <div>
    <b>6</b> files in total.
    <b>438</b> relevant lines. 
    <span class="green"><b>336</b> lines covered</span> and
    <span class="red"><b>102</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#6b3b252934c00837a735c189ac70a6f2823aa009" class="src_link" title="lib/origen/generator/compiler.rb">lib/origen/generator/compiler.rb</a></td>
        <td class="red strong">72.79 %</td>
        <td>290</td>
        <td>147</td>
        <td>107</td>
        <td>40</td>
        <td>9.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c2d109cada38cd403208a51fd34bbfdb1b81a31c" class="src_link" title="lib/origen/generator/job.rb">lib/origen/generator/job.rb</a></td>
        <td class="yellow strong">82.89 %</td>
        <td>129</td>
        <td>76</td>
        <td>63</td>
        <td>13</td>
        <td>54.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#e8db790f0d141dbdd0cec66dedd360e8045d367a" class="src_link" title="lib/origen/generator/pattern_finder.rb">lib/origen/generator/pattern_finder.rb</a></td>
        <td class="red strong">72.5 %</td>
        <td>156</td>
        <td>80</td>
        <td>58</td>
        <td>22</td>
        <td>5.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#26fbc97bc25d25735fac31d4bd342ad10a630620" class="src_link" title="lib/origen/generator/pattern_iterator.rb">lib/origen/generator/pattern_iterator.rb</a></td>
        <td class="yellow strong">86.67 %</td>
        <td>55</td>
        <td>30</td>
        <td>26</td>
        <td>4</td>
        <td>29.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#5fa7bfba14991019381b35ec207e213900ff8b71" class="src_link" title="lib/origen/generator/renderer.rb">lib/origen/generator/renderer.rb</a></td>
        <td class="red strong">68.75 %</td>
        <td>115</td>
        <td>64</td>
        <td>44</td>
        <td>20</td>
        <td>29.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c374e5c42b9c57bd2945359bafb019ab6d1da4b9" class="src_link" title="lib/origen/generator/stage.rb">lib/origen/generator/stage.rb</a></td>
        <td class="green strong">92.68 %</td>
        <td>89</td>
        <td>41</td>
        <td>38</td>
        <td>3</td>
        <td>239.6</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Location">
  <h2>
    <span class="group_name">Location</span>
    (<span class="covered_percent"><span class="green">90.43%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         8.28
       </span>
    </span> hits/line)
  </h2>
  <a name="Location"></a>
  <div>
    <b>3</b> files in total.
    <b>115</b> relevant lines. 
    <span class="green"><b>104</b> lines covered</span> and
    <span class="red"><b>11</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#cb637135b176bbe7bf46ef67b57a5d3d8cba80fa" class="src_link" title="lib/origen/location.rb">lib/origen/location.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>6</td>
        <td>4</td>
        <td>4</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#37dfe588dbb909da7881d27c9bf282d203899d65" class="src_link" title="lib/origen/location/base.rb">lib/origen/location/base.rb</a></td>
        <td class="yellow strong">86.36 %</td>
        <td>116</td>
        <td>66</td>
        <td>57</td>
        <td>9</td>
        <td>11.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c50ede80f32b649a5bd1d9fc701555470109bce7" class="src_link" title="lib/origen/location/map.rb">lib/origen/location/map.rb</a></td>
        <td class="green strong">95.56 %</td>
        <td>83</td>
        <td>45</td>
        <td>43</td>
        <td>2</td>
        <td>4.2</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Pins">
  <h2>
    <span class="group_name">Pins</span>
    (<span class="covered_percent"><span class="yellow">86.62%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         1025.85
       </span>
    </span> hits/line)
  </h2>
  <a name="Pins"></a>
  <div>
    <b>10</b> files in total.
    <b>1383</b> relevant lines. 
    <span class="green"><b>1198</b> lines covered</span> and
    <span class="red"><b>185</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#6b5f3769dc54d5d373446a277df0b0b7201541bb" class="src_link" title="lib/origen/pins.rb">lib/origen/pins.rb</a></td>
        <td class="red strong">79.92 %</td>
        <td>700</td>
        <td>254</td>
        <td>203</td>
        <td>51</td>
        <td>366.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#e060d3ef6e171d73c8a48e0677d3d0e9db35f0a2" class="src_link" title="lib/origen/pins/function_proxy.rb">lib/origen/pins/function_proxy.rb</a></td>
        <td class="green strong">94.12 %</td>
        <td>36</td>
        <td>17</td>
        <td>16</td>
        <td>1</td>
        <td>5.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#223ce79f459ac8eb5f8d604b22df94cf3628167f" class="src_link" title="lib/origen/pins/ground_pin.rb">lib/origen/pins/ground_pin.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>6</td>
        <td>3</td>
        <td>3</td>
        <td>0</td>
        <td>2.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#70639eba32e561882ef3bca28a107f35827ceb8d" class="src_link" title="lib/origen/pins/pin.rb">lib/origen/pins/pin.rb</a></td>
        <td class="yellow strong">84.39 %</td>
        <td>912</td>
        <td>474</td>
        <td>400</td>
        <td>74</td>
        <td>616.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#f79e891f7a05d64c65b6705d1afdf0e27493988f" class="src_link" title="lib/origen/pins/pin_bank.rb">lib/origen/pins/pin_bank.rb</a></td>
        <td class="green strong">93.62 %</td>
        <td>386</td>
        <td>188</td>
        <td>176</td>
        <td>12</td>
        <td>2563.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#6c65673e61352c9d5720c24cbc07fbd36ec1bfb3" class="src_link" title="lib/origen/pins/pin_clock.rb">lib/origen/pins/pin_clock.rb</a></td>
        <td class="green strong">96.05 %</td>
        <td>124</td>
        <td>76</td>
        <td>73</td>
        <td>3</td>
        <td>59.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#69a0276238b962c5356f731c8196c6b96aa4f1aa" class="src_link" title="lib/origen/pins/pin_collection.rb">lib/origen/pins/pin_collection.rb</a></td>
        <td class="yellow strong">89.31 %</td>
        <td>505</td>
        <td>262</td>
        <td>234</td>
        <td>28</td>
        <td>875.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#09498499b6455cd39f7f00eabbde5677b9c0322d" class="src_link" title="lib/origen/pins/pin_common.rb">lib/origen/pins/pin_common.rb</a></td>
        <td class="yellow strong">82.61 %</td>
        <td>206</td>
        <td>92</td>
        <td>76</td>
        <td>16</td>
        <td>3452.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#b5c6fc2cf027659144bf72d5696be365c913dafb" class="src_link" title="lib/origen/pins/power_pin.rb">lib/origen/pins/power_pin.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>30</td>
        <td>12</td>
        <td>12</td>
        <td>0</td>
        <td>2.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#28205a53448dcbd9a80e317e5cc7c288fbdd80dc" class="src_link" title="lib/origen/pins/virtual_pin.rb">lib/origen/pins/virtual_pin.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>9</td>
        <td>5</td>
        <td>5</td>
        <td>0</td>
        <td>2.0</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Registers">
  <h2>
    <span class="group_name">Registers</span>
    (<span class="covered_percent"><span class="red">79.08%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         436.71
       </span>
    </span> hits/line)
  </h2>
  <a name="Registers"></a>
  <div>
    <b>7</b> files in total.
    <b>1845</b> relevant lines. 
    <span class="green"><b>1459</b> lines covered</span> and
    <span class="red"><b>386</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#4dd68ea3c45cf6c6aa7bbb708fa7de0055cada3a" class="src_link" title="lib/origen/registers.rb">lib/origen/registers.rb</a></td>
        <td class="red strong">77.51 %</td>
        <td>674</td>
        <td>338</td>
        <td>262</td>
        <td>76</td>
        <td>667.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#131797889f1f195d22128ccaa2db9fc45ada6e2b" class="src_link" title="lib/origen/registers/bit.rb">lib/origen/registers/bit.rb</a></td>
        <td class="yellow strong">80.21 %</td>
        <td>568</td>
        <td>288</td>
        <td>231</td>
        <td>57</td>
        <td>1501.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#4536e70f12f26dca765a78bbada36f31ebc6d8c9" class="src_link" title="lib/origen/registers/bit_collection.rb">lib/origen/registers/bit_collection.rb</a></td>
        <td class="red strong">73.95 %</td>
        <td>902</td>
        <td>403</td>
        <td>298</td>
        <td>105</td>
        <td>72.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#3586531aa057b6a16b21e65ccf7b47bc3c1ccfd7" class="src_link" title="lib/origen/registers/container.rb">lib/origen/registers/container.rb</a></td>
        <td class="green strong">90.63 %</td>
        <td>288</td>
        <td>96</td>
        <td>87</td>
        <td>9</td>
        <td>75.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#173bfdff56bd1704f856953552c2e24db0e77009" class="src_link" title="lib/origen/registers/domain.rb">lib/origen/registers/domain.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>16</td>
        <td>9</td>
        <td>9</td>
        <td>0</td>
        <td>11.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c93e9f48dab4384e8392c7b71727a5aa6e3300b2" class="src_link" title="lib/origen/registers/reg.rb">lib/origen/registers/reg.rb</a></td>
        <td class="yellow strong">80.31 %</td>
        <td>1437</td>
        <td>701</td>
        <td>563</td>
        <td>138</td>
        <td>156.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#637e921b4e0b273bd7da9382cd7181aa209d504c" class="src_link" title="lib/origen/registers/reg_collection.rb">lib/origen/registers/reg_collection.rb</a></td>
        <td class="yellow strong">90.0 %</td>
        <td>24</td>
        <td>10</td>
        <td>9</td>
        <td>1</td>
        <td>144.1</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Users">
  <h2>
    <span class="group_name">Users</span>
    (<span class="covered_percent"><span class="green">100.0%</span></span>
     covered at
     <span class="covered_strength">
       <span class="red">
         0.0
       </span>
    </span> hits/line)
  </h2>
  <a name="Users"></a>
  <div>
    <b>0</b> files in total.
    <b>0.0</b> relevant lines. 
    <span class="green"><b>0.0</b> lines covered</span> and
    <span class="red"><b>0.0</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Utility">
  <h2>
    <span class="group_name">Utility</span>
    (<span class="covered_percent"><span class="yellow">85.71%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         2053.7
       </span>
    </span> hits/line)
  </h2>
  <a name="Utility"></a>
  <div>
    <b>2</b> files in total.
    <b>98</b> relevant lines. 
    <span class="green"><b>84</b> lines covered</span> and
    <span class="red"><b>14</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#02441df4eab3218f402d2ef4f93da55f7b9f62d7" class="src_link" title="lib/origen/utility/block_args.rb">lib/origen/utility/block_args.rb</a></td>
        <td class="yellow strong">81.25 %</td>
        <td>93</td>
        <td>16</td>
        <td>13</td>
        <td>3</td>
        <td>4.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#a08aa52bcb9a6b1af7ebc1dbeb703a4212022330" class="src_link" title="lib/origen/utility/diff.rb">lib/origen/utility/diff.rb</a></td>
        <td class="yellow strong">86.59 %</td>
        <td>162</td>
        <td>82</td>
        <td>71</td>
        <td>11</td>
        <td>2453.5</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Bugs">
  <h2>
    <span class="group_name">Bugs</span>
    (<span class="covered_percent"><span class="yellow">88.64%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         4.92
       </span>
    </span> hits/line)
  </h2>
  <a name="Bugs"></a>
  <div>
    <b>2</b> files in total.
    <b>44</b> relevant lines. 
    <span class="green"><b>39</b> lines covered</span> and
    <span class="red"><b>5</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#37e67316ed500e4995c35df7b0c418ff08bd3d27" class="src_link" title="lib/origen/bugs.rb">lib/origen/bugs.rb</a></td>
        <td class="red strong">79.17 %</td>
        <td>45</td>
        <td>24</td>
        <td>19</td>
        <td>5</td>
        <td>6.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#f685ee11828e3707c573ecc9748616be6ca8fe7c" class="src_link" title="lib/origen/bugs/bug.rb">lib/origen/bugs/bug.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>36</td>
        <td>20</td>
        <td>20</td>
        <td>0</td>
        <td>3.5</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Features">
  <h2>
    <span class="group_name">Features</span>
    (<span class="covered_percent"><span class="green">90.91%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         43.74
       </span>
    </span> hits/line)
  </h2>
  <a name="Features"></a>
  <div>
    <b>2</b> files in total.
    <b>66</b> relevant lines. 
    <span class="green"><b>60</b> lines covered</span> and
    <span class="red"><b>6</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#4661a56ebf990e999242e5af2b6432550219f790" class="src_link" title="lib/origen/features.rb">lib/origen/features.rb</a></td>
        <td class="yellow strong">88.68 %</td>
        <td>104</td>
        <td>53</td>
        <td>47</td>
        <td>6</td>
        <td>53.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#16c450c003aa29a34776937382480a6e5ad0c0c0" class="src_link" title="lib/origen/features/feature.rb">lib/origen/features/feature.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>22</td>
        <td>13</td>
        <td>13</td>
        <td>0</td>
        <td>2.3</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Database">
  <h2>
    <span class="group_name">Database</span>
    (<span class="covered_percent"><span class="red">63.56%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         22.12
       </span>
    </span> hits/line)
  </h2>
  <a name="Database"></a>
  <div>
    <b>3</b> files in total.
    <b>118</b> relevant lines. 
    <span class="green"><b>75</b> lines covered</span> and
    <span class="red"><b>43</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#6508cd8a123306aab4946da60fe50eb693f80624" class="src_link" title="lib/origen/database.rb">lib/origen/database.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>6</td>
        <td>4</td>
        <td>4</td>
        <td>0</td>
        <td>2.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#9effa583a24f0cb741601eecbd1ca359e17422ba" class="src_link" title="lib/origen/database/key_value_store.rb">lib/origen/database/key_value_store.rb</a></td>
        <td class="red strong">72.13 %</td>
        <td>111</td>
        <td>61</td>
        <td>44</td>
        <td>17</td>
        <td>28.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#ecfdb0a12c8c0d3c6d0aee1b8c7efe589b7461a4" class="src_link" title="lib/origen/database/key_value_stores.rb">lib/origen/database/key_value_stores.rb</a></td>
        <td class="red strong">50.94 %</td>
        <td>108</td>
        <td>53</td>
        <td>27</td>
        <td>26</td>
        <td>16.3</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Parameters">
  <h2>
    <span class="group_name">Parameters</span>
    (<span class="covered_percent"><span class="green">97.58%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         122.47
       </span>
    </span> hits/line)
  </h2>
  <a name="Parameters"></a>
  <div>
    <b>4</b> files in total.
    <b>165</b> relevant lines. 
    <span class="green"><b>161</b> lines covered</span> and
    <span class="red"><b>4</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#db705f69b4123272853ab0cca20849142f255dc7" class="src_link" title="lib/origen/parameters.rb">lib/origen/parameters.rb</a></td>
        <td class="green strong">98.33 %</td>
        <td>107</td>
        <td>60</td>
        <td>59</td>
        <td>1</td>
        <td>47.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#2457e8cce1c8876418124bc9b5211b99f3ac6a2b" class="src_link" title="lib/origen/parameters/live.rb">lib/origen/parameters/live.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>22</td>
        <td>14</td>
        <td>14</td>
        <td>0</td>
        <td>36.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#e44fa72f12ba5c36a058302acb1f02c24b04657b" class="src_link" title="lib/origen/parameters/missing.rb">lib/origen/parameters/missing.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>28</td>
        <td>10</td>
        <td>10</td>
        <td>0</td>
        <td>1.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#8dd9e2a0b42778504cb617c161e9dd7f5aa746b7" class="src_link" title="lib/origen/parameters/set.rb">lib/origen/parameters/set.rb</a></td>
        <td class="green strong">96.3 %</td>
        <td>144</td>
        <td>81</td>
        <td>78</td>
        <td>3</td>
        <td>207.6</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Ports">
  <h2>
    <span class="group_name">Ports</span>
    (<span class="covered_percent"><span class="green">90.16%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         322.75
       </span>
    </span> hits/line)
  </h2>
  <a name="Ports"></a>
  <div>
    <b>5</b> files in total.
    <b>193</b> relevant lines. 
    <span class="green"><b>174</b> lines covered</span> and
    <span class="red"><b>19</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#6577354511c3194d9783d4e870a4f361a66dbbea" class="src_link" title="lib/origen/ports.rb">lib/origen/ports.rb</a></td>
        <td class="yellow strong">89.47 %</td>
        <td>66</td>
        <td>38</td>
        <td>34</td>
        <td>4</td>
        <td>1286.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#a74a379d6f3da623d14abbcd5ce6ebd9df882635" class="src_link" title="lib/origen/ports/bit_collection.rb">lib/origen/ports/bit_collection.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>6</td>
        <td>3</td>
        <td>3</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#133170f65c9dfa26e3debb760811d300184af0ba" class="src_link" title="lib/origen/ports/port.rb">lib/origen/ports/port.rb</a></td>
        <td class="yellow strong">89.61 %</td>
        <td>129</td>
        <td>77</td>
        <td>69</td>
        <td>8</td>
        <td>59.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#69d1b158ac6d5197c0bbf9ec3c890b4c3d2b5f79" class="src_link" title="lib/origen/ports/port_collection.rb">lib/origen/ports/port_collection.rb</a></td>
        <td class="green strong">90.91 %</td>
        <td>19</td>
        <td>11</td>
        <td>10</td>
        <td>1</td>
        <td>37.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#281417ea977ec3e668b542106cf17865c1100769" class="src_link" title="lib/origen/ports/section.rb">lib/origen/ports/section.rb</a></td>
        <td class="green strong">90.63 %</td>
        <td>116</td>
        <td>64</td>
        <td>58</td>
        <td>6</td>
        <td>132.0</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="CodeGenerators">
  <h2>
    <span class="group_name">CodeGenerators</span>
    (<span class="covered_percent"><span class="green">100.0%</span></span>
     covered at
     <span class="covered_strength">
       <span class="red">
         0.0
       </span>
    </span> hits/line)
  </h2>
  <a name="CodeGenerators"></a>
  <div>
    <b>0</b> files in total.
    <b>0.0</b> relevant lines. 
    <span class="green"><b>0.0</b> lines covered</span> and
    <span class="red"><b>0.0</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="RevisionControl">
  <h2>
    <span class="group_name">RevisionControl</span>
    (<span class="covered_percent"><span class="red">42.65%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         4.44
       </span>
    </span> hits/line)
  </h2>
  <a name="RevisionControl"></a>
  <div>
    <b>3</b> files in total.
    <b>279</b> relevant lines. 
    <span class="green"><b>119</b> lines covered</span> and
    <span class="red"><b>160</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#6712e3f1693f18385e895bc5814454dc06e243fa" class="src_link" title="lib/origen/revision_control.rb">lib/origen/revision_control.rb</a></td>
        <td class="red strong">69.23 %</td>
        <td>44</td>
        <td>13</td>
        <td>9</td>
        <td>4</td>
        <td>1.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#757d4a591660b487a84edf4d97e2604246495661" class="src_link" title="lib/origen/revision_control/base.rb">lib/origen/revision_control/base.rb</a></td>
        <td class="red strong">57.14 %</td>
        <td>257</td>
        <td>63</td>
        <td>36</td>
        <td>27</td>
        <td>2.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#9a306651418c62aec868bdac8be614934e5e868c" class="src_link" title="lib/origen/revision_control/git.rb">lib/origen/revision_control/git.rb</a></td>
        <td class="red strong">36.45 %</td>
        <td>369</td>
        <td>203</td>
        <td>74</td>
        <td>129</td>
        <td>5.2</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Specs">
  <h2>
    <span class="group_name">Specs</span>
    (<span class="covered_percent"><span class="yellow">80.12%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         24.61
       </span>
    </span> hits/line)
  </h2>
  <a name="Specs"></a>
  <div>
    <b>13</b> files in total.
    <b>815</b> relevant lines. 
    <span class="green"><b>653</b> lines covered</span> and
    <span class="red"><b>162</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#c24f41348606feab2212761a36c28a7bb4db774b" class="src_link" title="lib/origen/specs.rb">lib/origen/specs.rb</a></td>
        <td class="green strong">96.76 %</td>
        <td>761</td>
        <td>370</td>
        <td>358</td>
        <td>12</td>
        <td>44.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c1de94ef97b6b142551c6b2e1eaa65819f2417c5" class="src_link" title="lib/origen/specs/checkers.rb">lib/origen/specs/checkers.rb</a></td>
        <td class="red strong">71.64 %</td>
        <td>112</td>
        <td>67</td>
        <td>48</td>
        <td>19</td>
        <td>26.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#4eacb7547787cb285cd1cfdb4de27b576708cb87" class="src_link" title="lib/origen/specs/creation_info.rb">lib/origen/specs/creation_info.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>39</td>
        <td>13</td>
        <td>13</td>
        <td>0</td>
        <td>2.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#4a011e1d2a2fe53cbc9516934d4bc8b042706d4e" class="src_link" title="lib/origen/specs/doc_resource.rb">lib/origen/specs/doc_resource.rb</a></td>
        <td class="red strong">35.71 %</td>
        <td>139</td>
        <td>70</td>
        <td>25</td>
        <td>45</td>
        <td>4.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#f2c40f045dd67acaf56b39d04fae6e5292abb295" class="src_link" title="lib/origen/specs/documentation.rb">lib/origen/specs/documentation.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>65</td>
        <td>24</td>
        <td>24</td>
        <td>0</td>
        <td>6.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#bfd2a793d573c06bcc04c7950aeb531757c6a1a6" class="src_link" title="lib/origen/specs/exhibit.rb">lib/origen/specs/exhibit.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>54</td>
        <td>27</td>
        <td>27</td>
        <td>0</td>
        <td>4.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#f4527ff7a084add7030262f51f816b7867e3b85e" class="src_link" title="lib/origen/specs/mode_select.rb">lib/origen/specs/mode_select.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>60</td>
        <td>22</td>
        <td>22</td>
        <td>0</td>
        <td>3.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#04eebd198aa26af3614e015aa6538af9b30571ab" class="src_link" title="lib/origen/specs/note.rb">lib/origen/specs/note.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>52</td>
        <td>18</td>
        <td>18</td>
        <td>0</td>
        <td>7.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#abade76dce54e58597c3c816f108268a46eb87d5" class="src_link" title="lib/origen/specs/override.rb">lib/origen/specs/override.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>22</td>
        <td>16</td>
        <td>16</td>
        <td>0</td>
        <td>6.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#37d0f0d261018d52040d54bb30bf11619c675398" class="src_link" title="lib/origen/specs/power_supply.rb">lib/origen/specs/power_supply.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>47</td>
        <td>16</td>
        <td>16</td>
        <td>0</td>
        <td>8.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#ade197bb8e0f0c2dff4fbd20f6162212e6c30159" class="src_link" title="lib/origen/specs/spec.rb">lib/origen/specs/spec.rb</a></td>
        <td class="red strong">41.1 %</td>
        <td>321</td>
        <td>146</td>
        <td>60</td>
        <td>86</td>
        <td>3.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#69bd9065c0b7c0e9926054f44ac7624c31543aa5" class="src_link" title="lib/origen/specs/spec_features.rb">lib/origen/specs/spec_features.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>46</td>
        <td>18</td>
        <td>18</td>
        <td>0</td>
        <td>4.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#36ad9ef4e31ece70f513aa833136b85935bc8282" class="src_link" title="lib/origen/specs/version_history.rb">lib/origen/specs/version_history.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>14</td>
        <td>8</td>
        <td>8</td>
        <td>0</td>
        <td>1.8</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Netlist">
  <h2>
    <span class="group_name">Netlist</span>
    (<span class="covered_percent"><span class="green">94.64%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         183.6
       </span>
    </span> hits/line)
  </h2>
  <a name="Netlist"></a>
  <div>
    <b>3</b> files in total.
    <b>112</b> relevant lines. 
    <span class="green"><b>106</b> lines covered</span> and
    <span class="red"><b>6</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#a183f59228d45cf2f28fe5aa68537953b8f101ab" class="src_link" title="lib/origen/netlist.rb">lib/origen/netlist.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>24</td>
        <td>14</td>
        <td>14</td>
        <td>0</td>
        <td>158.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#8ae0b7495a540ac0bc29c49b24cdfc1ea43b819e" class="src_link" title="lib/origen/netlist/connectable.rb">lib/origen/netlist/connectable.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>18</td>
        <td>11</td>
        <td>11</td>
        <td>0</td>
        <td>10.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#6c05b8c4623442eedafc2e7cefbc3900fb9129a7" class="src_link" title="lib/origen/netlist/list.rb">lib/origen/netlist/list.rb</a></td>
        <td class="green strong">93.1 %</td>
        <td>152</td>
        <td>87</td>
        <td>81</td>
        <td>6</td>
        <td>209.5</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Models">
  <h2>
    <span class="group_name">Models</span>
    (<span class="covered_percent"><span class="green">100.0%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         19.56
       </span>
    </span> hits/line)
  </h2>
  <a name="Models"></a>
  <div>
    <b>3</b> files in total.
    <b>63</b> relevant lines. 
    <span class="green"><b>63</b> lines covered</span> and
    <span class="red"><b>0</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#ea295037472c2457cb90160e8a2903e2efaddb5d" class="src_link" title="lib/origen/models.rb">lib/origen/models.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>6</td>
        <td>4</td>
        <td>4</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#82c1cde5f872753523269703db95836b43285f6b" class="src_link" title="lib/origen/models/mux.rb">lib/origen/models/mux.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>26</td>
        <td>15</td>
        <td>15</td>
        <td>0</td>
        <td>6.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#7b91bf3441c1ffd15e83fc1ec5a500e2223c35df" class="src_link" title="lib/origen/models/scan_register.rb">lib/origen/models/scan_register.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>74</td>
        <td>44</td>
        <td>44</td>
        <td>0</td>
        <td>25.7</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Chips">
  <h2>
    <span class="group_name">Chips</span>
    (<span class="covered_percent"><span class="green">100.0%</span></span>
     covered at
     <span class="covered_strength">
       <span class="red">
         0.0
       </span>
    </span> hits/line)
  </h2>
  <a name="Chips"></a>
  <div>
    <b>0</b> files in total.
    <b>0.0</b> relevant lines. 
    <span class="green"><b>0.0</b> lines covered</span> and
    <span class="red"><b>0.0</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Errata">
  <h2>
    <span class="group_name">Errata</span>
    (<span class="covered_percent"><span class="green">97.67%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         7.1
       </span>
    </span> hits/line)
  </h2>
  <a name="Errata"></a>
  <div>
    <b>3</b> files in total.
    <b>86</b> relevant lines. 
    <span class="green"><b>84</b> lines covered</span> and
    <span class="red"><b>2</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#7f8e0daf171a6e98139d48357bf9ffdb07496edf" class="src_link" title="lib/origen/errata.rb">lib/origen/errata.rb</a></td>
        <td class="green strong">95.65 %</td>
        <td>117</td>
        <td>46</td>
        <td>44</td>
        <td>2</td>
        <td>11.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#114a17bfed913dc8a45336b48318c44c1739354b" class="src_link" title="lib/origen/errata/hw_erratum.rb">lib/origen/errata/hw_erratum.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>47</td>
        <td>22</td>
        <td>22</td>
        <td>0</td>
        <td>1.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#63c6445d232aaafef69158e8e325bec1810be759" class="src_link" title="lib/origen/errata/sw_erratum_workaround.rb">lib/origen/errata/sw_erratum_workaround.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>39</td>
        <td>18</td>
        <td>18</td>
        <td>0</td>
        <td>2.6</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Ungrouped">
  <h2>
    <span class="group_name">Ungrouped</span>
    (<span class="covered_percent"><span class="red">69.75%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         60.58
       </span>
    </span> hits/line)
  </h2>
  <a name="Ungrouped"></a>
  <div>
    <b>11</b> files in total.
    <b>1134</b> relevant lines. 
    <span class="green"><b>791</b> lines covered</span> and
    <span class="red"><b>343</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#ff7e18c03316a9dbe3412b6475ecfc47fa179c5e" class="src_link" title="lib/c99/ate_interface.rb">lib/c99/ate_interface.rb</a></td>
        <td class="green strong">97.56 %</td>
        <td>77</td>
        <td>41</td>
        <td>40</td>
        <td>1</td>
        <td>41.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#cf19c71c30f33ec52ec5672002df1f4ce5c511d2" class="src_link" title="lib/c99/doc_interface.rb">lib/c99/doc_interface.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>56</td>
        <td>26</td>
        <td>26</td>
        <td>0</td>
        <td>34.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#ab0230dd7c84dee5bfc822a568b9468bbef45ec4" class="src_link" title="lib/c99/nvm.rb">lib/c99/nvm.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>94</td>
        <td>52</td>
        <td>52</td>
        <td>0</td>
        <td>2.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#41cec756475f423d142dc06c543ee3a2447d12e4" class="src_link" title="lib/origen/chip_mode.rb">lib/origen/chip_mode.rb</a></td>
        <td class="red strong">79.37 %</td>
        <td>118</td>
        <td>63</td>
        <td>50</td>
        <td>13</td>
        <td>30.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#831dc94d9eeb385503f99da3f0ecf3b03fad2d81" class="src_link" title="lib/origen/chip_package.rb">lib/origen/chip_package.rb</a></td>
        <td class="red strong">23.63 %</td>
        <td>461</td>
        <td>237</td>
        <td>56</td>
        <td>181</td>
        <td>1.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#9c9bf3b4bb330a48e2e7f163aff2596f983d4dc8" class="src_link" title="lib/origen/controller.rb">lib/origen/controller.rb</a></td>
        <td class="red strong">75.81 %</td>
        <td>121</td>
        <td>62</td>
        <td>47</td>
        <td>15</td>
        <td>12.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#9460c459899c72afa207383273f513ee59c9bb62" class="src_link" title="lib/origen/file_handler.rb">lib/origen/file_handler.rb</a></td>
        <td class="red strong">68.94 %</td>
        <td>442</td>
        <td>235</td>
        <td>162</td>
        <td>73</td>
        <td>26.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#304dd40bd3e3adf26d9af835fe84adac3140ed40" class="src_link" title="lib/origen/mode.rb">lib/origen/mode.rb</a></td>
        <td class="green strong">96.88 %</td>
        <td>65</td>
        <td>32</td>
        <td>31</td>
        <td>1</td>
        <td>90.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#4b0a303846df38baad017eb60c900758826e1dab" class="src_link" title="lib/origen/model_initializer.rb">lib/origen/model_initializer.rb</a></td>
        <td class="green strong">96.67 %</td>
        <td>49</td>
        <td>30</td>
        <td>29</td>
        <td>1</td>
        <td>535.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#efa58c1e259647be7f3b51d719d6649dfbbea7bb" class="src_link" title="lib/origen/sub_blocks.rb">lib/origen/sub_blocks.rb</a></td>
        <td class="yellow strong">83.15 %</td>
        <td>336</td>
        <td>178</td>
        <td>148</td>
        <td>30</td>
        <td>177.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#78c4dc281a1a1c0a5e4260ffdab85d1304401c6b" class="src_link" title="lib/origen/version_string.rb">lib/origen/version_string.rb</a></td>
        <td class="yellow strong">84.27 %</td>
        <td>362</td>
        <td>178</td>
        <td>150</td>
        <td>28</td>
        <td>33.3</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
      </div>
    
      <div id="footer">
        Generated by <a href="http://github.com/colszowka/simplecov">simplecov</a> v0.10.0 
        and simplecov-html v0.10.0<br/>
        using examples, specs
      </div>
    
      <div class="source_files">
      
        <div class="source_table" id="ff7e18c03316a9dbe3412b6475ecfc47fa179c5e">
  <div class="header">
    <h3>lib/c99/ate_interface.rb</h3>
    <h4><span class="green">97.56 %</span> covered</h4>
    <div>
      <b>41</b> relevant lines. 
      <span class="green"><b>40</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module C99</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  class ATEInterface</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    include OrigenTesters::ProgramGenerators</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    # Options passed to Flow.create and Library.create will be passed in here, use as</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    # desired to configure your interface</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">    def initialize(_options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">    def log(msg)</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="11">
          <span class="hits">26</span>
          
          <code class="ruby">      flow.logprint(msg)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">    def func(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="15">
          <span class="hits">120</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">        duration: :static</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="19">
          <span class="hits">120</span>
          
          <code class="ruby">      block_loop(name, options) do |_block, i, group|</code>
        </li>
      
        <li class="covered" data-hits="128" data-linenumber="20">
          <span class="hits">128</span>
          
          <code class="ruby">        ins = test_instances.functional(name)</code>
        </li>
      
        <li class="covered" data-hits="128" data-linenumber="21">
          <span class="hits">128</span>
          
          <code class="ruby">        ins.set_wait_flags(:a) if options[:duration] == :dynamic</code>
        </li>
      
        <li class="covered" data-hits="128" data-linenumber="22">
          <span class="hits">128</span>
          
          <code class="ruby">        ins.pin_levels = options.delete(:pin_levels) if options[:pin_levels]</code>
        </li>
      
        <li class="covered" data-hits="128" data-linenumber="23">
          <span class="hits">128</span>
          
          <code class="ruby">        if group</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="24">
          <span class="hits">12</span>
          
          <code class="ruby">          pname = &quot;#{name}_b#{i}_pset&quot;</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="25">
          <span class="hits">12</span>
          
          <code class="ruby">          patsets.add(pname, [{ pattern: &quot;#{name}_b#{i}.PAT&quot; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">                              { pattern: &#39;nvm_global_subs.PAT&#39;, start_label: &#39;subr&#39; }])</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="27">
          <span class="hits">12</span>
          
          <code class="ruby">          ins.pattern = pname</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="28">
          <span class="hits">12</span>
          
          <code class="ruby">          flow.test(group, options) if i == 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="116" data-linenumber="30">
          <span class="hits">116</span>
          
          <code class="ruby">          pname = &quot;#{name}_pset&quot;</code>
        </li>
      
        <li class="covered" data-hits="116" data-linenumber="31">
          <span class="hits">116</span>
          
          <code class="ruby">          patsets.add(pname, [{ pattern: &quot;#{name}.PAT&quot; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">                              { pattern: &#39;nvm_global_subs.PAT&#39;, start_label: &#39;subr&#39; }])</code>
        </li>
      
        <li class="covered" data-hits="116" data-linenumber="33">
          <span class="hits">116</span>
          
          <code class="ruby">          ins.pattern = pname</code>
        </li>
      
        <li class="covered" data-hits="116" data-linenumber="34">
          <span class="hits">116</span>
          
          <code class="ruby">          if options[:cz_setup]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">            flow.cz(ins, options[:cz_setup], options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="115" data-linenumber="37">
          <span class="hits">115</span>
          
          <code class="ruby">            flow.test(ins, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="43">
          <span class="hits">2</span>
          
          <code class="ruby">    def block_loop(name, options)</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="44">
          <span class="hits">120</span>
          
          <code class="ruby">      if options[:by_block]</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="45">
          <span class="hits">4</span>
          
          <code class="ruby">        test_instances.group do |group|</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="46">
          <span class="hits">4</span>
          
          <code class="ruby">          group.name = name</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="47">
          <span class="hits">4</span>
          
          <code class="ruby">          $nvm.blocks.each_with_index do |block, i|</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="48">
          <span class="hits">12</span>
          
          <code class="ruby">            yield block, i, group</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="116" data-linenumber="52">
          <span class="hits">116</span>
          
          <code class="ruby">        yield</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="56">
          <span class="hits">2</span>
          
          <code class="ruby">    def por(options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="57">
          <span class="hits">1</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">        instance_not_available: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="60">
          <span class="hits">1</span>
          
          <code class="ruby">      flow.test(&#39;por_ins&#39;, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="63">
          <span class="hits">2</span>
          
          <code class="ruby">    def para(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="64">
          <span class="hits">1</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">        high_voltage: false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="67">
          <span class="hits">1</span>
          
          <code class="ruby">      if options.delete(:high_voltage)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby">        ins = test_instances.bpmu(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="70">
          
          
          <code class="ruby">        ins = test_instances.ppmu(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="72">
          <span class="hits">1</span>
          
          <code class="ruby">      ins.dc_category = &#39;NVM_PARA&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="73">
          <span class="hits">1</span>
          
          <code class="ruby">      flow.test(ins, options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="74">
          <span class="hits">1</span>
          
          <code class="ruby">      patsets.add(&quot;#{name}_pset&quot;, pattern: &quot;#{name}.PAT&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="cf19c71c30f33ec52ec5672002df1f4ce5c511d2">
  <div class="header">
    <h3>lib/c99/doc_interface.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>26</b> relevant lines. 
      <span class="green"><b>26</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module C99</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  class DocInterface</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    include OrigenTesters::Doc::Generator</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    # Options passed to Flow.create and Library.create will be passed in here, use as</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    # desired to configure your interface</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">    def initialize(_options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">    def resources_filename=(*_args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="13">
          <span class="hits">2</span>
          
          <code class="ruby">    def log(_msg)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">    def func(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="17">
          <span class="hits">120</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">        duration: :static</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="21">
          <span class="hits">120</span>
          
          <code class="ruby">      block_loop(name, options) do |_block, i, group|</code>
        </li>
      
        <li class="covered" data-hits="128" data-linenumber="22">
          <span class="hits">128</span>
          
          <code class="ruby">        ins = tests.add(name, options)</code>
        </li>
      
        <li class="covered" data-hits="128" data-linenumber="23">
          <span class="hits">128</span>
          
          <code class="ruby">        if group</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="24">
          <span class="hits">12</span>
          
          <code class="ruby">          flow.test(group, options) if i == 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="116" data-linenumber="26">
          <span class="hits">116</span>
          
          <code class="ruby">          flow.test(ins, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="31">
          <span class="hits">2</span>
          
          <code class="ruby">    def block_loop(name, options)</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="32">
          <span class="hits">120</span>
          
          <code class="ruby">      if options[:by_block]</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="33">
          <span class="hits">4</span>
          
          <code class="ruby">        tests.group do |group|</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="34">
          <span class="hits">4</span>
          
          <code class="ruby">          group.name = name</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="35">
          <span class="hits">4</span>
          
          <code class="ruby">          $nvm.blocks.each_with_index do |block, i|</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="36">
          <span class="hits">12</span>
          
          <code class="ruby">            yield block, i, group</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="116" data-linenumber="40">
          <span class="hits">116</span>
          
          <code class="ruby">        yield</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="44">
          <span class="hits">2</span>
          
          <code class="ruby">    def por(_options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="47">
          <span class="hits">2</span>
          
          <code class="ruby">    def para(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="48">
          <span class="hits">1</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">        high_voltage: false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="51">
          <span class="hits">1</span>
          
          <code class="ruby">      ins = tests.add(name, options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="52">
          <span class="hits">1</span>
          
          <code class="ruby">      ins.dc_category = &#39;NVM_PARA&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="53">
          <span class="hits">1</span>
          
          <code class="ruby">      flow.test(ins, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="ab0230dd7c84dee5bfc822a568b9468bbef45ec4">
  <div class="header">
    <h3>lib/c99/nvm.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>52</b> relevant lines. 
      <span class="green"><b>52</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module C99</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">  # Most of the definition for this lives in core_support</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">  class NVM</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">    attr_accessor :attribute_x</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">    def override_method</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      :overridden</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">    def added_method</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">      :added</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_multi_split_reg</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">      reg :multi_group, 0x0070, size: 16 do |reg|</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 15,   :mike,  reset: 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 14,   :bill,  reset: 0</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 13,   :robert,  reset: 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 12,   :james,  reset: 0</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 11,   :james, reset: 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 10,   :james, reset: 0</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 9,    :paul,  reset: 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 8,    :peter,  reset: 0</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 7,    :mike,  reset: 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 6,    :mike,  reset: 0</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 5,    :paul,  reset: 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 4,    :paul,  reset: 0</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 3,    :mike, reset: 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 2,    :robert, reset: 0</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 1,    :bill,  reset: 0</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 0,    :ian,  reset: 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="35">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_proth_reg</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">      reg :proth, 0x0024, size: 32 do |reg|</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 31..24,   :fprot7,  reset: 0xFF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 23..16,   :fprot6,  reset: 0xEE</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 15..8,    :fprot5,  reset: 0xDD</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="40">
          <span class="hits">1</span>
          
          <code class="ruby">        reg.bits 7..0,     :fprot4,  reset: 0x11</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="44">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_non_byte_aligned_regs</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="45">
          <span class="hits">1</span>
          
          <code class="ruby">      add_reg :non_aligned_small, 0x1000, size: 4</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="46">
          <span class="hits">1</span>
          
          <code class="ruby">      add_reg :non_aligned_big, 0x1010, size: 10</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="50">
          <span class="hits">2</span>
          
          <code class="ruby">  class NVMSub &lt; NVM</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="51">
          <span class="hits">2</span>
          
          <code class="ruby">    def redefine_data_reg</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="52">
          <span class="hits">2</span>
          
          <code class="ruby">      add_reg :data,      0x40,   16,  d: { pos: 0, bits: 16 }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">    # Tests that the block format for defining registers works</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="56">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_reg_with_block_format</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">      # ** Data Register 3 **</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">      # This is dreg</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="59">
          <span class="hits">5</span>
          
          <code class="ruby">      add_reg :dreg, 0x1000, size: 16 do |reg|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">        # This is dreg bit 15</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="61">
          <span class="hits">5</span>
          
          <code class="ruby">        reg.bit 15,    :bit15, reset: 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">        # **Bit 14** - This does something cool</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">        #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">        # 0 | Coolness is disabled</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">        # 1 | Coolness is enabled</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="66">
          <span class="hits">5</span>
          
          <code class="ruby">        reg.bits 14,    :bit14</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">        # This is dreg bit upper</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="68">
          <span class="hits">5</span>
          
          <code class="ruby">        reg.bits 13..8, :upper</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">        # This is dreg bit lower</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">        # This is dreg bit lower line 2</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="71">
          <span class="hits">5</span>
          
          <code class="ruby">        reg.bit 7..0,  :lower, writable: false, reset: 0x55</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">      # This is dreg2</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="75">
          <span class="hits">5</span>
          
          <code class="ruby">      reg :dreg2, 0x1000, size: 16 do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">        # This is dreg2 bit 15</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="77">
          <span class="hits">5</span>
          
          <code class="ruby">        bit 15,    :bit15, reset: 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">        # This is dreg2 bit upper</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="79">
          <span class="hits">5</span>
          
          <code class="ruby">        bits 14..8, :upper</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">        # This is dreg2 bit lower</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">        # This is dreg2 bit lower line 2</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="82">
          <span class="hits">5</span>
          
          <code class="ruby">        bit 7..0,  :lower, writable: false, reset: 0x55</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">      # Finally a test that descriptions can be supplied via the API</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="86">
          <span class="hits">5</span>
          
          <code class="ruby">      reg :dreg3, 0x1000, size: 16, description: &quot;** Data Register 3 **\nThis is dreg3&quot; do</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="87">
          <span class="hits">5</span>
          
          <code class="ruby">        bit 15,    :bit15, reset: 1, description: &#39;This is dreg3 bit 15&#39;</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="88">
          <span class="hits">5</span>
          
          <code class="ruby">        bit 14, :bit14, description: &quot;**Bit 14** - This does something cool\n\n0 | Coolness is disabled\n1 | Coolness is enabled&quot;</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="89">
          <span class="hits">5</span>
          
          <code class="ruby">        bits 13..8, :upper, description: &#39;This is dreg3 bit upper&#39;</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="90">
          <span class="hits">5</span>
          
          <code class="ruby">        bit 7..0,  :lower, writable: false, reset: 0x55, description: &quot;This is dreg3 bit lower\nThis is dreg3 bit lower line 2&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="92156c1ad83d63a1eee8ef7933ead16e6dfca6c9">
  <div class="header">
    <h3>lib/origen/application/configuration.rb</h3>
    <h4><span class="green">90.14 %</span> covered</h4>
    <div>
      <b>71</b> relevant lines. 
      <span class="green"><b>64</b> lines covered</span> and
      <span class="red"><b>7</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  class Application</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    class Configuration</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">      require &#39;pathname&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">      # Returns the configuration&#39;s application instance</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :app</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :name, :initials, :instructions,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">                    :history_file, :release_directory, :release_email_subject,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">                    :production_targets,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">                    :vault, :output_directory, :reference_directory,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">                    :semantically_version, :log_directory, :pattern_name_translator,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">                    :pattern_directory, :pattern_output_directory, :pattern_prefix, :pattern_postfix,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">                    :pattern_header, :default_lsf_action, :release_instructions, :proceed_with_pattern,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">                    :test_program_output_directory, :erb_trim_mode, :test_program_source_directory,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">                    :test_program_template_directory, :referenced_pattern_list, :program_prefix,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">                    :copy_command, :diff_command, :compile_only_dot_erb_files, :web_directory,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">                    :web_domain,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">                    :strict_errors, :unmanaged_dirs, :unmanaged_files, :remotes,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">                    :external_app_dirs, :lint_test, :shared, :yammer_group, :rc_url, :rc_workflow,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">                    :user_aliases, :release_externally, :gem_name, :disqus_shortname</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      # Mark any attributes that are likely to depend on properties of the target here,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      # this will raise an error if they are ever accessed before the target has been</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      # instantiated (a concern for Origen core developers only).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      # These attributes will also receive an enhanced accessor that accepts a block, see</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">      # below for more details on this.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="30">
          <span class="hits">2</span>
          
          <code class="ruby">      ATTRS_THAT_DEPEND_ON_TARGET = [</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">        :output_directory, :reference_directory, :pattern_postfix, :pattern_prefix,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">        :pattern_header, :release_directory, :pattern_name_translator, :pattern_directory, :pattern_output_directory,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">        :proceed_with_pattern, :test_program_output_directory, :test_program_source_directory,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">        :test_program_template_directory, :referenced_pattern_list, :program_prefix, :web_directory,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">        :web_domain</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">      # Any attributes that want to accept a block, but not necessarily require the target</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      # can be added here</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="40">
          <span class="hits">2</span>
          
          <code class="ruby">      ATTRS_THAT_ACCEPT_A_BLOCK = ATTRS_THAT_DEPEND_ON_TARGET +</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">                                  [:release_instructions, :history_file, :log_directory, :copy_command,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">                                   :diff_command, :remotes,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">                                   :external_app_dirs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">                                  ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">      # If a current plugin is present then its value for these attributes will be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">      # used instead of that from the current application</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="48">
          <span class="hits">2</span>
          
          <code class="ruby">      ATTRS_THAT_CURRENT_PLUGIN_CAN_OVERRIDE = [</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">        :pattern_prefix, :pattern_postfix, :program_prefix, :pattern_header, :pattern_output_directory,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">        :output_directory, :reference_directory, :test_program_output_directory,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">        :test_program_template_directory, :referenced_pattern_list</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">      ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="54">
          <span class="hits">2</span>
          
          <code class="ruby">      def log_deprecations</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">        # unless imports.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">        #  Origen.deprecate &quot;App #{app.name} uses config.imports this will be removed in Origen V3 and a Gemfile/.gemspec should be used instead&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">        # end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="60">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize(app)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="61">
          <span class="hits">10</span>
          
          <code class="ruby">        @app = app</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="62">
          <span class="hits">10</span>
          
          <code class="ruby">        @name = &#39;Unknown&#39;</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="63">
          <span class="hits">10</span>
          
          <code class="ruby">        @initials = &#39;NA&#39;</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="64">
          <span class="hits">10</span>
          
          <code class="ruby">        @semantically_version = false</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="65">
          <span class="hits">10</span>
          
          <code class="ruby">        @compile_only_dot_erb_files = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">        # Functions used here since Origen.root is not available when this is first instantiated</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="67">
          <span class="hits">12</span>
          
          <code class="ruby">        @output_directory = -&gt; { &quot;#{Origen.root}/output&quot; }</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="68">
          <span class="hits">11</span>
          
          <code class="ruby">        @reference_directory = -&gt; { &quot;#{Origen.root}/.ref&quot; }</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="69">
          <span class="hits">10</span>
          
          <code class="ruby">        @release_directory = -&gt; { Origen.root }</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="70">
          <span class="hits">10</span>
          
          <code class="ruby">        @release_email_subject = false</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="71">
          <span class="hits">12</span>
          
          <code class="ruby">        @log_directory = -&gt; { &quot;#{Origen.root}/log&quot; }</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="72">
          <span class="hits">10</span>
          
          <code class="ruby">        @pattern_name_translator = -&gt;(name) { name }</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="73">
          <span class="hits">23</span>
          
          <code class="ruby">        @pattern_directory = -&gt; { &quot;#{Origen.root}/pattern&quot; }</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="74">
          <span class="hits">10</span>
          
          <code class="ruby">        @pattern_output_directory = -&gt; { &quot;#{Origen.root}/output/patterns&quot; }</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="75">
          <span class="hits">10</span>
          
          <code class="ruby">        @history_file = -&gt; { &quot;#{Origen.root}/doc/history&quot; }</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="76">
          <span class="hits">10</span>
          
          <code class="ruby">        @default_lsf_action = :clear</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="77">
          <span class="hits">35</span>
          
          <code class="ruby">        @proceed_with_pattern = -&gt;(_name) { true }</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="78">
          <span class="hits">10</span>
          
          <code class="ruby">        @erb_trim_mode = &#39;%&#39;</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="79">
          <span class="hits">11</span>
          
          <code class="ruby">        @referenced_pattern_list = -&gt; { &quot;#{Origen.root}/list/referenced.list&quot; }</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="80">
          <span class="hits">10</span>
          
          <code class="ruby">        @copy_command = -&gt; { Origen.running_on_windows? ? &#39;copy&#39; : &#39;cp&#39; }</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="81">
          <span class="hits">10</span>
          
          <code class="ruby">        @diff_command = -&gt; { Origen.running_on_windows? ? &#39;start winmerge&#39; : &#39;tkdiff&#39; }</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="82">
          <span class="hits">10</span>
          
          <code class="ruby">        @imports = []</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="83">
          <span class="hits">10</span>
          
          <code class="ruby">        @imports_dev = []</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="84">
          <span class="hits">10</span>
          
          <code class="ruby">        @external_app_dirs = []</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="85">
          <span class="hits">10</span>
          
          <code class="ruby">        @unmanaged_dirs = []</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="86">
          <span class="hits">10</span>
          
          <code class="ruby">        @unmanaged_files = []</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="87">
          <span class="hits">10</span>
          
          <code class="ruby">        @remotes = []</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="88">
          <span class="hits">10</span>
          
          <code class="ruby">        @lint_test = {}</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="89">
          <span class="hits">10</span>
          
          <code class="ruby">        @user_aliases = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">      # This defines an enhanced accessor for these attributes that allows them to be assigned</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">      # to an anonymous function to calculate the value based on some property of the target</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">      # objects.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">      # Without this the objects from the target could not be referenced in config/application.rb</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">      # because they don&#39;t exist yet, for example this will not work because $dut has not yet</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">      # been instantiated:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">      #   # config/application.rb</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">      #   config.output_directory = &quot;#{Origen.root}/output/#{$dut.class}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">      # However this accessor provides a way to do that via the following syntax:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">      #   # config/application.rb</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">      #   config.output_directory do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">      #     &quot;#{Origen.root}/output/#{$dut.class}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">      # Or on one line:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">      #   # config/application.rb</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">      #   config.output_directory { &quot;#{Origen.root}/output/#{$dut.class}&quot; }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">      # Or if you prefer the more explicit:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">      #   # config/application.rb</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">      #   config.output_directory = -&gt;{ &quot;#{Origen.root}/output/#{$dut.class}&quot; }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="119">
          <span class="hits">2</span>
          
          <code class="ruby">      ATTRS_THAT_ACCEPT_A_BLOCK.each do |name|</code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="120">
          <span class="hits">48</span>
          
          <code class="ruby">        define_method name do |override = true, &amp;block|</code>
        </li>
      
        <li class="covered" data-hits="1495" data-linenumber="121">
          <span class="hits">1495</span>
          
          <code class="ruby">          if block # _given?</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="122">
          <span class="hits">12</span>
          
          <code class="ruby">            instance_variable_set(&quot;@#{name}&quot;.to_sym, block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="1483" data-linenumber="124">
          <span class="hits">1483</span>
          
          <code class="ruby">            if override &amp;&amp; ATTRS_THAT_CURRENT_PLUGIN_CAN_OVERRIDE.include?(name) &amp;&amp;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">               app.current? &amp;&amp; Origen.app.plugins.current</code>
        </li>
      
        <li class="covered" data-hits="570" data-linenumber="126">
          <span class="hits">570</span>
          
          <code class="ruby">              var = Origen.app.plugins.current.config.send(name, override: false)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="1483" data-linenumber="128">
          <span class="hits">1483</span>
          
          <code class="ruby">            var ||= instance_variable_get(&quot;@#{name}&quot;.to_sym)</code>
        </li>
      
        <li class="covered" data-hits="1483" data-linenumber="129">
          <span class="hits">1483</span>
          
          <code class="ruby">            if var.respond_to?(&#39;call&#39;)</code>
        </li>
      
        <li class="covered" data-hits="241" data-linenumber="130">
          <span class="hits">241</span>
          
          <code class="ruby">              if ATTRS_THAT_DEPEND_ON_TARGET.include?(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">                # If an attempt has been made to access this attribute before the target has</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">                # been instantiated raise an error</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">                # Note Origen.app here instead of just app to ensure we are talking to the top level application,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby">                # that is the only one that has a target</code>
        </li>
      
        <li class="covered" data-hits="239" data-linenumber="135">
          <span class="hits">239</span>
          
          <code class="ruby">                unless Origen.app.target_instantiated?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="136">
          
          
          <code class="ruby">                  fail &quot;You have attempted to access Origen.config.#{name} before instantiating the target&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="241" data-linenumber="139">
          <span class="hits">241</span>
          
          <code class="ruby">              var.call</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="1242" data-linenumber="141">
          <span class="hits">1242</span>
          
          <code class="ruby">              var</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="147">
          <span class="hits">2</span>
          
          <code class="ruby">      (ATTRS_THAT_CURRENT_PLUGIN_CAN_OVERRIDE - ATTRS_THAT_ACCEPT_A_BLOCK).each do |name|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="148">
          
          
          <code class="ruby">        if override &amp;&amp; ATTRS_THAT_CURRENT_PLUGIN_CAN_OVERRIDE.include?(name) &amp;&amp;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby">           app.current? &amp;&amp; Origen.app.plugins.current</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="150">
          
          
          <code class="ruby">          var = Origen.app.plugins.current.config.send(name, override: false)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="152">
          
          
          <code class="ruby">        var || instance_variable_get(&quot;@#{name}&quot;.to_sym)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="155">
          <span class="hits">2</span>
          
          <code class="ruby">      def pattern_name_translator(name = nil, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="156">
          <span class="hits">5</span>
          
          <code class="ruby">        if block</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="157">
          <span class="hits">4</span>
          
          <code class="ruby">          @pattern_name_translator = block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="159">
          <span class="hits">1</span>
          
          <code class="ruby">          @pattern_name_translator.call(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="161">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="163">
          <span class="hits">2</span>
          
          <code class="ruby">      def proceed_with_pattern(name = nil, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="164">
          <span class="hits">25</span>
          
          <code class="ruby">        if block</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="165">
          
          
          <code class="ruby">          @proceed_with_pattern = block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="167">
          <span class="hits">25</span>
          
          <code class="ruby">          @proceed_with_pattern.call(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">      # Add a new pattern iterator</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="172">
          <span class="hits">2</span>
          
          <code class="ruby">      def pattern_iterator</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="173">
          <span class="hits">4</span>
          
          <code class="ruby">        yield Origen.generator.create_iterator</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="176">
          <span class="hits">2</span>
          
          <code class="ruby">      def lsf</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="177">
          <span class="hits">3</span>
          
          <code class="ruby">        app.lsf.configuration</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby">      # Prevent a new attribute from a future version of Origen from dying before the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby">      # user can be prompted to upgrade</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="182">
          <span class="hits">2</span>
          
          <code class="ruby">      def method_missing(method, *_args, &amp;_block)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="183">
          
          
          <code class="ruby">        method = method.to_s.sub(&#39;=&#39;, &#39;&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="184">
          
          
          <code class="ruby">        Origen.log.warning &quot;WARNING - unknown configuration attribute: #{method}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="dd0a7e4d13556ee3fc397673d15dbe0d9a50585c">
  <div class="header">
    <h3>lib/origen/application/environment.rb</h3>
    <h4><span class="red">62.22 %</span> covered</h4>
    <div>
      <b>90</b> relevant lines. 
      <span class="green"><b>56</b> lines covered</span> and
      <span class="red"><b>34</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  class Application</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Class to control the environment.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    # The environment is a Ruby file that is loaded prior to generating every piece of output.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    # It is optional, and is loaded before the target, thereby allowing targets to override</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    # environment settings.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">    # A typical use case for the environment is to setup the test platform, or to set Origen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    # to run in debug or simulation mode. It can generally be thought of as a global target.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    # All environment definition files must live in Origen.root/environment.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">    # An instance of this class is automatically</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">    # instantiated and available globally as Origen.environment.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">    class Environment</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">      DIR = &quot;#{Origen.root}/environment&quot;   # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">      SAVE_FILE = &quot;#{DIR}/.default&quot;      # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="19">
          <span class="hits">2</span>
          
          <code class="ruby">      DEFAULT_FILE = &quot;#{DIR}/default.rb&quot; # :nodoc:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      # Returns the name (the filename) of the current environment</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="22">
          <span class="hits">2</span>
          
          <code class="ruby">      def name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="23">
          
          
          <code class="ruby">        file.basename(&#39;.rb&#39;).to_s if file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      # Returns Array of all environments available</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="27">
          <span class="hits">2</span>
          
          <code class="ruby">      def all_environments</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="28">
          <span class="hits">3</span>
          
          <code class="ruby">        envs = []</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="29">
          <span class="hits">3</span>
          
          <code class="ruby">        find(&#39;&#39;).sort.each do |file|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="30">
          <span class="hits">6</span>
          
          <code class="ruby">          envs &lt;&lt; File.basename(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="32">
          <span class="hits">3</span>
          
          <code class="ruby">        envs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">      # Returns true if the environment exists, this can be used to test for the presence</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      # of an environment before calling one of the other methods to actually apply it.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">      # It will return true if one or more environments are found matching the given name,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      # use the unique? method to test if the given name uniquely identifies a valid</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      # environment.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="41">
          <span class="hits">2</span>
          
          <code class="ruby">      def exists?(name)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="42">
          <span class="hits">3</span>
          
          <code class="ruby">        envs = find(name)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="43">
          <span class="hits">3</span>
          
          <code class="ruby">        envs.size &gt; 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="45">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :exist?, :exists?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">      # Similar to the exists? method, this will return true only if the given name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">      # resolves to a single valid environment.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="49">
          <span class="hits">2</span>
          
          <code class="ruby">      def unique?(name)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="50">
          <span class="hits">3</span>
          
          <code class="ruby">        envs = find(name)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="51">
          <span class="hits">3</span>
          
          <code class="ruby">        envs.size == 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">      # Switch to the supplied environment, name can be a fragment as long as it allows</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">      # a unique environment to be identified.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">      # Calling this method does not affect the default environment setting in the workspace.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="58">
          <span class="hits">2</span>
          
          <code class="ruby">      def temporary=(name)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="59">
          <span class="hits">3</span>
          
          <code class="ruby">        envs = find(name)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="60">
          <span class="hits">3</span>
          
          <code class="ruby">        if envs.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="61">
          
          
          <code class="ruby">          puts &quot;Sorry no environments were found matching &#39;#{name}&#39;!&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="62">
          
          
          <code class="ruby">          puts &#39;Here are the available options:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="63">
          
          
          <code class="ruby">          find(&#39;&#39;).sort.each do |file|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="64">
          
          
          <code class="ruby">            puts File.basename(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="66">
          
          
          <code class="ruby">          exit 1</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="67">
          <span class="hits">3</span>
          
          <code class="ruby">        elsif envs.size &gt; 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="68">
          
          
          <code class="ruby">          puts &#39;Please try again with one of the following environments:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="69">
          
          
          <code class="ruby">          envs.sort.each do |file|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="70">
          
          
          <code class="ruby">            puts File.basename(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="72">
          
          
          <code class="ruby">          exit 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="74">
          <span class="hits">3</span>
          
          <code class="ruby">          self.file = envs[0]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="77">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :switch, :temporary=</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="78">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :switch_to, :temporary=</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">      # As #temporary= except that the given environment will be set to the workspace default</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="81">
          <span class="hits">2</span>
          
          <code class="ruby">      def default=(name)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="82">
          <span class="hits">2</span>
          
          <code class="ruby">        if name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="83">
          
          
          <code class="ruby">          self.temporary = name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="85">
          <span class="hits">2</span>
          
          <code class="ruby">          @file = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="87">
          <span class="hits">2</span>
          
          <code class="ruby">        save</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">      # Prints out the current environment details to the command line</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="91">
          <span class="hits">2</span>
          
          <code class="ruby">      def describe</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="92">
          
          
          <code class="ruby">        f = self.file!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="93">
          
          
          <code class="ruby">        puts &quot;Current environment: #{f.basename}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="94">
          
          
          <code class="ruby">        puts &#39;*&#39; * 70</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="95">
          
          
          <code class="ruby">        File.open(f).each do |line|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="96">
          
          
          <code class="ruby">          puts &quot;  #{line}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="98">
          
          
          <code class="ruby">        puts &#39;*&#39; * 70</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">      # Returns an array of matching environment file paths</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="102">
          <span class="hits">2</span>
          
          <code class="ruby">      def find(name)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="103">
          <span class="hits">12</span>
          
          <code class="ruby">        if name</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="104">
          <span class="hits">12</span>
          
          <code class="ruby">          name = name.gsub(&#39;*&#39;, &#39;&#39;)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="105">
          <span class="hits">12</span>
          
          <code class="ruby">          if File.exist?(name)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="106">
          
          
          <code class="ruby">            [name]</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="107">
          <span class="hits">12</span>
          
          <code class="ruby">          elsif File.exist?(&quot;#{Origen.root}/environment/#{name}&quot;) &amp;&amp; name != &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="108">
          
          
          <code class="ruby">            [&quot;#{Origen.root}/environment/#{name}&quot;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">            # The below weirdness is to make it recurse into symlinked directories</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="111">
          <span class="hits">12</span>
          
          <code class="ruby">            Dir.glob(&quot;#{DIR}/**{,/*/**}/*&quot;).sort.uniq.select do |file|</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="112">
          <span class="hits">25</span>
          
          <code class="ruby">              File.basename(file) =~ /#{name}/ &amp;&amp; file !~ /.*\.rb.+$/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="116">
          
          
          <code class="ruby">          [nil]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">      # Saves the current environment as the workspace default, i.e. the current environment</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">      # will be used by Origen the next time if no other environment is specified</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="122">
          <span class="hits">2</span>
          
          <code class="ruby">      def save # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="123">
          <span class="hits">2</span>
          
          <code class="ruby">        if @file</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="124">
          
          
          <code class="ruby">          File.open(SAVE_FILE, &#39;w&#39;) do |f|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="125">
          
          
          <code class="ruby">            Marshal.dump(file, f)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="128">
          <span class="hits">2</span>
          
          <code class="ruby">          forget</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">      # Load the default file from the workspace default if it exists and return it,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">      # otherwise returns nil</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="134">
          <span class="hits">2</span>
          
          <code class="ruby">      def default_file</code>
        </li>
      
        <li class="covered" data-hits="239" data-linenumber="135">
          <span class="hits">239</span>
          
          <code class="ruby">        return @default_file if @default_file</code>
        </li>
      
        <li class="covered" data-hits="239" data-linenumber="136">
          <span class="hits">239</span>
          
          <code class="ruby">        if File.exist?(SAVE_FILE)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="137">
          
          
          <code class="ruby">          File.open(SAVE_FILE) do |f|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="138">
          
          
          <code class="ruby">            @default_file = Marshal.load(f)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">        elsif File.exist?(DEFAULT_FILE)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="141">
          
          
          <code class="ruby">          @default_file = Pathname.new(DEFAULT_FILE)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="239" data-linenumber="143">
          <span class="hits">239</span>
          
          <code class="ruby">        @default_file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">      # Returns the environment file (a Pathname object) if it has been defined, otherwise nil</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="147">
          <span class="hits">2</span>
          
          <code class="ruby">      def file # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="243" data-linenumber="148">
          <span class="hits">243</span>
          
          <code class="ruby">        return @file if @file</code>
        </li>
      
        <li class="covered" data-hits="239" data-linenumber="149">
          <span class="hits">239</span>
          
          <code class="ruby">        if default_file &amp;&amp; File.exist?(default_file)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="150">
          
          
          <code class="ruby">          @file = default_file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">      # As file except will raise an exception if it hasn&#39;t been defined yet</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="155">
          <span class="hits">2</span>
          
          <code class="ruby">      def file! # :nodoc:</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="156">
          
          
          <code class="ruby">        unless file</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="157">
          
          
          <code class="ruby">          puts &#39;No environment has been specified!&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="158">
          
          
          <code class="ruby">          puts &#39;To specify an environment use the -e switch.&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="159">
          
          
          <code class="ruby">          puts &#39;Look in the environment directory for a list of available environment names.&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="160">
          
          
          <code class="ruby">          exit 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="161">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="162">
          
          
          <code class="ruby">        file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="165">
          <span class="hits">2</span>
          
          <code class="ruby">      def file=(path) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="166">
          <span class="hits">3</span>
          
          <code class="ruby">        if path</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="167">
          <span class="hits">3</span>
          
          <code class="ruby">          @file = Pathname.new(path)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="169">
          
          
          <code class="ruby">          @file = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">      # Remove the workspace default environment</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="174">
          <span class="hits">2</span>
          
          <code class="ruby">      def forget</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="175">
          <span class="hits">2</span>
          
          <code class="ruby">        File.delete(SAVE_FILE) if File.exist?(SAVE_FILE)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="176">
          <span class="hits">2</span>
          
          <code class="ruby">        @default_file = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">      # Returns true if running with a temporary environment, i.e. if the current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby">      # environment is not the same as the default environment</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="181">
          <span class="hits">2</span>
          
          <code class="ruby">      def temporary?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="182">
          
          
          <code class="ruby">        @file == @default_file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="c39403aa5fb549e6da0bf209202b0f02ed9d1fb6">
  <div class="header">
    <h3>lib/origen/application/lsf.rb</h3>
    <h4><span class="red">37.5 %</span> covered</h4>
    <div>
      <b>72</b> relevant lines. 
      <span class="green"><b>27</b> lines covered</span> and
      <span class="red"><b>45</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  class Application</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Responsible for handling all submissions to the LSF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    class LSF</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">      # The LSF command configuration that will be used for all submissions to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">      # the LSF. An instance of this class is returned via the configuration</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">      # method and which can be used to modify the LSF behavior on a per-setup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">      # basis.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">      class Configuration</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">        # The group parameter, default: nil</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">        attr_accessor :group</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">        # The project parameter, default: &#39;msg.te&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">        attr_accessor :project</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">        # The resource parameter, default: &#39;linux&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">        attr_accessor :resource</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">        # The queue parameter, default: &#39;short&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">        attr_accessor :queue</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">        # When set to true no submissions will be made to LSF and instead the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">        # command that would have been submitted is printed to the terminal instead</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">        attr_accessor :debug</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">        def initialize</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">          @group = nil</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">          @project = &#39;msg.te&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">          @resource = &#39;linux&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">          @queue = &#39;short&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">          @debug = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">      # Accessor for the global LSF configuration, use this to modify the default</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      # LSF configuration for a given setup. Typically an alternate configuration would</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      # be added to the SoC class or the target file, but it can be set from anywhere.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">      # This method returns an instance of Origen::Application::LSF::Configuration and can</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">      # be used as shown in the example.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      # Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">      #   # soc/nevis.rb</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      #   ORIGEN::Runner::LSF.configuration do |config|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">      #   # Use &quot;msg.nevis&quot; for the project string when running in Noida</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      #   if %x[&quot;domainname&quot;] =~ /nidc/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">      #     Origen.config.lsf.project =  &quot;msg.nevis&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">      #   # Change the default group</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">      #   Origen.config.lsf.group = &quot;lam&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">      def self.configuration</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="48">
          <span class="hits">3</span>
          
          <code class="ruby">        @config ||= Configuration.new</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="49">
          <span class="hits">3</span>
          
          <code class="ruby">        yield @config if block_given?</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="50">
          <span class="hits">3</span>
          
          <code class="ruby">        @config</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      # Returns the configuration for a given LSF instance, which always maps to the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">      # global configuration instance.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="55">
          <span class="hits">1</span>
          
          <code class="ruby">      def configuration</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="56">
          <span class="hits">3</span>
          
          <code class="ruby">        self.class.configuration</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :config, :configuration</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">      # Submits the given command to the LSF, returns the LSF job ID</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="61">
          <span class="hits">1</span>
          
          <code class="ruby">      def submit(command, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="62">
          
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">          dependents: [],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">          rerunnable: true,  # Will rerun automatically if the execution host fails</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="66">
          
          
          <code class="ruby">        limit_job_submissions do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="67">
          
          
          <code class="ruby">          group = options[:group] || config.group</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="68">
          
          
          <code class="ruby">          group = group ? &quot;-G #{group}&quot; : &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="69">
          
          
          <code class="ruby">          project = options[:project] || config.project</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="70">
          
          
          <code class="ruby">          project = project ? &quot;-P #{project}&quot; : &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="71">
          
          
          <code class="ruby">          resource = options[:resource] || config.resource</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="72">
          
          
          <code class="ruby">          resource = resource ? &quot;-R &#39;#{resource}&#39;&quot; : &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="73">
          
          
          <code class="ruby">          queue = options[:queue] || config.queue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="74">
          
          
          <code class="ruby">          queue = queue ? &quot;-q #{queue}&quot; : &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="75">
          
          
          <code class="ruby">          rerunnable = options[:rerunnable] ? &#39;-r&#39; : &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="76">
          
          
          <code class="ruby">          if options[:dependents].empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="77">
          
          
          <code class="ruby">            dependents = &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="79">
          
          
          <code class="ruby">            dependents = options[:dependents].map { |id| &quot;ended(#{id})&quot; }.join(&#39; &amp;&amp; &#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="80">
          
          
          <code class="ruby">            dependents = &quot;-w &#39;#{dependents}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="82">
          
          
          <code class="ruby">          cmd = &quot;bsub -oo /dev/null #{dependents} #{rerunnable} #{group} #{project} #{resource} #{queue} &#39;#{command}&#39;&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="83">
          
          
          <code class="ruby">          if config.debug</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="84">
          
          
          <code class="ruby">            puts cmd</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="85">
          
          
          <code class="ruby">            &#39;496212&#39;  # Return a dummy ID to keep the caller happy</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">            # puts cmd</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="88">
          
          
          <code class="ruby">            output = `#{cmd}`</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="89">
          
          
          <code class="ruby">            Origen.log.info output.strip</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="90">
          
          
          <code class="ruby">            if output.split(&quot;\n&quot;).last =~ /Job &lt;(\d+)&gt; is submitted/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="91">
          
          
          <code class="ruby">              Regexp.last_match[1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="93">
          
          
          <code class="ruby">              :error</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="99">
          <span class="hits">1</span>
          
          <code class="ruby">      def queuing_job_ids</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="100">
          
          
          <code class="ruby">        ids = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="101">
          
          
          <code class="ruby">        `bjobs 2&gt;&amp;1`.split(&quot;\n&quot;).each do |line|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="102">
          
          
          <code class="ruby">          if line =~ /^(\d+).*PEND/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="103">
          
          
          <code class="ruby">            ids &lt;&lt; Regexp.last_match[1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="106">
          
          
          <code class="ruby">        ids</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="109">
          <span class="hits">1</span>
          
          <code class="ruby">      def running_job_ids</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="110">
          
          
          <code class="ruby">        ids = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="111">
          
          
          <code class="ruby">        `bjobs 2&gt;&amp;1`.split(&quot;\n&quot;).each do |line|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="112">
          
          
          <code class="ruby">          if line =~ /^(\d+).*RUN/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="113">
          
          
          <code class="ruby">            ids &lt;&lt; Regexp.last_match[1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="116">
          
          
          <code class="ruby">        ids</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="119">
          <span class="hits">1</span>
          
          <code class="ruby">      def remote_jobs_count</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="120">
          
          
          <code class="ruby">        i = 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="121">
          
          
          <code class="ruby">        `bjobs 2&gt;&amp;1`.split(&quot;\n&quot;).each do |line|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="122">
          
          
          <code class="ruby">          if line =~ /^(\d+).*(RUN|PEND)/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="123">
          
          
          <code class="ruby">            i += 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="126">
          
          
          <code class="ruby">        i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">      # Limits the number of jobs submitted to the LSF at one time, IT will start</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">      # to warn if a single users current job count gets above 500.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">      # This method prevents that stage from being reached.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="132">
          <span class="hits">1</span>
          
          <code class="ruby">      def limit_job_submissions</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="133">
          
          
          <code class="ruby">        if remote_jobs_count &gt; 450</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="134">
          
          
          <code class="ruby">          while remote_jobs_count &gt; 400</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="135">
          
          
          <code class="ruby">            puts &#39;Waiting for submitted jobs count to fall below limit...&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="136">
          
          
          <code class="ruby">            sleep 5</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="138">
          
          
          <code class="ruby">          yield</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="140">
          
          
          <code class="ruby">          yield</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="01a1577f1c67c90f6a5bdb2a1c837ed86b7c0f76">
  <div class="header">
    <h3>lib/origen/application/lsf_manager.rb</h3>
    <h4><span class="red">19.25 %</span> covered</h4>
    <div>
      <b>348</b> relevant lines. 
      <span class="green"><b>67</b> lines covered</span> and
      <span class="red"><b>281</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  class Application</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # This class is responsible for co-ordinating and monitoring all submissions</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # to the LSF. This is in contrast to Origen::Application::LSF which is an API for</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    # talking to the LSF.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">    class LSFManager</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">      include Callbacks</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">      # This will be set by the command dispatcher to reflect the currently executing</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      # command. If LSF jobs are spawned with the same command then any options passed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">      # to the parent command will automatically be forwarded to the children.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="12">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :current_command</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">        unless File.exist?(log_file_directory)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="16">
          
          
          <code class="ruby">          FileUtils.mkdir_p(log_file_directory)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="20">
          <span class="hits">2</span>
          
          <code class="ruby">      def remote_jobs_file</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="21">
          
          
          <code class="ruby">        &quot;#{Origen.root}/.lsf/remote_jobs&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      # Waits for all jobs to complete, will retry lost jobs (optionally</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      # failed jobs).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">      # Alternatively supply an :id or an array of :ids to wait only</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      # for specific job(s) to complete.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="29">
          <span class="hits">2</span>
          
          <code class="ruby">      def wait_for_completion(options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="30">
          
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">          max_lost_retries:         10,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">          max_fail_retries:         0,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">          poll_duration_in_seconds: 10,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">          timeout_in_seconds:       3600</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="36">
          
          
          <code class="ruby">        options[:start_time] ||= Time.now</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">        if Time.now - options[:start_time] &lt; options[:timeout_in_seconds]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">          # When waiting for ids we will hold by monitoring for the result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">          # files directly, rather than using the generatic classify routine.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">          # This is because the most common use case for this is when jobs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">          # are idling remotely on the LSF and don&#39;t want to run into contention</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">          # issues when multiple processes try to classify/save the status.</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="43">
          
          
          <code class="ruby">          if options[:id] || options[:ids]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="44">
          
          
          <code class="ruby">            ids = extract_ids([options[:id], options[:ids]].flatten.compact)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="45">
          
          
          <code class="ruby">            if ids.any? { |id| job_running?(id) }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="46">
          
          
          <code class="ruby">              sleep options[:poll_duration_in_seconds]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="47">
          
          
          <code class="ruby">              wait_for_completion(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="51">
          
          
          <code class="ruby">            classify_jobs</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="52">
          
          
          <code class="ruby">            print_status(print_insructions: false)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="53">
          
          
          <code class="ruby">            sleep options[:poll_duration_in_seconds]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="54">
          
          
          <code class="ruby">            classify_jobs</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="55">
          
          
          <code class="ruby">            resumitted = false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="56">
          
          
          <code class="ruby">            lost_jobs.each do |job|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="57">
          
          
          <code class="ruby">              if job[:submissions] &lt; options[:max_lost_retries] + 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="58">
          
          
          <code class="ruby">                resubmit_job(job)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="59">
          
          
          <code class="ruby">                resumitted = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="62">
          
          
          <code class="ruby">            failed_jobs.each do |job|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="63">
          
          
          <code class="ruby">              if job[:submissions] &lt; options[:max_fail_retries] + 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="64">
          
          
          <code class="ruby">                resubmit_job(job)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="65">
          
          
          <code class="ruby">                resumitted = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="68">
          
          
          <code class="ruby">            classify_jobs</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="69">
          
          
          <code class="ruby">            if outstanding_jobs? || resumitted</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="70">
          
          
          <code class="ruby">              wait_for_completion(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="72">
          
          
          <code class="ruby">              print_status</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="78">
          <span class="hits">2</span>
          
          <code class="ruby">      def print_status(options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="79">
          
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">          print_insructions: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="82">
          
          
          <code class="ruby">        if options[:verbose]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="83">
          
          
          <code class="ruby">          print_details(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="85">
          
          
          <code class="ruby">        Origen.log.info &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="86">
          
          
          <code class="ruby">        Origen.log.info &#39;LSF Status&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="87">
          
          
          <code class="ruby">        Origen.log.info &#39;----------&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="88">
          
          
          <code class="ruby">        Origen.log.info &quot;Queuing:    #{queuing_jobs.size}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="89">
          
          
          <code class="ruby">        Origen.log.info &quot;Running:    #{running_jobs.size}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="90">
          
          
          <code class="ruby">        Origen.log.info &quot;Lost:       #{lost_jobs.size}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="91">
          
          
          <code class="ruby">        Origen.log.info &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="92">
          
          
          <code class="ruby">        Origen.log.info &quot;Passed:     #{passed_jobs.size}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="93">
          
          
          <code class="ruby">        Origen.log.info &quot;Failed:     #{failed_jobs.size}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="94">
          
          
          <code class="ruby">        Origen.log.info &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="95">
          
          
          <code class="ruby">        if options[:print_insructions]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="96">
          
          
          <code class="ruby">          Origen.log.info &#39;Common tasks&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="97">
          
          
          <code class="ruby">          Origen.log.info &#39;------------&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="98">
          
          
          <code class="ruby">          if queuing_jobs.size &gt; 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="99">
          
          
          <code class="ruby">            Origen.log.info &#39;Queuing&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="100">
          
          
          <code class="ruby">            Origen.log.info &#39; Show details: origen l -v -t queuing&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="101">
          
          
          <code class="ruby">            Origen.log.info &#39; Re-submit:    origen l -r -t queuing&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="103">
          
          
          <code class="ruby">          if running_jobs.size &gt; 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="104">
          
          
          <code class="ruby">            Origen.log.info &#39;Running&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="105">
          
          
          <code class="ruby">            Origen.log.info &#39; Show details: origen l -v -t running&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="106">
          
          
          <code class="ruby">            Origen.log.info &#39; Re-submit:    origen l -r -t running&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="108">
          
          
          <code class="ruby">          if lost_jobs.size &gt; 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="109">
          
          
          <code class="ruby">            Origen.log.info &#39;Lost&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="110">
          
          
          <code class="ruby">            Origen.log.info &#39; Show details: origen l -v -t lost&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="111">
          
          
          <code class="ruby">            Origen.log.info &#39; Re-submit:    origen l -r -t lost&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="113">
          
          
          <code class="ruby">          if passed_jobs.size &gt; 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="114">
          
          
          <code class="ruby">            Origen.log.info &#39;Passed&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="115">
          
          
          <code class="ruby">            Origen.log.info &#39; Build log:    origen l -l&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="117">
          
          
          <code class="ruby">          if failed_jobs.size &gt; 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="118">
          
          
          <code class="ruby">            Origen.log.info &#39;Failed&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="119">
          
          
          <code class="ruby">            Origen.log.info &#39; Show details: origen l -v -t failed&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="120">
          
          
          <code class="ruby">            Origen.log.info &#39; Re-submit:    origen l -r -t failed&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="122">
          
          
          <code class="ruby">          Origen.log.info &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="123">
          
          
          <code class="ruby">          Origen.log.info &#39;Reset the LSF manager (clear all jobs): origen lsf -c -t all&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="124">
          
          
          <code class="ruby">          Origen.log.info &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="128">
          <span class="hits">2</span>
          
          <code class="ruby">      def print_details(options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="129">
          
          
          <code class="ruby">        if options[:id]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="130">
          
          
          <code class="ruby">          Origen.log.info &quot;Job: #{options[:id]}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="131">
          
          
          <code class="ruby">          Origen.log.info &#39;----&#39; + &#39;-&#39; * options[:id].length</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="132">
          
          
          <code class="ruby">          print_details_of(remote_jobs[options[:id]])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="134">
          
          
          <code class="ruby">          options[:type] ||= :all</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="135">
          
          
          <code class="ruby">          if options[:type] == :all || options[:type] == :queuing</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="136">
          
          
          <code class="ruby">            Origen.log.info &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="137">
          
          
          <code class="ruby">            Origen.log.info &#39;Queuing&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="138">
          
          
          <code class="ruby">            Origen.log.info &#39;-------&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="139">
          
          
          <code class="ruby">            queuing_jobs.each { |j| print_details_of(j) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="141">
          
          
          <code class="ruby">          if options[:type] == :all || options[:type] == :running</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="142">
          
          
          <code class="ruby">            Origen.log.info &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="143">
          
          
          <code class="ruby">            Origen.log.info &#39;Running&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="144">
          
          
          <code class="ruby">            Origen.log.info &#39;-------&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="145">
          
          
          <code class="ruby">            running_jobs.each { |j| print_details_of(j) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="147">
          
          
          <code class="ruby">          if options[:type] == :all || options[:type] == :lost</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="148">
          
          
          <code class="ruby">            Origen.log.info &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="149">
          
          
          <code class="ruby">            Origen.log.info &#39;Lost&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="150">
          
          
          <code class="ruby">            Origen.log.info &#39;----&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="151">
          
          
          <code class="ruby">            lost_jobs.each { |j| print_details_of(j) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="153">
          
          
          <code class="ruby">          if options[:type] == :all || options[:type] == :passed</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="154">
          
          
          <code class="ruby">            Origen.log.info &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="155">
          
          
          <code class="ruby">            Origen.log.info &#39;Passed&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="156">
          
          
          <code class="ruby">            Origen.log.info &#39;------&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="157">
          
          
          <code class="ruby">            passed_jobs.each { |j| print_details_of(j) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="159">
          
          
          <code class="ruby">          if options[:type] == :all || options[:type] == :failed</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="160">
          
          
          <code class="ruby">            Origen.log.info &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="161">
          
          
          <code class="ruby">            Origen.log.info &#39;Failed&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="162">
          
          
          <code class="ruby">            Origen.log.info &#39;------&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="163">
          
          
          <code class="ruby">            failed_jobs.each { |j| print_details_of(j) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="168">
          <span class="hits">2</span>
          
          <code class="ruby">      def print_details_of(job)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="169">
          
          
          <code class="ruby">        Origen.log.info &quot;#{job[:command]} #{job[:switches]}&quot;.gsub(&#39; --exec_remote&#39;, &#39;&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="170">
          
          
          <code class="ruby">        Origen.log.info &quot;ID: #{job[:id]}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="171">
          
          
          <code class="ruby">        Origen.log.info &quot;Submitted: #{time_ago(job[:submitted_at])}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="172">
          
          
          <code class="ruby">        Origen.log.info &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="175">
          <span class="hits">2</span>
          
          <code class="ruby">      def time_ago(time)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="176">
          
          
          <code class="ruby">        seconds = (Time.now - time).to_i</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="177">
          
          
          <code class="ruby">        if seconds &lt; 60</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="178">
          
          
          <code class="ruby">          unit = &#39;second&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="179">
          
          
          <code class="ruby">          number = seconds</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby">        elsif seconds &lt; 3600</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="181">
          
          
          <code class="ruby">          unit = &#39;minute&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="182">
          
          
          <code class="ruby">          number = seconds / 60</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">        elsif seconds &lt; 86_400</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="184">
          
          
          <code class="ruby">          unit = &#39;hour&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="185">
          
          
          <code class="ruby">          number = seconds / 3600</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="187">
          
          
          <code class="ruby">          unit = &#39;day&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="188">
          
          
          <code class="ruby">          number = seconds / 86_400</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="190">
          
          
          <code class="ruby">        &quot;#{number} #{unit}#{number &gt; 1 ? &#39;s&#39; : &#39;&#39;} ago&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="192">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="193">
          <span class="hits">2</span>
          
          <code class="ruby">      def outstanding_jobs?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="194">
          
          
          <code class="ruby">        (running_jobs + queuing_jobs).size &gt; 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="197">
          
          
          <code class="ruby">      # Clear jobs from memory</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="198">
          <span class="hits">2</span>
          
          <code class="ruby">      def clear(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="199">
          
          
          <code class="ruby">        if options[:type]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="200">
          
          
          <code class="ruby">          if options[:type] == :all</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="201">
          
          
          <code class="ruby">            File.delete(remote_jobs_file) if File.exist?(remote_jobs_file)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="202">
          
          
          <code class="ruby">            @remote_jobs = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby">            return</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="205">
          
          
          <code class="ruby">            send(&quot;#{options[:type]}_jobs&quot;).each do |job|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="206">
          
          
          <code class="ruby">              remote_jobs.delete(job[:id])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="208">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="210">
          
          
          <code class="ruby">          remote_jobs.delete(options[:id])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="214">
          <span class="hits">2</span>
          
          <code class="ruby">      def clear_all</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="215">
          
          
          <code class="ruby">        File.delete(remote_jobs_file) if File.exist?(remote_jobs_file)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="216">
          
          
          <code class="ruby">        if File.exist?(log_file_directory)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="217">
          
          
          <code class="ruby">          FileUtils.rm_rf(log_file_directory)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="219">
          
          
          <code class="ruby">        FileUtils.mkdir_p(log_file_directory)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="220">
          
          
          <code class="ruby">        @remote_jobs = {}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="221">
          
          
          <code class="ruby">        clear_caches</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">      # Resubmit jobs</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="225">
          <span class="hits">2</span>
          
          <code class="ruby">      def resubmit(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="226">
          
          
          <code class="ruby">        if options[:type]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="227">
          
          
          <code class="ruby">          if options[:type] == :all</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="228">
          
          
          <code class="ruby">            remote_jobs.each do |_id, job|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="229">
          
          
          <code class="ruby">              resubmit_job(job)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="231">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="232">
          
          
          <code class="ruby">            send(&quot;#{options[:type]}_jobs&quot;).each do |job|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="233">
          
          
          <code class="ruby">              resubmit_job(job)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="237">
          
          
          <code class="ruby">          resubmit_job(remote_jobs[options[:id]])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="239">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="240">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="241">
          <span class="hits">2</span>
          
          <code class="ruby">      def stats</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="242">
          
          
          <code class="ruby">        Origen.app.stats</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby">      # Build the log file from the completed jobs</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="246">
          <span class="hits">2</span>
          
          <code class="ruby">      def build_log(_options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="247">
          
          
          <code class="ruby">        Origen.log.info &#39;*&#39; * 70</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="248">
          
          
          <code class="ruby">        completed_jobs.each do |job|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="249">
          
          
          <code class="ruby">          File.open(log_file(job[:id])) do |f|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="250">
          
          
          <code class="ruby">            last_line_blank = false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="251">
          
          
          <code class="ruby">            f.readlines.each do |line|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">              # Capture and combine the per job stats that look like this:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby">              #   Total patterns:   1              1347      0.003674</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="254">
          
          
          <code class="ruby">              #   New patterns:     0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="255">
          
          
          <code class="ruby">              #   Changed patterns: 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">              #   FAILED patterns:  1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="257">
          
          
          <code class="ruby">              #   Total files:      1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby">              #   New files:        0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby">              #   Changed files:    0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby">              #   FAILED files:     1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="261">
          
          
          <code class="ruby">              begin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="262">
          
          
          <code class="ruby">                line.gsub!(/\e\[\d+m/, &#39;&#39;)  # Remove any coloring</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="263">
          
          
          <code class="ruby">                if line =~ /Total patterns:\s+(\d+)/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="264">
          
          
          <code class="ruby">                  stats.completed_patterns += Regexp.last_match[1].to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby">                elsif line =~ /Total vectors:\s+(\d+)/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="266">
          
          
          <code class="ruby">                  stats.total_vectors += Regexp.last_match[1].to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby">                elsif line =~ /Total duration:\s+(\d+\.\d+)/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="268">
          
          
          <code class="ruby">                  stats.total_duration += Regexp.last_match[1].to_f</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="269">
          
          
          <code class="ruby">                elsif line =~ /Total files:\s+(\d+)/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="270">
          
          
          <code class="ruby">                  stats.completed_files += Regexp.last_match[1].to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="271">
          
          
          <code class="ruby">                elsif line =~ /Changed patterns:\s+(\d+)/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="272">
          
          
          <code class="ruby">                  stats.changed_patterns += Regexp.last_match[1].to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="273">
          
          
          <code class="ruby">                elsif line =~ /Changed files:\s+(\d+)/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="274">
          
          
          <code class="ruby">                  stats.changed_files += Regexp.last_match[1].to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby">                elsif line =~ /New patterns:\s+(\d+)/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="276">
          
          
          <code class="ruby">                  stats.new_patterns += Regexp.last_match[1].to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby">                elsif line =~ /New files:\s+(\d+)/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="278">
          
          
          <code class="ruby">                  stats.new_files += Regexp.last_match[1].to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="279">
          
          
          <code class="ruby">                elsif line =~ /FAILED patterns:\s+(\d+)/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="280">
          
          
          <code class="ruby">                  stats.failed_patterns += Regexp.last_match[1].to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby">                elsif line =~ /FAILED files:\s+(\d+)/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="282">
          
          
          <code class="ruby">                  stats.failed_files += Regexp.last_match[1].to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="283">
          
          
          <code class="ruby">                elsif line =~ /ERROR!/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="284">
          
          
          <code class="ruby">                  stats.errors += 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="285">
          
          
          <code class="ruby">                  Origen.log.send :relog, line</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="286">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="287">
          
          
          <code class="ruby">                  # Compress multiple blank lines</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="288">
          
          
          <code class="ruby">                  if line =~ /^\s*$/ || line =~ /.*\|\|\s*$/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="289">
          
          
          <code class="ruby">                    unless last_line_blank</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="290">
          
          
          <code class="ruby">                      Origen.log.info</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="291">
          
          
          <code class="ruby">                      last_line_blank = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="292">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="293">
          
          
          <code class="ruby">                  else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="294">
          
          
          <code class="ruby">                    # Screen std origen output</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="295">
          
          
          <code class="ruby">                    unless line =~ /  origen save/ ||</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="296">
          
          
          <code class="ruby">                           line =~ /Insecure world writable dir/ ||</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="297">
          
          
          <code class="ruby">                           line =~ /To save all of/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="298">
          
          
          <code class="ruby">                      line.strip!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby">                      # line.sub!(/.*\|\| /, &#39;&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="300">
          
          
          <code class="ruby">                      Origen.log.send :relog, line</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="301">
          
          
          <code class="ruby">                      last_line_blank = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="303">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="305">
          
          
          <code class="ruby">              rescue</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="306">
          
          
          <code class="ruby">                # Sometimes illegal UTF-8 characters can get into crash dumps, if this</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby">                # happens just print the line out rather than die</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="308">
          
          
          <code class="ruby">                Origen.log.error line</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="309">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="311">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="313">
          
          
          <code class="ruby">        Origen.log.info &#39;*&#39; * 70</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="314">
          
          
          <code class="ruby">        stats.print_summary</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="315">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="316">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="317">
          
          
          <code class="ruby">      # Returns the logfile that should be used by a given process on the LSF, this</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="318">
          
          
          <code class="ruby">      # should be be guaranteed to be unique</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="319">
          <span class="hits">2</span>
          
          <code class="ruby">      def log_file(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="320">
          
          
          <code class="ruby">        &quot;#{log_file_directory}/#{log_file_name(id)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="321">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="322">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="323">
          <span class="hits">2</span>
          
          <code class="ruby">      def passed_file(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="324">
          
          
          <code class="ruby">        &quot;#{log_file_directory}/#{log_file_name(id)}.passed&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="325">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="326">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="327">
          <span class="hits">2</span>
          
          <code class="ruby">      def started_file(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="328">
          
          
          <code class="ruby">        &quot;#{log_file_directory}/#{log_file_name(id)}.started&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="329">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="330">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="331">
          <span class="hits">2</span>
          
          <code class="ruby">      def failed_file(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="332">
          
          
          <code class="ruby">        &quot;#{log_file_directory}/#{log_file_name(id)}.failed&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="333">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="335">
          <span class="hits">2</span>
          
          <code class="ruby">      def log_file_name(id)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="336">
          
          
          <code class="ruby">        # host = `hostname`.strip</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="337">
          
          
          <code class="ruby">        &quot;#{id}.txt&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="338">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="339">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="340">
          <span class="hits">2</span>
          
          <code class="ruby">      def log_file_directory</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="341">
          <span class="hits">2</span>
          
          <code class="ruby">        &quot;#{Origen.root}/.lsf/remote_logs&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="342">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="343">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="344">
          
          
          <code class="ruby">      # Register that the given job ID has completed successfully on the LSF</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="345">
          <span class="hits">2</span>
          
          <code class="ruby">      def job_passed(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="346">
          
          
          <code class="ruby">        `touch #{passed_file(id)}`</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="347">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="348">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="349">
          
          
          <code class="ruby">      # Register that the given job ID has failed on the LSF</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="350">
          <span class="hits">2</span>
          
          <code class="ruby">      def job_failed(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="351">
          
          
          <code class="ruby">        `touch #{failed_file(id)}`</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="352">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="353">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="354">
          <span class="hits">2</span>
          
          <code class="ruby">      def job_started(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="355">
          
          
          <code class="ruby">        `touch #{started_file(id)}`</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="356">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="357">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="358">
          <span class="hits">2</span>
          
          <code class="ruby">      def resubmit_job(job)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="359">
          
          
          <code class="ruby">        [log_file(job[:id]), passed_file(job[:id]), failed_file(job[:id]), started_file(job[:id])].each do |file|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="360">
          
          
          <code class="ruby">          FileUtils.rm_f(file) if File.exist?(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="361">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="362">
          
          
          <code class="ruby">        job[:lsf_id] = Origen.app.lsf.submit(command_prefix(job[:id], job[:dependents_ids]) + job[:command] + job[:switches], dependents: job[:dependents_lsf_ids])</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="363">
          
          
          <code class="ruby">        job[:status] = nil</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="364">
          
          
          <code class="ruby">        job[:completed_at] = nil</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="365">
          
          
          <code class="ruby">        job[:submitted_at] = Time.now</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="366">
          
          
          <code class="ruby">        job[:submissions] += 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="367">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="368">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="369">
          <span class="hits">2</span>
          
          <code class="ruby">      def submit_job(command, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="370">
          
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="371">
          
          
          <code class="ruby">          lsf_option_string: &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="372">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="373">
          
          
          <code class="ruby">        switches = [&#39; &#39;, options[:lsf_option_string], command_options(command)].flatten.compact.join(&#39; &#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="374">
          
          
          <code class="ruby">        id = generate_job_id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="375">
          
          
          <code class="ruby">        dependents_ids = extract_ids([options[:depend], options[:depends], options[:dependent], options[:dependents]].flatten.compact)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="376">
          
          
          <code class="ruby">        dependents_lsf_ids = dependents_ids.map { |dep_id| remote_jobs[dep_id][:lsf_id] }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="377">
          
          
          <code class="ruby">        lsf_id = Origen.app.lsf.submit(command_prefix(id, dependents_ids) + command + switches, dependents: dependents_lsf_ids)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="378">
          
          
          <code class="ruby">        job_attrs = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby">          id:                 id,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="380">
          
          
          <code class="ruby">          lsf_id:             lsf_id,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="381">
          
          
          <code class="ruby">          command:            command,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="382">
          
          
          <code class="ruby">          submitted_at:       Time.now,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="383">
          
          
          <code class="ruby">          submissions:        1,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="384">
          
          
          <code class="ruby">          switches:           switches,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="385">
          
          
          <code class="ruby">          dependents_ids:     dependents_ids,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="386">
          
          
          <code class="ruby">          dependents_lsf_ids: dependents_lsf_ids</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="387">
          
          
          <code class="ruby">        }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="388">
          
          
          <code class="ruby">        remote_jobs[id] = job_attrs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="389">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="390">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="391">
          <span class="hits">2</span>
          
          <code class="ruby">      def extract_ids(jobs_or_ids)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="392">
          
          
          <code class="ruby">        jobs_or_ids.map { |j| j.is_a?(Hash) ? j[:id] : j }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="393">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="394">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="395">
          <span class="hits">2</span>
          
          <code class="ruby">      def submit_origen_job(cmd, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="396">
          
          
          <code class="ruby">        if options[:action]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="397">
          
          
          <code class="ruby">          action = options[:action] == :pattern ? &#39; generate&#39; : &quot; #{options[:action]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="398">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="399">
          
          
          <code class="ruby">          action = &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="400">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="401">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="402">
          
          
          <code class="ruby">        str = &quot;#{action} #{cmd}&quot;.strip</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="403">
          
          
          <code class="ruby">        str.sub(&#39;origen &#39;, &#39;&#39;) if str =~ /^origen /</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="404">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="405">
          
          
          <code class="ruby">        # Append the --exec_remote switch to all Origen commands, this allows command</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="406">
          
          
          <code class="ruby">        # processing to be altered based on whether it is running locally or</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="407">
          
          
          <code class="ruby">        # remotely by testing Origen.running_remotely?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="408">
          
          
          <code class="ruby">        str += &#39; --exec_remote&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="409">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="410">
          
          
          <code class="ruby">        submit_job(&quot;origen #{str}&quot;, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="411">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="412">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="413">
          <span class="hits">2</span>
          
          <code class="ruby">      def command_prefix(id, dependents)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="414">
          
          
          <code class="ruby">        origen = `which origen`</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="415">
          
          
          <code class="ruby">        # http://rubular.com/r/wgKi73KjUo</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="416">
          
          
          <code class="ruby">        if origen =~ /(^\/run\/pkg\/fs-origen-\/[^\/]+)/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="417">
          
          
          <code class="ruby">          prefix = &quot;source #{Regexp.last_match[1]}/origen_setup; &quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="418">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="419">
          
          
          <code class="ruby">          prefix = &quot;cd #{Origen.top}; source source_setup; &quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="420">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="421">
          
          
          <code class="ruby">        prefix += &quot;cd #{Origen.root}; origen l --execute --id #{id} &quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="422">
          
          
          <code class="ruby">        unless dependents.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="423">
          
          
          <code class="ruby">          prefix += &quot;--dependents #{dependents.join(&#39;,&#39;)} &quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="424">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="425">
          
          
          <code class="ruby">        prefix</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="426">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="427">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="428">
          <span class="hits">2</span>
          
          <code class="ruby">      def command_options(command_str)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="429">
          
          
          <code class="ruby">        command_str.sub(/origen\s*/, &#39;&#39;) =~ /(\w+)/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="430">
          
          
          <code class="ruby">        command = Regexp.last_match[1]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="431">
          
          
          <code class="ruby">        command = ORIGEN_COMMAND_ALIASES[command] || command</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="432">
          
          
          <code class="ruby">        if command == current_command</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="433">
          
          
          <code class="ruby">          @command_options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="434">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="435">
          
          
          <code class="ruby">          &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="436">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="437">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="438">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="439">
          
          
          <code class="ruby">      # This will be called by the command dispatcher to record any options that were passed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="440">
          
          
          <code class="ruby">      # in when launching the current command.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="441">
          
          
          <code class="ruby">      # These will be automatically appended if the current command spawns any LSF jobs that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="442">
          
          
          <code class="ruby">      # will invoke the same command.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="443">
          <span class="hits">2</span>
          
          <code class="ruby">      def command_options=(opts)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="444">
          
          
          <code class="ruby">        # Ensure these options are removed, these are either incompatible with the LSF,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="445">
          
          
          <code class="ruby">        # or will already have been added elsewhere</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="446">
          
          
          <code class="ruby">        {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="447">
          
          
          <code class="ruby">          [&#39;-h&#39;, &#39;--help&#39;]        =&gt; false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="448">
          
          
          <code class="ruby">          [&#39;-w&#39;, &#39;--wait&#39;]        =&gt; false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="449">
          
          
          <code class="ruby">          [&#39;-d&#39;, &#39;--debug&#39;]       =&gt; false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="450">
          
          
          <code class="ruby">          [&#39;-c&#39;, &#39;--continue&#39;]    =&gt; false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="451">
          
          
          <code class="ruby">          &#39;--exec_remote&#39;         =&gt; false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="452">
          
          
          <code class="ruby">          [&#39;-t&#39;, &#39;--target&#39;]      =&gt; &#39;*&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="453">
          
          
          <code class="ruby">          [&#39;-e&#39;, &#39;--environment&#39;] =&gt; &#39;*&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="454">
          
          
          <code class="ruby">          &#39;--id&#39;                  =&gt; &#39;*&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="455">
          
          
          <code class="ruby">          [&#39;-l&#39;, &#39;--lsf&#39;]         =&gt; %w(add clear)</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="456">
          <span class="hits">14</span>
          
          <code class="ruby">        }.each do |names, values|</code>
        </li>
      
        <li class="covered" data-hits="126" data-linenumber="457">
          <span class="hits">126</span>
          
          <code class="ruby">          [names].flatten.each do |name|</code>
        </li>
      
        <li class="covered" data-hits="224" data-linenumber="458">
          <span class="hits">224</span>
          
          <code class="ruby">            ix = opts.index(name)</code>
        </li>
      
        <li class="covered" data-hits="224" data-linenumber="459">
          <span class="hits">224</span>
          
          <code class="ruby">            if ix</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="460">
          <span class="hits">12</span>
          
          <code class="ruby">              opts.delete_at(ix)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="461">
          <span class="hits">12</span>
          
          <code class="ruby">              [values].flatten.each do |value|</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="462">
          <span class="hits">12</span>
          
          <code class="ruby">                if value &amp;&amp; (value == &#39;*&#39; || opts[ix] == value)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="463">
          <span class="hits">12</span>
          
          <code class="ruby">                  opts.delete_at(ix)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="464">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="465">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="466">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="467">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="468">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="469">
          <span class="hits">14</span>
          
          <code class="ruby">        @command_options ||= []</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="470">
          <span class="hits">14</span>
          
          <code class="ruby">        @command_options += opts</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="471">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="472">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="473">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_command_option(*opts)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="474">
          
          
          <code class="ruby">        @command_options ||= []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="475">
          
          
          <code class="ruby">        @command_options += opts</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="476">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="477">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="478">
          <span class="hits">2</span>
          
          <code class="ruby">      def remote_jobs</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="479">
          
          
          <code class="ruby">        @remote_jobs ||= restore_remote_jobs || {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="480">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="481">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="482">
          <span class="hits">2</span>
          
          <code class="ruby">      def classify_jobs</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="483">
          
          
          <code class="ruby">        clear_caches</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="484">
          
          
          <code class="ruby">        queuing_job_ids = Origen.app.lsf.queuing_job_ids</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="485">
          
          
          <code class="ruby">        running_job_ids = Origen.app.lsf.running_job_ids</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="486">
          
          
          <code class="ruby">        remote_jobs.each do |_id, job|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="487">
          
          
          <code class="ruby">          # If the status has already been determined send it straight to the bucket</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="488">
          
          
          <code class="ruby">          if job[:status]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="489">
          
          
          <code class="ruby">            send(&quot;#{job[:status]}_jobs&quot;) &lt;&lt; job</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="490">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="491">
          
          
          <code class="ruby">            if job[:lsf_id] == :error</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="492">
          
          
          <code class="ruby">              job[:status] = :lost</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="493">
          
          
          <code class="ruby">              lost_jobs &lt;&lt; job</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="494">
          
          
          <code class="ruby">            elsif job_completed?(job[:id])</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="495">
          
          
          <code class="ruby">              if job_passed?(job[:id])</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="496">
          
          
          <code class="ruby">                job[:status] = :passed</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="497">
          
          
          <code class="ruby">                passed_jobs &lt;&lt; job</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="498">
          
          
          <code class="ruby">              elsif job_failed?(job[:id])</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="499">
          
          
          <code class="ruby">                job[:status] = :failed</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="500">
          
          
          <code class="ruby">                failed_jobs &lt;&lt; job</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="501">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="502">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="503">
          
          
          <code class="ruby">              if running_job_ids.include?(job[:lsf_id])</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="504">
          
          
          <code class="ruby">                running_jobs &lt;&lt; job</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="505">
          
          
          <code class="ruby">                # Once we have assigned a job as running make sure the job is marked as started</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="506">
          
          
          <code class="ruby">                # It can flicker back to queued if the started file takes a long time to arrive</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="507">
          
          
          <code class="ruby">                # from the remote host</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="508">
          
          
          <code class="ruby">                job_started(job[:lsf_id])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="509">
          
          
          <code class="ruby">              elsif queuing_job_ids.include?(job[:lsf_id])</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="510">
          
          
          <code class="ruby">                queuing_jobs &lt;&lt; job</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="511">
          
          
          <code class="ruby">              elsif job_started?(job[:id])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="512">
          
          
          <code class="ruby">                # There can be considerable latency between the job writing the passed/failed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="513">
          
          
          <code class="ruby">                # file remotely and it showing up on the local machine.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="514">
          
          
          <code class="ruby">                # Give some buffer to that before declaring the file lost.</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="515">
          
          
          <code class="ruby">                if job[:completed_at]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="516">
          
          
          <code class="ruby">                  if (Time.now - job[:completed_at]) &lt; 60</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="517">
          
          
          <code class="ruby">                    running_jobs &lt;&lt; job</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="518">
          
          
          <code class="ruby">                  else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="519">
          
          
          <code class="ruby">                    lost_jobs &lt;&lt; job</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="520">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="521">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="522">
          
          
          <code class="ruby">                  job[:completed_at] = Time.now</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="523">
          
          
          <code class="ruby">                  running_jobs &lt;&lt; job</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="524">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="525">
          
          
          <code class="ruby">              # Give jobs submitted less than a minute ago the benefit of the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="526">
          
          
          <code class="ruby">              # doubt, they may not have shown up in bjobs yet</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="527">
          
          
          <code class="ruby">              elsif (Time.now - job[:submitted_at]) &lt; 60</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="528">
          
          
          <code class="ruby">                queuing_jobs &lt;&lt; job</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="529">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="530">
          
          
          <code class="ruby">                lost_jobs &lt;&lt; job</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="531">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="532">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="533">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="534">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="535">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="536">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="537">
          <span class="hits">2</span>
          
          <code class="ruby">      def clear_caches</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="538">
          
          
          <code class="ruby">        @running_jobs = nil</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="539">
          
          
          <code class="ruby">        @queuing_jobs = nil</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="540">
          
          
          <code class="ruby">        @passed_jobs = nil</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="541">
          
          
          <code class="ruby">        @failed_jobs = nil</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="542">
          
          
          <code class="ruby">        @lost_jobs = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="543">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="544">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="545">
          <span class="hits">2</span>
          
          <code class="ruby">      def running_jobs</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="546">
          
          
          <code class="ruby">        @running_jobs ||= []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="547">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="548">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="549">
          <span class="hits">2</span>
          
          <code class="ruby">      def queuing_jobs</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="550">
          
          
          <code class="ruby">        @queuing_jobs ||= []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="551">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="552">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="553">
          <span class="hits">2</span>
          
          <code class="ruby">      def completed_jobs</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="554">
          
          
          <code class="ruby">        passed_jobs + failed_jobs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="555">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="556">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="557">
          <span class="hits">2</span>
          
          <code class="ruby">      def passed_jobs</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="558">
          
          
          <code class="ruby">        @passed_jobs ||= []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="559">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="560">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="561">
          
          
          <code class="ruby">      # Failed jobs are those that started to produce a log file but did not complete</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="562">
          <span class="hits">2</span>
          
          <code class="ruby">      def failed_jobs</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="563">
          
          
          <code class="ruby">        @failed_jobs ||= []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="564">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="565">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="566">
          
          
          <code class="ruby">      # Lost jobs are ones that for whatever reason did not start, or at least get far</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="567">
          
          
          <code class="ruby">      # enough to log that they started</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="568">
          <span class="hits">2</span>
          
          <code class="ruby">      def lost_jobs</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="569">
          
          
          <code class="ruby">        @lost_jobs ||= []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="570">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="571">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="572">
          
          
          <code class="ruby">      # Returns trus if the given job ID generated a complete file when run on the LSF.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="573">
          
          
          <code class="ruby">      # The complete file is created at the end of a job run and its presence indicates</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="574">
          
          
          <code class="ruby">      # that the job ran and got past the generation/compile stage without crashing.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="575">
          <span class="hits">2</span>
          
          <code class="ruby">      def job_completed?(id)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="576">
          
          
          <code class="ruby">        job_started?(id) &amp;&amp;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="577">
          
          
          <code class="ruby">          (job_passed?(id) || job_failed?(id))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="578">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="579">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="580">
          <span class="hits">2</span>
          
          <code class="ruby">      def job_running?(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="581">
          
          
          <code class="ruby">        !job_completed?(id)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="582">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="583">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="584">
          <span class="hits">2</span>
          
          <code class="ruby">      def job_started?(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="585">
          
          
          <code class="ruby">        File.exist?(started_file(id))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="586">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="587">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="588">
          <span class="hits">2</span>
          
          <code class="ruby">      def job_passed?(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="589">
          
          
          <code class="ruby">        File.exist?(passed_file(id))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="590">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="591">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="592">
          <span class="hits">2</span>
          
          <code class="ruby">      def job_failed?(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="593">
          
          
          <code class="ruby">        File.exist?(failed_file(id))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="594">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="595">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="596">
          <span class="hits">2</span>
          
          <code class="ruby">      def generate_job_id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="597">
          
          
          <code class="ruby">        &quot;#{Time.now.to_f}&quot;.gsub(&#39;.&#39;, &#39;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="598">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="599">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="600">
          <span class="hits">2</span>
          
          <code class="ruby">      def restore_remote_jobs</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="601">
          
          
          <code class="ruby">        if File.exist?(remote_jobs_file)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="602">
          
          
          <code class="ruby">          File.open(remote_jobs_file) do |f|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="603">
          
          
          <code class="ruby">            begin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="604">
          
          
          <code class="ruby">              Marshal.load(f)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="605">
          
          
          <code class="ruby">            rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="606">
          
          
          <code class="ruby">              nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="607">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="608">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="609">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="610">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="611">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="612">
          <span class="hits">2</span>
          
          <code class="ruby">      def on_origen_shutdown(_options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="613">
          <span class="hits">1</span>
          
          <code class="ruby">        save_remote_jobs if @remote_jobs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="614">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="615">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="616">
          <span class="hits">2</span>
          
          <code class="ruby">      def save_remote_jobs</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="617">
          
          
          <code class="ruby">        File.open(remote_jobs_file, &#39;w&#39;) do |f|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="618">
          
          
          <code class="ruby">          Marshal.dump(@remote_jobs, f)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="619">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="620">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="621">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="622">
          <span class="hits">2</span>
          
          <code class="ruby">      def execute_remotely(options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="623">
          
          
          <code class="ruby">        job_started(options[:id])</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="624">
          
          
          <code class="ruby">        begin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="625">
          
          
          <code class="ruby">          if options[:dependents]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="626">
          
          
          <code class="ruby">            wait_for_completion(ids:                      options[:dependents],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="627">
          
          
          <code class="ruby">                                poll_duration_in_seconds: 1,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="628">
          
          
          <code class="ruby">                                # Don&#39;t wait long by the time this runs the LSF</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="629">
          
          
          <code class="ruby">                                # should have guaranteed the job has run</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="630">
          
          
          <code class="ruby">                                timeout_in_seconds:       120</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="631">
          
          
          <code class="ruby">                               )</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="632">
          
          
          <code class="ruby">            unless options[:dependents].all? { |id| job_passed?(id) }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="633">
          
          
          <code class="ruby">              File.open(log_file(options[:id]), &#39;w&#39;) do |f|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="634">
          
          
          <code class="ruby">                f.puts &quot;*** ERROR! *** #{options[:cmd].join(&#39; &#39;)} ***&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="635">
          
          
          <code class="ruby">                f.puts &#39;Dependents failed!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="636">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="637">
          
          
          <code class="ruby">              fail &#39;Dependents failed!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="638">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="639">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="640">
          
          
          <code class="ruby">          if options[:cmd].is_a?(Array)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="641">
          
          
          <code class="ruby">            cmd = options[:cmd].join(&#39; &#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="642">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="643">
          
          
          <code class="ruby">            cmd = options[:cmd]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="644">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="645">
          
          
          <code class="ruby">          output = `#{cmd} 2&gt;&amp;1`</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="646">
          
          
          <code class="ruby">          File.open(log_file(options[:id]), &#39;w&#39;) do |f|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="647">
          
          
          <code class="ruby">            f.write output</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="648">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="649">
          
          
          <code class="ruby">          if $CHILD_STATUS.success?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="650">
          
          
          <code class="ruby">            job_passed(options[:id])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="651">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="652">
          
          
          <code class="ruby">            job_failed(options[:id])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="653">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="654">
          
          
          <code class="ruby">        rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="655">
          
          
          <code class="ruby">          job_failed(options[:id])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="656">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="657">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="658">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="659">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="660">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="cd57154ccbcf32c5d24e8295103062b6c802a887">
  <div class="header">
    <h3>lib/origen/application/plugins.rb</h3>
    <h4><span class="yellow">83.05 %</span> covered</h4>
    <div>
      <b>59</b> relevant lines. 
      <span class="green"><b>49</b> lines covered</span> and
      <span class="red"><b>10</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  class Application</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Provides an API for working with the application&#39;s plugins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    # An instance of this class is instantiated as Origen.app.plugins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">    class Plugins &lt; ::Array</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="8">
          <span class="hits">6</span>
          
          <code class="ruby">        top = Origen.app</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="9">
          <span class="hits">6</span>
          
          <code class="ruby">        Origen._applications_lookup[:name].each do |_name, app|</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="10">
          <span class="hits">30</span>
          
          <code class="ruby">          self &lt;&lt; app unless app == top</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      # Will raise an error if any plugins are currently imported from a path reference</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      # in the Gemfile</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">      def validate_production_status(force = false)</code>
        </li>
      
        <li class="covered" data-hits="241" data-linenumber="17">
          <span class="hits">241</span>
          
          <code class="ruby">        if Origen.mode.production? || force</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="18">
          <span class="hits">8</span>
          
          <code class="ruby">          if File.exist?(&quot;#{Origen.root}/Gemfile&quot;)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="19">
          <span class="hits">8</span>
          
          <code class="ruby">            File.readlines(&quot;#{Origen.root}/Gemfile&quot;).each do |line|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">              # http://rubular.com/r/yNGDGB6M2r</code>
        </li>
      
        <li class="covered" data-hits="96" data-linenumber="21">
          <span class="hits">96</span>
          
          <code class="ruby">              if line =~ /^\s*gem\s+((&quot;|&#39;)\w+(&quot;|&#39;)),.*(:path\s*=&gt;|path:)/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="22">
          
          
          <code class="ruby">                fail &quot;The following gem is defined as a path in your Gemfile, but that is not allowed in production: #{Regexp.last_match[1]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">      # Returns an array of symbols that represent the names of all plugins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="30">
          <span class="hits">2</span>
          
          <code class="ruby">      def names</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="31">
          <span class="hits">23</span>
          
          <code class="ruby">        map(&amp;:name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">      # Returns the current plugin&#39;s application instance</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="35">
          <span class="hits">2</span>
          
          <code class="ruby">      def current</code>
        </li>
      
        <li class="covered" data-hits="3032" data-linenumber="36">
          <span class="hits">3032</span>
          
          <code class="ruby">        return nil if @temporary == :none</code>
        </li>
      
        <li class="covered" data-hits="2348" data-linenumber="37">
          <span class="hits">2348</span>
          
          <code class="ruby">        return nil if @disabled</code>
        </li>
      
        <li class="covered" data-hits="2346" data-linenumber="38">
          <span class="hits">2346</span>
          
          <code class="ruby">        name = @temporary || @current ||= Origen.app.session.origen_core[:default_plugin]</code>
        </li>
      
        <li class="covered" data-hits="7076" data-linenumber="39">
          <span class="hits">7076</span>
          
          <code class="ruby">        find { |p| p.name.to_sym == name } if name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="42">
          <span class="hits">2</span>
          
          <code class="ruby">      def current=(name)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="43">
          <span class="hits">6</span>
          
          <code class="ruby">        name = name.to_sym if name</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="44">
          <span class="hits">6</span>
          
          <code class="ruby">        Origen.app.session.origen_core[:default_plugin] = name</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="45">
          <span class="hits">6</span>
          
          <code class="ruby">        if name == :none</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="46">
          
          
          <code class="ruby">          @current = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="48">
          <span class="hits">6</span>
          
          <code class="ruby">          @current = name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="52">
          <span class="hits">2</span>
          
          <code class="ruby">      def temporary=(name)</code>
        </li>
      
        <li class="covered" data-hits="52" data-linenumber="53">
          <span class="hits">52</span>
          
          <code class="ruby">        name = name.to_sym if name</code>
        </li>
      
        <li class="covered" data-hits="52" data-linenumber="54">
          <span class="hits">52</span>
          
          <code class="ruby">        @temporary = name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">      # Temporarily set the current plugin to nil</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="58">
          <span class="hits">2</span>
          
          <code class="ruby">      def disable_current</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="59">
          <span class="hits">2</span>
          
          <code class="ruby">        @disabled = true</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="60">
          <span class="hits">2</span>
          
          <code class="ruby">        if block_given?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="61">
          <span class="hits">1</span>
          
          <code class="ruby">          yield</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="62">
          <span class="hits">1</span>
          
          <code class="ruby">          @disabled = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">      # Restore the current plugin after an earlier disable</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="67">
          <span class="hits">2</span>
          
          <code class="ruby">      def enable_current</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby">        @disabled = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">      # @deprecated</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="72">
          <span class="hits">2</span>
          
          <code class="ruby">      def default=(name)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="73">
          <span class="hits">1</span>
          
          <code class="ruby">        Origen.deprecated &#39;Origen.current_plugin.default= is deprecated, use Origen.app.plugins.current= instead&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="74">
          <span class="hits">1</span>
          
          <code class="ruby">        self.current = name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">      # @deprecated</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="78">
          <span class="hits">2</span>
          
          <code class="ruby">      def name</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="79">
          <span class="hits">2</span>
          
          <code class="ruby">        Origen.deprecated &#39;Origen.current_plugin.name is deprecated, use Origen.app.plugins.current.name instead&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="80">
          <span class="hits">2</span>
          
          <code class="ruby">        current.name if current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">      # @deprecated</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="84">
          <span class="hits">2</span>
          
          <code class="ruby">      def instance</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="85">
          
          
          <code class="ruby">        Origen.deprecated &#39;Origen.current_plugin.instance is deprecated, use Origen.app.plugins.current instead&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="86">
          
          
          <code class="ruby">        current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">      # @deprecated</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="90">
          <span class="hits">2</span>
          
          <code class="ruby">      def default</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="91">
          
          
          <code class="ruby">        Origen.deprecated &#39;Origen.current_plugin.default is deprecated, use Origen.app.plugins.current instead&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="92">
          
          
          <code class="ruby">        current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="95">
          <span class="hits">2</span>
          
          <code class="ruby">      def shared_commands</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">        [Origen.app, self].flatten.map do |plugin|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="97">
          
          
          <code class="ruby">          shared = plugin.config.shared || {}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="98">
          
          
          <code class="ruby">          if shared[:command_launcher]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="99">
          
          
          <code class="ruby">            &quot;#{plugin.root}/#{shared[:command_launcher]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="101">
          
          
          <code class="ruby">        end.compact</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">      # Return the plugin name if the path specified is from that plugin</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="105">
          <span class="hits">2</span>
          
          <code class="ruby">      def plugin_name_from_path(path)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="106">
          <span class="hits">12</span>
          
          <code class="ruby">        path = Pathname.new(path).expand_path.cleanpath</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="107">
          <span class="hits">12</span>
          
          <code class="ruby">        each do |plugin|</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="108">
          <span class="hits">45</span>
          
          <code class="ruby">          if path.to_s =~ /^#{plugin.root}/</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="109">
          <span class="hits">1</span>
          
          <code class="ruby">            return plugin.name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">        nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="114">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :path_within_a_plugin, :plugin_name_from_path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="53ed6d5447a9628f5d7ca88adb2455bd7e05635b">
  <div class="header">
    <h3>lib/origen/application/runner.rb</h3>
    <h4><span class="red">62.07 %</span> covered</h4>
    <div>
      <b>116</b> relevant lines. 
      <span class="green"><b>72</b> lines covered</span> and
      <span class="red"><b>44</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">require &#39;fileutils&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">  class Application</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Statistics,    &#39;origen/application/statistics&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    # The Runner is responsible for co-ordinating all compile and generate</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    # requests from the command line</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">    class Runner</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">      # Launch Origen, any command which generates an output file should launch from here</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      # as it gives a common point for listeners to hook in and to establish output</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      # directories and so on.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      # Originally this method was called generate but that is now deprecated in favour</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      # of the more generic &#39;launch&#39; as the Origen feature set has expanded.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">      def launch(options = {})</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="18">
          <span class="hits">12</span>
          
          <code class="ruby">        Origen.file_handler.preserve_state do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">          # Clean up the input from legacy code</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="20">
          <span class="hits">12</span>
          
          <code class="ruby">          options[:action] = extract_action(options)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="21">
          <span class="hits">12</span>
          
          <code class="ruby">          options[:files] = extract_files(options)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="22">
          <span class="hits">12</span>
          
          <code class="ruby">          @options = options</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="23">
          <span class="hits">12</span>
          
          <code class="ruby">          prepare_and_validate_workspace(options)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="24">
          <span class="hits">12</span>
          
          <code class="ruby">          if options[:lsf]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="25">
          
          
          <code class="ruby">            record_invocation(options) do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="26">
          
          
          <code class="ruby">              prepare_for_lsf</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="27">
          
          
          <code class="ruby">              Origen.app.listeners_for(:before_lsf_submission).each(&amp;:before_lsf_submission)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="28">
          
          
          <code class="ruby">              expand_lists_and_directories(options[:files], options).each do |file|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="29">
          
          
          <code class="ruby">                Origen.app.lsf_manager.submit_origen_job(file, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="32">
          
          
          <code class="ruby">            Origen.log.info &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="33">
          
          
          <code class="ruby">            Origen.log.info &#39;Monitor status of remote jobs via:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="34">
          
          
          <code class="ruby">            Origen.log.info &#39;  origen l&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="36">
          <span class="hits">12</span>
          
          <code class="ruby">            Origen.log.info &#39;*&#39; * 70 unless options[:quiet]</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="37">
          <span class="hits">12</span>
          
          <code class="ruby">            Origen.app.listeners_for(:before_generate).each do |listener|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="38">
          
          
          <code class="ruby">              if listener.class.instance_method(:before_generate).arity == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="39">
          
          
          <code class="ruby">                listener.before_generate</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="41">
          
          
          <code class="ruby">                listener.before_generate(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="44">
          <span class="hits">12</span>
          
          <code class="ruby">            if Origen.running_remotely?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="45">
          
          
          <code class="ruby">              Origen.app.listeners_for(:before_generate_remote).each do |listener|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="46">
          
          
          <code class="ruby">                if listener.class.instance_method(:before_generate_remote).arity == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="47">
          
          
          <code class="ruby">                  listener.before_generate_remote</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="49">
          
          
          <code class="ruby">                  listener.before_generate_remote(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="53">
          <span class="hits">12</span>
          
          <code class="ruby">              Origen.app.listeners_for(:before_generate_local).each do |listener|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="54">
          
          
          <code class="ruby">                if listener.class.instance_method(:before_generate_local).arity == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="55">
          
          
          <code class="ruby">                  listener.before_generate_local</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="57">
          
          
          <code class="ruby">                  listener.before_generate_local(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="62">
          <span class="hits">12</span>
          
          <code class="ruby">            record_invocation(options) do</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="63">
          <span class="hits">12</span>
          
          <code class="ruby">              case options[:action]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">              when :forecast_test_time</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="65">
          
          
          <code class="ruby">                Origen.time.forecast_test_time(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="67">
          <span class="hits">12</span>
          
          <code class="ruby">                if options[:action] == :program</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="68">
          <span class="hits">2</span>
          
          <code class="ruby">                  Origen.generator.generate_program(expand_lists_and_directories(options[:files], options), options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="70">
          <span class="hits">10</span>
          
          <code class="ruby">                  temporary_plugin_from_options = options[:current_plugin]</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="71">
          <span class="hits">10</span>
          
          <code class="ruby">                  expand_lists_and_directories(options[:files], options).each do |file|</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="72">
          <span class="hits">18</span>
          
          <code class="ruby">                    if temporary_plugin_from_options</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="73">
          <span class="hits">18</span>
          
          <code class="ruby">                      Origen.app.plugins.temporary = temporary_plugin_from_options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="75">
          <span class="hits">18</span>
          
          <code class="ruby">                    case options[:action]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">                    when :compile</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="77">
          <span class="hits">6</span>
          
          <code class="ruby">                      Origen.generator.compile_file_or_directory(file, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">                    when :merge</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="79">
          
          
          <code class="ruby">                      Origen.generator.merge_file_or_directory(file, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">                    when :import_test_time</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="81">
          
          
          <code class="ruby">                      Origen.time.import_test_time(file, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">                    when :import_test_flow</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="83">
          
          
          <code class="ruby">                      Origen.time.import_test_flow(file, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">                    else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="85">
          <span class="hits">12</span>
          
          <code class="ruby">                      Origen.generator.generate_pattern(file, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="87">
          <span class="hits">18</span>
          
          <code class="ruby">                    Origen.app.plugins.temporary = nil if temporary_plugin_from_options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="93">
          <span class="hits">12</span>
          
          <code class="ruby">            unless options[:quiet]</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="94">
          <span class="hits">12</span>
          
          <code class="ruby">              Origen.log.info &#39;*&#39; * 70</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="95">
          <span class="hits">12</span>
          
          <code class="ruby">              stats.print_summary unless options[:action] == :merge</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="100">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :generate, :launch</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="102">
          <span class="hits">2</span>
          
          <code class="ruby">      def prepare_and_validate_workspace(options = {})</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="103">
          <span class="hits">94</span>
          
          <code class="ruby">        confirm_production_ready(options)</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="104">
          <span class="hits">94</span>
          
          <code class="ruby">        prepare_directories(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">      # Post an invocation to the Origen server for usage statistics tracking.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">      # Posting an invocation was found to add ~0.5s to all command times,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">      # so here we run it in a separate thread to try and hide it behind</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">      # the user&#39;s command.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="114">
          <span class="hits">2</span>
          
          <code class="ruby">      def record_invocation(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">        # record_invocation = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">        # begin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">        #  # Only record user invocations at this time, also bypass windows since it seems</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">        #  # that threads can&#39;t be trusted not to block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">        #  unless Origen.running_remotely? # || Origen.running_on_windows?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">        #    record_invocation = Thread.new do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">        #      Origen.client.record_invocation(options[:action]) if options[:action]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">        #    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">        #  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">        # rescue</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">        #  # Don&#39;t allow this to kill an origen command</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">        # end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="127">
          <span class="hits">12</span>
          
          <code class="ruby">        yield</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">        # begin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">        #  unless Origen.running_remotely?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">        #    # Wait for a server response, ideally would like to not wait here, but it seems if not</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">        #    # then invocation postings can be dropped, especially on windows</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">        #    Origen.profile &#39;waiting for recording invocation&#39; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">        #      record_invocation.value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby">        #    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">        #  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">        # rescue</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">        #  # Don&#39;t allow this to kill an origen command</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">        # end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">      # The action to take should be set by the action option, but legacy code will pass</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">      # things like :compile =&gt; true, the extract_action method handles the old code</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="143">
          <span class="hits">2</span>
          
          <code class="ruby">      def extract_action(options)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="144">
          <span class="hits">12</span>
          
          <code class="ruby">        return options[:action] if options[:action]</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="145">
          <span class="hits">10</span>
          
          <code class="ruby">        if options[:compile]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="146">
          <span class="hits">6</span>
          
          <code class="ruby">          :compile</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="147">
          <span class="hits">4</span>
          
          <code class="ruby">        elsif options[:program]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="148">
          
          
          <code class="ruby">          :program</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="149">
          <span class="hits">4</span>
          
          <code class="ruby">        elsif options[:job_type] == :merge</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="150">
          
          
          <code class="ruby">          :merge</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="152">
          <span class="hits">4</span>
          
          <code class="ruby">          :pattern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">      # Legacy file references can be input via :pattern, :patterns, etc. this</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby">      # cleans it up and forces them all to be in an array assigned to options[:files]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="158">
          <span class="hits">2</span>
          
          <code class="ruby">      def extract_files(options)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="159">
          <span class="hits">12</span>
          
          <code class="ruby">        files = [options[:pattern]] + [options[:patterns]] + [options[:file]] + [options[:files]]</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="160">
          <span class="hits">12</span>
          
          <code class="ruby">        files.flatten!</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="161">
          <span class="hits">12</span>
          
          <code class="ruby">        files.compact!</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="162">
          <span class="hits">12</span>
          
          <code class="ruby">        files</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="165">
          <span class="hits">2</span>
          
          <code class="ruby">      def shutdown</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">        if Origen.app.stats.failed_files &gt; 0 ||</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="167">
          <span class="hits">2</span>
          
          <code class="ruby">           Origen.app.stats.failed_patterns &gt; 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="168">
          
          
          <code class="ruby">          exit 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby">      # Expands any list references in the supplied pattern array and</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">      # returns an array of pattern names. No guarantee is made to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby">      # whether the pattern names are valid at this stage.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">      # Any duplicates will be removed.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="176">
          <span class="hits">2</span>
          
          <code class="ruby">      def expand_lists_and_directories(files, options = {})</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="177">
          <span class="hits">12</span>
          
          <code class="ruby">        Origen.file_handler.expand_list(files, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="180">
          <span class="hits">2</span>
          
          <code class="ruby">      def statistics</code>
        </li>
      
        <li class="covered" data-hits="889" data-linenumber="181">
          <span class="hits">889</span>
          
          <code class="ruby">        @statistics ||= Statistics.new(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="183">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :stats, :statistics</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="185">
          <span class="hits">2</span>
          
          <code class="ruby">      def prepare_for_lsf</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="186">
          
          
          <code class="ruby">        if options[:lsf]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">          # Build an options string for saving with the LSF job that represents this runtime environment</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="188">
          
          
          <code class="ruby">          str = &quot;-t #{Origen.target.file.basename}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="189">
          
          
          <code class="ruby">          if Origen.environment.file</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="190">
          
          
          <code class="ruby">            str += &quot; --environment #{Origen.environment.file.basename}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="192">
          
          
          <code class="ruby">          if options[:output]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="193">
          
          
          <code class="ruby">            str += &quot; -o #{options[:output]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="195">
          
          
          <code class="ruby">          if options[:reference]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="196">
          
          
          <code class="ruby">            str += &quot; -r #{options[:reference]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="197">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="198">
          
          
          <code class="ruby">          options[:lsf_option_string] = str</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">          # Clear the LSF manager job list if specifically requested or if that is the default action and</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">          # no specific action has been requested</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="201">
          
          
          <code class="ruby">          if options[:lsf_action]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="202">
          
          
          <code class="ruby">            if options[:lsf_action] == :clear</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="203">
          
          
          <code class="ruby">              Origen.app.lsf_manager.clear_all</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="205">
          
          
          <code class="ruby">          elsif Origen.config.default_lsf_action == :clear</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="206">
          
          
          <code class="ruby">            Origen.app.lsf_manager.clear_all</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="208">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="211">
          <span class="hits">2</span>
          
          <code class="ruby">      def prepare_directories(options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">        # When running remotely on the LSF never create directories to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby">        # prevent race conditions as multiple processes run concurrently,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby">        # instead assume they were already created by the runner who</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="215">
          
          
          <code class="ruby">        # submitted the job.</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="216">
          <span class="hits">94</span>
          
          <code class="ruby">        Origen.file_handler.set_output_directory(options.merge(create: Origen.running_locally?))</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="217">
          <span class="hits">94</span>
          
          <code class="ruby">        Origen.file_handler.set_reference_directory(options.merge(create: Origen.running_locally?))</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="218">
          <span class="hits">94</span>
          
          <code class="ruby">        tmp = &quot;#{Origen.root}/tmp&quot;</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="219">
          <span class="hits">94</span>
          
          <code class="ruby">        FileUtils.mkdir(tmp) unless File.exist?(tmp)</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="220">
          <span class="hits">94</span>
          
          <code class="ruby">        if Origen.running_locally?</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="221">
          <span class="hits">94</span>
          
          <code class="ruby">          mkdir Origen::Log.log_file_directory</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="222">
          <span class="hits">94</span>
          
          <code class="ruby">          mkdir &quot;#{Origen.root}/.lsf&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="224">
          <span class="hits">94</span>
          
          <code class="ruby">        if options[:lsf]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="225">
          
          
          <code class="ruby">          mkdir Origen.app.lsf_manager.log_file_directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="226">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby">      # Make the given directory if it doesn&#39;t exist, must be a full path</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="230">
          <span class="hits">2</span>
          
          <code class="ruby">      def mkdir(dir)</code>
        </li>
      
        <li class="covered" data-hits="188" data-linenumber="231">
          <span class="hits">188</span>
          
          <code class="ruby">        unless File.exist?(dir)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="232">
          
          
          <code class="ruby">          FileUtils.mkdir_p(dir)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="233">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="236">
          <span class="hits">2</span>
          
          <code class="ruby">      def confirm_production_ready(_options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby">        # The caller would have already verified the status before submission</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="238">
          <span class="hits">94</span>
          
          <code class="ruby">        if Origen.running_locally?</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="239">
          <span class="hits">94</span>
          
          <code class="ruby">          if Origen.mode.production? &amp;&amp; Origen.app.rc</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="240">
          
          
          <code class="ruby">            unless Origen.app.rc.local_modifications.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="241">
          
          
          <code class="ruby">              puts &lt;&lt;-EOT</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby">    Your workspace has local modifications that are preventing the requested action</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby">      - run &#39;origen rc mods&#39; to see them.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">              EOT</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="245">
          
          
          <code class="ruby">              exit 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="248">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="251">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="185ffb35c06411074bf576d96e7a39c97f8cab77">
  <div class="header">
    <h3>lib/origen/application/statistics.rb</h3>
    <h4><span class="yellow">81.74 %</span> covered</h4>
    <div>
      <b>115</b> relevant lines. 
      <span class="green"><b>94</b> lines covered</span> and
      <span class="red"><b>21</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  class Application</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Responsible for keeping track of all stats collected during a run</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">    class Statistics</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :completed_files, :failed_files, :missing_files,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">                    :new_files, :changed_files</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :completed_patterns, :failed_patterns, :missing_patterns,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">                    :new_patterns, :changed_patterns</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :total_vectors, :total_cycles, :total_duration, :errors</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">      class Pattern</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="12">
          <span class="hits">2</span>
          
          <code class="ruby">        attr_accessor :vectors, :cycles, :duration</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="13">
          <span class="hits">2</span>
          
          <code class="ruby">        def initialize</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="14">
          <span class="hits">40</span>
          
          <code class="ruby">          @vectors = 0</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="15">
          <span class="hits">40</span>
          
          <code class="ruby">          @cycles = 0</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="16">
          <span class="hits">40</span>
          
          <code class="ruby">          @duration = 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="20">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="21">
          <span class="hits">2</span>
          
          <code class="ruby">        @options = options</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="22">
          <span class="hits">2</span>
          
          <code class="ruby">        @patterns = {}</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="23">
          <span class="hits">2</span>
          
          <code class="ruby">        reset_global_stats</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="26">
          <span class="hits">2</span>
          
          <code class="ruby">      def reset_global_stats</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="27">
          <span class="hits">2</span>
          
          <code class="ruby">        @completed_files = 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="28">
          <span class="hits">2</span>
          
          <code class="ruby">        @failed_files = 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="29">
          <span class="hits">2</span>
          
          <code class="ruby">        @missing_files = 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="30">
          <span class="hits">2</span>
          
          <code class="ruby">        @new_files = 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="31">
          <span class="hits">2</span>
          
          <code class="ruby">        @changed_files = 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="33">
          <span class="hits">2</span>
          
          <code class="ruby">        @completed_patterns = 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="34">
          <span class="hits">2</span>
          
          <code class="ruby">        @failed_patterns = 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="35">
          <span class="hits">2</span>
          
          <code class="ruby">        @missing_patterns = 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="36">
          <span class="hits">2</span>
          
          <code class="ruby">        @new_patterns = 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="37">
          <span class="hits">2</span>
          
          <code class="ruby">        @changed_patterns = 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="39">
          <span class="hits">2</span>
          
          <code class="ruby">        @total_vectors = 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="40">
          <span class="hits">2</span>
          
          <code class="ruby">        @total_cycles = 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="41">
          <span class="hits">2</span>
          
          <code class="ruby">        @total_duration = 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="43">
          <span class="hits">2</span>
          
          <code class="ruby">        @errors = 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="46">
          <span class="hits">2</span>
          
          <code class="ruby">      def reset_pattern_stats</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="49">
          <span class="hits">2</span>
          
          <code class="ruby">      def print_summary</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="50">
          <span class="hits">12</span>
          
          <code class="ruby">        method = clean_run? ? :success : :info</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="51">
          <span class="hits">12</span>
          
          <code class="ruby">        if @completed_patterns &gt; 0 || @failed_patterns &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="52">
          <span class="hits">12</span>
          
          <code class="ruby">          Origen.log.send method, &quot;Total patterns:   #{@completed_patterns}&quot;</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="53">
          <span class="hits">12</span>
          
          <code class="ruby">          Origen.log.send method, &quot;Total vectors:    #{@total_vectors}&quot;</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="54">
          <span class="hits">12</span>
          
          <code class="ruby">          Origen.log.send method, &#39;Total duration:   %.6f&#39; % @total_duration</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="55">
          <span class="hits">12</span>
          
          <code class="ruby">          Origen.log.send method, &quot;New patterns:     #{@new_patterns}&quot;</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="56">
          <span class="hits">12</span>
          
          <code class="ruby">          if @changed_patterns &gt; 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="57">
          
          
          <code class="ruby">            Origen.log.warn &quot;Changed patterns: #{@changed_patterns}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="59">
          <span class="hits">12</span>
          
          <code class="ruby">            Origen.log.send method, &quot;Changed patterns: #{@changed_patterns}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="61">
          <span class="hits">12</span>
          
          <code class="ruby">          Origen.log.error &quot;FAILED patterns:  #{@failed_patterns}&quot; if @failed_patterns &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="62">
          <span class="hits">12</span>
          
          <code class="ruby">          Origen.log.info</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="64">
          <span class="hits">12</span>
          
          <code class="ruby">        if @completed_files &gt; 0 || @failed_files &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="65">
          <span class="hits">8</span>
          
          <code class="ruby">          Origen.log.send method, &quot;Total files:      #{@completed_files}&quot;</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="66">
          <span class="hits">8</span>
          
          <code class="ruby">          Origen.log.send method, &quot;New files:        #{@new_files}&quot;</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="67">
          <span class="hits">8</span>
          
          <code class="ruby">          Origen.log.send method, &quot;Changed files:    #{@changed_files}&quot;</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="68">
          <span class="hits">8</span>
          
          <code class="ruby">          Origen.log.error &quot;FAILED files:     #{@failed_files}&quot; if @failed_files &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="69">
          <span class="hits">8</span>
          
          <code class="ruby">          Origen.log.info</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="71">
          <span class="hits">12</span>
          
          <code class="ruby">        if @errors &gt; 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="72">
          
          
          <code class="ruby">          Origen.log.error &quot;ERRORS:           #{@errors}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="75">
          <span class="hits">12</span>
          
          <code class="ruby">        if @changed_files &gt; 0 || @changed_patterns &gt; 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="76">
          
          
          <code class="ruby">          changes = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="77">
          
          
          <code class="ruby">          Origen.log.info &#39;To accept all of these changes run:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="78">
          
          
          <code class="ruby">          Origen.log.info &#39;  origen save changed&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="80">
          <span class="hits">12</span>
          
          <code class="ruby">        if @new_files &gt; 0 || @new_patterns &gt; 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="81">
          
          
          <code class="ruby">          news = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="82">
          
          
          <code class="ruby">          Origen.log.info &#39;To save all of these new files as the reference version run:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="83">
          
          
          <code class="ruby">          Origen.log.info &#39;  origen save new&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="85">
          <span class="hits">12</span>
          
          <code class="ruby">        if changes &amp;&amp; news</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="86">
          
          
          <code class="ruby">          Origen.log.info &#39;To save both new and changed files run:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="87">
          
          
          <code class="ruby">          Origen.log.info &#39;  origen save all&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="89">
          <span class="hits">12</span>
          
          <code class="ruby">        Origen.log.info &#39;**********************************************************************&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="92">
          <span class="hits">2</span>
          
          <code class="ruby">      def summary_text</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">        &lt;&lt;-END</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="94">
          
          
          <code class="ruby">    Total patterns:   #{@completed_patterns}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">    New patterns:     #{@new_patterns}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">    Changed patterns: #{@changed_patterns}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">    FAILED patterns:  #{@failed_patterns}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">    Total files:      #{@completed_files}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">    New files:        #{@new_files}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">    Changed files:    #{@changed_files}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">    FAILED files:     #{@failed_files}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">    ERRORS:           #{@errors}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">        END</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="108">
          <span class="hits">2</span>
          
          <code class="ruby">      def clean_run?</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="109">
          <span class="hits">12</span>
          
          <code class="ruby">        @changed_files == 0 &amp;&amp; @changed_patterns == 0 &amp;&amp;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">          @new_files == 0 &amp;&amp; @new_patterns == 0 &amp;&amp;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">          @failed_files == 0 &amp;&amp; @failed_patterns == 0 &amp;&amp;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">          @errors == 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="115">
          <span class="hits">2</span>
          
          <code class="ruby">      def record_failed_pattern</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="116">
          
          
          <code class="ruby">        @failed_patterns += 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="119">
          <span class="hits">2</span>
          
          <code class="ruby">      def record_missing_pattern</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="120">
          
          
          <code class="ruby">        @missing_patterns += 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="123">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_vector(x = 1)</code>
        </li>
      
        <li class="covered" data-hits="690" data-linenumber="124">
          <span class="hits">690</span>
          
          <code class="ruby">        current_pattern.vectors += x</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="127">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_cycle(x = 1)</code>
        </li>
      
        <li class="covered" data-hits="690" data-linenumber="128">
          <span class="hits">690</span>
          
          <code class="ruby">        current_pattern.cycles += x</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="131">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_time_in_ns(x)</code>
        </li>
      
        <li class="covered" data-hits="690" data-linenumber="132">
          <span class="hits">690</span>
          
          <code class="ruby">        current_pattern.duration += x</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="135">
          <span class="hits">2</span>
          
          <code class="ruby">      def collect_for_pattern(key)</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="136">
          <span class="hits">40</span>
          
          <code class="ruby">        @pattern_key = key</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="137">
          <span class="hits">40</span>
          
          <code class="ruby">        yield</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="138">
          <span class="hits">40</span>
          
          <code class="ruby">        @pattern_key = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="141">
          <span class="hits">2</span>
          
          <code class="ruby">      def current_pattern</code>
        </li>
      
        <li class="covered" data-hits="2070" data-linenumber="142">
          <span class="hits">2070</span>
          
          <code class="ruby">        pattern(@pattern_key)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="145">
          <span class="hits">2</span>
          
          <code class="ruby">      def pattern(key)</code>
        </li>
      
        <li class="covered" data-hits="2270" data-linenumber="146">
          <span class="hits">2270</span>
          
          <code class="ruby">        @patterns[key] ||= Pattern.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="149">
          <span class="hits">2</span>
          
          <code class="ruby">      def number_of_vectors_for(key)</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="150">
          <span class="hits">80</span>
          
          <code class="ruby">        pattern(key).vectors</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="153">
          <span class="hits">2</span>
          
          <code class="ruby">      def number_of_cycles_for(key)</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="154">
          <span class="hits">40</span>
          
          <code class="ruby">        pattern(key).vectors</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="157">
          <span class="hits">2</span>
          
          <code class="ruby">      def execution_time_for(key)</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="158">
          <span class="hits">80</span>
          
          <code class="ruby">        pattern(key).duration.to_f / 1_000_000_000</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="161">
          <span class="hits">2</span>
          
          <code class="ruby">      def record_pattern_completion(key)</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="162">
          <span class="hits">40</span>
          
          <code class="ruby">        @completed_patterns += 1</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="163">
          <span class="hits">40</span>
          
          <code class="ruby">        @total_vectors += number_of_vectors_for(key)</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="164">
          <span class="hits">40</span>
          
          <code class="ruby">        @total_cycles += number_of_cycles_for(key)</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="165">
          <span class="hits">40</span>
          
          <code class="ruby">        @total_duration += execution_time_for(key)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="168">
          <span class="hits">2</span>
          
          <code class="ruby">      def report_pass</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="169">
          <span class="hits">2</span>
          
          <code class="ruby">        Origen.log.success &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="170">
          <span class="hits">2</span>
          
          <code class="ruby">        Origen.log.success &#39;    PPPPP      AA        SSSS    SSSS&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="171">
          <span class="hits">2</span>
          
          <code class="ruby">        Origen.log.success &#39;    PP  PP    AAAA      SS  SS  SS  SS&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="172">
          <span class="hits">2</span>
          
          <code class="ruby">        Origen.log.success &#39;    PPPPP    AA  AA      SS      SS&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="173">
          <span class="hits">2</span>
          
          <code class="ruby">        Origen.log.success &#39;    PP      AAAAAAAA       SS      SS&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="174">
          <span class="hits">2</span>
          
          <code class="ruby">        Origen.log.success &#39;    PP     AA      AA   SS  SS  SS  SS&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="175">
          <span class="hits">2</span>
          
          <code class="ruby">        Origen.log.success &#39;    PP    AA        AA   SSSS    SSSS&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="176">
          <span class="hits">2</span>
          
          <code class="ruby">        Origen.log.success &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="179">
          <span class="hits">2</span>
          
          <code class="ruby">      def report_fail</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="180">
          
          
          <code class="ruby">        Origen.log.error &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="181">
          
          
          <code class="ruby">        Origen.log.error &#39;    FFFFFF     AA       II   LL&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="182">
          
          
          <code class="ruby">        Origen.log.error &#39;    FF        AAAA      II   LL&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="183">
          
          
          <code class="ruby">        Origen.log.error &#39;    FFFFF    AA  AA     II   LL&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="184">
          
          
          <code class="ruby">        Origen.log.error &#39;    FF      AAAAAAAA    II   LL&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="185">
          
          
          <code class="ruby">        Origen.log.error &#39;    FF     AA      AA   II   LL&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="186">
          
          
          <code class="ruby">        Origen.log.error &#39;    FF    AA        AA  II   LLLLLL&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="187">
          
          
          <code class="ruby">        Origen.log.error &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="3af970bc9346618898d3710ca3c682de9ccd6b4d">
  <div class="header">
    <h3>lib/origen/application/target.rb</h3>
    <h4><span class="red">68.45 %</span> covered</h4>
    <div>
      <b>168</b> relevant lines. 
      <span class="green"><b>115</b> lines covered</span> and
      <span class="red"><b>53</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  class Application</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Class to handle the target.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    # The target is a Ruby file that is run prior to generating each pattern, and</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    # it should be used to instantiate the top-level models used by the application.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    # It can also be used to override and settings within these classes after they</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    # have been instantiated and before they are run.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    # All target files must live in Origen.root/target.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    # An instance of this class is automatically instantiated and available globally</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    # as Origen.app.target</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">    class Target</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">      DIR = &quot;#{Origen.root}/target&quot;        # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">      SAVE_FILE = &quot;#{DIR}/.default&quot;      # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">      DEFAULT_FILE = &quot;#{DIR}/default.rb&quot; # :nodoc:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      # Not a clean unload, but allows objects to be re-instantiated for testing</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="21">
          <span class="hits">2</span>
          
          <code class="ruby">      def unload!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="22">
          
          
          <code class="ruby">        Origen.app.unload_target!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      # Implement a target loop based on the supplied options.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      # The options can contain the keys :target or :targets or neither.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      # In the neither case the loop will run once for the current workspace</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">      # default target.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">      # In the case where one of the keys is present the loop will run for each</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      # target and the options will be passed into the block with the key :target</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      # set to the current target.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="34">
          <span class="hits">2</span>
          
          <code class="ruby">      def loop(options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="35">
          
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">          set_target:  true,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">          force_debug: false,  # Set true to force debug mode for all targets</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="39">
          
          
          <code class="ruby">        targets = [options.delete(:target), options.delete(:targets)].flatten.compact.uniq</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="40">
          
          
          <code class="ruby">        targets = [file!.basename.to_s] if targets.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="41">
          
          
          <code class="ruby">        set = options.delete(:set_target)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="42">
          
          
          <code class="ruby">        targets.each do |target|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="43">
          
          
          <code class="ruby">          Origen.load_target(target, options) if set</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="44">
          
          
          <code class="ruby">          options[:target] = target</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="45">
          
          
          <code class="ruby">          yield options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      # Use this to implement a loop for each production target, it will automatically</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      # load each target before yielding to the block.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">      # The production targets are defined by the production_targets configuration</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      # option.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">      # === Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">      #   Origen.app.target.each_production do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">      #     Run something within the context of each target</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="58">
          <span class="hits">2</span>
          
          <code class="ruby">      def each_production(options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="59">
          
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">          force_debug: false,  # Set true to force debug mode for all targets</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="62">
          
          
          <code class="ruby">        prod_targets.each do |moo, targets|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="63">
          
          
          <code class="ruby">          [targets].flatten.each do |target|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="64">
          
          
          <code class="ruby">            self.temporary = target</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="65">
          
          
          <code class="ruby">            Origen.app.load_target!(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="66">
          
          
          <code class="ruby">            yield moo</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">      # As each_production except it only yields unique targets. i.e. if you have two</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">      # MOOs that use the same target file defined in the production_targets then this</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">      # method will only yield once.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">      # An array of MOOs that use each target is returned each time.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">      # === Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">      #   Origen.app.target.each_unique_production do |moos|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">      #     Run something within the context of each unique target</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="80">
          <span class="hits">2</span>
          
          <code class="ruby">      def each_unique_production(options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="81">
          
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">          force_debug: false,  # Set true to force debug mode for all targets</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="84">
          
          
          <code class="ruby">        targets = {}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="85">
          
          
          <code class="ruby">        prod_targets.each do |moo, moos_targets|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="86">
          
          
          <code class="ruby">          [moos_targets].flatten.each do |target|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="87">
          
          
          <code class="ruby">            if targets[target]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="88">
          
          
          <code class="ruby">              targets[target] &lt;&lt; moo</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="90">
          
          
          <code class="ruby">              targets[target] = [moo]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="94">
          
          
          <code class="ruby">        targets.each do |target, moos|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="95">
          
          
          <code class="ruby">          self.temporary = target</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="96">
          
          
          <code class="ruby">          Origen.app.load_target!(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="97">
          
          
          <code class="ruby">          yield moos</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">      # If the production_targets moo number mapping inclues the current target then</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">      # the MOO number will be returned, otherwise nil</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="103">
          <span class="hits">2</span>
          
          <code class="ruby">      def moo</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="104">
          <span class="hits">3</span>
          
          <code class="ruby">        prod_targets.each do |moo, targets|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="105">
          <span class="hits">6</span>
          
          <code class="ruby">          [targets].flatten.each do |target|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="106">
          <span class="hits">6</span>
          
          <code class="ruby">            return moo if File.basename(target, &#39;.rb&#39;).to_s == file.basename(&#39;.rb&#39;).to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">        nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">      # Returns the name (the filename) of the current target</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="113">
          <span class="hits">2</span>
          
          <code class="ruby">      def name</code>
        </li>
      
        <li class="covered" data-hits="241" data-linenumber="114">
          <span class="hits">241</span>
          
          <code class="ruby">        file.basename(&#39;.rb&#39;).to_s if file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">      # Load the target, calling this will re-instantiate all top-level objects</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">      # defined there.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="119">
          <span class="hits">2</span>
          
          <code class="ruby">      def load!(options = {})</code>
        </li>
      
        <li class="covered" data-hits="42" data-linenumber="120">
          <span class="hits">42</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">          force_debug: false,  # Set true to force debug mode for all targets</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="42" data-linenumber="123">
          <span class="hits">42</span>
          
          <code class="ruby">        Origen.app.load_target!(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">      # Returns Array of all targets available</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="127">
          <span class="hits">2</span>
          
          <code class="ruby">      def all_targets</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="128">
          <span class="hits">6</span>
          
          <code class="ruby">        targets = []</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="129">
          <span class="hits">6</span>
          
          <code class="ruby">        find(&#39;&#39;).sort.each do |file|</code>
        </li>
      
        <li class="covered" data-hits="96" data-linenumber="130">
          <span class="hits">96</span>
          
          <code class="ruby">          targets &lt;&lt; File.basename(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="132">
          <span class="hits">6</span>
          
          <code class="ruby">        targets # return</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">      # Returns an array containing all current production targets</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="136">
          <span class="hits">2</span>
          
          <code class="ruby">      def production_targets</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="137">
          
          
          <code class="ruby">        prod_targets.map { |_moo, targets| targets }.uniq</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">      # Returns true if the target exists, this can be used to test for the presence</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">      # of a target before calling one of the other methods to actually apply it.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">      # It will return true if one or more targets are found matching the given name,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">      # use the unique? method to test if the given name uniquely identifies a valid</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">      # target.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="146">
          <span class="hits">2</span>
          
          <code class="ruby">      def exists?(name)</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="147">
          <span class="hits">7</span>
          
          <code class="ruby">        tgts = resolve_mapping(name)</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="148">
          <span class="hits">7</span>
          
          <code class="ruby">        targets = tgts.is_a?(Array) ? tgts : find(tgts)</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="149">
          <span class="hits">7</span>
          
          <code class="ruby">        targets.size &gt; 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="151">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :exist?, :exists?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby">      # Similar to the exists? method, this will return true only if the given name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">      # resolves to a single valid target.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="155">
          <span class="hits">2</span>
          
          <code class="ruby">      def unique?(name)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="156">
          <span class="hits">2</span>
          
          <code class="ruby">        tgts = resolve_mapping(name)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="157">
          <span class="hits">2</span>
          
          <code class="ruby">        targets = tgts.is_a?(Array) ? tgts : find(tgts)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="158">
          <span class="hits">2</span>
          
          <code class="ruby">        targets.size == 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="161">
          
          
          <code class="ruby">      # Switch to the supplied target, name can be a fragment as long as it allows</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby">      # a unique target to be identified.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby">      # The name can also be a MOO number mapping from the config.production_targets</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby">      # attribute of the application.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby">      # Calling this method does not affect the default target setting in the workspace.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">      # The target can also be set to a proc to be called instead, this is really</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">      # intended to be used for testing purposes:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">      #    Origen.target.temporary = -&gt; { $dut = SomeLocalClass.new }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="172">
          <span class="hits">2</span>
          
          <code class="ruby">      def temporary=(name)</code>
        </li>
      
        <li class="covered" data-hits="142" data-linenumber="173">
          <span class="hits">142</span>
          
          <code class="ruby">        if name.is_a?(Proc)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="174">
          <span class="hits">11</span>
          
          <code class="ruby">          self.file = nil</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="175">
          <span class="hits">11</span>
          
          <code class="ruby">          @proc = name</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="176">
          <span class="hits">11</span>
          
          <code class="ruby">          return</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="131" data-linenumber="178">
          <span class="hits">131</span>
          
          <code class="ruby">          @proc = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="131" data-linenumber="180">
          <span class="hits">131</span>
          
          <code class="ruby">        tgts = resolve_mapping(name)</code>
        </li>
      
        <li class="covered" data-hits="131" data-linenumber="181">
          <span class="hits">131</span>
          
          <code class="ruby">        targets = tgts.is_a?(Array) ? tgts : find(tgts)</code>
        </li>
      
        <li class="covered" data-hits="131" data-linenumber="182">
          <span class="hits">131</span>
          
          <code class="ruby">        if targets.size == 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="183">
          <span class="hits">2</span>
          
          <code class="ruby">          puts &quot;Sorry no targets were found matching &#39;#{name}&#39;!&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="184">
          <span class="hits">2</span>
          
          <code class="ruby">          puts &#39;Here are the available options:&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="185">
          <span class="hits">2</span>
          
          <code class="ruby">          find(&#39;&#39;).sort.each do |file|</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="186">
          <span class="hits">32</span>
          
          <code class="ruby">            puts File.basename(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="188">
          <span class="hits">2</span>
          
          <code class="ruby">          exit 1</code>
        </li>
      
        <li class="covered" data-hits="129" data-linenumber="189">
          <span class="hits">129</span>
          
          <code class="ruby">        elsif targets.size &gt; 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="190">
          
          
          <code class="ruby">          if is_a_moo_number?(name) &amp;&amp; prod_targets</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="191">
          
          
          <code class="ruby">            puts &quot;Multiple production targets exist for #{name.upcase}, use one of the following instead of the MOO number:&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="192">
          
          
          <code class="ruby">            targets.sort.each do |file|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="193">
          
          
          <code class="ruby">              puts File.basename(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="196">
          
          
          <code class="ruby">            puts &#39;Please try again with one of the following targets:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="197">
          
          
          <code class="ruby">            targets.sort.each do |file|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="198">
          
          
          <code class="ruby">              puts File.basename(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="201">
          
          
          <code class="ruby">          exit 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="129" data-linenumber="203">
          <span class="hits">129</span>
          
          <code class="ruby">          self.file = targets[0]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="206">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :switch, :temporary=</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="207">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :switch_to, :temporary=</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="208">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="209">
          <span class="hits">2</span>
          
          <code class="ruby">      def proc</code>
        </li>
      
        <li class="covered" data-hits="253" data-linenumber="210">
          <span class="hits">253</span>
          
          <code class="ruby">        @proc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby">      # Returns a signature for the current target, can be used to track target</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby">      # changes in cases where the name is not unique - i.e. when using a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="215">
          
          
          <code class="ruby">      # configurable target</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="216">
          <span class="hits">2</span>
          
          <code class="ruby">      def signature</code>
        </li>
      
        <li class="covered" data-hits="31" data-linenumber="217">
          <span class="hits">31</span>
          
          <code class="ruby">        @signature ||= set_signature(nil)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="221">
          <span class="hits">2</span>
          
          <code class="ruby">      def set_signature(options)</code>
        </li>
      
        <li class="covered" data-hits="241" data-linenumber="222">
          <span class="hits">241</span>
          
          <code class="ruby">        options ||= {}</code>
        </li>
      
        <li class="covered" data-hits="241" data-linenumber="223">
          <span class="hits">241</span>
          
          <code class="ruby">        @signature = options.merge(_tname: name).to_a.hash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="226">
          
          
          <code class="ruby">      # As #temporary= except that the given target will be set to the workspace default</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="227">
          <span class="hits">2</span>
          
          <code class="ruby">      def default=(name)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="228">
          <span class="hits">1</span>
          
          <code class="ruby">        if name</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="229">
          <span class="hits">1</span>
          
          <code class="ruby">          self.temporary = name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="231">
          
          
          <code class="ruby">          @file = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="232">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="233">
          <span class="hits">1</span>
          
          <code class="ruby">        save</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">      # Prints out the current target details to the command line</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="237">
          <span class="hits">2</span>
          
          <code class="ruby">      def describe</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="238">
          
          
          <code class="ruby">        f = self.file!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="239">
          
          
          <code class="ruby">        puts &quot;Current target: #{f.basename}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="240">
          
          
          <code class="ruby">        puts &#39;*&#39; * 70</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="241">
          
          
          <code class="ruby">        File.open(f).each do |line|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="242">
          
          
          <code class="ruby">          puts &quot;  #{line}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="244">
          
          
          <code class="ruby">        puts &#39;*&#39; * 70</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby">      # Returns an array of matching target file paths</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="248">
          <span class="hits">2</span>
          
          <code class="ruby">      def find(name)</code>
        </li>
      
        <li class="covered" data-hits="148" data-linenumber="249">
          <span class="hits">148</span>
          
          <code class="ruby">        if name</code>
        </li>
      
        <li class="covered" data-hits="147" data-linenumber="250">
          <span class="hits">147</span>
          
          <code class="ruby">          name = name.gsub(&#39;*&#39;, &#39;&#39;)</code>
        </li>
      
        <li class="covered" data-hits="147" data-linenumber="251">
          <span class="hits">147</span>
          
          <code class="ruby">          if File.exist?(name)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="252">
          
          
          <code class="ruby">            [name]</code>
        </li>
      
        <li class="covered" data-hits="147" data-linenumber="253">
          <span class="hits">147</span>
          
          <code class="ruby">          elsif File.exist?(&quot;#{Origen.root}/target/#{name}&quot;) &amp;&amp; name != &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="254">
          <span class="hits">1</span>
          
          <code class="ruby">            [&quot;#{Origen.root}/target/#{name}&quot;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="255">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">            # The below weirdness is to make it recurse into symlinked directories</code>
        </li>
      
        <li class="covered" data-hits="146" data-linenumber="257">
          <span class="hits">146</span>
          
          <code class="ruby">            Dir.glob(&quot;#{DIR}/**{,/*/**}/*&quot;).sort.uniq.select do |file|</code>
        </li>
      
        <li class="covered" data-hits="2337" data-linenumber="258">
          <span class="hits">2337</span>
          
          <code class="ruby">              File.basename(file) =~ /#{name}/ &amp;&amp; file !~ /.*\.rb.+$/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="262">
          <span class="hits">1</span>
          
          <code class="ruby">          [nil]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="266">
          
          
          <code class="ruby">      # Saves the current target as the workspace default, i.e. the current target</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby">      # will be used by Origen the next time if no other target is specified</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="268">
          <span class="hits">2</span>
          
          <code class="ruby">      def save # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="269">
          <span class="hits">1</span>
          
          <code class="ruby">        if @file</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="270">
          <span class="hits">1</span>
          
          <code class="ruby">          File.open(SAVE_FILE, &#39;w&#39;) do |f|</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="271">
          <span class="hits">1</span>
          
          <code class="ruby">            Marshal.dump(file, f)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="273">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="274">
          
          
          <code class="ruby">          forget</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="276">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby">      # Load the default file from the workspace default if it exists and return it,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="279">
          
          
          <code class="ruby">      # otherwise returns nil</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="280">
          <span class="hits">2</span>
          
          <code class="ruby">      def default_file</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="281">
          <span class="hits">30</span>
          
          <code class="ruby">        return @default_file if @default_file</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="282">
          <span class="hits">1</span>
          
          <code class="ruby">        if File.exist?(SAVE_FILE)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="283">
          <span class="hits">1</span>
          
          <code class="ruby">          File.open(SAVE_FILE) do |f|</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="284">
          <span class="hits">1</span>
          
          <code class="ruby">            @default_file = Marshal.load(f)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="285">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="286">
          
          
          <code class="ruby">        elsif File.exist?(DEFAULT_FILE)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="287">
          
          
          <code class="ruby">          @default_file = Pathname.new(DEFAULT_FILE)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="289">
          <span class="hits">1</span>
          
          <code class="ruby">        @default_file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="291">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="292">
          
          
          <code class="ruby">      # Returns the target file (a Pathname object) if it has been defined, otherwise nil</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="293">
          <span class="hits">2</span>
          
          <code class="ruby">      def file # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="994" data-linenumber="294">
          <span class="hits">994</span>
          
          <code class="ruby">        return @file if @file</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="295">
          <span class="hits">10</span>
          
          <code class="ruby">        if default_file &amp;&amp; File.exist?(default_file)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="296">
          <span class="hits">10</span>
          
          <code class="ruby">          @file = default_file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="297">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="300">
          
          
          <code class="ruby">      # As file except will raise an exception if it hasn&#39;t been defined yet</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="301">
          <span class="hits">2</span>
          
          <code class="ruby">      def file! # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="229" data-linenumber="302">
          <span class="hits">229</span>
          
          <code class="ruby">        unless file</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="303">
          
          
          <code class="ruby">          puts &#39;No target has been specified!&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="304">
          
          
          <code class="ruby">          puts &#39;To specify a target use the -t switch.&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="305">
          
          
          <code class="ruby">          puts &#39;Look in the target directory for a list of available target names.&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="306">
          
          
          <code class="ruby">          exit 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="229" data-linenumber="308">
          <span class="hits">229</span>
          
          <code class="ruby">        file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="309">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="311">
          <span class="hits">2</span>
          
          <code class="ruby">      def file=(path) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="140" data-linenumber="312">
          <span class="hits">140</span>
          
          <code class="ruby">        if path</code>
        </li>
      
        <li class="covered" data-hits="128" data-linenumber="313">
          <span class="hits">128</span>
          
          <code class="ruby">          @file = Pathname.new(path)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="314">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="315">
          <span class="hits">12</span>
          
          <code class="ruby">          @file = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="316">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="317">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="318">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">      # Remove the workspace default target</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="320">
          <span class="hits">2</span>
          
          <code class="ruby">      def forget</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="321">
          
          
          <code class="ruby">        File.delete(SAVE_FILE) if File.exist?(SAVE_FILE)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="322">
          
          
          <code class="ruby">        @default_file = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="323">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="324">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="325">
          
          
          <code class="ruby">      #      # This attribute is used by the Origen#compile and Origen#merge tasks to allow files</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="326">
          
          
          <code class="ruby">      #      # to be compiled on a per-target basis. If the ERB source file has &#39;target&#39; in the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="327">
          
          
          <code class="ruby">      #      # name then this will be substituted for the value returned from this attribute. &lt;br&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="328">
          
          
          <code class="ruby">      #      # For example to simply use the MOO number to identify the target you may</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="329">
          
          
          <code class="ruby">      #      # set up a simple task like this:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="330">
          
          
          <code class="ruby">      #      #   # Compile the J750 files for each target</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="331">
          
          
          <code class="ruby">      #      #   Target.each_production do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="332">
          
          
          <code class="ruby">      #      #       $target.id = $target.moo.gsub(&quot;*&quot;,&quot;&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="333">
          
          
          <code class="ruby">      #      #       compile(&quot;templates/j750&quot;, &quot;j750&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby">      #      #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="335">
          
          
          <code class="ruby">      #      attr_accessor :id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="336">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="337">
          
          
          <code class="ruby">      #      def initialize # :nodoc:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="338">
          
          
          <code class="ruby">      #          restore</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="339">
          
          
          <code class="ruby">      #      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="340">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="341">
          
          
          <code class="ruby">      #      # Yields a summary of the current target settings</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="342">
          
          
          <code class="ruby">      #      def summary</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="343">
          
          
          <code class="ruby">      #          yield &quot;Top:      #{$top.class}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="344">
          
          
          <code class="ruby">      #          yield &quot;SoC:      #{$soc.class}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="345">
          
          
          <code class="ruby">      #          yield &quot;Tester:   #{$tester.class}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="346">
          
          
          <code class="ruby">      #      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="347">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="348">
          
          
          <code class="ruby">      # Returns true if running with a temporary target, i.e. if the current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="349">
          
          
          <code class="ruby">      # target is not the same as the default target</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="350">
          <span class="hits">2</span>
          
          <code class="ruby">      def temporary?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="351">
          
          
          <code class="ruby">        @file == @default_file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="352">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="353">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="354">
          
          
          <code class="ruby">      # Resolves the target name to a target file if a MOO number is supplied and</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="355">
          
          
          <code class="ruby">      # app.config.production_targets has been defined</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="356">
          <span class="hits">2</span>
          
          <code class="ruby">      def resolve_mapping(name) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="140" data-linenumber="357">
          <span class="hits">140</span>
          
          <code class="ruby">        if is_a_moo_number?(name) &amp;&amp; prod_targets</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="358">
          
          
          <code class="ruby">          # If an exact match</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="359">
          <span class="hits">9</span>
          
          <code class="ruby">          if prod_targets[name.upcase]</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="360">
          <span class="hits">5</span>
          
          <code class="ruby">            prod_targets[name.upcase]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="361">
          
          
          <code class="ruby">          # If a wildcard match</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="362">
          <span class="hits">4</span>
          
          <code class="ruby">          elsif prod_targets[&quot;*#{moo_number_minus_revision(name)}&quot;]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="363">
          
          
          <code class="ruby">            prod_targets[&quot;*#{moo_number_minus_revision(name)}&quot;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="364">
          
          
          <code class="ruby">          # Else just return the given name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="365">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="366">
          <span class="hits">4</span>
          
          <code class="ruby">            name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="367">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="368">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="131" data-linenumber="369">
          <span class="hits">131</span>
          
          <code class="ruby">          name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="370">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="371">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="372">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="373">
          
          
          <code class="ruby">      # Returns config.production_targets with all keys forced to upper case</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="374">
          <span class="hits">2</span>
          
          <code class="ruby">      def prod_targets # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="375">
          <span class="hits">30</span>
          
          <code class="ruby">        return {} unless Origen.config.production_targets</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="376">
          <span class="hits">30</span>
          
          <code class="ruby">        return @prod_targets if @prod_targets</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="377">
          <span class="hits">2</span>
          
          <code class="ruby">        @prod_targets = {}</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="378">
          <span class="hits">2</span>
          
          <code class="ruby">        Origen.config.production_targets.each do |key, value|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="379">
          <span class="hits">6</span>
          
          <code class="ruby">          @prod_targets[key.upcase] = value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="380">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="381">
          <span class="hits">2</span>
          
          <code class="ruby">        @prod_targets</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="382">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="383">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="384">
          
          
          <code class="ruby">      # Returns true if the supplied target name is a moo number format</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="385">
          <span class="hits">2</span>
          
          <code class="ruby">      def is_a_moo_number?(name) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="140" data-linenumber="386">
          <span class="hits">140</span>
          
          <code class="ruby">        !!(name.to_s.upcase =~ /^\d?\d?\*?[A-Z]\d\d[A-Z]$/)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="387">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="388">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="389">
          <span class="hits">2</span>
          
          <code class="ruby">      def moo_number_minus_revision(name) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="390">
          <span class="hits">4</span>
          
          <code class="ruby">        name.to_s.upcase =~ /^\d?\d?([A-Z]\d\d[A-Z])$/</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="391">
          <span class="hits">4</span>
          
          <code class="ruby">        Regexp.last_match[1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="392">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="393">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="394">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="395">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="37e67316ed500e4995c35df7b0c418ff08bd3d27">
  <div class="header">
    <h3>lib/origen/bugs.rb</h3>
    <h4><span class="red">79.17 %</span> covered</h4>
    <div>
      <b>24</b> relevant lines. 
      <span class="green"><b>19</b> lines covered</span> and
      <span class="red"><b>5</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Bugs</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    extend ActiveSupport::Concern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Bug,           &#39;origen/bugs/bug&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">    module ClassMethods # :nodoc:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">      # Define a bug on the given IP</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">      def bug(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="10">
          <span class="hits">4</span>
          
          <code class="ruby">        name = name.to_s.downcase.to_sym</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="11">
          <span class="hits">4</span>
          
          <code class="ruby">        bugs[name] = Bug.new(name, options)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="12">
          <span class="hits">4</span>
          
          <code class="ruby">        define_method &quot;has_#{name}_bug?&quot; do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="13">
          
          
          <code class="ruby">          Origen.deprecate &quot;Use has_bug?(:#{name}) instead of has_#{name}_bug?&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="14">
          
          
          <code class="ruby">          has_bug?(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">      def bugs</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="19">
          <span class="hits">34</span>
          
          <code class="ruby">        @bugs ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">    # Returns true if the version of the IP represented by the object has the bug of the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">    # given name</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="25">
          <span class="hits">2</span>
          
          <code class="ruby">    def has_bug?(name, _options = {})</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="26">
          <span class="hits">13</span>
          
          <code class="ruby">      unless self.respond_to?(:version) &amp;&amp; version</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="27">
          
          
          <code class="ruby">        puts &#39;To test for the presence of a bug the object must implement an attribute&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="28">
          
          
          <code class="ruby">        puts &quot;called &#39;version&#39; which returns the IP version represented by the the object.&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="29">
          
          
          <code class="ruby">        fail &#39;Version undefined!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="31">
          <span class="hits">13</span>
          
          <code class="ruby">      name = name.to_s.downcase.to_sym</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="32">
          <span class="hits">13</span>
          
          <code class="ruby">      if bugs[name]</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="33">
          <span class="hits">12</span>
          
          <code class="ruby">        bugs[name].present_on_version?(version)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">        false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">    # Returns a hash containing all known bugs associated with</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">    # the given IP, regardless of which version they are present on</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="41">
          <span class="hits">2</span>
          
          <code class="ruby">    def bugs</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="42">
          <span class="hits">30</span>
          
          <code class="ruby">      self.class.bugs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="f685ee11828e3707c573ecc9748616be6ca8fe7c">
  <div class="header">
    <h3>lib/origen/bugs/bug.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>20</b> relevant lines. 
      <span class="green"><b>20</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Bugs</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    class Bug</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :affected_versions</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :name</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :id, :name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="10">
          <span class="hits">4</span>
          
          <code class="ruby">        @name = name</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="11">
          <span class="hits">4</span>
          
          <code class="ruby">        @affected_versions = [options[:affected_version] || options[:affected_versions]].flatten.compact</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="12">
          <span class="hits">4</span>
          
          <code class="ruby">        @fixed_on_version = options[:fixed_on_version]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">      def present_on_version?(version, _options = {})</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="16">
          <span class="hits">12</span>
          
          <code class="ruby">        if affected_versions.empty?</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="17">
          <span class="hits">6</span>
          
          <code class="ruby">          if fixed_on_version</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="18">
          <span class="hits">3</span>
          
          <code class="ruby">            version &lt; fixed_on_version</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="20">
          <span class="hits">3</span>
          
          <code class="ruby">            true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="23">
          <span class="hits">6</span>
          
          <code class="ruby">          affected_versions.include?(version)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">      def fixed_on_version</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">        @fixed_on_version || begin</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="29">
          <span class="hits">5</span>
          
          <code class="ruby">          unless affected_versions.empty?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">            affected_versions.max + 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="32">
          <span class="hits">12</span>
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="41cec756475f423d142dc06c543ee3a2447d12e4">
  <div class="header">
    <h3>lib/origen/chip_mode.rb</h3>
    <h4><span class="red">79.37 %</span> covered</h4>
    <div>
      <b>63</b> relevant lines. 
      <span class="green"><b>50</b> lines covered</span> and
      <span class="red"><b>13</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">  # Represents an SoC DFT/Operating mode - e.g. SCAN, RAMBIST, etc.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">  class ChipMode</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :brief_description</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :description</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_writer :name</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :data_rate</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :data_rate_unit</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :minimum_version_enabled</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_writer :min_ver_enabled, :minimum_version_enabled</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_writer :min_version_enabled, :minimum_version_enabled</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :audience</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_writer :full_name, :name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">    # Returns the object that owns the mode (the SoC instance usually)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :owner</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :typical_voltage</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :typ_voltage, :typical_voltage</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="175" data-linenumber="20">
          <span class="hits">175</span>
          
          <code class="ruby">      @name = name</code>
        </li>
      
        <li class="covered" data-hits="209" data-linenumber="21">
          <span class="hits">209</span>
          
          <code class="ruby">      options.each { |k, v| instance_variable_set(&quot;@#{k}&quot;, v) }</code>
        </li>
      
        <li class="covered" data-hits="175" data-linenumber="22">
          <span class="hits">175</span>
          
          <code class="ruby">      validate_args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">    def name</code>
        </li>
      
        <li class="covered" data-hits="408" data-linenumber="26">
          <span class="hits">408</span>
          
          <code class="ruby">      @name || @id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :full_name, :name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">    def id</code>
        </li>
      
        <li class="covered" data-hits="371" data-linenumber="31">
          <span class="hits">371</span>
          
          <code class="ruby">      @id || name.to_s.downcase.gsub(/(\s|-)+/, &#39;_&#39;).to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">    def id=(val)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="35">
          
          
          <code class="ruby">      @id = val.to_s.gsub(/(\s|-)+/, &#39;_&#39;).downcase.to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">    def data_rate(options = {})</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="39">
          <span class="hits">3</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">        absolute_number: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      # Convert the data rate to a number</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="43">
          <span class="hits">3</span>
          
          <code class="ruby">      if !!@data_rate &amp;&amp; !!@data_rate_unit</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="44">
          <span class="hits">2</span>
          
          <code class="ruby">        if options[:absolute_number]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">          # The data rate unit was validated on init so it is good to go</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">          # in theory but should still check if it returns a numeric</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">          value = @data_rate.send(@data_rate_unit.to_sym)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="48">
          <span class="hits">1</span>
          
          <code class="ruby">          if [Fixnum, Bignum, Float, Integer, Numeric].include? value.class</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">            return value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="51">
          
          
          <code class="ruby">            Origen.log.error &quot;@data_rate &#39;#{@data_rate}&#39; conversion using @data_rate_unit &#39;#{@data_rate_unit}&#39; did not product a Numeric, exiting...&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="54">
          <span class="hits">1</span>
          
          <code class="ruby">          return @data_rate</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="57">
          <span class="hits">1</span>
          
          <code class="ruby">        return @data_rate</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="61">
          <span class="hits">1</span>
          
          <code class="ruby">    def respond_to_missing?(method_name, _include_private = false)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="62">
          
          
          <code class="ruby">      method_name[-1] == &#39;?&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">    # Implements methods like:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">    #     if $dut.mode.rambist?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby">    def method_missing(method_name, *arguments)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="69">
          
          
          <code class="ruby">      if method_name[-1] == &#39;?&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="70">
          
          
          <code class="ruby">        id == method_name[0..-2].to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="72">
          
          
          <code class="ruby">        super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="76">
          <span class="hits">1</span>
          
          <code class="ruby">    def to_s</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="77">
          
          
          <code class="ruby">      id.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="80">
          <span class="hits">1</span>
          
          <code class="ruby">    def to_sym</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="81">
          
          
          <code class="ruby">      to_s.to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="84">
          <span class="hits">1</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="86">
          <span class="hits">1</span>
          
          <code class="ruby">    def validate_args</code>
        </li>
      
        <li class="covered" data-hits="175" data-linenumber="87">
          <span class="hits">175</span>
          
          <code class="ruby">      unless @data_rate_unit.nil? || @data_rate_unit =~ /n\/a/i || @data_rate_unit =~ /na/i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">        # Remove special chars</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="89">
          <span class="hits">3</span>
          
          <code class="ruby">        [&#39;/&#39;, &#39;-&#39;].each do |special_char|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="90">
          <span class="hits">6</span>
          
          <code class="ruby">          @data_rate_unit.gsub!(special_char, &#39;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">        # Check if @data_rate_unit is found in the Numeric core_ext lib</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="93">
          <span class="hits">3</span>
          
          <code class="ruby">        fail &quot;@data_rate_unit &#39;#{@data_rate_unit}&#39; is not an accepted unit&quot; unless 1.send(@data_rate_unit.to_sym)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">        # Cannot use @data_rate_unit without @data_rate</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="95">
          <span class="hits">3</span>
          
          <code class="ruby">        fail &#39;@data_rate_unit must be set with @data_rate, exiting...&#39; if @data_rate.nil?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="175" data-linenumber="97">
          <span class="hits">175</span>
          
          <code class="ruby">      unless @data_rate.nil? || @data_rate =~ /n\/a/i || @data_rate =~ /na/i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">        # Check if the data rate was passed as a String, if so convert it to a number</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="99">
          <span class="hits">6</span>
          
          <code class="ruby">        if @data_rate.is_a? String</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="100">
          <span class="hits">3</span>
          
          <code class="ruby">          if @data_rate.numeric?</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="101">
          <span class="hits">3</span>
          
          <code class="ruby">            @data_rate = @data_rate.to_numeric</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="103">
          
          
          <code class="ruby">            fail &quot;@data_rate &#39;#{@data_rate}&#39; cannot be converted to a number, exiting...&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="175" data-linenumber="107">
          <span class="hits">175</span>
          
          <code class="ruby">      unless @typical_voltage.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="108">
          
          
          <code class="ruby">        if @typical_voltage.is_a? String</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="109">
          
          
          <code class="ruby">          if @typical_voltage.numeric?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="110">
          
          
          <code class="ruby">            @typical_voltage = @typical_voltage.to_numeric</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="112">
          
          
          <code class="ruby">            fail &quot;@typical_voltage &#39;#{@typical_voltage}&#39; cannot be converted to a number, exiting...&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="831dc94d9eeb385503f99da3f0ecf3b03fad2d81">
  <div class="header">
    <h3>lib/origen/chip_package.rb</h3>
    <h4><span class="red">23.63 %</span> covered</h4>
    <div>
      <b>237</b> relevant lines. 
      <span class="green"><b>56</b> lines covered</span> and
      <span class="red"><b>181</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">  # Represents an SoC Package option</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">  class ChipPackage</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    require &#39;colored&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :description</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :number_of_rows</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :number_of_columns</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :interconnects</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :types</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :upper_axes</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :lower_axes</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :rows</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :columns</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :field</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :obj</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :groups</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :group_list</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :last_empty_char</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :plottable</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_writer :name</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_writer :full_name, :name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">    # Returns the owner that $owns the mode (the SoC instance usually)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">    def name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="26">
          
          
          <code class="ruby">      @name || @id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :full_name, :name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">    def id</code>
        </li>
      
        <li class="covered" data-hits="315" data-linenumber="31">
          <span class="hits">315</span>
          
          <code class="ruby">      @id || name.to_s.downcase.gsub(/(\s|-)+/, &#39;_&#39;).to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">    def id=(val)</code>
        </li>
      
        <li class="covered" data-hits="78" data-linenumber="35">
          <span class="hits">78</span>
          
          <code class="ruby">      @id = val.to_s.gsub(/(\s|-)+/, &#39;_&#39;).downcase.to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">    def to_s</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="39">
          
          
          <code class="ruby">      id.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="42">
          <span class="hits">1</span>
          
          <code class="ruby">    def to_sym</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="43">
          
          
          <code class="ruby">      to_s.to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="46">
          <span class="hits">1</span>
          
          <code class="ruby">    def types</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="47">
          
          
          <code class="ruby">      @types || []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">    #  prepare_plot should not need to be called explicitly. It is called</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">    #  by other methods when need-be, and is fundamentallyis responsible</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">    #  for two things:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">    #    1. It checks that self.types includes a &quot;BGA&quot; option.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">    #    2. It populates the .field attribute with a multi-dimensional</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">    #       array, proportional in size to the package BGA.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">    def prepare_plot</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="59">
          
          
          <code class="ruby">      @plottable = types.any? { |x| /BGA/i =~ x }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="60">
          
          
          <code class="ruby">      if  @plottable</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="61">
          
          
          <code class="ruby">        @last_empty_char = &#39;.&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="62">
          
          
          <code class="ruby">        @field = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="63">
          
          
          <code class="ruby">        @groups = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="64">
          
          
          <code class="ruby">        @group_list = list_groups</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="65">
          
          
          <code class="ruby">        @columns = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="66">
          
          
          <code class="ruby">        jedec_rows = %w(A B C D E F G H J K L M N P R T U V W Y AA AB AC AD AE AF AG AH AJ AK AL AM AN AP AR AT AU AV AW AY BA BB BC BD BE BF BG BH BJ BK BL BM BN BP)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="67">
          
          
          <code class="ruby">        @number_of_rows.times { @field.insert(0, []); @number_of_columns.times { @field[0].insert(0, []) } }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="68">
          
          
          <code class="ruby">        @rows = jedec_rows[0, @number_of_rows]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="69">
          
          
          <code class="ruby">        (1..@number_of_columns).map { |item| @columns &lt;&lt; item }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="70">
          
          
          <code class="ruby">        @upper_axes = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="71">
          
          
          <code class="ruby">        @lower_axes = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="72">
          
          
          <code class="ruby">        @columns.each_with_index do|column, index|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">          # if index % 2 == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="74">
          
          
          <code class="ruby">          if index.even?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="75">
          
          
          <code class="ruby">            temp = column.to_s</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="76">
          
          
          <code class="ruby">            temp += &#39; &#39; unless temp.size &gt; 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="77">
          
          
          <code class="ruby">            @upper_axes &lt;&lt; temp</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="78">
          
          
          <code class="ruby">            @lower_axes &lt;&lt; &#39;  &#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="80">
          
          
          <code class="ruby">            temp = column.to_s</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="81">
          
          
          <code class="ruby">            temp += &#39; &#39; unless temp.size &gt; 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="82">
          
          
          <code class="ruby">            @lower_axes &lt;&lt; temp</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="83">
          
          
          <code class="ruby">            @upper_axes &lt;&lt; &#39;  &#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="87">
          
          
          <code class="ruby">        puts &#39;Sorry, currently the plot feature only supports BGA package types.&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">    #  generate_field should not need to be called explicitly. It is called</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">    #  by other methods when need-be, and is fundamentallyis responsible</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">    #  for two things:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">    #    1. It fills the .field array with the appropriate symbols/markers.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">    #    2. It concatenates the array elements into printable rows, and prints</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">    #       them.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="99">
          <span class="hits">1</span>
          
          <code class="ruby">    def generate_field(emptyChar = @last_empty_char)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="100">
          
          
          <code class="ruby">      if plottable</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="101">
          
          
          <code class="ruby">        new_field = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="102">
          
          
          <code class="ruby">        @field.each do |rows|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="103">
          
          
          <code class="ruby">          rows.each do |items|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="104">
          
          
          <code class="ruby">            if items.length == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="105">
          
          
          <code class="ruby">              items.insert(0, &quot;#{emptyChar} &quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">            elsif emptyChar != @last_empty_char &amp;&amp; items == [&quot;#{last_empty_char} &quot;]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="107">
          
          
          <code class="ruby">              items[0] = &quot;#{emptyChar} &quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="110">
          
          
          <code class="ruby">          new_field.insert(-1, rows.join(&#39;&#39;))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="112">
          
          
          <code class="ruby">        @last_empty_char = emptyChar</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="113">
          
          
          <code class="ruby">        package = (owner.package.nil?) ? &#39;No package chosen.&#39; : owner.package.to_s</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="114">
          
          
          <code class="ruby">        puts &quot;\nPin field: #{package}\n\n&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="115">
          
          
          <code class="ruby">        group_display = @groups.join(&quot;\n&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="116">
          
          
          <code class="ruby">        puts &quot;Legend: \n#{group_display}\n\n&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="117">
          
          
          <code class="ruby">        puts @upper_axes.join(&#39;&#39;).yellow</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="118">
          
          
          <code class="ruby">        new_field.each_with_index { |line, index| puts line + &quot;#{@rows[index]} (#{index + 1})\n&quot;.chop.yellow }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="119">
          
          
          <code class="ruby">        puts @lower_axes.join(&#39;&#39;).yellow, &quot;\n&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="122">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :show, :generate_field</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="124">
          <span class="hits">1</span>
          
          <code class="ruby">    def add_power(marker = &#39;P&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">      # add_power can be called explicitly or by the .plot(&quot;power&quot;) method call.</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="126">
          
          
          <code class="ruby">      prepare_plot if field.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="127">
          
          
          <code class="ruby">      if plottable</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="128">
          
          
          <code class="ruby">        pin_list = owner.power_pins.map { |_ken, pin| pin }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="129">
          
          
          <code class="ruby">        @groups &lt;&lt; &quot;#{marker} - Power&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="130">
          
          
          <code class="ruby">        pin_list.each do |item|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">          # puts items,owner.pins[items].location</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="132">
          
          
          <code class="ruby">          begin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="133">
          
          
          <code class="ruby">            coordinates = coordinate(item.location)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="134">
          
          
          <code class="ruby">            @field[coordinates[0]][coordinates[1]] = [marker.red + &#39; &#39;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">          rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="136">
          
          
          <code class="ruby">            puts &quot;#{item} doesn&#39;t appear to have a physical location in this configuration.&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="137">
          
          
          <code class="ruby">            puts &quot;Current package = #{owner.package}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="140">
          
          
          <code class="ruby">        generate_field</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="143">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :add_powers, :add_power</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="144">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :plot_power, :add_power</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="145">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :plot_powers, :add_power</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="147">
          <span class="hits">1</span>
          
          <code class="ruby">    def add_grounds(marker = &#39;G&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">      # add_grounds can be called explicitly, or by the .plot(&quot;grounds&quot;) method call.</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="149">
          
          
          <code class="ruby">      prepare_plot if field.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="150">
          
          
          <code class="ruby">      if plottable</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="151">
          
          
          <code class="ruby">        pin_list = owner.ground_pins.map { |_ken, pin| pin }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="152">
          
          
          <code class="ruby">        @groups &lt;&lt; &quot;#{marker} - Ground&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="153">
          
          
          <code class="ruby">        pin_list.each do |item|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="154">
          
          
          <code class="ruby">          begin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="155">
          
          
          <code class="ruby">            coordinates = coordinate(item.location)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="156">
          
          
          <code class="ruby">            @field[coordinates[0]][coordinates[1]] = [marker.green + &#39; &#39;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby">          rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="158">
          
          
          <code class="ruby">            puts &quot;#{item} doesn&#39;t appear to have a physical location in this configuration.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="161">
          
          
          <code class="ruby">        generate_field</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="164">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :add_ground, :add_grounds</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="165">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :plot_ground, :add_grounds</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="166">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :plot_grounds, :add_grounds</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="168">
          <span class="hits">1</span>
          
          <code class="ruby">    def clear</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">      # clear removes all elements from the .field and .groups attributes.</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="170">
          
          
          <code class="ruby">      prepare_plot if field.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="171">
          
          
          <code class="ruby">      if plottable</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="172">
          
          
          <code class="ruby">        @groups = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="173">
          
          
          <code class="ruby">        @field = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="174">
          
          
          <code class="ruby">        @number_of_rows.times { @field.insert(0, []); @number_of_columns.times { @field[0].insert(0, []) } }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="178">
          <span class="hits">1</span>
          
          <code class="ruby">    def plot_help</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="179">
          
          
          <code class="ruby">      prepare_plot if field.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="180">
          
          
          <code class="ruby">      puts &quot;\n#################### PLOT HELP ####################&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="181">
          
          
          <code class="ruby">      puts &#39;To generate in-console BGA plots, the ChipPackage class will respond to the following methods:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="182">
          
          
          <code class="ruby">      puts &#39;.list_groups, .plot(), .plot_coord(), .show(), and .clear&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="183">
          
          
          <code class="ruby">      if plottable</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="184">
          
          
          <code class="ruby">        puts &quot;\nPLOTTING GROUPS:&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="185">
          
          
          <code class="ruby">        puts &#39;$dut.package.list_groups &lt;-- to see available group names&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="186">
          
          
          <code class="ruby">        puts &quot;$dut.package.plot(\&quot;ddr_interface_1\&quot;)&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="187">
          
          
          <code class="ruby">        puts &quot;$dut.package.plot_group(\&quot;serdes_1\&quot;,&#39;Z&#39;) &lt;--denotes custom legend marker, Z&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="188">
          
          
          <code class="ruby">        puts &quot;\nPLOTTING INDIVIDUAL PINS:&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="189">
          
          
          <code class="ruby">        puts &quot;$dut.package.plot(\&quot;d1_mdqs00\&quot;)&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="190">
          
          
          <code class="ruby">        puts &quot;\nPLOTTING WITH REGEXP:&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="191">
          
          
          <code class="ruby">        puts &quot;$dut.package.plot(\&quot;d1_mdqs\&quot;) &lt;-- Plot all controller 1 DQS pins.&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="192">
          
          
          <code class="ruby">        puts &quot;$dut.package.plot(\&quot;d1_mdqs0[0-9]\&quot;) &lt;-- Plot d1_mdqs00 - d1_mdqs09.&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="193">
          
          
          <code class="ruby">        puts &quot;\nADDING POWER/GROUND:&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="194">
          
          
          <code class="ruby">        puts &quot;$dut.package.plot(\&quot;grounds\&quot;)&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="195">
          
          
          <code class="ruby">        puts &quot;$dut.package.plot(\&quot;power\&quot;)&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="196">
          
          
          <code class="ruby">        puts &quot;\nVIEW CURRENT PLOT\n&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="197">
          
          
          <code class="ruby">        puts &#39;$dut.package.show&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="199">
          
          
          <code class="ruby">        puts &#39;Currently, only BGA package types are supported for in-console plotting.&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="202">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :help_plot, :plot_help</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="204">
          <span class="hits">1</span>
          
          <code class="ruby">    def list_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby">      # returns an array of group names assigned to the package</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="206">
          
          
          <code class="ruby">      grps = owner.pins.map { |_key, val| val.group }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="207">
          
          
          <code class="ruby">      grps.uniq!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="208">
          
          
          <code class="ruby">    rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="209">
          
          
          <code class="ruby">      return []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="211">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :group_list, :list_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="213">
          <span class="hits">1</span>
          
          <code class="ruby">    def group_array(grp)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby">      # returns an array of pins belonging to the given group</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="215">
          
          
          <code class="ruby">      pin_list = $dut.pins.map { |_key, val| val if val.group == grp }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="216">
          
          
          <code class="ruby">      pin_list[0].compact!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="217">
          
          
          <code class="ruby">      puts &#39;No pins found under that group name.&#39; unless pin_list.any?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby">    rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="219">
          
          
          <code class="ruby">      return []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">    # ##############################################################</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby">    # ############# String/Coordinate Manipulation #################</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">    # ##############################################################</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="226">
          <span class="hits">1</span>
          
          <code class="ruby">    def coordinate(location)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">      ## Returns array of numerical equiv coordinates (e.g. &quot;AA11&quot; -&gt; [20,11])</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="228">
          
          
          <code class="ruby">      error = &quot;\n\nSomething wrong during coordinate-mapping.\nAre you sure you passed an alphanumeric string\n to the coordinate() method?\n&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="229">
          
          
          <code class="ruby">      split_index = -1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="230">
          
          
          <code class="ruby">      location.each_char do |character|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="231">
          
          
          <code class="ruby">        if letter?(character)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="232">
          
          
          <code class="ruby">          split_index += 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="233">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="235">
          
          
          <code class="ruby">      row = location[0..split_index]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="236">
          
          
          <code class="ruby">      column = location[split_index + 1..-1]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="237">
          
          
          <code class="ruby">      fail ArgumentError, error unless row.length &gt; 0 &amp;&amp; column.length &gt; 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby">      ## Now convert alphanumeric row to jedec equiv&#39; with to_row() method</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="239">
          
          
          <code class="ruby">      # and return coordinates.</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="240">
          
          
          <code class="ruby">      coordinates = [to_row(row), column.to_i - 1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="243">
          <span class="hits">1</span>
          
          <code class="ruby">    def to_row(alphanumeric_coord)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">      ## This maps alpha row coordinate to its appropriate Jedec:</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="245">
          
          
          <code class="ruby">      number = alphanumeric_coord.upcase.tr(&#39;A-HJ-NPRT-WY&#39;, &#39;1-9a-q&#39;).to_i(21) - 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="246">
          
          
          <code class="ruby">      number -= (number / 21)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="248">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="249">
          <span class="hits">1</span>
          
          <code class="ruby">    def letter?(test_character)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby">      ## Returns nil if the &#39;test_character&#39; isn&#39;t a letter.</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="251">
          
          
          <code class="ruby">      test_character =~ /[[:alpha:]]/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="254">
          <span class="hits">1</span>
          
          <code class="ruby">    def initial(test_string)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="255">
          
          
          <code class="ruby">      test_string[0, 1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="257">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby">    #  .plot can be called explicitly and accepts string arguments with</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby">    #  or without regex styling. For example:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby">    #    $dut.package = :t4240</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="262">
          
          
          <code class="ruby">    #    $dut.package.plot(&quot;ddr_interface&quot;) # plots all &quot;ddr interface&quot; groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby">    #    $dut.package.plot(&quot;grounds&quot;) # adds ground pins to the previously instantiated plot</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">    #    $dut.package.plot(&quot;d1_mdq37&quot;,&quot;$&quot;) # plots controller 1 mdq 37, and uses $ as a legend marker</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby">    #    $dut.package.plot(&quot;d2_mdq[3-6]0) # plots d2_mdq30, d2_mdq40, d2_md520, and d2_md620</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="266">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="267">
          <span class="hits">1</span>
          
          <code class="ruby">    def plot(pinName, marker = nil)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="268">
          
          
          <code class="ruby">      prepare_plot if field.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="269">
          
          
          <code class="ruby">      if plottable &amp;&amp; pinName.is_a?(String) &amp;&amp; /ground/ =~ pinName.downcase</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="270">
          
          
          <code class="ruby">        add_grounds(&#39;G&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="271">
          
          
          <code class="ruby">      elsif plottable &amp;&amp; pinName.is_a?(String) &amp;&amp; /power/ =~ pinName.downcase</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="272">
          
          
          <code class="ruby">        add_power(&#39;P&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="273">
          
          
          <code class="ruby">      elsif plottable &amp;&amp; pinName.is_a?(String)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="274">
          
          
          <code class="ruby">        found_pins = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="275">
          
          
          <code class="ruby">        owner.pins.map { |pin| found_pins &lt;&lt; pin[1] if /#{pinName}/ =~ pin[1].name.to_s || /#{pinName}/ =~ pin[1].group.to_s }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="276">
          
          
          <code class="ruby">        if found_pins.size == 1 &amp;&amp; marker.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="277">
          
          
          <code class="ruby">          marker = initial(pinName.to_s)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="278">
          
          
          <code class="ruby">          while @groups.index { |grpName| grpName =~ /#{marker} -/ }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="279">
          
          
          <code class="ruby">            marker.next!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="280">
          
          
          <code class="ruby">            marker = &#39;0&#39; unless marker.size &lt; 2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="282">
          
          
          <code class="ruby">          coordinates = coordinate(found_pins[0].location)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="283">
          
          
          <code class="ruby">          @field[coordinates[0]][coordinates[1]] = [marker.white_on_blue + &#39; &#39;]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="284">
          
          
          <code class="ruby">          @groups.delete_if { |group| /#{pinName.to_s}/ =~ group }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="285">
          
          
          <code class="ruby">          @groups &lt;&lt; &quot;#{marker} - #{found_pins[0].name} - #{found_pins[0].location}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="286">
          
          
          <code class="ruby">        elsif found_pins.size == 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="287">
          
          
          <code class="ruby">          coordinates = coordinate(found_pins[0].location)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="288">
          
          
          <code class="ruby">          @field[coordinates[0]][coordinates[1]] = [marker.white_on_blue + &#39; &#39;]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="289">
          
          
          <code class="ruby">          @groups.delete_if { |group| /#{pinName.to_s}/ =~ group }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="290">
          
          
          <code class="ruby">          @groups &lt;&lt; &quot;#{marker} - #{found_pins[0].name} - #{found_pins[0].location}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="291">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="292">
          
          
          <code class="ruby">          if marker.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="293">
          
          
          <code class="ruby">            marker = initial(pinName.to_s)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="294">
          
          
          <code class="ruby">            while @groups.index { |grpName| grpName =~ /#{marker} -/ }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="295">
          
          
          <code class="ruby">              marker.next!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="296">
          
          
          <code class="ruby">              marker = &#39;0&#39; unless marker.size &lt; 2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="297">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="299">
          
          
          <code class="ruby">          reg_state = quote_regex(pinName)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="300">
          
          
          <code class="ruby">          found_pins.each do |item|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="301">
          
          
          <code class="ruby">            begin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="302">
          
          
          <code class="ruby">              coordinates = coordinate(item.location)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="303">
          
          
          <code class="ruby">              @field[coordinates[0]][coordinates[1]] = [marker + &#39; &#39;]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="304">
          
          
          <code class="ruby">              @groups.delete_if { |group| &quot;#{marker} - \&quot;#{reg_state}\&quot;&quot; == group }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="305">
          
          
          <code class="ruby">              @groups &lt;&lt; &quot;#{marker} - \&quot;#{pinName}\&quot;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="306">
          
          
          <code class="ruby">            rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="307">
          
          
          <code class="ruby">              raise &quot;\n#{item} doesn&#39;t appear to have a physical location in this configuration.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="308">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="309">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="311">
          
          
          <code class="ruby">        generate_field</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="313">
          
          
          <code class="ruby">        puts &#39;Unsupported argument type.&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="314">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="315">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="316">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="317">
          
          
          <code class="ruby">    #  .plot_coord can be called explicitly and accepts string arguments in the form</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="318">
          
          
          <code class="ruby">    #  of jedec standard BGA coordinate naming conventions.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="320">
          
          
          <code class="ruby">    #    $dut.package = :t4240</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="321">
          
          
          <code class="ruby">    #    $dut.package.plot_coord(&quot;A2&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="322">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="323">
          <span class="hits">1</span>
          
          <code class="ruby">    def plot_coord(coord, marker = nil)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="324">
          
          
          <code class="ruby">      prepare_plot if field.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="325">
          
          
          <code class="ruby">      if plottable</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="326">
          
          
          <code class="ruby">        if coord.is_a?(String)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="327">
          
          
          <code class="ruby">          found_pins = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="328">
          
          
          <code class="ruby">          owner.pins.map { |pin| found_pins &lt;&lt; pin[1] if coord == pin[1].location.to_s }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="329">
          
          
          <code class="ruby">          if marker.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="330">
          
          
          <code class="ruby">            marker = initial(coord.to_s)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="331">
          
          
          <code class="ruby">            while @groups.index { |grpName| grpName =~ /#{marker} -/ }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="332">
          
          
          <code class="ruby">              marker.next!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="333">
          
          
          <code class="ruby">              marker = &#39;0&#39; unless marker.size &lt; 2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="335">
          
          
          <code class="ruby">            found_pins.each do |pin|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="336">
          
          
          <code class="ruby">              coordinates = coordinate(pin.location)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="337">
          
          
          <code class="ruby">              @field[coordinates[0]][coordinates[1]] = [marker.white_on_blue + &#39; &#39;]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="338">
          
          
          <code class="ruby">              @groups.delete_if { |group| /#{coord.to_s}/ =~ group }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="339">
          
          
          <code class="ruby">              @groups &lt;&lt; &quot;#{marker} - #{found_pins[0].name} - #{found_pins[0].location}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="340">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="341">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="342">
          
          
          <code class="ruby">            coordinates = coordinate(found_pins[0].location)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="343">
          
          
          <code class="ruby">            @field[coordinates[0]][coordinates[1]] = [marker.white_on_blue + &#39; &#39;]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="344">
          
          
          <code class="ruby">            @groups.delete_if { |group| /#{coord.to_s}/ =~ group }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="345">
          
          
          <code class="ruby">            @groups &lt;&lt; &quot;#{marker} - #{found_pins[0].name} - #{found_pins[0].location}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="346">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="347">
          
          
          <code class="ruby">          if found_pins.size &gt; 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="348">
          
          
          <code class="ruby">            generate_field</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="349">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="350">
          
          
          <code class="ruby">            puts &quot;Coordinate not recognized. Jedec convention: &lt;row&gt;&lt;col&gt;. E.g., A1.\nCould be power/ground pin. .plot(\&quot;power\&quot;) or .plot(\&quot;ground\&quot;).&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="351">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="352">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="353">
          
          
          <code class="ruby">          puts &#39;Unsupported argument type.&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="354">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="355">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="356">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="357">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :plot_coordinate, :plot_coord</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="358">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="359">
          <span class="hits">1</span>
          
          <code class="ruby">    def quote_regex(regex_statement)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="360">
          
          
          <code class="ruby">      with_escapes = regex_statement</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="361">
          
          
          <code class="ruby">      with_escapes.gsub!(&#39;[&#39;, &#39;\[&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="362">
          
          
          <code class="ruby">      with_escapes.gsub!(&#39;]&#39;, &#39;\]&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="363">
          
          
          <code class="ruby">      with_escapes.gsub!(&#39;^&#39;, &#39;\^&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="364">
          
          
          <code class="ruby">      with_escapes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="365">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="366">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="367">
          <span class="hits">1</span>
          
          <code class="ruby">    def plot_ceo</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="368">
          
          
          <code class="ruby">      scramble = [&#39;         +....~~~~~:,,..::~~:,......,:~==~,,....,:~==~~::,:~~,.,               &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="369">
          
          
          <code class="ruby">                  &#39;            ...++~:,,:~~~~~======~::::,,,,::=======~~::,,                      &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="370">
          
          
          <code class="ruby">                  &#39;.................????????+,,,,::::::,,,.,,..,,,,:::????......................:+&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="371">
          
          
          <code class="ruby">                  &#39;           ,.,:~~~~~:,~~~~:~:~~=~:~~~==++====::~~~===~~=~~==:,,                &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="372">
          
          
          <code class="ruby">                  &#39;         ,....~++?:::,,::::~~~=======+============~~~:,~                       &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="373">
          
          
          <code class="ruby">                  &#39;           ....+++,:,,::::~~~==========~===========~:,:,~                      &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="374">
          
          
          <code class="ruby">                  &#39;           ,........~~~~~~============================~........:               &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="375">
          
          
          <code class="ruby">                  &#39;        ......,~~~~~~~===~++==+=+++++++++++++++++====~===~~~.....~             &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="376">
          
          
          <code class="ruby">                  &#39;                ,,,::::::~~~~:,,:::,,,,:,,,,......:~~:~::,,:                   &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="377">
          
          
          <code class="ruby">                  &#39;        .....,::~~~~=============+++++++++++++++++=======~~~:.....             &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="378">
          
          
          <code class="ruby">                  &#39;               +.,::::::~~~=~=~~~~~~~====~~~~~:::~~==~~::::,                   &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby">                  &#39;          .......:~~~~=~=======++++++++++++++++++======~~........              &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="380">
          
          
          <code class="ruby">                  &#39;           +:,,::~===+++++====+====~~~=====~====+++++++++=~~,~+                &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="381">
          
          
          <code class="ruby">                  &#39;.....................,===+???????    ,..........????????=:,....................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="382">
          
          
          <code class="ruby">                  &#39;...................=????????++++:,::::::::::::::???????~.......................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="383">
          
          
          <code class="ruby">                  &#39;......................+++++??????   .............=??????+:,....................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="384">
          
          
          <code class="ruby">                  &#39;                     =~:,::~~++=~=::,,,,,,,,,:                                 &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="385">
          
          
          <code class="ruby">                  &#39;              +.........,,,,,,...,,,:,,,........,,,........,?                  &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="386">
          
          
          <code class="ruby">                  &#39;         :....::~~~=========+++++++++++++++++++++++=======~~:....              &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="387">
          
          
          <code class="ruby">                  &#39;...................,+???????????? ?::,:,,,,,,::????????=,......................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="388">
          
          
          <code class="ruby">                  &#39;..................~???????++++,::,::::::~~:::::::+?????:.......................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="389">
          
          
          <code class="ruby">                  &#39;        :......:~~~~~~~=====+++++++++++++++++++++=+=====~~~......=             &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="390">
          
          
          <code class="ruby">                  &#39;             ::,::::~~===++===:.,~~~~~~===~~~~~,,:======~~::,                  &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="391">
          
          
          <code class="ruby">                  &#39;               ,,,::::~~~~~~~~~=~~===~~~~===~=====~~~~~~:::,~                  &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="392">
          
          
          <code class="ruby">                  &#39;....................::~+???????         =~+     ?????+?+=,.....................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="393">
          
          
          <code class="ruby">                  &#39;          :,.,~~~~~,:~~~......~,,..:~=+++=~:,..:,.......:~~=~:,~               &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="394">
          
          
          <code class="ruby">                  &#39;            :........:~~~~~~~~~===============~~~====:,.......                 &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="395">
          
          
          <code class="ruby">                  &#39;            ::,::~~===+++++++++==~~~~=======~~====+++++==~~:::                 &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="396">
          
          
          <code class="ruby">                  &#39;         ....,:~~~~~========++++++++++++++++++++++=+=====~~~:....              &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="397">
          
          
          <code class="ruby">                  &#39;         ,......,~~~~~~~=======+++++++++++++++++++=====~~~.......              &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="398">
          
          
          <code class="ruby">                  &#39;      ,........+???~:::,,,,,:~~~~==============~~~~:,,?...?                    &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="399">
          
          
          <code class="ruby">                  &#39;          ...,~~~~~,.,~=====~:,.,.,:~==+==:,,,,.,,.,,~==~::=~,,~               &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="400">
          
          
          <code class="ruby">                  &#39;             ,........,:::::,:::::~~~~~~~:::,,,,,,~::.......,=                 &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="401">
          
          
          <code class="ruby">                  &#39;             ::,::~:~~======~:.,~::,,,,,,,,,,,~=.,:~===~~~::,                  &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="402">
          
          
          <code class="ruby">                  &#39;.........................???++?????====.........?????~,??+::,..................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="403">
          
          
          <code class="ruby">                  &#39;        ......:~:~~~=~=========+=++++++++++++++++=======~~~~:.....             &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="404">
          
          
          <code class="ruby">                  &#39;                   ,...,..,.,,.,,,,,,.:::,.,,........?                         &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="405">
          
          
          <code class="ruby">                  &#39;.......................?++???      ...............??????+::....................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="406">
          
          
          <code class="ruby">                  &#39;...........................?+?????   ??~....,...+?????????=::..................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="407">
          
          
          <code class="ruby">                  &#39;        ......:~:~~~~~====~======~==++===+++++===========~~~.....~             &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="408">
          
          
          <code class="ruby">                  &#39;..........................+????? ?????+=........??????????~::..................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="409">
          
          
          <code class="ruby">                  &#39;          ....::~~~====+++++=======++++++++++==============~:...~              &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="410">
          
          
          <code class="ruby">                  &#39;..........................?+?????? ?++=,........????????~+:::..................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="411">
          
          
          <code class="ruby">                  &#39;         .......:~~~~~~======+++++++++++++++++++++=====~~~:......              &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="412">
          
          
          <code class="ruby">                  &#39;.......................~??????   :.......,.........??????~:,...................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="413">
          
          
          <code class="ruby">                  &#39;               ,,:::::~~=~~~:,~=~~~~~~:~~~~~~~====:~~=~~:::::                  &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="414">
          
          
          <code class="ruby">                  &#39;              ~,,:::::~=====:..~~~,.,:,,.,,,.~==~,:~===~~::,:=                 &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="415">
          
          
          <code class="ruby">                  &#39;                    :,....::::,:,,,,,,,.,,,,,,..,:=                            &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="416">
          
          
          <code class="ruby">                  &#39; ..............+?????=,,,,::,,,::~:~~~~~~~~~:::::,,::??..........~             &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="417">
          
          
          <code class="ruby">                  &#39;           ,,.:~~====~~~==~=~~~=====~~==+======~~~~~~===~===:,:                &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="418">
          
          
          <code class="ruby">                  &#39;          ........~~~~~======+++++++++++++++++++=======~~.......               &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="419">
          
          
          <code class="ruby">                  &#39;          ....::~~~~===============================~~~:~===~:...               &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="420">
          
          
          <code class="ruby">                  &#39;               ,...........,...................,..........:                    &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="421">
          
          
          <code class="ruby">                  &#39;         +....:~~~~~~~,,..,,,,,.,:~~~~~===~~~~:,.,,,,,,,:~~~~..,               &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="422">
          
          
          <code class="ruby">                  &#39;        .......~~~~~~~~=~==+==+++++++++++++=++++++==~====~~,.....:             &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="423">
          
          
          <code class="ruby">                  &#39;.................~???????+++,,,:,::::::,,,,,:,:::,?????........................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="424">
          
          
          <code class="ruby">                  &#39;           ~,.,:~==================~~~==+==~=========++++==~:::                &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="425">
          
          
          <code class="ruby">                  &#39;                 ,....,,,,,......,,,.,..:,:,..........:~                       &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="426">
          
          
          <code class="ruby">                  &#39;........................??????  ++=.,,:.........++=:?????=::...................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="427">
          
          
          <code class="ruby">                  &#39;        .......+++?:~:,,,,::~~~==================~~~:,,.?                      &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="428">
          
          
          <code class="ruby">                  &#39;...................,:+?????????????? =:~:::::~ ???????++:......................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="429">
          
          
          <code class="ruby">                  &#39;        :....,::~~~~==~====+=+++++++++==+++++++++========~~~:....:             &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="430">
          
          
          <code class="ruby">                  &#39;.....................~~~+??????        ~:....:  ????????=:.....................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="431">
          
          
          <code class="ruby">                  &#39;....................::+?????????????????::,.  ????????++~......................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="432">
          
          
          <code class="ruby">                  &#39;                ,...,,:,.,................,,::..........,=                     &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="433">
          
          
          <code class="ruby">                  &#39;            ~::,:~~~====+++++==~:~~~~==++===~=::~==++++==:::,:                 &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="434">
          
          
          <code class="ruby">                  &#39;          ~,.,~~~~~~~,..:~...~=~::,~~=++++=~~::~~~~~~:,,,~==~:,                &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="435">
          
          
          <code class="ruby">                  &#39;........................~??????=+?+~:~~.........???..????=::...................&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="436">
          
          
          <code class="ruby">                  &#39;    ,..........+????:::,::,,,:~~~~~~==~~~~~~~~~~~~,.:=?......:                 &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="437">
          
          
          <code class="ruby">                  &#39;................=???????~,,,::,:,:,,,.......,,,,,,:~???..................=     &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="438">
          
          
          <code class="ruby">                  &#39;               ,,::::::~~~~~~~~~~=====~~~~=====~~~~=~~~::::,                   &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="439">
          
          
          <code class="ruby">                  &#39;           ........~~~~~========+++++++==++++=========~~........               &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="440">
          
          
          <code class="ruby">                  &#39;             :..+,,,:~~~~~======~~~==~===~~~~======~~~:::,                     &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="441">
          
          
          <code class="ruby">                  &#39;               ~.,,::~:~~~~~~~~~~~~~~~=======~=====~~~~::,:                    &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="442">
          
          
          <code class="ruby">                  &#39; ..............:??????+,,,,:,,,,:,,,,,,,,....,..,,::~??..............,         &#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="443">
          
          
          <code class="ruby">                  &#39;                 .,:~~:~:::::.....,:~=====~:::~~~:,::~~::,,                    &#39;]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="444">
          
          
          <code class="ruby">      pw = [16, 47, 75, 168, 53, 36, 57, 116, 94, 21, 64, 52, 13, 95, 1, 17, 32, 38, 4, 142,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="445">
          
          
          <code class="ruby">            26, 6, 89, 134, 44, 71, 50, 40, 170, 149, 11, 29, 167, 27, 120, 43, 21, 107, 72, 14, 54,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="446">
          
          
          <code class="ruby">            7, 3, 58, 55, 39, 35, 47, 113, 5, 9, 61, 162, 123, 39, 28, 18, 36, 35, 91, 41, 51, 160,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="447">
          
          
          <code class="ruby">            128, 54, 53, 0, 138, 165, 125, 31, 25, 19, 155, 25, 66, 3, 15, 49, 96, 49, 56, 158, 100,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="448">
          
          
          <code class="ruby">            147, 12, 27, 101, 56, 12, 65, 22, 124, 106, 11, 33, 46, 26, 103, 7, 45, 23, 46, 97, 9,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="449">
          
          
          <code class="ruby">            70, 10, 109, 119, 22, 8, 75, 151, 65, 52, 73, 72, 99, 30, 17, 1, 5, 90, 76, 81, 4, 59,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="450">
          
          
          <code class="ruby">            50, 82, 84, 30, 68, 102, 148, 80, 48, 74, 129, 137, 132, 69, 2, 140, 34, 144, 55, 20,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="451">
          
          
          <code class="ruby">            150, 24, 143, 14, 19, 86, 8, 67, 60, 63, 2, 62, 146, 24, 62, 0, 104, 68, 13, 15, 173, 79,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="452">
          
          
          <code class="ruby">            63, 37, 44, 93, 85, 60, 58, 67]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="453">
          
          
          <code class="ruby">      y = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="454">
          
          
          <code class="ruby">      (0..71).each { |n| y &lt;&lt; n + n / 2 * 3 }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="455">
          
          
          <code class="ruby">      y.each do |z|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="456">
          
          
          <code class="ruby">        puts scramble[pw[z]]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="457">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="458">
          
          
          <code class="ruby">      &#39;Oh, hello!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="459">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="460">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="461">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="553f1e7e167c50fb39fe95d9526543610ac9af97">
  <div class="header">
    <h3>lib/origen/commands/compile.rb</h3>
    <h4><span class="green">96.77 %</span> covered</h4>
    <div>
      <b>31</b> relevant lines. 
      <span class="green"><b>30</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;optparse&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">options = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"># App options are options that the application can supply to extend this command</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">app_options = @application_options || []</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">opt_parser = OptionParser.new do |opts|</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.banner = &lt;&lt;-EOT</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">Compile an ERB template file, list of files or a directory.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">If a directory is referenced the entire sub-directory structure will be copied to the output directory, compiling any ERB</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">templates it finds in the process and copying any standard files accross without modification.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">ERB is a templating system from Ruby that allows you to embed snippets of Ruby code in any ASCII file to create dynamic</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">content. Within the context of the origen generator this means that you can include Ruby snippets that reference the target</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">objects to create dynamic test program sheets, C files, VB files, documentation, etc.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">To create an ERB template start with a base ASCII file and append .erb to the end of the file name, upon compilation the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">.erb extension will be removed.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">There is not much to the syntax, this snippet covers just about everything you need to know:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">   %       - A full line of Ruby is prefixed with %, this is removed by compilation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">   %#      - A full line Ruby comment, this is removed by compilation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">   &lt;%#  %&gt; - An embedded Ruby comment, this is removed by compilation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">   &lt;%   %&gt; - An embedded Ruby snippet, this is removed by compilation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">   &lt;%=  %&gt; - An embedded Ruby snippet that generates content, the result is output to the compiled file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">Full details of ERB syntax can be found here:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">   http://www.ruby-doc.org/stdlib/libdoc/erb/rdoc/classes/ERB.html</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">Usage: origen compile [space separated files, lists or directories] [options]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">  EOT</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-e&#39;, &#39;--environment NAME&#39;, String, &#39;Override the default environment, NAME can be a full path or a fragment of an environment file name&#39;) { |e| options[:environment] = e }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="33">
          <span class="hits">2</span>
          
          <code class="ruby">  opts.on(&#39;-t&#39;, &#39;--target NAME&#39;, String, &#39;Override the default target, NAME can be a full path or a fragment of a target file name&#39;) { |t| options[:target] = t }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="34">
          <span class="hits">2</span>
          
          <code class="ruby">  opts.on(&#39;-pl&#39;, &#39;--plugin PLUGIN_NAME&#39;, String, &#39;Set current plugin&#39;) { |pl_n|  options[:current_plugin] = pl_n }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-l&#39;, &#39;--lsf [ACTION]&#39;, [:clear, :add], &quot;Submit jobs to the LSF, optionally specify whether to &#39;clear&#39; or &#39;add&#39; to existing jobs&quot;) { |a| options[:lsf] = true; options[:lsf_action] = a }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-w&#39;, &#39;--wait&#39;, &#39;Wait for LSF processing to complete&#39;) { options[:wait_for_lsf_completion] = true }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-c&#39;, &#39;--continue&#39;, &#39;Continue on error (to the next file)&#39;) { options[:continue] = true }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-d&#39;, &#39;--debugger&#39;, &#39;Enable the debugger&#39;) {  options[:debugger] = true }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-m&#39;, &#39;--mode MODE&#39;, Origen::Mode::MODES, &#39;Force the Origen operating mode:&#39;, &#39;  &#39; + Origen::Mode::MODES.join(&#39;, &#39;)) { |_m| }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="40">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-f&#39;, &#39;--file FILE&#39;, String, &#39;Override the default log file&#39;) { |o| options[:log_file] = o }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-o&#39;, &#39;--output DIR&#39;, String, &#39;Override the default output directory&#39;) { |o| options[:output] = o }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="42">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-n&#39;, &#39;--name NAME&#39;, String, &#39;Override the default output file name&#39;) { |o| options[:output_file_name] = o }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="43">
          <span class="hits">2</span>
          
          <code class="ruby">  opts.on(&#39;-r&#39;, &#39;--reference DIR&#39;, String, &#39;Override the default reference directory&#39;) { |o| options[:reference] = o }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-z&#39;, &#39;--zip&#39;, &#39;Gzip all output files (diff checking will be skipped)&#39;) { |o| options[:zip] = o }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="45">
          <span class="hits">1</span>
          
          <code class="ruby">  app_options.each do |app_option|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="46">
          
          
          <code class="ruby">    opts.on(*app_option) {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="48">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.separator &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-h&#39;, &#39;--help&#39;, &#39;Show this message&#39;) { puts opts; exit 0 }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="52">
          <span class="hits">1</span>
          
          <code class="ruby">opt_parser.parse! ARGV</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="53">
          <span class="hits">1</span>
          
          <code class="ruby">options[:patterns] = ARGV</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="54">
          <span class="hits">1</span>
          
          <code class="ruby">options[:compile] = true  # To let the generator know a compile job has been requested</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="56">
          <span class="hits">1</span>
          
          <code class="ruby">Origen.app.plugins.temporary = options[:current_plugin] if options[:current_plugin]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="57">
          <span class="hits">1</span>
          
          <code class="ruby">Origen.environment.temporary = options[:environment] if options[:environment]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">Origen.target.temporary = options[:target] if options[:target]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="59">
          <span class="hits">1</span>
          
          <code class="ruby">Origen.app.load_target!</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="60">
          <span class="hits">1</span>
          
          <code class="ruby">Origen.app.runner.generate(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="61">
          <span class="hits">1</span>
          
          <code class="ruby">Origen.lsf.wait_for_completion if options[:wait_for_lsf_completion]</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="a8f857ccf9756068479fd050ab66b19396607825">
  <div class="header">
    <h3>lib/origen/commands/generate.rb</h3>
    <h4><span class="yellow">88.64 %</span> covered</h4>
    <div>
      <b>44</b> relevant lines. 
      <span class="green"><b>39</b> lines covered</span> and
      <span class="red"><b>5</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;optparse&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">options = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"># App options are options that the application can supply to extend this command</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">app_options = @application_options || []</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">opt_parser = OptionParser.new do |opts|</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.banner = &#39;Usage: origen g [space separated patterns or lists] [options]&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-e&#39;, &#39;--environment NAME&#39;, String, &#39;Override the default environment, NAME can be a full path or a fragment of an environment file name&#39;) { |e| options[:environment] = e }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">  opts.on(&#39;-t&#39;, &#39;--target NAME&#39;, String, &#39;Override the default target, NAME can be a full path or a fragment of a target file name&#39;) { |t| options[:target] = t }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-l&#39;, &#39;--lsf [ACTION]&#39;, [:clear, :add], &quot;Submit jobs to the LSF, optionally specify whether to &#39;clear&#39; or &#39;add&#39; to existing jobs&quot;) { |a| options[:lsf] = true; options[:lsf_action] = a }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-w&#39;, &#39;--wait&#39;, &#39;Wait for LSF processing to complete&#39;) { options[:wait_for_lsf_completion] = true }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-c&#39;, &#39;--continue&#39;, &#39;Continue on error (to the next pattern)&#39;) { options[:continue] = true }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">  opts.on(&#39;-pl&#39;, &#39;--plugin PLUGIN_NAME&#39;, String, &#39;Set current plugin&#39;) { |pl_n|  options[:current_plugin] = pl_n }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-f&#39;, &#39;--file FILE&#39;, String, &#39;Override the default log file&#39;) { |o| options[:log_file] = o }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-o&#39;, &#39;--output DIR&#39;, String, &#39;Override the default output directory&#39;) { |o| options[:output] = o }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">  opts.on(&#39;-r&#39;, &#39;--reference DIR&#39;, String, &#39;Override the default reference directory&#39;) { |o| options[:reference] = o }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-q&#39;, &#39;--queue NAME&#39;, String, &#39;Specify the LSF queue, default is short&#39;) { |o| options[:queue] = o }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-p&#39;, &#39;--project NAME&#39;, String, &#39;Specify the LSF project, default is msg.te&#39;) { |o| options[:project] = o }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;--doc&#39;, &#39;Generate into doc format&#39;) { options[:doc] = true }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;--html&#39;, &#39;Generate into html format&#39;) { options[:html] = true }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;--nocom&#39;, &#39;No comments in the generated pattern&#39;) { options[:no_comments] = true }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-d&#39;, &#39;--debugger&#39;, &#39;Enable the debugger&#39;) {  options[:debugger] = true }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-m&#39;, &#39;--mode MODE&#39;, Origen::Mode::MODES, &#39;Force the Origen operating mode:&#39;, &#39;  &#39; + Origen::Mode::MODES.join(&#39;, &#39;)) { |_m| }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">  app_options.each do |app_option|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="26">
          
          
          <code class="ruby">    opts.on(*app_option) {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.separator &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-h&#39;, &#39;--help&#39;, &#39;Show this message&#39;) { puts opts; exit }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">opt_parser.parse! ARGV</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">options[:patterns] = ARGV</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">def self._with_doc_tester(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">  if options[:doc] || options[:html]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">    Origen.app.with_doc_tester(options) do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="38">
          
          
          <code class="ruby">      yield</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">  else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">    yield</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="45">
          <span class="hits">1</span>
          
          <code class="ruby">Origen.load_application</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">if options[:queue]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="48">
          
          
          <code class="ruby">  Origen.config.lsf.queue = options.delete(:queue)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="50">
          <span class="hits">1</span>
          
          <code class="ruby">if options[:project]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="51">
          
          
          <code class="ruby">  Origen.config.lsf.project = options.delete(:project)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="54">
          <span class="hits">1</span>
          
          <code class="ruby">_with_doc_tester(options) do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="55">
          <span class="hits">1</span>
          
          <code class="ruby">  Origen.app.plugins.temporary = options[:current_plugin] if options[:current_plugin]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="56">
          <span class="hits">1</span>
          
          <code class="ruby">  Origen.environment.temporary = options[:environment] if options[:environment]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="57">
          <span class="hits">1</span>
          
          <code class="ruby">  Origen.target.temporary = options[:target] if options[:target]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">  Origen.app.load_target!  # This initial load is required to apply any configuration</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">  # options present in the target, it will loaded again before</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">  # each generate/compile job</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="61">
          <span class="hits">1</span>
          
          <code class="ruby">  Origen.app.runner.generate(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="63">
          <span class="hits">1</span>
          
          <code class="ruby">  Origen.lsf.wait_for_completion if options[:wait_for_lsf_completion]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">#    method_option :vector_comments,    :default =&gt; false, :aliases =&gt; &quot;-v&quot;, :type =&gt; :boolean,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">#                           :desc =&gt; &quot;Add vector and cycle number comments to the pattern, disabled by default to make diff viewing easier&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby"># === Task: $ origen g [patname/patlist] [options]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby"># Generate a pattern or list of patterns.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby"># ==== Supplying a pattern name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby"># Multiple pattern name arguments can be supplied on the command line. The generator is non-strict</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby"># about pre and post-fixes to the pattern names so the following all work; use whichever is most</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby"># convenient:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">#   origen g prb_ers_mas_atuf</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">#   origen g prb_ers_mas_atuf.rb</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">#   origen g nvm_prb_ers_mas_atuf.atp</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">#   origen g pattern/erase/prb_ers_mas_atuf.rb</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby"># For patterns that use iterators you can supply either the pattern source name or the generated name,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby"># for example these are equivalent:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">#   origen g prb_ers_mas_bx.rb</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">#   origen g prb_ers_mas_b0.atp</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby"># Multiple patterns can be supplied on the command line and should be comma separated with no spaces</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby"># in between:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">#   origen g prb_ers_mas_atuf,prb_ers_mas_bx</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby"># A pattern list is simply the name of any file that resides in the /list directory and which contains</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby"># a list of patname arguments (same rules apply as for the command line version).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby"># The list files can be commented with &#39;#&#39; and can reference other list files. For example it is</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby"># common to make a production.list or master.list file that references other sub lists: probe.list,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby"># ft.list, etc.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby"># ==== Generator output</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby"># The command line output is as follows:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">#   Generating... nvm_prb_ers_mas_atuf.atp            3039      0.201732</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">#                           |                          |            |</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">#       Created output file, can be found in       Number of   Execution time</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">#                  output/&lt;soc&gt;/                    vectors     on the tester</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby"># All output from the last run can be found in log.txt, this is just a direct copy of the output in</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby"># the console.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby"># ==== Tracking changes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby"># Upon completion you will be alerted if there are some new or changed files and will prompted to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby"># save these. It is recommended that you perform the save if you know why the change happened (or if</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby"># you are running in a brand new workspace). You can then use the automatic pattern diff feature to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby"># be alerted to any change in the pattern content the next time you generate a given pattern. Note that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby"># a tkdiff executable is automatically output to allow you to inspect the differences.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby"># To allow you to locate changed or new patterns easily they are automatically copied to:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby"># output/&lt;soc&gt;/changed/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby"># The reference files are stored in $ORIGEN_WORK/.ref &lt;br&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby"># Very often you will want to compare the output of the current generator to a previous version,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby"># to do this remove the .ref and replace it with a link to the .ref in another workspace.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">#   rm -fr .ref</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">#   ln -s &lt;path_to_my_ref_workspace&gt;/.ref .ref</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby"># After that generate and save the patterns in the reference workspace and re-run the patterns in the original</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby"># workspace to see if there are any differences.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby"># ==== Options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby"># For a list of options run:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">#   origen help g</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="19edf863ff5257176e2de98ff90761042d445b50">
  <div class="header">
    <h3>lib/origen/commands/program.rb</h3>
    <h4><span class="yellow">89.36 %</span> covered</h4>
    <div>
      <b>47</b> relevant lines. 
      <span class="green"><b>42</b> lines covered</span> and
      <span class="red"><b>5</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;optparse&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">options = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"># App options are options that the application can supply to extend this command</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">app_options = @application_options || []</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">opt_parser = OptionParser.new do |opts|</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.banner = &#39;Usage: origen p [space separated files or directories] [options]&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-e&#39;, &#39;--environment NAME&#39;, String, &#39;Override the default environment, NAME can be a full path or a fragment of an environment file name&#39;) { |e| options[:environment] = e }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">  opts.on(&#39;-t&#39;, &#39;--target NAME&#39;, String, &#39;Override the default target, NAME can be a full path or a fragment of a target file name&#39;) { |t| options[:target] = t }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-l&#39;, &#39;--lsf [ACTION]&#39;, [:clear, :add], &quot;Submit jobs to the LSF, optionally specify whether to &#39;clear&#39; or &#39;add&#39; to existing jobs&quot;) { |a| options[:lsf] = true; options[:lsf_action] = a }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-w&#39;, &#39;--wait&#39;, &#39;Wait for LSF processing to complete&#39;) { options[:wait_for_lsf_completion] = true }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-c&#39;, &#39;--continue&#39;, &#39;Continue on error (to the next file)&#39;) { options[:continue] = true }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-d&#39;, &#39;--debugger&#39;, &#39;Enable the debugger&#39;) {  options[:debugger] = true }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-f&#39;, &#39;--file FILE&#39;, String, &#39;Override the default log file&#39;) { |o| options[:log_file] = o }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">  opts.on(&#39;-pl&#39;, &#39;--plugin PLUGIN_NAME&#39;, String, &#39;Set current plugin&#39;) { |pl_n|  options[:current_plugin] = pl_n }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-o&#39;, &#39;--output DIR&#39;, String, &#39;Override the default output directory&#39;) { |o| options[:output] = o }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">  opts.on(&#39;-r&#39;, &#39;--reference DIR&#39;, String, &#39;Override the default reference directory&#39;) { |o| options[:reference] = o }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;--list FILE&#39;, String, &#39;Override the default pattern list file name&#39;) { |o| options[:referenced_pattern_list] = o }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="20">
          <span class="hits">2</span>
          
          <code class="ruby">  opts.on(&#39;--doc&#39;, &#39;Generate into doc (yaml) format, requires a Doc interface to be setup in your application&#39;) { options[:doc] = true }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-q&#39;, &#39;--queue NAME&#39;, String, &#39;Specify the LSF queue, default is short&#39;) { |o| options[:queue] = o }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-p&#39;, &#39;--project NAME&#39;, String, &#39;Specify the LSF project, default is msg.te&#39;) { |o| options[:project] = o }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-d&#39;, &#39;--debugger&#39;, &#39;Enable the debugger&#39;) {  options[:debugger] = true }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-m&#39;, &#39;--mode MODE&#39;, Origen::Mode::MODES, &#39;Force the Origen operating mode:&#39;, &#39;  &#39; + Origen::Mode::MODES.join(&#39;, &#39;)) { |_m| }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">  app_options.each do |app_option|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="26">
          
          
          <code class="ruby">    opts.on(*app_option) {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.separator &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">  opts.on(&#39;-h&#39;, &#39;--help&#39;, &#39;Show this message&#39;) { puts opts; exit }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">opt_parser.parse! ARGV</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">options[:files] = ARGV</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">Origen.load_application</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby">if options[:queue]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="38">
          
          
          <code class="ruby">  Origen.config.lsf.queue = options.delete(:queue)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="40">
          <span class="hits">1</span>
          
          <code class="ruby">if options[:project]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="41">
          
          
          <code class="ruby">  Origen.config.lsf.project = options.delete(:project)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">def self._with_doc_tester(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="45">
          <span class="hits">1</span>
          
          <code class="ruby">  if options[:doc]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="46">
          <span class="hits">1</span>
          
          <code class="ruby">    Origen.app.with_doc_tester do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">      yield</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">  else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="50">
          
          
          <code class="ruby">    yield</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="54">
          <span class="hits">1</span>
          
          <code class="ruby">_with_doc_tester(options) do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="55">
          <span class="hits">1</span>
          
          <code class="ruby">  Origen.app.plugins.temporary = options[:current_plugin] if options[:current_plugin]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="56">
          <span class="hits">1</span>
          
          <code class="ruby">  Origen.environment.temporary = options[:environment] if options[:environment]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="57">
          <span class="hits">1</span>
          
          <code class="ruby">  Origen.target.temporary = options[:target] if options[:target]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">  Origen.app.load_target!  # This initial load is required to apply any configuration</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">  # options present in the target, it will loaded again before</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">  # each generate/compile job</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="62">
          <span class="hits">1</span>
          
          <code class="ruby">  if Origen.config.test_program_output_directory &amp;&amp; !options[:output]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="63">
          
          
          <code class="ruby">    options[:output] = Origen.config.test_program_output_directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="66">
          <span class="hits">1</span>
          
          <code class="ruby">  options[:action] = :program  # Let the generator know this is a test program generation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="67">
          <span class="hits">1</span>
          
          <code class="ruby">  Origen.app.runner.launch(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="70">
          <span class="hits">1</span>
          
          <code class="ruby">Origen.lsf.wait_for_completion if options[:wait_for_lsf_completion]</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="9c9bf3b4bb330a48e2e7f163aff2596f983d4dc8">
  <div class="header">
    <h3>lib/origen/controller.rb</h3>
    <h4><span class="red">75.81 %</span> covered</h4>
    <div>
      <b>62</b> relevant lines. 
      <span class="green"><b>47</b> lines covered</span> and
      <span class="red"><b>15</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Controller</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    extend ActiveSupport::Concern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">    module ClassMethods</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      def model(options = {})</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="7">
          <span class="hits">3</span>
          
          <code class="ruby">        options[:controller_class] = self</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="8">
          <span class="hits">3</span>
          
          <code class="ruby">        if options[:path]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">          @path_to_model = options[:path]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">          options[:model_class] = _resolve_model_class(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="13">
          <span class="hits">3</span>
          
          <code class="ruby">        Origen.controllers &lt;&lt; options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">      def path_to_model</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">        @path_to_model</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">      def _resolve_model_class(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="21">
          <span class="hits">2</span>
          
          <code class="ruby">        class_name = options[:class_name]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="22">
          <span class="hits">2</span>
          
          <code class="ruby">        if class_name</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="23">
          <span class="hits">2</span>
          
          <code class="ruby">          if eval(&quot;defined? #{_namespace}::#{class_name}&quot;)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="24">
          <span class="hits">2</span>
          
          <code class="ruby">            klass = eval(&quot;#{_namespace}::#{class_name}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="26">
          
          
          <code class="ruby">            if eval(&quot;defined? #{class_name}&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="27">
          
          
          <code class="ruby">              klass = eval(class_name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="29">
          
          
          <code class="ruby">              if eval(&quot;defined? #{self}::#{class_name}&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="30">
          
          
          <code class="ruby">                klass = eval(&quot;#{self}::#{class_name}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="32">
          
          
          <code class="ruby">                puts &quot;Could not find class: #{class_name}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="33">
          
          
          <code class="ruby">                fail &#39;Unknown model class!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="37">
          <span class="hits">2</span>
          
          <code class="ruby">          klass</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="39">
          
          
          <code class="ruby">          fail &quot;You must supply a :class_name option when defining a controller&#39;s model!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="43">
          <span class="hits">1</span>
          
          <code class="ruby">      def _namespace</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="44">
          <span class="hits">4</span>
          
          <code class="ruby">        to_s.sub(/::[^:]*$/, &#39;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="48">
          <span class="hits">1</span>
          
          <code class="ruby">    def inspect</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="49">
          
          
          <code class="ruby">      if model</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="50">
          
          
          <code class="ruby">        &quot;&lt;Model/Controller: #{model.class}:#{model.object_id}/#{self.class}:#{object_id}&gt;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="52">
          
          
          <code class="ruby">        &quot;&lt;Controller: #{self.class}:#{object_id}&gt;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="56">
          <span class="hits">1</span>
          
          <code class="ruby">    def is_a?(*args)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="57">
          <span class="hits">2</span>
          
          <code class="ruby">      if model</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="58">
          <span class="hits">2</span>
          
          <code class="ruby">        super(*args) || model.is_a?(*args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="60">
          
          
          <code class="ruby">        super(*args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">    # Returns the controller&#39;s model</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="65">
          <span class="hits">1</span>
          
          <code class="ruby">    def model</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">      @model ||= begin</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="67">
          <span class="hits">1</span>
          
          <code class="ruby">        if self.class.path_to_model</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby">          m = eval(self.class.path_to_model)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="69">
          <span class="hits">1</span>
          
          <code class="ruby">          if m</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="70">
          <span class="hits">1</span>
          
          <code class="ruby">            if m.respond_to?(:_controller=)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="71">
          
          
          <code class="ruby">              m.send(:_controller=, self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="74">
          
          
          <code class="ruby">            fail &quot;No model object found at path: #{self.class.path_to_model}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="76">
          <span class="hits">1</span>
          
          <code class="ruby">          m</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="65" data-linenumber="78">
          <span class="hits">65</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">    # Means that when dealing with a controller/model pair, you can</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">    # always call obj.model and obj.controller to get the one you want,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">    # regardless of the one you currently have.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="84">
          <span class="hits">1</span>
          
          <code class="ruby">    def controller</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="85">
          
          
          <code class="ruby">      self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="88">
          <span class="hits">1</span>
          
          <code class="ruby">    def respond_to?(*args)</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="89">
          <span class="hits">138</span>
          
          <code class="ruby">      super || !!(!@respond_directly &amp;&amp; model &amp;&amp; model.respond_to_directly?(*args))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="92">
          <span class="hits">1</span>
          
          <code class="ruby">    def respond_to_directly?(*args)</code>
        </li>
      
        <li class="covered" data-hits="122" data-linenumber="93">
          <span class="hits">122</span>
          
          <code class="ruby">      @respond_directly = true</code>
        </li>
      
        <li class="covered" data-hits="122" data-linenumber="94">
          <span class="hits">122</span>
          
          <code class="ruby">      result = respond_to?(*args)</code>
        </li>
      
        <li class="covered" data-hits="122" data-linenumber="95">
          <span class="hits">122</span>
          
          <code class="ruby">      @respond_directly = false</code>
        </li>
      
        <li class="covered" data-hits="122" data-linenumber="96">
          <span class="hits">122</span>
          
          <code class="ruby">      result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">    # Used to proxy all method and attribute requests not implemented on the controller</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">    # to the model.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">    # On first call of a missing method a method is generated to avoid the missing lookup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">    # next time, this should be faster for repeated lookups of the same method, e.g. reg</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="104">
          <span class="hits">1</span>
          
          <code class="ruby">    def method_missing(method, *args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="105">
          <span class="hits">10</span>
          
          <code class="ruby">      if model.respond_to?(method)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="106">
          <span class="hits">10</span>
          
          <code class="ruby">        define_singleton_method(method) do |*args, &amp;block|</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="107">
          <span class="hits">12</span>
          
          <code class="ruby">          model.send(method, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="109">
          <span class="hits">10</span>
          
          <code class="ruby">        send(method, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="111">
          
          
          <code class="ruby">        super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="115">
          <span class="hits">1</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="117">
          <span class="hits">1</span>
          
          <code class="ruby">    def _model=(model)</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="118">
          <span class="hits">13</span>
          
          <code class="ruby">      @model = model</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="6508cd8a123306aab4946da60fe50eb693f80624">
  <div class="header">
    <h3>lib/origen/database.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>4</b> relevant lines. 
      <span class="green"><b>4</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Database</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :KeyValueStore,   &#39;origen/database/key_value_store&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :KeyValueStores,  &#39;origen/database/key_value_stores&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="9effa583a24f0cb741601eecbd1ca359e17422ba">
  <div class="header">
    <h3>lib/origen/database/key_value_store.rb</h3>
    <h4><span class="red">72.13 %</span> covered</h4>
    <div>
      <b>61</b> relevant lines. 
      <span class="green"><b>44</b> lines covered</span> and
      <span class="red"><b>17</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Database</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    class KeyValueStore</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">      # Returns the parent database (the application&#39;s collection of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">      # key-value stores)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :database</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize(database, name)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="10">
          <span class="hits">6</span>
          
          <code class="ruby">        @name = name</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="11">
          <span class="hits">6</span>
          
          <code class="ruby">        @database = database</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      # Read a value from the store</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">      def [](key)</code>
        </li>
      
        <li class="covered" data-hits="244" data-linenumber="16">
          <span class="hits">244</span>
          
          <code class="ruby">        refresh if stale?</code>
        </li>
      
        <li class="covered" data-hits="244" data-linenumber="17">
          <span class="hits">244</span>
          
          <code class="ruby">        store[key]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      # Persist a new value to the store</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="21">
          <span class="hits">2</span>
          
          <code class="ruby">      def []=(key, val)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="22">
          <span class="hits">6</span>
          
          <code class="ruby">        refresh if persisted?</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="23">
          <span class="hits">6</span>
          
          <code class="ruby">        store[key] = val</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="24">
          <span class="hits">6</span>
          
          <code class="ruby">        save_to_file</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="25">
          <span class="hits">6</span>
          
          <code class="ruby">        val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      # Force a refresh of the database</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="29">
          <span class="hits">2</span>
          
          <code class="ruby">      def refresh</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="30">
          
          
          <code class="ruby">        unless @uncommitted || !persisted?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="31">
          
          
          <code class="ruby">          dssc.check_out(file, version: &#39;Trunk&#39;, force: true)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="32">
          
          
          <code class="ruby">          record_refresh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="36">
          <span class="hits">2</span>
          
          <code class="ruby">      def record_refresh</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">        database.record_refresh(name)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="38">
          
          
          <code class="ruby">        @store = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">      # Returns true if the database is due a time-based refresh, note that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      # this has no bearing on whether or not someone else has committed to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">      # the store since the last refresh</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="44">
          <span class="hits">2</span>
          
          <code class="ruby">      def stale?</code>
        </li>
      
        <li class="covered" data-hits="244" data-linenumber="45">
          <span class="hits">244</span>
          
          <code class="ruby">        if persisted?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="46">
          
          
          <code class="ruby">          t = database.time_since_refresh(name)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="47">
          
          
          <code class="ruby">          !t || store[:refresh_interval_in_minutes] == 0 || t &gt; store[:refresh_interval_in_minutes]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="244" data-linenumber="49">
          <span class="hits">244</span>
          
          <code class="ruby">          false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="53">
          <span class="hits">2</span>
          
          <code class="ruby">      def persisted?</code>
        </li>
      
        <li class="covered" data-hits="292" data-linenumber="54">
          <span class="hits">292</span>
          
          <code class="ruby">        database.persisted?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="57">
          <span class="hits">2</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="59">
          <span class="hits">2</span>
          
          <code class="ruby">      def dssc</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="60">
          
          
          <code class="ruby">        @dssc ||= Origen::Utility::DesignSync.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="63">
          <span class="hits">2</span>
          
          <code class="ruby">      def store</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">        @store ||= begin</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="65">
          <span class="hits">6</span>
          
          <code class="ruby">          if file.exist?</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="66">
          <span class="hits">6</span>
          
          <code class="ruby">            load_from_file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">          elsif persisted? &amp;&amp; dssc.managed_by_design_sync?(file)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="68">
          
          
          <code class="ruby">            refresh</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="69">
          
          
          <code class="ruby">            load_from_file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="71">
          
          
          <code class="ruby">            @uncommitted = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="72">
          
          
          <code class="ruby">            { refresh_interval_in_minutes: 60 }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="256" data-linenumber="74">
          <span class="hits">256</span>
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="77">
          <span class="hits">2</span>
          
          <code class="ruby">      def load_from_file</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="78">
          <span class="hits">6</span>
          
          <code class="ruby">        s = nil</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="79">
          <span class="hits">6</span>
          
          <code class="ruby">        File.open(file.to_s) do |f|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="80">
          <span class="hits">6</span>
          
          <code class="ruby">          s = Marshal.load(f)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="82">
          <span class="hits">6</span>
          
          <code class="ruby">        s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="85">
          <span class="hits">2</span>
          
          <code class="ruby">      def save_to_file</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="86">
          <span class="hits">6</span>
          
          <code class="ruby">        unless file.dirname.exist?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="87">
          
          
          <code class="ruby">          FileUtils.mkdir_p(file.dirname.to_s)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="89">
          <span class="hits">6</span>
          
          <code class="ruby">        `chmod u+w #{file}` if file.exist?</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="90">
          <span class="hits">6</span>
          
          <code class="ruby">        if @uncommitted</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="91">
          
          
          <code class="ruby">          database.record_new_store(name)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="92">
          
          
          <code class="ruby">          @uncommitted = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="94">
          <span class="hits">6</span>
          
          <code class="ruby">        File.open(file.to_s, &#39;w&#39;) do |f|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="95">
          <span class="hits">6</span>
          
          <code class="ruby">          Marshal.dump(store, f)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="97">
          <span class="hits">6</span>
          
          <code class="ruby">        if persisted?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="98">
          
          
          <code class="ruby">          dssc.check_in file, new: true, keep: true, branch: &#39;Trunk&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="102">
          <span class="hits">2</span>
          
          <code class="ruby">      def file</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="103">
          <span class="hits">36</span>
          
          <code class="ruby">        if persisted?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="104">
          
          
          <code class="ruby">          @file ||= Pathname.new(&quot;#{database.app.root}/.db/#{name.to_s.symbolize}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="106">
          <span class="hits">36</span>
          
          <code class="ruby">          @file ||= Pathname.new(&quot;#{database.app.root}/.session/#{name.to_s.symbolize}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="ecfdb0a12c8c0d3c6d0aee1b8c7efe589b7461a4">
  <div class="header">
    <h3>lib/origen/database/key_value_stores.rb</h3>
    <h4><span class="red">50.94 %</span> covered</h4>
    <div>
      <b>53</b> relevant lines. 
      <span class="green"><b>27</b> lines covered</span> and
      <span class="red"><b>26</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Database</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    class KeyValueStores</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">      # Returns the application that owns the database</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :app</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize(app, options = {})</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="8">
          <span class="hits">6</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">          persist: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="11">
          <span class="hits">6</span>
          
          <code class="ruby">        @app = app</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="12">
          <span class="hits">6</span>
          
          <code class="ruby">        @persist = options[:persist]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">      def inspect</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="16">
          
          
          <code class="ruby">        if persisted?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="17">
          
          
          <code class="ruby">          &quot;&lt; #{app.class}&#39;s Database &gt;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="19">
          
          
          <code class="ruby">          &quot;&lt; #{app.class}&#39;s Session &gt;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      # Refresh all stores</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="24">
          <span class="hits">2</span>
          
          <code class="ruby">      def refresh</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="25">
          
          
          <code class="ruby">        if persisted?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="26">
          
          
          <code class="ruby">          _system.refresh</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="27">
          
          
          <code class="ruby">          files = stores.map { |name| send(name).send(:file) }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="28">
          
          
          <code class="ruby">          dssc.check_out(files.join(&#39; &#39;), version: &#39;Trunk&#39;, force: true)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="29">
          
          
          <code class="ruby">          stores.each { |name| send(name).record_refresh }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">        nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">      # Returns the time in minutes since the given store</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">      # was last refreshed</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="36">
          <span class="hits">2</span>
          
          <code class="ruby">      def time_since_refresh(name)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">        if persisted?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="38">
          
          
          <code class="ruby">          if refresh_table[name]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="39">
          
          
          <code class="ruby">            ((Time.now - refresh_table[name]) / 60).floor</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="42">
          
          
          <code class="ruby">          Time.now</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">      # Record that the given store was just refreshed</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="47">
          <span class="hits">2</span>
          
          <code class="ruby">      def record_refresh(name)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="48">
          
          
          <code class="ruby">        if persisted?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="49">
          
          
          <code class="ruby">          t = refresh_table</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="50">
          
          
          <code class="ruby">          t[name] = Time.now</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="51">
          
          
          <code class="ruby">          app.session._database[:refresh_table] = t</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="55">
          <span class="hits">2</span>
          
          <code class="ruby">      def record_new_store(name)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="56">
          
          
          <code class="ruby">        unless name == :_system || name == :_database</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="57">
          
          
          <code class="ruby">          _system.refresh</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="58">
          
          
          <code class="ruby">          s = stores</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="59">
          
          
          <code class="ruby">          s &lt;&lt; name unless s.include?(name)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="60">
          
          
          <code class="ruby">          _system[:stores] = s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">      # Used to create new key value stores on the fly.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">      # On first call of a missing method a method is generated to avoid the missing lookup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">      # next time, this should be faster for repeated lookups of the same method, e.g. reg</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="68">
          <span class="hits">2</span>
          
          <code class="ruby">      def method_missing(method, *args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="69">
          <span class="hits">6</span>
          
          <code class="ruby">        if method.to_s =~ /(=|\(|\)|\.|\[|\]|{|}|\\|\/)/ || [:test, :_system].include?(method)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="70">
          
          
          <code class="ruby">          fail &quot;Invalid database name: #{method}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="72">
          <span class="hits">6</span>
          
          <code class="ruby">          define_singleton_method(method) do</code>
        </li>
      
        <li class="covered" data-hits="250" data-linenumber="73">
          <span class="hits">250</span>
          
          <code class="ruby">            loaded[method] ||= KeyValueStore.new(self, method)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="76">
          <span class="hits">6</span>
          
          <code class="ruby">        send(method, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">      # Returns the names of all known stores</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="80">
          <span class="hits">2</span>
          
          <code class="ruby">      def stores</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="81">
          
          
          <code class="ruby">        _system[:stores] || []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="84">
          <span class="hits">2</span>
          
          <code class="ruby">      def persisted?</code>
        </li>
      
        <li class="covered" data-hits="292" data-linenumber="85">
          <span class="hits">292</span>
          
          <code class="ruby">        @persist</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="88">
          <span class="hits">2</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="90">
          <span class="hits">2</span>
          
          <code class="ruby">      def refresh_table</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="91">
          
          
          <code class="ruby">        app.session._database[:refresh_table] ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">      # Persisted key value store used by the database system</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="95">
          <span class="hits">2</span>
          
          <code class="ruby">      def _system</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="96">
          
          
          <code class="ruby">        @_system ||= KeyValueStore.new(self, :_system)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="99">
          <span class="hits">2</span>
          
          <code class="ruby">      def dssc</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="100">
          
          
          <code class="ruby">        @dssc ||= Origen::Utility::DesignSync.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="103">
          <span class="hits">2</span>
          
          <code class="ruby">      def loaded</code>
        </li>
      
        <li class="covered" data-hits="250" data-linenumber="104">
          <span class="hits">250</span>
          
          <code class="ruby">        @loaded ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="7f8e0daf171a6e98139d48357bf9ffdb07496edf">
  <div class="header">
    <h3>lib/origen/errata.rb</h3>
    <h4><span class="green">95.65 %</span> covered</h4>
    <div>
      <b>46</b> relevant lines. 
      <span class="green"><b>44</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Errata</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :HwErratum,		&#39;origen/errata/hw_erratum&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :SwErratumWorkaround,	&#39;origen/errata/sw_erratum_workaround&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">    attr_accessor :_errata</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">    attr_accessor :_sw_workarounds</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    # Define and instantiate an erratum object</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">    def erratum(id, ip_block, overview = {}, status = {}, sw_workaround = {})</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="12">
          <span class="hits">3</span>
          
          <code class="ruby">      _errata</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="13">
          <span class="hits">3</span>
          
          <code class="ruby">      @_errata[id][ip_block][status[:disposition]] = HwErratum.new(id, ip_block, overview, status, sw_workaround)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">    # Returns an erratum or list of erratum that meet a specific criteria</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">    def errata(options = {})</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="18">
          <span class="hits">30</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">        id:          nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">        ip_block:    nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">        disposition: nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="23">
          <span class="hits">30</span>
          
          <code class="ruby">      return nil if @_errata.nil?</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="24">
          <span class="hits">30</span>
          
          <code class="ruby">      return nil if @_errata.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="26">
          <span class="hits">30</span>
          
          <code class="ruby">      errata_found = Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="27">
          <span class="hits">37</span>
          
          <code class="ruby">        h[k] = Hash.new do |hh, kk|</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="28">
          <span class="hits">37</span>
          
          <code class="ruby">          hh[kk] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      # First filter on id, then ip_block, then disposition</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="33">
          <span class="hits">30</span>
          
          <code class="ruby">      filter_hash(@_errata, options[:id]).each do |id, hash|</code>
        </li>
      
        <li class="covered" data-hits="54" data-linenumber="34">
          <span class="hits">54</span>
          
          <code class="ruby">        filter_hash(hash, options[:ip_block]).each do |ip_block, hash1|</code>
        </li>
      
        <li class="covered" data-hits="43" data-linenumber="35">
          <span class="hits">43</span>
          
          <code class="ruby">          filter_hash(hash1, options[:disposition]).each do |disposition, errata|</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="36">
          <span class="hits">37</span>
          
          <code class="ruby">            errata_found[id][ip_block][disposition] = errata</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">      # Return nil if there are no errata that meet criteria</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="42">
          <span class="hits">30</span>
          
          <code class="ruby">      if errata_found.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      # If only one errata meets criteria, return that HwErratum object</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="45">
          <span class="hits">28</span>
          
          <code class="ruby">      elsif errata_found.size == 1</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="46">
          <span class="hits">21</span>
          
          <code class="ruby">        errata_found.values.first.values.first.values.first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="48">
          <span class="hits">7</span>
          
          <code class="ruby">        return errata_found</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">    # Define and instantiate a sw_workaround object</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="53">
          <span class="hits">2</span>
          
          <code class="ruby">    def sw_workaround(id, overview = {}, resolution = {})</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="54">
          <span class="hits">5</span>
          
          <code class="ruby">      _sw_workarounds</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="55">
          <span class="hits">5</span>
          
          <code class="ruby">      @_sw_workarounds[id] = SwErratumWorkaround.new(id, overview, resolution)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">    # Returns a sw_workaround object with a specific id</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="59">
          <span class="hits">2</span>
          
          <code class="ruby">    def sw_workarounds(options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="60">
          <span class="hits">2</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">        id: nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="63">
          <span class="hits">2</span>
          
          <code class="ruby">      return nil if @_sw_workarounds.nil?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="64">
          <span class="hits">2</span>
          
          <code class="ruby">      return nil if @_sw_workarounds.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="66">
          <span class="hits">2</span>
          
          <code class="ruby">      sw_workarounds_found = Hash.new do |h, k|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="67">
          
          
          <code class="ruby">        h[k] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">      # filter on id</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="71">
          <span class="hits">2</span>
          
          <code class="ruby">      filter_hash(@_sw_workarounds, options[:id]).each do |id, workarounds|</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="72">
          <span class="hits">10</span>
          
          <code class="ruby">        sw_workarounds_found[id] = workarounds</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="74">
          <span class="hits">2</span>
          
          <code class="ruby">      if sw_workarounds_found.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="76">
          <span class="hits">2</span>
          
          <code class="ruby">      elsif sw_workarounds_found.size == 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="77">
          
          
          <code class="ruby">        sw_workarounds_found.values.first # .values.first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="79">
          <span class="hits">2</span>
          
          <code class="ruby">        return sw_workarounds_found</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="83">
          <span class="hits">2</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="85">
          <span class="hits">2</span>
          
          <code class="ruby">    def _errata</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">      @_errata ||= Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="87">
          <span class="hits">3</span>
          
          <code class="ruby">        h[k] = Hash.new do |hh, kk|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="88">
          <span class="hits">3</span>
          
          <code class="ruby">          hh[kk] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="90">
          <span class="hits">3</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="93">
          <span class="hits">2</span>
          
          <code class="ruby">    def _sw_workarounds</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="94">
          <span class="hits">5</span>
          
          <code class="ruby">      @_sw_workarounds ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">    # Return a hash based on the filter provided</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">    # def filter_hash(hash, filter)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">    #  fail &#39;Hash argument is not a Hash!&#39; unless hash.is_a? Hash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">    #  filtered_hash = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">    #  select_logic = case filter</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">    #    when String then &#39;k[Regexp.new(filter)] &amp;&amp; k.length == filter.length&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">    #    when (Fixnum || Integer || Float || Numeric) then &quot;k[Regexp.new(&#39;#{filter}&#39;)]&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">    #    when Regexp then &#39;k[filter]&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">    #    when Symbol then</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">    #      &#39;k == filter&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">    #    when NilClass then true # Return all specs if a filter is set to nil (i.e. user doesn&#39;t care about this filter)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">    #    else true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">    #  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">    # rubocop:disable UnusedBlockArgument</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">    #  filtered_hash = hash.select do |k, v|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">    #    [TrueClass, FalseClass].include?(select_logic.class) ? select_logic : eval(select_logic)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">    #  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">    #  filtered_hash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">    # end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="114a17bfed913dc8a45336b48318c44c1739354b">
  <div class="header">
    <h3>lib/origen/errata/hw_erratum.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>22</b> relevant lines. 
      <span class="green"><b>22</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Errata</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    class HwErratum</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">      # ID number used to identify erratum</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">      # Erratum Title</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :title</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      # Description of erratum</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :description</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      # Description of the hardware workaround for the erratum</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :hw_workaround_description</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      # How the errata is to be distributed ex:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      #  --Internal Only</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">      #  --Customer visible</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      #  --Other: 3rd party, etc.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :disposition</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">      # Impact of erratum to customer</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :impact</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      # When/if the erratum will be fixed</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :fix_plan</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      # IP block that is associate with this errata</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :ip_block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">      # Software workaround object associated with erratum</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :sw_workaround</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(id, ip_block, overview  = {}, status = {}, sw_workaround = {})</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="35">
          <span class="hits">3</span>
          
          <code class="ruby">        @id = id</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="36">
          <span class="hits">3</span>
          
          <code class="ruby">        @ip_block = ip_block</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="37">
          <span class="hits">3</span>
          
          <code class="ruby">        @title = overview[:title]</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="38">
          <span class="hits">3</span>
          
          <code class="ruby">        @description = overview[:description]</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="39">
          <span class="hits">3</span>
          
          <code class="ruby">        @hw_workaround_description = overview[:hw_workaround_description]</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="40">
          <span class="hits">3</span>
          
          <code class="ruby">        @disposition = status[:disposition]</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="41">
          <span class="hits">3</span>
          
          <code class="ruby">        @impact = status[:impact]</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="42">
          <span class="hits">3</span>
          
          <code class="ruby">        @fix_plan = status[:fix_plan]</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="43">
          <span class="hits">3</span>
          
          <code class="ruby">        @sw_workaround = sw_workaround</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="63c6445d232aaafef69158e8e325bec1810be759">
  <div class="header">
    <h3>lib/origen/errata/sw_erratum_workaround.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>18</b> relevant lines. 
      <span class="green"><b>18</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Errata</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    class SwErratumWorkaround</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">      # ID number used to identify software workaround</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">      # Title of software workaround</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :title</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      # Description of software workaround and implementation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :description</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      # Availability of workaround, ex:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      #    -- Not Applicable: Errata does not affect software</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      #    -- Not Available: Workaround not available</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      #    -- Available: Workaround is available to be distributed</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :sw_disposition</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      # Software distribution version which incorporates the workaround</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :distribution</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">      # Release note</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :note</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      # Link to patch(s) for workaround</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :patches</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(id, overview = {}, resolution = {})</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="29">
          <span class="hits">5</span>
          
          <code class="ruby">        @id = id</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="30">
          <span class="hits">5</span>
          
          <code class="ruby">        @title = overview[:title]</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="31">
          <span class="hits">5</span>
          
          <code class="ruby">        @description = overview[:description]</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="32">
          <span class="hits">5</span>
          
          <code class="ruby">        @sw_disposition = overview[:sw_disposition]</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="33">
          <span class="hits">5</span>
          
          <code class="ruby">        @distribution = overview[:distribution]</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="34">
          <span class="hits">5</span>
          
          <code class="ruby">        @note = resolution[:note]</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="35">
          <span class="hits">5</span>
          
          <code class="ruby">        @patches = resolution[:patches]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="4661a56ebf990e999242e5af2b6432550219f790">
  <div class="header">
    <h3>lib/origen/features.rb</h3>
    <h4><span class="yellow">88.68 %</span> covered</h4>
    <div>
      <b>53</b> relevant lines. 
      <span class="green"><b>47</b> lines covered</span> and
      <span class="red"><b>6</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Features</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    extend ActiveSupport::Concern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Feature, &#39;origen/features/feature&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">    module ClassMethods</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">      def features</code>
        </li>
      
        <li class="covered" data-hits="470" data-linenumber="9">
          <span class="hits">470</span>
          
          <code class="ruby">        @features ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      # Creates a Feature if it deos not already exists.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      # Returns the Feature object if it already exists.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      # Returns an array of features if no argument is provided.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">      def feature(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="19">
          <span class="hits">8</span>
          
          <code class="ruby">        name = name.to_s.downcase.to_sym</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="20">
          <span class="hits">8</span>
          
          <code class="ruby">        if !features.key?(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">          # Add the feature if it does not already exists</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">          # Read desciption from the caller if the description of feature</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">          # is not provided</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="25">
          <span class="hits">8</span>
          
          <code class="ruby">          unless options.key?(:description)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="26">
          <span class="hits">6</span>
          
          <code class="ruby">            @file = define_file(caller[0])</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="27">
          <span class="hits">6</span>
          
          <code class="ruby">            options[:description] = fetch_description(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="29">
          <span class="hits">8</span>
          
          <code class="ruby">          features[name] = Feature.new(name, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">        else          # if feature with given name already exists</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="31">
          
          
          <code class="ruby">          fail &quot;Feature #{name} already added!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="35">
          <span class="hits">2</span>
          
          <code class="ruby">      def fetch_description(name)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="36">
          <span class="hits">6</span>
          
          <code class="ruby">        parse_description unless description_lookup[@file]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="37">
          <span class="hits">6</span>
          
          <code class="ruby">        begin</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="38">
          <span class="hits">6</span>
          
          <code class="ruby">          desc = description_lookup[@file][name]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">        rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="40">
          
          
          <code class="ruby">          desc = []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="42">
          <span class="hits">6</span>
          
          <code class="ruby">        desc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="45">
          <span class="hits">2</span>
          
          <code class="ruby">      def define_file(file)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="46">
          <span class="hits">6</span>
          
          <code class="ruby">        if Origen.running_on_windows?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="47">
          
          
          <code class="ruby">          fields = file.split(&#39;:&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="48">
          
          
          <code class="ruby">          &quot;#{fields[0]}:#{fields[1]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="50">
          <span class="hits">6</span>
          
          <code class="ruby">          file.split(&#39;:&#39;).first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="55">
          <span class="hits">2</span>
          
          <code class="ruby">      def description_lookup</code>
        </li>
      
        <li class="covered" data-hits="50" data-linenumber="56">
          <span class="hits">50</span>
          
          <code class="ruby">        @@description_lookup ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="59">
          <span class="hits">2</span>
          
          <code class="ruby">      def parse_description</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="60">
          <span class="hits">1</span>
          
          <code class="ruby">        desc = []</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="61">
          <span class="hits">1</span>
          
          <code class="ruby">        File.readlines(@file).each do |line|</code>
        </li>
      
        <li class="covered" data-hits="197" data-linenumber="62">
          <span class="hits">197</span>
          
          <code class="ruby">          if line =~ /^\s*#(.*)/</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="63">
          <span class="hits">2</span>
          
          <code class="ruby">            desc &lt;&lt; Regexp.last_match[1].strip</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">          elsif line =~ /(\s|:)feature(\s*)(=?&gt;?)(\s?):(\w*)/</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="65">
          <span class="hits">19</span>
          
          <code class="ruby">            description_lookup[@file] ||= {}</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="66">
          <span class="hits">19</span>
          
          <code class="ruby">            description_lookup[@file][Regexp.last_match[5].to_sym] = desc</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="67">
          <span class="hits">19</span>
          
          <code class="ruby">            desc = []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="176" data-linenumber="69">
          <span class="hits">176</span>
          
          <code class="ruby">            desc = []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="75">
          <span class="hits">2</span>
          
          <code class="ruby">    public</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="77">
          <span class="hits">2</span>
          
          <code class="ruby">    def has_features?(name = nil)</code>
        </li>
      
        <li class="covered" data-hits="442" data-linenumber="78">
          <span class="hits">442</span>
          
          <code class="ruby">      if !name</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="79">
          <span class="hits">2</span>
          
          <code class="ruby">        if feature.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="80">
          
          
          <code class="ruby">          return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="82">
          <span class="hits">2</span>
          
          <code class="ruby">          return true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="440" data-linenumber="85">
          <span class="hits">440</span>
          
          <code class="ruby">        return feature.include?(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="88">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :has_feature?, :has_features?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">    # Returns an array of the names of all associated features</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="91">
          <span class="hits">2</span>
          
          <code class="ruby">    def feature(name = nil)</code>
        </li>
      
        <li class="covered" data-hits="449" data-linenumber="92">
          <span class="hits">449</span>
          
          <code class="ruby">      if !name</code>
        </li>
      
        <li class="covered" data-hits="444" data-linenumber="93">
          <span class="hits">444</span>
          
          <code class="ruby">        self.class.features.keys</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="95">
          <span class="hits">5</span>
          
          <code class="ruby">        if self.class.features.key?(name)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="96">
          <span class="hits">5</span>
          
          <code class="ruby">          self.class.features[name]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="98">
          
          
          <code class="ruby">          fail &quot;Feature #{name} does not exist!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="102">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :features, :feature</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="16c450c003aa29a34776937382480a6e5ad0c0c0">
  <div class="header">
    <h3>lib/origen/features/feature.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>13</b> relevant lines. 
      <span class="green"><b>13</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Features</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    class Feature</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :name</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :description</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="8">
          <span class="hits">8</span>
          
          <code class="ruby">        @name = name</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="9">
          <span class="hits">8</span>
          
          <code class="ruby">        @description = options[:description]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">      def describe</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="13">
          <span class="hits">3</span>
          
          <code class="ruby">        return &#39;No description provided!&#39; if @description == []</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">        if @description.class == Array</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">          @description.join(&#39; &#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">          @description</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="9460c459899c72afa207383273f513ee59c9bb62">
  <div class="header">
    <h3>lib/origen/file_handler.rb</h3>
    <h4><span class="red">68.94 %</span> covered</h4>
    <div>
      <b>235</b> relevant lines. 
      <span class="green"><b>162</b> lines covered</span> and
      <span class="red"><b>73</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">require &#39;pathname&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">  # All logic for working with files/directories and resolving path names</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">  # should be included here.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">  # An instance of this class is available as Origen.file_handler</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">  # Some portions of Origen may implement local code to do this, but these</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">  # should all be transitioned to use this over time.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">  class FileHandler</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="12">
          <span class="hits">2</span>
          
          <code class="ruby">    attr_accessor :default_extension</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">    # Returns an array of file/pattern names lines from a list file.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">    # This will also take care of recursively expanding any embedded</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">    # list references.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">    def expand_list(files, options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">      [files].flatten.map do |file|</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="19">
          <span class="hits">26</span>
          
          <code class="ruby">        f = file.strip</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">        # Takes care of blank or comment lines in a list file</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="21">
          <span class="hits">26</span>
          
          <code class="ruby">        if f.empty? || f =~ /^\s*#/</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="22">
          <span class="hits">4</span>
          
          <code class="ruby">          nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">        # Don&#39;t expand program lists when submitting to lsf,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">        # there are likely to be relational dependencies between</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">        # flows meaning that they must be generated together</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="26">
          <span class="hits">2</span>
          
          <code class="ruby">        elsif is_a_list?(f) &amp;&amp; !(options[:lsf] &amp;&amp; options[:action] == :program)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="27">
          <span class="hits">2</span>
          
          <code class="ruby">          expand_list(open_list(f), options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="29">
          <span class="hits">20</span>
          
          <code class="ruby">          f</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="31">
          <span class="hits">14</span>
          
          <code class="ruby">      end.flatten.compact.uniq</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">    # Returns the contents of the given list file in an array, if it</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">    # can be found, if not will raise an error</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="36">
          <span class="hits">2</span>
          
          <code class="ruby">    def open_list(file)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="37">
          <span class="hits">2</span>
          
          <code class="ruby">      f = clean_path_to(file, allow_missing: true)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="38">
          <span class="hits">2</span>
          
          <code class="ruby">      if f</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">        f = File.open(f, &#39;r&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      elsif File.exist?(&quot;#{Origen.root}/list/#{File.basename(file)}&quot;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">        f = File.open(&quot;#{Origen.root}/list/#{File.basename(file)}&quot;, &#39;r&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      elsif @last_opened_list_dir &amp;&amp; File.exist?(&quot;#{@last_opened_list_dir}/#{file}&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="43">
          
          
          <code class="ruby">        f = File.open(&quot;#{@last_opened_list_dir}/#{file}&quot;, &#39;r&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="45">
          
          
          <code class="ruby">        fail &quot;Could not find list file: #{file}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="47">
          <span class="hits">2</span>
          
          <code class="ruby">      lines = f.readlines</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="48">
          <span class="hits">2</span>
          
          <code class="ruby">      f.close</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      # Before we go save the directory of this list, this will help</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      # us to resolve any relative path references to other lists that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      # it may contain</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="52">
          <span class="hits">2</span>
          
          <code class="ruby">      @last_opened_list_dir = clean_path_to(Pathname.new(f).dirname)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="53">
          <span class="hits">2</span>
          
          <code class="ruby">      lines</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">    # Returns true if the input argument is a list, for now this is</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">    # simply defined by the filename ending in .list</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="58">
          <span class="hits">2</span>
          
          <code class="ruby">    def is_a_list?(file)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="59">
          <span class="hits">22</span>
          
          <code class="ruby">      !!(file =~ /list$/)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">    # Yields absolute paths to the given file or directory. If a directory is supplied</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">    # the method will recurse into the sub directories and ultimately yield</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">    # every file contained within the directory and its children.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="65">
          <span class="hits">2</span>
          
          <code class="ruby">    def resolve_files(file_or_dir_path, options = {}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="66">
          <span class="hits">40</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">        # Set to :template when calling to consider references to template</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">        # files from an import library</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">        import: false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="71">
          <span class="hits">40</span>
          
          <code class="ruby">      [file_or_dir_path].flatten.each do |file_or_dir_path|</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="72">
          <span class="hits">40</span>
          
          <code class="ruby">        path = inject_import_path(file_or_dir_path, type: options[:import]) if options[:import]</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="73">
          <span class="hits">40</span>
          
          <code class="ruby">        path = clean_path_to(file_or_dir_path, options)</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="74">
          <span class="hits">40</span>
          
          <code class="ruby">        self.base_directory = path unless options[:internal_call]</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="75">
          <span class="hits">40</span>
          
          <code class="ruby">        if path.directory?</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="76">
          <span class="hits">7</span>
          
          <code class="ruby">          Dir.glob(&quot;#{path}/*&quot;).sort.each do |file|</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="77">
          <span class="hits">30</span>
          
          <code class="ruby">            resolve_files(file, { internal_call: true }.merge(options), &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">          # Ignore files with the given prefix if supplied, but only if this is a file that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">          # has been found, if explicitly asked to compile a file from the caller do it regardless</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="82">
          <span class="hits">33</span>
          
          <code class="ruby">          if options[:ignore_with_prefix] &amp;&amp; options[:internal_call]</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="83">
          <span class="hits">27</span>
          
          <code class="ruby">            return nil if path.basename.to_s =~ /^#{options[:ignore_with_prefix]}/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="85">
          <span class="hits">15</span>
          
          <code class="ruby">          yield path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">    # Returns a full path to the given file or directory, raises an error if it</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">    # can&#39;t be resolved</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="92">
          <span class="hits">2</span>
          
          <code class="ruby">    def clean_path_to(file, options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">      # Allow individual calls to this method to specify additional custom load paths to consider</code>
        </li>
      
        <li class="covered" data-hits="88" data-linenumber="94">
          <span class="hits">88</span>
          
          <code class="ruby">      if options[:load_paths]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="95">
          
          
          <code class="ruby">        [options[:load_paths]].each do |root|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="96">
          
          
          <code class="ruby">          if File.exist?(&quot;#{root}/#{file}&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="97">
          
          
          <code class="ruby">            return Pathname.new(&quot;#{root}/#{file}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="88" data-linenumber="101">
          <span class="hits">88</span>
          
          <code class="ruby">      if File.exist?(file)</code>
        </li>
      
        <li class="covered" data-hits="72" data-linenumber="102">
          <span class="hits">72</span>
          
          <code class="ruby">        if Pathname.new(file).absolute?</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="103">
          <span class="hits">60</span>
          
          <code class="ruby">          Pathname.new(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="105">
          <span class="hits">12</span>
          
          <code class="ruby">          Pathname.new(&quot;#{Pathname.pwd}/#{file}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">      # Is it a relative reference within a list file?</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="108">
          <span class="hits">16</span>
          
          <code class="ruby">      elsif @last_opened_list_dir &amp;&amp; File.exist?(&quot;#{@last_opened_list_dir}/#{file}&quot;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="109">
          <span class="hits">1</span>
          
          <code class="ruby">        Pathname.new(&quot;#{@last_opened_list_dir}/#{file}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">      # Is it a relative reference to the current base directory?</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="111">
          <span class="hits">15</span>
          
          <code class="ruby">      elsif File.exist?(&quot;#{base_directory}/#{file}&quot;)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="112">
          <span class="hits">10</span>
          
          <code class="ruby">        Pathname.new(&quot;#{base_directory}/#{file}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">      # Is it a path relative to Origen.root?</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="114">
          <span class="hits">5</span>
          
          <code class="ruby">      elsif File.exist?(&quot;#{Origen.root}/#{file}&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="115">
          
          
          <code class="ruby">        Pathname.new(&quot;#{Origen.root}/#{file}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">      # Is it a path relative to the current directory?</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="117">
          <span class="hits">5</span>
          
          <code class="ruby">      elsif current_directory &amp;&amp; File.exist?(&quot;#{current_directory}/#{file}&quot;)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="118">
          <span class="hits">4</span>
          
          <code class="ruby">        Pathname.new(&quot;#{current_directory}/#{file}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">      # Is it a path relative to the current plugin&#39;s Origen.root?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="120">
          <span class="hits">1</span>
          
          <code class="ruby">      elsif Origen.app.plugins.current &amp;&amp; File.exist?(&quot;#{Origen.app.plugins.current.root}/#{file}&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="121">
          
          
          <code class="ruby">        Pathname.new(&quot;#{Origen.app.plugins.current.root}/#{file}&quot;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="122">
          <span class="hits">1</span>
          
          <code class="ruby">      elsif options[:default_dir]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="123">
          
          
          <code class="ruby">        m = all_matches(file, options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="124">
          
          
          <code class="ruby">        if m</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="125">
          
          
          <code class="ruby">          Pathname.new(m)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="127">
          
          
          <code class="ruby">          if options[:allow_missing]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">            return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="130">
          
          
          <code class="ruby">            fail &quot;Can&#39;t find: #{file}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="134">
          <span class="hits">1</span>
          
          <code class="ruby">        if options[:allow_missing]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">          return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="137">
          
          
          <code class="ruby">          fail &quot;Can&#39;t find: #{file}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="142">
          <span class="hits">2</span>
          
          <code class="ruby">    def check(path)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="143">
          
          
          <code class="ruby">      file_plugin = Origen.app.plugins.path_within_a_plugin(path)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="144">
          
          
          <code class="ruby">      if file_plugin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="145">
          
          
          <code class="ruby">        if Origen.app.plugins.current</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="146">
          
          
          <code class="ruby">          if file_plugin == Origen.app.plugins.current.name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="147">
          
          
          <code class="ruby">            return path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="149">
          
          
          <code class="ruby">            puts &quot;The requested file is from plugin #{file_plugin} and current system plugin is set to plugin #{Origen.app.plugins.current.name}!&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="150">
          
          
          <code class="ruby">            fail &#39;Incorrect plugin error!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="153">
          
          
          <code class="ruby">          Origen.app.plugins.temporary = file_plugin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="154">
          
          
          <code class="ruby">          return path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="157">
          
          
          <code class="ruby">        return path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="161">
          <span class="hits">2</span>
          
          <code class="ruby">    def all_matches(file, options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="162">
          
          
          <code class="ruby">      if Origen.app.plugins.current</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="163">
          
          
          <code class="ruby">        matches = Dir.glob(&quot;#{options[:default_dir]}/#{Origen.app.plugins.current.name}/**/#{file}&quot;).sort</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="164">
          
          
          <code class="ruby">        matches = matches.flatten.uniq</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="165">
          
          
          <code class="ruby">        if matches.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="166">
          
          
          <code class="ruby">          matches = Dir.glob(&quot;#{options[:default_dir]}/**/#{file}&quot;).sort</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="167">
          
          
          <code class="ruby">          matches = matches.flatten.uniq</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="170">
          
          
          <code class="ruby">        matches = (Dir.glob(&quot;#{options[:default_dir]}/**/#{file}&quot;) + # Avoids symlinks</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="171">
          
          
          <code class="ruby">                    Dir.glob(&quot;#{options[:default_dir]}/#{file}&quot;)).sort</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="172">
          
          
          <code class="ruby">        if matches.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="173">
          
          
          <code class="ruby">          matches = Dir.glob(&quot;#{options[:default_dir]}/**{,/*/**}/#{file}&quot;).sort # Takes symlinks into consideration</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="174">
          
          
          <code class="ruby">          matches = matches.flatten.uniq</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="178">
          
          
          <code class="ruby">      if matches.size == 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="180">
          
          
          <code class="ruby">      elsif matches.size &gt; 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="181">
          
          
          <code class="ruby">        puts &#39;The following matches were found:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="182">
          
          
          <code class="ruby">        puts matches</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="183">
          
          
          <code class="ruby">        fail &quot;Ambiguous file #{file}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="185">
          
          
          <code class="ruby">        return check(matches.first)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">    # Returns an absolute path for the given</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="190">
          <span class="hits">2</span>
          
          <code class="ruby">    def relative_to_absolute(path)</code>
        </li>
      
        <li class="covered" data-hits="56" data-linenumber="191">
          <span class="hits">56</span>
          
          <code class="ruby">      if Pathname.new(path).absolute?</code>
        </li>
      
        <li class="covered" data-hits="44" data-linenumber="192">
          <span class="hits">44</span>
          
          <code class="ruby">        Pathname.new(path)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="194">
          <span class="hits">12</span>
          
          <code class="ruby">        Pathname.new(&quot;#{Pathname.pwd}/#{path}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="197">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="198">
          <span class="hits">2</span>
          
          <code class="ruby">    def relative_path_to(path)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="199">
          
          
          <code class="ruby">      clean_path_to(path).relative_path_from(Pathname.pwd)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="202">
          <span class="hits">2</span>
          
          <code class="ruby">    def clean_path_to_sub_template(file)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="203">
          <span class="hits">18</span>
          
          <code class="ruby">      if File.exist?(file)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="204">
          <span class="hits">2</span>
          
          <code class="ruby">        if Pathname.new(file).absolute?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="205">
          <span class="hits">2</span>
          
          <code class="ruby">          return Pathname.new(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="206">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="207">
          
          
          <code class="ruby">          return Pathname.new(&quot;#{Pathname.pwd}/#{file}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="208">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="210">
          <span class="hits">16</span>
          
          <code class="ruby">      file = inject_import_path(file, type: :template)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="211">
          <span class="hits">16</span>
          
          <code class="ruby">      file = add_underscore_to(file)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="212">
          <span class="hits">16</span>
          
          <code class="ruby">      file = add_extension_to(file)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="213">
          <span class="hits">16</span>
          
          <code class="ruby">      begin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby">        # Allow relative references to templates/web when compiling a web template</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="215">
          <span class="hits">16</span>
          
          <code class="ruby">        if Origen.lsf.current_command == &#39;web&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="216">
          
          
          <code class="ruby">          clean_path_to(file, load_paths: &quot;#{Origen.root}/templates/web&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="218">
          <span class="hits">16</span>
          
          <code class="ruby">          clean_path_to(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">      rescue</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby">        # Try again without .erb</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="222">
          
          
          <code class="ruby">        file = file.gsub(&#39;.erb&#39;, &#39;&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="223">
          
          
          <code class="ruby">        if Origen.lsf.current_command == &#39;web&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="224">
          
          
          <code class="ruby">          clean_path_to(file, load_paths: &quot;#{Origen.root}/templates/web&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="226">
          
          
          <code class="ruby">          clean_path_to(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="231">
          <span class="hits">2</span>
          
          <code class="ruby">    def clean_path_to_template(file)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="232">
          <span class="hits">2</span>
          
          <code class="ruby">      file = inject_import_path(file, type: :template)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="233">
          <span class="hits">2</span>
          
          <code class="ruby">      file = add_extension_to(file)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="234">
          <span class="hits">2</span>
          
          <code class="ruby">      clean_path_to(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby">    # If the current path looks like it is a reference to an import, the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby">    # path will be replaced with the absolute path to the local import directory</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="239">
          <span class="hits">2</span>
          
          <code class="ruby">    def inject_import_path(path, options = {})</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="240">
          <span class="hits">36</span>
          
          <code class="ruby">      path = path.to_s unless path.is_a?(String)</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="241">
          <span class="hits">36</span>
          
          <code class="ruby">      if path =~ /(.*?)\/.*/</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="242">
          <span class="hits">23</span>
          
          <code class="ruby">        import_name = Regexp.last_match[1].downcase.to_sym</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="243">
          <span class="hits">23</span>
          
          <code class="ruby">        if import_name == :origen || import_name == :origen_core || Origen.app.plugins.names.include?(import_name) ||</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">           import_name == :doc_helpers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby">          # Special case to allow a shortcut for this common import plugin and to also handle legacy</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby">          # code from when it was called doc_helpers instead of origen_doc_helpers</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="247">
          
          
          <code class="ruby">          if import_name == :doc_helpers</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="248">
          
          
          <code class="ruby">            root = Origen.app(:origen_doc_helpers).root</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="250">
          
          
          <code class="ruby">            unless import_name == :origen || import_name == :origen_core</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="251">
          
          
          <code class="ruby">              root = Origen.app(import_name).root</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="254">
          
          
          <code class="ruby">          if options[:type] == :template</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="255">
          
          
          <code class="ruby">            if import_name == :origen || import_name == :origen_core</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="256">
          
          
          <code class="ruby">              path.sub! &#39;origen&#39;, &quot;#{Origen.top}/templates/shared&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="257">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="258">
          
          
          <code class="ruby">              path.sub! Regexp.last_match[1], &quot;#{root}/templates/shared&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="261">
          
          
          <code class="ruby">            fail &#39;Unknown import path type!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="262">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="265">
          <span class="hits">36</span>
          
          <code class="ruby">      path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="266">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="268">
          <span class="hits">2</span>
          
          <code class="ruby">    def clean_path_to_sub_program(file)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="269">
          <span class="hits">22</span>
          
          <code class="ruby">      file = add_underscore_to(file)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="270">
          <span class="hits">22</span>
          
          <code class="ruby">      file = add_rb_to(file)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="271">
          <span class="hits">22</span>
          
          <code class="ruby">      clean_path_to(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="273">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="274">
          
          
          <code class="ruby">    # Insert _ in file name if not present</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="275">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_underscore_to(file)</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="276">
          <span class="hits">38</span>
          
          <code class="ruby">      f = Pathname.new(file)</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="277">
          <span class="hits">38</span>
          
          <code class="ruby">      if f.basename.to_s =~ /^_/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="278">
          
          
          <code class="ruby">        file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="279">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="280">
          <span class="hits">38</span>
          
          <code class="ruby">        &quot;#{f.dirname}/_#{f.basename}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="283">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="284">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_rb_to(file)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="285">
          <span class="hits">22</span>
          
          <code class="ruby">      f = Pathname.new(file)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="286">
          <span class="hits">22</span>
          
          <code class="ruby">      &quot;#{f.dirname}/#{f.basename(&#39;.rb&#39;)}.rb&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="287">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="289">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_extension_to(file)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="290">
          <span class="hits">18</span>
          
          <code class="ruby">      f = Pathname.new(file)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="291">
          <span class="hits">18</span>
          
          <code class="ruby">      if f.basename(&#39;.erb&#39;).extname.empty?</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="292">
          <span class="hits">14</span>
          
          <code class="ruby">        if default_extension</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="293">
          <span class="hits">2</span>
          
          <code class="ruby">          &quot;#{f.dirname}/#{f.basename(&#39;.erb&#39;)}#{default_extension}.erb&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="294">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="295">
          <span class="hits">12</span>
          
          <code class="ruby">          &quot;#{f.dirname}/#{f.basename(&#39;.erb&#39;)}#{Pathname.new(Origen.file_handler.current_file).basename(&#39;.erb&#39;).extname}.erb&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="296">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="297">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="298">
          <span class="hits">4</span>
          
          <code class="ruby">        &quot;#{f.dirname}/#{f.basename(&#39;.erb&#39;)}.erb&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="300">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="301">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="302">
          <span class="hits">2</span>
          
          <code class="ruby">    def set_output_directory(options = {})</code>
        </li>
      
        <li class="covered" data-hits="117" data-linenumber="303">
          <span class="hits">117</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby">        create: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="305">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="117" data-linenumber="306">
          <span class="hits">117</span>
          
          <code class="ruby">      if options[:output]</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="307">
          <span class="hits">22</span>
          
          <code class="ruby">        @output_directory = relative_to_absolute(options[:output])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="308">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="95" data-linenumber="309">
          <span class="hits">95</span>
          
          <code class="ruby">        @output_directory = Pathname.new(Origen.config.output_directory)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="117" data-linenumber="311">
          <span class="hits">117</span>
          
          <code class="ruby">      if options[:create]</code>
        </li>
      
        <li class="covered" data-hits="117" data-linenumber="312">
          <span class="hits">117</span>
          
          <code class="ruby">        FileUtils.mkdir_p(@output_directory) unless @output_directory.exist?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="313">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="117" data-linenumber="314">
          <span class="hits">117</span>
          
          <code class="ruby">      @output_directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="315">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="316">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="317">
          
          
          <code class="ruby">    # Returns an absolute pathname to the current output directory</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="318">
          <span class="hits">2</span>
          
          <code class="ruby">    def output_directory</code>
        </li>
      
        <li class="covered" data-hits="530" data-linenumber="319">
          <span class="hits">530</span>
          
          <code class="ruby">      @output_directory ||= set_output_directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="320">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="321">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="322">
          <span class="hits">2</span>
          
          <code class="ruby">    def set_reference_directory(options = {})</code>
        </li>
      
        <li class="covered" data-hits="117" data-linenumber="323">
          <span class="hits">117</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="324">
          
          
          <code class="ruby">        create: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="325">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="117" data-linenumber="326">
          <span class="hits">117</span>
          
          <code class="ruby">      if options[:reference]</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="327">
          <span class="hits">34</span>
          
          <code class="ruby">        @reference_directory = relative_to_absolute(options[:reference])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="328">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="329">
          <span class="hits">83</span>
          
          <code class="ruby">        @reference_directory = Pathname.new(Origen.config.reference_directory)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="330">
          
          
          <code class="ruby">        # Create the reference output directory if it does not exist.</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="331">
          <span class="hits">83</span>
          
          <code class="ruby">        FileUtils.mkdir_p(@reference_directory) unless @reference_directory.exist?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="332">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="117" data-linenumber="333">
          <span class="hits">117</span>
          
          <code class="ruby">      if options[:create]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby">        # Delete any broken symlinks in the top level .ref</code>
        </li>
      
        <li class="covered" data-hits="117" data-linenumber="335">
          <span class="hits">117</span>
          
          <code class="ruby">        dir = &quot;#{Origen.root}/.ref&quot;</code>
        </li>
      
        <li class="covered" data-hits="117" data-linenumber="336">
          <span class="hits">117</span>
          
          <code class="ruby">        if File.symlink?(dir)</code>
        </li>
      
        <li class="covered" data-hits="117" data-linenumber="337">
          <span class="hits">117</span>
          
          <code class="ruby">          FileUtils.rm_f(dir) unless File.exist?(dir)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="338">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="117" data-linenumber="339">
          <span class="hits">117</span>
          
          <code class="ruby">        FileUtils.mkdir_p(@reference_directory) unless @reference_directory.exist?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="340">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="117" data-linenumber="341">
          <span class="hits">117</span>
          
          <code class="ruby">      @reference_directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="342">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="343">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="344">
          
          
          <code class="ruby">    # Returns an absolute pathname to the current reference directory</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="345">
          <span class="hits">2</span>
          
          <code class="ruby">    def reference_directory</code>
        </li>
      
        <li class="covered" data-hits="79" data-linenumber="346">
          <span class="hits">79</span>
          
          <code class="ruby">      @reference_directory ||= set_reference_directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="347">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="348">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="349">
          
          
          <code class="ruby">    # Returns the base directory containing the source files being generated/compiled.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="350">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="351">
          
          
          <code class="ruby">    # When operating on a single file this will return the directory containing that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="352">
          
          
          <code class="ruby">    # file, when operating on a directory this will return the directory.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="353">
          <span class="hits">2</span>
          
          <code class="ruby">    def base_directory</code>
        </li>
      
        <li class="covered" data-hits="99" data-linenumber="354">
          <span class="hits">99</span>
          
          <code class="ruby">      @base_directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="355">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="356">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="357">
          <span class="hits">2</span>
          
          <code class="ruby">    def base_directory=(file_or_dir)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="358">
          
          
          <code class="ruby">      # puts &quot;Base directory changed by: #{caller[0]}&quot;</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="359">
          <span class="hits">27</span>
          
          <code class="ruby">      if file_or_dir.directory?</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="360">
          <span class="hits">21</span>
          
          <code class="ruby">        @base_directory = file_or_dir</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="361">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="362">
          <span class="hits">6</span>
          
          <code class="ruby">        @base_directory = file_or_dir.dirname</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="363">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="364">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="365">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="366">
          <span class="hits">2</span>
          
          <code class="ruby">    def current_directory</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="367">
          <span class="hits">13</span>
          
          <code class="ruby">      return @current_directory if @current_directory</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="368">
          <span class="hits">5</span>
          
          <code class="ruby">      @current_directory = clean_path_to(current_file).dirname if current_file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="369">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="370">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="371">
          <span class="hits">2</span>
          
          <code class="ruby">    def current_file=(file)</code>
        </li>
      
        <li class="covered" data-hits="99" data-linenumber="372">
          <span class="hits">99</span>
          
          <code class="ruby">      @current_directory = nil</code>
        </li>
      
        <li class="covered" data-hits="99" data-linenumber="373">
          <span class="hits">99</span>
          
          <code class="ruby">      @current_file = file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="374">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="375">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="376">
          <span class="hits">2</span>
          
          <code class="ruby">    def current_file</code>
        </li>
      
        <li class="covered" data-hits="1397" data-linenumber="377">
          <span class="hits">1397</span>
          
          <code class="ruby">      @current_file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="378">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="380">
          <span class="hits">2</span>
          
          <code class="ruby">    def preserve_current_file</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="381">
          <span class="hits">2</span>
          
          <code class="ruby">      file = current_file</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="382">
          <span class="hits">2</span>
          
          <code class="ruby">      yield</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="383">
          <span class="hits">2</span>
          
          <code class="ruby">      self.current_file = file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="384">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="385">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="386">
          <span class="hits">2</span>
          
          <code class="ruby">    def preserve_state</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="387">
          <span class="hits">22</span>
          
          <code class="ruby">      file = current_file</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="388">
          <span class="hits">22</span>
          
          <code class="ruby">      dir = base_directory</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="389">
          <span class="hits">22</span>
          
          <code class="ruby">      output = output_directory</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="390">
          <span class="hits">22</span>
          
          <code class="ruby">      ref = reference_directory</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="391">
          <span class="hits">22</span>
          
          <code class="ruby">      ext = default_extension</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="392">
          <span class="hits">22</span>
          
          <code class="ruby">      yield</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="393">
          <span class="hits">22</span>
          
          <code class="ruby">      self.base_directory = dir if dir</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="394">
          <span class="hits">22</span>
          
          <code class="ruby">      self.current_file = file if file</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="395">
          <span class="hits">22</span>
          
          <code class="ruby">      set_output_directory(output: output) if output</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="396">
          <span class="hits">22</span>
          
          <code class="ruby">      set_reference_directory(reference: ref) if ref</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="397">
          <span class="hits">22</span>
          
          <code class="ruby">      self.default_extension = ext</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="398">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="399">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="400">
          <span class="hits">2</span>
          
          <code class="ruby">    def preserve_and_clear_state</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="401">
          
          
          <code class="ruby">      file = current_file</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="402">
          
          
          <code class="ruby">      dir = base_directory</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="403">
          
          
          <code class="ruby">      output = output_directory</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="404">
          
          
          <code class="ruby">      ref = reference_directory</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="405">
          
          
          <code class="ruby">      ext = default_extension</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="406">
          
          
          <code class="ruby">      current_file = nil</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="407">
          
          
          <code class="ruby">      base_directory = nil</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="408">
          
          
          <code class="ruby">      output_directory = nil</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="409">
          
          
          <code class="ruby">      reference_directory = nil</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="410">
          
          
          <code class="ruby">      yield</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="411">
          
          
          <code class="ruby">      self.base_directory = dir if dir</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="412">
          
          
          <code class="ruby">      self.current_file = file if file</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="413">
          
          
          <code class="ruby">      set_output_directory(output: output) if output</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="414">
          
          
          <code class="ruby">      set_reference_directory(reference: ref) if ref</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="415">
          
          
          <code class="ruby">      self.default_extension = ext</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="416">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="417">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="418">
          
          
          <code class="ruby">    # Returns the sub directory of the current base directory that the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="419">
          
          
          <code class="ruby">    # given file is in</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="420">
          <span class="hits">2</span>
          
          <code class="ruby">    def sub_dir_of(file, base = base_directory)</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="421">
          <span class="hits">36</span>
          
          <code class="ruby">      file = Pathname.new(file) unless file.respond_to?(:relative_path_from)</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="422">
          <span class="hits">36</span>
          
          <code class="ruby">      base = Pathname.new(base) unless base.respond_to?(:relative_path_from)</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="423">
          <span class="hits">36</span>
          
          <code class="ruby">      rel = file.relative_path_from(base)</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="424">
          <span class="hits">36</span>
          
          <code class="ruby">      if file.directory?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="425">
          
          
          <code class="ruby">        rel</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="426">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="427">
          <span class="hits">36</span>
          
          <code class="ruby">        rel.dirname</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="428">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="429">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="430">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="431">
          
          
          <code class="ruby">    # Convenience method to use when you want to write to a file, this takes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="432">
          
          
          <code class="ruby">    # care of ensuring that the directory exists prior to attempting to open</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="433">
          
          
          <code class="ruby">    # the file</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="434">
          <span class="hits">2</span>
          
          <code class="ruby">    def open_for_write(path)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="435">
          <span class="hits">2</span>
          
          <code class="ruby">      dir = Pathname.new(path).dirname</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="436">
          <span class="hits">2</span>
          
          <code class="ruby">      FileUtils.mkdir_p(dir) unless File.exist?(dir)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="437">
          <span class="hits">2</span>
          
          <code class="ruby">      File.open(path, &#39;w&#39;) do |f|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="438">
          <span class="hits">2</span>
          
          <code class="ruby">        yield f</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="439">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="440">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="441">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="442">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="6b3b252934c00837a735c189ac70a6f2823aa009">
  <div class="header">
    <h3>lib/origen/generator/compiler.rb</h3>
    <h4><span class="red">72.79 %</span> covered</h4>
    <div>
      <b>147</b> relevant lines. 
      <span class="green"><b>107</b> lines covered</span> and
      <span class="red"><b>40</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  class Generator</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    class Compiler # :nodoc: all</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">      require &#39;fileutils&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">      require &#39;erb&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">      require &#39;pathname&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">      require &quot;#{Origen.top}/helpers/url&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">      include Helpers</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">      include Comparator</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">      include Renderer</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      # During a compile this will return the current top-level file being compiled</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      #   Origen.generator.compiler.current_file   # =&gt; Pathname</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :current_file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      # Where compile will place the compiled content in an output file, this method will return</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      # it as a string to the caller (i.e. without creating an output file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">      # It expects an absolute path to a single template file as the file argument.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="25">
          <span class="hits">2</span>
          
          <code class="ruby">      def compile_inline(file, options = {})</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="26">
          <span class="hits">7</span>
          
          <code class="ruby">        initial_options = options.merge({})</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="27">
          <span class="hits">7</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">          check_for_changes: false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">          sub_template:      false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">          collect_stats:     false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">          initial_options:   initial_options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="33">
          <span class="hits">7</span>
          
          <code class="ruby">        @scope = options[:scope]</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="34">
          <span class="hits">7</span>
          
          <code class="ruby">        file = Pathname.new(file) unless options[:string]</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="35">
          <span class="hits">7</span>
          
          <code class="ruby">        run_erb(file, options).strip</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">      # Compile all files found under the source directory, non-erb files will be copied</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      # to the destination un-altered</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="40">
          <span class="hits">2</span>
          
          <code class="ruby">      def compile(file_or_dir, options = {})</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="41">
          <span class="hits">26</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">          check_for_changes: true,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">          sub_template:      false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">          collect_stats:     true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="46">
          <span class="hits">26</span>
          
          <code class="ruby">        @scope = options[:scope]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">        # Doing here so the output_directory (requiring target load) doesn&#39;t get hit if</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">        # it is already defined</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="49">
          <span class="hits">26</span>
          
          <code class="ruby">        options[:output_directory] ||= output_directory</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="50">
          <span class="hits">26</span>
          
          <code class="ruby">        @check_for_changes = options[:check_for_changes]</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="51">
          <span class="hits">26</span>
          
          <code class="ruby">        @options = options</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="52">
          <span class="hits">26</span>
          
          <code class="ruby">        if options[:sub_template]</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="53">
          <span class="hits">18</span>
          
          <code class="ruby">          block = options.delete(:block)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="54">
          <span class="hits">18</span>
          
          <code class="ruby">          if is_erb?(file_or_dir)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="55">
          <span class="hits">18</span>
          
          <code class="ruby">            run_erb(file_or_dir, options, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="57">
          
          
          <code class="ruby">            f = File.open(file_or_dir)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="58">
          
          
          <code class="ruby">            content = f.read</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="59">
          
          
          <code class="ruby">            f.close</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="60">
          
          
          <code class="ruby">            insert(content)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="63">
          <span class="hits">8</span>
          
          <code class="ruby">          Origen.file_handler.resolve_files(file_or_dir, ignore_with_prefix: &#39;_&#39;, import: :template) do |file|</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="64">
          <span class="hits">9</span>
          
          <code class="ruby">            compile_file(file, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="69">
          <span class="hits">2</span>
          
          <code class="ruby">      def merge(file_or_dir, options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">        # Compile an up to date reference</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="71">
          
          
          <code class="ruby">        compile(file_or_dir_path, check_for_changes: false, output_directory: merge_reference_directory)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="72">
          
          
          <code class="ruby">        diffs = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="73">
          
          
          <code class="ruby">        Origen.file_handler.resolve_files(file_or_dir, ignore_with_prefix: &#39;_&#39;) do |file|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="74">
          
          
          <code class="ruby">          diffs &lt;&lt; merge_file(file, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="76">
          
          
          <code class="ruby">        diffs.compact!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="77">
          
          
          <code class="ruby">        puts &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="78">
          
          
          <code class="ruby">        if diffs.size &gt; 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="79">
          
          
          <code class="ruby">          puts &#39;The following differences are present in the compiled files and must be resolved manually:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="80">
          
          
          <code class="ruby">          puts &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="81">
          
          
          <code class="ruby">          diffs.each do |diff|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="82">
          
          
          <code class="ruby">            puts diff</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="84">
          
          
          <code class="ruby">          puts &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="86">
          
          
          <code class="ruby">          puts &#39;Merged successfully!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="90">
          <span class="hits">2</span>
          
          <code class="ruby">      def stats</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="91">
          <span class="hits">9</span>
          
          <code class="ruby">        Origen.app.stats</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">      # Compile the supplied file if it is an erb template writing the compiled</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">      # version to the destination directory.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">      # If the file is not an erb template it is simply copied un-altered to the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">      # destination directory.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">      # File must be an absolute path to the file.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="99">
          <span class="hits">2</span>
          
          <code class="ruby">      def compile_file(file, options = {})</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="100">
          <span class="hits">9</span>
          
          <code class="ruby">        @current_file = Pathname.new(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">        # This is used when templates are compiled through a test program, but can</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">        # be problematic when used to compile files standalone. In practice this may</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">        # not be an issue except when testing Origen and generating and compiling within</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">        # the same thread, but clearing this here doesn&#39;t seem to do any harm.</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="105">
          <span class="hits">9</span>
          
          <code class="ruby">        Origen.file_handler.default_extension = nil</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="106">
          <span class="hits">9</span>
          
          <code class="ruby">        Origen.log.info &quot;Compiling... #{relative_path_to(file)}&quot; unless options[:quiet]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="107">
          <span class="hits">9</span>
          
          <code class="ruby">        Origen.log.info &quot;  Created... #{relative_path_to(output_file(file, options))}&quot; unless options[:quiet]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="108">
          <span class="hits">9</span>
          
          <code class="ruby">        stats.completed_files += 1 if options[:collect_stats]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="109">
          <span class="hits">9</span>
          
          <code class="ruby">        if is_erb?(file)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="110">
          <span class="hits">8</span>
          
          <code class="ruby">          output = run_erb(file, options)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="111">
          <span class="hits">8</span>
          
          <code class="ruby">          f = output_file(file, options).to_s</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="112">
          <span class="hits">8</span>
          
          <code class="ruby">          if output.is_a?(Pathname)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="113">
          
          
          <code class="ruby">            FileUtils.mv output.to_s, f</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="115">
          <span class="hits">16</span>
          
          <code class="ruby">            File.open(f, &#39;w&#39;) { |out| out.puts output }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">        else  # Just copy it across</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="118">
          <span class="hits">1</span>
          
          <code class="ruby">          out = output_file(file, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">          # Delete the target if it already exists, this prevents permission denied errors when copying</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="120">
          <span class="hits">1</span>
          
          <code class="ruby">          FileUtils.rm_f(out.to_s) if File.exist?(out.to_s)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="121">
          <span class="hits">1</span>
          
          <code class="ruby">          FileUtils.cp(file.to_s, out.dirname.to_s)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="123">
          <span class="hits">9</span>
          
          <code class="ruby">        if options[:zip]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="124">
          
          
          <code class="ruby">          `gzip -f -9 #{output_file(file, options)}`</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="126">
          <span class="hits">9</span>
          
          <code class="ruby">          if @check_for_changes</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="127">
          <span class="hits">9</span>
          
          <code class="ruby">            check_for_changes(output_file(file, options), reference_file(file, options),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">                              comment_char: Origen.app.tester ? Origen.app.tester.program_comment_char : nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">                              compile_job:  true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="134">
          <span class="hits">2</span>
          
          <code class="ruby">      def run_erb(file, opts = {}, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">        # Refresh the target to start all settings from scratch each time</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">        # This is an easy way to reset all registered values</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="137">
          <span class="hits">33</span>
          
          <code class="ruby">        Origen.app.reload_target! unless options[:preserve_target]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">        # Record the current file, this can be used to resolve any relative path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">        # references in the file about to be compiled</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="140">
          <span class="hits">33</span>
          
          <code class="ruby">        Origen.file_handler.current_file = file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">        # Make the file and options available to the template</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="142">
          <span class="hits">33</span>
          
          <code class="ruby">        if opts[:initial_options] || opts[:options]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="143">
          <span class="hits">9</span>
          
          <code class="ruby">          options.merge!(opts.delete(:initial_options) || opts.delete(:options))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="145">
          <span class="hits">33</span>
          
          <code class="ruby">        options[:file] = file</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="146">
          <span class="hits">33</span>
          
          <code class="ruby">        options[:top_level_file] = current_file</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="147">
          <span class="hits">33</span>
          
          <code class="ruby">        b = _get_binding(opts, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="148">
          <span class="hits">33</span>
          
          <code class="ruby">        if opts[:string]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="149">
          <span class="hits">1</span>
          
          <code class="ruby">          content = file</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="150">
          <span class="hits">1</span>
          
          <code class="ruby">          @current_buffer = &#39;@_string_template&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="151">
          <span class="hits">1</span>
          
          <code class="ruby">          buffer = @current_buffer</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="153">
          <span class="hits">32</span>
          
          <code class="ruby">          content = File.read(file.to_s)</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="154">
          <span class="hits">32</span>
          
          <code class="ruby">          buffer = buffer_name_for(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="156">
          <span class="hits">33</span>
          
          <code class="ruby">        if block_given?</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="157">
          <span class="hits">3</span>
          
          <code class="ruby">          content = ERB.new(content, 0, &#39;%&lt;&gt;&#39;, buffer).result(b)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="159">
          <span class="hits">30</span>
          
          <code class="ruby">          content = ERB.new(content, 0, Origen.config.erb_trim_mode, buffer).result(b)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="161">
          <span class="hits">33</span>
          
          <code class="ruby">        insert(content)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="165">
          <span class="hits">2</span>
          
          <code class="ruby">      def _get_binding(opts, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">        # Important, don&#39;t declare any local variable called options here,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby">        # the scope of this method will be the default for any templates and</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">        # we want options to refer to the global options method</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="169">
          <span class="hits">33</span>
          
          <code class="ruby">        b = opts[:binding] || opts[:scope] || binding</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">        # If an object has been supplied as the scope, then do some tricks</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">        # to get a hold of its internal scope</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="172">
          <span class="hits">33</span>
          
          <code class="ruby">        unless b.is_a?(Binding)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="173">
          <span class="hits">5</span>
          
          <code class="ruby">          b.define_singleton_method :_get_binding do |local_opts, &amp;_block|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby">            # rubocop:disable Lint/UselessAssignment</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="175">
          <span class="hits">5</span>
          
          <code class="ruby">            options = local_opts</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby">            # rubocop:enable Lint/UselessAssignment</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="177">
          <span class="hits">5</span>
          
          <code class="ruby">            binding</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">          # Here the global options, the ones visible right now, are passed to into the method defined above,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby">          # they will get assigned to the local variable called option and that is what the template will</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby">          # be able to see</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="182">
          <span class="hits">5</span>
          
          <code class="ruby">          b = b._get_binding(options, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="184">
          <span class="hits">33</span>
          
          <code class="ruby">        b</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="187">
          <span class="hits">2</span>
          
          <code class="ruby">      def current_buffer</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="188">
          <span class="hits">3</span>
          
          <code class="ruby">        (@scope || self).instance_variable_get(@current_buffer || &#39;@_anonymous&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="191">
          <span class="hits">2</span>
          
          <code class="ruby">      def current_buffer=(text)</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="192">
          <span class="hits">21</span>
          
          <code class="ruby">        (@scope || self).instance_variable_set(@current_buffer || &#39;@_anonymous&#39;, text)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">      # Returns the ERB buffer name for the given file, something like &quot;@my_file_name&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="196">
          <span class="hits">2</span>
          
          <code class="ruby">      def buffer_name_for(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="197">
          
          
          <code class="ruby">        # Not sure why the final gsub is needed but seems to fail to parse correctly otherwise.</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="198">
          <span class="hits">32</span>
          
          <code class="ruby">        @current_buffer = &quot;@_#{file.basename(&#39;.*&#39;).basename(&#39;.*&#39;).to_s.gsub(&#39;-&#39;, &#39;_&#39;)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="201">
          <span class="hits">2</span>
          
          <code class="ruby">      def merge_file(file, _options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="202">
          
          
          <code class="ruby">        file = Pathname.new(file)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="203">
          
          
          <code class="ruby">        Origen.log.info &quot;Merging... #{file.basename}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="204">
          
          
          <code class="ruby">        if is_erb?(file) &amp;&amp; File.exist?(output_file(file))</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="205">
          
          
          <code class="ruby">          check_for_differences(output_file(file), merge_ref_file(file), file)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="206">
          
          
          <code class="ruby">        elsif File.exist?(output_file(file))</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="207">
          
          
          <code class="ruby">          if check_for_differences(output_file(file), merge_ref_file(file), file)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="208">
          
          
          <code class="ruby">            FileUtils.cp(output_file(file), file.dirname.to_s)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="213">
          <span class="hits">2</span>
          
          <code class="ruby">      def display_path_to(file)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="214">
          
          
          <code class="ruby">        p = relative_path_to(file).to_s</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="215">
          
          
          <code class="ruby">        p.gsub!(&#39;/&#39;, &#39;\\&#39;) if Origen.running_on_windows?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="216">
          
          
          <code class="ruby">        p</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="219">
          <span class="hits">2</span>
          
          <code class="ruby">      def check_for_differences(a, b, file)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="220">
          
          
          <code class="ruby">        if check_for_changes(a, b, comment_char: [&quot;&#39;&quot;, &#39;logprint&#39;], quiet: true, compile_job: true)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="221">
          
          
          <code class="ruby">          puts &quot;*** CHANGE DETECTED *** To rollback:  #{Origen.config.copy_command} #{display_path_to(b)} #{display_path_to(a)}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="222">
          
          
          <code class="ruby">          &quot;#{Origen.config.diff_command} #{display_path_to(a)} #{display_path_to(b)} &amp; #{ENV[&#39;EDITOR&#39;]} #{file.cleanpath} &amp;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="226">
          
          
          <code class="ruby">      # Returns true if the supplied file name has a .erb extension</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="227">
          <span class="hits">2</span>
          
          <code class="ruby">      def is_erb?(file)</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="228">
          <span class="hits">27</span>
          
          <code class="ruby">        !!(file.to_s =~ /.erb$/) || !Origen.config.compile_only_dot_erb_files</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="231">
          <span class="hits">2</span>
          
          <code class="ruby">      def output_directory</code>
        </li>
      
        <li class="covered" data-hits="53" data-linenumber="232">
          <span class="hits">53</span>
          
          <code class="ruby">        Origen.file_handler.output_directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="233">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="235">
          <span class="hits">2</span>
          
          <code class="ruby">      def reference_directory</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="236">
          <span class="hits">9</span>
          
          <code class="ruby">        Origen.file_handler.reference_directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="239">
          <span class="hits">2</span>
          
          <code class="ruby">      def merge_reference_directory</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="240">
          
          
          <code class="ruby">        &quot;#{Origen.root}/.merge_ref&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby">      # Returns the output file corresponding to the given source file, the destination</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">      # directory will be created if it doesn&#39;t exist.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="245">
          <span class="hits">2</span>
          
          <code class="ruby">      def output_file(file, options = {})</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="246">
          <span class="hits">27</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby">          output_directory: output_directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="248">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">        # return @output_file if @output_file</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="250">
          <span class="hits">27</span>
          
          <code class="ruby">        sub_dir = options[:output_sub_dir] || Origen.file_handler.sub_dir_of(file).to_s</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="251">
          <span class="hits">27</span>
          
          <code class="ruby">        sub_dir = nil if sub_dir == &#39;.&#39;</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="252">
          <span class="hits">27</span>
          
          <code class="ruby">        filename = options[:output_file_name] || file.basename.to_s.gsub(&#39;.erb&#39;, &#39;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby">        # filename.gsub!(&#39;target&#39;, $target.id) if filename =~ /target/ &amp;&amp; $target.id</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="254">
          <span class="hits">27</span>
          
          <code class="ruby">        output = Pathname.new(&quot;#{options[:output_directory]}#{sub_dir ? &#39;/&#39; + sub_dir : &#39;&#39;}/#{filename}&quot;)</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="255">
          <span class="hits">27</span>
          
          <code class="ruby">        FileUtils.mkdir_p(output.dirname.to_s) unless File.exist?(output.dirname.to_s)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">        # @output_file = output</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="257">
          <span class="hits">27</span>
          
          <code class="ruby">        output</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby">      # Returns the reference file corresponding to the given source file, the destination</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby">      # directory will be created if it doesn&#39;t exist.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="262">
          <span class="hits">2</span>
          
          <code class="ruby">      def reference_file(file, options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby">        # return @reference_file if @reference_file</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="264">
          <span class="hits">9</span>
          
          <code class="ruby">        sub_dir = Origen.file_handler.sub_dir_of(file).to_s</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="265">
          <span class="hits">9</span>
          
          <code class="ruby">        sub_dir = nil if sub_dir == &#39;.&#39;</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="266">
          <span class="hits">9</span>
          
          <code class="ruby">        filename = options[:output_file_name] || file.basename.to_s.gsub(&#39;.erb&#39;, &#39;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby">        # filename.gsub!(&#39;target&#39;, $target.id) if filename =~ /target/ &amp;&amp; $target.id</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="268">
          <span class="hits">9</span>
          
          <code class="ruby">        reference = Pathname.new(&quot;#{reference_directory}#{sub_dir ? &#39;/&#39; + sub_dir : &#39;&#39;}/#{filename}&quot;)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="269">
          <span class="hits">9</span>
          
          <code class="ruby">        FileUtils.mkdir_p(reference.dirname.to_s) unless File.exist?(reference.dirname.to_s)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="270">
          
          
          <code class="ruby">        # @reference_file = reference</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="271">
          <span class="hits">9</span>
          
          <code class="ruby">        reference</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="273">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="274">
          <span class="hits">2</span>
          
          <code class="ruby">      def merge_ref_file(file, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="275">
          
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="276">
          
          
          <code class="ruby">          directory: merge_reference_directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby">        # return @merge_ref_file if @merge_ref_file</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="279">
          
          
          <code class="ruby">        sub_dir = Origen.file_handler.sub_dir_of(file).to_s</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="280">
          
          
          <code class="ruby">        sub_dir = nil if sub_dir == &#39;.&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="281">
          
          
          <code class="ruby">        filename = file.basename.to_s.gsub(&#39;.erb&#39;, &#39;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby">        # filename.gsub!(&#39;target&#39;, $target.id) if filename =~ /target/ &amp;&amp; $target.id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="283">
          
          
          <code class="ruby">        output = Pathname.new(&quot;#{options[:directory]}#{sub_dir ? &#39;/&#39; + sub_dir : &#39;&#39;}/#{filename}&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="284">
          
          
          <code class="ruby">        FileUtils.mkdir_p(output.dirname.to_s) unless File.exist?(output.dirname.to_s)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="285">
          
          
          <code class="ruby">        # @merge_ref_file = output</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="286">
          
          
          <code class="ruby">        output</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="287">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="289">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="c2d109cada38cd403208a51fd34bbfdb1b81a31c">
  <div class="header">
    <h3>lib/origen/generator/job.rb</h3>
    <h4><span class="yellow">82.89 %</span> covered</h4>
    <div>
      <b>76</b> relevant lines. 
      <span class="green"><b>63</b> lines covered</span> and
      <span class="red"><b>13</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  class Generator</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # A job is responsible for executing a single pattern source</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">    class Job # :nodoc: all</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :output_file_body, :pattern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize(pattern, options)</code>
        </li>
      
        <li class="covered" data-hits="75" data-linenumber="8">
          <span class="hits">75</span>
          
          <code class="ruby">        @testing = options[:testing]</code>
        </li>
      
        <li class="covered" data-hits="75" data-linenumber="9">
          <span class="hits">75</span>
          
          <code class="ruby">        @options = options</code>
        </li>
      
        <li class="covered" data-hits="75" data-linenumber="10">
          <span class="hits">75</span>
          
          <code class="ruby">        @requested_pattern = pattern</code>
        </li>
      
        <li class="covered" data-hits="75" data-linenumber="11">
          <span class="hits">75</span>
          
          <code class="ruby">        @no_comments = options[:no_comments]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      # Returns true if the job is a test job, will only be true in a test scenario</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">      def test?</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="16">
          <span class="hits">94</span>
          
          <code class="ruby">        @testing</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="19">
          <span class="hits">2</span>
          
          <code class="ruby">      def no_comments?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="20">
          
          
          <code class="ruby">        @no_comments</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="23">
          <span class="hits">2</span>
          
          <code class="ruby">      def requested_pattern</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="24">
          <span class="hits">47</span>
          
          <code class="ruby">        @requested_pattern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="26">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :requested_file, :requested_pattern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      # Returns a full path to the output pattern, note that this is not available</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">      # until the job has been run</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="30">
          <span class="hits">2</span>
          
          <code class="ruby">      def output_pattern</code>
        </li>
      
        <li class="covered" data-hits="367" data-linenumber="31">
          <span class="hits">367</span>
          
          <code class="ruby">        &quot;#{output_pattern_directory}/#{output_pattern_filename}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="33">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :output_file, :output_pattern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="35">
          <span class="hits">2</span>
          
          <code class="ruby">      def reference_pattern</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="36">
          <span class="hits">40</span>
          
          <code class="ruby">        &quot;#{reference_pattern_directory}/#{output_pattern_filename}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="38">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :reference_file, :reference_pattern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="40">
          <span class="hits">2</span>
          
          <code class="ruby">      def output_pattern_filename</code>
        </li>
      
        <li class="covered" data-hits="569" data-linenumber="41">
          <span class="hits">569</span>
          
          <code class="ruby">        return &#39;&#39; if @testing</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">        # If the pattern name has been overridden by an interator use that</code>
        </li>
      
        <li class="covered" data-hits="555" data-linenumber="43">
          <span class="hits">555</span>
          
          <code class="ruby">        return @output_pattern_filename if @output_pattern_filename</code>
        </li>
      
        <li class="covered" data-hits="150" data-linenumber="44">
          <span class="hits">150</span>
          
          <code class="ruby">        if !@pattern &amp;&amp; !@output_file_body</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="45">
          
          
          <code class="ruby">          fail &#39;Sorry the output_pattern is not available until the job has been run&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="150" data-linenumber="47">
          <span class="hits">150</span>
          
          <code class="ruby">        body = @output_file_body ? @output_file_body : File.basename(@pattern, &#39;.rb&#39;)</code>
        </li>
      
        <li class="covered" data-hits="150" data-linenumber="48">
          <span class="hits">150</span>
          
          <code class="ruby">        output_prefix + body + output_postfix + output_extension</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      # This can be modified at runtime by the pattern generator in response to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">      # iterator substitutions</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="53">
          <span class="hits">2</span>
          
          <code class="ruby">      def output_pattern_filename=(val)</code>
        </li>
      
        <li class="covered" data-hits="75" data-linenumber="54">
          <span class="hits">75</span>
          
          <code class="ruby">        @output_pattern_filename = val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="57">
          <span class="hits">2</span>
          
          <code class="ruby">      def reset_output_pattern_filename</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="58">
          <span class="hits">47</span>
          
          <code class="ruby">        @output_pattern_filename = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="61">
          <span class="hits">2</span>
          
          <code class="ruby">      def output_pattern_directory</code>
        </li>
      
        <li class="covered" data-hits="407" data-linenumber="62">
          <span class="hits">407</span>
          
          <code class="ruby">        Origen.file_handler.output_directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="65">
          <span class="hits">2</span>
          
          <code class="ruby">      def reference_pattern_directory</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="66">
          <span class="hits">40</span>
          
          <code class="ruby">        Origen.file_handler.reference_directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="69">
          <span class="hits">2</span>
          
          <code class="ruby">      def output_prefix</code>
        </li>
      
        <li class="covered" data-hits="150" data-linenumber="70">
          <span class="hits">150</span>
          
          <code class="ruby">        p = Origen.config.pattern_prefix ? Origen.config.pattern_prefix + &#39;_&#39; : &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="150" data-linenumber="71">
          <span class="hits">150</span>
          
          <code class="ruby">        p = &quot;_#{p}&quot; if Origen.tester.doc?</code>
        </li>
      
        <li class="covered" data-hits="150" data-linenumber="72">
          <span class="hits">150</span>
          
          <code class="ruby">        p</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="75">
          <span class="hits">2</span>
          
          <code class="ruby">      def output_postfix</code>
        </li>
      
        <li class="covered" data-hits="180" data-linenumber="76">
          <span class="hits">180</span>
          
          <code class="ruby">        Origen.config.pattern_postfix ? &#39;_&#39; + Origen.config.pattern_postfix : &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="79">
          <span class="hits">2</span>
          
          <code class="ruby">      def output_extension</code>
        </li>
      
        <li class="covered" data-hits="227" data-linenumber="80">
          <span class="hits">227</span>
          
          <code class="ruby">        &#39;.&#39; + Origen.tester.pat_extension</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="83">
          <span class="hits">2</span>
          
          <code class="ruby">      def run</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="84">
          <span class="hits">26</span>
          
          <code class="ruby">        Origen.app.current_job = self</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="85">
          <span class="hits">26</span>
          
          <code class="ruby">        begin</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="86">
          <span class="hits">26</span>
          
          <code class="ruby">          if @options[:compile]</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="87">
          <span class="hits">8</span>
          
          <code class="ruby">            Origen.generator.compiler.compile(@requested_pattern, @options)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="88">
          <span class="hits">18</span>
          
          <code class="ruby">          elsif @options[:job_type] == :merge</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="89">
          
          
          <code class="ruby">            Origen.generator.compiler.merge(@requested_pattern)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="90">
          <span class="hits">18</span>
          
          <code class="ruby">          elsif @options[:action] == :program</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="91">
          <span class="hits">6</span>
          
          <code class="ruby">            Origen.flow.reset</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="92">
          <span class="hits">6</span>
          
          <code class="ruby">            Origen.resources.reset</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="93">
          <span class="hits">6</span>
          
          <code class="ruby">            OrigenTesters::Generator.execute_source(@pattern)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="95">
          <span class="hits">12</span>
          
          <code class="ruby">            Origen.generator.pattern.reset      # Resets the pattern controller ready for a new pattern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">            # Give the app a chance to handle pattern dispatch</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="97">
          <span class="hits">12</span>
          
          <code class="ruby">            skip = false</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="98">
          <span class="hits">12</span>
          
          <code class="ruby">            Origen.app.listeners_for(:before_pattern_lookup).each do |listener|</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="99">
          <span class="hits">12</span>
          
          <code class="ruby">              skip ||= !listener.before_pattern_lookup(@requested_pattern)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="101">
          <span class="hits">12</span>
          
          <code class="ruby">            unless skip</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="102">
          <span class="hits">12</span>
          
          <code class="ruby">              @pattern = Origen.generator.pattern_finder.find(@requested_pattern, @options)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="103">
          <span class="hits">12</span>
          
          <code class="ruby">              if @pattern.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="104">
          <span class="hits">1</span>
          
          <code class="ruby">                @output_file_body = @pattern[:output]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="105">
          <span class="hits">1</span>
          
          <code class="ruby">                @pattern = @pattern[:pattern]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="107">
          <span class="hits">12</span>
          
          <code class="ruby">              load @pattern unless @pattern == :skip  # Run the pattern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="110">
          
          
          <code class="ruby">        rescue Exception =&gt; e</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="111">
          
          
          <code class="ruby">          if @options[:continue] || Origen.running_remotely?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="112">
          
          
          <code class="ruby">            Origen.log.error &quot;FAILED - #{@requested_pattern} (for target #{Origen.target.name})&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="113">
          
          
          <code class="ruby">            Origen.log.error e.message</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="114">
          
          
          <code class="ruby">            e.backtrace.each do |l|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="115">
          
          
          <code class="ruby">              Origen.log.error l</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="117">
          
          
          <code class="ruby">            if @options[:compile]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="118">
          
          
          <code class="ruby">              Origen.app.stats.failed_files += 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="120">
          
          
          <code class="ruby">              Origen.app.stats.failed_patterns += 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="123">
          
          
          <code class="ruby">            raise</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="e8db790f0d141dbdd0cec66dedd360e8045d367a">
  <div class="header">
    <h3>lib/origen/generator/pattern_finder.rb</h3>
    <h4><span class="red">72.5 %</span> covered</h4>
    <div>
      <b>80</b> relevant lines. 
      <span class="green"><b>58</b> lines covered</span> and
      <span class="red"><b>22</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  class Generator</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # The pattern finder is responsible for finding patterns in the pattern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # directory, allowing the user to create any number of pattern files</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    # in any number of sub directories without having to declare them.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">    class PatternFinder</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      def find(name, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">        # If the pattern is a fully qualified path to a Ruby file, then just run that:</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="9">
          <span class="hits">12</span>
          
          <code class="ruby">        if File.exist?(name) &amp;&amp; name.strip =~ /\.rb$/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="10">
          
          
          <code class="ruby">          return check(name, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="13">
          <span class="hits">12</span>
          
          <code class="ruby">        name = File.basename(name)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="14">
          <span class="hits">12</span>
          
          <code class="ruby">        @requested_pattern = name   # Remember what was originally asked for in case</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">        # it needs to be output in an error message</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">        # Strip the prefix if exists</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="18">
          <span class="hits">12</span>
          
          <code class="ruby">        if Origen.config.pattern_prefix &amp;&amp; name =~ /^#{Origen.config.pattern_prefix}_/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="19">
          
          
          <code class="ruby">          name.gsub!(/^#{Origen.config.pattern_prefix}_/, &#39;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">        # Strip the extension if present</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="23">
          <span class="hits">12</span>
          
          <code class="ruby">        name.gsub!(/\.\w+$/, &#39;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">        # Strip the postfix if exists</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="26">
          <span class="hits">12</span>
          
          <code class="ruby">        if Origen.config.pattern_postfix &amp;&amp; name =~ /_#{Origen.config.pattern_postfix}$/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="27">
          
          
          <code class="ruby">          name.gsub!(/_#{Origen.config.pattern_postfix}$/, &#39;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">        # Otherwise see what can be found...</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="31">
          <span class="hits">12</span>
          
          <code class="ruby">        return :skip unless proceed_with_pattern?(name) # The application has elected not to run this pattern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="33">
          <span class="hits">12</span>
          
          <code class="ruby">        pats = matching_patterns(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">        # If the pattern is not found in current plugin and current app then look into other included plugins as well</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="35">
          <span class="hits">12</span>
          
          <code class="ruby">        if pats.size == 0</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">          pats = all_matches(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="39">
          <span class="hits">12</span>
          
          <code class="ruby">        if pats.size == 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">          # If a pattern can&#39;t be found see if it is because the real pattern name is actually</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">          # a substituted value.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">          # Don&#39;t want to do this up front since it is possible that some patterns</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">          # will actually have an explicit value in the name.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">          translation = Origen.config.pattern_name_translator(name)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="45">
          <span class="hits">1</span>
          
          <code class="ruby">          if translation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="46">
          <span class="hits">1</span>
          
          <code class="ruby">            if translation.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">              name = translation[:source]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="49">
          
          
          <code class="ruby">              name = translation</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="50">
          
          
          <code class="ruby">              translation = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="53">
          <span class="hits">1</span>
          
          <code class="ruby">          return :skip unless proceed_with_pattern?(name) # The application has elected not to run this pattern</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="54">
          <span class="hits">1</span>
          
          <code class="ruby">          pats = matching_patterns(name)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="55">
          <span class="hits">1</span>
          
          <code class="ruby">          if pats.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="56">
          
          
          <code class="ruby">            pats = all_matches(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">        # Last chance see if the supplied name works, this could happen if the user normally</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">        # substitutes the name in before_pattern but here they have a pattern that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">        # actually includes the bit that is normally sub&#39;d out</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="63">
          <span class="hits">12</span>
          
          <code class="ruby">        if pats.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="64">
          
          
          <code class="ruby">          pats = matching_patterns(@requested_pattern)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="65">
          
          
          <code class="ruby">          if pats.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="66">
          
          
          <code class="ruby">            pats = all_matches(@requested_pattern)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="70">
          <span class="hits">12</span>
          
          <code class="ruby">        if pats.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="71">
          
          
          <code class="ruby">          fail &quot;Can&#39;t find: #{@requested_pattern}&quot;</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="72">
          <span class="hits">12</span>
          
          <code class="ruby">        elsif pats.size &gt; 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="73">
          
          
          <code class="ruby">          ambiguous_error(pats)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="76">
          <span class="hits">12</span>
          
          <code class="ruby">          if translation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="77">
          <span class="hits">1</span>
          
          <code class="ruby">            translation.merge(pattern: check(pats.first, options))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="79">
          <span class="hits">11</span>
          
          <code class="ruby">            check(pats.first, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="84">
          <span class="hits">1</span>
          
          <code class="ruby">      def matching_patterns(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">        # Remove extension in case it is something else, e.g. .atp</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="86">
          <span class="hits">13</span>
          
          <code class="ruby">        name = name.gsub(/\..*$/, &#39;&#39;)</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="87">
          <span class="hits">13</span>
          
          <code class="ruby">        matches = []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">        # First look into the current plugin</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="89">
          <span class="hits">13</span>
          
          <code class="ruby">        if current_plugin_pattern_path</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="90">
          <span class="hits">8</span>
          
          <code class="ruby">          matches = Dir.glob(&quot;#{current_plugin_pattern_path}/**/#{name}.rb&quot;).sort</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">          # If the current plugin does  not include the pattern then look into the current app</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="92">
          <span class="hits">8</span>
          
          <code class="ruby">          if matches.size == 0</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="93">
          <span class="hits">7</span>
          
          <code class="ruby">            matches = Dir.glob(&quot;#{pattern_directory}/**/#{name}.rb&quot;).sort # &lt;= this does not include symlinks</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="96">
          <span class="hits">5</span>
          
          <code class="ruby">          matches = Dir.glob(&quot;#{pattern_directory}/**/#{name}.rb&quot;).sort # &lt;= this does not include symlinks</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="99">
          <span class="hits">13</span>
          
          <code class="ruby">        matches</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="102">
          <span class="hits">1</span>
          
          <code class="ruby">      def current_plugin_pattern_path</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="103">
          <span class="hits">21</span>
          
          <code class="ruby">        cp = Origen.app.plugins.current</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="104">
          <span class="hits">21</span>
          
          <code class="ruby">        if cp &amp;&amp; cp.config.shared</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="105">
          <span class="hits">16</span>
          
          <code class="ruby">          path = cp.config.shared[:patterns] || cp.config.shared[:pattern]</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="106">
          <span class="hits">16</span>
          
          <code class="ruby">          File.join(cp.root, path) if path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="110">
          <span class="hits">1</span>
          
          <code class="ruby">      def all_matches(name)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="111">
          <span class="hits">1</span>
          
          <code class="ruby">        name = name.gsub(/\..*$/, &#39;&#39;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="112">
          <span class="hits">1</span>
          
          <code class="ruby">        matches = Dir.glob(&quot;#{pattern_directory}/**{,/*/**}/#{name}.rb&quot;).sort # Takes symlinks into consideration</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="113">
          <span class="hits">1</span>
          
          <code class="ruby">        matches.flatten.uniq</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="116">
          <span class="hits">1</span>
          
          <code class="ruby">      def pattern_directory</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="117">
          <span class="hits">13</span>
          
          <code class="ruby">        Origen.config.pattern_directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">      # Check with the application that it wishes to run the given pattern</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="121">
          <span class="hits">1</span>
          
          <code class="ruby">      def proceed_with_pattern?(name)</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="122">
          <span class="hits">25</span>
          
          <code class="ruby">        Origen.config.proceed_with_pattern(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="125">
          <span class="hits">1</span>
          
          <code class="ruby">      def check(path, options = {})</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="126">
          <span class="hits">12</span>
          
          <code class="ruby">        file_plugin = Origen.app.plugins.plugin_name_from_path(path)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="127">
          <span class="hits">12</span>
          
          <code class="ruby">        if file_plugin</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="128">
          <span class="hits">1</span>
          
          <code class="ruby">          if Origen.app.plugins.current</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="129">
          <span class="hits">1</span>
          
          <code class="ruby">            if file_plugin == Origen.app.plugins.current.name</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="130">
          <span class="hits">1</span>
          
          <code class="ruby">              return proceed_with_pattern?(path) ? path : :skip</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="131">
          
          
          <code class="ruby">            elsif !options[:current_plugin]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="132">
          
          
          <code class="ruby">              Origen.app.plugins.current.temporary = file_plugin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="133">
          
          
          <code class="ruby">              return proceed_with_pattern?(path) ? path : :skip</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="135">
          
          
          <code class="ruby">              puts &quot;The requested pattern is from plugin #{file_plugin} and current system plugin is set to plugin #{Origen.app.plugins.current.name}!&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="136">
          
          
          <code class="ruby">              fail &#39;Incorrect plugin error!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="139">
          
          
          <code class="ruby">            Origen.app.plugins.current.temporary = file_plugin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="140">
          
          
          <code class="ruby">            return proceed_with_pattern?(path) ? path : :skip</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="143">
          <span class="hits">11</span>
          
          <code class="ruby">          return proceed_with_pattern?(path) ? path : :skip</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="147">
          <span class="hits">1</span>
          
          <code class="ruby">      def ambiguous_error(pats)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="148">
          
          
          <code class="ruby">        if Origen.running_locally?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="149">
          
          
          <code class="ruby">          Origen.log.info &#39;The following patterns match:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="150">
          
          
          <code class="ruby">          Origen.log.info pats</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="152">
          
          
          <code class="ruby">        fail &quot;Ambiguous name: #{@requested_pattern}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="26fbc97bc25d25735fac31d4bd342ad10a630620">
  <div class="header">
    <h3>lib/origen/generator/pattern_iterator.rb</h3>
    <h4><span class="yellow">86.67 %</span> covered</h4>
    <div>
      <b>30</b> relevant lines. 
      <span class="green"><b>26</b> lines covered</span> and
      <span class="red"><b>4</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  class Generator</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    class PatternIterator</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :key</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">      def invoke(options, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="7">
          <span class="hits">8</span>
          
          <code class="ruby">        if enabled?(options)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="8">
          <span class="hits">8</span>
          
          <code class="ruby">          @loop.call(options[key], &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="10">
          
          
          <code class="ruby">          yield</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">      def loop(&amp;block)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="15">
          <span class="hits">4</span>
          
          <code class="ruby">        @loop = block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">      def setup(&amp;block)</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="19">
          <span class="hits">62</span>
          
          <code class="ruby">        if block</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="20">
          <span class="hits">2</span>
          
          <code class="ruby">          @setup = block</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="21">
          <span class="hits">60</span>
          
          <code class="ruby">        elsif @setup</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="22">
          <span class="hits">30</span>
          
          <code class="ruby">          @setup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">        # Setup is optional for an iterator, return something to keep the caller happy</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="25">
          <span class="hits">60</span>
          
          <code class="ruby">          -&gt;(arg) { arg }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="29">
          <span class="hits">2</span>
          
          <code class="ruby">      def startup(&amp;block)</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="30">
          <span class="hits">60</span>
          
          <code class="ruby">        if block</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="31">
          
          
          <code class="ruby">          @startup = block</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="32">
          <span class="hits">60</span>
          
          <code class="ruby">        elsif @startup</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="33">
          
          
          <code class="ruby">          @startup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">        # Startup is optional for an iterator, return something to keep the caller happy</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="36">
          <span class="hits">120</span>
          
          <code class="ruby">          -&gt;(_options, arg) { arg }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="40">
          <span class="hits">2</span>
          
          <code class="ruby">      def pattern_name(&amp;block)</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="41">
          <span class="hits">64</span>
          
          <code class="ruby">        if block</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="42">
          <span class="hits">4</span>
          
          <code class="ruby">          @pattern_name = block</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="43">
          <span class="hits">60</span>
          
          <code class="ruby">        elsif @pattern_name</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="44">
          <span class="hits">60</span>
          
          <code class="ruby">          @pattern_name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="46">
          
          
          <code class="ruby">          fail &quot;pattern_name must be defined for iterator: #{key}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="50">
          <span class="hits">2</span>
          
          <code class="ruby">      def enabled?(options)</code>
        </li>
      
        <li class="covered" data-hits="188" data-linenumber="51">
          <span class="hits">188</span>
          
          <code class="ruby">        options.keys.include?(key)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="5fa7bfba14991019381b35ec207e213900ff8b71">
  <div class="header">
    <h3>lib/origen/generator/renderer.rb</h3>
    <h4><span class="red">68.75 %</span> covered</h4>
    <div>
      <b>64</b> relevant lines. 
      <span class="green"><b>44</b> lines covered</span> and
      <span class="red"><b>20</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  class Generator</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Handles the recursive rendering and importing of sub templates</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # and source files</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">    module Renderer</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">      def render(file, options = {}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="7">
          <span class="hits">18</span>
          
          <code class="ruby">        fail &#39;File argument is nil&#39; unless file</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="8">
          <span class="hits">18</span>
          
          <code class="ruby">        file = Origen.file_handler.clean_path_to_sub_template(file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">        current_pipeline &lt;&lt; { file: file, options: options,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">                              placeholder: placeholder, block: block,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">                              indent: options[:indent] || 0</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="12">
          <span class="hits">18</span>
          
          <code class="ruby">                            }</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="13">
          <span class="hits">18</span>
          
          <code class="ruby">        if block_given?</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="14">
          <span class="hits">3</span>
          
          <code class="ruby">          self.current_buffer += current_pipeline.last[:placeholder] + &quot;\n&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="16">
          <span class="hits">18</span>
          
          <code class="ruby">        current_pipeline.last[:placeholder]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :import, :render</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="20">
          <span class="hits">2</span>
          
          <code class="ruby">      def placeholder</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="21">
          <span class="hits">18</span>
          
          <code class="ruby">        @ix ||= 0</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="22">
          <span class="hits">18</span>
          
          <code class="ruby">        @ix += 1</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="23">
          <span class="hits">18</span>
          
          <code class="ruby">        &quot;_origen_render_placeholder_#{@ix}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="26">
          <span class="hits">2</span>
          
          <code class="ruby">      def options</code>
        </li>
      
        <li class="covered" data-hits="264" data-linenumber="27">
          <span class="hits">264</span>
          
          <code class="ruby">        @current_options ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="30">
          <span class="hits">2</span>
          
          <code class="ruby">      def pipeline</code>
        </li>
      
        <li class="covered" data-hits="249" data-linenumber="31">
          <span class="hits">249</span>
          
          <code class="ruby">        @pipeline ||= []</code>
        </li>
      
        <li class="covered" data-hits="249" data-linenumber="32">
          <span class="hits">249</span>
          
          <code class="ruby">        @pipeline &lt;&lt; [] if @pipeline.empty?</code>
        </li>
      
        <li class="covered" data-hits="249" data-linenumber="33">
          <span class="hits">249</span>
          
          <code class="ruby">        @pipeline</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="36">
          <span class="hits">2</span>
          
          <code class="ruby">      def current_pipeline</code>
        </li>
      
        <li class="covered" data-hits="153" data-linenumber="37">
          <span class="hits">153</span>
          
          <code class="ruby">        pipeline.last</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      # Insert rendered content into any placeholders</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="41">
          <span class="hits">2</span>
          
          <code class="ruby">      def insert(content)</code>
        </li>
      
        <li class="covered" data-hits="78" data-linenumber="42">
          <span class="hits">78</span>
          
          <code class="ruby">        while current_pipeline.size &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="43">
          <span class="hits">18</span>
          
          <code class="ruby">          current = current_pipeline.pop</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="44">
          <span class="hits">18</span>
          
          <code class="ruby">          pipeline &lt;&lt; []</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="45">
          <span class="hits">18</span>
          
          <code class="ruby">          @current_options = current[:options]</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="46">
          <span class="hits">18</span>
          
          <code class="ruby">          self.current_buffer = &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="47">
          <span class="hits">18</span>
          
          <code class="ruby">          output = compile(current[:file],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">                           sub_template: true,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">                           block:        current[:block],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">                           scope:        @scope</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">                          )</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="52">
          <span class="hits">18</span>
          
          <code class="ruby">          if current[:indent] &amp;&amp; current[:indent] &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="53">
          <span class="hits">1</span>
          
          <code class="ruby">            indent = &#39; &#39; * current[:indent]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="54">
          <span class="hits">9</span>
          
          <code class="ruby">            output = output.split(&quot;\n&quot;).map { |l| indent + l }.join(&quot;\n&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="56">
          <span class="hits">18</span>
          
          <code class="ruby">          @current_options = nil</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="57">
          <span class="hits">18</span>
          
          <code class="ruby">          content = insert_content(content, current[:placeholder], output)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="78" data-linenumber="59">
          <span class="hits">78</span>
          
          <code class="ruby">        pipeline.pop</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">        # Always give back a string, this is what existing callers expect</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">        #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">        # Possible this could in future run into problems if the whole file cannot be read</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">        # into memory, but we can cross that path when we come to it</code>
        </li>
      
        <li class="covered" data-hits="78" data-linenumber="64">
          <span class="hits">78</span>
          
          <code class="ruby">        if content.is_a?(Pathname)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="65">
          
          
          <code class="ruby">          c = content.read</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="66">
          
          
          <code class="ruby">          content.delete</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="67">
          
          
          <code class="ruby">          c</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="78" data-linenumber="69">
          <span class="hits">78</span>
          
          <code class="ruby">          content</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="73">
          <span class="hits">2</span>
          
          <code class="ruby">      def insert_content(current, placeholder, content)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">        # Start using the disk for storing the output rather than memory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">        # once it starts to exceed this length</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="76">
          <span class="hits">18</span>
          
          <code class="ruby">        max_length = 1_000_000</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="77">
          <span class="hits">18</span>
          
          <code class="ruby">        if current.is_a?(Pathname) || content.is_a?(Pathname) ||</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="78">
          <span class="hits">18</span>
          
          <code class="ruby">           ((current.length + content.length) &gt; max_length)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="79">
          
          
          <code class="ruby">          unless current.is_a?(Pathname)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="80">
          
          
          <code class="ruby">            t = temporary_file</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="81">
          
          
          <code class="ruby">            t.open(&#39;w&#39;) { |f| f.puts current }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="82">
          
          
          <code class="ruby">            current = t</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="84">
          
          
          <code class="ruby">          new = temporary_file</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="85">
          
          
          <code class="ruby">          new.open(&#39;w&#39;) do |new_f|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="86">
          
          
          <code class="ruby">            current.each_line do |line|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="87">
          
          
          <code class="ruby">              if line.strip == placeholder</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="88">
          
          
          <code class="ruby">                if content.is_a?(Pathname)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="89">
          
          
          <code class="ruby">                  content.each_line do |line|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="90">
          
          
          <code class="ruby">                    new_f.puts line</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="92">
          
          
          <code class="ruby">                  content.delete</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="94">
          
          
          <code class="ruby">                  new_f.puts content.chomp</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="97">
          
          
          <code class="ruby">                new_f.puts line</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="101">
          
          
          <code class="ruby">          current.delete</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="102">
          
          
          <code class="ruby">          new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="104">
          <span class="hits">18</span>
          
          <code class="ruby">          current.sub(/ *#{placeholder}/, content)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">      # Returns a Pathname to a uniquely named temporary file</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="109">
          <span class="hits">2</span>
          
          <code class="ruby">      def temporary_file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">        # Ensure this is unique so that is doesn&#39;t clash with parallel compile processes</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="111">
          
          
          <code class="ruby">        Pathname.new &quot;#{Origen.root}/tmp/compiler_#{Process.pid}_#{Time.now.to_f}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="c374e5c42b9c57bd2945359bafb019ab6d1da4b9">
  <div class="header">
    <h3>lib/origen/generator/stage.rb</h3>
    <h4><span class="green">92.68 %</span> covered</h4>
    <div>
      <b>41</b> relevant lines. 
      <span class="green"><b>38</b> lines covered</span> and
      <span class="red"><b>3</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  class Generator</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # The stage provides a way to store objects in named banks for later retrieval.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # This is typically used during pattern generation to generate header, body and</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    # footer elements of a pattern in non-sequential order, allowing them to be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    # combined at the end into the logical order.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">    class Stage</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">        @vault = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="12">
          <span class="hits">2</span>
          
          <code class="ruby">      def reset!</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="13">
          <span class="hits">47</span>
          
          <code class="ruby">        @vault = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      # Returns vectors from the end of the bank</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">      def last_vector(offset = 0)</code>
        </li>
      
        <li class="covered" data-hits="177" data-linenumber="18">
          <span class="hits">177</span>
          
          <code class="ruby">        offset = offset.abs</code>
        </li>
      
        <li class="covered" data-hits="177" data-linenumber="19">
          <span class="hits">177</span>
          
          <code class="ruby">        i = current_bank.size - 1</code>
        </li>
      
        <li class="covered" data-hits="177" data-linenumber="20">
          <span class="hits">177</span>
          
          <code class="ruby">        while offset &gt;= 0</code>
        </li>
      
        <li class="covered" data-hits="347" data-linenumber="21">
          <span class="hits">347</span>
          
          <code class="ruby">          return nil if i &lt; 0</code>
        </li>
      
        <li class="covered" data-hits="289" data-linenumber="22">
          <span class="hits">289</span>
          
          <code class="ruby">          unless current_bank[i].is_a?(String)</code>
        </li>
      
        <li class="covered" data-hits="133" data-linenumber="23">
          <span class="hits">133</span>
          
          <code class="ruby">            return current_bank[i] if offset == 0</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="24">
          <span class="hits">14</span>
          
          <code class="ruby">            offset -= 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="170" data-linenumber="26">
          <span class="hits">170</span>
          
          <code class="ruby">          i -= 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      # Same as last_vector except it returns the last objects of any</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">      # type, not just vectors</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="32">
          <span class="hits">2</span>
          
          <code class="ruby">      def last_object(offset = 0)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="33">
          <span class="hits">2</span>
          
          <code class="ruby">        i = current_bank.size - 1 - offset</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="34">
          <span class="hits">2</span>
          
          <code class="ruby">        current_bank[i]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      # Store a new value in the current bank</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="38">
          <span class="hits">2</span>
          
          <code class="ruby">      def store(obj)</code>
        </li>
      
        <li class="covered" data-hits="3396" data-linenumber="39">
          <span class="hits">3396</span>
          
          <code class="ruby">        current_bank.push(obj)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      # Insert a new object into the current bank X places from the end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="43">
          <span class="hits">2</span>
          
          <code class="ruby">      def insert_from_end(obj, x)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">        # Ruby insert is a bit un-intuative in that insert(1) will insert something 1 place in from the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">        # start, whereas insert(-1) will insert it at the end (0 places in from the end).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">        # So the subtraction of 1 here aligns the behavior when inserting from the start or the end.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">        current_bank.insert((x * -1) - 1, obj)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      # Insert a new object into the current bank X places from the start</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="51">
          <span class="hits">2</span>
          
          <code class="ruby">      def insert_from_start(obj, x)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="52">
          
          
          <code class="ruby">        current_bank.insert(x, obj)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">      # Pull the last item added to the current bank</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="56">
          <span class="hits">2</span>
          
          <code class="ruby">      def newest</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="57">
          
          
          <code class="ruby">        current_bank.pop</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">      # Pull the oldest item added to the current bank</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="61">
          <span class="hits">2</span>
          
          <code class="ruby">      def oldest</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="62">
          
          
          <code class="ruby">        current_bank.shift</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">      # Set the current bank</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="66">
          <span class="hits">2</span>
          
          <code class="ruby">      def bank=(name)</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="67">
          <span class="hits">47</span>
          
          <code class="ruby">        @bank = name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">      # Returns the entire bank, an array</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="71">
          <span class="hits">2</span>
          
          <code class="ruby">      def bank(name = @bank)</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="72">
          <span class="hits">120</span>
          
          <code class="ruby">        @vault[name] || []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="75">
          <span class="hits">2</span>
          
          <code class="ruby">      def current_bank</code>
        </li>
      
        <li class="covered" data-hits="3986" data-linenumber="76">
          <span class="hits">3986</span>
          
          <code class="ruby">        return @vault[@bank] if @vault[@bank]</code>
        </li>
      
        <li class="covered" data-hits="140" data-linenumber="77">
          <span class="hits">140</span>
          
          <code class="ruby">        @vault[@bank] = []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">      # Temporarily switches to the given bank</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="81">
          <span class="hits">2</span>
          
          <code class="ruby">      def with_bank(bank)</code>
        </li>
      
        <li class="covered" data-hits="141" data-linenumber="82">
          <span class="hits">141</span>
          
          <code class="ruby">        orig_bank = @bank</code>
        </li>
      
        <li class="covered" data-hits="141" data-linenumber="83">
          <span class="hits">141</span>
          
          <code class="ruby">        @bank = bank</code>
        </li>
      
        <li class="covered" data-hits="141" data-linenumber="84">
          <span class="hits">141</span>
          
          <code class="ruby">        yield</code>
        </li>
      
        <li class="covered" data-hits="141" data-linenumber="85">
          <span class="hits">141</span>
          
          <code class="ruby">        @bank = orig_bank</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="cb637135b176bbe7bf46ef67b57a5d3d8cba80fa">
  <div class="header">
    <h3>lib/origen/location.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>4</b> relevant lines. 
      <span class="green"><b>4</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Location</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    autoload :Map,  &#39;origen/location/map&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    autoload :Base, &#39;origen/location/base&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="37dfe588dbb909da7881d27c9bf282d203899d65">
  <div class="header">
    <h3>lib/origen/location/base.rb</h3>
    <h4><span class="yellow">86.36 %</span> covered</h4>
    <div>
      <b>66</b> relevant lines. 
      <span class="green"><b>57</b> lines covered</span> and
      <span class="red"><b>9</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Location</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # A Location is an abstract object used to represent any NVM location</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # of interest, such as a pass code, security field, etc.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">    class Base</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :address, :endian, :size_in_bytes, :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :byte_address, :address</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :byte_aligned_byte_address, :address</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :endianess, :endian</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(options = {})</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="13">
          <span class="hits">19</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">          size_in_bytes:      1,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">          word_size_in_bytes: 2,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">          endian:             :big,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">          data:               0,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">          nil_state:          0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="20">
          <span class="hits">19</span>
          
          <code class="ruby">        @address = options.delete(:address) || options.delete(:byte_address)</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="21">
          <span class="hits">19</span>
          
          <code class="ruby">        @endian = options.delete(:endian)</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="22">
          <span class="hits">19</span>
          
          <code class="ruby">        @size_in_bytes = options.delete(:size_in_bytes)</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="23">
          <span class="hits">19</span>
          
          <code class="ruby">        @nil_state = options.delete(:nil_state)</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="24">
          <span class="hits">19</span>
          
          <code class="ruby">        @owner = options.delete(:owner)</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="25">
          <span class="hits">19</span>
          
          <code class="ruby">        write(options.delete(:data), size_in_bytes: @size_in_bytes)</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="26">
          <span class="hits">19</span>
          
          <code class="ruby">        create_address_methods(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">      def aligned_address(bytes)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="30">
          <span class="hits">6</span>
          
          <code class="ruby">        f = bytes - 1</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="31">
          <span class="hits">6</span>
          
          <code class="ruby">        (address &gt;&gt; f) &lt;&lt; f</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">      def big_endian?</code>
        </li>
      
        <li class="covered" data-hits="43" data-linenumber="35">
          <span class="hits">43</span>
          
          <code class="ruby">        endian == :big</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">      def little_endian?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="39">
          
          
          <code class="ruby">        endian == :little</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="42">
          <span class="hits">1</span>
          
          <code class="ruby">      def write(data, options = {})</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="43">
          <span class="hits">27</span>
          
          <code class="ruby">        @current_data = data</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="44">
          <span class="hits">27</span>
          
          <code class="ruby">        @current_data_size_in_bytes = options[:size_in_bytes] || size_in_bytes</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="45">
          <span class="hits">27</span>
          
          <code class="ruby">        self.data(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :set, :write</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">      def data(options = {})</code>
        </li>
      
        <li class="covered" data-hits="42" data-linenumber="50">
          <span class="hits">42</span>
          
          <code class="ruby">        data = @current_data</code>
        </li>
      
        <li class="covered" data-hits="42" data-linenumber="51">
          <span class="hits">42</span>
          
          <code class="ruby">        nil_val = options[:nil_state] || @nil_state</code>
        </li>
      
        <li class="covered" data-hits="42" data-linenumber="52">
          <span class="hits">42</span>
          
          <code class="ruby">        shift = 8 * (size_in_bytes - @current_data_size_in_bytes)</code>
        </li>
      
        <li class="covered" data-hits="42" data-linenumber="53">
          <span class="hits">42</span>
          
          <code class="ruby">        mask = (1 &lt;&lt; shift) - 1</code>
        </li>
      
        <li class="covered" data-hits="42" data-linenumber="54">
          <span class="hits">42</span>
          
          <code class="ruby">        if big_endian?</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="55">
          <span class="hits">32</span>
          
          <code class="ruby">          data &lt;&lt;= shift</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="56">
          <span class="hits">32</span>
          
          <code class="ruby">          if nil_val == 1 &amp;&amp; shift != 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="57">
          <span class="hits">2</span>
          
          <code class="ruby">            data |= mask</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="60">
          <span class="hits">10</span>
          
          <code class="ruby">          if nil_val == 1</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="61">
          <span class="hits">5</span>
          
          <code class="ruby">            data |= (mask &lt;&lt; shift)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="42" data-linenumber="64">
          <span class="hits">42</span>
          
          <code class="ruby">        data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="66">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :value, :data</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="67">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :val, :data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="69">
          <span class="hits">1</span>
          
          <code class="ruby">      def read!(*args)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="70">
          
          
          <code class="ruby">        action!(:read, *args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="73">
          <span class="hits">1</span>
          
          <code class="ruby">      def write!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="74">
          
          
          <code class="ruby">        action!(:write, *args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="77">
          <span class="hits">1</span>
          
          <code class="ruby">      def store!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="78">
          
          
          <code class="ruby">        action!(:store, *args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="81">
          <span class="hits">1</span>
          
          <code class="ruby">      def program!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="82">
          
          
          <code class="ruby">        action!(:program, *args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="85">
          <span class="hits">1</span>
          
          <code class="ruby">      def erase!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="86">
          
          
          <code class="ruby">        action!(:erase, *args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="89">
          <span class="hits">1</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="91">
          <span class="hits">1</span>
          
          <code class="ruby">      def action!(type, *args)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="92">
          
          
          <code class="ruby">        if owner</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="93">
          
          
          <code class="ruby">          owner.send(type, self, *args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="95">
          
          
          <code class="ruby">          fail &quot;To #{type} a location an owner must be assigned to it!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="99">
          <span class="hits">1</span>
          
          <code class="ruby">      def create_address_methods(options)</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="100">
          <span class="hits">19</span>
          
          <code class="ruby">        options.each do |key, value|</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="101">
          <span class="hits">21</span>
          
          <code class="ruby">          if key.to_s =~ /(\w+)_size_in_bytes$/</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="102">
          <span class="hits">21</span>
          
          <code class="ruby">            define_singleton_method(&quot;#{Regexp.last_match[1].downcase}_aligned_address&quot;) do</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="103">
          <span class="hits">3</span>
          
          <code class="ruby">              aligned_address(value)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="105">
          <span class="hits">21</span>
          
          <code class="ruby">            define_singleton_method(&quot;#{Regexp.last_match[1].downcase}_aligned_byte_address&quot;) do</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="106">
          <span class="hits">3</span>
          
          <code class="ruby">              aligned_address(value)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="108">
          <span class="hits">21</span>
          
          <code class="ruby">            define_singleton_method(&quot;#{Regexp.last_match[1].downcase}_address&quot;) do</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="109">
          <span class="hits">3</span>
          
          <code class="ruby">              address / value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="c50ede80f32b649a5bd1d9fc701555470109bce7">
  <div class="header">
    <h3>lib/origen/location/map.rb</h3>
    <h4><span class="green">95.56 %</span> covered</h4>
    <div>
      <b>45</b> relevant lines. 
      <span class="green"><b>43</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;active_support/concern&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">  module Location</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    module Map</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">      extend ActiveSupport::Concern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      module ClassMethods</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">        def define_locations(defaults = {})</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="9">
          <span class="hits">4</span>
          
          <code class="ruby">          @x = @x ? (@x + 1) : 0  # Provides a unique ID for each define_locations block</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="10">
          <span class="hits">4</span>
          
          <code class="ruby">          default_attributes[@x] = defaults</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="11">
          <span class="hits">4</span>
          
          <code class="ruby">          @defining = true</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="12">
          <span class="hits">4</span>
          
          <code class="ruby">          yield</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="13">
          <span class="hits">4</span>
          
          <code class="ruby">          @defining = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">        def constructor(&amp;block)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">          if defining?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">            constructors[@x] = block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">            constructors[:default] = block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">        def default_constructor(attributes, defaults)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="25">
          <span class="hits">6</span>
          
          <code class="ruby">          Origen::Location::Base.new(defaults.merge(attributes))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">        def definitions</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="29">
          <span class="hits">18</span>
          
          <code class="ruby">          @definitions ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">        def constructors</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="33">
          <span class="hits">12</span>
          
          <code class="ruby">          @constructors ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">        def default_attributes</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="37">
          <span class="hits">10</span>
          
          <code class="ruby">          @default_attributes ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="40">
          <span class="hits">1</span>
          
          <code class="ruby">        def defining?</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="41">
          <span class="hits">8</span>
          
          <code class="ruby">          @defining</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">        # A hash of constructed location objects, i.e. an entry will be cached here the first time a location</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">        # is referenced outside of its initial definition, after that it will be served directly from here.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="46">
          <span class="hits">1</span>
          
          <code class="ruby">        def constructed</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="47">
          <span class="hits">16</span>
          
          <code class="ruby">          @constructed ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">        # Provides accessors for all named locations, for example:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">        #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">        #   $dut.nvm.fmu.ifr_map.probe1_pass</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="53">
          <span class="hits">1</span>
          
          <code class="ruby">        def method_missing(method, *args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="54">
          <span class="hits">6</span>
          
          <code class="ruby">          if defining?</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="55">
          <span class="hits">6</span>
          
          <code class="ruby">            if definitions[method]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="56">
          
          
          <code class="ruby">              warning &quot;Redefinition of map location: #{method}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="58">
          <span class="hits">6</span>
          
          <code class="ruby">            definitions[method] = { attributes: args.first, x: @x }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="60">
          
          
          <code class="ruby">            super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="65">
          <span class="hits">1</span>
          
          <code class="ruby">      def method_missing(method, *args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="66">
          <span class="hits">10</span>
          
          <code class="ruby">        klass = self.class</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">        klass.constructed[method] || begin</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="68">
          <span class="hits">6</span>
          
          <code class="ruby">          definition = klass.definitions[method]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="69">
          <span class="hits">6</span>
          
          <code class="ruby">          if definition</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="70">
          <span class="hits">6</span>
          
          <code class="ruby">            defaults = klass.default_attributes[definition[:x]] || {}</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="71">
          <span class="hits">6</span>
          
          <code class="ruby">            constructor = klass.constructors[definition[:x]] || klass.constructors[:default]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="72">
          <span class="hits">6</span>
          
          <code class="ruby">            if constructor</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="73">
          <span class="hits">3</span>
          
          <code class="ruby">              instance = constructor.call(definition[:attributes], defaults)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="75">
          <span class="hits">3</span>
          
          <code class="ruby">              instance = klass.default_constructor(definition[:attributes], defaults)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="77">
          <span class="hits">6</span>
          
          <code class="ruby">            klass.constructed[method] = instance</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="79">
          <span class="hits">10</span>
          
          <code class="ruby">        end || super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="304dd40bd3e3adf26d9af835fe84adac3140ed40">
  <div class="header">
    <h3>lib/origen/mode.rb</h3>
    <h4><span class="green">96.88 %</span> covered</h4>
    <div>
      <b>32</b> relevant lines. 
      <span class="green"><b>31</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">  # A class to handle the Origen execution mode</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">  class Mode</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">    MODES = [:production, :debug, :simulation]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">    def initialize(_options = {})</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="7">
          <span class="hits">3</span>
          
          <code class="ruby">      @current_mode = :production</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    # When called any future changes to the mode will be ignored</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">    def freeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">      @frozen = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">    def unfreeze</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">      @frozen = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="19">
          <span class="hits">2</span>
          
          <code class="ruby">    def set(val)</code>
        </li>
      
        <li class="covered" data-hits="615" data-linenumber="20">
          <span class="hits">615</span>
          
          <code class="ruby">      @current_mode = find_mode(val) unless @frozen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="23">
          <span class="hits">2</span>
          
          <code class="ruby">    def to_s</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="24">
          <span class="hits">7</span>
          
          <code class="ruby">      @current_mode ? @current_mode.to_s : &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="27">
          <span class="hits">2</span>
          
          <code class="ruby">    def find_mode(name)</code>
        </li>
      
        <li class="covered" data-hits="614" data-linenumber="28">
          <span class="hits">614</span>
          
          <code class="ruby">      name = name.to_s.downcase.to_sym</code>
        </li>
      
        <li class="covered" data-hits="614" data-linenumber="29">
          <span class="hits">614</span>
          
          <code class="ruby">      if MODES.include?(name)</code>
        </li>
      
        <li class="covered" data-hits="609" data-linenumber="30">
          <span class="hits">609</span>
          
          <code class="ruby">        name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="32">
          <span class="hits">5</span>
          
          <code class="ruby">        mode = MODES.find do |m|</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="33">
          <span class="hits">12</span>
          
          <code class="ruby">          m.to_s =~ /^#{name}/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="35">
          <span class="hits">5</span>
          
          <code class="ruby">        if mode</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="36">
          <span class="hits">3</span>
          
          <code class="ruby">          mode</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="38">
          <span class="hits">2</span>
          
          <code class="ruby">          fail &quot;Invalid mode requested, must be one of: #{MODES}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">    # Any mode which is not production will return true here, if</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">    # you want to test for only debug mode use Origen.mode == :debug</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="45">
          <span class="hits">2</span>
          
          <code class="ruby">    def debug?</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="46">
          <span class="hits">6</span>
          
          <code class="ruby">      !production?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="49">
          <span class="hits">2</span>
          
          <code class="ruby">    def production?</code>
        </li>
      
        <li class="covered" data-hits="342" data-linenumber="50">
          <span class="hits">342</span>
          
          <code class="ruby">      @current_mode == :production</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="53">
          <span class="hits">2</span>
          
          <code class="ruby">    def simulation?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="54">
          <span class="hits">1</span>
          
          <code class="ruby">      @current_mode == :simulation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="57">
          <span class="hits">2</span>
          
          <code class="ruby">    def ==(val)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="58">
          <span class="hits">12</span>
          
          <code class="ruby">      if val.is_a?(Symbol)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="59">
          <span class="hits">12</span>
          
          <code class="ruby">        @current_mode == val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="61">
          
          
          <code class="ruby">        super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="4b0a303846df38baad017eb60c900758826e1dab">
  <div class="header">
    <h3>lib/origen/model_initializer.rb</h3>
    <h4><span class="green">96.67 %</span> covered</h4>
    <div>
      <b>30</b> relevant lines. 
      <span class="green"><b>29</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module ModelInitializer</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    extend ActiveSupport::Concern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">    module ClassMethods</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">      # This overrides the new method of any class which includes this</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">      # module to force the newly created instance to be registered as</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">      # a top-level listener.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">      def new(*args, &amp;block) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="1086" data-linenumber="10">
          <span class="hits">1086</span>
          
          <code class="ruby">        options = args.find { |a| a.is_a?(Hash) } || {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="783" data-linenumber="12">
          <span class="hits">783</span>
          
          <code class="ruby">        x = allocate</code>
        </li>
      
        <li class="covered" data-hits="783" data-linenumber="13">
          <span class="hits">783</span>
          
          <code class="ruby">        x.send(:init_top_level) if x.respond_to?(:includes_origen_top_level?)</code>
        </li>
      
        <li class="covered" data-hits="782" data-linenumber="14">
          <span class="hits">782</span>
          
          <code class="ruby">        x.send(:init_sub_blocks, *args) if x.respond_to?(:init_sub_blocks)</code>
        </li>
      
        <li class="covered" data-hits="782" data-linenumber="15">
          <span class="hits">782</span>
          
          <code class="ruby">        if x.respond_to?(:version=)</code>
        </li>
      
        <li class="covered" data-hits="494" data-linenumber="16">
          <span class="hits">494</span>
          
          <code class="ruby">          version = options[:version]</code>
        </li>
      
        <li class="covered" data-hits="494" data-linenumber="17">
          <span class="hits">494</span>
          
          <code class="ruby">          version ||= args.first if args.first.is_a?(Fixnum)</code>
        </li>
      
        <li class="covered" data-hits="494" data-linenumber="18">
          <span class="hits">494</span>
          
          <code class="ruby">          x.version = version</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="782" data-linenumber="20">
          <span class="hits">782</span>
          
          <code class="ruby">        if x.respond_to?(:parent=)</code>
        </li>
      
        <li class="covered" data-hits="776" data-linenumber="21">
          <span class="hits">776</span>
          
          <code class="ruby">          parent = options.delete(:parent)</code>
        </li>
      
        <li class="covered" data-hits="776" data-linenumber="22">
          <span class="hits">776</span>
          
          <code class="ruby">          x.parent = parent if parent</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="782" data-linenumber="24">
          <span class="hits">782</span>
          
          <code class="ruby">        options.each do |k, v|</code>
        </li>
      
        <li class="covered" data-hits="237" data-linenumber="25">
          <span class="hits">237</span>
          
          <code class="ruby">          x.send(:instance_variable_set, &quot;@#{k}&quot;, v) if x.respond_to?(k)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="782" data-linenumber="27">
          <span class="hits">782</span>
          
          <code class="ruby">        if x.method(:initialize).arity == 0</code>
        </li>
      
        <li class="covered" data-hits="618" data-linenumber="28">
          <span class="hits">618</span>
          
          <code class="ruby">          x.send(:initialize, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="164" data-linenumber="30">
          <span class="hits">164</span>
          
          <code class="ruby">          x.send(:initialize, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="782" data-linenumber="32">
          <span class="hits">782</span>
          
          <code class="ruby">        x.send(:_initialized) if x.respond_to?(:is_an_origen_model?)</code>
        </li>
      
        <li class="covered" data-hits="782" data-linenumber="33">
          <span class="hits">782</span>
          
          <code class="ruby">        x.register_callback_listener if x.respond_to?(:register_callback_listener)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">        # Do this before wrapping, otherwise the respond to method in the controller will</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">        # be looking for the model to be instantiated when it is not fully done yet</code>
        </li>
      
        <li class="covered" data-hits="782" data-linenumber="36">
          <span class="hits">782</span>
          
          <code class="ruby">        is_top_level = x.respond_to?(:includes_origen_top_level?)</code>
        </li>
      
        <li class="covered" data-hits="782" data-linenumber="37">
          <span class="hits">782</span>
          
          <code class="ruby">        if x.respond_to?(:wrap_in_controller)</code>
        </li>
      
        <li class="covered" data-hits="494" data-linenumber="38">
          <span class="hits">494</span>
          
          <code class="ruby">          x = x.wrap_in_controller</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="782" data-linenumber="40">
          <span class="hits">782</span>
          
          <code class="ruby">        if is_top_level</code>
        </li>
      
        <li class="covered" data-hits="257" data-linenumber="41">
          <span class="hits">257</span>
          
          <code class="ruby">          Origen.app.listeners_for(:on_top_level_instantiated, top_level: false).each do |listener|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="42">
          
          
          <code class="ruby">            listener.on_top_level_instantiated(x)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="782" data-linenumber="45">
          <span class="hits">782</span>
          
          <code class="ruby">        x</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="ea295037472c2457cb90160e8a2903e2efaddb5d">
  <div class="header">
    <h3>lib/origen/models.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>4</b> relevant lines. 
      <span class="green"><b>4</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Models</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    autoload :ScanRegister,    &#39;origen/models/scan_register&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    autoload :Mux,    &#39;origen/models/mux&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="82c1cde5f872753523269703db95836b43285f6b">
  <div class="header">
    <h3>lib/origen/models/mux.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>15</b> relevant lines. 
      <span class="green"><b>15</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Models</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    class Mux</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">      include Origen::Model</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :size</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :select_lines</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">        @input = []</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">        (2**select_lines).times do |i|</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="12">
          <span class="hits">8</span>
          
          <code class="ruby">          @input &lt;&lt; port(&quot;input#{i}&quot;.to_sym, size: size)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">        port :select, size: select_lines</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">        port :output, size: size</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">        output.connect_to do |i|</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="19">
          <span class="hits">40</span>
          
          <code class="ruby">          unless ports[:select].data.undefined?</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="20">
          <span class="hits">32</span>
          
          <code class="ruby">            send(&quot;input#{ports[:select].data}&quot;)[i].path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="7b91bf3441c1ffd15e83fc1ec5a500e2223c35df">
  <div class="header">
    <h3>lib/origen/models/scan_register.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>44</b> relevant lines. 
      <span class="green"><b>44</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Models</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    class ScanRegister</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">      include Origen::Model</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :size</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">        # The shift register</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="10">
          <span class="hits">6</span>
          
          <code class="ruby">        reg :sr, 0, size: size, reset: options[:reset] || 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">        # The update register, this is the value presented to the outside world</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="12">
          <span class="hits">6</span>
          
          <code class="ruby">        reg :ur, 0, size: size, reset: options[:reset] || 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="14">
          <span class="hits">6</span>
          
          <code class="ruby">        port :si              # Scan in</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="15">
          <span class="hits">6</span>
          
          <code class="ruby">        port :so              # Scan out</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="16">
          <span class="hits">6</span>
          
          <code class="ruby">        port :c, size: size   # Capture in</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">        # Control signals</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="19">
          <span class="hits">6</span>
          
          <code class="ruby">        port :se  # Shift enable</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="20">
          <span class="hits">6</span>
          
          <code class="ruby">        port :ce  # Capture enable</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="21">
          <span class="hits">6</span>
          
          <code class="ruby">        port :ue  # Update enable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="23">
          <span class="hits">6</span>
          
          <code class="ruby">        so.connect_to(sr[0])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">      def method_missing(method, *args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="266" data-linenumber="27">
          <span class="hits">266</span>
          
          <code class="ruby">        if BitCollection.instance_methods.include?(method)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="28">
          <span class="hits">4</span>
          
          <code class="ruby">          ur.send(method, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="262" data-linenumber="30">
          <span class="hits">262</span>
          
          <code class="ruby">          super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">      def respond_to?(*args)</code>
        </li>
      
        <li class="covered" data-hits="228" data-linenumber="35">
          <span class="hits">228</span>
          
          <code class="ruby">        super(*args) || BitCollection.instance_methods.include?(args.first)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">      def mode</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="39">
          <span class="hits">32</span>
          
          <code class="ruby">        if se.data == 1</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="40">
          <span class="hits">25</span>
          
          <code class="ruby">          :shift</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="41">
          <span class="hits">7</span>
          
          <code class="ruby">        elsif ce.data == 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="42">
          <span class="hits">1</span>
          
          <code class="ruby">          :capture</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="43">
          <span class="hits">6</span>
          
          <code class="ruby">        elsif ue.data == 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">          :update</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="46">
          <span class="hits">5</span>
          
          <code class="ruby">          undefined</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="50">
          <span class="hits">1</span>
          
          <code class="ruby">      def clock_prepare</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="51">
          <span class="hits">32</span>
          
          <code class="ruby">        @mode = mode</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="52">
          <span class="hits">32</span>
          
          <code class="ruby">        if @mode == :shift</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="53">
          <span class="hits">25</span>
          
          <code class="ruby">          @din = si.data</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="54">
          <span class="hits">7</span>
          
          <code class="ruby">        elsif @mode == :capture</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="55">
          <span class="hits">1</span>
          
          <code class="ruby">          @din = c.data</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="56">
          <span class="hits">6</span>
          
          <code class="ruby">        elsif @mode == :update</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="57">
          <span class="hits">1</span>
          
          <code class="ruby">          @din = sr.data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="61">
          <span class="hits">1</span>
          
          <code class="ruby">      def clock_apply</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="62">
          <span class="hits">32</span>
          
          <code class="ruby">        if @mode == :shift</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="63">
          <span class="hits">25</span>
          
          <code class="ruby">          sr.shift_right(@din)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">        elsif @mode == :capture</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="65">
          <span class="hits">1</span>
          
          <code class="ruby">          sr.write(@din)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">        elsif @mode == :update</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="67">
          <span class="hits">1</span>
          
          <code class="ruby">          ur.write(@din)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="69">
          <span class="hits">32</span>
          
          <code class="ruby">        @din = nil</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="70">
          <span class="hits">32</span>
          
          <code class="ruby">        @mode = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="a183f59228d45cf2f28fe5aa68537953b8f101ab">
  <div class="header">
    <h3>lib/origen/netlist.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>14</b> relevant lines. 
      <span class="green"><b>14</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Netlist</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :List,        &#39;origen/netlist/list&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Connectable, &#39;origen/netlist/connectable&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">    def netlist</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">      @netlist ||= begin</code>
        </li>
      
        <li class="covered" data-hits="227" data-linenumber="8">
          <span class="hits">227</span>
          
          <code class="ruby">        if netlist_top_level == self</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="9">
          <span class="hits">14</span>
          
          <code class="ruby">          List.new(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="213" data-linenumber="11">
          <span class="hits">213</span>
          
          <code class="ruby">          netlist_top_level.netlist</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="633" data-linenumber="13">
          <span class="hits">633</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">    def netlist_top_level</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      @netlist_top_level ||= begin</code>
        </li>
      
        <li class="covered" data-hits="227" data-linenumber="18">
          <span class="hits">227</span>
          
          <code class="ruby">        p = self</code>
        </li>
      
        <li class="covered" data-hits="227" data-linenumber="19">
          <span class="hits">227</span>
          
          <code class="ruby">        p = p.parent while p.respond_to?(:parent) &amp;&amp; p.parent</code>
        </li>
      
        <li class="covered" data-hits="227" data-linenumber="20">
          <span class="hits">227</span>
          
          <code class="ruby">        p</code>
        </li>
      
        <li class="covered" data-hits="441" data-linenumber="21">
          <span class="hits">441</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="8ae0b7495a540ac0bc29c49b24cdfc1ea43b819e">
  <div class="header">
    <h3>lib/origen/netlist/connectable.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>11</b> relevant lines. 
      <span class="green"><b>11</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Netlist</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    module Connectable</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">      extend ActiveSupport::Concern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">      included do</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="7">
          <span class="hits">4</span>
          
          <code class="ruby">        include Origen::Netlist</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">      def connect_to(node = nil, options = {}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="11">
          <span class="hits">33</span>
          
          <code class="ruby">        node, options = nil, node if node.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="12">
          <span class="hits">33</span>
          
          <code class="ruby">        node = node.path if node.respond_to?(:path)</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="13">
          <span class="hits">33</span>
          
          <code class="ruby">        netlist.connect(path, node, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :connect, :connect_to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="6c05b8c4623442eedafc2e7cefbc3900fb9129a7">
  <div class="header">
    <h3>lib/origen/netlist/list.rb</h3>
    <h4><span class="green">93.1 %</span> covered</h4>
    <div>
      <b>87</b> relevant lines. 
      <span class="green"><b>81</b> lines covered</span> and
      <span class="red"><b>6</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Netlist</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    class List</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :top_level, :table</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :parent, :top_level</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :owner, :top_level</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(top_level)</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="10">
          <span class="hits">14</span>
          
          <code class="ruby">        @top_level = top_level</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="11">
          <span class="hits">14</span>
          
          <code class="ruby">        @table = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      # Connect two paths together in the netlist, one can be a numeric</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      # value to represent a logic level connection</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">      def connect(a, b = nil, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="17">
          <span class="hits">33</span>
          
          <code class="ruby">        b ||= block</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="18">
          <span class="hits">33</span>
          
          <code class="ruby">        align(a, b) do |path, index, target|</code>
        </li>
      
        <li class="covered" data-hits="71" data-linenumber="19">
          <span class="hits">71</span>
          
          <code class="ruby">          table[path] ||= {}</code>
        </li>
      
        <li class="covered" data-hits="71" data-linenumber="20">
          <span class="hits">71</span>
          
          <code class="ruby">          table[path][index] ||= []</code>
        </li>
      
        <li class="covered" data-hits="71" data-linenumber="21">
          <span class="hits">71</span>
          
          <code class="ruby">          table[path][index] &lt;&lt; target</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">      def data_bit(path, index, options = {})</code>
        </li>
      
        <li class="covered" data-hits="385" data-linenumber="26">
          <span class="hits">385</span>
          
          <code class="ruby">        bits = data_bits(path, index, options)</code>
        </li>
      
        <li class="covered" data-hits="385" data-linenumber="27">
          <span class="hits">385</span>
          
          <code class="ruby">        if bits.size &gt; 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="28">
          
          
          <code class="ruby">          fail &quot;Multiple data bit connections found for node #{path}[#{index}]&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">        elsif bits.size == 0</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="30">
          <span class="hits">38</span>
          
          <code class="ruby">          return undefined</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="347" data-linenumber="32">
          <span class="hits">347</span>
          
          <code class="ruby">        bits.first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">      def data_bits(path, index, options = {})</code>
        </li>
      
        <li class="covered" data-hits="846" data-linenumber="36">
          <span class="hits">846</span>
          
          <code class="ruby">        processed_paths = options[:processed_paths] || []</code>
        </li>
      
        <li class="covered" data-hits="846" data-linenumber="37">
          <span class="hits">846</span>
          
          <code class="ruby">        bits = []</code>
        </li>
      
        <li class="covered" data-hits="846" data-linenumber="38">
          <span class="hits">846</span>
          
          <code class="ruby">        [&#39;*&#39;, index].each do |i|</code>
        </li>
      
        <li class="covered" data-hits="1692" data-linenumber="39">
          <span class="hits">1692</span>
          
          <code class="ruby">          unless processed_paths.include?(&quot;#{path}[#{i}]&quot;)</code>
        </li>
      
        <li class="covered" data-hits="1004" data-linenumber="40">
          <span class="hits">1004</span>
          
          <code class="ruby">            processed_paths &lt;&lt; &quot;#{path}[#{i}]&quot;</code>
        </li>
      
        <li class="covered" data-hits="1004" data-linenumber="41">
          <span class="hits">1004</span>
          
          <code class="ruby">            vals = (table[path] || {})[i] || []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">            # Also consider anything attached directly to the requested path, e.g. a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">            # drive value applied to a port</code>
        </li>
      
        <li class="covered" data-hits="1004" data-linenumber="44">
          <span class="hits">1004</span>
          
          <code class="ruby">            vals &lt;&lt; &quot;#{path}[#{i}]&quot; if i != &#39;*&#39; &amp;&amp; !options[:sublevel]</code>
        </li>
      
        <li class="covered" data-hits="1004" data-linenumber="45">
          <span class="hits">1004</span>
          
          <code class="ruby">            vals.each do |val|</code>
        </li>
      
        <li class="covered" data-hits="816" data-linenumber="46">
          <span class="hits">816</span>
          
          <code class="ruby">              if val.is_a?(Proc)</code>
        </li>
      
        <li class="covered" data-hits="72" data-linenumber="47">
          <span class="hits">72</span>
          
          <code class="ruby">                from_proc = true</code>
        </li>
      
        <li class="covered" data-hits="72" data-linenumber="48">
          <span class="hits">72</span>
          
          <code class="ruby">                val = val.call(index)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="744" data-linenumber="50">
          <span class="hits">744</span>
          
          <code class="ruby">                from_proc = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="816" data-linenumber="52">
          <span class="hits">816</span>
          
          <code class="ruby">              if val.is_a?(Fixnum)</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="53">
          <span class="hits">57</span>
          
          <code class="ruby">                bits &lt;&lt; Registers::Bit.new(nil, index, access: :ro, data: (i == &#39;*&#39; &amp;&amp; !from_proc) ? val[index] : val)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">              elsif val</code>
        </li>
      
        <li class="covered" data-hits="751" data-linenumber="55">
          <span class="hits">751</span>
          
          <code class="ruby">                vp, vi = *to_v(val)</code>
        </li>
      
        <li class="covered" data-hits="751" data-linenumber="56">
          <span class="hits">751</span>
          
          <code class="ruby">                bc = eval(&quot;top_level.#{vp}[#{vi || index}]&quot;)</code>
        </li>
      
        <li class="covered" data-hits="751" data-linenumber="57">
          <span class="hits">751</span>
          
          <code class="ruby">                if bc.is_a?(Registers::BitCollection)</code>
        </li>
      
        <li class="covered" data-hits="52" data-linenumber="58">
          <span class="hits">52</span>
          
          <code class="ruby">                  bits &lt;&lt; bc.bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">                elsif bc.is_a?(Ports::Section) &amp;&amp; bc.drive_value</code>
        </li>
      
        <li class="covered" data-hits="238" data-linenumber="60">
          <span class="hits">238</span>
          
          <code class="ruby">                  bits &lt;&lt; Registers::Bit.new(nil, index, access: :ro, data: bc.drive_value)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="covered" data-hits="461" data-linenumber="62">
          <span class="hits">461</span>
          
          <code class="ruby">                  bits += data_bits(vp, vi || index, processed_paths: processed_paths, sublevel: true) || []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="846" data-linenumber="68">
          <span class="hits">846</span>
          
          <code class="ruby">        bits.uniq</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="71">
          <span class="hits">1</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="73">
          <span class="hits">1</span>
          
          <code class="ruby">      def align(a, b)</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="74">
          <span class="hits">33</span>
          
          <code class="ruby">        a, b = clean(a), clean(b)</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="75">
          <span class="hits">33</span>
          
          <code class="ruby">        if a[:size] || b[:size]</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="76">
          <span class="hits">8</span>
          
          <code class="ruby">          if a[:size] &amp;&amp; b[:size]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="77">
          <span class="hits">2</span>
          
          <code class="ruby">            size = [a[:size], b[:size]].min</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="79">
          <span class="hits">6</span>
          
          <code class="ruby">            size = a[:size] || b[:size]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="82">
          <span class="hits">8</span>
          
          <code class="ruby">          unless a[:numeric] || a[:proc]</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="83">
          <span class="hits">8</span>
          
          <code class="ruby">            size.times do |i|</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="84">
          <span class="hits">14</span>
          
          <code class="ruby">              index = a[:indexes] ? a[:indexes][i] : i</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="85">
          <span class="hits">14</span>
          
          <code class="ruby">              if b[:numeric]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="86">
          
          
          <code class="ruby">                target = b[:path][i]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">              elsif b[:proc]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="88">
          
          
          <code class="ruby">                target = b[:path]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="90">
          <span class="hits">14</span>
          
          <code class="ruby">                if b[:indexes]</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="91">
          <span class="hits">14</span>
          
          <code class="ruby">                  target = &quot;#{b[:path]}[#{b[:indexes][i]}]&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="93">
          
          
          <code class="ruby">                  target = &quot;#{b[:path]}[#{i}]&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="96">
          <span class="hits">14</span>
          
          <code class="ruby">              yield a[:path], index, target</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="100">
          <span class="hits">8</span>
          
          <code class="ruby">          unless b[:numeric] || b[:proc]</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="101">
          <span class="hits">8</span>
          
          <code class="ruby">            size.times do |i|</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="102">
          <span class="hits">14</span>
          
          <code class="ruby">              index = b[:indexes] ? b[:indexes][i] : i</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="103">
          <span class="hits">14</span>
          
          <code class="ruby">              if a[:numeric]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="104">
          
          
          <code class="ruby">                target = a[:path][i]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">              elsif a[:proc]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="106">
          
          
          <code class="ruby">                target = a[:path]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="108">
          <span class="hits">14</span>
          
          <code class="ruby">                if a[:indexes]</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="109">
          <span class="hits">8</span>
          
          <code class="ruby">                  target = &quot;#{a[:path]}[#{a[:indexes][i]}]&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="111">
          <span class="hits">6</span>
          
          <code class="ruby">                  target = &quot;#{a[:path]}[#{i}]&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="114">
          <span class="hits">14</span>
          
          <code class="ruby">              yield b[:path], index, target</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="119">
          <span class="hits">25</span>
          
          <code class="ruby">          yield a[:path], &#39;*&#39;, b[:path] unless a[:numeric] || a[:proc]</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="120">
          <span class="hits">25</span>
          
          <code class="ruby">          yield b[:path], &#39;*&#39;, a[:path] unless b[:numeric] || b[:proc]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="124">
          <span class="hits">1</span>
          
          <code class="ruby">      def clean(path)</code>
        </li>
      
        <li class="covered" data-hits="66" data-linenumber="125">
          <span class="hits">66</span>
          
          <code class="ruby">        if path.is_a?(Fixnum)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="126">
          <span class="hits">3</span>
          
          <code class="ruby">          { path: path, numeric: true }</code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="127">
          <span class="hits">63</span>
          
          <code class="ruby">        elsif path.is_a?(Proc)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="128">
          <span class="hits">4</span>
          
          <code class="ruby">          { path: path, proc: true }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="59" data-linenumber="130">
          <span class="hits">59</span>
          
          <code class="ruby">          if path =~ /(.*)\[(\d+):?(\d*)\]$/</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="131">
          <span class="hits">10</span>
          
          <code class="ruby">            if Regexp.last_match(3).empty?</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="132">
          <span class="hits">6</span>
          
          <code class="ruby">              { path: Regexp.last_match(1), size: 1, indexes: [Regexp.last_match(2).to_i] }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="134">
          <span class="hits">4</span>
          
          <code class="ruby">              a = ((Regexp.last_match(2).to_i)..(Regexp.last_match(3).to_i)).to_a</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="135">
          <span class="hits">4</span>
          
          <code class="ruby">              { path: Regexp.last_match(1), size: a.size, indexes: a }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="49" data-linenumber="138">
          <span class="hits">49</span>
          
          <code class="ruby">            { path: path }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="143">
          <span class="hits">1</span>
          
          <code class="ruby">      def to_v(path)</code>
        </li>
      
        <li class="covered" data-hits="751" data-linenumber="144">
          <span class="hits">751</span>
          
          <code class="ruby">        if path =~ /(.*)\[(\d+)\]$/</code>
        </li>
      
        <li class="covered" data-hits="387" data-linenumber="145">
          <span class="hits">387</span>
          
          <code class="ruby">          [Regexp.last_match(1), Regexp.last_match(2).to_i]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="364" data-linenumber="147">
          <span class="hits">364</span>
          
          <code class="ruby">          [path, nil]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="db705f69b4123272853ab0cca20849142f255dc7">
  <div class="header">
    <h3>lib/origen/parameters.rb</h3>
    <h4><span class="green">98.33 %</span> covered</h4>
    <div>
      <b>60</b> relevant lines. 
      <span class="green"><b>59</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">require &#39;active_support/concern&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">  module Parameters</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">    extend ActiveSupport::Concern</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Set, &#39;origen/parameters/set&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Live, &#39;origen/parameters/live&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Missing, &#39;origen/parameters/missing&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">    attr_accessor :current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">    module ClassMethods</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="12">
          <span class="hits">2</span>
          
          <code class="ruby">      def parameters_context(obj = nil)</code>
        </li>
      
        <li class="covered" data-hits="201" data-linenumber="13">
          <span class="hits">201</span>
          
          <code class="ruby">        if obj</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">          if obj.is_a?(Symbol)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">            valid = [:top, :dut].include?(obj)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">          valid ||= obj.is_a?(String)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">          unless valid</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="19">
          
          
          <code class="ruby">            fail &#39;Invalid parameters context, must be :top or a string path to a model object&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="21">
          <span class="hits">2</span>
          
          <code class="ruby">          @parameters_context = obj</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="199" data-linenumber="23">
          <span class="hits">199</span>
          
          <code class="ruby">          @parameters_context</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="28">
          <span class="hits">2</span>
          
          <code class="ruby">    def define_params(name, options = {}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="103" data-linenumber="29">
          <span class="hits">103</span>
          
          <code class="ruby">      if _parameter_sets[name]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">        fail &#39;Parameter sets cannot be re-opened once originally defined!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="102" data-linenumber="32">
          <span class="hits">102</span>
          
          <code class="ruby">        _parameter_sets[name] = Set.new(top_level: true, owner: self)</code>
        </li>
      
        <li class="covered" data-hits="102" data-linenumber="33">
          <span class="hits">102</span>
          
          <code class="ruby">        if options[:inherit]</code>
        </li>
      
        <li class="covered" data-hits="70" data-linenumber="34">
          <span class="hits">70</span>
          
          <code class="ruby">          _validate_parameter_set_name(options[:inherit])</code>
        </li>
      
        <li class="covered" data-hits="70" data-linenumber="35">
          <span class="hits">70</span>
          
          <code class="ruby">          parent = _parameter_sets[options[:inherit]]</code>
        </li>
      
        <li class="covered" data-hits="70" data-linenumber="36">
          <span class="hits">70</span>
          
          <code class="ruby">          _parameter_sets[name].copy_defaults_from(parent)</code>
        </li>
      
        <li class="covered" data-hits="70" data-linenumber="37">
          <span class="hits">70</span>
          
          <code class="ruby">          _parameter_sets[name].define(parent, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="39">
          <span class="hits">32</span>
          
          <code class="ruby">          _parameter_sets[name].define(&amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="43">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :define_parameters, :define_params</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="45">
          <span class="hits">2</span>
          
          <code class="ruby">    def with_params(name, _options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="46">
          <span class="hits">1</span>
          
          <code class="ruby">      orig = _parameter_current</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">      self.params = name</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="48">
          <span class="hits">1</span>
          
          <code class="ruby">      yield</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">      self.params = orig</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="52">
          <span class="hits">2</span>
          
          <code class="ruby">    def params</code>
        </li>
      
        <li class="covered" data-hits="183" data-linenumber="53">
          <span class="hits">183</span>
          
          <code class="ruby">      @_live_parameter_requested = false</code>
        </li>
      
        <li class="covered" data-hits="183" data-linenumber="54">
          <span class="hits">183</span>
          
          <code class="ruby">      _parameter_sets[_parameter_current] || Missing.new(owner: self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="56">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :parameters, :params</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="58">
          <span class="hits">2</span>
          
          <code class="ruby">    def params=(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">      # Don&#39;t validate on setting this as this object could be used to set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">      # the context on some other object, therefore validate later if someone tries</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">      # to access the params on this object</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">      # _validate_parameter_set_name(name)</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="63">
          <span class="hits">20</span>
          
          <code class="ruby">      @_parameter_current = name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="65">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :parameters=, :params=</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">    # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="68">
          <span class="hits">2</span>
          
          <code class="ruby">    def _parameter_current</code>
        </li>
      
        <li class="covered" data-hits="199" data-linenumber="69">
          <span class="hits">199</span>
          
          <code class="ruby">      if path = self.class.parameters_context</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="70">
          <span class="hits">8</span>
          
          <code class="ruby">        case path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">        when :top, :dut</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="72">
          <span class="hits">2</span>
          
          <code class="ruby">          Origen.top_level._parameter_current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="74">
          <span class="hits">6</span>
          
          <code class="ruby">          eval(path)._parameter_current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="191" data-linenumber="77">
          <span class="hits">191</span>
          
          <code class="ruby">        @_parameter_current || :default</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">    # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="82">
          <span class="hits">2</span>
          
          <code class="ruby">    def _parameter_sets</code>
        </li>
      
        <li class="covered" data-hits="702" data-linenumber="83">
          <span class="hits">702</span>
          
          <code class="ruby">      @_parameter_sets ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">    # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="87">
          <span class="hits">2</span>
          
          <code class="ruby">    def _request_live_parameter</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="88">
          <span class="hits">16</span>
          
          <code class="ruby">      @_live_parameter_requested = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">    # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="92">
          <span class="hits">2</span>
          
          <code class="ruby">    def _live_parameter_requested?</code>
        </li>
      
        <li class="covered" data-hits="195" data-linenumber="93">
          <span class="hits">195</span>
          
          <code class="ruby">      @_live_parameter_requested</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="96">
          <span class="hits">2</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="98">
          <span class="hits">2</span>
          
          <code class="ruby">    def _validate_parameter_set_name(name)</code>
        </li>
      
        <li class="covered" data-hits="71" data-linenumber="99">
          <span class="hits">71</span>
          
          <code class="ruby">      unless _parameter_sets.key?(name)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="100">
          <span class="hits">1</span>
          
          <code class="ruby">        puts &quot;Unknown parameter set :#{name} requested for #{self.class}, these are the valid sets:&quot;</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="101">
          <span class="hits">8</span>
          
          <code class="ruby">        _parameter_sets.keys.each { |k| puts &quot;  :#{k}&quot; }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="102">
          <span class="hits">1</span>
          
          <code class="ruby">        puts &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="103">
          <span class="hits">1</span>
          
          <code class="ruby">        fail &#39;Unknown parameter set!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="2457e8cce1c8876418124bc9b5211b99f3ac6a2b">
  <div class="header">
    <h3>lib/origen/parameters/live.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>14</b> relevant lines. 
      <span class="green"><b>14</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Parameters</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    require &#39;delegate&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    class Live &lt; ::Delegator</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(options)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="6">
          <span class="hits">16</span>
          
          <code class="ruby">        @owner = options[:owner]</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="7">
          <span class="hits">16</span>
          
          <code class="ruby">        @path = options[:path].split(&#39;.&#39;)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="8">
          <span class="hits">16</span>
          
          <code class="ruby">        @name = options[:name]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">      def __getobj__</code>
        </li>
      
        <li class="covered" data-hits="113" data-linenumber="12">
          <span class="hits">113</span>
          
          <code class="ruby">        p = @owner.params</code>
        </li>
      
        <li class="covered" data-hits="229" data-linenumber="13">
          <span class="hits">229</span>
          
          <code class="ruby">        @path.each { |pt| p = p.send(pt) }</code>
        </li>
      
        <li class="covered" data-hits="113" data-linenumber="14">
          <span class="hits">113</span>
          
          <code class="ruby">        p.send(@name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">      def is_a_live_parameter?</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="18">
          <span class="hits">3</span>
          
          <code class="ruby">        true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="e44fa72f12ba5c36a058302acb1f02c24b04657b">
  <div class="header">
    <h3>lib/origen/parameters/missing.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>10</b> relevant lines. 
      <span class="green"><b>10</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Parameters</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # An instance of this class is returned whenever the parameter context is set to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # a value for which no parameter set has been defined.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    # Sometime this may be valid in the case where the context is actually implemented</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    # by another object which shadows the context.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">    # The missing allows the user to do params.context to retrieve the value of the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    # current context, but it will error out with a useful error message if they try</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">    # to do anything else (i.e. retrieve a parameter from it)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">    class Missing</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">        @owner = options[:owner]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">      def context</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="20">
          <span class="hits">2</span>
          
          <code class="ruby">        owner._parameter_current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">      def method_missing(_method, *_args, &amp;_block)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">        owner.send(:_validate_parameter_set_name, context)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="8dd9e2a0b42778504cb617c161e9dd7f5aa746b7">
  <div class="header">
    <h3>lib/origen/parameters/set.rb</h3>
    <h4><span class="green">96.3 %</span> covered</h4>
    <div>
      <b>81</b> relevant lines. 
      <span class="green"><b>78</b> lines covered</span> and
      <span class="red"><b>3</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Parameters</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    class Set &lt; Hash</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :top_level</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :name</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(options = {})</code>
        </li>
      
        <li class="covered" data-hits="270" data-linenumber="9">
          <span class="hits">270</span>
          
          <code class="ruby">        if options[:top_level]</code>
        </li>
      
        <li class="covered" data-hits="102" data-linenumber="10">
          <span class="hits">102</span>
          
          <code class="ruby">          @top_level = self</code>
        </li>
      
        <li class="covered" data-hits="102" data-linenumber="11">
          <span class="hits">102</span>
          
          <code class="ruby">          @path = &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="102" data-linenumber="12">
          <span class="hits">102</span>
          
          <code class="ruby">          @owner = options[:owner]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">      def define(parent = nil, &amp;_block)</code>
        </li>
      
        <li class="covered" data-hits="102" data-linenumber="17">
          <span class="hits">102</span>
          
          <code class="ruby">        @defining = true</code>
        </li>
      
        <li class="covered" data-hits="102" data-linenumber="18">
          <span class="hits">102</span>
          
          <code class="ruby">        yield self, parent</code>
        </li>
      
        <li class="covered" data-hits="102" data-linenumber="19">
          <span class="hits">102</span>
          
          <code class="ruby">        @defining = false</code>
        </li>
      
        <li class="covered" data-hits="102" data-linenumber="20">
          <span class="hits">102</span>
          
          <code class="ruby">        finalize</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      # Returns the current parameter context</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">      def context</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="25">
          <span class="hits">5</span>
          
          <code class="ruby">        owner._parameter_current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :current_context, :context</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">      def copy_defaults_from(set)</code>
        </li>
      
        <li class="covered" data-hits="196" data-linenumber="30">
          <span class="hits">196</span>
          
          <code class="ruby">        set.each do |name, val|</code>
        </li>
      
        <li class="covered" data-hits="392" data-linenumber="31">
          <span class="hits">392</span>
          
          <code class="ruby">          if val.is_a?(Set)</code>
        </li>
      
        <li class="covered" data-hits="126" data-linenumber="32">
          <span class="hits">126</span>
          
          <code class="ruby">            self[name] = new_subset(name)</code>
        </li>
      
        <li class="covered" data-hits="126" data-linenumber="33">
          <span class="hits">126</span>
          
          <code class="ruby">            self[name].copy_defaults_from(val)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="266" data-linenumber="35">
          <span class="hits">266</span>
          
          <code class="ruby">            self[name] = val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="40">
          <span class="hits">1</span>
          
          <code class="ruby">      def method_missing(method, *args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="770" data-linenumber="41">
          <span class="hits">770</span>
          
          <code class="ruby">        if defining?</code>
        </li>
      
        <li class="covered" data-hits="410" data-linenumber="42">
          <span class="hits">410</span>
          
          <code class="ruby">          if args.length == 0</code>
        </li>
      
        <li class="covered" data-hits="154" data-linenumber="43">
          <span class="hits">154</span>
          
          <code class="ruby">            self[method] ||= new_subset(method)</code>
        </li>
      
        <li class="covered" data-hits="256" data-linenumber="44">
          <span class="hits">256</span>
          
          <code class="ruby">          elsif args.length &gt; 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="45">
          
          
          <code class="ruby">            super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="256" data-linenumber="47">
          <span class="hits">256</span>
          
          <code class="ruby">            m = method.to_s.sub(&#39;=&#39;, &#39;&#39;).to_sym</code>
        </li>
      
        <li class="covered" data-hits="256" data-linenumber="48">
          <span class="hits">256</span>
          
          <code class="ruby">            self[m] = args.first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="360" data-linenumber="51">
          <span class="hits">360</span>
          
          <code class="ruby">          if args.length != 0</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="52">
          <span class="hits">3</span>
          
          <code class="ruby">            super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="357" data-linenumber="54">
          <span class="hits">357</span>
          
          <code class="ruby">            val = self[method]</code>
        </li>
      
        <li class="covered" data-hits="357" data-linenumber="55">
          <span class="hits">357</span>
          
          <code class="ruby">            if !val</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="56">
          
          
          <code class="ruby">              super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="357" data-linenumber="58">
          <span class="hits">357</span>
          
          <code class="ruby">              if val.is_a?(Set)</code>
        </li>
      
        <li class="covered" data-hits="162" data-linenumber="59">
          <span class="hits">162</span>
          
          <code class="ruby">                val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="195" data-linenumber="61">
          <span class="hits">195</span>
          
          <code class="ruby">                if live?</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="62">
          <span class="hits">16</span>
          
          <code class="ruby">                  Live.new(owner: owner, path: path, name: method)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="covered" data-hits="179" data-linenumber="64">
          <span class="hits">179</span>
          
          <code class="ruby">                  if val.is_a?(Proc)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="65">
          
          
          <code class="ruby">                    val.call(*args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">                  else</code>
        </li>
      
        <li class="covered" data-hits="179" data-linenumber="67">
          <span class="hits">179</span>
          
          <code class="ruby">                    val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="76">
          <span class="hits">1</span>
          
          <code class="ruby">      def each</code>
        </li>
      
        <li class="covered" data-hits="467" data-linenumber="77">
          <span class="hits">467</span>
          
          <code class="ruby">        super do |key, val|</code>
        </li>
      
        <li class="covered" data-hits="930" data-linenumber="78">
          <span class="hits">930</span>
          
          <code class="ruby">          if val.is_a?(Proc)</code>
        </li>
      
        <li class="covered" data-hits="85" data-linenumber="79">
          <span class="hits">85</span>
          
          <code class="ruby">            yield key, val.call</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="845" data-linenumber="81">
          <span class="hits">845</span>
          
          <code class="ruby">            yield key, val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="86">
          <span class="hits">1</span>
          
          <code class="ruby">      def [](key)</code>
        </li>
      
        <li class="covered" data-hits="638" data-linenumber="87">
          <span class="hits">638</span>
          
          <code class="ruby">        val = super</code>
        </li>
      
        <li class="covered" data-hits="638" data-linenumber="88">
          <span class="hits">638</span>
          
          <code class="ruby">        val.is_a?(Proc) ? val.call : val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">      # Test seems to be some kind of reserved word, that doesn&#39;t trigger the method_missing,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">      # so re-defining it here to allow a param group called &#39;test&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="93">
          <span class="hits">1</span>
          
          <code class="ruby">      def test(*args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="84" data-linenumber="94">
          <span class="hits">84</span>
          
          <code class="ruby">        method_missing(:test, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="97">
          <span class="hits">1</span>
          
          <code class="ruby">      def defining?</code>
        </li>
      
        <li class="covered" data-hits="1082" data-linenumber="98">
          <span class="hits">1082</span>
          
          <code class="ruby">        if top_level?</code>
        </li>
      
        <li class="covered" data-hits="770" data-linenumber="99">
          <span class="hits">770</span>
          
          <code class="ruby">          @defining</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="312" data-linenumber="101">
          <span class="hits">312</span>
          
          <code class="ruby">          top_level.defining?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="105">
          <span class="hits">1</span>
          
          <code class="ruby">      def owner</code>
        </li>
      
        <li class="covered" data-hits="395" data-linenumber="106">
          <span class="hits">395</span>
          
          <code class="ruby">        if top_level?</code>
        </li>
      
        <li class="covered" data-hits="232" data-linenumber="107">
          <span class="hits">232</span>
          
          <code class="ruby">          @owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="163" data-linenumber="109">
          <span class="hits">163</span>
          
          <code class="ruby">          top_level.owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="113">
          <span class="hits">1</span>
          
          <code class="ruby">      def top_level?</code>
        </li>
      
        <li class="covered" data-hits="1477" data-linenumber="114">
          <span class="hits">1477</span>
          
          <code class="ruby">        top_level == self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="117">
          <span class="hits">1</span>
          
          <code class="ruby">      def finalize</code>
        </li>
      
        <li class="covered" data-hits="270" data-linenumber="118">
          <span class="hits">270</span>
          
          <code class="ruby">        freeze</code>
        </li>
      
        <li class="covered" data-hits="806" data-linenumber="119">
          <span class="hits">806</span>
          
          <code class="ruby">        each { |_name, val| val.finalize if val.is_a? Set }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="122">
          <span class="hits">1</span>
          
          <code class="ruby">      def new_subset(name)</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="123">
          <span class="hits">168</span>
          
          <code class="ruby">        set = Set.new</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="124">
          <span class="hits">168</span>
          
          <code class="ruby">        set.name = name</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="125">
          <span class="hits">168</span>
          
          <code class="ruby">        set.top_level = top_level</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="126">
          <span class="hits">168</span>
          
          <code class="ruby">        if path == &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="112" data-linenumber="127">
          <span class="hits">112</span>
          
          <code class="ruby">          set.path = name.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="56" data-linenumber="129">
          <span class="hits">56</span>
          
          <code class="ruby">          set.path = &quot;#{path}.#{name}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="131">
          <span class="hits">168</span>
          
          <code class="ruby">        set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="134">
          <span class="hits">1</span>
          
          <code class="ruby">      def live?</code>
        </li>
      
        <li class="covered" data-hits="195" data-linenumber="135">
          <span class="hits">195</span>
          
          <code class="ruby">        owner._live_parameter_requested?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="138">
          <span class="hits">1</span>
          
          <code class="ruby">      def live</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="139">
          <span class="hits">16</span>
          
          <code class="ruby">        owner._request_live_parameter</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="140">
          <span class="hits">16</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="6b5f3769dc54d5d373446a277df0b0b7201541bb">
  <div class="header">
    <h3>lib/origen/pins.rb</h3>
    <h4><span class="red">79.92 %</span> covered</h4>
    <div>
      <b>254</b> relevant lines. 
      <span class="green"><b>203</b> lines covered</span> and
      <span class="red"><b>51</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">  # ****** These notes refer to the pin model for the upcoming Origen V3 ******</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">  # Pin muxing and grouping on modern SoCs can be incredibly complex, Origen provides the following pin model</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">  # architecture which should hopefully be sufficient to accurately model even the most complex of cases...</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">  # At the lowest layer are the pin objects, one per physical pin on a DUT. Each pin can store 1-bit of data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">  # with directional/state information for pattern generation, and additional metadata about the function of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">  # that pin in different modes of operation.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">  #     pin1                        pin2                        pin3                        pin4</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">  # *Package*</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">  # Packages are the first layer of filtering that can be applied to pins, each pin has a package hash which</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">  # contains information about which packages it is available in and any additional metadata associated with</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">  # the pin when in that package - for example what package pin location it is.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">  #     pin1                        pin2                        pin3                        pin4</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">  #       packages:                   packages:                   packages:                   packages:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">  #         p1:                         p1:                         p1:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">  #           location: &quot;A5&quot;              location: &quot;B2&quot;              location: &quot;B3&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">  #         p2:                                                     p2:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">  #           location: &quot;A5&quot;                                          location: &quot;B2&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">  # Based on the above metadata these pins will work as follows within an SoC model:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">  #     $dut.package                     # =&gt; :none</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">  #     $dut.pins.size                   # =&gt; 4</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">  #     $dut.with_package :p1 do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">  #       $dut.pins.size                 # =&gt; 3     (No pin4)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">  #       $dut.pin(:pin1).location       # =&gt; &quot;A5&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">  #       $dut.has_pin?(:pin2)           # =&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">  #       $dut.pin(:pin2).location       # =&gt; &quot;B2&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">  #       $dut.pin(:pin3).location       # =&gt; &quot;B3&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">  #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">  #     $dut.with_package :p2 do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">  #       $dut.pins.size                 # =&gt; 2     (No pin2 or pin4)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">  #       $dut.pin(:pin1).location       # =&gt; &quot;A5&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">  #       $dut.has_pin?(:pin2)           # =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">  #       $dut.pin(:pin2).location       # =&gt; ERROR! The soc does not have pin 2 in the current configuration!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">  #       $dut.pin(:pin3).location       # =&gt; &quot;B2&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">  #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">  # Aside from a physical package the packages attribute can also be used to model pseudo-packages like the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">  # subset of pins that are available in a probe or burn-in setup for example.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">  # Pins availability can also be scoped by SoC mode and configuration...</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">  # *Mode*</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">  # The SoC mode attribute is inteded to be used to model top-level operating modes, such as functional test,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">  # RAMBIST, NVMBIST, etc. As such it is a top-level attribute similar to package attribute e.g. the SoC can be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">  # in RAMBIST mode within package P1, or it could be in User mode within package P2.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">  # *Configuration*</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">  # The configuration scope should be used to model pin muxing that can occur independently of the SoC mode, for</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">  # example in a functional test mode many different pin configurations may exist based on the IP modules that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">  # are enabled or disabled at runtime.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">  # Unlike the mode the configuration attribute can also be set at pin level as well. Any configuration attribute</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">  # set on a pin will override the configuration attribute that is currently live on the SoC. This allows individual</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">  # pins, or perhaps more commonly individual pin groups, to be set to a particular configuration independently</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">  # of the other pins or the SoC.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">  # The mode and configuration attributes at pin level are similar to those for the package, each pin also has a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">  # current_configuration attribute which will override the current_configuration attribute of the SoC when</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">  # present. Each mode and configuration entry will be hash for storing meta data as required.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">  #     pin1                        pin2                        pin3                        pin4</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">  #       modes:                      modes:                      modes:                      modes:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">  #         user:                       user:                       user:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">  #         nvmbist:                    nvmbist:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">  #       configurations:             configurations:             configurations:             configurations:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">  #         default:                    default:                    default:                    default:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">  #         alt0:                       alt1:                       alt0:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">  #                                                                 alt1:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">  # Pin availability will be scoped accordingly when the mode and configuration of the SoC model is changed.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">  # Although not shown in this example all of these filters are AND&#39;d together, so a pin is only available if it</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">  # is available in the current package, mode and configuration.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">  #     $dut.mode                        # =&gt; :none</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">  #     $dut.configuration               # =&gt; :none</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">  #     $dut.pins.size                   # =&gt; 4</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">  #     $dut.mode = :user</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">  #     $dut.pins.size                   # =&gt; 3   (No pin4)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">  #     $dut.configuration = :alt0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">  #     $dut.pins.size                   # =&gt; 2   (No pin2 or pin4)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">  #     # Set the configuration of pin2 directly, the all_pins method will bypass the current scope</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">  #     # when looking up a pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">  #     $dut.all_pins(:pin2).configuration = :alt1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">  #     $dut.pins.size                   # =&gt; 3   (pin2 is now available to)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">  # While not shown here an additional value of :all can be set when specifying the mode/configuration attributes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">  # of a given pin and which means that it will be available in all modes and/or configurations.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">  # *Functions*</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">  # Each pin can have multiple functions associated with it which is intended to reflect the current signal that is</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">  # mux&#39;d onto it. Functions are scoped by mode and configuration (not package) and only one function can exist</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">  # per mode/configuration combo.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">  # Again the reserved mode/configuration name :all can be used here to reflect a function that will be common to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">  # all modes/configurations unless a more specific function has been declared.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">  # The top-level key of the functions hash is the mode, then the configuration and then the meta data associated</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">  # with that selection:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">  #     pin1                        pin2                        pin3                        pin4</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">  #       functions:                  functions:                  functions:                  functions:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">  #         user:                       user:                       user:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">  #           all:                        default:                    default:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">  #             name: &quot;TDI&quot;                  name: &quot;PORTA0&quot;              name: &quot;PORTA1&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">  #             direction: :input            direction: :io              direction: :io</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">  #                                       alt1:                       alt0:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">  #                                          name: &quot;SPI0&quot;                name: &quot;IIC0&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">  #                                          direction: :io              direction: :output</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">  #                                                                   alt1:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">  #                                                                      name: &quot;SPI1&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">  #                                                                      direction: :io</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">  #         nvmbist:                    nvmbist:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">  #           all:                        all:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">  #             name: &quot;NVM_FAIL&quot;            name: &quot;NVM_DONE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">  #             direction: :output          direction: :output</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">  # The function attributes returned will automatically scope to the current SoC state:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">  #     $dut.mode = :user</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby">  #     $dut.pin(:pin1).name             # =&gt; &quot;TDI&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">  #     $dut.pin(:pin1).direction        # =&gt; :input</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">  #     $dut.mode = :nvmbist</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">  #     $dut.pin(:pin1).name             # =&gt; &quot;NVM_FAIL&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">  #     $dut.pin(:pin1).direction        # =&gt; :output</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">  # *Aliases*</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">  # Aliases are alternative names/handles to give to pins when using them to create patterns and other IP in Origen.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">  # Aliases can be made universal in which case they will work regardless of scope, or they can be scoped to the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">  # current package, mode and configuration.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">  # The Origen pin API will automatically create scoped aliases for functions and package locations as they are</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">  # declared, so for example:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby">  #     $dut.mode = :user</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">  #     $dut.pin(:pin1).name             # =&gt; &quot;TDI&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">  #     $dut.pin(:tdi).name              # =&gt; &quot;TDI&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby">  #     $dut.has_pin?(:nvm_fail)         # =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">  #     $dut.pin(:nvm_fail).name         # =&gt; ERROR! No pin called NVM_FAIL in the current scope!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">  #     $dut.mode = :nvmbist</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby">  #     $dut.pin(:pin1).name             # =&gt; &quot;NVM_FAIL&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">  #     $dut.has_pin?(:nvm_fail)         # =&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">  #     $dut.pin(:nvm_fail).name         # =&gt; &quot;NVM_FAIL&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="161">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby">  # *Pin Groups*</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby">  # Pin groups will be similar to aliases in that they can be made universal or scoped to a specific package/mode/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby">  # configuration.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby">  # While aliases are simply pointers to pin objects pin groups will themselves be an Origen object which will be like</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">  # a Ruby array with additional metadata attached (such as a name) and a dedicated API for working with the pins.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">  # Generally a pin and pingroup will respond to the same API so that calling code does not need to worry very much</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">  # about dealing with a single pin vs. a collection.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="171">
          <span class="hits">2</span>
          
          <code class="ruby">  module Pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="172">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Pin,           &#39;origen/pins/pin&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="173">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :PinCollection, &#39;origen/pins/pin_collection&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="174">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :PinBank,       &#39;origen/pins/pin_bank&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="175">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :PinCommon,     &#39;origen/pins/pin_common&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="176">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :PinClock,      &#39;origen/pins/pin_clock&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="177">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :PowerPin,      &#39;origen/pins/power_pin&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="178">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :GroundPin,     &#39;origen/pins/ground_pin&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="179">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :VirtualPin,    &#39;origen/pins/virtual_pin&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="180">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :FunctionProxy, &#39;origen/pins/function_proxy&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">    # @api private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">    # API v2, deprecated</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="184">
          <span class="hits">2</span>
          
          <code class="ruby">    def self.clear_pin_aliases</code>
        </li>
      
        <li class="covered" data-hits="79" data-linenumber="185">
          <span class="hits">79</span>
          
          <code class="ruby">      @@pin_aliases = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby">    # @api private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby">    # Aliases are stored in a global array that is cleared out everytime the target is loaded,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">    # while a bit hacky this is an easy way to allow sub modules to defined con</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="192">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby">    # API v2, deprecated</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="194">
          <span class="hits">2</span>
          
          <code class="ruby">    def self.pin_aliases</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="195">
          <span class="hits">30</span>
          
          <code class="ruby">      @@pin_aliases ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="197">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby">    # Use this method to add any pins that are considered owned by the given object.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">    # Pins declared via this method will be accessible within the object via</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">    # pin(:pinname) or if you prefer self.pin(:pinname). Externally you would refer</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby">    # to it via $top.pin(:pinname) or $soc.pin(:pinname) or even</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">    # $top.sub_module.pin(:pinname) depending on where you called this method.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby">    # Pins are output in the pattern in the order that they are declared.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">    # A minimum declaration is this:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby">    #   add_pin  :d_out        # A single pin that will be set to :dont_care by default</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="206">
          
          
          <code class="ruby">    # To set the initial state at the same time:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby">    #   add_pin  :d_in,   :reset =&gt; :drive_hi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="208">
          
          
          <code class="ruby">    #   add_pin  :invoke, :reset =&gt; :drive_lo</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby">    # You can override the name that appears in the pattern by providing a string</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby">    # as the last argument</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">    #   add_pin  :done,   :reset =&gt; :expect_hi, :name =&gt; &quot;bist_done&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">    #   add_pin  :fail,                         :name =&gt; &quot;bist_fail&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="213">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_pin(id = nil, options = {}, &amp;_block)</code>
        </li>
      
        <li class="covered" data-hits="2125" data-linenumber="214">
          <span class="hits">2125</span>
          
          <code class="ruby">      id, options = nil, id if id.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="2125" data-linenumber="215">
          <span class="hits">2125</span>
          
          <code class="ruby">      power_pin = options.delete(:power_pin)</code>
        </li>
      
        <li class="covered" data-hits="2125" data-linenumber="216">
          <span class="hits">2125</span>
          
          <code class="ruby">      ground_pin = options.delete(:ground_pin)</code>
        </li>
      
        <li class="covered" data-hits="2125" data-linenumber="217">
          <span class="hits">2125</span>
          
          <code class="ruby">      virtual_pin = options.delete(:virtual_pin)</code>
        </li>
      
        <li class="covered" data-hits="2125" data-linenumber="218">
          <span class="hits">2125</span>
          
          <code class="ruby">      if options[:size] &amp;&amp; options[:size] &gt; 1</code>
        </li>
      
        <li class="covered" data-hits="333" data-linenumber="219">
          <span class="hits">333</span>
          
          <code class="ruby">        group = PinCollection.new(self, options.merge(placeholder: true))</code>
        </li>
      
        <li class="covered" data-hits="333" data-linenumber="220">
          <span class="hits">333</span>
          
          <code class="ruby">        group.id = id if id</code>
        </li>
      
        <li class="covered" data-hits="333" data-linenumber="221">
          <span class="hits">333</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">          name: &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="333" data-linenumber="225">
          <span class="hits">333</span>
          
          <code class="ruby">        options.delete(:size).times do |i|</code>
        </li>
      
        <li class="covered" data-hits="2626" data-linenumber="226">
          <span class="hits">2626</span>
          
          <code class="ruby">          options[:name] = &quot;#{id}#{i}&quot;.to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2626" data-linenumber="228">
          <span class="hits">2626</span>
          
          <code class="ruby">          if power_pin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="229">
          
          
          <code class="ruby">            group[i] = PowerPin.new(i, self, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby">          elsif ground_pin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="231">
          
          
          <code class="ruby">            group[i] = GroundPin.new(i, self, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="232">
          
          
          <code class="ruby">          elsif virtual_pin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="233">
          
          
          <code class="ruby">            group[i] = VirtualPin.new(i, self, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="2626" data-linenumber="235">
          <span class="hits">2626</span>
          
          <code class="ruby">            group[i] = Pin.new(i, self, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="2626" data-linenumber="237">
          <span class="hits">2626</span>
          
          <code class="ruby">          group[i].invalidate_group_cache</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="333" data-linenumber="239">
          <span class="hits">333</span>
          
          <code class="ruby">        yield group if block_given?</code>
        </li>
      
        <li class="covered" data-hits="333" data-linenumber="240">
          <span class="hits">333</span>
          
          <code class="ruby">        group.each do |pin|</code>
        </li>
      
        <li class="covered" data-hits="2626" data-linenumber="241">
          <span class="hits">2626</span>
          
          <code class="ruby">          pin.id = &quot;#{group.id}#{pin.id}&quot;.to_sym</code>
        </li>
      
        <li class="covered" data-hits="2626" data-linenumber="242">
          <span class="hits">2626</span>
          
          <code class="ruby">          pin.finalize</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="333" data-linenumber="244">
          <span class="hits">333</span>
          
          <code class="ruby">        if group.size == 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="245">
          
          
          <code class="ruby">          Origen.pin_bank.add_pin(group.first, self, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="333" data-linenumber="247">
          <span class="hits">333</span>
          
          <code class="ruby">          Origen.pin_bank.add_pin_group(group, self, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="248">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="1792" data-linenumber="250">
          <span class="hits">1792</span>
          
          <code class="ruby">        if power_pin</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="251">
          <span class="hits">4</span>
          
          <code class="ruby">          pin = PowerPin.new(id || :temp, self, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">        elsif ground_pin</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="253">
          <span class="hits">4</span>
          
          <code class="ruby">          pin = GroundPin.new(id || :temp, self, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="254">
          
          
          <code class="ruby">        elsif virtual_pin</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="255">
          <span class="hits">6</span>
          
          <code class="ruby">          pin = VirtualPin.new(id || :temp, self, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="1778" data-linenumber="257">
          <span class="hits">1778</span>
          
          <code class="ruby">          pin = Pin.new(id || :temp, self, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1792" data-linenumber="259">
          <span class="hits">1792</span>
          
          <code class="ruby">        yield pin if block_given?</code>
        </li>
      
        <li class="covered" data-hits="1792" data-linenumber="260">
          <span class="hits">1792</span>
          
          <code class="ruby">        pin.finalize</code>
        </li>
      
        <li class="covered" data-hits="1792" data-linenumber="261">
          <span class="hits">1792</span>
          
          <code class="ruby">        Origen.pin_bank.add_pin(pin, self, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="262">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="264">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :add_pins, :add_pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="266">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_power_pin(id = nil, options = {}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="267">
          <span class="hits">4</span>
          
          <code class="ruby">      id, options = nil, id if id.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="268">
          <span class="hits">4</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="269">
          
          
          <code class="ruby">        power_pin: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="270">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="271">
          <span class="hits">4</span>
          
          <code class="ruby">      add_pin(id, options, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="273">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :add_power_pins, :add_power_pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="274">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="275">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_ground_pin(id = nil, options = {}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="276">
          <span class="hits">4</span>
          
          <code class="ruby">      id, options = nil, id if id.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="277">
          <span class="hits">4</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby">        ground_pin: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="279">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="280">
          <span class="hits">4</span>
          
          <code class="ruby">      add_pin(id, options, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="282">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :add_ground_pins, :add_ground_pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="283">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="284">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_virtual_pin(id = nil, options = {}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="285">
          <span class="hits">6</span>
          
          <code class="ruby">      id, options = nil, id if id.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="286">
          <span class="hits">6</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="287">
          
          
          <code class="ruby">        virtual_pin: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="289">
          <span class="hits">6</span>
          
          <code class="ruby">      add_pin(id, options, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="291">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :add_virtual_pins, :add_virtual_pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="292">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="293">
          
          
          <code class="ruby">    # Specify the order that pins will appear in the output pattern, unspecified</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="294">
          
          
          <code class="ruby">    # pins will appear in an arbitrary order at the end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="295">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="296">
          
          
          <code class="ruby">    # API v2, deprecated</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="297">
          <span class="hits">2</span>
          
          <code class="ruby">    def pin_pattern_order(*pin_ids)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="298">
          <span class="hits">6</span>
          
          <code class="ruby">      if pin_ids.last.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="299">
          <span class="hits">2</span>
          
          <code class="ruby">        options = pin_ids.pop</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="300">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="301">
          <span class="hits">4</span>
          
          <code class="ruby">        options = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="303">
          <span class="hits">6</span>
          
          <code class="ruby">      pin_ids.each do |id|</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="304">
          <span class="hits">24</span>
          
          <code class="ruby">        if pin_aliases[id]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="305">
          
          
          <code class="ruby">          Origen.app.pin_names[pin_aliases[id].first] = id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="306">
          
          
          <code class="ruby">          id = pin_aliases[id].first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="308">
          <span class="hits">24</span>
          
          <code class="ruby">        Origen.app.pin_pattern_order &lt;&lt; id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="309">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="310">
          <span class="hits">6</span>
          
          <code class="ruby">      Origen.app.pin_pattern_order &lt;&lt; options unless options.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="311">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="313">
          
          
          <code class="ruby">    # Specify the pins will not appear in the output pattern</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="314">
          <span class="hits">2</span>
          
          <code class="ruby">    def pin_pattern_exclude(*pin_ids)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="315">
          <span class="hits">1</span>
          
          <code class="ruby">      if pin_ids.last.is_a?(Hash)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="316">
          
          
          <code class="ruby">        options = pin_ids.pop</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="317">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="318">
          <span class="hits">1</span>
          
          <code class="ruby">        options = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="320">
          <span class="hits">1</span>
          
          <code class="ruby">      pin_ids.each do |id|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="321">
          <span class="hits">6</span>
          
          <code class="ruby">        if pin_aliases[id]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="322">
          
          
          <code class="ruby">          Origen.app.pin_names[pin_aliases[id].first] = id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="323">
          
          
          <code class="ruby">          id = pin_aliases[id].first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="324">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="325">
          <span class="hits">6</span>
          
          <code class="ruby">        Origen.app.pin_pattern_exclude &lt;&lt; id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="326">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="327">
          <span class="hits">1</span>
          
          <code class="ruby">      Origen.app.pin_pattern_exclude &lt;&lt; options unless options.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="328">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="329">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="330">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_pin_alias(new_name, original_name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="1476" data-linenumber="331">
          <span class="hits">1476</span>
          
          <code class="ruby">      if pin_groups.include?(original_name) # this is a pin group</code>
        </li>
      
        <li class="covered" data-hits="585" data-linenumber="332">
          <span class="hits">585</span>
          
          <code class="ruby">        if options[:pin] # alias single pin from a pin group</code>
        </li>
      
        <li class="covered" data-hits="148" data-linenumber="333">
          <span class="hits">148</span>
          
          <code class="ruby">          pin(original_name)[options[:pin]].add_alias(new_name, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby">        else # alias subset of pins from a pin group</code>
        </li>
      
        <li class="covered" data-hits="437" data-linenumber="335">
          <span class="hits">437</span>
          
          <code class="ruby">          add_pin_group_alias(new_name, original_name, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="336">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="337">
          
          
          <code class="ruby">      else # this is a pin</code>
        </li>
      
        <li class="covered" data-hits="891" data-linenumber="338">
          <span class="hits">891</span>
          
          <code class="ruby">        pin(original_name).add_alias(new_name, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="339">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="340">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="341">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :pin_alias, :add_pin_alias</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="342">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :alias_pin, :add_pin_alias</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="343">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="344">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_pin_group_alias(new_name, original_name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="440" data-linenumber="345">
          <span class="hits">440</span>
          
          <code class="ruby">      group = Origen.pin_bank.find_or_create_pin_group(new_name, self, options)</code>
        </li>
      
        <li class="covered" data-hits="440" data-linenumber="346">
          <span class="hits">440</span>
          
          <code class="ruby">      if options[:pins] # alias to range of pins from a pin group</code>
        </li>
      
        <li class="covered" data-hits="292" data-linenumber="347">
          <span class="hits">292</span>
          
          <code class="ruby">        options[:pins].each do |mypin|</code>
        </li>
      
        <li class="covered" data-hits="730" data-linenumber="348">
          <span class="hits">730</span>
          
          <code class="ruby">          pin(new_name).add_pin(pin(original_name)[mypin])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="349">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="350">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="1322" data-linenumber="351">
          <span class="hits">1322</span>
          
          <code class="ruby">        pin(original_name).each_with_index { |_pin, i| pin(new_name).add_pin(pin(original_name)[i]) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="352">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="440" data-linenumber="353">
          <span class="hits">440</span>
          
          <code class="ruby">      group</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="354">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="355">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="356">
          
          
          <code class="ruby">    # @api private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="357">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="358">
          
          
          <code class="ruby">    # API v2, deprecated</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="359">
          <span class="hits">2</span>
          
          <code class="ruby">    def pin_aliases</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="360">
          
          
          <code class="ruby">      # Clear this out every time the target changes</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="361">
          <span class="hits">30</span>
          
          <code class="ruby">      if !(defined? @@pin_aliases_target) ||</code>
        </li>
      
        <li class="covered" data-hits="59" data-linenumber="362">
          <span class="hits">59</span>
          
          <code class="ruby">         (@@pin_aliases_target != Origen.target.signature)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="363">
          <span class="hits">2</span>
          
          <code class="ruby">        Origen::Pins.clear_pin_aliases</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="364">
          <span class="hits">2</span>
          
          <code class="ruby">        @@pin_aliases_target = Origen.target.signature</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="365">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="366">
          <span class="hits">30</span>
          
          <code class="ruby">      Origen::Pins.pin_aliases</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="367">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="368">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="369">
          
          
          <code class="ruby">    # API v2, deprecated</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="370">
          <span class="hits">2</span>
          
          <code class="ruby">    def pin_order</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="371">
          
          
          <code class="ruby">      @pin_order ||= 10_000_000</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="372">
          
          
          <code class="ruby">      @pin_order += 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="373">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="374">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="375">
          
          
          <code class="ruby">    # API v2, deprecated</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="376">
          <span class="hits">2</span>
          
          <code class="ruby">    def pin_order_block(order)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="377">
          
          
          <code class="ruby">      pin_order_orig = @pin_order</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="378">
          
          
          <code class="ruby">      @pin_order = order * 1000</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="379">
          
          
          <code class="ruby">      yield</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="380">
          
          
          <code class="ruby">      @pin_order = pin_order_orig</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="381">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="382">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="383">
          
          
          <code class="ruby">    # Returns true if the module has access to a pin with the given name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="384">
          
          
          <code class="ruby">    # within the current context</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="385">
          <span class="hits">2</span>
          
          <code class="ruby">    def has_pin?(id)</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="386">
          <span class="hits">80</span>
          
          <code class="ruby">      !!Origen.pin_bank.find(id)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="387">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="388">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :has_pins?, :has_pin?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="389">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="390">
          
          
          <code class="ruby">    # Equivalent to the has_pin? method but considers power pins rather than regular pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="391">
          <span class="hits">2</span>
          
          <code class="ruby">    def has_power_pin?(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="392">
          
          
          <code class="ruby">      !!Origen.pin_bank.find(id, power_pin: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="393">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="394">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :has_power_pins?, :has_power_pin?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="395">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="396">
          
          
          <code class="ruby">    # Equivalent to the has_pin? method but considers ground pins rather than regular pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="397">
          <span class="hits">2</span>
          
          <code class="ruby">    def has_ground_pin?(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="398">
          
          
          <code class="ruby">      !!Origen.pin_bank.find(id, ground_pin: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="399">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="400">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :has_ground_pins?, :has_ground_pin?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="401">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="402">
          
          
          <code class="ruby">    # Equivalent to the has_pin? method but considers virtual pins rather than regular pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="403">
          <span class="hits">2</span>
          
          <code class="ruby">    def has_virtual_pin?(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="404">
          
          
          <code class="ruby">      !!Origen.pin_bank.find(id, virtual_pin: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="405">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="406">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :has_virtual_pins?, :has_virtual_pin?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="407">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="408">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_pin_group(id, *pins, &amp;_block)</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="409">
          <span class="hits">47</span>
          
          <code class="ruby">      if pins.last.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="410">
          <span class="hits">10</span>
          
          <code class="ruby">        options = pins.pop</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="411">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="412">
          <span class="hits">37</span>
          
          <code class="ruby">        options = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="413">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="414">
          
          
          <code class="ruby">      # check if this is a pin group alias</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="415">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="416">
          <span class="hits">47</span>
          
          <code class="ruby">      found = false</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="417">
          <span class="hits">47</span>
          
          <code class="ruby">      group = nil</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="418">
          <span class="hits">47</span>
          
          <code class="ruby">      unless options[:pins_only] == true</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="419">
          <span class="hits">47</span>
          
          <code class="ruby">        pins.each do |i|</code>
        </li>
      
        <li class="covered" data-hits="125" data-linenumber="420">
          <span class="hits">125</span>
          
          <code class="ruby">          if pin_groups.include?(i)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="421">
          <span class="hits">1</span>
          
          <code class="ruby">            group = add_pin_group_alias(id, i, options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="422">
          <span class="hits">1</span>
          
          <code class="ruby">            found = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="423">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="424">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="425">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="426">
          <span class="hits">47</span>
          
          <code class="ruby">      unless found # not a pin group alias</code>
        </li>
      
        <li class="covered" data-hits="46" data-linenumber="427">
          <span class="hits">46</span>
          
          <code class="ruby">        group = Origen.pin_bank.find_or_create_pin_group(id, self, options)</code>
        </li>
      
        <li class="covered" data-hits="46" data-linenumber="428">
          <span class="hits">46</span>
          
          <code class="ruby">        if block_given?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="429">
          <span class="hits">2</span>
          
          <code class="ruby">          yield group</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="430">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="431">
          
          
          <code class="ruby">          # SMcG:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="432">
          
          
          <code class="ruby">          #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="433">
          
          
          <code class="ruby">          # Not 100% sure that this is right, but the idea here is that when manually defining a pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="434">
          
          
          <code class="ruby">          # group the user will naturally think in endian order. e.g. when defining a big endian group</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="435">
          
          
          <code class="ruby">          # they would do:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="436">
          
          
          <code class="ruby">          #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="437">
          
          
          <code class="ruby">          #   add_pin_group :pa, :pa7, :pa5, :pa1, :pa0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="438">
          
          
          <code class="ruby">          #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="439">
          
          
          <code class="ruby">          # But if it was little endian they would probably do:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="440">
          
          
          <code class="ruby">          #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="441">
          
          
          <code class="ruby">          #   add_pin_group :pa, :pa0, :pa1, :pa5, :pa7, :endian =&gt; :little</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="442">
          
          
          <code class="ruby">          #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="443">
          
          
          <code class="ruby">          # However I never work on little endian ports so I don&#39;t know for sure!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="444">
          
          
          <code class="ruby">          #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="445">
          
          
          <code class="ruby">          # In both cases though we always want pins(:pa)[0] to return :pa0.</code>
        </li>
      
        <li class="covered" data-hits="44" data-linenumber="446">
          <span class="hits">44</span>
          
          <code class="ruby">          if options[:endian] == :little</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="447">
          
          
          <code class="ruby">            pins.each { |pin| group.add_pin(pin, options) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="448">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="449">
          <span class="hits">168</span>
          
          <code class="ruby">            pins.reverse_each { |pin| group.add_pin(pin, options) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="450">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="451">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="452">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="453">
          <span class="hits">47</span>
          
          <code class="ruby">      group</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="454">
          
          
          <code class="ruby">      # Origen.pin_bank.add_pin_group(group, self, {:pins_exist =&gt; true}.merge(options))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="455">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="456">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="457">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_power_pin_group(id, *pins, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="458">
          <span class="hits">2</span>
          
          <code class="ruby">      if pins.last.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="459">
          <span class="hits">2</span>
          
          <code class="ruby">        options = pins.pop</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="460">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="461">
          
          
          <code class="ruby">        options = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="462">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="463">
          <span class="hits">2</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="464">
          
          
          <code class="ruby">        power_pin: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="465">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="466">
          <span class="hits">2</span>
          
          <code class="ruby">      add_pin_group(id, *pins, options, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="467">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="468">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="469">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_ground_pin_group(id, *pins, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="470">
          <span class="hits">2</span>
          
          <code class="ruby">      if pins.last.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="471">
          <span class="hits">2</span>
          
          <code class="ruby">        options = pins.pop</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="472">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="473">
          
          
          <code class="ruby">        options = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="474">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="475">
          <span class="hits">2</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="476">
          
          
          <code class="ruby">        ground_pin: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="477">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="478">
          <span class="hits">2</span>
          
          <code class="ruby">      add_pin_group(id, *pins, options, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="479">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="480">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="481">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_virtual_pin_group(id, *pins, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="482">
          <span class="hits">2</span>
          
          <code class="ruby">      if pins.last.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="483">
          <span class="hits">2</span>
          
          <code class="ruby">        options = pins.pop</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="484">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="485">
          
          
          <code class="ruby">        options = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="486">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="487">
          <span class="hits">2</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="488">
          
          
          <code class="ruby">        virtual_pin: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="489">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="490">
          <span class="hits">2</span>
          
          <code class="ruby">      add_pin_group(id, *pins, options, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="491">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="492">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="493">
          
          
          <code class="ruby">    # Similar to the pins method except that this method will bypass the package/mode/configuration</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="494">
          
          
          <code class="ruby">    # scope.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="495">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="496">
          
          
          <code class="ruby">    # Therefore with no id supplied it will return all known pins and with an id it will return the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="497">
          
          
          <code class="ruby">    # given pin object regardless of where or not it is enabled by the current context</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="498">
          <span class="hits">2</span>
          
          <code class="ruby">    def all_pins(id = nil, _options = {}, &amp;_block)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="499">
          
          
          <code class="ruby">      if id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="500">
          
          
          <code class="ruby">        pin = Origen.pin_bank.find(id, ignore_context: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="501">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="502">
          
          
          <code class="ruby">        Origen.pin_bank.all_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="503">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="504">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="505">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="506">
          
          
          <code class="ruby">    # Equivalent to the all_pins method but considers power pins rather than regular pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="507">
          <span class="hits">2</span>
          
          <code class="ruby">    def all_power_pins(id = nil, _options = {}, &amp;_block)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="508">
          
          
          <code class="ruby">      if id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="509">
          
          
          <code class="ruby">        pin = Origen.pin_bank.find(id, ignore_context: true, power_pin: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="510">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="511">
          
          
          <code class="ruby">        Origen.pin_bank.all_power_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="512">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="513">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="514">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="515">
          
          
          <code class="ruby">    # Equivalent to the all_pins method but considers ground pins rather than regular pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="516">
          <span class="hits">2</span>
          
          <code class="ruby">    def all_ground_pins(id = nil, _options = {}, &amp;_block)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="517">
          
          
          <code class="ruby">      if id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="518">
          
          
          <code class="ruby">        pin = Origen.pin_bank.find(id, ignore_context: true, ground_pin: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="519">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="520">
          
          
          <code class="ruby">        Origen.pin_bank.all_ground_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="521">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="522">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="523">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="524">
          
          
          <code class="ruby">    # Equivalent to the all_pins method but considers ground pins rather than regular pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="525">
          <span class="hits">2</span>
          
          <code class="ruby">    def all_virtual_pins(id = nil, _options = {}, &amp;_block)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="526">
          
          
          <code class="ruby">      if id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="527">
          
          
          <code class="ruby">        pin = Origen.pin_bank.find(id, ignore_context: true, virtual_pin: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="528">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="529">
          
          
          <code class="ruby">        Origen.pin_bank.all_virtual_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="530">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="531">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="532">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="533">
          <span class="hits">2</span>
          
          <code class="ruby">    def pin_groups(id = nil, options = {}, &amp;_block)</code>
        </li>
      
        <li class="covered" data-hits="1644" data-linenumber="534">
          <span class="hits">1644</span>
          
          <code class="ruby">      id, options = nil, id if id.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="1644" data-linenumber="535">
          <span class="hits">1644</span>
          
          <code class="ruby">      if id</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="536">
          <span class="hits">25</span>
          
          <code class="ruby">        pin = Origen.pin_bank.find(id, options)</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="537">
          <span class="hits">25</span>
          
          <code class="ruby">        unless pin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="538">
          
          
          <code class="ruby">          puts &lt;&lt;-END</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="539">
          
          
          <code class="ruby">You have tried to reference pin_group :#{id} within #{self.class} but it does not exist, this could be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="540">
          
          
          <code class="ruby">because the pin has not been defined yet or it is an alias that is not available in the current context.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="541">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="542">
          
          
          <code class="ruby">If you meant to define the pin_group then use the add_pin_group method instead.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="543">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="544">
          
          
          <code class="ruby">          END</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="545">
          
          
          <code class="ruby">          fail &#39;Pin not found&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="546">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="547">
          <span class="hits">25</span>
          
          <code class="ruby">        pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="548">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="1619" data-linenumber="549">
          <span class="hits">1619</span>
          
          <code class="ruby">        Origen.pin_bank.pin_groups(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="550">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="551">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="552">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :pin_group, :pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="553">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="554">
          
          
          <code class="ruby">    # Equivalent to the pin_groups method but considers power pins rather than regular pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="555">
          <span class="hits">2</span>
          
          <code class="ruby">    def power_pin_groups(id = nil, options = {}, &amp;_block)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="556">
          <span class="hits">4</span>
          
          <code class="ruby">      id, options = nil, id if id.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="557">
          <span class="hits">4</span>
          
          <code class="ruby">      if id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="558">
          
          
          <code class="ruby">        pin = Origen.pin_bank.find(id, options.merge(power_pin: true))</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="559">
          
          
          <code class="ruby">        unless pin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="560">
          
          
          <code class="ruby">          puts &lt;&lt;-END</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="561">
          
          
          <code class="ruby">You have tried to reference power_pin_group :#{id} within #{self.class} but it does not exist, this could be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="562">
          
          
          <code class="ruby">because the pin group has not been defined yet or it is an alias that is not available in the current context.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="563">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="564">
          
          
          <code class="ruby">If you meant to define the power_pin_group then use the add_power_pin_group method instead.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="565">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="566">
          
          
          <code class="ruby">          END</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="567">
          
          
          <code class="ruby">          fail &#39;Power pin group not found&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="568">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="569">
          
          
          <code class="ruby">        pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="570">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="571">
          <span class="hits">4</span>
          
          <code class="ruby">        Origen.pin_bank.power_pin_groups(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="572">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="573">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="574">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :power_pin_group, :power_pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="575">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="576">
          
          
          <code class="ruby">    # Equivalent to the pin_groups method but considers ground pins rather than regular pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="577">
          <span class="hits">2</span>
          
          <code class="ruby">    def ground_pin_groups(id = nil, options = {}, &amp;_block)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="578">
          <span class="hits">5</span>
          
          <code class="ruby">      id, options = nil, id if id.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="579">
          <span class="hits">5</span>
          
          <code class="ruby">      if id</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="580">
          <span class="hits">1</span>
          
          <code class="ruby">        pin = Origen.pin_bank.find(id, options.merge(ground_pin: true))</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="581">
          <span class="hits">1</span>
          
          <code class="ruby">        unless pin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="582">
          
          
          <code class="ruby">          puts &lt;&lt;-END</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="583">
          
          
          <code class="ruby">You have tried to reference ground_pin_group :#{id} within #{self.class} but it does not exist, this could be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="584">
          
          
          <code class="ruby">because the pin group has not been defined yet or it is an alias that is not available in the current context.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="585">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="586">
          
          
          <code class="ruby">If you meant to define the ground_pin_group then use the add_ground_pin_group method instead.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="587">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="588">
          
          
          <code class="ruby">          END</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="589">
          
          
          <code class="ruby">          fail &#39;Power pin group not found&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="590">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="591">
          <span class="hits">1</span>
          
          <code class="ruby">        pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="592">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="593">
          <span class="hits">4</span>
          
          <code class="ruby">        Origen.pin_bank.ground_pin_groups(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="594">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="595">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="596">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :ground_pin_group, :ground_pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="597">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="598">
          
          
          <code class="ruby">    # Equivalent to the pin_groups method but considers virtual pins rather than regular pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="599">
          <span class="hits">2</span>
          
          <code class="ruby">    def virtual_pin_groups(id = nil, options = {}, &amp;_block)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="600">
          <span class="hits">4</span>
          
          <code class="ruby">      id, options = nil, id if id.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="601">
          <span class="hits">4</span>
          
          <code class="ruby">      if id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="602">
          
          
          <code class="ruby">        pin = Origen.pin_bank.find(id, options.merge(virtual_pin: true))</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="603">
          
          
          <code class="ruby">        unless pin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="604">
          
          
          <code class="ruby">          puts &lt;&lt;-END</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="605">
          
          
          <code class="ruby">You have tried to reference virtual_pin_group :#{id} within #{self.class} but it does not exist, this could be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="606">
          
          
          <code class="ruby">because the pin group has not been defined yet or it is an alias that is not available in the current context.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="607">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="608">
          
          
          <code class="ruby">If you meant to define the virtual_pin_group then use the add_virtual_pin_group method instead.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="609">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="610">
          
          
          <code class="ruby">          END</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="611">
          
          
          <code class="ruby">          fail &#39;Utility pin group not found&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="612">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="613">
          
          
          <code class="ruby">        pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="614">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="615">
          <span class="hits">4</span>
          
          <code class="ruby">        Origen.pin_bank.virtual_pin_groups(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="616">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="617">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="618">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :virtual_pin_group, :virtual_pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="619">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="620">
          
          
          <code class="ruby">    # Permits access via object.pin(x), returns a hash of all pins if no id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="621">
          
          
          <code class="ruby">    # is specified.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="622">
          
          
          <code class="ruby">    # ==== Examples</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="623">
          
          
          <code class="ruby">    #   $top.pin(:done)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="624">
          
          
          <code class="ruby">    #   $soc.pin(:port_a1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="625">
          
          
          <code class="ruby">    #   pin(:fail)          # Access directly from within the module</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="626">
          <span class="hits">2</span>
          
          <code class="ruby">    def pins(id = nil, options = {}, &amp;_block)</code>
        </li>
      
        <li class="covered" data-hits="8282" data-linenumber="627">
          <span class="hits">8282</span>
          
          <code class="ruby">      id, options = nil, id if id.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="8282" data-linenumber="628">
          <span class="hits">8282</span>
          
          <code class="ruby">      if id</code>
        </li>
      
        <li class="covered" data-hits="8258" data-linenumber="629">
          <span class="hits">8258</span>
          
          <code class="ruby">        pin = Origen.pin_bank.find(id, options)</code>
        </li>
      
        <li class="covered" data-hits="8258" data-linenumber="630">
          <span class="hits">8258</span>
          
          <code class="ruby">        unless pin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="631">
          
          
          <code class="ruby">          puts &lt;&lt;-END</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="632">
          
          
          <code class="ruby">You have tried to reference pin :#{id} within #{self.class} but it does not exist, this could be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="633">
          
          
          <code class="ruby">because the pin has not been defined yet or it is an alias that is not available in the current context.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="634">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="635">
          
          
          <code class="ruby">If you meant to define the pin then use the add_pin method instead.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="636">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="637">
          
          
          <code class="ruby">          END</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="638">
          
          
          <code class="ruby">          fail &#39;Pin not found&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="639">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="8258" data-linenumber="640">
          <span class="hits">8258</span>
          
          <code class="ruby">        pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="641">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="642">
          <span class="hits">24</span>
          
          <code class="ruby">        if options[:power_pin]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="643">
          <span class="hits">2</span>
          
          <code class="ruby">          Origen.pin_bank.power_pins</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="644">
          <span class="hits">22</span>
          
          <code class="ruby">        elsif options[:ground_pin]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="645">
          <span class="hits">2</span>
          
          <code class="ruby">          Origen.pin_bank.ground_pins</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="646">
          <span class="hits">20</span>
          
          <code class="ruby">        elsif options[:virtual_pin]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="647">
          <span class="hits">2</span>
          
          <code class="ruby">          Origen.pin_bank.virtual_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="648">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="649">
          <span class="hits">18</span>
          
          <code class="ruby">          Origen.pin_bank.pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="650">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="651">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="652">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="653">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :pin, :pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="654">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="655">
          
          
          <code class="ruby">    # Equivalent to the pins method but considers power pins rather than regular pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="656">
          <span class="hits">2</span>
          
          <code class="ruby">    def power_pins(id = nil, options = {}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="657">
          <span class="hits">15</span>
          
          <code class="ruby">      id, options = nil, id if id.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="658">
          <span class="hits">15</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="659">
          
          
          <code class="ruby">        power_pin: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="660">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="661">
          <span class="hits">15</span>
          
          <code class="ruby">      pins(id, options, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="662">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="663">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="664">
          
          
          <code class="ruby">    # Equivalent to the pins method but considers ground pins rather than regular pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="665">
          <span class="hits">2</span>
          
          <code class="ruby">    def ground_pins(id = nil, options = {}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="666">
          <span class="hits">10</span>
          
          <code class="ruby">      id, options = nil, id if id.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="667">
          <span class="hits">10</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="668">
          
          
          <code class="ruby">        ground_pin: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="669">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="670">
          <span class="hits">10</span>
          
          <code class="ruby">      pins(id, options, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="671">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="672">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="673">
          
          
          <code class="ruby">    # Equivalent to the pins method but considers virtual pins rather than regular pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="674">
          <span class="hits">2</span>
          
          <code class="ruby">    def virtual_pins(id = nil, options = {}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="675">
          <span class="hits">12</span>
          
          <code class="ruby">      id, options = nil, id if id.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="676">
          <span class="hits">12</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="677">
          
          
          <code class="ruby">        virtual_pin: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="678">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="679">
          <span class="hits">12</span>
          
          <code class="ruby">      pins(id, options, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="680">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="681">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="682">
          <span class="hits">2</span>
          
          <code class="ruby">    def delete_all_pins</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="683">
          <span class="hits">1</span>
          
          <code class="ruby">      Origen.pin_bank.send :empty!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="684">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="685">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="686">
          
          
          <code class="ruby">    # Delete any pin or pin group.  If arg is a pin then delete the pin and any instances</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="687">
          
          
          <code class="ruby">    # of it in any pin groups</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="688">
          <span class="hits">2</span>
          
          <code class="ruby">    def delete_pin(id, options = {})</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="689">
          <span class="hits">5</span>
          
          <code class="ruby">      id = id.to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="690">
          
          
          <code class="ruby">      # Check if this is a Pin or a PinGroup</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="691">
          <span class="hits">5</span>
          
          <code class="ruby">      if pin_groups.key? id</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="692">
          <span class="hits">2</span>
          
          <code class="ruby">        Origen.pin_bank.delete_pingroup(Origen.pin_bank.find_pin_group(id, options))</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="693">
          <span class="hits">3</span>
          
          <code class="ruby">      elsif pins(id).class.to_s.match(/Pin/)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="694">
          <span class="hits">3</span>
          
          <code class="ruby">        Origen.pin_bank.delete_pin(Origen.pin_bank.find(id, options))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="695">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="696">
          
          
          <code class="ruby">        fail &quot;Error: the object #{id} you tried to delete is not a pin or pingroup&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="697">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="698">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="699">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="700">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="e060d3ef6e171d73c8a48e0677d3d0e9db35f0a2">
  <div class="header">
    <h3>lib/origen/pins/function_proxy.rb</h3>
    <h4><span class="green">94.12 %</span> covered</h4>
    <div>
      <b>17</b> relevant lines. 
      <span class="green"><b>16</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Pins</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    require &#39;delegate&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    require &#39;origen/pins/pin&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    # Thin wrapper around pin objects to implement a defined function.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    # The pin object stores all attributes associated with the function, this</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    # wrapper simply keeps track of what function a given pin reference refers to</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">    class FunctionProxy &lt; ::Delegator</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(id, pin)</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="11">
          <span class="hits">19</span>
          
          <code class="ruby">        @id = id</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="12">
          <span class="hits">19</span>
          
          <code class="ruby">        @pin = pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">      def __getobj__</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="16">
          <span class="hits">26</span>
          
          <code class="ruby">        @pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      # Intercept all calls to function-scoped attributes of the pin so</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      # that we can inject the function that we want the attribute value for</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">      Pin::FUNCTION_SCOPED_ATTRIBUTES.each do |attribute|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="22">
          <span class="hits">6</span>
          
          <code class="ruby">        define_method attribute do |options = {}|</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="23">
          <span class="hits">10</span>
          
          <code class="ruby">          options[:function] = @id</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="24">
          <span class="hits">10</span>
          
          <code class="ruby">          @pin.send(attribute, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      # For debug</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">      def _function</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="32">
          
          
          <code class="ruby">        @id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="223ce79f459ac8eb5f8d604b22df94cf3628167f">
  <div class="header">
    <h3>lib/origen/pins/ground_pin.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>3</b> relevant lines. 
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    class GroundPin &lt; Pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="70639eba32e561882ef3bca28a107f35827ceb8d">
  <div class="header">
    <h3>lib/origen/pins/pin.rb</h3>
    <h4><span class="yellow">84.39 %</span> covered</h4>
    <div>
      <b>474</b> relevant lines. 
      <span class="green"><b>400</b> lines covered</span> and
      <span class="red"><b>74</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    class Pin</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">      include PinCommon</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">      # Any attributes listed here will be looked up for the current function defined</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">      # by the current mode and configuration context before falling back to a default</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">      FUNCTION_SCOPED_ATTRIBUTES = [:name, :direction, :option, :group, :ip_block, :meta]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      # Any attributes listed here will be looked up for the current package context</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">      # before falling back to a default</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="12">
          <span class="hits">2</span>
          
          <code class="ruby">      PACKAGE_SCOPED_ATTRIBUTES = [:location, :dib_assignment]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      # Pin Types</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">      TYPES = [:analog, :digital]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :order</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">      # Inverts pin states for drive and compare, can be useful if a timing set change requires clocks to drive low for example when all pattern logic has been set up to drive them high.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="19">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :invert</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      # Attribute used to generate vectors where the pin state is assigned the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      # repeat_previous opcode, used by Tester#repeat_previous</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="22">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :repeat_previous</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="23">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :owner</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="24">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :size</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      # Returns a hash containing the aliases associated with the given pin</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="26">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :aliases</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">      # Returns a hash containing the functions associated with the given pin</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="28">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :functions</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">      # Internal power supply pin is connected to</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="30">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :supply</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">      # Boolean on whether pin is open drain</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="32">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :open_drain</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      # Boolean on whether pin has external pull-up</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="34">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :ext_pullup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">      # Boolean on whether pin has external pull-down</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="36">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :ext_pulldown</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      # Pin type, either :analog or :digital</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="38">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      # Pin RTL name, short term solution for products that do not get full HDL path for pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="40">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :rtl_name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      # Should be instantiated through the HasPins macros</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="43">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize(id, owner, options = {}) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="44">
          <span class="hits">4418</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">          reset:        :dont_care,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">          invert:       false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">          direction:    :io,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">          open_drain:   false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">          ext_pullup:   false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">          ext_pulldown: false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">          rtl_name:     nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="53">
          <span class="hits">4418</span>
          
          <code class="ruby">        @aliases = {}</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="54">
          <span class="hits">4418</span>
          
          <code class="ruby">        @functions = {}</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="55">
          <span class="hits">4418</span>
          
          <code class="ruby">        @direction = sanitize_direction(options[:direction])</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="56">
          <span class="hits">4418</span>
          
          <code class="ruby">        @invert = options[:invert]</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="57">
          <span class="hits">4418</span>
          
          <code class="ruby">        @reset = options[:reset]</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="58">
          <span class="hits">4418</span>
          
          <code class="ruby">        @id = id</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="59">
          <span class="hits">4418</span>
          
          <code class="ruby">        @name = options[:name]</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="60">
          <span class="hits">4418</span>
          
          <code class="ruby">        @rtl_name = options[:rtl_name]</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="61">
          <span class="hits">4418</span>
          
          <code class="ruby">        @suspend = false</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="62">
          <span class="hits">4418</span>
          
          <code class="ruby">        @order = options[:order]</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="63">
          <span class="hits">4418</span>
          
          <code class="ruby">        @supply = options[:supply]</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="64">
          <span class="hits">4418</span>
          
          <code class="ruby">        @open_drain = options[:open_drain]</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="65">
          <span class="hits">4418</span>
          
          <code class="ruby">        @ext_pullup = options[:ext_pullup]</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="66">
          <span class="hits">4418</span>
          
          <code class="ruby">        @ext_pulldown = options[:ext_pulldown]</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="67">
          <span class="hits">4418</span>
          
          <code class="ruby">        @type = options[:type]</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="68">
          <span class="hits">4418</span>
          
          <code class="ruby">        @dib_assignment = [] # Array to handle multi-site testing</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="69">
          <span class="hits">4418</span>
          
          <code class="ruby">        @size = 1</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="70">
          <span class="hits">4418</span>
          
          <code class="ruby">        @value = 0</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="71">
          <span class="hits">4418</span>
          
          <code class="ruby">        @clock = nil</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="72">
          <span class="hits">4418</span>
          
          <code class="ruby">        on_init(owner, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">        # Assign the initial state from the method so that any inversion is picked up...</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="74">
          <span class="hits">4418</span>
          
          <code class="ruby">        send(@reset)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">      # Causes the pin to continuously drive 1 for 2 seconds and then drive 0 for 2 seconds.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">      # This is not an API that is intended to be used within a pattern. Rather it is a debug aid when</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">      # setting up something like a bench test environment that uses Origen Link. For example you would</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">      # call this method on a pin from a console session, then confirm with a multimeter that the pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">      # is toggling on the relevant hardware.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">      # Call Pin#goodbye to stop it.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">      # @example Call from an origen console like this</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">      #   dut.pin(:tdi).hello</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="89">
          <span class="hits">2</span>
          
          <code class="ruby">      def hello</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="90">
          
          
          <code class="ruby">        drive_hi</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="91">
          
          
          <code class="ruby">        @@hello_pins ||= []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="92">
          
          
          <code class="ruby">        @@hello_pins &lt;&lt; self unless @@hello_pins.include?(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">        @@hello_loop ||= Thread.new do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="94">
          
          
          <code class="ruby">          loop do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="95">
          
          
          <code class="ruby">            @@hello_pins.each(&amp;:toggle)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="96">
          
          
          <code class="ruby">            if $tester</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">              # Add a dummy timeset if one is not set yet, doesn&#39;t really matter what it is in this case</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">              # and better not to force the user to setup a debug workaround due to running outside of a pattern</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="99">
          
          
          <code class="ruby">              $tester.set_timeset(&#39;hello_world&#39;, 40) unless $tester.timeset</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="100">
          
          
          <code class="ruby">              $tester.cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="102">
          
          
          <code class="ruby">            sleep 2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="104">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="105">
          
          
          <code class="ruby">        puts &quot;Pin #{name} is toggling with a period of 2 seconds&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">      # See Pin#hello</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="109">
          <span class="hits">2</span>
          
          <code class="ruby">      def goodbye</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="110">
          
          
          <code class="ruby">        @@hello_pins.delete(self)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="111">
          
          
          <code class="ruby">        puts &quot;Pin #{name} has stopped toggling&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">      # When sorting pins do it by ID</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="115">
          <span class="hits">2</span>
          
          <code class="ruby">      def &lt;=&gt;(other_pin)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="116">
          <span class="hits">3</span>
          
          <code class="ruby">        @id &lt;=&gt; other_pin.id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="119">
          <span class="hits">2</span>
          
          <code class="ruby">      def name=(val)</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="120">
          <span class="hits">34</span>
          
          <code class="ruby">        @name = val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="123">
          <span class="hits">2</span>
          
          <code class="ruby">      def functions=(val)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="124">
          
          
          <code class="ruby">        if val.is_a? Hash</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="125">
          
          
          <code class="ruby">          val.each do |name, _whatever|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="126">
          
          
          <code class="ruby">            add_function name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="129">
          
          
          <code class="ruby">          fail &quot;Attempt to set the functions hash on pin #{@name}.  Argument must be a Hash.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">      # This generates getter methods that will lookup the given attribute within the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby">      # scope of the current package and falling back to a default if defined</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="135">
          <span class="hits">2</span>
          
          <code class="ruby">      PACKAGE_SCOPED_ATTRIBUTES.each do |attribute|</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="136">
          <span class="hits">4</span>
          
          <code class="ruby">        define_method attribute do |options = {}|</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="137">
          <span class="hits">12</span>
          
          <code class="ruby">          default = instance_variable_get(&quot;@#{attribute}&quot;)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="138">
          <span class="hits">12</span>
          
          <code class="ruby">          package_id = options[:package] || current_package_id</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="139">
          <span class="hits">12</span>
          
          <code class="ruby">          package_id = package_id.to_sym if package_id</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="140">
          <span class="hits">12</span>
          
          <code class="ruby">          if packages[package_id]</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="141">
          <span class="hits">12</span>
          
          <code class="ruby">            packages[package_id][attribute] || default</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">          elsif packages[:all]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="143">
          
          
          <code class="ruby">            packages[:all][attribute] || default</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="145">
          
          
          <code class="ruby">            default</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby">      # This generates getter methods that will lookup the given attribute within the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">      # scope of the function enabled by the current mode and configuration attributes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">      # and falling back to a default if defined</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="153">
          <span class="hits">2</span>
          
          <code class="ruby">      FUNCTION_SCOPED_ATTRIBUTES.each do |attribute|</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="154">
          <span class="hits">12</span>
          
          <code class="ruby">        define_method attribute do |options = {}|</code>
        </li>
      
        <li class="covered" data-hits="1149" data-linenumber="155">
          <span class="hits">1149</span>
          
          <code class="ruby">          default = instance_variable_get(&quot;@#{attribute}&quot;)</code>
        </li>
      
        <li class="covered" data-hits="1149" data-linenumber="156">
          <span class="hits">1149</span>
          
          <code class="ruby">          if options[:function]</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="157">
          <span class="hits">10</span>
          
          <code class="ruby">            v = functions[:ids][options[:function]][attribute]</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="158">
          <span class="hits">10</span>
          
          <code class="ruby">            return v if v</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">            # else fall back to context-based lookup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="1139" data-linenumber="161">
          <span class="hits">1139</span>
          
          <code class="ruby">          mode_id = options[:mode] || current_mode_id</code>
        </li>
      
        <li class="covered" data-hits="1139" data-linenumber="162">
          <span class="hits">1139</span>
          
          <code class="ruby">          mode_id = mode_id.to_sym if mode_id</code>
        </li>
      
        <li class="covered" data-hits="1139" data-linenumber="163">
          <span class="hits">1139</span>
          
          <code class="ruby">          mode = functions[mode_id] || functions[:all]</code>
        </li>
      
        <li class="covered" data-hits="1139" data-linenumber="164">
          <span class="hits">1139</span>
          
          <code class="ruby">          if mode</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="165">
          <span class="hits">35</span>
          
          <code class="ruby">            config_id = options[:configuration] || options[:config] || current_configuration</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="166">
          <span class="hits">35</span>
          
          <code class="ruby">            config_id = config_id.to_sym if config_id</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="167">
          <span class="hits">35</span>
          
          <code class="ruby">            configuration = mode[config_id] || mode[:all]</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="168">
          <span class="hits">35</span>
          
          <code class="ruby">            if configuration</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="169">
          <span class="hits">33</span>
          
          <code class="ruby">              configuration[attribute] || default</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="171">
          <span class="hits">2</span>
          
          <code class="ruby">              default</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="1104" data-linenumber="174">
          <span class="hits">1104</span>
          
          <code class="ruby">            default</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="179">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :function_scoped_name, :name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby">      # Returns the name of the pin, if a name has been specifically assigned by the application</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">      # (via name=) then this will be returned, otherwise the name of the current function if present</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">      # will be returned, and then as a last resort the ID of the pin</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="184">
          <span class="hits">2</span>
          
          <code class="ruby">      def name(options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">        # Return a specifically assigned name in preference to a function name</code>
        </li>
      
        <li class="covered" data-hits="5726" data-linenumber="186">
          <span class="hits">5726</span>
          
          <code class="ruby">        (options.empty? ? @name : nil) || function_scoped_name(options) || @id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">      # Returns the value held by the pin as a string formatted to the current tester&#39;s pattern syntax</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="192">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby">      #   pin.drive_hi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby">      #   pin.to_vector   # =&gt; &quot;1&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">      #   pin.expect_lo</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby">      #   pin.to_vector   # =&gt; &quot;L&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="197">
          <span class="hits">2</span>
          
          <code class="ruby">      def to_vector</code>
        </li>
      
        <li class="covered" data-hits="10855" data-linenumber="198">
          <span class="hits">10855</span>
          
          <code class="ruby">        @vector_formatted_value ||= Origen.tester.format_pin_state(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="202">
          <span class="hits">2</span>
          
          <code class="ruby">      def invalidate_vector_cache</code>
        </li>
      
        <li class="covered" data-hits="10343" data-linenumber="203">
          <span class="hits">10343</span>
          
          <code class="ruby">        @vector_formatted_value = nil</code>
        </li>
      
        <li class="covered" data-hits="14726" data-linenumber="204">
          <span class="hits">14726</span>
          
          <code class="ruby">        groups.each { |_name, group| group.invalidate_vector_cache }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="206">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby">      # Set the pin value and state from a string formatted to the current tester&#39;s pattern syntax,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="208">
          
          
          <code class="ruby">      # this is the opposite of the to_vector method</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">      #   pin.vector_formatted_value = &quot;L&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby">      #   pin.driving?                      # =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby">      #   pin.value                         # =&gt; 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="215">
          
          
          <code class="ruby">      #   pin.vector_formatted_value = &quot;1&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="216">
          
          
          <code class="ruby">      #   pin.driving?                      # =&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">      #   pin.value                         # =&gt; 1</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="218">
          <span class="hits">2</span>
          
          <code class="ruby">      def vector_formatted_value=(val)</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="219">
          <span class="hits">26</span>
          
          <code class="ruby">        unless @vector_formatted_value == val</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="220">
          <span class="hits">22</span>
          
          <code class="ruby">          Origen.tester.update_pin_from_formatted_state(self, val)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="221">
          <span class="hits">22</span>
          
          <code class="ruby">          @vector_formatted_value = val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="225">
          <span class="hits">2</span>
          
          <code class="ruby">      def inspect</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="226">
          
          
          <code class="ruby">        &quot;&lt;#{self.class}:#{object_id}&gt;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="229">
          <span class="hits">2</span>
          
          <code class="ruby">      def describe(options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="230">
          <span class="hits">1</span>
          
          <code class="ruby">        desc = [&#39;********************&#39;]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="231">
          <span class="hits">1</span>
          
          <code class="ruby">        desc &lt;&lt; &quot;Pin id: #{id}&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="232">
          <span class="hits">1</span>
          
          <code class="ruby">        func_aliases = []</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="233">
          <span class="hits">1</span>
          
          <code class="ruby">        unless functions.empty?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="234">
          <span class="hits">1</span>
          
          <code class="ruby">          desc &lt;&lt; &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="235">
          <span class="hits">1</span>
          
          <code class="ruby">          desc &lt;&lt; &#39;Functions&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="236">
          <span class="hits">1</span>
          
          <code class="ruby">          desc &lt;&lt; &#39;---------&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="237">
          <span class="hits">1</span>
          
          <code class="ruby">          functions.each do |mode, configurations|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="238">
          <span class="hits">3</span>
          
          <code class="ruby">            unless mode == :ids</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="239">
          <span class="hits">2</span>
          
          <code class="ruby">              configurations.each do |configuration, attrs|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="240">
          <span class="hits">2</span>
          
          <code class="ruby">                a = &quot;:#{attrs[:name]}&quot;.ljust(30)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="241">
          <span class="hits">2</span>
          
          <code class="ruby">                func_aliases &lt;&lt; attrs[:name]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="242">
          <span class="hits">2</span>
          
          <code class="ruby">                unless mode == :all</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="243">
          <span class="hits">4</span>
          
          <code class="ruby">                  a += &quot;:modes =&gt; [#{[mode].flatten.map { |id| &#39;:&#39; + id.to_s }.join(&#39;, &#39;)}]&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="244">
          <span class="hits">2</span>
          
          <code class="ruby">                  prev = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="246">
          <span class="hits">2</span>
          
          <code class="ruby">                unless configuration == :all</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="247">
          
          
          <code class="ruby">                  a += &#39; ; &#39; if prev</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="248">
          
          
          <code class="ruby">                  a += &quot;:configurations =&gt; [#{[configuration].flatten.map { |id| &#39;:&#39; + id.to_s }.join(&#39;, &#39;)}]&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="250">
          <span class="hits">2</span>
          
          <code class="ruby">                desc &lt;&lt; a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="251">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="254">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="255">
          <span class="hits">1</span>
          
          <code class="ruby">        unless aliases.empty?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="256">
          <span class="hits">1</span>
          
          <code class="ruby">          desc &lt;&lt; &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="257">
          <span class="hits">1</span>
          
          <code class="ruby">          desc &lt;&lt; &#39;Aliases&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="258">
          <span class="hits">1</span>
          
          <code class="ruby">          desc &lt;&lt; &#39;-------&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="259">
          <span class="hits">1</span>
          
          <code class="ruby">          aliases.each do |name, context|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="260">
          <span class="hits">3</span>
          
          <code class="ruby">            unless func_aliases.include?(name)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="261">
          <span class="hits">1</span>
          
          <code class="ruby">              a = &quot;:#{name}&quot;.ljust(30)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="262">
          <span class="hits">1</span>
          
          <code class="ruby">              unless context[:packages].empty? || context[:packages] == [:all]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="263">
          
          
          <code class="ruby">                a += &quot;:packages =&gt; [#{context[:packages].map { |id| &#39;:&#39; + id.to_s }.join(&#39;, &#39;)}]&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="264">
          
          
          <code class="ruby">                prev = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="266">
          <span class="hits">1</span>
          
          <code class="ruby">              unless context[:modes].empty? || context[:modes] == [:all]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="267">
          
          
          <code class="ruby">                a += &#39; ; &#39; if prev</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="268">
          
          
          <code class="ruby">                a += &quot;:modes =&gt; [#{context[:modes].map { |id| &#39;:&#39; + id.to_s }.join(&#39;, &#39;)}]&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="269">
          
          
          <code class="ruby">                prev = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="270">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="271">
          <span class="hits">1</span>
          
          <code class="ruby">              unless context[:configurations].empty? || context[:configurations] == [:all]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="272">
          
          
          <code class="ruby">                a += &#39; ; &#39; if prev</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="273">
          
          
          <code class="ruby">                a += &quot;:configurations =&gt; [#{context[:configurations].map { |id| &#39;:&#39; + id.to_s }.join(&#39;, &#39;)}]&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="274">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="275">
          <span class="hits">1</span>
          
          <code class="ruby">              desc &lt;&lt; a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="276">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="279">
          <span class="hits">1</span>
          
          <code class="ruby">        unless Origen.top_level.modes.empty?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="280">
          <span class="hits">1</span>
          
          <code class="ruby">          desc &lt;&lt; &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="281">
          <span class="hits">1</span>
          
          <code class="ruby">          desc &lt;&lt; &#39;Modes&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="282">
          <span class="hits">1</span>
          
          <code class="ruby">          desc &lt;&lt; &#39;-------&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="283">
          <span class="hits">1</span>
          
          <code class="ruby">          Origen.top_level.modes.each do |name|</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="284">
          <span class="hits">4</span>
          
          <code class="ruby">            unless option(mode: name).nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="285">
          
          
          <code class="ruby">              a = &quot;:#{name}&quot;.ljust(30) + &quot;:mode =&gt; #{option(mode: name)}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="286">
          
          
          <code class="ruby">              desc &lt;&lt; a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="287">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="289">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="290">
          <span class="hits">1</span>
          
          <code class="ruby">        unless groups.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="291">
          
          
          <code class="ruby">          desc &lt;&lt; &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="292">
          
          
          <code class="ruby">          desc &lt;&lt; &#39;Groups&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="293">
          
          
          <code class="ruby">          desc &lt;&lt; &#39;------&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="294">
          
          
          <code class="ruby">          desc &lt;&lt; groups.map { |name, _group| &#39;:&#39; + name.to_s }.join(&#39;, &#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="295">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="296">
          <span class="hits">1</span>
          
          <code class="ruby">        desc &lt;&lt; &#39;********************&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="297">
          <span class="hits">1</span>
          
          <code class="ruby">        if options[:return]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="298">
          <span class="hits">1</span>
          
          <code class="ruby">          desc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="300">
          
          
          <code class="ruby">          puts desc.join(&quot;\n&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="301">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="303">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby">      # Returns a hash containing the pin groups that the given pin is a member of</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="305">
          <span class="hits">2</span>
          
          <code class="ruby">      def groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="306">
          
          
          <code class="ruby">        # Origen.pin_bank.all_pin_groups.select do |name, group|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby">        @groups ||= Origen.pin_bank.pin_groups.select do |_name, group|</code>
        </li>
      
        <li class="covered" data-hits="4866" data-linenumber="308">
          <span class="hits">4866</span>
          
          <code class="ruby">          group.include?(self)</code>
        </li>
      
        <li class="covered" data-hits="20563" data-linenumber="309">
          <span class="hits">20563</span>
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="311">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :pin_groups, :groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="313">
          <span class="hits">2</span>
          
          <code class="ruby">      def invalidate_group_cache</code>
        </li>
      
        <li class="covered" data-hits="5756" data-linenumber="314">
          <span class="hits">5756</span>
          
          <code class="ruby">        @groups = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="315">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="316">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="317">
          
          
          <code class="ruby">      # Add a location identifier to the pin, this is a free format field which can be a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="318">
          
          
          <code class="ruby">      # pin number or BGA co-ordinate for example.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="320">
          
          
          <code class="ruby">      # @example Adding a location by package</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="321">
          
          
          <code class="ruby">      #   $dut.pin(:pin3).add_location &quot;B3&quot;, :package =&gt; :p1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="322">
          
          
          <code class="ruby">      #   $dut.pin(:pin3).add_location &quot;B2&quot;, :package =&gt; :p2</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="323">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_location(str, options = {})</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="324">
          <span class="hits">8</span>
          
          <code class="ruby">        packages = resolve_packages(options)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="325">
          <span class="hits">8</span>
          
          <code class="ruby">        if packages.empty?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="326">
          <span class="hits">1</span>
          
          <code class="ruby">          @location = str</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="327">
          <span class="hits">1</span>
          
          <code class="ruby">          add_alias str.to_s.symbolize, package: :all, mode: :all, configuration: :all</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="328">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="329">
          <span class="hits">7</span>
          
          <code class="ruby">          packages.each do |package_id|</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="330">
          <span class="hits">7</span>
          
          <code class="ruby">            package_id = package_id.respond_to?(:id) ? package_id.id : package_id</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="331">
          <span class="hits">7</span>
          
          <code class="ruby">            self.packages[package_id] ||= {}</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="332">
          <span class="hits">7</span>
          
          <code class="ruby">            self.packages[package_id][:location] = str</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="333">
          <span class="hits">7</span>
          
          <code class="ruby">            add_alias str.to_s.symbolize, package: package_id, mode: :all, configuration: :all</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="335">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="336">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="337">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :add_locn, :add_location</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="338">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="339">
          
          
          <code class="ruby">      # Add a Device Interface Board (e.g. probecard at wafer probe or loadboard at final package test)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="340">
          
          
          <code class="ruby">      # assignment to the pin.  Some refer to this as a channel but API name is meant to be generic.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="341">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_dib_assignment(str, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="342">
          
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="343">
          
          
          <code class="ruby">          site: 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="344">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="345">
          
          
          <code class="ruby">        packages = resolve_packages(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="346">
          
          
          <code class="ruby">        if packages.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="347">
          
          
          <code class="ruby">          @dib_assignment[options[:site]] = str</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="348">
          
          
          <code class="ruby">          add_alias str.to_s.symbolize, package: :all, mode: :all, configuration: :all</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="349">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="350">
          
          
          <code class="ruby">          packages.each do |package_id|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="351">
          
          
          <code class="ruby">            package_id = package_id.respond_to?(:id) ? package_id.id : package_id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="352">
          
          
          <code class="ruby">            self.packages[package_id] ||= {}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="353">
          
          
          <code class="ruby">            self.packages[package_id][:dib_assignment] ||= []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="354">
          
          
          <code class="ruby">            self.packages[package_id][:dib_assignment][options[:site]] = str</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="355">
          
          
          <code class="ruby">            add_alias str.to_s.symbolize, package: package_id, mode: :all, configuration: :all</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="356">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="357">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="358">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="359">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :add_dib_info, :add_dib_assignment</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="360">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :add_channel, :add_dib_assignment</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="361">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="362">
          
          
          <code class="ruby">      # Returns the number of test sites enabled for the pin</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="363">
          <span class="hits">2</span>
          
          <code class="ruby">      def sites</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="364">
          <span class="hits">1</span>
          
          <code class="ruby">        dib_assignment.size</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="365">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="366">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="367">
          <span class="hits">2</span>
          
          <code class="ruby">      def sanitize_direction(val)</code>
        </li>
      
        <li class="covered" data-hits="4454" data-linenumber="368">
          <span class="hits">4454</span>
          
          <code class="ruby">        if val</code>
        </li>
      
        <li class="covered" data-hits="4454" data-linenumber="369">
          <span class="hits">4454</span>
          
          <code class="ruby">          val = val.to_s.downcase.gsub(/\//, &#39;&#39;)</code>
        </li>
      
        <li class="covered" data-hits="4454" data-linenumber="370">
          <span class="hits">4454</span>
          
          <code class="ruby">          if val =~ /i.*o/</code>
        </li>
      
        <li class="covered" data-hits="4419" data-linenumber="371">
          <span class="hits">4419</span>
          
          <code class="ruby">            :io</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="372">
          <span class="hits">35</span>
          
          <code class="ruby">          elsif val =~ /^i/</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="373">
          <span class="hits">25</span>
          
          <code class="ruby">            :input</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="374">
          <span class="hits">10</span>
          
          <code class="ruby">          elsif val =~ /^o/</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="375">
          <span class="hits">10</span>
          
          <code class="ruby">            :output</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="376">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="377">
          
          
          <code class="ruby">            fail &quot;Unknown pin direction: #{val}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="378">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="380">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="381">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="382">
          
          
          <code class="ruby">      # Sets the default direction of the pin, :input, :output or :io (default). If a function specific</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="383">
          
          
          <code class="ruby">      # direction has been specified that will override this value.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="384">
          <span class="hits">2</span>
          
          <code class="ruby">      def direction=(val)</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="385">
          <span class="hits">21</span>
          
          <code class="ruby">        @direction = sanitize_direction(val)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="386">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="387">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="388">
          
          
          <code class="ruby">      # Add a function to the pin.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="389">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="390">
          
          
          <code class="ruby">      # @example Adding a mode-specific function</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="391">
          
          
          <code class="ruby">      #   pin.add_function :tdi, :direction =&gt; :input</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="392">
          
          
          <code class="ruby">      #   pin.add_function :nvm_fail, :mode =&gt; :nvmbist, :direction =&gt; :output</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="393">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_function(id, options = {})</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="394">
          <span class="hits">19</span>
          
          <code class="ruby">        id = id.to_sym</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="395">
          <span class="hits">19</span>
          
          <code class="ruby">        add_function_attributes(options.merge(name: id, id: id.to_sym))</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="396">
          <span class="hits">19</span>
          
          <code class="ruby">        f = FunctionProxy.new(id, self)</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="397">
          <span class="hits">19</span>
          
          <code class="ruby">        add_alias id, packages: :all, obj: f</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="398">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="399">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="400">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_function_attributes(options = {})</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="401">
          <span class="hits">22</span>
          
          <code class="ruby">        id = options.delete(:id)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="402">
          <span class="hits">22</span>
          
          <code class="ruby">        modes = resolve_modes(options)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="403">
          <span class="hits">22</span>
          
          <code class="ruby">        configurations = resolve_configurations(options)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="404">
          <span class="hits">22</span>
          
          <code class="ruby">        options[:direction] = sanitize_direction(options[:direction]) if options[:direction]</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="405">
          <span class="hits">22</span>
          
          <code class="ruby">        if modes.empty?</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="406">
          <span class="hits">8</span>
          
          <code class="ruby">          modes = [:all]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="407">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="408">
          <span class="hits">22</span>
          
          <code class="ruby">        if configurations.empty?</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="409">
          <span class="hits">17</span>
          
          <code class="ruby">          configurations = [:all]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="410">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="411">
          
          
          <code class="ruby">        # Supports newer attribute lookup by function ID</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="412">
          <span class="hits">22</span>
          
          <code class="ruby">        if id</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="413">
          <span class="hits">19</span>
          
          <code class="ruby">          functions[:ids] ||= {}</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="414">
          <span class="hits">19</span>
          
          <code class="ruby">          if functions[:ids][id]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="415">
          
          
          <code class="ruby">            functions[:ids][id] = functions[:ids][id].merge!(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="416">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="417">
          <span class="hits">19</span>
          
          <code class="ruby">            functions[:ids][id] = options.dup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="418">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="419">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="420">
          
          
          <code class="ruby">        # Supports older attribute lookup by mode context</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="421">
          <span class="hits">22</span>
          
          <code class="ruby">        modes.each do |mode|</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="422">
          <span class="hits">22</span>
          
          <code class="ruby">          configurations.each do |configuration|</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="423">
          <span class="hits">22</span>
          
          <code class="ruby">            functions[mode.to_sym] ||= {}</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="424">
          <span class="hits">22</span>
          
          <code class="ruby">            if functions[mode.to_sym][configuration.to_sym]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="425">
          <span class="hits">2</span>
          
          <code class="ruby">              functions[mode.to_sym][configuration.to_sym] = functions[mode.to_sym][configuration.to_sym].merge!(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="426">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="427">
          <span class="hits">20</span>
          
          <code class="ruby">              functions[mode.to_sym][configuration.to_sym] = options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="428">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="429">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="430">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="431">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="432">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="433">
          
          
          <code class="ruby">      # Add an alias to the given pin.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="434">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="435">
          
          
          <code class="ruby">      # If the options contain a package, mode or configuration reference then the alias</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="436">
          
          
          <code class="ruby">      # will only work under that context.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="437">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_alias(id, options = {})</code>
        </li>
      
        <li class="covered" data-hits="1066" data-linenumber="438">
          <span class="hits">1066</span>
          
          <code class="ruby">        obj = options.delete(:obj) || self</code>
        </li>
      
        <li class="covered" data-hits="1066" data-linenumber="439">
          <span class="hits">1066</span>
          
          <code class="ruby">        if aliases[id]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="440">
          <span class="hits">1</span>
          
          <code class="ruby">          aliases[id][:packages] += resolve_packages(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="441">
          <span class="hits">1</span>
          
          <code class="ruby">          aliases[id][:modes] += resolve_modes(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="442">
          <span class="hits">1</span>
          
          <code class="ruby">          aliases[id][:configurations] += resolve_configurations(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="443">
          <span class="hits">1</span>
          
          <code class="ruby">          aliases[id][:packages].uniq!</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="444">
          <span class="hits">1</span>
          
          <code class="ruby">          aliases[id][:modes].uniq!</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="445">
          <span class="hits">1</span>
          
          <code class="ruby">          aliases[id][:configurations].uniq!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="446">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="1065" data-linenumber="447">
          <span class="hits">1065</span>
          
          <code class="ruby">          aliases[id] = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="448">
          
          
          <code class="ruby">            packages:       resolve_packages(options),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="449">
          
          
          <code class="ruby">            modes:          resolve_modes(options),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="450">
          
          
          <code class="ruby">            configurations: resolve_configurations(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="451">
          
          
          <code class="ruby">          }</code>
        </li>
      
        <li class="covered" data-hits="1065" data-linenumber="452">
          <span class="hits">1065</span>
          
          <code class="ruby">          Origen.pin_bank.register_alias(id, obj, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="453">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="454">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="455">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="456">
          
          
          <code class="ruby">      # Returns true if the pin has the given alias within the given or current context</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="457">
          <span class="hits">2</span>
          
          <code class="ruby">      def has_alias?(id, options = {})</code>
        </li>
      
        <li class="covered" data-hits="100" data-linenumber="458">
          <span class="hits">100</span>
          
          <code class="ruby">        if aliases[id]</code>
        </li>
      
        <li class="covered" data-hits="100" data-linenumber="459">
          <span class="hits">100</span>
          
          <code class="ruby">          if options[:ignore_context]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="460">
          
          
          <code class="ruby">            true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="461">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="100" data-linenumber="462">
          <span class="hits">100</span>
          
          <code class="ruby">            packages = resolve_packages(options)</code>
        </li>
      
        <li class="covered" data-hits="100" data-linenumber="463">
          <span class="hits">100</span>
          
          <code class="ruby">            modes = resolve_modes(options)</code>
        </li>
      
        <li class="covered" data-hits="100" data-linenumber="464">
          <span class="hits">100</span>
          
          <code class="ruby">            configurations = resolve_configurations(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="465">
          
          
          <code class="ruby">            begin</code>
        </li>
      
        <li class="covered" data-hits="100" data-linenumber="466">
          <span class="hits">100</span>
          
          <code class="ruby">              aliases[id][:packages].include?(:all) || aliases[id][:packages].empty? ||</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="467">
          <span class="hits">20</span>
          
          <code class="ruby">                packages.any? { |package| aliases[id][:packages].include?(package) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="468">
          
          
          <code class="ruby">            end &amp;&amp; begin</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="469">
          <span class="hits">86</span>
          
          <code class="ruby">              aliases[id][:modes].include?(:all) || aliases[id][:modes].empty? ||</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="470">
          <span class="hits">5</span>
          
          <code class="ruby">                modes.any? { |mode| aliases[id][:modes].include?(mode) }</code>
        </li>
      
        <li class="covered" data-hits="100" data-linenumber="471">
          <span class="hits">100</span>
          
          <code class="ruby">            end &amp;&amp; begin</code>
        </li>
      
        <li class="covered" data-hits="81" data-linenumber="472">
          <span class="hits">81</span>
          
          <code class="ruby">              aliases[id][:configurations].include?(:all) || aliases[id][:configurations].empty? ||</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="473">
          
          
          <code class="ruby">                configurations.any? { |config| aliases[id][:configurations].include?(config) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="474">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="475">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="476">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="477">
          
          
          <code class="ruby">          false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="478">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="479">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="480">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="481">
          
          
          <code class="ruby">      # Returns true if the pin is an alias of the given pin name</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="482">
          <span class="hits">2</span>
          
          <code class="ruby">      def is_alias_of?(name)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="483">
          <span class="hits">9</span>
          
          <code class="ruby">        if Origen.pin_bank.find(name)</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="484">
          <span class="hits">7</span>
          
          <code class="ruby">          Origen.pin_bank.find(name).id == Origen.pin_bank.find(self).id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="485">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="486">
          <span class="hits">2</span>
          
          <code class="ruby">          false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="487">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="488">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="489">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="490">
          
          
          <code class="ruby">      # Returns true if the pin belongs to a pin group.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="491">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="492">
          
          
          <code class="ruby">      #   add_pins :jtag, size: 6</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="493">
          
          
          <code class="ruby">      #   add_pin  :done</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="494">
          
          
          <code class="ruby">      #   add_pin_alias :fail, :jtag, pin: 4</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="495">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="496">
          
          
          <code class="ruby">      #   pin(:done).belongs_to_a_pin_group?  # =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="497">
          
          
          <code class="ruby">      #   pin(:fail).belongs_to_a_pin_group?  # =&gt; true</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="498">
          <span class="hits">2</span>
          
          <code class="ruby">      def belongs_to_a_pin_group?</code>
        </li>
      
        <li class="covered" data-hits="8268" data-linenumber="499">
          <span class="hits">8268</span>
          
          <code class="ruby">        !groups.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="500">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="501">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="502">
          <span class="hits">2</span>
          
          <code class="ruby">      def value</code>
        </li>
      
        <li class="covered" data-hits="2607" data-linenumber="503">
          <span class="hits">2607</span>
          
          <code class="ruby">        @value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="504">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="505">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :data, :value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="506">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="507">
          <span class="hits">2</span>
          
          <code class="ruby">      def suspend</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="508">
          <span class="hits">3</span>
          
          <code class="ruby">        invalidate_vector_cache</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="509">
          <span class="hits">3</span>
          
          <code class="ruby">        @suspend = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="510">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="511">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="512">
          <span class="hits">2</span>
          
          <code class="ruby">      def suspended?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="513">
          
          
          <code class="ruby">        @suspend</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="514">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="515">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="516">
          
          
          <code class="ruby">      # Will resume compares on this pin</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="517">
          <span class="hits">2</span>
          
          <code class="ruby">      def resume</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="518">
          <span class="hits">3</span>
          
          <code class="ruby">        invalidate_vector_cache</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="519">
          <span class="hits">3</span>
          
          <code class="ruby">        @suspend = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="520">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="521">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="522">
          <span class="hits">2</span>
          
          <code class="ruby">      def repeat_previous=(bool)</code>
        </li>
      
        <li class="covered" data-hits="116" data-linenumber="523">
          <span class="hits">116</span>
          
          <code class="ruby">        invalidate_vector_cache</code>
        </li>
      
        <li class="covered" data-hits="116" data-linenumber="524">
          <span class="hits">116</span>
          
          <code class="ruby">        @repeat_previous = bool</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="525">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="526">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="527">
          <span class="hits">2</span>
          
          <code class="ruby">      def repeat_previous?</code>
        </li>
      
        <li class="covered" data-hits="2408" data-linenumber="528">
          <span class="hits">2408</span>
          
          <code class="ruby">        @repeat_previous</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="529">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="530">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="531">
          <span class="hits">2</span>
          
          <code class="ruby">      def set_state(state)</code>
        </li>
      
        <li class="covered" data-hits="5485" data-linenumber="532">
          <span class="hits">5485</span>
          
          <code class="ruby">        invalidate_vector_cache</code>
        </li>
      
        <li class="covered" data-hits="5485" data-linenumber="533">
          <span class="hits">5485</span>
          
          <code class="ruby">        @repeat_previous = false</code>
        </li>
      
        <li class="covered" data-hits="5485" data-linenumber="534">
          <span class="hits">5485</span>
          
          <code class="ruby">        @state = state</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="535">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="536">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="537">
          <span class="hits">2</span>
          
          <code class="ruby">      def set_value(val)</code>
        </li>
      
        <li class="covered" data-hits="4720" data-linenumber="538">
          <span class="hits">4720</span>
          
          <code class="ruby">        invalidate_vector_cache</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="539">
          
          
          <code class="ruby">        # If val is a data bit extract the value of it</code>
        </li>
      
        <li class="covered" data-hits="4720" data-linenumber="540">
          <span class="hits">4720</span>
          
          <code class="ruby">        val = val.respond_to?(:data) ? val.data : val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="541">
          
          
          <code class="ruby">        # Assume driving/asserting a nil value means 0</code>
        </li>
      
        <li class="covered" data-hits="4720" data-linenumber="542">
          <span class="hits">4720</span>
          
          <code class="ruby">        val = 0 unless val</code>
        </li>
      
        <li class="covered" data-hits="4720" data-linenumber="543">
          <span class="hits">4720</span>
          
          <code class="ruby">        if val &gt; 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="544">
          
          
          <code class="ruby">          fail &quot;Attempt to set a value of #{val} on pin #{name}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="545">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="4720" data-linenumber="546">
          <span class="hits">4720</span>
          
          <code class="ruby">        @repeat_previous = false</code>
        </li>
      
        <li class="covered" data-hits="4720" data-linenumber="547">
          <span class="hits">4720</span>
          
          <code class="ruby">        if inverted?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="548">
          
          
          <code class="ruby">          @value = val == 0 ? 1 : 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="549">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="4720" data-linenumber="550">
          <span class="hits">4720</span>
          
          <code class="ruby">          @value = val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="551">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="552">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="553">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :data=, :set_value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="554">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="555">
          <span class="hits">2</span>
          
          <code class="ruby">      def cycle # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="556">
          <span class="hits">39</span>
          
          <code class="ruby">        Origen.tester.cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="557">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="558">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="559">
          <span class="hits">2</span>
          
          <code class="ruby">      def state</code>
        </li>
      
        <li class="covered" data-hits="5704" data-linenumber="560">
          <span class="hits">5704</span>
          
          <code class="ruby">        @state</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="561">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="562">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="563">
          <span class="hits">2</span>
          
          <code class="ruby">      def state=(value)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="564">
          <span class="hits">2</span>
          
          <code class="ruby">        invalidate_vector_cache</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="565">
          <span class="hits">2</span>
          
          <code class="ruby">        @state = value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="566">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="567">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="568">
          
          
          <code class="ruby">      # Set the pin to drive a 1 on future cycles</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="569">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_hi</code>
        </li>
      
        <li class="covered" data-hits="630" data-linenumber="570">
          <span class="hits">630</span>
          
          <code class="ruby">        set_state(:drive)</code>
        </li>
      
        <li class="covered" data-hits="630" data-linenumber="571">
          <span class="hits">630</span>
          
          <code class="ruby">        set_value(1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="572">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="573">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="574">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_hi!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="575">
          
          
          <code class="ruby">        drive_hi</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="576">
          
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="577">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="578">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="579">
          
          
          <code class="ruby">      # Set the pin to drive a high voltage on future cycles (if the tester supports it).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="580">
          
          
          <code class="ruby">      # For example on a J750 high-voltage channel the pin state would be set to &quot;2&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="581">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_very_hi</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="582">
          <span class="hits">25</span>
          
          <code class="ruby">        set_state(:drive_very_hi)</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="583">
          <span class="hits">25</span>
          
          <code class="ruby">        set_value(1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="584">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="585">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="586">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_very_hi!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="587">
          
          
          <code class="ruby">        drive_very_hi</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="588">
          
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="589">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="590">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="591">
          
          
          <code class="ruby">      # Set the pin to drive a 0 on future cycles</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="592">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_lo</code>
        </li>
      
        <li class="covered" data-hits="2669" data-linenumber="593">
          <span class="hits">2669</span>
          
          <code class="ruby">        set_state(:drive)</code>
        </li>
      
        <li class="covered" data-hits="2669" data-linenumber="594">
          <span class="hits">2669</span>
          
          <code class="ruby">        set_value(0)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="595">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="596">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="597">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_lo!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="598">
          
          
          <code class="ruby">        drive_lo</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="599">
          
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="600">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="601">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="602">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_mem</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="603">
          <span class="hits">27</span>
          
          <code class="ruby">        set_state(:drive_mem)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="604">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="605">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="606">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_mem!</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="607">
          <span class="hits">1</span>
          
          <code class="ruby">        drive_mem</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="608">
          <span class="hits">1</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="609">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="610">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="611">
          <span class="hits">2</span>
          
          <code class="ruby">      def expect_mem</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="612">
          <span class="hits">23</span>
          
          <code class="ruby">        set_state(:expect_mem)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="613">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="614">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="615">
          <span class="hits">2</span>
          
          <code class="ruby">      def expect_mem!</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="616">
          <span class="hits">1</span>
          
          <code class="ruby">        expect_mem</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="617">
          <span class="hits">1</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="618">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="619">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="620">
          
          
          <code class="ruby">      # Set the pin to expect a 1 on future cycles</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="621">
          <span class="hits">2</span>
          
          <code class="ruby">      def assert_hi(_options = {})</code>
        </li>
      
        <li class="covered" data-hits="192" data-linenumber="622">
          <span class="hits">192</span>
          
          <code class="ruby">        set_state(:compare)</code>
        </li>
      
        <li class="covered" data-hits="192" data-linenumber="623">
          <span class="hits">192</span>
          
          <code class="ruby">        set_value(1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="624">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="625">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :expect_hi, :assert_hi</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="626">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :compare_hi, :assert_hi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="627">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="628">
          <span class="hits">2</span>
          
          <code class="ruby">      def assert_hi!</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="629">
          <span class="hits">1</span>
          
          <code class="ruby">        assert_hi</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="630">
          <span class="hits">1</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="631">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="632">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :expect_hi!, :assert_hi!</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="633">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :compare_hi!, :assert_hi!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="634">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="635">
          
          
          <code class="ruby">      # Set the pin to expect a 0 on future cycles</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="636">
          <span class="hits">2</span>
          
          <code class="ruby">      def assert_lo(_options = {})</code>
        </li>
      
        <li class="covered" data-hits="186" data-linenumber="637">
          <span class="hits">186</span>
          
          <code class="ruby">        set_state(:compare)</code>
        </li>
      
        <li class="covered" data-hits="186" data-linenumber="638">
          <span class="hits">186</span>
          
          <code class="ruby">        set_value(0)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="639">
          
          
          <code class="ruby">        # Planning to add the active load logic to the tester instead...</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="640">
          
          
          <code class="ruby">        # options = { :active =&gt; false    #if active true means to take tester active load capability into account</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="641">
          
          
          <code class="ruby">        #          }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="642">
          
          
          <code class="ruby">        # unless state_to_be_inverted?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="643">
          
          
          <code class="ruby">        #  self.state = ($tester.active_loads || !options[:active]) ? $tester.pin_state(:expect_lo) : $tester.pin_state(:dont_care)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="644">
          
          
          <code class="ruby">        # else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="645">
          
          
          <code class="ruby">        #  self.state = ($tester.active_loads || !options[:active]) ? $tester.pin_state(:expect_hi) : $tester.pin_state(:dont_care)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="646">
          
          
          <code class="ruby">        # end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="647">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="648">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :expect_lo, :assert_lo</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="649">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :compare_lo, :assert_lo</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="650">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="651">
          <span class="hits">2</span>
          
          <code class="ruby">      def assert_lo!</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="652">
          <span class="hits">1</span>
          
          <code class="ruby">        assert_lo</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="653">
          <span class="hits">1</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="654">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="655">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :expect_lo!, :assert_lo!</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="656">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :compare_lo!, :assert_lo!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="657">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="658">
          
          
          <code class="ruby">      # Set the pin to X on future cycles</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="659">
          <span class="hits">2</span>
          
          <code class="ruby">      def dont_care</code>
        </li>
      
        <li class="covered" data-hits="996" data-linenumber="660">
          <span class="hits">996</span>
          
          <code class="ruby">        set_state(:dont_care)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="661">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="662">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="663">
          <span class="hits">2</span>
          
          <code class="ruby">      def dont_care!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="664">
          
          
          <code class="ruby">        dont_care</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="665">
          
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="666">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="667">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="668">
          
          
          <code class="ruby">      # Pass in 0 or 1 to have the pin drive_lo or drive_hi respectively.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="669">
          
          
          <code class="ruby">      # This is useful when programatically setting the pin state.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="670">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="671">
          
          
          <code class="ruby">      #   [0,1,1,0].each do |level|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="672">
          
          
          <code class="ruby">      #       $pin(:d_in).drive(level)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="673">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="674">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive(value)</code>
        </li>
      
        <li class="covered" data-hits="581" data-linenumber="675">
          <span class="hits">581</span>
          
          <code class="ruby">        set_state(:drive)</code>
        </li>
      
        <li class="covered" data-hits="581" data-linenumber="676">
          <span class="hits">581</span>
          
          <code class="ruby">        set_value(value)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="677">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="678">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="679">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive!(value)</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="680">
          <span class="hits">29</span>
          
          <code class="ruby">        drive(value)</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="681">
          <span class="hits">29</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="682">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="683">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="684">
          
          
          <code class="ruby">      # Pass in 0 or 1 to have the pin expect_lo or expect_hi respectively.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="685">
          
          
          <code class="ruby">      # This is useful when programatically setting the pin state.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="686">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="687">
          
          
          <code class="ruby">      #   [0,1,1,0].each do |level|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="688">
          
          
          <code class="ruby">      #       $pin(:d_in).assert(level)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="689">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="690">
          <span class="hits">2</span>
          
          <code class="ruby">      def assert(value, _options = {})</code>
        </li>
      
        <li class="covered" data-hits="129" data-linenumber="691">
          <span class="hits">129</span>
          
          <code class="ruby">        set_state(:compare)</code>
        </li>
      
        <li class="covered" data-hits="129" data-linenumber="692">
          <span class="hits">129</span>
          
          <code class="ruby">        set_value(value)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="693">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="694">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :compare, :assert</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="695">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :expect, :assert</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="696">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="697">
          <span class="hits">2</span>
          
          <code class="ruby">      def assert!(*args)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="698">
          <span class="hits">6</span>
          
          <code class="ruby">        assert(*args)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="699">
          <span class="hits">6</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="700">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="701">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :compare!, :assert!</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="702">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :expect!, :assert!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="703">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="704">
          <span class="hits">2</span>
          
          <code class="ruby">      def assert_midband</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="705">
          
          
          <code class="ruby">        set_state(:compare_midband)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="706">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="707">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :compare_midband, :assert_midband</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="708">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :expect_midband, :assert_midband</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="709">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="710">
          <span class="hits">2</span>
          
          <code class="ruby">      def assert_midband!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="711">
          
          
          <code class="ruby">        assert_midband</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="712">
          
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="713">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="714">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :compare_midband!, :assert_midband!</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="715">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :expect_midband!, :assert_midband!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="716">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="717">
          
          
          <code class="ruby">      # Returns the state of invert</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="718">
          <span class="hits">2</span>
          
          <code class="ruby">      def inverted?</code>
        </li>
      
        <li class="covered" data-hits="4724" data-linenumber="719">
          <span class="hits">4724</span>
          
          <code class="ruby">        @invert</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="720">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="721">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="722">
          
          
          <code class="ruby">      # Returns true if the pin is currently in a compare state</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="723">
          <span class="hits">2</span>
          
          <code class="ruby">      def comparing?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="724">
          
          
          <code class="ruby">        !@suspend &amp;&amp;</code>
        </li>
      
        <li class="covered" data-hits="552" data-linenumber="725">
          <span class="hits">552</span>
          
          <code class="ruby">          state == :compare</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="726">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="727">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="728">
          
          
          <code class="ruby">      # Returns true if the pin is currently in a compare mem state</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="729">
          <span class="hits">2</span>
          
          <code class="ruby">      def comparing_mem?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="730">
          
          
          <code class="ruby">        !@suspend &amp;&amp;</code>
        </li>
      
        <li class="covered" data-hits="250" data-linenumber="731">
          <span class="hits">250</span>
          
          <code class="ruby">          state == :expect_mem</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="732">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="733">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="734">
          
          
          <code class="ruby">      # Returns true if the pin is currently in a compare state</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="735">
          <span class="hits">2</span>
          
          <code class="ruby">      def comparing_midband?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="736">
          
          
          <code class="ruby">        !@suspend &amp;&amp;</code>
        </li>
      
        <li class="covered" data-hits="531" data-linenumber="737">
          <span class="hits">531</span>
          
          <code class="ruby">          state == :compare_midband</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="738">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="739">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="740">
          
          
          <code class="ruby">      # Returns true if the pin is currently in a drive state</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="741">
          <span class="hits">2</span>
          
          <code class="ruby">      def driving?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="742">
          
          
          <code class="ruby">        !@suspend &amp;&amp;</code>
        </li>
      
        <li class="covered" data-hits="2363" data-linenumber="743">
          <span class="hits">2363</span>
          
          <code class="ruby">          (state == :drive || state == :drive_very_hi)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="744">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="745">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="746">
          
          
          <code class="ruby">      # Returns true if the pin is currently in a drive mem state</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="747">
          <span class="hits">2</span>
          
          <code class="ruby">      def driving_mem?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="748">
          
          
          <code class="ruby">        !@suspend &amp;&amp;</code>
        </li>
      
        <li class="covered" data-hits="273" data-linenumber="749">
          <span class="hits">273</span>
          
          <code class="ruby">          state == :drive_mem</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="750">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="751">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="752">
          
          
          <code class="ruby">      # Returns true if pin is in high voltage state</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="753">
          <span class="hits">2</span>
          
          <code class="ruby">      def high_voltage?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="754">
          
          
          <code class="ruby">        !@suspend &amp;&amp;</code>
        </li>
      
        <li class="covered" data-hits="633" data-linenumber="755">
          <span class="hits">633</span>
          
          <code class="ruby">          state == :drive_very_hi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="756">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="757">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="758">
          <span class="hits">2</span>
          
          <code class="ruby">      def toggle</code>
        </li>
      
        <li class="covered" data-hits="328" data-linenumber="759">
          <span class="hits">328</span>
          
          <code class="ruby">        unless state == :dont_care</code>
        </li>
      
        <li class="covered" data-hits="308" data-linenumber="760">
          <span class="hits">308</span>
          
          <code class="ruby">          set_value(value == 0 ? 1 : 0)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="761">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="762">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="763">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="764">
          <span class="hits">2</span>
          
          <code class="ruby">      def toggle!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="765">
          
          
          <code class="ruby">        toggle</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="766">
          
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="767">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="768">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="769">
          
          
          <code class="ruby">      # Mark the (data) from the pin to be captured</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="770">
          <span class="hits">2</span>
          
          <code class="ruby">      def capture</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="771">
          <span class="hits">27</span>
          
          <code class="ruby">        set_state(:capture)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="772">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="773">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :store, :capture</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="774">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="775">
          
          
          <code class="ruby">      # Mark the (data) from the pin to be captured and trigger a cycle</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="776">
          <span class="hits">2</span>
          
          <code class="ruby">      def capture!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="777">
          
          
          <code class="ruby">        capture</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="778">
          
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="779">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="780">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :store!, :capture!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="781">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="782">
          
          
          <code class="ruby">      # Returns true if the (data) from the pin is marked to be captured</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="783">
          <span class="hits">2</span>
          
          <code class="ruby">      def to_be_captured?</code>
        </li>
      
        <li class="covered" data-hits="241" data-linenumber="784">
          <span class="hits">241</span>
          
          <code class="ruby">        state == :capture</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="785">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="786">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :to_be_stored?, :to_be_captured?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="787">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :is_to_be_stored?, :to_be_captured?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="788">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :is_to_be_captured?, :to_be_captured?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="789">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="790">
          
          
          <code class="ruby">      # Restores the state of the pin at the end of the given block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="791">
          
          
          <code class="ruby">      # to the state it was in at the start of the block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="792">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="793">
          
          
          <code class="ruby">      #   pin(:invoke).driving?  # =&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="794">
          
          
          <code class="ruby">      #   pin(:invoke).restore_state do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="795">
          
          
          <code class="ruby">      #     pin(:invoke).dont_care</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="796">
          
          
          <code class="ruby">      #     pin(:invoke).driving?  # =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="797">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="798">
          
          
          <code class="ruby">      #   pin(:invoke).driving?  # =&gt; true</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="799">
          <span class="hits">2</span>
          
          <code class="ruby">      def restore_state</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="800">
          <span class="hits">2</span>
          
          <code class="ruby">        save</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="801">
          <span class="hits">2</span>
          
          <code class="ruby">        yield</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="802">
          <span class="hits">2</span>
          
          <code class="ruby">        restore</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="803">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="804">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="805">
          <span class="hits">2</span>
          
          <code class="ruby">      def save # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="806">
          <span class="hits">14</span>
          
          <code class="ruby">        @_saved_state = @state</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="807">
          <span class="hits">14</span>
          
          <code class="ruby">        @_saved_value = @value</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="808">
          <span class="hits">14</span>
          
          <code class="ruby">        @_saved_suspend = @suspend</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="809">
          <span class="hits">14</span>
          
          <code class="ruby">        @_saved_invert = @invert</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="810">
          <span class="hits">14</span>
          
          <code class="ruby">        @_saved_repeat_previous = @repeat_previous</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="811">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="812">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="813">
          <span class="hits">2</span>
          
          <code class="ruby">      def restore # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="814">
          <span class="hits">14</span>
          
          <code class="ruby">        invalidate_vector_cache</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="815">
          <span class="hits">14</span>
          
          <code class="ruby">        @state = @_saved_state</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="816">
          <span class="hits">14</span>
          
          <code class="ruby">        @value = @_saved_value</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="817">
          <span class="hits">14</span>
          
          <code class="ruby">        @suspend = @_saved_suspend</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="818">
          <span class="hits">14</span>
          
          <code class="ruby">        @invert = @_saved_invert</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="819">
          <span class="hits">14</span>
          
          <code class="ruby">        @repeat_previous = @_saved_repeat_previous</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="820">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="821">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="822">
          <span class="hits">2</span>
          
          <code class="ruby">      def is_not_a_clock?</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="823">
          <span class="hits">9</span>
          
          <code class="ruby">        @clock.nil?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="824">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="825">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="826">
          <span class="hits">2</span>
          
          <code class="ruby">      def is_a_clock?</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="827">
          <span class="hits">8</span>
          
          <code class="ruby">        !(@clock.nil?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="828">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="829">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="830">
          <span class="hits">2</span>
          
          <code class="ruby">      def is_a_running_clock?</code>
        </li>
      
        <li class="covered" data-hits="114" data-linenumber="831">
          <span class="hits">114</span>
          
          <code class="ruby">        @clock.running?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="832">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="833">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="834">
          <span class="hits">2</span>
          
          <code class="ruby">      def enable_clock(options = {})</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="835">
          <span class="hits">6</span>
          
          <code class="ruby">        @clock = PinClock.new(self, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="836">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="837">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="838">
          <span class="hits">2</span>
          
          <code class="ruby">      def disable_clock(options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="839">
          <span class="hits">2</span>
          
          <code class="ruby">        @clock.stop_clock(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="840">
          <span class="hits">2</span>
          
          <code class="ruby">        @clock = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="841">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="842">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="843">
          <span class="hits">2</span>
          
          <code class="ruby">      def update_clock</code>
        </li>
      
        <li class="covered" data-hits="131" data-linenumber="844">
          <span class="hits">131</span>
          
          <code class="ruby">        @clock.update_clock</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="845">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="846">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="847">
          <span class="hits">2</span>
          
          <code class="ruby">      def start_clock(options = {})</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="848">
          <span class="hits">9</span>
          
          <code class="ruby">        enable_clock(options) if self.is_not_a_clock?</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="849">
          <span class="hits">9</span>
          
          <code class="ruby">        @clock.start_clock(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="850">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="851">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :resume_clock, :start_clock</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="852">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="853">
          <span class="hits">2</span>
          
          <code class="ruby">      def stop_clock(options = {})</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="854">
          <span class="hits">8</span>
          
          <code class="ruby">        @clock.stop_clock(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="855">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="856">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :pause_clock, :stop_clock</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="857">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="858">
          <span class="hits">2</span>
          
          <code class="ruby">      def next_edge</code>
        </li>
      
        <li class="covered" data-hits="139" data-linenumber="859">
          <span class="hits">139</span>
          
          <code class="ruby">        @clock.next_edge</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="860">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="861">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="862">
          <span class="hits">2</span>
          
          <code class="ruby">      def half_period</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="863">
          <span class="hits">13</span>
          
          <code class="ruby">        @clock.cycles_per_half_period</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="864">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="865">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="866">
          <span class="hits">2</span>
          
          <code class="ruby">      def toggle_clock</code>
        </li>
      
        <li class="covered" data-hits="104" data-linenumber="867">
          <span class="hits">104</span>
          
          <code class="ruby">        fail &quot;ERROR: Clock on #{@owner.name} not running.&quot; unless is_a_running_clock?</code>
        </li>
      
        <li class="covered" data-hits="104" data-linenumber="868">
          <span class="hits">104</span>
          
          <code class="ruby">        @clock.toggle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="869">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="870">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="871">
          
          
          <code class="ruby">      # Delete this pin (self).  Used bang in method name to keep same for pins and</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="872">
          
          
          <code class="ruby">      # pin collections.  Pin collections already had a delete method which deletes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="873">
          
          
          <code class="ruby">      # a pin from the collection.  Needed delete! to indicate it is deleting the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="874">
          
          
          <code class="ruby">      # actual pin or pin group calling the method.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="875">
          <span class="hits">2</span>
          
          <code class="ruby">      def delete!</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="876">
          <span class="hits">2</span>
          
          <code class="ruby">        owner.delete_pin(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="877">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="878">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="879">
          <span class="hits">2</span>
          
          <code class="ruby">      def type=(value)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="880">
          <span class="hits">2</span>
          
          <code class="ruby">        if TYPES.include? value</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="881">
          <span class="hits">2</span>
          
          <code class="ruby">          @type = value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="882">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="883">
          
          
          <code class="ruby">          fail &quot;Pin type &#39;#{value}&#39; must be set to one of the following: #{TYPES.join(&#39;, &#39;)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="884">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="885">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="886">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="887">
          <span class="hits">2</span>
          
          <code class="ruby">      def open_drain=(value)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="888">
          <span class="hits">1</span>
          
          <code class="ruby">        if [true, false].include? value</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="889">
          <span class="hits">1</span>
          
          <code class="ruby">          @open_drain = value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="890">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="891">
          
          
          <code class="ruby">          fail &quot;Pin open_drain  attribute &#39;#{value}&#39; must be either true or false&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="892">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="893">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="894">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="895">
          <span class="hits">2</span>
          
          <code class="ruby">      def ext_pullup=(value)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="896">
          <span class="hits">1</span>
          
          <code class="ruby">        if [true, false].include? value</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="897">
          <span class="hits">1</span>
          
          <code class="ruby">          @ext_pullup = value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="898">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="899">
          
          
          <code class="ruby">          fail &quot;Pin ext_pullup  attribute &#39;#{value}&#39; must be either true or false&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="900">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="901">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="902">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="903">
          <span class="hits">2</span>
          
          <code class="ruby">      def ext_pulldown=(value)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="904">
          <span class="hits">1</span>
          
          <code class="ruby">        if [true, false].include? value</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="905">
          <span class="hits">1</span>
          
          <code class="ruby">          @ext_pulldown = value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="906">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="907">
          
          
          <code class="ruby">          fail &quot;Pin ext_pulldown  attribute &#39;#{value}&#39; must be either true or false&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="908">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="909">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="910">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="911">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="912">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="f79e891f7a05d64c65b6705d1afdf0e27493988f">
  <div class="header">
    <h3>lib/origen/pins/pin_bank.rb</h3>
    <h4><span class="green">93.62 %</span> covered</h4>
    <div>
      <b>188</b> relevant lines. 
      <span class="green"><b>176</b> lines covered</span> and
      <span class="red"><b>12</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Stores all pins, pin aliases and pin groups for the current target.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # A central store is used to allow either top-level or sub-block objects to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    # add pins to the current context available to the testers.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    # The global Origen pin bank (an instance of this class) is returned from Origen.pin_bank.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">    class PinBank</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">      include Origen::CoreCallbacks</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">      # There is one pin bank per Origen thread, this clears the bank every time the target is changed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">      def before_load_target</code>
        </li>
      
        <li class="covered" data-hits="316" data-linenumber="15">
          <span class="hits">316</span>
          
          <code class="ruby">        empty!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">      # Add the given pin to the bank</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      # @return [Origen::Pins::Pin] the supplied pin object</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="21">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_pin(pin, _owner, _options = {})</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="22">
          <span class="hits">4418</span>
          
          <code class="ruby">        if pin.is_a?(PowerPin)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="23">
          <span class="hits">4</span>
          
          <code class="ruby">          bank = all_power_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">        elsif pin.is_a?(GroundPin)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="25">
          <span class="hits">4</span>
          
          <code class="ruby">          bank = all_ground_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">        elsif pin.is_a?(VirtualPin)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="27">
          <span class="hits">6</span>
          
          <code class="ruby">          bank = all_virtual_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="4404" data-linenumber="29">
          <span class="hits">4404</span>
          
          <code class="ruby">          bank = all_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="31">
          <span class="hits">4418</span>
          
          <code class="ruby">        if bank[pin.id]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="32">
          
          
          <code class="ruby">          fail &quot;A pin with id #{pin.id} already exists!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="34">
          <span class="hits">4418</span>
          
          <code class="ruby">        all_ids &lt;&lt; pin.id</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="35">
          <span class="hits">4418</span>
          
          <code class="ruby">        bank[pin.id] = pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">        # If ends in a number</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">        # if !options[:dont_create_group] &amp;&amp; pin.id.to_s =~ /(.*?)(\d+)$/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">        #  # Create a new group if one with the given name doesn&#39;t already exist</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">        #  unless group = all_pin_groups[$1.to_sym]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">        #    group = PinCollection.new(owner, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">        #    group.id = $1.to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">        #    all_pin_groups[$1.to_sym] = group</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">        #  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">        #  group.add_pin(pin)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">        # end</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="46">
          <span class="hits">4418</span>
          
          <code class="ruby">        pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="49">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_pin_group(group, owner, options = {})</code>
        </li>
      
        <li class="covered" data-hits="333" data-linenumber="50">
          <span class="hits">333</span>
          
          <code class="ruby">        unless options[:pins_exist]</code>
        </li>
      
        <li class="covered" data-hits="333" data-linenumber="51">
          <span class="hits">333</span>
          
          <code class="ruby">          group.each do |pin|</code>
        </li>
      
        <li class="covered" data-hits="2626" data-linenumber="52">
          <span class="hits">2626</span>
          
          <code class="ruby">            add_pin(pin, owner, options.merge(dont_create_group: true))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="333" data-linenumber="55">
          <span class="hits">333</span>
          
          <code class="ruby">        store_pin_group(group, options)</code>
        </li>
      
        <li class="covered" data-hits="333" data-linenumber="56">
          <span class="hits">333</span>
          
          <code class="ruby">        group</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">      # Returns a hash containing all pins available in the current context stored by their primary ID</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="60">
          <span class="hits">2</span>
          
          <code class="ruby">      def pins(options = {})</code>
        </li>
      
        <li class="covered" data-hits="683" data-linenumber="61">
          <span class="hits">683</span>
          
          <code class="ruby">        all_pins.select do |_id, pin|</code>
        </li>
      
        <li class="covered" data-hits="17302" data-linenumber="62">
          <span class="hits">17302</span>
          
          <code class="ruby">          pin.enabled?(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="66">
          <span class="hits">2</span>
          
          <code class="ruby">      def power_pins(options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="67">
          <span class="hits">2</span>
          
          <code class="ruby">        all_power_pins.select do |_id, pin|</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="68">
          <span class="hits">4</span>
          
          <code class="ruby">          pin.enabled?(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="72">
          <span class="hits">2</span>
          
          <code class="ruby">      def ground_pins(options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="73">
          <span class="hits">2</span>
          
          <code class="ruby">        all_ground_pins.select do |_id, pin|</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="74">
          <span class="hits">4</span>
          
          <code class="ruby">          pin.enabled?(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="78">
          <span class="hits">2</span>
          
          <code class="ruby">      def virtual_pins(options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="79">
          <span class="hits">2</span>
          
          <code class="ruby">        all_virtual_pins.select do |_id, pin|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="80">
          <span class="hits">6</span>
          
          <code class="ruby">          pin.enabled?(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">      # Returns a hash containing all pin_groups available in the current context stored by their primary ID</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="85">
          <span class="hits">2</span>
          
          <code class="ruby">      def pin_groups(options = {})</code>
        </li>
      
        <li class="covered" data-hits="7048" data-linenumber="86">
          <span class="hits">7048</span>
          
          <code class="ruby">        current_pin_group_store(all_pin_groups, options).select do |_id, group|</code>
        </li>
      
        <li class="covered" data-hits="11589" data-linenumber="87">
          <span class="hits">11589</span>
          
          <code class="ruby">          group.enabled?(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">      # Returns a hash containing all power_pin_groups available in the current context stored by their primary ID</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="92">
          <span class="hits">2</span>
          
          <code class="ruby">      def power_pin_groups(options = {})</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="93">
          <span class="hits">4</span>
          
          <code class="ruby">        current_pin_group_store(all_power_pin_groups, options).select do |_id, group|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="94">
          <span class="hits">3</span>
          
          <code class="ruby">          group.enabled?(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">      # Returns a hash containing all ground_pin_groups available in the current context stored by their primary ID</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="99">
          <span class="hits">2</span>
          
          <code class="ruby">      def ground_pin_groups(options = {})</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="100">
          <span class="hits">4</span>
          
          <code class="ruby">        current_pin_group_store(all_ground_pin_groups, options).select do |_id, group|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="101">
          <span class="hits">3</span>
          
          <code class="ruby">          group.enabled?(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">      # Returns a hash containing all virtual_pin_groups available in the current context stored by their primary ID</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="106">
          <span class="hits">2</span>
          
          <code class="ruby">      def virtual_pin_groups(options = {})</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="107">
          <span class="hits">4</span>
          
          <code class="ruby">        current_pin_group_store(all_virtual_pin_groups, options).select do |_id, group|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="108">
          <span class="hits">3</span>
          
          <code class="ruby">          group.enabled?(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">      # Returns a hash containing all pins stored by their primary ID</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="113">
          <span class="hits">2</span>
          
          <code class="ruby">      def all_pins</code>
        </li>
      
        <li class="covered" data-hits="13479" data-linenumber="114">
          <span class="hits">13479</span>
          
          <code class="ruby">        @all_pins ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">      # Returns a hash containing all pin groups stored by context</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="118">
          <span class="hits">2</span>
          
          <code class="ruby">      def all_pin_groups</code>
        </li>
      
        <li class="covered" data-hits="12752" data-linenumber="119">
          <span class="hits">12752</span>
          
          <code class="ruby">        @all_pin_groups ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">      # Returns a hash containing all power pins stored by their primary ID</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="123">
          <span class="hits">2</span>
          
          <code class="ruby">      def all_power_pins</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="124">
          <span class="hits">19</span>
          
          <code class="ruby">        @all_power_pins ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">      # Returns a hash containing all ground pins stored by their primary ID</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="128">
          <span class="hits">2</span>
          
          <code class="ruby">      def all_ground_pins</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="129">
          <span class="hits">15</span>
          
          <code class="ruby">        @all_ground_pins ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">      # Returns a hash containing all virtual pins stored by their primary ID</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="133">
          <span class="hits">2</span>
          
          <code class="ruby">      def all_virtual_pins</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="134">
          <span class="hits">18</span>
          
          <code class="ruby">        @all_virtual_pins ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">      # Returns a hash containing all power pin groups stored by context</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="138">
          <span class="hits">2</span>
          
          <code class="ruby">      def all_power_pin_groups</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="139">
          <span class="hits">10</span>
          
          <code class="ruby">        @all_power_pin_groups ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">      # Returns a hash containing all ground pin groups stored by context</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="143">
          <span class="hits">2</span>
          
          <code class="ruby">      def all_ground_pin_groups</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="144">
          <span class="hits">11</span>
          
          <code class="ruby">        @all_ground_pin_groups ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">      # Returns a hash containing all virtual pin groups stored by context</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="148">
          <span class="hits">2</span>
          
          <code class="ruby">      def all_virtual_pin_groups</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="149">
          <span class="hits">10</span>
          
          <code class="ruby">        @all_virtual_pin_groups ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="152">
          <span class="hits">2</span>
          
          <code class="ruby">      def find(id, options = {})</code>
        </li>
      
        <li class="covered" data-hits="8421" data-linenumber="153">
          <span class="hits">8421</span>
          
          <code class="ruby">        id = id.to_sym</code>
        </li>
      
        <li class="covered" data-hits="8421" data-linenumber="154">
          <span class="hits">8421</span>
          
          <code class="ruby">        if options[:power_pin]</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="155">
          <span class="hits">13</span>
          
          <code class="ruby">          pin = all_power_pins[id] || find_pin_group(id, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">        elsif options[:ground_pin]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="157">
          <span class="hits">9</span>
          
          <code class="ruby">          pin = all_ground_pins[id] || find_pin_group(id, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">        elsif options[:virtual_pin]</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="159">
          <span class="hits">10</span>
          
          <code class="ruby">          pin = all_virtual_pins[id] || find_pin_group(id, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="8389" data-linenumber="161">
          <span class="hits">8389</span>
          
          <code class="ruby">          pin = all_pins[id] || find_by_alias(id, options) || find_pin_group(id, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="8421" data-linenumber="163">
          <span class="hits">8421</span>
          
          <code class="ruby">        if pin</code>
        </li>
      
        <li class="covered" data-hits="8402" data-linenumber="164">
          <span class="hits">8402</span>
          
          <code class="ruby">          if options[:ignore_context] || pin.enabled?(options)</code>
        </li>
      
        <li class="covered" data-hits="8393" data-linenumber="165">
          <span class="hits">8393</span>
          
          <code class="ruby">            pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="170">
          <span class="hits">2</span>
          
          <code class="ruby">      def find_pin_group(id, options = {})</code>
        </li>
      
        <li class="covered" data-hits="4902" data-linenumber="171">
          <span class="hits">4902</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby">          include_all: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="4902" data-linenumber="174">
          <span class="hits">4902</span>
          
          <code class="ruby">        if options[:power_pin]</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="175">
          <span class="hits">4</span>
          
          <code class="ruby">          base = all_power_pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby">        elsif options[:ground_pin]</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="177">
          <span class="hits">5</span>
          
          <code class="ruby">          base = all_ground_pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby">        elsif options[:virtual_pin]</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="179">
          <span class="hits">4</span>
          
          <code class="ruby">          base = all_virtual_pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="4889" data-linenumber="181">
          <span class="hits">4889</span>
          
          <code class="ruby">          base = all_pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="4902" data-linenumber="183">
          <span class="hits">4902</span>
          
          <code class="ruby">        pin_group_stores_in_context(base, options) do |store|</code>
        </li>
      
        <li class="covered" data-hits="4913" data-linenumber="184">
          <span class="hits">4913</span>
          
          <code class="ruby">          return store[id] if store[id]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">        nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">      # This will be called by the pins whenever a new alias is added to them</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="190">
          <span class="hits">2</span>
          
          <code class="ruby">      def register_alias(id, pin, _options = {})</code>
        </li>
      
        <li class="covered" data-hits="1065" data-linenumber="191">
          <span class="hits">1065</span>
          
          <code class="ruby">        known_aliases[id] ||= []</code>
        </li>
      
        <li class="covered" data-hits="1065" data-linenumber="192">
          <span class="hits">1065</span>
          
          <code class="ruby">        known_aliases[id] &lt;&lt; pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">      # Find an existing pin group with the given ID if it exists and return it, otherwise create one</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="196">
          <span class="hits">2</span>
          
          <code class="ruby">      def find_or_create_pin_group(id, owner, options = {})</code>
        </li>
      
        <li class="covered" data-hits="486" data-linenumber="197">
          <span class="hits">486</span>
          
          <code class="ruby">        group = find_pin_group(id, options)</code>
        </li>
      
        <li class="covered" data-hits="486" data-linenumber="198">
          <span class="hits">486</span>
          
          <code class="ruby">        unless group</code>
        </li>
      
        <li class="covered" data-hits="486" data-linenumber="199">
          <span class="hits">486</span>
          
          <code class="ruby">          group = PinCollection.new(owner, options)</code>
        </li>
      
        <li class="covered" data-hits="486" data-linenumber="200">
          <span class="hits">486</span>
          
          <code class="ruby">          group.id = id</code>
        </li>
      
        <li class="covered" data-hits="486" data-linenumber="201">
          <span class="hits">486</span>
          
          <code class="ruby">          store_pin_group(group, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="486" data-linenumber="203">
          <span class="hits">486</span>
          
          <code class="ruby">        group</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="206">
          
          
          <code class="ruby">      # Delete a specific pin</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="207">
          <span class="hits">2</span>
          
          <code class="ruby">      def delete_pin(pin)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="208">
          <span class="hits">3</span>
          
          <code class="ruby">        if pin.is_a?(PowerPin)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="209">
          
          
          <code class="ruby">          bank = all_power_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby">        elsif pin.is_a?(GroundPin)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="211">
          
          
          <code class="ruby">          bank = all_ground_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">        elsif pin.is_a?(VirtualPin)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="213">
          
          
          <code class="ruby">          bank = all_virtual_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="215">
          <span class="hits">3</span>
          
          <code class="ruby">          bank = all_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="216">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">        # First delete the pin from any of the pin groups it resides</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="218">
          <span class="hits">3</span>
          
          <code class="ruby">        Origen.pin_bank.pin_groups.each do |_name, grp|</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="219">
          <span class="hits">1</span>
          
          <code class="ruby">          next unless grp.store.include?(pin)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="220">
          <span class="hits">1</span>
          
          <code class="ruby">          grp.delete(pin)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">        # Now delete the pin from the pin bank</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="223">
          <span class="hits">3</span>
          
          <code class="ruby">        if bank[pin.id]</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="224">
          <span class="hits">3</span>
          
          <code class="ruby">          bank.delete(pin.id)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby">          # Delete all known aliases as well</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="226">
          <span class="hits">3</span>
          
          <code class="ruby">          known_aliases.delete(pin.name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="228">
          
          
          <code class="ruby">          if pin.id == pin.name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="229">
          
          
          <code class="ruby">            fail &quot;A pin with id #{pin.id} does not exist!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="231">
          
          
          <code class="ruby">            fail &quot;A pin with id #{pin.id} and name #{pin.name} does not exist!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="232">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="233">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">      # Delete a specific pin group</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="237">
          <span class="hits">2</span>
          
          <code class="ruby">      def delete_pingroup(group)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="238">
          <span class="hits">2</span>
          
          <code class="ruby">        found_group = false</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="239">
          <span class="hits">2</span>
          
          <code class="ruby">        if group.power_pins?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="240">
          
          
          <code class="ruby">          base = all_power_pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">        elsif group.ground_pins?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="242">
          
          
          <code class="ruby">          base = all_ground_pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby">        elsif group.virtual_pins?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="244">
          
          
          <code class="ruby">          base = all_virtual_pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="246">
          <span class="hits">2</span>
          
          <code class="ruby">          base = all_pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="248">
          <span class="hits">2</span>
          
          <code class="ruby">        pin_group_stores_in_context(base) do |store|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="249">
          <span class="hits">2</span>
          
          <code class="ruby">          if store.include?(group.id)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="250">
          <span class="hits">2</span>
          
          <code class="ruby">            store.delete(group.id)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="251">
          <span class="hits">2</span>
          
          <code class="ruby">            found_group = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="254">
          <span class="hits">2</span>
          
          <code class="ruby">        fail &quot;A pin group with id #{group.id} does not exist!&quot; unless found_group == true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="255">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="257">
          <span class="hits">2</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="259">
          <span class="hits">2</span>
          
          <code class="ruby">      def current_pin_group_store(base, options)</code>
        </li>
      
        <li class="covered" data-hits="7060" data-linenumber="260">
          <span class="hits">7060</span>
          
          <code class="ruby">        pin_group_stores_in_context(base, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="262">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="263">
          <span class="hits">2</span>
          
          <code class="ruby">      def pin_group_stores_in_context(base, options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">        # Pin group availability is now only scoped by package</code>
        </li>
      
        <li class="covered" data-hits="12783" data-linenumber="265">
          <span class="hits">12783</span>
          
          <code class="ruby">        options[:mode] = :all</code>
        </li>
      
        <li class="covered" data-hits="12783" data-linenumber="266">
          <span class="hits">12783</span>
          
          <code class="ruby">        options[:configuration] = :all</code>
        </li>
      
        <li class="covered" data-hits="12783" data-linenumber="267">
          <span class="hits">12783</span>
          
          <code class="ruby">        resolve_packages(options).each do |package|</code>
        </li>
      
        <li class="covered" data-hits="12794" data-linenumber="268">
          <span class="hits">12794</span>
          
          <code class="ruby">          base[package] ||= {}</code>
        </li>
      
        <li class="covered" data-hits="12794" data-linenumber="269">
          <span class="hits">12794</span>
          
          <code class="ruby">          resolve_modes(options).each do |mode|</code>
        </li>
      
        <li class="covered" data-hits="12794" data-linenumber="270">
          <span class="hits">12794</span>
          
          <code class="ruby">            base[package][mode] ||= {}</code>
        </li>
      
        <li class="covered" data-hits="12794" data-linenumber="271">
          <span class="hits">12794</span>
          
          <code class="ruby">            resolve_configurations(options).each do |config|</code>
        </li>
      
        <li class="covered" data-hits="12794" data-linenumber="272">
          <span class="hits">12794</span>
          
          <code class="ruby">              base[package][mode][config] ||= {}</code>
        </li>
      
        <li class="covered" data-hits="12794" data-linenumber="273">
          <span class="hits">12794</span>
          
          <code class="ruby">              if block_given?</code>
        </li>
      
        <li class="covered" data-hits="5734" data-linenumber="274">
          <span class="hits">5734</span>
          
          <code class="ruby">                yield base[package][mode][config]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="7060" data-linenumber="276">
          <span class="hits">7060</span>
          
          <code class="ruby">                return base[package][mode][config]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="279">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="280">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="283">
          <span class="hits">2</span>
          
          <code class="ruby">      def store_pin_group(group, options)</code>
        </li>
      
        <li class="covered" data-hits="819" data-linenumber="284">
          <span class="hits">819</span>
          
          <code class="ruby">        if group.power_pins?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="285">
          <span class="hits">2</span>
          
          <code class="ruby">          base = all_power_pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="286">
          
          
          <code class="ruby">        elsif group.ground_pins?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="287">
          <span class="hits">2</span>
          
          <code class="ruby">          base = all_ground_pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">        elsif group.virtual_pins?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="289">
          <span class="hits">2</span>
          
          <code class="ruby">          base = all_virtual_pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="813" data-linenumber="291">
          <span class="hits">813</span>
          
          <code class="ruby">          base = all_pin_groups</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="292">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="819" data-linenumber="293">
          <span class="hits">819</span>
          
          <code class="ruby">        pin_group_stores_in_context(base, options) do |store|</code>
        </li>
      
        <li class="covered" data-hits="819" data-linenumber="294">
          <span class="hits">819</span>
          
          <code class="ruby">          store[group.id] = group</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="295">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="296">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="297">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby">      # Returns an array containing the package ids resolved from the given options or</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby">      # the current top-level context</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="300">
          <span class="hits">2</span>
          
          <code class="ruby">      def resolve_packages(options = {})</code>
        </li>
      
        <li class="covered" data-hits="12783" data-linenumber="301">
          <span class="hits">12783</span>
          
          <code class="ruby">        p = [options.delete(:package) || options.delete(:packages) || current_package_id].flatten.compact</code>
        </li>
      
        <li class="covered" data-hits="12783" data-linenumber="302">
          <span class="hits">12783</span>
          
          <code class="ruby">        if options[:include_all] || p.empty?</code>
        </li>
      
        <li class="covered" data-hits="12758" data-linenumber="303">
          <span class="hits">12758</span>
          
          <code class="ruby">          p &lt;&lt; :all</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="12783" data-linenumber="305">
          <span class="hits">12783</span>
          
          <code class="ruby">        p.uniq</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="306">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="308">
          
          
          <code class="ruby">      # Returns an array containing the mode ids resolved from the given options or</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="309">
          
          
          <code class="ruby">      # the current top-level context</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="310">
          <span class="hits">2</span>
          
          <code class="ruby">      def resolve_modes(options = {})</code>
        </li>
      
        <li class="covered" data-hits="12794" data-linenumber="311">
          <span class="hits">12794</span>
          
          <code class="ruby">        m = [options.delete(:mode) || options.delete(:modes) || current_mode_id].flatten.compact</code>
        </li>
      
        <li class="covered" data-hits="12794" data-linenumber="312">
          <span class="hits">12794</span>
          
          <code class="ruby">        if options[:include_all] || m.empty?</code>
        </li>
      
        <li class="covered" data-hits="4913" data-linenumber="313">
          <span class="hits">4913</span>
          
          <code class="ruby">          m &lt;&lt; :all</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="314">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="12794" data-linenumber="315">
          <span class="hits">12794</span>
          
          <code class="ruby">        m.uniq</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="316">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="317">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="318">
          
          
          <code class="ruby">      # Returns an array containing the configuration ids resolved from the given options or</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">      # the current top-level context</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="320">
          <span class="hits">2</span>
          
          <code class="ruby">      def resolve_configurations(options = {})</code>
        </li>
      
        <li class="covered" data-hits="12794" data-linenumber="321">
          <span class="hits">12794</span>
          
          <code class="ruby">        c = [options.delete(:configuration) || options.delete(:configurations) || current_configuration].flatten.compact</code>
        </li>
      
        <li class="covered" data-hits="12794" data-linenumber="322">
          <span class="hits">12794</span>
          
          <code class="ruby">        if options[:include_all] || c.empty?</code>
        </li>
      
        <li class="covered" data-hits="4913" data-linenumber="323">
          <span class="hits">4913</span>
          
          <code class="ruby">          c &lt;&lt; :all</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="324">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="12794" data-linenumber="325">
          <span class="hits">12794</span>
          
          <code class="ruby">        c.uniq</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="326">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="327">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="328">
          
          
          <code class="ruby">      # Returns the current configuration context for this pin/pin group, if a configuration has been</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="329">
          
          
          <code class="ruby">      # explicitly set on this pin that will be returned, otherwise the current chip-level configuration</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="330">
          
          
          <code class="ruby">      # context will be returned (nil if none is set)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="331">
          <span class="hits">2</span>
          
          <code class="ruby">      def current_configuration</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="332">
          <span class="hits">11</span>
          
          <code class="ruby">        if Origen.top_level</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="333">
          <span class="hits">11</span>
          
          <code class="ruby">          Origen.top_level.current_configuration</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="335">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="336">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="337">
          
          
          <code class="ruby">      # Returns the current top-level package ID, nil if none is set.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="338">
          <span class="hits">2</span>
          
          <code class="ruby">      def current_package_id</code>
        </li>
      
        <li class="covered" data-hits="12763" data-linenumber="339">
          <span class="hits">12763</span>
          
          <code class="ruby">        if Origen.top_level &amp;&amp; Origen.top_level.current_package</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="340">
          <span class="hits">27</span>
          
          <code class="ruby">          Origen.top_level.current_package.id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="341">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="342">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="343">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="344">
          
          
          <code class="ruby">      # Returns the current top-level mode ID, nil if none is set.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="345">
          <span class="hits">2</span>
          
          <code class="ruby">      def current_mode_id</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="346">
          <span class="hits">11</span>
          
          <code class="ruby">        if Origen.top_level &amp;&amp; Origen.top_level.current_mode</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="347">
          
          
          <code class="ruby">          Origen.top_level.current_mode.id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="348">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="349">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="350">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="351">
          <span class="hits">2</span>
          
          <code class="ruby">      def find_by_alias(id, options = {})</code>
        </li>
      
        <li class="covered" data-hits="4487" data-linenumber="352">
          <span class="hits">4487</span>
          
          <code class="ruby">        if known_aliases[id]</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="353">
          <span class="hits">94</span>
          
          <code class="ruby">          pins = known_aliases[id].select do |pin|</code>
        </li>
      
        <li class="covered" data-hits="99" data-linenumber="354">
          <span class="hits">99</span>
          
          <code class="ruby">            pin.has_alias?(id, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="355">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="356">
          <span class="hits">94</span>
          
          <code class="ruby">          if pins.size &gt; 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="357">
          
          
          <code class="ruby">            fail &quot;Mutliple pins with the alias #{id} have been found in the current scope!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="358">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="359">
          <span class="hits">94</span>
          
          <code class="ruby">          pins.first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="360">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="361">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="362">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="363">
          
          
          <code class="ruby">      # Delete all pins, groups and aliases from the bank</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="364">
          <span class="hits">2</span>
          
          <code class="ruby">      def empty!</code>
        </li>
      
        <li class="covered" data-hits="317" data-linenumber="365">
          <span class="hits">317</span>
          
          <code class="ruby">        @all_ids = nil</code>
        </li>
      
        <li class="covered" data-hits="317" data-linenumber="366">
          <span class="hits">317</span>
          
          <code class="ruby">        @known_aliases = nil</code>
        </li>
      
        <li class="covered" data-hits="317" data-linenumber="367">
          <span class="hits">317</span>
          
          <code class="ruby">        @all_pins = nil</code>
        </li>
      
        <li class="covered" data-hits="317" data-linenumber="368">
          <span class="hits">317</span>
          
          <code class="ruby">        @all_power_pins = nil</code>
        </li>
      
        <li class="covered" data-hits="317" data-linenumber="369">
          <span class="hits">317</span>
          
          <code class="ruby">        @all_ground_pins = nil</code>
        </li>
      
        <li class="covered" data-hits="317" data-linenumber="370">
          <span class="hits">317</span>
          
          <code class="ruby">        @all_virtual_pins = nil</code>
        </li>
      
        <li class="covered" data-hits="317" data-linenumber="371">
          <span class="hits">317</span>
          
          <code class="ruby">        @all_pin_groups = nil</code>
        </li>
      
        <li class="covered" data-hits="317" data-linenumber="372">
          <span class="hits">317</span>
          
          <code class="ruby">        @all_power_pin_groups = nil</code>
        </li>
      
        <li class="covered" data-hits="317" data-linenumber="373">
          <span class="hits">317</span>
          
          <code class="ruby">        @all_ground_pin_groups = nil</code>
        </li>
      
        <li class="covered" data-hits="317" data-linenumber="374">
          <span class="hits">317</span>
          
          <code class="ruby">        @all_virtual_pin_groups = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="375">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="376">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="377">
          <span class="hits">2</span>
          
          <code class="ruby">      def known_aliases</code>
        </li>
      
        <li class="covered" data-hits="6714" data-linenumber="378">
          <span class="hits">6714</span>
          
          <code class="ruby">        @known_aliases ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="380">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="381">
          <span class="hits">2</span>
          
          <code class="ruby">      def all_ids</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="382">
          <span class="hits">4418</span>
          
          <code class="ruby">        @all_ids ||= []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="383">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="384">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="385">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="386">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="6c65673e61352c9d5720c24cbc07fbd36ec1bfb3">
  <div class="header">
    <h3>lib/origen/pins/pin_clock.rb</h3>
    <h4><span class="green">96.05 %</span> covered</h4>
    <div>
      <b>76</b> relevant lines. 
      <span class="green"><b>73</b> lines covered</span> and
      <span class="red"><b>3</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    class PinClock</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :running</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :cycles_per_half_period</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :last_edge</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :next_edge</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize(owner, options = {})</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="10">
          <span class="hits">6</span>
          
          <code class="ruby">        @owner = owner</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="11">
          <span class="hits">6</span>
          
          <code class="ruby">        @running = false</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="12">
          <span class="hits">6</span>
          
          <code class="ruby">        @cycles_per_half_period = 0</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="13">
          <span class="hits">6</span>
          
          <code class="ruby">        @ns_per_half_period = 0</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="14">
          <span class="hits">6</span>
          
          <code class="ruby">        update_half_period(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">      def running?</code>
        </li>
      
        <li class="covered" data-hits="152" data-linenumber="18">
          <span class="hits">152</span>
          
          <code class="ruby">        @running</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="21">
          <span class="hits">2</span>
          
          <code class="ruby">      def start_clock(options = {})</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="22">
          <span class="hits">9</span>
          
          <code class="ruby">        fail &quot;ERROR: Clock on #{@owner.name} already running.&quot; if running?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="24">
          <span class="hits">9</span>
          
          <code class="ruby">        if update_required?(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">          update_half_period(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="28">
          <span class="hits">9</span>
          
          <code class="ruby">        @last_edge = Origen.tester.cycle_count</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="29">
          <span class="hits">9</span>
          
          <code class="ruby">        @next_edge = Origen.tester.cycle_count + @cycles_per_half_period</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="30">
          <span class="hits">9</span>
          
          <code class="ruby">        cc &quot;Start clock on #{@owner.name}: cycles_per_half_period=#{@cycles_per_half_period}, start cycle=#{@last_edge}&quot;</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="31">
          <span class="hits">9</span>
          
          <code class="ruby">        Origen.tester.push_running_clock(@owner) unless running?</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="32">
          <span class="hits">9</span>
          
          <code class="ruby">        @running = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="35">
          <span class="hits">2</span>
          
          <code class="ruby">      def restart_clock(_options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="36">
          
          
          <code class="ruby">        stop_clock</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">        update_clock</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="38">
          
          
          <code class="ruby">        start_clock</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="41">
          <span class="hits">2</span>
          
          <code class="ruby">      def stop_clock(_options = {})</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="42">
          <span class="hits">10</span>
          
          <code class="ruby">        cc &quot;Stop clock on #{@owner.name}: stop cycle=#{Origen.tester.cycle_count}&quot; if running?</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="43">
          <span class="hits">10</span>
          
          <code class="ruby">        Origen.tester.pop_running_clock(@owner) if running?</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="44">
          <span class="hits">10</span>
          
          <code class="ruby">        @running = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="47">
          <span class="hits">2</span>
          
          <code class="ruby">      def update_clock</code>
        </li>
      
        <li class="covered" data-hits="131" data-linenumber="48">
          <span class="hits">131</span>
          
          <code class="ruby">        unless update_half_period(period_in_ns: @ns_per_half_period)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="49">
          <span class="hits">4</span>
          
          <code class="ruby">          @last_edge = Origen.tester.cycle_count</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="50">
          <span class="hits">4</span>
          
          <code class="ruby">          @next_edge = Origen.tester.cycle_count + @cycles_per_half_period</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="54">
          <span class="hits">2</span>
          
          <code class="ruby">      def toggle</code>
        </li>
      
        <li class="covered" data-hits="104" data-linenumber="55">
          <span class="hits">104</span>
          
          <code class="ruby">        @owner.toggle</code>
        </li>
      
        <li class="covered" data-hits="104" data-linenumber="56">
          <span class="hits">104</span>
          
          <code class="ruby">        @last_edge = Origen.tester.cycle_count</code>
        </li>
      
        <li class="covered" data-hits="104" data-linenumber="57">
          <span class="hits">104</span>
          
          <code class="ruby">        @next_edge = Origen.tester.cycle_count + @cycles_per_half_period</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="60">
          <span class="hits">2</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="62">
          <span class="hits">2</span>
          
          <code class="ruby">      def update_half_period(options = {})</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="63">
          <span class="hits">138</span>
          
          <code class="ruby">        old_cycles_per_half_period = @cycles_per_half_period</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="64">
          <span class="hits">138</span>
          
          <code class="ruby">        options = { cycles: 0,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">                    period_in_s: 0, period_in_ms: 0, period_in_us: 0, period_in_ns: 0,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">                    frequency_in_hz: 0, frequency_in_khz: 0, frequency_in_mhz: 0,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">                    freq_in_hz: 0, freq_in_khz: 0, freq_in_mhz: 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">                  }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="70">
          <span class="hits">138</span>
          
          <code class="ruby">        cycles = 0</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="71">
          <span class="hits">138</span>
          
          <code class="ruby">        cycles += options[:cycles]</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="72">
          <span class="hits">138</span>
          
          <code class="ruby">        cycles += s_to_cycles(options[:period_in_s])</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="73">
          <span class="hits">138</span>
          
          <code class="ruby">        cycles += ms_to_cycles(options[:period_in_ms])</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="74">
          <span class="hits">138</span>
          
          <code class="ruby">        cycles += us_to_cycles(options[:period_in_us])</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="75">
          <span class="hits">138</span>
          
          <code class="ruby">        cycles += ns_to_cycles(options[:period_in_ns])</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="76">
          <span class="hits">138</span>
          
          <code class="ruby">        cycles += hz_to_cycles(options[:frequency_in_hz])</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="77">
          <span class="hits">138</span>
          
          <code class="ruby">        cycles += khz_to_cycles(options[:frequency_in_khz])</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="78">
          <span class="hits">138</span>
          
          <code class="ruby">        cycles += mhz_to_cycles(options[:frequency_in_mhz])</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="79">
          <span class="hits">138</span>
          
          <code class="ruby">        cycles += hz_to_cycles(options[:freq_in_hz])</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="80">
          <span class="hits">138</span>
          
          <code class="ruby">        cycles += khz_to_cycles(options[:freq_in_khz])</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="81">
          <span class="hits">138</span>
          
          <code class="ruby">        cycles += mhz_to_cycles(options[:freq_in_mhz])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="83">
          <span class="hits">138</span>
          
          <code class="ruby">        @cycles_per_half_period = cycles / 2</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="84">
          <span class="hits">138</span>
          
          <code class="ruby">        @ns_per_half_period = cycles * Origen.tester.current_period_in_ns</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="85">
          <span class="hits">138</span>
          
          <code class="ruby">        @cycles_per_half_period == old_cycles_per_half_period</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="88">
          <span class="hits">2</span>
          
          <code class="ruby">      def s_to_cycles(time) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="89">
          <span class="hits">138</span>
          
          <code class="ruby">        ((time.to_f) * 1000 * 1000 * 1000 / Origen.tester.current_period_in_ns).to_int</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="92">
          <span class="hits">2</span>
          
          <code class="ruby">      def ms_to_cycles(time) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="140" data-linenumber="93">
          <span class="hits">140</span>
          
          <code class="ruby">        ((time.to_f) * 1000 * 1000 / Origen.tester.current_period_in_ns).to_int</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="96">
          <span class="hits">2</span>
          
          <code class="ruby">      def us_to_cycles(time) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="140" data-linenumber="97">
          <span class="hits">140</span>
          
          <code class="ruby">        ((time.to_f * 1000) / Origen.tester.current_period_in_ns).to_int</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="100">
          <span class="hits">2</span>
          
          <code class="ruby">      def ns_to_cycles(time) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="138" data-linenumber="101">
          <span class="hits">138</span>
          
          <code class="ruby">        (time.to_f / Origen.tester.current_period_in_ns).to_int</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="104">
          <span class="hits">2</span>
          
          <code class="ruby">      def hz_to_cycles(freq) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="276" data-linenumber="105">
          <span class="hits">276</span>
          
          <code class="ruby">        (freq == 0) ? freq : s_to_cycles(1 / freq.to_f)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="108">
          <span class="hits">2</span>
          
          <code class="ruby">      def khz_to_cycles(freq) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="276" data-linenumber="109">
          <span class="hits">276</span>
          
          <code class="ruby">        (freq == 0) ? freq : ms_to_cycles(1 / freq.to_f)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="112">
          <span class="hits">2</span>
          
          <code class="ruby">      def mhz_to_cycles(freq) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="276" data-linenumber="113">
          <span class="hits">276</span>
          
          <code class="ruby">        (freq == 0) ? freq : us_to_cycles(1 / freq.to_f)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="116">
          <span class="hits">2</span>
          
          <code class="ruby">      def update_required?(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">        options[:cycles] ||</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="118">
          <span class="hits">9</span>
          
          <code class="ruby">          options[:period_in_s] || options[:period_in_ms] || options[:period_in_us] || options[:period_in_ns]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="119">
          <span class="hits">9</span>
          
          <code class="ruby">        options[:frequency_in_hz] || options[:frequency_in_khz] || options[:frequency_in_mhz] ||</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">          options[:freq_in_hz] || options[:freq_in_khz] || options[:freq_in_mhz]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="69a0276238b962c5356f731c8196c6b96aa4f1aa">
  <div class="header">
    <h3>lib/origen/pins/pin_collection.rb</h3>
    <h4><span class="yellow">89.31 %</span> covered</h4>
    <div>
      <b>262</b> relevant lines. 
      <span class="green"><b>234</b> lines covered</span> and
      <span class="red"><b>28</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # A class that is used to wrap collections of one or more pins. Anytime a group</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # of pins is fetched or returned by the Pin API it will be wrapped in a PinCollection.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">    class PinCollection</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">      include PinCommon</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">      include Enumerable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :endian</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :description</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="12">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize(owner, *pins)</code>
        </li>
      
        <li class="covered" data-hits="983" data-linenumber="13">
          <span class="hits">983</span>
          
          <code class="ruby">        options = pins.last.is_a?(Hash) ? pins.pop : {}</code>
        </li>
      
        <li class="covered" data-hits="983" data-linenumber="14">
          <span class="hits">983</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">          endian: :big</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="983" data-linenumber="17">
          <span class="hits">983</span>
          
          <code class="ruby">        @power_pins = options.delete(:power_pin) || options.delete(:power_pins)</code>
        </li>
      
        <li class="covered" data-hits="983" data-linenumber="18">
          <span class="hits">983</span>
          
          <code class="ruby">        @ground_pins = options.delete(:ground_pin) || options.delete(:ground_pins)</code>
        </li>
      
        <li class="covered" data-hits="983" data-linenumber="19">
          <span class="hits">983</span>
          
          <code class="ruby">        @virtual_pins = options.delete(:virtual_pin) || options.delete(:virtual_pins)</code>
        </li>
      
        <li class="covered" data-hits="983" data-linenumber="20">
          <span class="hits">983</span>
          
          <code class="ruby">        @endian = options[:endian]</code>
        </li>
      
        <li class="covered" data-hits="983" data-linenumber="21">
          <span class="hits">983</span>
          
          <code class="ruby">        @description = options[:description] || options[:desc]</code>
        </li>
      
        <li class="covered" data-hits="983" data-linenumber="22">
          <span class="hits">983</span>
          
          <code class="ruby">        @options = options</code>
        </li>
      
        <li class="covered" data-hits="983" data-linenumber="23">
          <span class="hits">983</span>
          
          <code class="ruby">        @store = []</code>
        </li>
      
        <li class="covered" data-hits="983" data-linenumber="24">
          <span class="hits">983</span>
          
          <code class="ruby">        pins.each_with_index do |pin, i|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="25">
          
          
          <code class="ruby">          @store[i] = pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="983" data-linenumber="27">
          <span class="hits">983</span>
          
          <code class="ruby">        on_init(owner, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      # Returns the value held by the pin group as a string formatted to the current tester&#39;s pattern syntax</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">      #   pin_group.drive_hi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">      #   pin_group.to_vector   # =&gt; &quot;11111111&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      #   pin_group.expect_lo</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      #   pin_group.to_vector   # =&gt; &quot;LLLLLLLL&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="38">
          <span class="hits">2</span>
          
          <code class="ruby">      def to_vector</code>
        </li>
      
        <li class="covered" data-hits="1696" data-linenumber="39">
          <span class="hits">1696</span>
          
          <code class="ruby">        return @vector_formatted_value if @vector_formatted_value</code>
        </li>
      
        <li class="covered" data-hits="197" data-linenumber="40">
          <span class="hits">197</span>
          
          <code class="ruby">        vals = map(&amp;:to_vector)</code>
        </li>
      
        <li class="covered" data-hits="197" data-linenumber="41">
          <span class="hits">197</span>
          
          <code class="ruby">        vals.reverse! if endian == :little</code>
        </li>
      
        <li class="covered" data-hits="197" data-linenumber="42">
          <span class="hits">197</span>
          
          <code class="ruby">        @vector_formatted_value = vals.join(&#39;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="46">
          <span class="hits">2</span>
          
          <code class="ruby">      def invalidate_vector_cache</code>
        </li>
      
        <li class="covered" data-hits="4385" data-linenumber="47">
          <span class="hits">4385</span>
          
          <code class="ruby">        @vector_formatted_value = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      # Set the values and states of the pin group&#39;s pins from a string formatted to the current tester&#39;s pattern syntax,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      # this is the opposite of the to_vector method</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">      #   pin_group.vector_formatted_value = &quot;LLLLLLLL&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">      #   pin_group[0].driving?                          # =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">      #   pin_group[0].value                             # =&gt; 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">      #   pin_group.vector_formatted_value = &quot;HHHH1111&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">      #   pin_group[0].driving?                          # =&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">      #   pin_group[0].value                             # =&gt; 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">      #   pin_group[7].driving?                          # =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">      #   pin_group[7].value                             # =&gt; 1</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="63">
          <span class="hits">2</span>
          
          <code class="ruby">      def vector_formatted_value=(val)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="64">
          <span class="hits">6</span>
          
          <code class="ruby">        unless @vector_formatted_value == val</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="65">
          <span class="hits">6</span>
          
          <code class="ruby">          unless val.size == size</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="66">
          
          
          <code class="ruby">            fail &#39;When setting vector_formatted_value on a pin group you must supply values for all pins!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="68">
          <span class="hits">6</span>
          
          <code class="ruby">          val.split(//).reverse.each_with_index do |val, i|</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="69">
          <span class="hits">26</span>
          
          <code class="ruby">            self[i].vector_formatted_value = val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="71">
          <span class="hits">6</span>
          
          <code class="ruby">          @vector_formatted_value = val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">      # Returns true if the pin collection contains power pins rather than regular pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="76">
          <span class="hits">2</span>
          
          <code class="ruby">      def power_pins?</code>
        </li>
      
        <li class="covered" data-hits="3359" data-linenumber="77">
          <span class="hits">3359</span>
          
          <code class="ruby">        @power_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">      # Returns true if the pin collection contains ground pins rather than regular pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="81">
          <span class="hits">2</span>
          
          <code class="ruby">      def ground_pins?</code>
        </li>
      
        <li class="covered" data-hits="3352" data-linenumber="82">
          <span class="hits">3352</span>
          
          <code class="ruby">        @ground_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">      # Returns true if the pin collection contains virtual pins rather than regular pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="86">
          <span class="hits">2</span>
          
          <code class="ruby">      def virtual_pins?</code>
        </li>
      
        <li class="covered" data-hits="3345" data-linenumber="87">
          <span class="hits">3345</span>
          
          <code class="ruby">        @virtual_pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="90">
          <span class="hits">2</span>
          
          <code class="ruby">      def id</code>
        </li>
      
        <li class="covered" data-hits="4482" data-linenumber="91">
          <span class="hits">4482</span>
          
          <code class="ruby">        @id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">      # Explicitly set the name of a pin group/collection</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="95">
          <span class="hits">2</span>
          
          <code class="ruby">      def name=(val)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="96">
          
          
          <code class="ruby">        @name = val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="99">
          <span class="hits">2</span>
          
          <code class="ruby">      def name</code>
        </li>
      
        <li class="covered" data-hits="1021" data-linenumber="100">
          <span class="hits">1021</span>
          
          <code class="ruby">        @name || id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">      # Overrides the regular Ruby array each to be endian aware. If the pin collection/group is</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">      # defined as big endian then this will yield the least significant pin first, otherwise for</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">      # little endian the most significant pin will come out first.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="106">
          <span class="hits">2</span>
          
          <code class="ruby">      def each</code>
        </li>
      
        <li class="covered" data-hits="7374" data-linenumber="107">
          <span class="hits">7374</span>
          
          <code class="ruby">        size.times do |i|</code>
        </li>
      
        <li class="covered" data-hits="54208" data-linenumber="108">
          <span class="hits">54208</span>
          
          <code class="ruby">          if endian == :big</code>
        </li>
      
        <li class="covered" data-hits="36075" data-linenumber="109">
          <span class="hits">36075</span>
          
          <code class="ruby">            yield @store[size - i - 1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="18133" data-linenumber="111">
          <span class="hits">18133</span>
          
          <code class="ruby">            yield @store[i]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="116">
          <span class="hits">2</span>
          
          <code class="ruby">      def size</code>
        </li>
      
        <li class="covered" data-hits="44732" data-linenumber="117">
          <span class="hits">44732</span>
          
          <code class="ruby">        @store.size</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="120">
          <span class="hits">2</span>
          
          <code class="ruby">      def [](*indexes)</code>
        </li>
      
        <li class="covered" data-hits="5959" data-linenumber="121">
          <span class="hits">5959</span>
          
          <code class="ruby">        if indexes.size &gt; 1 || indexes.first.is_a?(Range)</code>
        </li>
      
        <li class="covered" data-hits="164" data-linenumber="122">
          <span class="hits">164</span>
          
          <code class="ruby">          p = PinCollection.new(owner, @options)</code>
        </li>
      
        <li class="covered" data-hits="164" data-linenumber="123">
          <span class="hits">164</span>
          
          <code class="ruby">          expand_and_order(indexes).each do |index|</code>
        </li>
      
        <li class="covered" data-hits="652" data-linenumber="124">
          <span class="hits">652</span>
          
          <code class="ruby">            p &lt;&lt; @store[index]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="164" data-linenumber="126">
          <span class="hits">164</span>
          
          <code class="ruby">          p</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="5795" data-linenumber="128">
          <span class="hits">5795</span>
          
          <code class="ruby">          @store[indexes.first]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="132">
          <span class="hits">2</span>
          
          <code class="ruby">      def sort!(&amp;block)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="133">
          <span class="hits">2</span>
          
          <code class="ruby">        @store = sort(&amp;block)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="134">
          <span class="hits">2</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="137">
          <span class="hits">2</span>
          
          <code class="ruby">      def sort_by!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="138">
          
          
          <code class="ruby">        @store = sort_by</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="139">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="142">
          <span class="hits">2</span>
          
          <code class="ruby">      def []=(index, pin)</code>
        </li>
      
        <li class="covered" data-hits="2626" data-linenumber="143">
          <span class="hits">2626</span>
          
          <code class="ruby">        @store[index] = pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">      # Describe the pin group contents.  Default is to display pin.id but passing in</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">      # :name will display pin.name</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="148">
          <span class="hits">2</span>
          
          <code class="ruby">      def describe(display = :id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="149">
          
          
          <code class="ruby">        desc = [&#39;********************&#39;]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="150">
          
          
          <code class="ruby">        desc &lt;&lt; &quot;Group id: #{id}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="151">
          
          
          <code class="ruby">        desc &lt;&lt; &quot;\nDescription: #{description}&quot; if description</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="152">
          
          
          <code class="ruby">        desc &lt;&lt; &quot;\nEndianness: #{endian}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="154">
          
          
          <code class="ruby">        unless size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="155">
          
          
          <code class="ruby">          desc &lt;&lt; &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="156">
          
          
          <code class="ruby">          desc &lt;&lt; &#39;Pins&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="157">
          
          
          <code class="ruby">          desc &lt;&lt; &#39;-------&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="158">
          
          
          <code class="ruby">          if display == :id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="159">
          
          
          <code class="ruby">            desc &lt;&lt; map(&amp;:id).join(&#39;, &#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">          elsif display == :name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="161">
          
          
          <code class="ruby">            desc &lt;&lt; map(&amp;:name).join(&#39;, &#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="163">
          
          
          <code class="ruby">            fail &#39;Error: Argument options for describe method are :id and :name.  Default is :id&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="167">
          
          
          <code class="ruby">        desc &lt;&lt; &#39;********************&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="168">
          
          
          <code class="ruby">        puts desc.join(&quot;\n&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="171">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_pin(pin, _options = {})</code>
        </li>
      
        <li class="covered" data-hits="2686" data-linenumber="172">
          <span class="hits">2686</span>
          
          <code class="ruby">        if pin.is_a?(PinCollection)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">          # Need this to bypass the endianness aware iteration, the storing order</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby">          # is always the same. So can&#39;t use each and co here.</code>
        </li>
      
        <li class="covered" data-hits="148" data-linenumber="175">
          <span class="hits">148</span>
          
          <code class="ruby">          pin.size.times do |i|</code>
        </li>
      
        <li class="covered" data-hits="592" data-linenumber="176">
          <span class="hits">592</span>
          
          <code class="ruby">            pin[i].invalidate_group_cache</code>
        </li>
      
        <li class="covered" data-hits="592" data-linenumber="177">
          <span class="hits">592</span>
          
          <code class="ruby">            @store.push(pin[i])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby">          # Convert any named reference to a pin object</code>
        </li>
      
        <li class="covered" data-hits="2538" data-linenumber="181">
          <span class="hits">2538</span>
          
          <code class="ruby">          if power_pins?</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="182">
          <span class="hits">5</span>
          
          <code class="ruby">            pin = owner.power_pins(pin)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">          elsif ground_pins?</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="184">
          <span class="hits">5</span>
          
          <code class="ruby">            pin = owner.ground_pins(pin)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">          elsif virtual_pins?</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="186">
          <span class="hits">5</span>
          
          <code class="ruby">            pin = owner.virtual_pins(pin)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="2523" data-linenumber="188">
          <span class="hits">2523</span>
          
          <code class="ruby">            pin = owner.pins(pin)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="2538" data-linenumber="190">
          <span class="hits">2538</span>
          
          <code class="ruby">          if @store.include?(pin)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="191">
          
          
          <code class="ruby">            fail &quot;Pin collection #{id} already contains pin #{pin.id}!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="192">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="2538" data-linenumber="193">
          <span class="hits">2538</span>
          
          <code class="ruby">            pin.invalidate_group_cache</code>
        </li>
      
        <li class="covered" data-hits="2538" data-linenumber="194">
          <span class="hits">2538</span>
          
          <code class="ruby">            @store.push(pin)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="197">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="198">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :&lt;&lt;, :add_pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="200">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive(val)</code>
        </li>
      
        <li class="covered" data-hits="55" data-linenumber="201">
          <span class="hits">55</span>
          
          <code class="ruby">        val = val.data if val.respond_to?(&#39;data&#39;)</code>
        </li>
      
        <li class="covered" data-hits="55" data-linenumber="202">
          <span class="hits">55</span>
          
          <code class="ruby">        each_with_index do |pin, i|</code>
        </li>
      
        <li class="covered" data-hits="380" data-linenumber="203">
          <span class="hits">380</span>
          
          <code class="ruby">          pin.drive(val[size - i - 1])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="55" data-linenumber="205">
          <span class="hits">55</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="206">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="208">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive!(val)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="209">
          <span class="hits">9</span>
          
          <code class="ruby">        drive(val)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="210">
          <span class="hits">9</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby">      # Set all pins in pin group to drive 1&#39;s on future cycles</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="214">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_hi</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="215">
          <span class="hits">5</span>
          
          <code class="ruby">        each(&amp;:drive_hi)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="216">
          <span class="hits">5</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="219">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_hi!</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="220">
          <span class="hits">2</span>
          
          <code class="ruby">        drive_hi</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="221">
          <span class="hits">2</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">      # Set all pins in pin group to drive 0&#39;s on future cycles</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="225">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_lo</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="226">
          <span class="hits">6</span>
          
          <code class="ruby">        each(&amp;:drive_lo)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="227">
          <span class="hits">6</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="230">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_lo!</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="231">
          <span class="hits">2</span>
          
          <code class="ruby">        drive_lo</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="232">
          <span class="hits">2</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="233">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby">      # Set all pins in the pin group to drive a high voltage on future cycles (if the tester supports it).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">      # For example on a J750 high-voltage channel the pin state would be set to &quot;2&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="237">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_very_hi</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="238">
          <span class="hits">3</span>
          
          <code class="ruby">        each(&amp;:drive_very_hi)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="239">
          <span class="hits">3</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="240">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="242">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_very_hi!</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="243">
          <span class="hits">2</span>
          
          <code class="ruby">        drive_very_hi</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="244">
          <span class="hits">2</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="247">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_mem</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="248">
          <span class="hits">3</span>
          
          <code class="ruby">        each(&amp;:drive_mem)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="249">
          <span class="hits">3</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="251">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="252">
          <span class="hits">2</span>
          
          <code class="ruby">      def drive_mem!</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="253">
          <span class="hits">1</span>
          
          <code class="ruby">        drive_mem</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="254">
          <span class="hits">1</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="255">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="257">
          <span class="hits">2</span>
          
          <code class="ruby">      def expect_mem</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="258">
          <span class="hits">3</span>
          
          <code class="ruby">        each(&amp;:expect_mem)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="259">
          <span class="hits">3</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="262">
          <span class="hits">2</span>
          
          <code class="ruby">      def expect_mem!</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="263">
          <span class="hits">1</span>
          
          <code class="ruby">        expect_mem</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="264">
          <span class="hits">1</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="266">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby">      # Returns the data value held by the collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="268">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="269">
          
          
          <code class="ruby">      #   pins(:porta).write(0x55)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="270">
          
          
          <code class="ruby">      #   pins(:porta).data         #  =&gt; 0x55</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="271">
          <span class="hits">2</span>
          
          <code class="ruby">      def data</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="272">
          <span class="hits">27</span>
          
          <code class="ruby">        data = 0</code>
        </li>
      
        <li class="covered" data-hits="215" data-linenumber="273">
          <span class="hits">215</span>
          
          <code class="ruby">        each_with_index { |pin, i| data |= pin.data &lt;&lt; (size - i - 1) }</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="274">
          <span class="hits">27</span>
          
          <code class="ruby">        data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="276">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :val, :data</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="277">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :value, :data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="279">
          
          
          <code class="ruby">      # Returns the inverse of the data value held by the collection</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="280">
          <span class="hits">2</span>
          
          <code class="ruby">      def data_b</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby">        # (&amp; operation takes care of Bignum formatting issues)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="282">
          <span class="hits">4</span>
          
          <code class="ruby">        ~data &amp; ((1 &lt;&lt; size) - 1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="283">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="284">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="285">
          <span class="hits">2</span>
          
          <code class="ruby">      def toggle</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="286">
          <span class="hits">28</span>
          
          <code class="ruby">        each(&amp;:toggle)</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="287">
          <span class="hits">28</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="289">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="290">
          <span class="hits">2</span>
          
          <code class="ruby">      def toggle!</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="291">
          <span class="hits">6</span>
          
          <code class="ruby">        toggle</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="292">
          <span class="hits">6</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="293">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="294">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="295">
          <span class="hits">2</span>
          
          <code class="ruby">      def repeat_previous=(bool)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="296">
          <span class="hits">4</span>
          
          <code class="ruby">        each { |pin| pin.repeat_previous = bool }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="297">
          <span class="hits">1</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="300">
          
          
          <code class="ruby">      # Mark the (data) from all the pins in the pin group to be captured</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="301">
          <span class="hits">2</span>
          
          <code class="ruby">      def capture</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="302">
          <span class="hits">4</span>
          
          <code class="ruby">        each(&amp;:capture)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="303">
          <span class="hits">4</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="305">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :store, :capture</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="306">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="307">
          <span class="hits">2</span>
          
          <code class="ruby">      def capture!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="308">
          
          
          <code class="ruby">        capture</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="309">
          
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="311">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :store!, :capture!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="313">
          <span class="hits">2</span>
          
          <code class="ruby">      def restore_state</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="314">
          <span class="hits">2</span>
          
          <code class="ruby">        each(&amp;:save)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="315">
          <span class="hits">2</span>
          
          <code class="ruby">        yield</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="316">
          <span class="hits">2</span>
          
          <code class="ruby">        each(&amp;:restore)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="317">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="318">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="319">
          <span class="hits">2</span>
          
          <code class="ruby">      def id=(val)</code>
        </li>
      
        <li class="covered" data-hits="819" data-linenumber="320">
          <span class="hits">819</span>
          
          <code class="ruby">        @id = val.to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="321">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="322">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="323">
          <span class="hits">2</span>
          
          <code class="ruby">      def cycle</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="324">
          <span class="hits">34</span>
          
          <code class="ruby">        Origen.tester.cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="325">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="326">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="327">
          <span class="hits">2</span>
          
          <code class="ruby">      def assert(value, options = {})</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="328">
          <span class="hits">17</span>
          
          <code class="ruby">        each_with_index do |pin, i|</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="329">
          <span class="hits">120</span>
          
          <code class="ruby">          if !value.respond_to?(&#39;data&#39;)</code>
        </li>
      
        <li class="covered" data-hits="112" data-linenumber="330">
          <span class="hits">112</span>
          
          <code class="ruby">            pin.assert(value[size - i - 1], options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="331">
          
          
          <code class="ruby">          elsif value[size - i - 1].is_to_be_read?</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="332">
          <span class="hits">4</span>
          
          <code class="ruby">            pin.assert(value[size - i - 1].data, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="333">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="334">
          <span class="hits">4</span>
          
          <code class="ruby">            pin.dont_care</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="335">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="336">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="337">
          <span class="hits">17</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="338">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="339">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :compare, :assert</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="340">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :expect, :assert</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="341">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="342">
          <span class="hits">2</span>
          
          <code class="ruby">      def assert!(*args)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="343">
          <span class="hits">5</span>
          
          <code class="ruby">        assert(*args)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="344">
          <span class="hits">5</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="345">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="346">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :compare!, :assert!</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="347">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :expect!, :assert!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="348">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="349">
          
          
          <code class="ruby">      # Set all pins in the pin group to expect 1&#39;s on future cycles</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="350">
          <span class="hits">2</span>
          
          <code class="ruby">      def assert_hi(options = {})</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="351">
          <span class="hits">36</span>
          
          <code class="ruby">        each { |pin| pin.assert_hi(options) }</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="352">
          <span class="hits">4</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="353">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="354">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :expect_hi, :assert_hi</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="355">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :compare_hi, :assert_hi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="356">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="357">
          <span class="hits">2</span>
          
          <code class="ruby">      def assert_hi!</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="358">
          <span class="hits">2</span>
          
          <code class="ruby">        assert_hi</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="359">
          <span class="hits">2</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="360">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="361">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :expect_hi!, :assert_hi!</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="362">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :compare_hi!, :assert_hi!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="363">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="364">
          
          
          <code class="ruby">      # Set all pins in the pin group to expect 0&#39;s on future cycles</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="365">
          <span class="hits">2</span>
          
          <code class="ruby">      def assert_lo(options = {})</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="366">
          <span class="hits">36</span>
          
          <code class="ruby">        each { |pin| pin.assert_lo(options) }</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="367">
          <span class="hits">4</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="368">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="369">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :expect_lo, :assert_lo</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="370">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :compare_lo, :assert_lo</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="371">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="372">
          <span class="hits">2</span>
          
          <code class="ruby">      def assert_lo!</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="373">
          <span class="hits">2</span>
          
          <code class="ruby">        assert_lo</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="374">
          <span class="hits">2</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="375">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="376">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :expect_lo!, :assert_lo!</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="377">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :compare_lo!, :assert_lo!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="378">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby">      # Set all pins in the pin group to X on future cycles</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="380">
          <span class="hits">2</span>
          
          <code class="ruby">      def dont_care</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="381">
          <span class="hits">5</span>
          
          <code class="ruby">        each(&amp;:dont_care)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="382">
          <span class="hits">5</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="383">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="384">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="385">
          <span class="hits">2</span>
          
          <code class="ruby">      def dont_care!</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="386">
          <span class="hits">2</span>
          
          <code class="ruby">        dont_care</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="387">
          <span class="hits">2</span>
          
          <code class="ruby">        cycle</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="388">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="389">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="390">
          <span class="hits">2</span>
          
          <code class="ruby">      def inverted?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="391">
          <span class="hits">2</span>
          
          <code class="ruby">        all?(&amp;:inverted?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="392">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="393">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="394">
          <span class="hits">2</span>
          
          <code class="ruby">      def comparing?</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="395">
          <span class="hits">4</span>
          
          <code class="ruby">        all?(&amp;:comparing?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="396">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="397">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="398">
          <span class="hits">2</span>
          
          <code class="ruby">      def comparing_mem?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="399">
          <span class="hits">2</span>
          
          <code class="ruby">        all?(&amp;:comparing_mem?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="400">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="401">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="402">
          <span class="hits">2</span>
          
          <code class="ruby">      def driving?</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="403">
          <span class="hits">4</span>
          
          <code class="ruby">        all?(&amp;:driving?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="404">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="405">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="406">
          <span class="hits">2</span>
          
          <code class="ruby">      def driving_mem?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="407">
          <span class="hits">1</span>
          
          <code class="ruby">        all?(&amp;:driving_mem?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="408">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="409">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="410">
          <span class="hits">2</span>
          
          <code class="ruby">      def high_voltage?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="411">
          <span class="hits">1</span>
          
          <code class="ruby">        all?(&amp;:high_voltage?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="412">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="413">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="414">
          <span class="hits">2</span>
          
          <code class="ruby">      def repeat_previous?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="415">
          <span class="hits">2</span>
          
          <code class="ruby">        all?(&amp;:repeat_previous?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="416">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="417">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="418">
          
          
          <code class="ruby">      # Returns true if the (data) from the pin collection is marked to be captured</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="419">
          <span class="hits">2</span>
          
          <code class="ruby">      def to_be_captured?</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="420">
          <span class="hits">4</span>
          
          <code class="ruby">        all?(&amp;:to_be_captured?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="421">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="422">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :to_be_stored?, :to_be_captured?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="423">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :is_to_be_stored?, :to_be_captured?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="424">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :is_to_be_captured?, :to_be_captured?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="425">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="426">
          
          
          <code class="ruby">      # Deletes all occurrences of a pin in a pin group</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="427">
          <span class="hits">2</span>
          
          <code class="ruby">      def delete(p)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="428">
          <span class="hits">1</span>
          
          <code class="ruby">        @store.delete(p)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="429">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="430">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="431">
          
          
          <code class="ruby">      # Deletes the pin at a particular numeric index within the pin group</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="432">
          <span class="hits">2</span>
          
          <code class="ruby">      def delete_at(index)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="433">
          
          
          <code class="ruby">        @store.delete_at(index)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="434">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="435">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="436">
          <span class="hits">2</span>
          
          <code class="ruby">      def pins(nick = :id)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="437">
          <span class="hits">1</span>
          
          <code class="ruby">        Origen.deprecate &lt;&lt;-END</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="438">
          
          
          <code class="ruby">The PinCollection#pins method is deprecated, if you want to get a list of pin IDs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="439">
          
          
          <code class="ruby">in the given collection just do pins(:some_group).map(&amp;:id)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="440">
          
          
          <code class="ruby">Note that the pins method (confusingly) also does a sort, to replicate that:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="441">
          
          
          <code class="ruby">pins(:some_group).map(&amp;:id).sort</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="442">
          
          
          <code class="ruby">        END</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="443">
          <span class="hits">1</span>
          
          <code class="ruby">        if nick == :id</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="444">
          <span class="hits">1</span>
          
          <code class="ruby">          @store.map(&amp;:id).sort</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="445">
          
          
          <code class="ruby">        elsif nick == :name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="446">
          
          
          <code class="ruby">          @store.map(&amp;:name).sort</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="447">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="448">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="449">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="450">
          
          
          <code class="ruby">      # Delete this pingroup (self)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="451">
          <span class="hits">2</span>
          
          <code class="ruby">      def delete!</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="452">
          <span class="hits">1</span>
          
          <code class="ruby">        owner.delete_pin(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="453">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="454">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="455">
          <span class="hits">2</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="456">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="457">
          
          
          <code class="ruby">      # Cleans up indexed references to pins, e.g. makes these equal:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="458">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="459">
          
          
          <code class="ruby">      #   pins(:pb)[0,1,2,3]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="460">
          
          
          <code class="ruby">      #   pins(:pb)[3,2,1,0]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="461">
          
          
          <code class="ruby">      #   pins(:pb)[0..3]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="462">
          
          
          <code class="ruby">      #   pins(:pb)[3..0]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="463">
          <span class="hits">2</span>
          
          <code class="ruby">      def expand_and_order(*indexes)</code>
        </li>
      
        <li class="covered" data-hits="164" data-linenumber="464">
          <span class="hits">164</span>
          
          <code class="ruby">        ixs = []</code>
        </li>
      
        <li class="covered" data-hits="164" data-linenumber="465">
          <span class="hits">164</span>
          
          <code class="ruby">        indexes.flatten.each do |index|</code>
        </li>
      
        <li class="covered" data-hits="181" data-linenumber="466">
          <span class="hits">181</span>
          
          <code class="ruby">          if index.is_a?(Range)</code>
        </li>
      
        <li class="covered" data-hits="157" data-linenumber="467">
          <span class="hits">157</span>
          
          <code class="ruby">            if index.first &gt; index.last</code>
        </li>
      
        <li class="covered" data-hits="156" data-linenumber="468">
          <span class="hits">156</span>
          
          <code class="ruby">              ixs &lt;&lt; (index.last..index.first).to_a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="469">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="470">
          <span class="hits">1</span>
          
          <code class="ruby">              ixs &lt;&lt; index.to_a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="471">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="472">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="473">
          <span class="hits">24</span>
          
          <code class="ruby">            ixs &lt;&lt; index</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="474">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="475">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="164" data-linenumber="476">
          <span class="hits">164</span>
          
          <code class="ruby">        ixs.flatten.sort</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="477">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="478">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="479">
          <span class="hits">2</span>
          
          <code class="ruby">      def method_missing(method, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="480">
          
          
          <code class="ruby">        # Where the collection is only comprised of one pin delegate missing methods/attributes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="481">
          
          
          <code class="ruby">        # to that pin</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="482">
          <span class="hits">6</span>
          
          <code class="ruby">        if size == 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="483">
          
          
          <code class="ruby">          first.send(method, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="484">
          
          
          <code class="ruby">        # Send all assignment methods to all contained pins</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="485">
          <span class="hits">6</span>
          
          <code class="ruby">        elsif method.to_s =~ /.*=$/</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="486">
          <span class="hits">2</span>
          
          <code class="ruby">          each do |pin|</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="487">
          <span class="hits">16</span>
          
          <code class="ruby">            pin.send(method, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="488">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="489">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="490">
          <span class="hits">4</span>
          
          <code class="ruby">          if block_given?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="491">
          
          
          <code class="ruby">            fail &#39;Blocks are not currently supported by pin collections containing multiple pins!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="492">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="493">
          
          
          <code class="ruby">            # Allow getters if all pins are the same</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="494">
          <span class="hits">4</span>
          
          <code class="ruby">            ref = first.send(method, *args)</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="495">
          <span class="hits">27</span>
          
          <code class="ruby">            if self.all? { |pin| pin.send(method, *args) == ref }</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="496">
          <span class="hits">3</span>
          
          <code class="ruby">              ref</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="497">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="498">
          
          
          <code class="ruby">              fail &quot;The pins held by pin collection #{id} have different values for #{method}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="499">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="500">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="501">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="502">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="503">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="504">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="505">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="09498499b6455cd39f7f00eabbde5677b9c0322d">
  <div class="header">
    <h3>lib/origen/pins/pin_common.rb</h3>
    <h4><span class="yellow">82.61 %</span> covered</h4>
    <div>
      <b>92</b> relevant lines. 
      <span class="green"><b>76</b> lines covered</span> and
      <span class="red"><b>16</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Methods and attributes that are common to both pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # and pin groups</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">    module PinCommon</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">      extend ActiveSupport::Concern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">      included do</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="9">
          <span class="hits">4</span>
          
          <code class="ruby">        attr_reader :id</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="10">
          <span class="hits">4</span>
          
          <code class="ruby">        attr_reader :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">        # Returns a hash containing the chip packages that the given pin is present in and a metadata hash for each package option containing</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">        # information like the location or pin number for the given in pin in the given package.</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="13">
          <span class="hits">4</span>
          
          <code class="ruby">        attr_reader :packages</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">        # Returns a hash containing the chip modes that the given pin is present in and a metadata hash for storing any information</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">        # specific to the operation of the given pin in that mode</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="16">
          <span class="hits">4</span>
          
          <code class="ruby">        attr_reader :modes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">        # Returns a hash containing the chip configurations that the given pin is present in and a metadata hash for storing any information</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">        # specific to the operation of the given pin in that configuration</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="19">
          <span class="hits">4</span>
          
          <code class="ruby">        attr_reader :configurations</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">        # Override the chip-level configuration attribute for the given pin</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="21">
          <span class="hits">4</span>
          
          <code class="ruby">        attr_accessor :configuration</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">        # Free format field to store an description of the pin or pin group function</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="23">
          <span class="hits">4</span>
          
          <code class="ruby">        attr_accessor :description</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="26">
          <span class="hits">2</span>
          
          <code class="ruby">      def to_sym</code>
        </li>
      
        <li class="covered" data-hits="2420" data-linenumber="27">
          <span class="hits">2420</span>
          
          <code class="ruby">        id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      # The ID of a pin should be considered immutable, however internally it may be neccessary</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">      # to change the initial ID as the pins are initially setup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="34">
          <span class="hits">2</span>
          
          <code class="ruby">      def id=(val)</code>
        </li>
      
        <li class="covered" data-hits="2627" data-linenumber="35">
          <span class="hits">2627</span>
          
          <code class="ruby">        if @id &amp;&amp; @finalized</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="36">
          
          
          <code class="ruby">          fail &#39;The ID of a pin cannot be changed once it has been set!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="2627" data-linenumber="38">
          <span class="hits">2627</span>
          
          <code class="ruby">          @id = val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="43">
          <span class="hits">2</span>
          
          <code class="ruby">      def finalize</code>
        </li>
      
        <li class="covered" data-hits="4418" data-linenumber="44">
          <span class="hits">4418</span>
          
          <code class="ruby">        @finalized = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">      # Returns true if the pin is enabled by the current or given context</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="48">
          <span class="hits">2</span>
          
          <code class="ruby">      def enabled?(options = {})</code>
        </li>
      
        <li class="covered" data-hits="37316" data-linenumber="49">
          <span class="hits">37316</span>
          
          <code class="ruby">        present_in_package?(options) # &amp;&amp; enabled_in_mode?(options) &amp;&amp; enabled_in_configuration?(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">      # Returns true if the pin or pin group is present in the current package context.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">      # A pin is considered enabled when either no package context is set (all pins available</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">      # at die level), or when a package context is set and it matches one attached to the pin</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="56">
          <span class="hits">2</span>
          
          <code class="ruby">      def enabled_in_package?(options = {})</code>
        </li>
      
        <li class="covered" data-hits="37316" data-linenumber="57">
          <span class="hits">37316</span>
          
          <code class="ruby">        package = options[:package] || current_package_id</code>
        </li>
      
        <li class="covered" data-hits="37316" data-linenumber="58">
          <span class="hits">37316</span>
          
          <code class="ruby">        if package</code>
        </li>
      
        <li class="covered" data-hits="90" data-linenumber="59">
          <span class="hits">90</span>
          
          <code class="ruby">          !!(packages[:all] || packages[package])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="37226" data-linenumber="61">
          <span class="hits">37226</span>
          
          <code class="ruby">          true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="64">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :present_in_package?, :enabled_in_package?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">      # Returns true if the pin or pin group is present in the current mode context.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="67">
          <span class="hits">2</span>
          
          <code class="ruby">      def enabled_in_mode?(options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="68">
          
          
          <code class="ruby">        mode = options[:mode] || current_mode_id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="69">
          
          
          <code class="ruby">        if mode</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="70">
          
          
          <code class="ruby">          !!(modes[:all] || modes.empty? || modes[mode])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">        # If no mode is specified a pin is only available if it does not have a mode constraint</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="73">
          
          
          <code class="ruby">          !!(modes[:all] || modes.empty?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">      # Returns true if the pin or pin group is present in the current configuration context.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="78">
          <span class="hits">2</span>
          
          <code class="ruby">      def enabled_in_configuration?(options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="79">
          
          
          <code class="ruby">        config = options[:configuration] || current_configuration</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="80">
          
          
          <code class="ruby">        if config</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="81">
          
          
          <code class="ruby">          !!(configurations[:all] || configurations.empty? || configurations[config])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">        # If no configuration is specified a pin is only available if it does not have a configuration constraint</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="84">
          
          
          <code class="ruby">          !!(configurations[:all] || configurations.empty?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">      # Make the pin available in the given package, any options that are supplied will be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">      # saved as metadata associated with the given pin in that package</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="90">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_package(id, options = {})</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="91">
          <span class="hits">25</span>
          
          <code class="ruby">        packages[id] = options</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="92">
          <span class="hits">25</span>
          
          <code class="ruby">        if is_a?(Pin)</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="93">
          <span class="hits">17</span>
          
          <code class="ruby">          add_location(options[:location], package: id) if options[:location]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">      # Make the pin or pin group available in the given mode, any options that are supplied will be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">      # saved as metadata associated with the given pin in that mode</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="99">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_mode(id, options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="100">
          <span class="hits">2</span>
          
          <code class="ruby">        modes[id] = options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">      # Make the pin or pin group available in the given configuration, any options that are supplied will be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">      # saved as metadata associated with the given pin in that configuration</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="105">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_configuration(id, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="106">
          
          
          <code class="ruby">        configurations[id] = options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="109">
          <span class="hits">2</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="111">
          <span class="hits">2</span>
          
          <code class="ruby">      def on_init(owner, options = {})</code>
        </li>
      
        <li class="covered" data-hits="5401" data-linenumber="112">
          <span class="hits">5401</span>
          
          <code class="ruby">        @owner = owner</code>
        </li>
      
        <li class="covered" data-hits="5401" data-linenumber="113">
          <span class="hits">5401</span>
          
          <code class="ruby">        @description = options[:description]</code>
        </li>
      
        <li class="covered" data-hits="5401" data-linenumber="114">
          <span class="hits">5401</span>
          
          <code class="ruby">        apply_initial_scope(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">      # Returns the current configuration context for this pin/pin group, if a configuration has been</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">      # explicitly set on this pin that will be returned, otherwise the current chip-level configuration</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">      # context will be returned (nil if none is set)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="120">
          <span class="hits">2</span>
          
          <code class="ruby">      def current_configuration</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">        configuration || begin</code>
        </li>
      
        <li class="covered" data-hits="6608" data-linenumber="122">
          <span class="hits">6608</span>
          
          <code class="ruby">          if Origen.top_level</code>
        </li>
      
        <li class="covered" data-hits="6604" data-linenumber="123">
          <span class="hits">6604</span>
          
          <code class="ruby">            Origen.top_level.current_configuration</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="6610" data-linenumber="125">
          <span class="hits">6610</span>
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">      # Returns the current top-level package ID, nil if none is set.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="129">
          <span class="hits">2</span>
          
          <code class="ruby">      def current_package_id</code>
        </li>
      
        <li class="covered" data-hits="43853" data-linenumber="130">
          <span class="hits">43853</span>
          
          <code class="ruby">        if Origen.top_level &amp;&amp; Origen.top_level.current_package</code>
        </li>
      
        <li class="covered" data-hits="132" data-linenumber="131">
          <span class="hits">132</span>
          
          <code class="ruby">          Origen.top_level.current_package.id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">      # Returns the current top-level mode ID, nil if none is set.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="136">
          <span class="hits">2</span>
          
          <code class="ruby">      def current_mode_id</code>
        </li>
      
        <li class="covered" data-hits="7692" data-linenumber="137">
          <span class="hits">7692</span>
          
          <code class="ruby">        if Origen.top_level &amp;&amp; Origen.top_level.current_mode</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="138">
          <span class="hits">21</span>
          
          <code class="ruby">          Origen.top_level.current_mode.id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="142">
          <span class="hits">2</span>
          
          <code class="ruby">      def apply_initial_scope(options)</code>
        </li>
      
        <li class="covered" data-hits="5401" data-linenumber="143">
          <span class="hits">5401</span>
          
          <code class="ruby">        @packages = {}</code>
        </li>
      
        <li class="covered" data-hits="5401" data-linenumber="144">
          <span class="hits">5401</span>
          
          <code class="ruby">        @modes = {}</code>
        </li>
      
        <li class="covered" data-hits="5401" data-linenumber="145">
          <span class="hits">5401</span>
          
          <code class="ruby">        @configurations = {}</code>
        </li>
      
        <li class="covered" data-hits="5401" data-linenumber="146">
          <span class="hits">5401</span>
          
          <code class="ruby">        add_initial_packages(options)</code>
        </li>
      
        <li class="covered" data-hits="5401" data-linenumber="147">
          <span class="hits">5401</span>
          
          <code class="ruby">        add_initial_modes(options)</code>
        </li>
      
        <li class="covered" data-hits="5401" data-linenumber="148">
          <span class="hits">5401</span>
          
          <code class="ruby">        add_initial_configurations(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">      # Returns an array containing the package ids resolved from the given options or</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">      # the current top-level context</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="153">
          <span class="hits">2</span>
          
          <code class="ruby">      def resolve_packages(options = {})</code>
        </li>
      
        <li class="covered" data-hits="6575" data-linenumber="154">
          <span class="hits">6575</span>
          
          <code class="ruby">        [options.delete(:package) || options.delete(:packages) || current_package_id].flatten.compact</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby">      # Returns an array containing the mode ids resolved from the given options or</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">      # the current top-level context</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="159">
          <span class="hits">2</span>
          
          <code class="ruby">      def resolve_modes(options = {})</code>
        </li>
      
        <li class="covered" data-hits="6589" data-linenumber="160">
          <span class="hits">6589</span>
          
          <code class="ruby">        [options.delete(:mode) || options.delete(:modes) || current_mode_id].flatten.compact</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="161">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">      # Returns an array containing the configuration ids resolved from the given options or</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby">      # the current top-level context</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="165">
          <span class="hits">2</span>
          
          <code class="ruby">      def resolve_configurations(options = {})</code>
        </li>
      
        <li class="covered" data-hits="6589" data-linenumber="166">
          <span class="hits">6589</span>
          
          <code class="ruby">        [options.delete(:configuration) || options.delete(:configurations) || current_configuration].flatten.compact</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="169">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_initial_packages(options)</code>
        </li>
      
        <li class="covered" data-hits="5401" data-linenumber="170">
          <span class="hits">5401</span>
          
          <code class="ruby">        resolve_packages(options).each do |package|</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="171">
          <span class="hits">25</span>
          
          <code class="ruby">          if package.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="172">
          <span class="hits">1</span>
          
          <code class="ruby">            package.each do |id, attributes|</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="173">
          <span class="hits">1</span>
          
          <code class="ruby">              add_package(id, attributes)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="176">
          <span class="hits">24</span>
          
          <code class="ruby">            add_package(package)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="181">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_initial_modes(options)</code>
        </li>
      
        <li class="covered" data-hits="5401" data-linenumber="182">
          <span class="hits">5401</span>
          
          <code class="ruby">        resolve_modes(options).each do |mode|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="183">
          <span class="hits">2</span>
          
          <code class="ruby">          if mode.is_a?(Hash)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="184">
          
          
          <code class="ruby">            mode.each do |id, attributes|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="185">
          
          
          <code class="ruby">              add_mode(id, attributes)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="188">
          <span class="hits">2</span>
          
          <code class="ruby">            add_mode(mode)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="192">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="193">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_initial_configurations(options)</code>
        </li>
      
        <li class="covered" data-hits="5401" data-linenumber="194">
          <span class="hits">5401</span>
          
          <code class="ruby">        resolve_configurations(options).each do |config|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="195">
          
          
          <code class="ruby">          if config.is_a?(Hash)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="196">
          
          
          <code class="ruby">            config.each do |id, attributes|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="197">
          
          
          <code class="ruby">              add_configuration(id, attributes)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="200">
          
          
          <code class="ruby">            add_configuration(config)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="206">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="b5c6fc2cf027659144bf72d5696be365c913dafb">
  <div class="header">
    <h3>lib/origen/pins/power_pin.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>12</b> relevant lines. 
      <span class="green"><b>12</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    class PowerPin &lt; Pin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">      # Set the operating voltage for the pin, can be a single value or an array</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">      def voltage=(val)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">        @voltages = [val].flatten.uniq</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">      # Like voltages but if there is only one voltage known then it will be returned</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      # directly instead of being wrapped in an array.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">      # If no voltages are known this returns nil whereas voltages will return an</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      # empty array.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      # For more than one voltages present this behaves like an alias of voltages.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">      def voltage</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">        if voltages.size &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">          if voltages.size &gt; 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">            voltages</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">            voltages.first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      # Returns an array of known operating voltages for the given pin</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="25">
          <span class="hits">2</span>
          
          <code class="ruby">      def voltages</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="26">
          <span class="hits">7</span>
          
          <code class="ruby">        @voltages ||= []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="28205a53448dcbd9a80e317e5cc7c288fbdd80dc">
  <div class="header">
    <h3>lib/origen/pins/virtual_pin.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>5</b> relevant lines. 
      <span class="green"><b>5</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Pins</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    class VirtualPin &lt; Pin</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">      def type=(value)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">        @type = value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="6577354511c3194d9783d4e870a4f361a66dbbea">
  <div class="header">
    <h3>lib/origen/ports.rb</h3>
    <h4><span class="yellow">89.47 %</span> covered</h4>
    <div>
      <b>38</b> relevant lines. 
      <span class="green"><b>34</b> lines covered</span> and
      <span class="red"><b>4</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Ports</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Port,     &#39;origen/ports/port&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Section,  &#39;origen/ports/section&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :BitCollection,  &#39;origen/ports/bit_collection&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :PortCollection,  &#39;origen/ports/port_collection&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_port(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="9">
          <span class="hits">80</span>
          
          <code class="ruby">      p = Port.new(self, name, options)</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="10">
          <span class="hits">80</span>
          
          <code class="ruby">      if block_given?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">        p.send(:defining) do</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="12">
          <span class="hits">2</span>
          
          <code class="ruby">          yield p</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="15">
          <span class="hits">80</span>
          
          <code class="ruby">      _ports.add(name.to_s.symbolize, p)</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="16">
          <span class="hits">80</span>
          
          <code class="ruby">      p</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="19">
          <span class="hits">2</span>
          
          <code class="ruby">    def port(*args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="178" data-linenumber="20">
          <span class="hits">178</span>
          
          <code class="ruby">      if block_given?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="21">
          <span class="hits">2</span>
          
          <code class="ruby">        add_port(*args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="176" data-linenumber="23">
          <span class="hits">176</span>
          
          <code class="ruby">        if args.first</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="24">
          <span class="hits">101</span>
          
          <code class="ruby">          if has_port?(args.first)</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="25">
          <span class="hits">24</span>
          
          <code class="ruby">            _ports[args.first.to_s.symbolize]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="77" data-linenumber="27">
          <span class="hits">77</span>
          
          <code class="ruby">            if _initialized?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="28">
          
          
          <code class="ruby">              puts &quot;Model #{self.class} does not have a port named #{args.first}, the available ports are:&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="29">
          
          
          <code class="ruby">              puts _ports.keys</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="30">
          
          
          <code class="ruby">              puts</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="31">
          
          
          <code class="ruby">              fail &#39;Missing port error&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">              # Assume this is a pin definition while the model is still initializing</code>
        </li>
      
        <li class="covered" data-hits="77" data-linenumber="34">
          <span class="hits">77</span>
          
          <code class="ruby">              add_port(*args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="75" data-linenumber="38">
          <span class="hits">75</span>
          
          <code class="ruby">          _ports</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="42">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :ports, :port</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="44">
          <span class="hits">2</span>
          
          <code class="ruby">    def has_port?(name)</code>
        </li>
      
        <li class="covered" data-hits="14520" data-linenumber="45">
          <span class="hits">14520</span>
          
          <code class="ruby">      _ports.key?(name.to_s.symbolize)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="48">
          <span class="hits">2</span>
          
          <code class="ruby">    def method_missing(method, *args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="1091" data-linenumber="49">
          <span class="hits">1091</span>
          
          <code class="ruby">      if _ports.key?(method.to_s.symbolize)</code>
        </li>
      
        <li class="covered" data-hits="936" data-linenumber="50">
          <span class="hits">936</span>
          
          <code class="ruby">        _ports[method.to_s.symbolize]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="155" data-linenumber="52">
          <span class="hits">155</span>
          
          <code class="ruby">        super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="56">
          <span class="hits">2</span>
          
          <code class="ruby">    def respond_to?(sym, include_all = false)</code>
        </li>
      
        <li class="covered" data-hits="14378" data-linenumber="57">
          <span class="hits">14378</span>
          
          <code class="ruby">      has_port?(sym) || super(sym)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="60">
          <span class="hits">2</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="62">
          <span class="hits">2</span>
          
          <code class="ruby">    def _ports</code>
        </li>
      
        <li class="covered" data-hits="16726" data-linenumber="63">
          <span class="hits">16726</span>
          
          <code class="ruby">      @_ports ||= PortCollection.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="a74a379d6f3da623d14abbcd5ce6ebd9df882635">
  <div class="header">
    <h3>lib/origen/ports/bit_collection.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>3</b> relevant lines. 
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Ports</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    class BitCollection &lt; Registers::BitCollection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="133170f65c9dfa26e3debb760811d300184af0ba">
  <div class="header">
    <h3>lib/origen/ports/port.rb</h3>
    <h4><span class="yellow">89.61 %</span> covered</h4>
    <div>
      <b>77</b> relevant lines. 
      <span class="green"><b>69</b> lines covered</span> and
      <span class="red"><b>8</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Ports</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    class Port</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">      include Netlist::Connectable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :size</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :parent</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :id</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :name, :id</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :owner, :parent</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(parent, id, options = {})</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="15">
          <span class="hits">80</span>
          
          <code class="ruby">        @size = options[:size] || 1</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="16">
          <span class="hits">80</span>
          
          <code class="ruby">        @parent = parent</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="17">
          <span class="hits">80</span>
          
          <code class="ruby">        @id = id</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="18">
          <span class="hits">80</span>
          
          <code class="ruby">        @type = options[:type]</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="19">
          <span class="hits">80</span>
          
          <code class="ruby">        @bit_names = {}.with_indifferent_access</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">      def inspect</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">        &quot;&lt;#{self.class}:#{object_id} id:#{id} path:#{path}&gt;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">      def describe(options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="27">
          <span class="hits">2</span>
          
          <code class="ruby">        desc = [&#39;********************&#39;]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="28">
          <span class="hits">2</span>
          
          <code class="ruby">        desc &lt;&lt; &quot;Port id:   #{id}&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="29">
          <span class="hits">2</span>
          
          <code class="ruby">        desc &lt;&lt; &quot;Port path: #{path}&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="30">
          <span class="hits">2</span>
          
          <code class="ruby">        desc &lt;&lt; &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="31">
          <span class="hits">2</span>
          
          <code class="ruby">        desc &lt;&lt; &#39;Connections&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="32">
          <span class="hits">2</span>
          
          <code class="ruby">        desc &lt;&lt; &#39;-----------&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="33">
          <span class="hits">2</span>
          
          <code class="ruby">        desc &lt;&lt; &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="34">
          <span class="hits">2</span>
          
          <code class="ruby">        table = netlist.table</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="35">
          <span class="hits">2</span>
          
          <code class="ruby">        ((size - 1)..0).to_a.each do |i|</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="36">
          <span class="hits">16</span>
          
          <code class="ruby">          if table[path]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">            c = [table[path][&#39;*&#39;], table[path][i]].flatten.compact.map { |n| n.is_a?(Proc) ? &#39;Proc&#39; : n }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="38">
          
          
          <code class="ruby">            desc &lt;&lt; &quot;#{i} - #{c.shift}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="39">
          
          
          <code class="ruby">            c.each do |n|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="40">
          
          
          <code class="ruby">              desc &lt;&lt; &quot;     - #{n}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="43">
          <span class="hits">16</span>
          
          <code class="ruby">            desc &lt;&lt; &quot;#{i} - none&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="46">
          <span class="hits">2</span>
          
          <code class="ruby">        desc &lt;&lt; &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="48">
          <span class="hits">2</span>
          
          <code class="ruby">        if options[:return]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">          desc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="51">
          <span class="hits">1</span>
          
          <code class="ruby">          puts desc.join(&quot;\n&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="55">
          <span class="hits">1</span>
          
          <code class="ruby">      def path</code>
        </li>
      
        <li class="covered" data-hits="517" data-linenumber="56">
          <span class="hits">517</span>
          
          <code class="ruby">        if parent.path.empty?</code>
        </li>
      
        <li class="covered" data-hits="159" data-linenumber="57">
          <span class="hits">159</span>
          
          <code class="ruby">          id.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="358" data-linenumber="59">
          <span class="hits">358</span>
          
          <code class="ruby">          &quot;#{parent.path}.#{id}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="63">
          <span class="hits">1</span>
          
          <code class="ruby">      def bits(index, name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="64">
          <span class="hits">2</span>
          
          <code class="ruby">        if @defining</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="65">
          <span class="hits">2</span>
          
          <code class="ruby">          @bit_names[name] = index</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="67">
          
          
          <code class="ruby">          fail &#39;Cannot add additional port bits once the port definition is complete&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="71">
          <span class="hits">1</span>
          
          <code class="ruby">      def drive(value = nil, options = {})</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="72">
          <span class="hits">25</span>
          
          <code class="ruby">        value, options = nil, value if value.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="73">
          <span class="hits">25</span>
          
          <code class="ruby">        if options[:index]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="74">
          <span class="hits">2</span>
          
          <code class="ruby">          if options[:index].is_a?(Fixnum)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="75">
          <span class="hits">2</span>
          
          <code class="ruby">            drive_values[options[:index]] = value ? value[0] : nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="77">
          
          
          <code class="ruby">            options[:index].to_a.each do |i|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="78">
          
          
          <code class="ruby">              drive_values[i] = value ? value[i] : nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="82">
          <span class="hits">23</span>
          
          <code class="ruby">          size.times do |i|</code>
        </li>
      
        <li class="covered" data-hits="65" data-linenumber="83">
          <span class="hits">65</span>
          
          <code class="ruby">            drive_values[i] = value ? value[i] : nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="86">
          <span class="hits">25</span>
          
          <code class="ruby">        @drive_value = value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="89">
          <span class="hits">1</span>
          
          <code class="ruby">      def drive_values</code>
        </li>
      
        <li class="covered" data-hits="1004" data-linenumber="90">
          <span class="hits">1004</span>
          
          <code class="ruby">        @drive_values ||= Array.new(size)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="93">
          <span class="hits">1</span>
          
          <code class="ruby">      def to_section</code>
        </li>
      
        <li class="covered" data-hits="171" data-linenumber="94">
          <span class="hits">171</span>
          
          <code class="ruby">        Section.new(self, (size - 1)..0)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="97">
          <span class="hits">1</span>
          
          <code class="ruby">      def method_missing(method, *args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="174" data-linenumber="98">
          <span class="hits">174</span>
          
          <code class="ruby">        if @bit_names.key?(method)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="99">
          <span class="hits">3</span>
          
          <code class="ruby">          Section.new(self, @bit_names[method])</code>
        </li>
      
        <li class="covered" data-hits="171" data-linenumber="100">
          <span class="hits">171</span>
          
          <code class="ruby">        elsif BitCollection.instance_methods.include?(method)</code>
        </li>
      
        <li class="covered" data-hits="171" data-linenumber="101">
          <span class="hits">171</span>
          
          <code class="ruby">          to_bc.send(method, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="103">
          
          
          <code class="ruby">          super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="107">
          <span class="hits">1</span>
          
          <code class="ruby">      def respond_to?(*args)</code>
        </li>
      
        <li class="covered" data-hits="228" data-linenumber="108">
          <span class="hits">228</span>
          
          <code class="ruby">        @bit_names.key?(args.first) || super(*args) ||</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">          BitCollection.instance_methods.include?(args.first)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="112">
          <span class="hits">1</span>
          
          <code class="ruby">      def [](val)</code>
        </li>
      
        <li class="covered" data-hits="772" data-linenumber="113">
          <span class="hits">772</span>
          
          <code class="ruby">        Section.new(self, val)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="116">
          <span class="hits">1</span>
          
          <code class="ruby">      def to_bc</code>
        </li>
      
        <li class="covered" data-hits="171" data-linenumber="117">
          <span class="hits">171</span>
          
          <code class="ruby">        to_section.to_bc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="120">
          <span class="hits">1</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="122">
          <span class="hits">1</span>
          
          <code class="ruby">      def defining</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="123">
          <span class="hits">2</span>
          
          <code class="ruby">        @defining = true</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="124">
          <span class="hits">2</span>
          
          <code class="ruby">        yield</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="125">
          <span class="hits">2</span>
          
          <code class="ruby">        @defining = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="69d1b158ac6d5197c0bbf9ec3c890b4c3d2b5f79">
  <div class="header">
    <h3>lib/origen/ports/port_collection.rb</h3>
    <h4><span class="green">90.91 %</span> covered</h4>
    <div>
      <b>11</b> relevant lines. 
      <span class="green"><b>10</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Ports</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    class PortCollection &lt; ::Hash</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">      def add(name, port)</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="5">
          <span class="hits">80</span>
          
          <code class="ruby">        self[name] = port</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="6">
          <span class="hits">80</span>
          
          <code class="ruby">        by_type[port.type] ||= []</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="7">
          <span class="hits">80</span>
          
          <code class="ruby">        by_type[port.type] &lt;&lt; port</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">      def by_type</code>
        </li>
      
        <li class="covered" data-hits="161" data-linenumber="11">
          <span class="hits">161</span>
          
          <code class="ruby">        @by_type ||= {}.with_indifferent_access</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">      def inspect</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="15">
          
          
          <code class="ruby">        map { |k, _v| k }.inspect</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="281417ea977ec3e668b542106cf17865c1100769">
  <div class="header">
    <h3>lib/origen/ports/section.rb</h3>
    <h4><span class="green">90.63 %</span> covered</h4>
    <div>
      <b>64</b> relevant lines. 
      <span class="green"><b>58</b> lines covered</span> and
      <span class="red"><b>6</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Ports</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    class Section</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">      include Netlist::Connectable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :port</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :index</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(port, index)</code>
        </li>
      
        <li class="covered" data-hits="949" data-linenumber="10">
          <span class="hits">949</span>
          
          <code class="ruby">        @port = port</code>
        </li>
      
        <li class="covered" data-hits="949" data-linenumber="11">
          <span class="hits">949</span>
          
          <code class="ruby">        @index = index</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">      def size</code>
        </li>
      
        <li class="covered" data-hits="939" data-linenumber="15">
          <span class="hits">939</span>
          
          <code class="ruby">        size_of(index)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">      def path</code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="19">
          <span class="hits">63</span>
          
          <code class="ruby">        if index.is_a?(Range)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="20">
          <span class="hits">5</span>
          
          <code class="ruby">          port.path + &quot;[#{index.first}:#{index.last}]&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="58" data-linenumber="22">
          <span class="hits">58</span>
          
          <code class="ruby">          port.path + &quot;[#{index}]&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">      def parent</code>
        </li>
      
        <li class="covered" data-hits="364" data-linenumber="27">
          <span class="hits">364</span>
          
          <code class="ruby">        port.parent</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :owner, :parent</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">      def id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="32">
          
          
          <code class="ruby">        port.id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">      def drive(value = nil)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="36">
          <span class="hits">2</span>
          
          <code class="ruby">        port.drive(value, index: index)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">      def drive_value</code>
        </li>
      
        <li class="covered" data-hits="937" data-linenumber="40">
          <span class="hits">937</span>
          
          <code class="ruby">        if size == 1</code>
        </li>
      
        <li class="covered" data-hits="937" data-linenumber="41">
          <span class="hits">937</span>
          
          <code class="ruby">          port.drive_values[index]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="43">
          
          
          <code class="ruby">          fail &#39;drive_value is only supported for a single bit port section&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">      def [](index)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="48">
          <span class="hits">3</span>
          
          <code class="ruby">        Section.new(port, align_to_port(index))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="51">
          <span class="hits">1</span>
          
          <code class="ruby">      def respond_to?(*args)</code>
        </li>
      
        <li class="covered" data-hits="182" data-linenumber="52">
          <span class="hits">182</span>
          
          <code class="ruby">        super(*args) || BitCollection.instance_methods.include?(args.first)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="55">
          <span class="hits">1</span>
          
          <code class="ruby">      def method_missing(method, *args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="56">
          <span class="hits">9</span>
          
          <code class="ruby">        if BitCollection.instance_methods.include?(method)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="57">
          <span class="hits">9</span>
          
          <code class="ruby">          to_bc.send(method, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="59">
          
          
          <code class="ruby">          super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="63">
          <span class="hits">1</span>
          
          <code class="ruby">      def to_bc</code>
        </li>
      
        <li class="covered" data-hits="180" data-linenumber="64">
          <span class="hits">180</span>
          
          <code class="ruby">        b = BitCollection.new(port, port.id)</code>
        </li>
      
        <li class="covered" data-hits="180" data-linenumber="65">
          <span class="hits">180</span>
          
          <code class="ruby">        indexes = index.respond_to?(:to_a) ? index.to_a : [index]</code>
        </li>
      
        <li class="covered" data-hits="180" data-linenumber="66">
          <span class="hits">180</span>
          
          <code class="ruby">        indexes.reverse_each do |i|</code>
        </li>
      
        <li class="covered" data-hits="385" data-linenumber="67">
          <span class="hits">385</span>
          
          <code class="ruby">          b &lt;&lt; netlist.data_bit(port.path, i)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="180" data-linenumber="69">
          <span class="hits">180</span>
          
          <code class="ruby">        b</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="72">
          <span class="hits">1</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="74">
          <span class="hits">1</span>
          
          <code class="ruby">      def size_of(index)</code>
        </li>
      
        <li class="covered" data-hits="941" data-linenumber="75">
          <span class="hits">941</span>
          
          <code class="ruby">        if index.is_a?(Range)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="76">
          <span class="hits">3</span>
          
          <code class="ruby">          (index.first - index.last).abs + 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="938" data-linenumber="78">
          <span class="hits">938</span>
          
          <code class="ruby">          1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="82">
          <span class="hits">1</span>
          
          <code class="ruby">      def align_to_port(val)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="83">
          <span class="hits">3</span>
          
          <code class="ruby">        if val.is_a?(Range)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="84">
          <span class="hits">2</span>
          
          <code class="ruby">          nlsb = lsb + val.last</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="85">
          <span class="hits">2</span>
          
          <code class="ruby">          nmsb = nlsb + size_of(val) - 1</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="86">
          <span class="hits">2</span>
          
          <code class="ruby">          out_of_range(val) if nmsb &gt; msb</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="87">
          <span class="hits">2</span>
          
          <code class="ruby">          i = nmsb..nlsb</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="89">
          <span class="hits">1</span>
          
          <code class="ruby">          i = lsb + val</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="90">
          <span class="hits">1</span>
          
          <code class="ruby">          out_of_range(val) if i &gt; msb</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="92">
          <span class="hits">3</span>
          
          <code class="ruby">        i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="95">
          <span class="hits">1</span>
          
          <code class="ruby">      def out_of_range(val)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="96">
          
          
          <code class="ruby">        fail &quot;Requested section index (#{val}) is out of range for a port section of size #{size}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="99">
          <span class="hits">1</span>
          
          <code class="ruby">      def msb</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="100">
          <span class="hits">3</span>
          
          <code class="ruby">        if index.is_a?(Range)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="101">
          <span class="hits">3</span>
          
          <code class="ruby">          index.first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="103">
          
          
          <code class="ruby">          index</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="107">
          <span class="hits">1</span>
          
          <code class="ruby">      def lsb</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="108">
          <span class="hits">3</span>
          
          <code class="ruby">        if index.is_a?(Range)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="109">
          <span class="hits">3</span>
          
          <code class="ruby">          index.last</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="111">
          
          
          <code class="ruby">          index</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="4dd68ea3c45cf6c6aa7bbb708fa7de0055cada3a">
  <div class="header">
    <h3>lib/origen/registers.rb</h3>
    <h4><span class="red">77.51 %</span> covered</h4>
    <div>
      <b>338</b> relevant lines. 
      <span class="green"><b>262</b> lines covered</span> and
      <span class="red"><b>76</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">  # Origen provides a powerful register class which you are encouraged to use when</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">  # you wish to interact with a silicon register (or RAM location).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">  # By interacting with the register on silicon through the register API your</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">  # pattern will automatically track silicon state, so you can set and forget</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">  # bits in the patgen the same as you would do with a physical register.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">  # Include this module to add registers to your block, then use the macros described</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">  # below to instantiate register objects</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">  #   include Origen::Registers</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">  module Registers</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">    extend ActiveSupport::Concern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="13">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Container,     &#39;origen/registers/container&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Reg,           &#39;origen/registers/reg&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Bit,           &#39;origen/registers/bit&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :BitCollection, &#39;origen/registers/bit_collection&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :RegCollection, &#39;origen/registers/reg_collection&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Domain,        &#39;origen/registers/domain&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="20">
          <span class="hits">2</span>
          
          <code class="ruby">    included do</code>
        </li>
      
        <li class="covered" data-hits="68" data-linenumber="21">
          <span class="hits">68</span>
          
          <code class="ruby">      include Origen::ModelInitializer</code>
        </li>
      
        <li class="covered" data-hits="68" data-linenumber="22">
          <span class="hits">68</span>
          
          <code class="ruby">      include Origen::SubBlocks</code>
        </li>
      
        <li class="covered" data-hits="68" data-linenumber="23">
          <span class="hits">68</span>
          
          <code class="ruby">      include Origen::Callbacks  # Required for global register reset</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="68" data-linenumber="25">
          <span class="hits">68</span>
          
          <code class="ruby">      attr_accessor :owner</code>
        </li>
      
        <li class="covered" data-hits="68" data-linenumber="26">
          <span class="hits">68</span>
          
          <code class="ruby">      attr_accessor :name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="29">
          <span class="hits">2</span>
          
          <code class="ruby">    def method_missing(method, *args, &amp;block) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="191" data-linenumber="30">
          <span class="hits">191</span>
          
          <code class="ruby">      if method[-1] == &#39;!&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="31">
          
          
          <code class="ruby">        bang = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="32">
          
          
          <code class="ruby">        method = method.to_s.chop.to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="191" data-linenumber="34">
          <span class="hits">191</span>
          
          <code class="ruby">      if _registers.key?(method)</code>
        </li>
      
        <li class="covered" data-hits="191" data-linenumber="35">
          <span class="hits">191</span>
          
          <code class="ruby">        r = reg(method)</code>
        </li>
      
        <li class="covered" data-hits="191" data-linenumber="36">
          <span class="hits">191</span>
          
          <code class="ruby">        r.sync if bang</code>
        </li>
      
        <li class="covered" data-hits="191" data-linenumber="37">
          <span class="hits">191</span>
          
          <code class="ruby">        r</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="39">
          
          
          <code class="ruby">        super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="43">
          <span class="hits">2</span>
          
          <code class="ruby">    def respond_to?(sym) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="18981" data-linenumber="44">
          <span class="hits">18981</span>
          
          <code class="ruby">      if sym[-1] == &#39;!&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="45">
          <span class="hits">1</span>
          
          <code class="ruby">        r = sym.to_s.chop.to_sym</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="46">
          <span class="hits">1</span>
          
          <code class="ruby">        _registers.key?(r) || super(sym)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="18980" data-linenumber="48">
          <span class="hits">18980</span>
          
          <code class="ruby">        _registers.key?(sym) || super(sym)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="52">
          <span class="hits">2</span>
          
          <code class="ruby">    def delete_registers</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="53">
          
          
          <code class="ruby">      @_registers = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">    # Class methods of this module</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="57">
          <span class="hits">2</span>
          
          <code class="ruby">    class &lt;&lt; self</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="58">
          <span class="hits">2</span>
          
          <code class="ruby">      @@reg_metadata = {}</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="59">
          <span class="hits">2</span>
          
          <code class="ruby">      @@bit_metadata = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">      # Returns a lookup table containing all custom register metadata</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">      # defined by objects in an application</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="64">
          <span class="hits">2</span>
          
          <code class="ruby">      def reg_metadata</code>
        </li>
      
        <li class="covered" data-hits="7584" data-linenumber="65">
          <span class="hits">7584</span>
          
          <code class="ruby">        @@reg_metadata ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">      # Returns a lookup table containing all custom bit metadata</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">      # defined by objects in an application</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="71">
          <span class="hits">2</span>
          
          <code class="ruby">      def bit_metadata</code>
        </li>
      
        <li class="covered" data-hits="39791" data-linenumber="72">
          <span class="hits">39791</span>
          
          <code class="ruby">        @@bit_metadata ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">      # Can be called to add app specific meta data to all registers</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="76">
          <span class="hits">2</span>
          
          <code class="ruby">      def default_reg_metadata</code>
        </li>
      
        <li class="covered" data-hits="2525" data-linenumber="77">
          <span class="hits">2525</span>
          
          <code class="ruby">        Origen::Registers.reg_metadata[:global] ||= {}</code>
        </li>
      
        <li class="covered" data-hits="2525" data-linenumber="78">
          <span class="hits">2525</span>
          
          <code class="ruby">        if block_given?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="79">
          <span class="hits">1</span>
          
          <code class="ruby">          collector = Collector.new</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="80">
          <span class="hits">1</span>
          
          <code class="ruby">          yield collector</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="81">
          <span class="hits">1</span>
          
          <code class="ruby">          Origen::Registers.reg_metadata[:global].merge!(collector.store)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2525" data-linenumber="83">
          <span class="hits">2525</span>
          
          <code class="ruby">        Origen::Registers.reg_metadata[:global]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">      # An alias for default_reg_metadata</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="87">
          <span class="hits">2</span>
          
          <code class="ruby">      def default_reg_meta_data(*args, &amp;block)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="88">
          
          
          <code class="ruby">        default_reg_metadata(*args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">      # Can be called to add app specific meta data to all bits</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="92">
          <span class="hits">2</span>
          
          <code class="ruby">      def default_bit_metadata</code>
        </li>
      
        <li class="covered" data-hits="13361" data-linenumber="93">
          <span class="hits">13361</span>
          
          <code class="ruby">        Origen::Registers.bit_metadata[:global] ||= {}</code>
        </li>
      
        <li class="covered" data-hits="13361" data-linenumber="94">
          <span class="hits">13361</span>
          
          <code class="ruby">        if block_given?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="95">
          <span class="hits">1</span>
          
          <code class="ruby">          collector = Collector.new</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="96">
          <span class="hits">1</span>
          
          <code class="ruby">          yield collector</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="97">
          <span class="hits">1</span>
          
          <code class="ruby">          Origen::Registers.bit_metadata[:global].merge!(collector.store)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="13361" data-linenumber="99">
          <span class="hits">13361</span>
          
          <code class="ruby">        Origen::Registers.bit_metadata[:global]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">      # An alias for default_bit_metadata</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="103">
          <span class="hits">2</span>
          
          <code class="ruby">      def default_bit_meta_data(*args, &amp;block)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="104">
          
          
          <code class="ruby">        default_bit_metadata(*args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">    # All register objects are stored here, but they should be accessed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">    # via the _reg method to ensure that feature scoping is applied</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">    # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="112">
          <span class="hits">2</span>
          
          <code class="ruby">    def _registers</code>
        </li>
      
        <li class="covered" data-hits="21863" data-linenumber="113">
          <span class="hits">21863</span>
          
          <code class="ruby">      @_registers ||= RegCollection.new(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">    # Instantiating registers can be quite expensive, this object is a placeholder</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">    # for a register and will transform into one automatically when it is required to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">    # (i.e. whenever a register method is called on it).</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="119">
          <span class="hits">2</span>
          
          <code class="ruby">    class Placeholder</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="120">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :name, :owner, :attributes, :feature</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="121">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :id, :name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="123">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize(owner, name, attributes)</code>
        </li>
      
        <li class="covered" data-hits="550" data-linenumber="124">
          <span class="hits">550</span>
          
          <code class="ruby">        @owner = owner</code>
        </li>
      
        <li class="covered" data-hits="550" data-linenumber="125">
          <span class="hits">550</span>
          
          <code class="ruby">        @name = name</code>
        </li>
      
        <li class="covered" data-hits="550" data-linenumber="126">
          <span class="hits">550</span>
          
          <code class="ruby">        @attributes = attributes</code>
        </li>
      
        <li class="covered" data-hits="550" data-linenumber="127">
          <span class="hits">550</span>
          
          <code class="ruby">        @feature = attributes[:feature] if attributes.key?(:feature)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">      # Make this appear like a reg to any application code</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="131">
          <span class="hits">2</span>
          
          <code class="ruby">      def is_a?(klass)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">        klass == Origen::Registers::Reg ||</code>
        </li>
      
        <li class="covered" data-hits="148" data-linenumber="133">
          <span class="hits">148</span>
          
          <code class="ruby">          klass == self.class</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">      # Returns true if the register is enabled by a feature of owner.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="137">
          <span class="hits">2</span>
          
          <code class="ruby">      def enabled?</code>
        </li>
      
        <li class="covered" data-hits="671" data-linenumber="138">
          <span class="hits">671</span>
          
          <code class="ruby">        if feature</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="139">
          <span class="hits">16</span>
          
          <code class="ruby">          value = false</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="140">
          <span class="hits">16</span>
          
          <code class="ruby">          current_owner = self</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="141">
          <span class="hits">16</span>
          
          <code class="ruby">          if feature.class == Array</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="142">
          
          
          <code class="ruby">            feature.each do |f|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="143">
          
          
          <code class="ruby">              current_owner = self</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="144">
          
          
          <code class="ruby">              loop do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="145">
          
          
          <code class="ruby">                if current_owner.respond_to?(:owner)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="146">
          
          
          <code class="ruby">                  current_owner = current_owner.owner</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="147">
          
          
          <code class="ruby">                  if current_owner.respond_to?(:has_feature?)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="148">
          
          
          <code class="ruby">                    if current_owner.has_feature?(f)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="149">
          
          
          <code class="ruby">                      value = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="150">
          
          
          <code class="ruby">                      break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby">                else # if current owner does not have a owner</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="154">
          
          
          <code class="ruby">                  value = false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="155">
          
          
          <code class="ruby">                  break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby">              end # loop end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="158">
          
          
          <code class="ruby">              unless value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">                if Origen.top_level &amp;&amp; \</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="160">
          
          
          <code class="ruby">                   Origen.top_level.respond_to?(:has_feature?) &amp;&amp; \</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="161">
          
          
          <code class="ruby">                   Origen.top_level.has_feature?(f)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="162">
          
          
          <code class="ruby">                  value = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="163">
          
          
          <code class="ruby">                  unless value</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="164">
          
          
          <code class="ruby">                    break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="168">
          
          
          <code class="ruby">              unless value</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="169">
          
          
          <code class="ruby">                break # break if feature not found and return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">            end # iterated through all features in array</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="172">
          
          
          <code class="ruby">            return value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">          else # if feature.class != Array</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="174">
          <span class="hits">16</span>
          
          <code class="ruby">            loop do</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="175">
          <span class="hits">26</span>
          
          <code class="ruby">              if current_owner.respond_to?(:owner)</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="176">
          <span class="hits">21</span>
          
          <code class="ruby">                current_owner = current_owner.owner</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="177">
          <span class="hits">21</span>
          
          <code class="ruby">                if current_owner.respond_to?(:has_feature?)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="178">
          <span class="hits">16</span>
          
          <code class="ruby">                  if current_owner.has_feature?(feature)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="179">
          <span class="hits">11</span>
          
          <code class="ruby">                    value = true</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="180">
          <span class="hits">11</span>
          
          <code class="ruby">                    break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">              else # if current owner does not have a owner</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="184">
          <span class="hits">5</span>
          
          <code class="ruby">                value = false</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="185">
          <span class="hits">5</span>
          
          <code class="ruby">                break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">            end # loop end</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="188">
          <span class="hits">16</span>
          
          <code class="ruby">            unless value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">              if Origen.top_level &amp;&amp; \</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="190">
          <span class="hits">5</span>
          
          <code class="ruby">                 Origen.top_level.respond_to?(:has_feature?) &amp;&amp; \</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">                 Origen.top_level.has_feature?(feature)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="192">
          
          
          <code class="ruby">                value = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="195">
          <span class="hits">16</span>
          
          <code class="ruby">            return value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="197">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="655" data-linenumber="198">
          <span class="hits">655</span>
          
          <code class="ruby">          return true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">      # Returns true if the register is constrained by the given/any feature</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="203">
          <span class="hits">2</span>
          
          <code class="ruby">      def enabled_by_feature?(name = nil)</code>
        </li>
      
        <li class="covered" data-hits="44" data-linenumber="204">
          <span class="hits">44</span>
          
          <code class="ruby">        if !name</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="205">
          <span class="hits">25</span>
          
          <code class="ruby">          !!feature</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="206">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="207">
          <span class="hits">19</span>
          
          <code class="ruby">          if feature.class == Array</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="208">
          
          
          <code class="ruby">            feature.each do |f|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="209">
          
          
          <code class="ruby">              if f == name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="210">
          
          
          <code class="ruby">                return true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="213">
          
          
          <code class="ruby">            return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="215">
          <span class="hits">19</span>
          
          <code class="ruby">            return feature == name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="216">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="219">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :has_feature_constraint?, :enabled_by_feature?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby">      # Make it look like a reg in the console to avoid confusion</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="222">
          <span class="hits">2</span>
          
          <code class="ruby">      def inspect</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="223">
          <span class="hits">5</span>
          
          <code class="ruby">        materialize.inspect</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="226">
          
          
          <code class="ruby">      # Don&#39;t need to act on reset, an un-materialized reg is by default already reset</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="227">
          <span class="hits">2</span>
          
          <code class="ruby">      def reset</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="230">
          <span class="hits">2</span>
          
          <code class="ruby">      def freeze</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="231">
          
          
          <code class="ruby">        materialize.freeze</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="232">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="233">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="234">
          <span class="hits">2</span>
          
          <code class="ruby">      def method_missing(method, *args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="147" data-linenumber="235">
          <span class="hits">147</span>
          
          <code class="ruby">        materialize.send(method, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="238">
          <span class="hits">2</span>
          
          <code class="ruby">      def respond_to?(method)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="239">
          <span class="hits">22</span>
          
          <code class="ruby">        materialize.respond_to?(method)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="240">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="242">
          <span class="hits">2</span>
          
          <code class="ruby">      def materialize</code>
        </li>
      
        <li class="covered" data-hits="177" data-linenumber="243">
          <span class="hits">177</span>
          
          <code class="ruby">        owner.instantiate_reg(name, attributes)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="246">
          <span class="hits">2</span>
          
          <code class="ruby">      def clone</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="247">
          <span class="hits">2</span>
          
          <code class="ruby">        materialize.clone</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="248">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="250">
          <span class="hits">2</span>
          
          <code class="ruby">      def dup</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="251">
          <span class="hits">1</span>
          
          <code class="ruby">        materialize.dup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="254">
          <span class="hits">2</span>
          
          <code class="ruby">      def contains_bits?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="255">
          
          
          <code class="ruby">        true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="257">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="259">
          <span class="hits">2</span>
          
          <code class="ruby">    class Collector</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="260">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :store</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="262">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="263">
          <span class="hits">6</span>
          
          <code class="ruby">        @store = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="266">
          <span class="hits">2</span>
          
          <code class="ruby">      def method_missing(method, *args, &amp;_block)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="267">
          <span class="hits">15</span>
          
          <code class="ruby">        @store[method.to_s.sub(&#39;=&#39;, &#39;&#39;).to_sym] = args.first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="268">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="269">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="270">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="271">
          
          
          <code class="ruby">    # Returns true if the given object is one of the recognized Origen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby">    # bit containers (bit collection, reg or container).</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="273">
          <span class="hits">2</span>
          
          <code class="ruby">    def contains_bits?(obj)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="274">
          
          
          <code class="ruby">      obj.respond_to?(:contains_bits?) &amp;&amp; obj.contains_bits?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="276">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby">    # Returns true if the given object is an Origen bit</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="278">
          <span class="hits">2</span>
          
          <code class="ruby">    def is_a_bit?(obj)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="279">
          
          
          <code class="ruby">      obj.is_a?(Origen::Registers::Bit)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="280">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby">    # Add a register.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="283">
          
          
          <code class="ruby">    # When adding a register you must supply a name, an address, size in bits, and bit definitions,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="284">
          
          
          <code class="ruby">    # any bits that are not declared will be filled with dummy bit objects that are</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="285">
          
          
          <code class="ruby">    # not writable and will read back as 0.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="286">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="287">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">    #             Name    Address  Size   Bit Definitions</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="289">
          
          
          <code class="ruby">    #   add_reg :control,  0x00,    16    :mode    =&gt; { :pos =&gt; 8, :bits =&gt; 8 },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">    #                                     # Leaving out bits does 1 by default</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="291">
          
          
          <code class="ruby">    #                                     :launch  =&gt; { :pos =&gt; 6 },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="292">
          
          
          <code class="ruby">    #                                     # The default reset state is 0, specify an alternative..</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="293">
          
          
          <code class="ruby">    #                                     :status  =&gt; { :pos =&gt; 4, :bits =&gt; 2, :res =&gt; 0b11 },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="294">
          
          
          <code class="ruby">    #                                     :fail    =&gt; { :pos =&gt; 2 },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="295">
          
          
          <code class="ruby">    #                                     :done    =&gt; { :pos =&gt; 0 }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="296">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="297">
          
          
          <code class="ruby">    # Can be called on any object to add a register to it</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="298">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_reg(id, address, size = nil, bit_info = {}, &amp;_block)</code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="299">
          <span class="hits">551</span>
          
          <code class="ruby">      if address.is_a?(Hash)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="300">
          
          
          <code class="ruby">        fail &#39;add_reg requires the address to be supplied as the 2nd argument, e.g. add_reg :my_reg, 0x1000&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="301">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="302">
          <span class="hits">551</span>
          
          <code class="ruby">      size, bit_info = nil, size if size.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="303">
          <span class="hits">551</span>
          
          <code class="ruby">      size ||= bit_info.delete(:size) || 32</code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="304">
          <span class="hits">551</span>
          
          <code class="ruby">      description = bit_info.delete(:description)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="305">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="306">
          <span class="hits">551</span>
          
          <code class="ruby">      local_vars = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="308">
          <span class="hits">551</span>
          
          <code class="ruby">      Reg::REG_LEVEL_ATTRIBUTES.each do |attribute, meta|</code>
        </li>
      
        <li class="covered" data-hits="3306" data-linenumber="309">
          <span class="hits">3306</span>
          
          <code class="ruby">        aliases = [attribute]</code>
        </li>
      
        <li class="covered" data-hits="3306" data-linenumber="310">
          <span class="hits">3306</span>
          
          <code class="ruby">        aliases += meta[:aliases] if meta[:aliases]</code>
        </li>
      
        <li class="covered" data-hits="8265" data-linenumber="311">
          <span class="hits">8265</span>
          
          <code class="ruby">        aliases.each { |_a| local_vars[attribute] = bit_info.delete(attribute) if bit_info.key?(attribute) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="313">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="314">
          <span class="hits">551</span>
          
          <code class="ruby">      local_vars[:reset] ||= :memory if local_vars[:memory]</code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="315">
          <span class="hits">551</span>
          
          <code class="ruby">      @min_reg_address ||= address</code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="316">
          <span class="hits">551</span>
          
          <code class="ruby">      @max_reg_address ||= address</code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="317">
          <span class="hits">551</span>
          
          <code class="ruby">      @min_reg_address = address if address &lt; @min_reg_address</code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="318">
          <span class="hits">551</span>
          
          <code class="ruby">      if address &gt; @max_reg_address</code>
        </li>
      
        <li class="covered" data-hits="194" data-linenumber="319">
          <span class="hits">194</span>
          
          <code class="ruby">        @max_address_reg_size = size</code>
        </li>
      
        <li class="covered" data-hits="194" data-linenumber="320">
          <span class="hits">194</span>
          
          <code class="ruby">        @max_reg_address = address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="321">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="322">
          <span class="hits">551</span>
          
          <code class="ruby">      @reg_define_file ||= define_file(caller[0])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="323">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="324">
          <span class="hits">551</span>
          
          <code class="ruby">      if block_given?</code>
        </li>
      
        <li class="covered" data-hits="510" data-linenumber="325">
          <span class="hits">510</span>
          
          <code class="ruby">        @new_reg_attrs = { meta: bit_info }</code>
        </li>
      
        <li class="covered" data-hits="510" data-linenumber="326">
          <span class="hits">510</span>
          
          <code class="ruby">        yield self</code>
        </li>
      
        <li class="covered" data-hits="510" data-linenumber="327">
          <span class="hits">510</span>
          
          <code class="ruby">        bit_info = @new_reg_attrs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="328">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="329">
          
          
          <code class="ruby">        # If no block given then init with all writable bits unless bit_info has</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="330">
          
          
          <code class="ruby">        # been supplied</code>
        </li>
      
        <li class="covered" data-hits="53" data-linenumber="331">
          <span class="hits">53</span>
          
          <code class="ruby">        unless bit_info.any? { |k, v| v.is_a?(Hash) &amp;&amp; v[:pos] }</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="332">
          <span class="hits">34</span>
          
          <code class="ruby">          bit_info = { d: { pos: 0, bits: size }.merge(bit_info) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="333">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="335">
          <span class="hits">551</span>
          
          <code class="ruby">      if _registers[id] &amp;&amp; Origen.config.strict_errors</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="336">
          <span class="hits">1</span>
          
          <code class="ruby">        puts &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="337">
          <span class="hits">1</span>
          
          <code class="ruby">        puts &quot;Add register error, you have already added a register named #{id} to #{self.class}&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="338">
          <span class="hits">1</span>
          
          <code class="ruby">        puts &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="339">
          <span class="hits">1</span>
          
          <code class="ruby">        fail &#39;Duplicate register error!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="340">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="550" data-linenumber="341">
          <span class="hits">550</span>
          
          <code class="ruby">        attributes = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="342">
          
          
          <code class="ruby">          define_file: @reg_define_file,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="343">
          
          
          <code class="ruby">          address:     address,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="344">
          
          
          <code class="ruby">          size:        size,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="345">
          
          
          <code class="ruby">          bit_info:    bit_info,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="346">
          
          
          <code class="ruby">          description: description</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="347">
          
          
          <code class="ruby">        }</code>
        </li>
      
        <li class="covered" data-hits="550" data-linenumber="348">
          <span class="hits">550</span>
          
          <code class="ruby">        Reg::REG_LEVEL_ATTRIBUTES.each do |attribute, _meta|</code>
        </li>
      
        <li class="covered" data-hits="3300" data-linenumber="349">
          <span class="hits">3300</span>
          
          <code class="ruby">          attributes[attribute] = local_vars[attribute]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="350">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="550" data-linenumber="351">
          <span class="hits">550</span>
          
          <code class="ruby">        _registers[id] = Placeholder.new(self, id, attributes)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="352">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="550" data-linenumber="353">
          <span class="hits">550</span>
          
          <code class="ruby">      @reg_define_file = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="354">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="355">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="356">
          
          
          <code class="ruby">    # Delete an existing register</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="357">
          <span class="hits">2</span>
          
          <code class="ruby">    def del_reg(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="358">
          
          
          <code class="ruby">      _registers.delete(id)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="359">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="360">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="361">
          
          
          <code class="ruby">    # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="362">
          <span class="hits">2</span>
          
          <code class="ruby">    def define_file(file)</code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="363">
          <span class="hits">551</span>
          
          <code class="ruby">      if Origen.running_on_windows?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="364">
          
          
          <code class="ruby">        fields = file.split(&#39;:&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="365">
          
          
          <code class="ruby">        &quot;#{fields[0]}:#{fields[1]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="366">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="551" data-linenumber="367">
          <span class="hits">551</span>
          
          <code class="ruby">        file.split(&#39;:&#39;).first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="368">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="369">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="370">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="371">
          
          
          <code class="ruby">    # Called within an add_reg block to define bits</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="372">
          <span class="hits">2</span>
          
          <code class="ruby">    def bit(index, name, attrs = {})</code>
        </li>
      
        <li class="covered" data-hits="1804" data-linenumber="373">
          <span class="hits">1804</span>
          
          <code class="ruby">      if index.is_a?(Range)</code>
        </li>
      
        <li class="covered" data-hits="813" data-linenumber="374">
          <span class="hits">813</span>
          
          <code class="ruby">        msb = index.first</code>
        </li>
      
        <li class="covered" data-hits="813" data-linenumber="375">
          <span class="hits">813</span>
          
          <code class="ruby">        lsb = index.last</code>
        </li>
      
        <li class="covered" data-hits="813" data-linenumber="376">
          <span class="hits">813</span>
          
          <code class="ruby">        msb, lsb = lsb, msb if lsb &gt; msb</code>
        </li>
      
        <li class="covered" data-hits="813" data-linenumber="377">
          <span class="hits">813</span>
          
          <code class="ruby">        pos = lsb</code>
        </li>
      
        <li class="covered" data-hits="813" data-linenumber="378">
          <span class="hits">813</span>
          
          <code class="ruby">        bits = (msb - lsb).abs + 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby">      elsif index.is_a?(Numeric)</code>
        </li>
      
        <li class="covered" data-hits="991" data-linenumber="380">
          <span class="hits">991</span>
          
          <code class="ruby">        pos = index</code>
        </li>
      
        <li class="covered" data-hits="991" data-linenumber="381">
          <span class="hits">991</span>
          
          <code class="ruby">        bits = 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="382">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="383">
          
          
          <code class="ruby">        fail &#39;No valid index supplied when defining a register bit!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="384">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="385">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="386">
          
          
          <code class="ruby">      # Traynor, this could be more elegant</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="387">
          
          
          <code class="ruby">      # its just a dirty way to make the value of the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="388">
          
          
          <code class="ruby">      # key in @new_reg_atts hash array (ie name) tie to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="389">
          
          
          <code class="ruby">      # a value that is an array of hashes describing</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="390">
          
          
          <code class="ruby">      # data for each scrambled bit</code>
        </li>
      
        <li class="covered" data-hits="1804" data-linenumber="391">
          <span class="hits">1804</span>
          
          <code class="ruby">      attrs = attrs.merge(pos: pos, bits: bits)</code>
        </li>
      
        <li class="covered" data-hits="1804" data-linenumber="392">
          <span class="hits">1804</span>
          
          <code class="ruby">      temparray = []</code>
        </li>
      
        <li class="covered" data-hits="1804" data-linenumber="393">
          <span class="hits">1804</span>
          
          <code class="ruby">      if @new_reg_attrs[name].nil?</code>
        </li>
      
        <li class="covered" data-hits="1779" data-linenumber="394">
          <span class="hits">1779</span>
          
          <code class="ruby">        @new_reg_attrs[name] = attrs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="395">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="396">
          <span class="hits">25</span>
          
          <code class="ruby">        if @new_reg_attrs[name].is_a? Hash</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="397">
          <span class="hits">13</span>
          
          <code class="ruby">          temparray = temparray.push(@new_reg_attrs[name])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="398">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="399">
          <span class="hits">12</span>
          
          <code class="ruby">          temparray = @new_reg_attrs[name]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="400">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="401">
          <span class="hits">25</span>
          
          <code class="ruby">        temparray = temparray.push(attrs)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="402">
          
          
          <code class="ruby">        # added the sort so that the order the registers bits is described is not important</code>
        </li>
      
        <li class="covered" data-hits="68" data-linenumber="403">
          <span class="hits">68</span>
          
          <code class="ruby">        @new_reg_attrs[name] = temparray.sort { |a, b| b[:pos] &lt;=&gt; a[:pos] }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="404">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="405">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="406">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="407">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="408">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :bits, :bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="409">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="410">
          
          
          <code class="ruby">    # Can be called to add app specific meta data that is isolated to all registers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="411">
          
          
          <code class="ruby">    # defined within a given class</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="412">
          <span class="hits">2</span>
          
          <code class="ruby">    def default_reg_metadata</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="413">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen::Registers.reg_metadata[self.class] ||= {}</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="414">
          <span class="hits">3</span>
          
          <code class="ruby">      if block_given?</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="415">
          <span class="hits">3</span>
          
          <code class="ruby">        collector = Collector.new</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="416">
          <span class="hits">3</span>
          
          <code class="ruby">        yield collector</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="417">
          <span class="hits">3</span>
          
          <code class="ruby">        Origen::Registers.reg_metadata[self.class].merge!(collector.store)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="418">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="419">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen::Registers.reg_metadata[self.class]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="420">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="421">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :default_reg_meta_data, :default_reg_metadata</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="422">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="423">
          <span class="hits">2</span>
          
          <code class="ruby">    def default_bit_metadata</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="424">
          <span class="hits">1</span>
          
          <code class="ruby">      Origen::Registers.bit_metadata[self.class] ||= {}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="425">
          <span class="hits">1</span>
          
          <code class="ruby">      if block_given?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="426">
          <span class="hits">1</span>
          
          <code class="ruby">        collector = Collector.new</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="427">
          <span class="hits">1</span>
          
          <code class="ruby">        yield collector</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="428">
          <span class="hits">1</span>
          
          <code class="ruby">        Origen::Registers.bit_metadata[self.class].merge!(collector.store)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="429">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="430">
          <span class="hits">1</span>
          
          <code class="ruby">      Origen::Registers.bit_metadata[self.class]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="431">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="432">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :default_bit_meta_data, :default_bit_metadata</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="433">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="434">
          
          
          <code class="ruby">    # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="435">
          <span class="hits">2</span>
          
          <code class="ruby">    def instantiate_reg(id, attrs)</code>
        </li>
      
        <li class="covered" data-hits="177" data-linenumber="436">
          <span class="hits">177</span>
          
          <code class="ruby">      return _registers[id] unless _registers[id].is_a?(Origen::Registers::Placeholder)</code>
        </li>
      
        <li class="covered" data-hits="147" data-linenumber="437">
          <span class="hits">147</span>
          
          <code class="ruby">      attributes = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="438">
          
          
          <code class="ruby">        define_file: attrs[:define_file],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="439">
          
          
          <code class="ruby">        description: attrs[:description]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="440">
          
          
          <code class="ruby">      }</code>
        </li>
      
        <li class="covered" data-hits="147" data-linenumber="441">
          <span class="hits">147</span>
          
          <code class="ruby">      Reg::REG_LEVEL_ATTRIBUTES.each do |attribute, _meta|</code>
        </li>
      
        <li class="covered" data-hits="882" data-linenumber="442">
          <span class="hits">882</span>
          
          <code class="ruby">        attributes[attribute] = attrs[attribute]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="443">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="147" data-linenumber="444">
          <span class="hits">147</span>
          
          <code class="ruby">      _registers[id] = Reg.new(self, attrs[:address], attrs[:size], id,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="445">
          
          
          <code class="ruby">                               attrs[:bit_info].merge(attributes))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="446">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="447">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="448">
          <span class="hits">2</span>
          
          <code class="ruby">    def add_reg32(id, address, args = {}, &amp;block)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="449">
          
          
          <code class="ruby">      @reg_define_file = define_file(caller[0])</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="450">
          
          
          <code class="ruby">      add_reg(id, address, 32, args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="451">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="452">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="453">
          
          
          <code class="ruby">    # Returns the lowest address of all registers that have been added</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="454">
          <span class="hits">2</span>
          
          <code class="ruby">    def min_reg_address</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="455">
          
          
          <code class="ruby">      @min_reg_address || 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="456">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="457">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="458">
          
          
          <code class="ruby">    # Returns the highest address of all registers that have been added</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="459">
          <span class="hits">2</span>
          
          <code class="ruby">    def max_reg_address</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="460">
          
          
          <code class="ruby">      @max_reg_address || 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="461">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="462">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="463">
          
          
          <code class="ruby">    # Returns the size (in bits) of the register with the highest address,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="464">
          
          
          <code class="ruby">    # can be useful in combination with max_reg_address to work out the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="465">
          
          
          <code class="ruby">    # range of addresses containing registers</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="466">
          <span class="hits">2</span>
          
          <code class="ruby">    def max_address_reg_size</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="467">
          
          
          <code class="ruby">      @max_address_reg_size</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="468">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="469">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="470">
          
          
          <code class="ruby">    # Resets all registers</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="471">
          <span class="hits">2</span>
          
          <code class="ruby">    def reset_registers</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="472">
          <span class="hits">6</span>
          
          <code class="ruby">      regs.each { |_name, reg| reg.reset }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="473">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="474">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="475">
          
          
          <code class="ruby">    # Returns true if the object contains a register matching the given name</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="476">
          <span class="hits">2</span>
          
          <code class="ruby">    def has_reg?(name, params = {})</code>
        </li>
      
        <li class="covered" data-hits="636" data-linenumber="477">
          <span class="hits">636</span>
          
          <code class="ruby">      params = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="478">
          
          
          <code class="ruby">        test_for_true_false: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="479">
          
          
          <code class="ruby">      }.update(params)</code>
        </li>
      
        <li class="covered" data-hits="636" data-linenumber="480">
          <span class="hits">636</span>
          
          <code class="ruby">      if params.key?(:enabled_features) || params.key?(:enabled_feature)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="481">
          <span class="hits">6</span>
          
          <code class="ruby">        return !!get_registers(params).include?(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="482">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="630" data-linenumber="483">
          <span class="hits">630</span>
          
          <code class="ruby">        params[:enabled_features] = :default</code>
        </li>
      
        <li class="covered" data-hits="630" data-linenumber="484">
          <span class="hits">630</span>
          
          <code class="ruby">        return !!get_registers(params).include?(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="485">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="486">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="487">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :has_reg, :has_reg?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="488">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="489">
          
          
          <code class="ruby">    # Returns the register object matching the given name, or a hash of all registers,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="490">
          
          
          <code class="ruby">    # associated with a feature,if no name is specified.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="491">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="492">
          
          
          <code class="ruby">    # Can also be used to define a new register if a block is supplied in which case</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="493">
          
          
          <code class="ruby">    # it is equivalent to calling add_reg with a block.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="494">
          <span class="hits">2</span>
          
          <code class="ruby">    def reg(*args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="1116" data-linenumber="495">
          <span class="hits">1116</span>
          
          <code class="ruby">      if block_given? || (args[1].is_a?(Fixnum) &amp;&amp; !try(:_initialized?))</code>
        </li>
      
        <li class="covered" data-hits="522" data-linenumber="496">
          <span class="hits">522</span>
          
          <code class="ruby">        @reg_define_file = define_file(caller[0])</code>
        </li>
      
        <li class="covered" data-hits="522" data-linenumber="497">
          <span class="hits">522</span>
          
          <code class="ruby">        add_reg(*args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="498">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="499">
          
          
          <code class="ruby">        # Example use cases:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="500">
          
          
          <code class="ruby">        # reg(:reg2)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="501">
          
          
          <code class="ruby">        # reg(:name =&gt; :reg2)</code>
        </li>
      
        <li class="covered" data-hits="594" data-linenumber="502">
          <span class="hits">594</span>
          
          <code class="ruby">        if !args.empty? &amp;&amp; args.size == 1 &amp;&amp; (args[0].class != Hash || (args[0].key?(:name) &amp;&amp; args[0].size == 1))</code>
        </li>
      
        <li class="covered" data-hits="575" data-linenumber="503">
          <span class="hits">575</span>
          
          <code class="ruby">          if args[0].class == Hash</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="504">
          
          
          <code class="ruby">            name = args[0][:name]</code>
        </li>
      
        <li class="covered" data-hits="575" data-linenumber="505">
          <span class="hits">575</span>
          
          <code class="ruby">          else name = args.first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="506">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="575" data-linenumber="507">
          <span class="hits">575</span>
          
          <code class="ruby">          if has_reg(name)</code>
        </li>
      
        <li class="covered" data-hits="572" data-linenumber="508">
          <span class="hits">572</span>
          
          <code class="ruby">            return _registers[name]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="509">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="510">
          <span class="hits">3</span>
          
          <code class="ruby">            if Origen.config.strict_errors</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="511">
          <span class="hits">1</span>
          
          <code class="ruby">              puts &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="512">
          <span class="hits">1</span>
          
          <code class="ruby">              if regs.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="513">
          
          
          <code class="ruby">                puts &quot;#{self.class} does not have a register named #{name} or it is not enabled.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="514">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="515">
          <span class="hits">1</span>
          
          <code class="ruby">                puts &quot;#{self.class} does not have a register named #{name} or it is not enabled.&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="516">
          <span class="hits">1</span>
          
          <code class="ruby">                puts &#39;You may need to add it. This could also be a typo, these are the valid register names:&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="517">
          <span class="hits">1</span>
          
          <code class="ruby">                puts regs.keys</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="518">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="519">
          <span class="hits">1</span>
          
          <code class="ruby">              puts &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="520">
          <span class="hits">1</span>
          
          <code class="ruby">              fail &#39;Missing register error!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="521">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="522">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="523">
          
          
          <code class="ruby">        # Example use cases:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="524">
          
          
          <code class="ruby">        # reg(:enabled_features =&gt; :all)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="525">
          
          
          <code class="ruby">        # reg(:name =&gt; :reg2, enabled_features =&gt; :all)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="526">
          
          
          <code class="ruby">        # reg(:name =&gt; :reg2, enabled_features =&gt; :fac)</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="527">
          <span class="hits">19</span>
          
          <code class="ruby">        elsif !args.empty? &amp;&amp; args.size == 1 &amp;&amp; args[0].class == Hash</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="528">
          <span class="hits">5</span>
          
          <code class="ruby">          params = args[0]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="529">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="530">
          
          
          <code class="ruby">          # Example use case:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="531">
          
          
          <code class="ruby">          # reg(:name =&gt; :reg2, :enabled_features =&gt; :all)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="532">
          <span class="hits">5</span>
          
          <code class="ruby">          if (params.key?(:enabled_features) || params.key?(:enabled_feature)) &amp;&amp; params.key?(:name)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="533">
          
          
          <code class="ruby">            name = params[:name]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="534">
          
          
          <code class="ruby">            if has_reg(name, params)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="535">
          
          
          <code class="ruby">              _registers[name]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="536">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="537">
          
          
          <code class="ruby">              reg_missing_error(params)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="538">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="539">
          
          
          <code class="ruby">          # Example use case:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="540">
          
          
          <code class="ruby">          # reg(:enabled_features =&gt;[:fac, fac2])</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="541">
          <span class="hits">5</span>
          
          <code class="ruby">          elsif params.size == 1 &amp;&amp; params.key?(:enabled_features)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="542">
          <span class="hits">5</span>
          
          <code class="ruby">            return get_registers(enabled_features: params[:enabled_features])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="543">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="544">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="545">
          
          
          <code class="ruby">        # Example use case:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="546">
          
          
          <code class="ruby">        # reg(:reg2, :enabled_features =&gt; :all)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="547">
          
          
          <code class="ruby">        # reg(:reg2, :enabled_features =&gt; :default)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="548">
          
          
          <code class="ruby">        # reg(:reg2, :enabled_features =&gt; :fac)</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="549">
          <span class="hits">14</span>
          
          <code class="ruby">        elsif !args.empty? &amp;&amp; args.size == 2</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="550">
          <span class="hits">6</span>
          
          <code class="ruby">          name = args[0]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="551">
          <span class="hits">6</span>
          
          <code class="ruby">          params = args[1]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="552">
          <span class="hits">6</span>
          
          <code class="ruby">          name, params = params, name if name.class == Hash</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="553">
          <span class="hits">6</span>
          
          <code class="ruby">          if has_reg(name, params)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="554">
          <span class="hits">5</span>
          
          <code class="ruby">            _registers[name]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="555">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="556">
          <span class="hits">1</span>
          
          <code class="ruby">            reg_missing_error(params)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="557">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="558">
          <span class="hits">8</span>
          
          <code class="ruby">        elsif args.empty?</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="559">
          <span class="hits">8</span>
          
          <code class="ruby">          if _registers.empty?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="560">
          <span class="hits">2</span>
          
          <code class="ruby">            return _registers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="561">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="562">
          <span class="hits">6</span>
          
          <code class="ruby">            return get_registers(enabled_features: :default)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="563">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="564">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="565">
          
          
          <code class="ruby">          if Origen.config.strict_errors</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="566">
          
          
          <code class="ruby">            fail &#39;Invalid call to reg method or invalid arguments specified&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="567">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="568">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="569">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="570">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="571">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :regs, :reg</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="572">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="573">
          <span class="hits">2</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="574">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="575">
          <span class="hits">2</span>
          
          <code class="ruby">    def reg_missing_error(params)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="576">
          <span class="hits">1</span>
          
          <code class="ruby">      if Origen.config.strict_errors</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="577">
          
          
          <code class="ruby">        puts &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="578">
          
          
          <code class="ruby">        temp = regs(params)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="579">
          
          
          <code class="ruby">        if temp.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="580">
          
          
          <code class="ruby">          puts &quot;#{self.class} does not have a register named #{name} within the supplied feature scope, you need to add it.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="581">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="582">
          
          
          <code class="ruby">          puts &quot;#{self.class} does not have a register named #{name} within the supplied feature scope, you may need to add it.&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="583">
          
          
          <code class="ruby">          puts &#39;This could also be a typo, these are the valid register names:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="584">
          
          
          <code class="ruby">          puts temp.keys</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="585">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="586">
          
          
          <code class="ruby">        puts &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="587">
          
          
          <code class="ruby">        fail &#39;Missing register error!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="588">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="589">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="590">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="591">
          <span class="hits">2</span>
          
          <code class="ruby">    def extract_enabled_features(options)</code>
        </li>
      
        <li class="covered" data-hits="647" data-linenumber="592">
          <span class="hits">647</span>
          
          <code class="ruby">      options[:enabled_features] || options[:enabled_feature]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="593">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="594">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="595">
          <span class="hits">2</span>
          
          <code class="ruby">    def get_registers(params)</code>
        </li>
      
        <li class="covered" data-hits="647" data-linenumber="596">
          <span class="hits">647</span>
          
          <code class="ruby">      params = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="597">
          
          
          <code class="ruby">        test_for_true_false: false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="598">
          
          
          <code class="ruby">      }.update(params)</code>
        </li>
      
        <li class="covered" data-hits="647" data-linenumber="599">
          <span class="hits">647</span>
          
          <code class="ruby">      regs_to_return = RegCollection.new(self)</code>
        </li>
      
        <li class="covered" data-hits="647" data-linenumber="600">
          <span class="hits">647</span>
          
          <code class="ruby">      req_features = extract_enabled_features(params)</code>
        </li>
      
        <li class="covered" data-hits="647" data-linenumber="601">
          <span class="hits">647</span>
          
          <code class="ruby">      if req_features == :all</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="602">
          <span class="hits">3</span>
          
          <code class="ruby">        regs_to_return = _registers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="603">
          
          
          <code class="ruby">      elsif req_features == :none</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="604">
          <span class="hits">2</span>
          
          <code class="ruby">        _registers.each do |k, v|</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="605">
          <span class="hits">12</span>
          
          <code class="ruby">          regs_to_return[k] = v unless v.has_feature_constraint?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="606">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="607">
          
          
          <code class="ruby">      elsif req_features == :default</code>
        </li>
      
        <li class="covered" data-hits="637" data-linenumber="608">
          <span class="hits">637</span>
          
          <code class="ruby">        _registers.each do |k, v|</code>
        </li>
      
        <li class="covered" data-hits="4023" data-linenumber="609">
          <span class="hits">4023</span>
          
          <code class="ruby">          regs_to_return[k] = v if v.enabled?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="610">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="611">
          
          
          <code class="ruby">      elsif req_features.class == Array</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="612">
          <span class="hits">1</span>
          
          <code class="ruby">        req_features.each do |req_feat|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="613">
          <span class="hits">3</span>
          
          <code class="ruby">          _registers.each do |k, v|</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="614">
          <span class="hits">18</span>
          
          <code class="ruby">            regs_to_return[k] = v if v.enabled_by_feature?(req_feat) || !v.has_feature_constraint?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="615">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="616">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="617">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="618">
          <span class="hits">4</span>
          
          <code class="ruby">        _registers.each do |k, v|</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="619">
          <span class="hits">25</span>
          
          <code class="ruby">          regs_to_return[k] = v if v.enabled_by_feature?(req_features) || !v.has_feature_constraint?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="620">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="621">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="647" data-linenumber="622">
          <span class="hits">647</span>
          
          <code class="ruby">      if regs_to_return.empty?</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="623">
          <span class="hits">47</span>
          
          <code class="ruby">        unless params[:test_for_true_false]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="624">
          
          
          <code class="ruby">          puts &#39;No register found with the specified feature or the register is disabled!&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="625">
          
          
          <code class="ruby">          fail &#39;Missing register error!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="626">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="627">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="647" data-linenumber="628">
          <span class="hits">647</span>
          
          <code class="ruby">      regs_to_return</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="629">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="630">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="631">
          <span class="hits">2</span>
          
          <code class="ruby">    public</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="632">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="633">
          
          
          <code class="ruby">    # Creates a dummy register. Equivalent to Reg.dummy except the reg owner is assigned</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="634">
          
          
          <code class="ruby">    # as the caller rather than Reg. Use this if you need to call read! or write! on the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="635">
          
          
          <code class="ruby">    # dummy register object.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="636">
          <span class="hits">2</span>
          
          <code class="ruby">    def dummy_reg(size = 16)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="637">
          
          
          <code class="ruby">      Reg.new(self, 0, size, :dummy, init_as_writable: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="638">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="639">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="640">
          <span class="hits">2</span>
          
          <code class="ruby">    def write_register_missing!(reg)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="641">
          
          
          <code class="ruby">      klass = (try(:controller) || self).class</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="642">
          
          
          <code class="ruby">      puts &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="643">
          
          
          <code class="ruby">      puts &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="644">
          
          
          <code class="ruby">      puts &lt;&lt;-EOT</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="645">
          
          
          <code class="ruby">You have made a request to write register: #{reg.name}, however the #{klass}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="646">
          
          
          <code class="ruby">class does not know how to do this yet. You should implement a write_register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="647">
          
          
          <code class="ruby">method in the #{klass} like this:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="648">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="649">
          
          
          <code class="ruby">  def write_register(reg, options={})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="650">
          
          
          <code class="ruby">    &lt;logic to handle the writing of the reg object here&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="651">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="652">
          
          
          <code class="ruby">      EOT</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="653">
          
          
          <code class="ruby">      puts &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="654">
          
          
          <code class="ruby">      exit 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="655">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="656">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="657">
          <span class="hits">2</span>
          
          <code class="ruby">    def read_register_missing!(reg)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="658">
          
          
          <code class="ruby">      klass = (try(:controller) || self).class</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="659">
          
          
          <code class="ruby">      puts &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="660">
          
          
          <code class="ruby">      puts &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="661">
          
          
          <code class="ruby">      puts &lt;&lt;-EOT</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="662">
          
          
          <code class="ruby">You have made a request to read register: #{reg.name}, however the #{klass}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="663">
          
          
          <code class="ruby">class does not know how to do this yet. You should implement a read_register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="664">
          
          
          <code class="ruby">method in the #{klass} like this:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="665">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="666">
          
          
          <code class="ruby">  def read_register(reg, options={})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="667">
          
          
          <code class="ruby">    &lt;logic to handle reading the reg object here&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="668">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="669">
          
          
          <code class="ruby">      EOT</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="670">
          
          
          <code class="ruby">      puts &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="671">
          
          
          <code class="ruby">      exit 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="672">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="673">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="674">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="131797889f1f195d22128ccaa2db9fc45ada6e2b">
  <div class="header">
    <h3>lib/origen/registers/bit.rb</h3>
    <h4><span class="yellow">80.21 %</span> covered</h4>
    <div>
      <b>288</b> relevant lines. 
      <span class="green"><b>231</b> lines covered</span> and
      <span class="red"><b>57</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Registers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Models bits within Reg objects</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">    class Bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">      # The :access property of registers or bits can be set to any of the following</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">      # key values. Implemented refers to whether the behaviour is accurately modelled</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">      # by the Origen register model or not.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">      ACCESS_CODES = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">        ro:    { implemented: false, description: &#39;Read-Only&#39; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">        rw:    { implemented: true,  description: &#39;Read-Write&#39; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">        rc:    { implemented: false, description: &#39;Read-only, Clear-on-read&#39; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">        rs:    { implemented: false, description: &quot;Set-on-read (all bits become &#39;1&#39; on read)&quot; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">        wrc:   { implemented: false, description: &#39;Writable, clear-on-read&#39; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">        wrs:   { implemented: false, description: &#39;Writable, Sets-on-read&#39; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">        wc:    { implemented: false, description: &#39;Clear-on-write&#39; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">        ws:    { implemented: false, description: &#39;Set-on-write&#39; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">        wsrc:  { implemented: false, description: &#39;Set-on-write, clear-on-read&#39; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">        wcrs:  { implemented: false, description: &#39;Clear-on-write, set-on-read&#39; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">        w1c:   { implemented: false, description: &quot;Write &#39;1&#39; to clear bits&quot; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">        w1s:   { implemented: false, description: &quot;Write &#39;1&#39; to set bits&quot; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">        w1t:   { implemented: false, description: &quot;Write &#39;1&#39; to toggle bits&quot; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">        w0c:   { implemented: false, description: &quot;Write &#39;0&#39; to clear bits&quot; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">        w0s:   { implemented: false, description: &quot;Write &#39;0&#39; to set bits&quot; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">        w0t:   { implemented: false, description: &quot;Write &#39;0&#39; to toggle bits&quot; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">        w1src: { implemented: false, description: &quot;Write &#39;1&#39; to set and clear-on-read&quot; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">        w1crs: { implemented: false, description: &quot;Write &#39;1&#39; to clear and set-on-read&quot; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">        w0src: { implemented: false, description: &quot;Write &#39;0&#39; to set and clear-on-read&quot; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">        w0crs: { implemented: false, description: &quot;Write &#39;0&#39; to clear and set-on-read&quot; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">        wo:    { implemented: false, description: &#39;Write-only&#39; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">        woc:   { implemented: false, description: &quot;When written sets the field to &#39;0&#39;. Read undeterministic&quot; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">        worz:  { implemented: false, description: &#39;Write-only, Reads zero&#39; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">        wos:   { implemented: false, description: &quot;When written sets all bits to &#39;1&#39;. Read undeterministic&quot; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">        w1:    { implemented: false, description: &#39;Write-once. Next time onwards, write is ignored. Read returns the value&#39; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">        wo1:   { implemented: false, description: &#39;Write-once. Next time onwards, write is ignored. Read is undeterministic&#39; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">        dc:    { implemented: false, description: &#39;RW but no check&#39; },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">        rowz:  { implemented: false, description: &#39;Read-only, value is cleared on read&#39; }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      # Returns the Reg object that owns the bit</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="40">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">      # Returns the integer position of the bit within the register</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="42">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :position</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">      # Current the data value currently held by the bit, 0 or 1</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="44">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">      # Returns any overlay string attached to the bit</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="46">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :overlay</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">      # If the bit does not read back with the same data as is written to it</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">      # then this will return true. This property can be assigned durgin the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      # register instantiation, e.g.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      #   add_reg :control,    0x00,    :mode    =&gt; { :pos =&gt; 8, :bits =&gt; 8 },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      #                                 :status  =&gt; { :pos =&gt; 4, :bits =&gt; 2, :read_data_matches_write =&gt; false }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="52">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :read_data_matches_write</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      # Returns true if this bit has the sticky_overlay flag set, see Reg#sticky_overlay for</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">      # a full description. This is true by default.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="55">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :sticky_overlay</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">      # Returns true if this bit has the sticky_store flag set, see Reg#sticky_store for</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">      # a full description. This is false by default.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="58">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :sticky_store</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">      # Any feature associated with the bit/bits</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="60">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :feature</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">      # Returns the reset value of the bit</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="62">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :reset_val</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="63">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :reset_data, :reset_val</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="64">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :reset_value, :reset_val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">      # Allow modify of writable flag, bit is writeable by write method</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="66">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_writer :writable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">      # Allow modify of readable flag, bit is readable by read method</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="68">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_writer :readable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">      # Sets or returns the status of &quot;write-one-to-clear&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="70">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :w1c</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">      # Allow modify of clr_only flag, bit can only be cleared (made 0)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="72">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_writer :clr_only</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">      # Allow modify of set_only flag, bit can only be set (made 1)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="74">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_writer :set_only</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">      # Returns true if bit depends on initial state of NVM in some way</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="76">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :nvm_dep</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">      # Returns true if bit is critical to starting an important operation (like a state machine)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">      # so that it can be made not writable during basic register checks</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="79">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :start</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">      # Returns any application-specific meta-data attatched to the given bit</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="81">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :meta</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="82">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :meta_data, :meta</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="83">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :metadata, :meta</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">      # Returns the access method for the given bit (a symbol), see the ACCESS_CODES constant for</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">      # the possible values this can have and their meaning</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="86">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :access</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="88">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize(owner, position, options = {}) # rubocop:disable MethodLength</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="89">
          <span class="hits">8833</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">          start:                   false,        # whether bit starts a state machine so be careful</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">          read_data_matches_write: true,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">          read:                    false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">          overlay:                 false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">          store:                   false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">          sticky_overlay:          true,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">          sticky_store:            false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">          nvm_dep:                 false,        # whether is an NVM dependent bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="99">
          <span class="hits">8833</span>
          
          <code class="ruby">        @owner = owner</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="100">
          <span class="hits">8833</span>
          
          <code class="ruby">        @position = position</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="101">
          <span class="hits">8833</span>
          
          <code class="ruby">        @undefined = options.delete(:undefined)</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="102">
          <span class="hits">8833</span>
          
          <code class="ruby">        @reset_val = (options.delete(:res) || options.delete(:reset) || options.delete(:data) || 0)</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="103">
          <span class="hits">8833</span>
          
          <code class="ruby">        if @reset_val.is_a?(Symbol)</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="104">
          <span class="hits">26</span>
          
          <code class="ruby">          @data = 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="8807" data-linenumber="106">
          <span class="hits">8807</span>
          
          <code class="ruby">          @reset_val &amp;= 1 unless @reset_val.is_a?(Symbol)</code>
        </li>
      
        <li class="covered" data-hits="8807" data-linenumber="107">
          <span class="hits">8807</span>
          
          <code class="ruby">          @data = @reset_val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="110">
          <span class="hits">8833</span>
          
          <code class="ruby">        access_code = options.delete(:access)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">        # If access has been defined then none of these other attributes can be</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="112">
          <span class="hits">8833</span>
          
          <code class="ruby">        if access_code</code>
        </li>
      
        <li class="covered" data-hits="363" data-linenumber="113">
          <span class="hits">363</span>
          
          <code class="ruby">          conflicts = [:readable, :writable, :clr_only, :set_only, :w1c]</code>
        </li>
      
        <li class="covered" data-hits="2178" data-linenumber="114">
          <span class="hits">2178</span>
          
          <code class="ruby">          if conflicts.any? { |k| options.key?(k) }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="115">
          
          
          <code class="ruby">            puts &#39;The following attributes cannot be set in combination with :access&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="116">
          
          
          <code class="ruby">            puts &quot;  #{conflicts.join(&#39;, &#39;)}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="117">
          
          
          <code class="ruby">            puts &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="118">
          
          
          <code class="ruby">            puts &#39;Use :access to defined the required behavior, the above attributes will be deprecated in future.&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="119">
          
          
          <code class="ruby">            puts &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="120">
          
          
          <code class="ruby">            fail &#39;Conflicting access!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="363" data-linenumber="122">
          <span class="hits">363</span>
          
          <code class="ruby">          set_access(access_code)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="8470" data-linenumber="124">
          <span class="hits">8470</span>
          
          <code class="ruby">          options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">            writable: true,         # whether bit is writable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">            readable: true,         # whether bit is readable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">            clr_only: false,        # whether bit is clear only</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">            set_only: false,        # whether bit is set only</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">            w1c:      false,        # whether bit is w1c (when written to 1 immediately becomes 0)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">          }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="8470" data-linenumber="131">
          <span class="hits">8470</span>
          
          <code class="ruby">          @readable = options.delete(:readable)</code>
        </li>
      
        <li class="covered" data-hits="8470" data-linenumber="132">
          <span class="hits">8470</span>
          
          <code class="ruby">          @writable = options.delete(:writable)</code>
        </li>
      
        <li class="covered" data-hits="8470" data-linenumber="133">
          <span class="hits">8470</span>
          
          <code class="ruby">          @clr_only = options.delete(:clr_only)</code>
        </li>
      
        <li class="covered" data-hits="8470" data-linenumber="134">
          <span class="hits">8470</span>
          
          <code class="ruby">          @set_only = options.delete(:set_only)</code>
        </li>
      
        <li class="covered" data-hits="8470" data-linenumber="135">
          <span class="hits">8470</span>
          
          <code class="ruby">          @w1c = options.delete(:w1c)</code>
        </li>
      
        <li class="covered" data-hits="8470" data-linenumber="136">
          <span class="hits">8470</span>
          
          <code class="ruby">          set_access_from_rw</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">        # Would like to get this integrated with access as well</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="139">
          <span class="hits">8833</span>
          
          <code class="ruby">        @read_data_matches_write = options.delete(:read_data_matches_write)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="141">
          <span class="hits">8833</span>
          
          <code class="ruby">        @feature = options.delete(:feature)</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="142">
          <span class="hits">8833</span>
          
          <code class="ruby">        if !!feature &amp;&amp; @writable</code>
        </li>
      
        <li class="covered" data-hits="102" data-linenumber="143">
          <span class="hits">102</span>
          
          <code class="ruby">          @writable = enabled?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="145">
          <span class="hits">8833</span>
          
          <code class="ruby">        @path     = options.delete(:path)</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="146">
          <span class="hits">8833</span>
          
          <code class="ruby">        @abs_path = options.delete(:abs_path)</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="147">
          <span class="hits">8833</span>
          
          <code class="ruby">        @start = options.delete(:start)</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="148">
          <span class="hits">8833</span>
          
          <code class="ruby">        @read = options.delete(:read)</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="149">
          <span class="hits">8833</span>
          
          <code class="ruby">        @overlay = options.delete(:overlay)</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="150">
          <span class="hits">8833</span>
          
          <code class="ruby">        @store = options.delete(:store)</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="151">
          <span class="hits">8833</span>
          
          <code class="ruby">        @update_required = false</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="152">
          <span class="hits">8833</span>
          
          <code class="ruby">        @sticky_store = options.delete(:sticky_store)</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="153">
          <span class="hits">8833</span>
          
          <code class="ruby">        @sticky_overlay = options.delete(:sticky_overlay)</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="154">
          <span class="hits">8833</span>
          
          <code class="ruby">        @nvm_dep = (options.delete(:nvm_dep) ? 1 : 0)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby">        # Delete some other noise that can be left over...</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="156">
          <span class="hits">8833</span>
          
          <code class="ruby">        options.delete(:bits)</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="157">
          <span class="hits">8833</span>
          
          <code class="ruby">        options.delete(:pos)</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="158">
          <span class="hits">8833</span>
          
          <code class="ruby">        options.delete(:position)</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="159">
          <span class="hits">8833</span>
          
          <code class="ruby">        options.delete(:data)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">        # Whatever is left must be custom application meta-data</code>
        </li>
      
        <li class="covered" data-hits="8833" data-linenumber="161">
          <span class="hits">8833</span>
          
          <code class="ruby">        @meta = (default_bit_metadata).merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="164">
          <span class="hits">2</span>
          
          <code class="ruby">      def set_access(value)</code>
        </li>
      
        <li class="covered" data-hits="363" data-linenumber="165">
          <span class="hits">363</span>
          
          <code class="ruby">        unless ACCESS_CODES.keys.include?(value)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="166">
          
          
          <code class="ruby">          puts &#39;Invalid access code, must be one of these:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="167">
          
          
          <code class="ruby">          ACCESS_CODES.each do |code, meta|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="168">
          
          
          <code class="ruby">            puts &quot;  :#{code}&quot;.ljust(10) + &quot; - #{meta[:description]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="170">
          
          
          <code class="ruby">          puts &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="171">
          
          
          <code class="ruby">          fail &#39;Invalid access code!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="363" data-linenumber="173">
          <span class="hits">363</span>
          
          <code class="ruby">        @access = value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">        # Set readable &amp; writable based on access</code>
        </li>
      
        <li class="covered" data-hits="363" data-linenumber="176">
          <span class="hits">363</span>
          
          <code class="ruby">        if @access == :ro</code>
        </li>
      
        <li class="covered" data-hits="343" data-linenumber="177">
          <span class="hits">343</span>
          
          <code class="ruby">          @readable = true</code>
        </li>
      
        <li class="covered" data-hits="343" data-linenumber="178">
          <span class="hits">343</span>
          
          <code class="ruby">          @writable = false</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="179">
          <span class="hits">20</span>
          
          <code class="ruby">        elsif @access == :wo || @access == :worz</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="180">
          
          
          <code class="ruby">          @writable = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="181">
          
          
          <code class="ruby">          @readable = false</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="182">
          <span class="hits">20</span>
          
          <code class="ruby">        elsif @access == :w1c</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="183">
          <span class="hits">3</span>
          
          <code class="ruby">          @w1c = true</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="184">
          <span class="hits">3</span>
          
          <code class="ruby">          @writable = true</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="185">
          <span class="hits">3</span>
          
          <code class="ruby">          @readable = true  # Is this always valid?</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="186">
          <span class="hits">17</span>
          
          <code class="ruby">        elsif @access == :wc</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="187">
          
          
          <code class="ruby">          @clr_only = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="188">
          
          
          <code class="ruby">          @writable = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="189">
          
          
          <code class="ruby">          @readable = true  # Is this always valid?</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="190">
          <span class="hits">17</span>
          
          <code class="ruby">        elsif @access == :ws</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="191">
          
          
          <code class="ruby">          @set_only = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="192">
          
          
          <code class="ruby">          @writable = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="193">
          
          
          <code class="ruby">          @readable = true  # Is this always valid?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby">        # Catch all for now until the behavior of this class is based around @access</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="196">
          <span class="hits">17</span>
          
          <code class="ruby">          @writable = true</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="197">
          <span class="hits">17</span>
          
          <code class="ruby">          @readable = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby">      # Set @access based on @readable and @writable</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="202">
          <span class="hits">2</span>
          
          <code class="ruby">      def set_access_from_rw</code>
        </li>
      
        <li class="covered" data-hits="8470" data-linenumber="203">
          <span class="hits">8470</span>
          
          <code class="ruby">        if @w1c</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="204">
          <span class="hits">1</span>
          
          <code class="ruby">          @access = :w1c</code>
        </li>
      
        <li class="covered" data-hits="8469" data-linenumber="205">
          <span class="hits">8469</span>
          
          <code class="ruby">        elsif @clr_only</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="206">
          
          
          <code class="ruby">          @access = :wc</code>
        </li>
      
        <li class="covered" data-hits="8469" data-linenumber="207">
          <span class="hits">8469</span>
          
          <code class="ruby">        elsif @set_only</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="208">
          
          
          <code class="ruby">          @access = :ws</code>
        </li>
      
        <li class="covered" data-hits="8469" data-linenumber="209">
          <span class="hits">8469</span>
          
          <code class="ruby">        elsif @readable &amp;&amp; @writable</code>
        </li>
      
        <li class="covered" data-hits="3555" data-linenumber="210">
          <span class="hits">3555</span>
          
          <code class="ruby">          @access = :rw</code>
        </li>
      
        <li class="covered" data-hits="4914" data-linenumber="211">
          <span class="hits">4914</span>
          
          <code class="ruby">        elsif @readable</code>
        </li>
      
        <li class="covered" data-hits="4914" data-linenumber="212">
          <span class="hits">4914</span>
          
          <code class="ruby">          @access = :ro</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="213">
          
          
          <code class="ruby">        elsif @writable &amp;&amp; @access != :worz</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="214">
          
          
          <code class="ruby">          @access = :wo</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="215">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="216">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="218">
          <span class="hits">2</span>
          
          <code class="ruby">      def path_var</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="219">
          <span class="hits">26</span>
          
          <code class="ruby">        @path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="222">
          <span class="hits">2</span>
          
          <code class="ruby">      def abs_path</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="223">
          <span class="hits">23</span>
          
          <code class="ruby">        @abs_path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="226">
          <span class="hits">2</span>
          
          <code class="ruby">      ACCESS_CODES.each do |code, _meta|</code>
        </li>
      
        <li class="covered" data-hits="56" data-linenumber="227">
          <span class="hits">56</span>
          
          <code class="ruby">        define_method &quot;#{code}?&quot; do</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="228">
          <span class="hits">13</span>
          
          <code class="ruby">          !!(access == code || instance_variable_get(&quot;@#{code}&quot;))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="231">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="232">
          
          
          <code class="ruby">      # Returns any application specific metadata that has been inherited by the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="233">
          
          
          <code class="ruby">      # given bit.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">      # This does not account for any overridding that may have been applied to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby">      # this bit specifically however, use the meta method to get that.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="236">
          <span class="hits">2</span>
          
          <code class="ruby">      def default_bit_metadata</code>
        </li>
      
        <li class="covered" data-hits="13360" data-linenumber="237">
          <span class="hits">13360</span>
          
          <code class="ruby">        if owner</code>
        </li>
      
        <li class="covered" data-hits="13065" data-linenumber="238">
          <span class="hits">13065</span>
          
          <code class="ruby">          Origen::Registers.default_bit_metadata.merge(</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="239">
          
          
          <code class="ruby">            Origen::Registers.bit_metadata[owner.owner.class] || {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="240">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="295" data-linenumber="241">
          <span class="hits">295</span>
          
          <code class="ruby">          Origen::Registers.default_bit_metadata</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="245">
          <span class="hits">2</span>
          
          <code class="ruby">      def inspect</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="246">
          
          
          <code class="ruby">        &quot;&lt;#{self.class}:#{object_id}&gt;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="248">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">      # Always returns 1 when asked for size, a BitCollection on the other hand will return something higher</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="250">
          <span class="hits">2</span>
          
          <code class="ruby">      def size</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="251">
          
          
          <code class="ruby">        1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="254">
          
          
          <code class="ruby">      # Make this bit disappear, make it unwritable with a data value of 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="255">
          <span class="hits">2</span>
          
          <code class="ruby">      def delete</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="256">
          
          
          <code class="ruby">        @sticky_overlay = false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="257">
          
          
          <code class="ruby">        @sticky_store = false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="258">
          
          
          <code class="ruby">        clear_flags</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="259">
          
          
          <code class="ruby">        @data = 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="260">
          
          
          <code class="ruby">        @writable = false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="261">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="262">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">      # Returns true if the bit is set (holds a data value of 1)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="265">
          <span class="hits">2</span>
          
          <code class="ruby">      def set?</code>
        </li>
      
        <li class="covered" data-hits="1081" data-linenumber="266">
          <span class="hits">1081</span>
          
          <code class="ruby">        @data == 1 ? true : false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="268">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="269">
          
          
          <code class="ruby">      # Resets the data value back to the reset value and calls Bit#clear_flags</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="270">
          <span class="hits">2</span>
          
          <code class="ruby">      def reset</code>
        </li>
      
        <li class="covered" data-hits="195" data-linenumber="271">
          <span class="hits">195</span>
          
          <code class="ruby">        if @reset_val.is_a?(Symbol)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="272">
          <span class="hits">2</span>
          
          <code class="ruby">          @data = 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="273">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="193" data-linenumber="274">
          <span class="hits">193</span>
          
          <code class="ruby">          @data = @reset_val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="195" data-linenumber="276">
          <span class="hits">195</span>
          
          <code class="ruby">        @updated_post_reset = false</code>
        </li>
      
        <li class="covered" data-hits="195" data-linenumber="277">
          <span class="hits">195</span>
          
          <code class="ruby">        clear_flags</code>
        </li>
      
        <li class="covered" data-hits="195" data-linenumber="278">
          <span class="hits">195</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="279">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="280">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby">      # Returns true if the bit object is a placeholder for bit positions that have</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby">      # not been defined within the parent register</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="283">
          <span class="hits">2</span>
          
          <code class="ruby">      def undefined?</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="284">
          <span class="hits">36</span>
          
          <code class="ruby">        @undefined</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="285">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="286">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="287">
          
          
          <code class="ruby">      # Returns true if the value of the bit is known. The value will be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">      # unknown in cases where the reset value is undefined or determined by a memory location</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="289">
          
          
          <code class="ruby">      # and where the bit has not been written or read to a specific value yet.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="290">
          <span class="hits">2</span>
          
          <code class="ruby">      def has_known_value?</code>
        </li>
      
        <li class="covered" data-hits="97" data-linenumber="291">
          <span class="hits">97</span>
          
          <code class="ruby">        !@reset_val.is_a?(Symbol) || @updated_post_reset</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="292">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="293">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="294">
          
          
          <code class="ruby">      # Set the data value of the bit to the given value (1 or 0)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="295">
          
          
          <code class="ruby">      # If the bit is read-only, the value of the bit can be forced with &#39;force: true&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="296">
          <span class="hits">2</span>
          
          <code class="ruby">      def write(value, options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="297">
          
          
          <code class="ruby">        # If an array is written it means a data value and an overlay have been supplied</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby">        # in one go...</code>
        </li>
      
        <li class="covered" data-hits="1579" data-linenumber="299">
          <span class="hits">1579</span>
          
          <code class="ruby">        if value.is_a?(Array)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="300">
          
          
          <code class="ruby">          overlay(value[1])</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="301">
          
          
          <code class="ruby">          value = value[0]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="303">
          
          
          <code class="ruby">        if (@data != value &amp; 1 &amp;&amp; @writable) ||</code>
        </li>
      
        <li class="covered" data-hits="1579" data-linenumber="304">
          <span class="hits">1579</span>
          
          <code class="ruby">           (@data != value &amp; 1 &amp;&amp; options[:force] == true)</code>
        </li>
      
        <li class="covered" data-hits="578" data-linenumber="305">
          <span class="hits">578</span>
          
          <code class="ruby">          if ((set?) &amp;&amp; (!@set_only)) ||</code>
        </li>
      
        <li class="covered" data-hits="1081" data-linenumber="306">
          <span class="hits">1081</span>
          
          <code class="ruby">             ((!set?) &amp;&amp; (!@clr_only))</code>
        </li>
      
        <li class="covered" data-hits="578" data-linenumber="307">
          <span class="hits">578</span>
          
          <code class="ruby">            @data = value &amp; 1</code>
        </li>
      
        <li class="covered" data-hits="578" data-linenumber="308">
          <span class="hits">578</span>
          
          <code class="ruby">            @update_required = true</code>
        </li>
      
        <li class="covered" data-hits="578" data-linenumber="309">
          <span class="hits">578</span>
          
          <code class="ruby">            @updated_post_reset = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="311">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1579" data-linenumber="312">
          <span class="hits">1579</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="313">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="314">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="315">
          
          
          <code class="ruby">      # Will tag all bits for read and if a data value is supplied it</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="316">
          
          
          <code class="ruby">      # will update the expected data for when the read is performed.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="317">
          <span class="hits">2</span>
          
          <code class="ruby">      def read(value = nil, _options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="318">
          
          
          <code class="ruby">        # First properly assign the args if value is absent...</code>
        </li>
      
        <li class="covered" data-hits="218" data-linenumber="319">
          <span class="hits">218</span>
          
          <code class="ruby">        if value.is_a?(Hash)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="320">
          
          
          <code class="ruby">          options = value</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="321">
          
          
          <code class="ruby">          value = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="322">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="218" data-linenumber="323">
          <span class="hits">218</span>
          
          <code class="ruby">        write(value) if value</code>
        </li>
      
        <li class="covered" data-hits="218" data-linenumber="324">
          <span class="hits">218</span>
          
          <code class="ruby">        @read = true if @readable &amp;&amp; @read_data_matches_write</code>
        </li>
      
        <li class="covered" data-hits="218" data-linenumber="325">
          <span class="hits">218</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="326">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="327">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :assert, :read</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="328">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="329">
          
          
          <code class="ruby">      # Sets the store flag attribute</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="330">
          <span class="hits">2</span>
          
          <code class="ruby">      def store</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="331">
          <span class="hits">5</span>
          
          <code class="ruby">        @store = true</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="332">
          <span class="hits">5</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="333">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="335">
          
          
          <code class="ruby">      # Set the overlay attribute to the supplied value</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="336">
          <span class="hits">2</span>
          
          <code class="ruby">      def overlay(value)</code>
        </li>
      
        <li class="covered" data-hits="122" data-linenumber="337">
          <span class="hits">122</span>
          
          <code class="ruby">        @overlay = value</code>
        </li>
      
        <li class="covered" data-hits="122" data-linenumber="338">
          <span class="hits">122</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="339">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="340">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="341">
          
          
          <code class="ruby">      # Returns the overlay attribute</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="342">
          <span class="hits">2</span>
          
          <code class="ruby">      def overlay_str</code>
        </li>
      
        <li class="covered" data-hits="96" data-linenumber="343">
          <span class="hits">96</span>
          
          <code class="ruby">        @overlay</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="344">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="345">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="346">
          
          
          <code class="ruby">      # Returns true if the bit&#39;s read flag is set</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="347">
          <span class="hits">2</span>
          
          <code class="ruby">      def is_to_be_read?</code>
        </li>
      
        <li class="covered" data-hits="262" data-linenumber="348">
          <span class="hits">262</span>
          
          <code class="ruby">        @read</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="349">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="350">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="351">
          
          
          <code class="ruby">      # Returns true if the bit&#39;s store flag is set</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="352">
          <span class="hits">2</span>
          
          <code class="ruby">      def is_to_be_stored?</code>
        </li>
      
        <li class="covered" data-hits="192" data-linenumber="353">
          <span class="hits">192</span>
          
          <code class="ruby">        @store</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="354">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="355">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="356">
          
          
          <code class="ruby">      # Returns true if the overlay attribute is set, optionally supply an overlay</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="357">
          
          
          <code class="ruby">      # name and this will only return true if the overlay attribute matches that name</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="358">
          <span class="hits">2</span>
          
          <code class="ruby">      def has_overlay?(name = nil)</code>
        </li>
      
        <li class="covered" data-hits="258" data-linenumber="359">
          <span class="hits">258</span>
          
          <code class="ruby">        if name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="360">
          
          
          <code class="ruby">          name.to_s == @overlay.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="361">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="258" data-linenumber="362">
          <span class="hits">258</span>
          
          <code class="ruby">          !!@overlay</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="363">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="364">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="365">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="366">
          
          
          <code class="ruby">      # Returns true if the bit is writable</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="367">
          <span class="hits">2</span>
          
          <code class="ruby">      def is_writable?</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="368">
          <span class="hits">30</span>
          
          <code class="ruby">        @writable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="369">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="370">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :writable?, :is_writable?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="371">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="372">
          <span class="hits">2</span>
          
          <code class="ruby">      def is_readable?</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="373">
          <span class="hits">30</span>
          
          <code class="ruby">        @readable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="374">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="375">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :readable?, :is_readable?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="376">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="377">
          
          
          <code class="ruby">      # Clears the read, store, overlay and update_required flags of this bit.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="378">
          
          
          <code class="ruby">      # The store and overlay flags will not be cleared if the the bit&#39;s sticky_store</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby">      # or sticky_overlay attributes are set respectively.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="380">
          <span class="hits">2</span>
          
          <code class="ruby">      def clear_flags</code>
        </li>
      
        <li class="covered" data-hits="227" data-linenumber="381">
          <span class="hits">227</span>
          
          <code class="ruby">        @read = false</code>
        </li>
      
        <li class="covered" data-hits="227" data-linenumber="382">
          <span class="hits">227</span>
          
          <code class="ruby">        @store = false unless @sticky_store</code>
        </li>
      
        <li class="covered" data-hits="227" data-linenumber="383">
          <span class="hits">227</span>
          
          <code class="ruby">        @overlay = false unless @sticky_overlay</code>
        </li>
      
        <li class="covered" data-hits="227" data-linenumber="384">
          <span class="hits">227</span>
          
          <code class="ruby">        @update_required = false</code>
        </li>
      
        <li class="covered" data-hits="227" data-linenumber="385">
          <span class="hits">227</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="386">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="387">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="388">
          
          
          <code class="ruby">      # Clears the read flag of this bit.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="389">
          <span class="hits">2</span>
          
          <code class="ruby">      def clear_read_flag</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="390">
          <span class="hits">33</span>
          
          <code class="ruby">        @read = false</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="391">
          <span class="hits">33</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="392">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="393">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="394">
          
          
          <code class="ruby">      # Returns a bit mask for this bit, that is a 1 shifted into the position</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="395">
          
          
          <code class="ruby">      # corresponding to this bit&#39;s position. e.g. A bit with position 4 would return</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="396">
          
          
          <code class="ruby">      # %1_0000</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="397">
          <span class="hits">2</span>
          
          <code class="ruby">      def mask</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="398">
          
          
          <code class="ruby">        mask_val = 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="399">
          
          
          <code class="ruby">        mask_val &lt;&lt; @position</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="400">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="401">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="402">
          
          
          <code class="ruby">      # Returns a &#39;null&#39; bit object which has value 0 and no other attributes set</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="403">
          <span class="hits">2</span>
          
          <code class="ruby">      def self.null(owner, position) # :nodoc:</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="404">
          
          
          <code class="ruby">        Bit.new(owner, position, writable: false)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="405">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="406">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="407">
          
          
          <code class="ruby">      # Returns the value you would need to write to the register to put the given</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="408">
          
          
          <code class="ruby">      # value in this bit</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="409">
          <span class="hits">2</span>
          
          <code class="ruby">      def setting(value)</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="410">
          <span class="hits">7</span>
          
          <code class="ruby">        value = value &amp; 1   # As this bit can only hold one bit of data force it</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="411">
          <span class="hits">7</span>
          
          <code class="ruby">        value &lt;&lt; @position</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="412">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="413">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="414">
          
          
          <code class="ruby">      # Returns true if the bit&#39;s update_required flag is set, typically this will be the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="415">
          
          
          <code class="ruby">      # case when a write has changed the data value of the bit but a BitCollection#write!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="416">
          
          
          <code class="ruby">      # method has not been called yet to apply it to silicon</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="417">
          <span class="hits">2</span>
          
          <code class="ruby">      def update_required?</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="418">
          <span class="hits">30</span>
          
          <code class="ruby">        @update_required</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="419">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="420">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="421">
          
          
          <code class="ruby">      # With only one bit it just returns itself</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="422">
          <span class="hits">2</span>
          
          <code class="ruby">      def shift_out_left</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="423">
          
          
          <code class="ruby">        yield self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="424">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="425">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="426">
          
          
          <code class="ruby">      # Returns the data shifted by the bit position</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="427">
          <span class="hits">2</span>
          
          <code class="ruby">      def data_in_position</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="428">
          <span class="hits">2</span>
          
          <code class="ruby">        data &lt;&lt; position</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="429">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="430">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="431">
          
          
          <code class="ruby">      # Clears any w1c bits that are set</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="432">
          <span class="hits">2</span>
          
          <code class="ruby">      def clear_w1c</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="433">
          
          
          <code class="ruby">        if @w1c &amp;&amp; set?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="434">
          
          
          <code class="ruby">          @data = 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="435">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="436">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="437">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="438">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="439">
          
          
          <code class="ruby">      # Clears any start bits that are set</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="440">
          <span class="hits">2</span>
          
          <code class="ruby">      def clear_start</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="441">
          
          
          <code class="ruby">        if @start &amp;&amp; set?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="442">
          
          
          <code class="ruby">          @data = 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="443">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="444">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="445">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="446">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="447">
          <span class="hits">2</span>
          
          <code class="ruby">      def respond_to?(*args) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="4498" data-linenumber="448">
          <span class="hits">4498</span>
          
          <code class="ruby">        sym = args.first</code>
        </li>
      
        <li class="covered" data-hits="4498" data-linenumber="449">
          <span class="hits">4498</span>
          
          <code class="ruby">        meta_data_method?(sym) || super(sym)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="450">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="451">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="452">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="453">
          <span class="hits">2</span>
          
          <code class="ruby">      def meta_data_method?(method)</code>
        </li>
      
        <li class="covered" data-hits="4527" data-linenumber="454">
          <span class="hits">4527</span>
          
          <code class="ruby">        attr_name = method.to_s.gsub(/\??=?/, &#39;&#39;).to_sym</code>
        </li>
      
        <li class="covered" data-hits="4527" data-linenumber="455">
          <span class="hits">4527</span>
          
          <code class="ruby">        if default_bit_metadata.key?(attr_name)</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="456">
          <span class="hits">61</span>
          
          <code class="ruby">          if method.to_s =~ /\?/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="457">
          
          
          <code class="ruby">            [true, false].include?(default_bit_metadata[attr_name])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="458">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="459">
          <span class="hits">61</span>
          
          <code class="ruby">            true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="460">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="461">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="4466" data-linenumber="462">
          <span class="hits">4466</span>
          
          <code class="ruby">          false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="463">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="464">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="465">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="466">
          <span class="hits">2</span>
          
          <code class="ruby">      def extract_meta_data(method, *args)</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="467">
          <span class="hits">20</span>
          
          <code class="ruby">        method = method.to_s.sub(&#39;?&#39;, &#39;&#39;)</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="468">
          <span class="hits">20</span>
          
          <code class="ruby">        if method =~ /=/</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="469">
          <span class="hits">2</span>
          
          <code class="ruby">          instance_variable_set(&quot;@#{method.sub(&#39;=&#39;, &#39;&#39;)}&quot;, args.first)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="470">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="471">
          <span class="hits">18</span>
          
          <code class="ruby">          instance_variable_get(&quot;@#{method}&quot;) || meta[method.to_sym]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="472">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="473">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="474">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="475">
          <span class="hits">2</span>
          
          <code class="ruby">      def method_missing(method, *args, &amp;block) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="476">
          <span class="hits">20</span>
          
          <code class="ruby">        if meta_data_method?(method)</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="477">
          <span class="hits">20</span>
          
          <code class="ruby">          extract_meta_data(method, *args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="478">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="479">
          
          
          <code class="ruby">          super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="480">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="481">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="482">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="483">
          
          
          <code class="ruby">      # Returns true if the bit is constrained by the given/any feature</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="484">
          <span class="hits">2</span>
          
          <code class="ruby">      def enabled_by_feature?(name = nil)</code>
        </li>
      
        <li class="covered" data-hits="406" data-linenumber="485">
          <span class="hits">406</span>
          
          <code class="ruby">        if !name</code>
        </li>
      
        <li class="covered" data-hits="212" data-linenumber="486">
          <span class="hits">212</span>
          
          <code class="ruby">          !!feature</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="487">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="194" data-linenumber="488">
          <span class="hits">194</span>
          
          <code class="ruby">          if feature.class == Array</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="489">
          <span class="hits">1</span>
          
          <code class="ruby">            feature.each do |f|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="490">
          <span class="hits">2</span>
          
          <code class="ruby">              if f == name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="491">
          
          
          <code class="ruby">                return true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="492">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="493">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="494">
          <span class="hits">1</span>
          
          <code class="ruby">            return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="495">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="193" data-linenumber="496">
          <span class="hits">193</span>
          
          <code class="ruby">            feature == name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="497">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="498">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="499">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="500">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :has_feature_constraint?, :enabled_by_feature?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="501">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="502">
          <span class="hits">2</span>
          
          <code class="ruby">      def enabled?</code>
        </li>
      
        <li class="covered" data-hits="2835" data-linenumber="503">
          <span class="hits">2835</span>
          
          <code class="ruby">        if feature</code>
        </li>
      
        <li class="covered" data-hits="224" data-linenumber="504">
          <span class="hits">224</span>
          
          <code class="ruby">          value = false</code>
        </li>
      
        <li class="covered" data-hits="224" data-linenumber="505">
          <span class="hits">224</span>
          
          <code class="ruby">          current_owner = self</code>
        </li>
      
        <li class="covered" data-hits="224" data-linenumber="506">
          <span class="hits">224</span>
          
          <code class="ruby">          if feature.class == Array</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="507">
          <span class="hits">1</span>
          
          <code class="ruby">            feature.each do |f|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="508">
          <span class="hits">2</span>
          
          <code class="ruby">              current_owner = self</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="509">
          <span class="hits">2</span>
          
          <code class="ruby">              loop do</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="510">
          <span class="hits">4</span>
          
          <code class="ruby">                if current_owner.respond_to?(:owner)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="511">
          <span class="hits">4</span>
          
          <code class="ruby">                  current_owner = current_owner.owner</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="512">
          <span class="hits">4</span>
          
          <code class="ruby">                  if current_owner.respond_to?(:has_feature?)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="513">
          <span class="hits">2</span>
          
          <code class="ruby">                    if current_owner.has_feature?(f)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="514">
          <span class="hits">2</span>
          
          <code class="ruby">                      value = true</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="515">
          <span class="hits">2</span>
          
          <code class="ruby">                      break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="516">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="517">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="518">
          
          
          <code class="ruby">                else # if current owner does not have a owner</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="519">
          
          
          <code class="ruby">                  value = false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="520">
          
          
          <code class="ruby">                  break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="521">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="522">
          
          
          <code class="ruby">              end # loop end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="523">
          <span class="hits">2</span>
          
          <code class="ruby">              unless value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="524">
          
          
          <code class="ruby">                if Origen.top_level &amp;&amp; \</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="525">
          
          
          <code class="ruby">                   Origen.top_level.respond_to?(:has_feature?) &amp;&amp; \</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="526">
          
          
          <code class="ruby">                   Origen.top_level.has_feature?(f)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="527">
          
          
          <code class="ruby">                  value = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="528">
          
          
          <code class="ruby">                  unless value</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="529">
          
          
          <code class="ruby">                    break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="530">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="531">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="532">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="533">
          <span class="hits">2</span>
          
          <code class="ruby">              unless value</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="534">
          
          
          <code class="ruby">                break # break if feature not found and return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="535">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="536">
          
          
          <code class="ruby">            end # iterated through all features in array</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="537">
          <span class="hits">1</span>
          
          <code class="ruby">            return value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="538">
          
          
          <code class="ruby">          else # if feature.class != Array</code>
        </li>
      
        <li class="covered" data-hits="223" data-linenumber="539">
          <span class="hits">223</span>
          
          <code class="ruby">            loop do</code>
        </li>
      
        <li class="covered" data-hits="555" data-linenumber="540">
          <span class="hits">555</span>
          
          <code class="ruby">              if current_owner.respond_to?(:owner)</code>
        </li>
      
        <li class="covered" data-hits="502" data-linenumber="541">
          <span class="hits">502</span>
          
          <code class="ruby">                current_owner = current_owner.owner</code>
        </li>
      
        <li class="covered" data-hits="502" data-linenumber="542">
          <span class="hits">502</span>
          
          <code class="ruby">                if current_owner.respond_to?(:has_feature?)</code>
        </li>
      
        <li class="covered" data-hits="226" data-linenumber="543">
          <span class="hits">226</span>
          
          <code class="ruby">                  if current_owner.has_feature?(feature)</code>
        </li>
      
        <li class="covered" data-hits="170" data-linenumber="544">
          <span class="hits">170</span>
          
          <code class="ruby">                    value = true</code>
        </li>
      
        <li class="covered" data-hits="170" data-linenumber="545">
          <span class="hits">170</span>
          
          <code class="ruby">                    break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="546">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="547">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="548">
          
          
          <code class="ruby">              else # if current owner does not have a owner</code>
        </li>
      
        <li class="covered" data-hits="53" data-linenumber="549">
          <span class="hits">53</span>
          
          <code class="ruby">                value = false</code>
        </li>
      
        <li class="covered" data-hits="53" data-linenumber="550">
          <span class="hits">53</span>
          
          <code class="ruby">                break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="551">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="552">
          
          
          <code class="ruby">            end # loop end</code>
        </li>
      
        <li class="covered" data-hits="223" data-linenumber="553">
          <span class="hits">223</span>
          
          <code class="ruby">            unless value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="554">
          
          
          <code class="ruby">              if Origen.top_level &amp;&amp; \</code>
        </li>
      
        <li class="covered" data-hits="53" data-linenumber="555">
          <span class="hits">53</span>
          
          <code class="ruby">                 Origen.top_level.respond_to?(:has_feature?) &amp;&amp; \</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="556">
          
          
          <code class="ruby">                 Origen.top_level.has_feature?(feature)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="557">
          
          
          <code class="ruby">                value = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="558">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="559">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="223" data-linenumber="560">
          <span class="hits">223</span>
          
          <code class="ruby">            return value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="561">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="562">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="2611" data-linenumber="563">
          <span class="hits">2611</span>
          
          <code class="ruby">          return true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="564">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="565">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="566">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="567">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="568">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="4536e70f12f26dca765a78bbada36f31ebc6d8c9">
  <div class="header">
    <h3>lib/origen/registers/bit_collection.rb</h3>
    <h4><span class="red">73.95 %</span> covered</h4>
    <div>
      <b>403</b> relevant lines. 
      <span class="green"><b>298</b> lines covered</span> and
      <span class="red"><b>105</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Registers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # This is a regular Ruby array that is used to store collections of Bit objects, it has additional</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # methods added to allow interaction with the contained bits.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    # All Ruby array methods are also available - http://www.ruby-doc.org/core/classes/Array.html</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    # A BitCollection is returned whenever a subset of bits is requested from a register. Also whenever</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    # any of these methods are called on a register object a BitCollection is created on the fly that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">    # contains all bits in the register. This means that when interacting with a Register, a single Bit,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    # or a group of Bit objects, the same API can be used as described below.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">    class BitCollection &lt; Array</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="12">
          <span class="hits">2</span>
          
          <code class="ruby">      include Origen::SubBlocks::Path</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="13">
          <span class="hits">2</span>
          
          <code class="ruby">      include Netlist::Connectable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">      DONT_CARE_CHAR = &#39;X&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">      OVERLAY_CHAR = &#39;V&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">      STORE_CHAR = &#39;S&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="19">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="21">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize(reg, name, data = []) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="1548" data-linenumber="22">
          <span class="hits">1548</span>
          
          <code class="ruby">        if reg.respond_to?(:has_bits_enabled_by_feature?) &amp;&amp; reg.has_parameter_bound_bits?</code>
        </li>
      
        <li class="covered" data-hits="56" data-linenumber="23">
          <span class="hits">56</span>
          
          <code class="ruby">          reg.update_bound_bits unless reg.updating_bound_bits?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1548" data-linenumber="25">
          <span class="hits">1548</span>
          
          <code class="ruby">        @reg = reg</code>
        </li>
      
        <li class="covered" data-hits="1548" data-linenumber="26">
          <span class="hits">1548</span>
          
          <code class="ruby">        @name = name</code>
        </li>
      
        <li class="covered" data-hits="5750" data-linenumber="27">
          <span class="hits">5750</span>
          
          <code class="ruby">        [data].flatten.each { |item| self &lt;&lt; item }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="30">
          <span class="hits">2</span>
          
          <code class="ruby">      def terminal?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="31">
          
          
          <code class="ruby">        true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="34">
          <span class="hits">2</span>
          
          <code class="ruby">      def bind(live_parameter)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">        parent.bind(name, live_parameter)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="38">
          <span class="hits">2</span>
          
          <code class="ruby">      def [](*indexes)</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="39">
          <span class="hits">83</span>
          
          <code class="ruby">        return self if indexes.empty?</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="40">
          <span class="hits">82</span>
          
          <code class="ruby">        b = BitCollection.new(parent, name)</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="41">
          <span class="hits">82</span>
          
          <code class="ruby">        expand_and_order(*indexes).each do |i|</code>
        </li>
      
        <li class="covered" data-hits="106" data-linenumber="42">
          <span class="hits">106</span>
          
          <code class="ruby">          b &lt;&lt; fetch(i)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">        # When 1 bit requested just return that bit, this is consistent with the original</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">        # behaviour before sub collections were added</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="46">
          <span class="hits">82</span>
          
          <code class="ruby">        if b.size == 1</code>
        </li>
      
        <li class="covered" data-hits="78" data-linenumber="47">
          <span class="hits">78</span>
          
          <code class="ruby">          b.first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="49">
          <span class="hits">4</span>
          
          <code class="ruby">          b</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="52">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :bits, :[]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="53">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :bit, :[]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="55">
          <span class="hits">2</span>
          
          <code class="ruby">      def parent</code>
        </li>
      
        <li class="covered" data-hits="170" data-linenumber="56">
          <span class="hits">170</span>
          
          <code class="ruby">        @reg</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="59">
          <span class="hits">2</span>
          
          <code class="ruby">      def path_var</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="60">
          <span class="hits">18</span>
          
          <code class="ruby">        if first.path_var</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="61">
          <span class="hits">4</span>
          
          <code class="ruby">          if first.path_var =~ /^\./</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="62">
          <span class="hits">2</span>
          
          <code class="ruby">            base = parent.path(relative_to: parent.parent)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="63">
          <span class="hits">2</span>
          
          <code class="ruby">            &quot;#{base}#{first.path_var}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="65">
          <span class="hits">2</span>
          
          <code class="ruby">            first.path_var</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="68">
          <span class="hits">14</span>
          
          <code class="ruby">          base = parent.path(relative_to: parent.parent)</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="69">
          <span class="hits">14</span>
          
          <code class="ruby">          if size == 1</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="70">
          <span class="hits">8</span>
          
          <code class="ruby">            &quot;#{base}[#{position}]&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="72">
          <span class="hits">6</span>
          
          <code class="ruby">            &quot;#{base}[#{position + size - 1}:#{position}]&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="77">
          <span class="hits">2</span>
          
          <code class="ruby">      def abs_path</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="78">
          <span class="hits">23</span>
          
          <code class="ruby">        first.abs_path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="81">
          <span class="hits">2</span>
          
          <code class="ruby">      Bit::ACCESS_CODES.each do |code, _meta|</code>
        </li>
      
        <li class="covered" data-hits="56" data-linenumber="82">
          <span class="hits">56</span>
          
          <code class="ruby">        define_method &quot;#{code}?&quot; do</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="83">
          <span class="hits">40</span>
          
          <code class="ruby">          all? { |b| b.undefined? || b.send(&quot;#{code}?&quot;) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">      # Update the register contents with the live value from the device under test.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">      # The current tester needs to be an OrigenLink driver. Upon calling this method a request will</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">      # be made to read the given register, the read data will be captured and the register model</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">      # will be updated.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">      # The register parent register object is returned, this means that calling .sync on a register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">      # or bitcollection object will automatically update it and the display the register in the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">      # console.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">      # Normally this method should be called from a breakpoint during pattern debug, and it is</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">      # not intended to be inserted into production pattern logic.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="99">
          <span class="hits">2</span>
          
          <code class="ruby">      def sync(size = nil, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="100">
          
          
          <code class="ruby">        size, options = nil, size if size.is_a?(Hash)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="101">
          
          
          <code class="ruby">        if tester.try(:link?)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="102">
          
          
          <code class="ruby">          preserve_flags do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="103">
          
          
          <code class="ruby">            v = tester.capture do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="104">
          
          
          <code class="ruby">              store!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="106">
          
          
          <code class="ruby">            reverse_each.with_index do |bit, i|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="107">
          
          
          <code class="ruby">              bit.instance_variable_set(&#39;@updated_post_reset&#39;, true)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="108">
          
          
          <code class="ruby">              bit.instance_variable_set(&#39;@data&#39;, v.first[i])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="111">
          
          
          <code class="ruby">          if size</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="112">
          
          
          <code class="ruby">            puts &quot;#{parent.address.to_s(16).upcase}: &quot; + data.to_s(16).upcase.rjust(Origen.top_level.memory_width / 4, &#39;0&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="113">
          
          
          <code class="ruby">            if size &gt; 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="114">
          
          
          <code class="ruby">              step = Origen.top_level.memory_width / 8</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="115">
          
          
          <code class="ruby">              Origen.top_level.mem(parent.address + step).sync(size - 1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">            nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="119">
          
          
          <code class="ruby">            parent</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="122">
          
          
          <code class="ruby">          Origen.log.warning &#39;Sync is not supported on the current tester driver, register not updated&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="125">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :sync!, :sync</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">      # At the end of the given block, the status flags of all bits will be restored to the state that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">      # they were upon entry to the block</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="129">
          <span class="hits">2</span>
          
          <code class="ruby">      def preserve_flags</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="130">
          
          
          <code class="ruby">        orig = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="131">
          
          
          <code class="ruby">        each do |bit|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="132">
          
          
          <code class="ruby">          orig &lt;&lt; [bit.overlay_str, bit.is_to_be_read?, bit.is_to_be_stored?]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="134">
          
          
          <code class="ruby">        yield</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="135">
          
          
          <code class="ruby">        each do |bit|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="136">
          
          
          <code class="ruby">          bit.clear_flags</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="137">
          
          
          <code class="ruby">          flags = orig.shift</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="138">
          
          
          <code class="ruby">          bit.overlay(flags[0])</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="139">
          
          
          <code class="ruby">          bit.read if flags[1]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="140">
          
          
          <code class="ruby">          bit.store if flags[2]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="142">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">      # Copies all data and flags from one bit collection (or reg) object to another</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">      # This method will accept a dumb value as the argument, in which case it is essentially a write,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">      # however it will also clear all flags.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="149">
          <span class="hits">2</span>
          
          <code class="ruby">      def copy_all(reg)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="150">
          <span class="hits">2</span>
          
          <code class="ruby">        if reg.respond_to?(:contains_bits?) &amp;&amp; reg.contains_bits?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="151">
          <span class="hits">1</span>
          
          <code class="ruby">          unless reg.size == size</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="152">
          
          
          <code class="ruby">            puts &#39;Bit collection copy must be performed on collections of the same size.&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="153">
          
          
          <code class="ruby">            puts &#39;You can fix this by calling copy on a subset of the bits you require, e.g.&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="154">
          
          
          <code class="ruby">            puts &#39;  larger_bit_collection[3..0].copy_all(smaller_bit_collection)&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="155">
          
          
          <code class="ruby">            puts</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="156">
          
          
          <code class="ruby">            fail &#39;Mismatched size for bit collection copy&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="158">
          <span class="hits">1</span>
          
          <code class="ruby">          size.times do |i|</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="159">
          <span class="hits">8</span>
          
          <code class="ruby">            source_bit = reg.bit[i]</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="160">
          <span class="hits">8</span>
          
          <code class="ruby">            if source_bit</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="161">
          <span class="hits">8</span>
          
          <code class="ruby">              self[i].overlay(source_bit.overlay_str) if source_bit.has_overlay?</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="162">
          <span class="hits">8</span>
          
          <code class="ruby">              self[i].write(source_bit.data)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="164">
          <span class="hits">8</span>
          
          <code class="ruby">              self[i].read if source_bit.is_to_be_read?</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="165">
          <span class="hits">8</span>
          
          <code class="ruby">              self[i].store if source_bit.is_to_be_stored?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="169">
          <span class="hits">1</span>
          
          <code class="ruby">          write(reg)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="170">
          <span class="hits">1</span>
          
          <code class="ruby">          clear_flags</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="172">
          <span class="hits">2</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">      # Returns the access attribute of the first contained bit, in most normal use cases</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby">      # the application will naturally guarantee that when this is called all of the bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby">      # in the collection have the same access value.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">      # If you are worried about hitting the case where some bits have different values then</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby">      # use access!, but this will be a bit less efficient</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="181">
          <span class="hits">2</span>
          
          <code class="ruby">      def access(value = nil)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="182">
          <span class="hits">1</span>
          
          <code class="ruby">        if value.nil?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="183">
          <span class="hits">1</span>
          
          <code class="ruby">          first.access</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby">        else # set access</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="185">
          
          
          <code class="ruby">          each { |b| b.set_access(value) }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="186">
          
          
          <code class="ruby">          self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby">      # Like access but will raise an error if not all bits in the collection have the same</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">      # access value</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="192">
          <span class="hits">2</span>
          
          <code class="ruby">      def access!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="193">
          
          
          <code class="ruby">        val = access</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="194">
          
          
          <code class="ruby">        if any? { |b| b.access != val }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="195">
          
          
          <code class="ruby">          fail &#39;Not all bits the collection have the same access value!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="197">
          
          
          <code class="ruby">        val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">      # Returns the description of the given bit(s) if any, if none then an empty array</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby">      # will be returned</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby">      # **Note** Adding a description field will override any comment-driven documentation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">      # of a bit collection (ie markdown style comments)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="205">
          <span class="hits">2</span>
          
          <code class="ruby">      def description(bitname = nil, options = {})</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="206">
          <span class="hits">15</span>
          
          <code class="ruby">        bitname, options = nil, bitname if bitname.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="207">
          <span class="hits">15</span>
          
          <code class="ruby">        if name == :unknown</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="208">
          
          
          <code class="ruby">          []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="210">
          <span class="hits">15</span>
          
          <code class="ruby">          @reg.description(name, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="214">
          <span class="hits">2</span>
          
          <code class="ruby">      def full_name(bitname = nil, options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="215">
          <span class="hits">2</span>
          
          <code class="ruby">        bitname, options = nil, bitname if bitname.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="216">
          <span class="hits">2</span>
          
          <code class="ruby">        unless name == :unknown</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="217">
          <span class="hits">2</span>
          
          <code class="ruby">          @reg.full_name(name, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="221">
          <span class="hits">2</span>
          
          <code class="ruby">      def bit_value_descriptions(_bitname = nil)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="222">
          <span class="hits">8</span>
          
          <code class="ruby">        if name == :unknown</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="223">
          
          
          <code class="ruby">          []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="225">
          <span class="hits">8</span>
          
          <code class="ruby">          @reg.bit_value_descriptions(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="226">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby">      # Returns a dummy bit collection that is populated with un-writable bits that will</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby">      # read back as 0. This can be useful for padding out spaces in registers with something that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="231">
          
          
          <code class="ruby">      # responds like conventional bits.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="232">
          <span class="hits">2</span>
          
          <code class="ruby">      def self.dummy(reg, name = nil, options = {})</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="233">
          <span class="hits">3</span>
          
          <code class="ruby">        name, options = nil, name if name.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="234">
          <span class="hits">3</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby">          size: 8,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">          pos:  0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="238">
          <span class="hits">3</span>
          
          <code class="ruby">        collection = new(reg, name)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="239">
          <span class="hits">3</span>
          
          <code class="ruby">        pos = options[:pos]</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="240">
          <span class="hits">3</span>
          
          <code class="ruby">        options[:size].times do</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="241">
          <span class="hits">33</span>
          
          <code class="ruby">          bit = Bit.new(reg, pos, writable: false, feature: :dummy_feature)</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="242">
          <span class="hits">33</span>
          
          <code class="ruby">          collection &lt;&lt; bit</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="243">
          <span class="hits">33</span>
          
          <code class="ruby">          pos += 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="245">
          <span class="hits">3</span>
          
          <code class="ruby">        collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="248">
          <span class="hits">2</span>
          
          <code class="ruby">      def contains_bits?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="249">
          <span class="hits">1</span>
          
          <code class="ruby">        true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="251">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="252">
          <span class="hits">2</span>
          
          <code class="ruby">      def inspect</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="253">
          
          
          <code class="ruby">        &quot;&lt;#{self.class}:#{object_id}&gt;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="254">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="255">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">      # Returns the LSB position of the collection</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="257">
          <span class="hits">2</span>
          
          <code class="ruby">      def position</code>
        </li>
      
        <li class="covered" data-hits="436" data-linenumber="258">
          <span class="hits">436</span>
          
          <code class="ruby">        first.position</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby">      # Returns the data value held by the collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="262">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby">      #   reg(:control).write(0x55)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">      #   reg(:control).data         #  =&gt; 0x55, assuming the reg has the required bits to store that</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="265">
          <span class="hits">2</span>
          
          <code class="ruby">      def data</code>
        </li>
      
        <li class="covered" data-hits="623" data-linenumber="266">
          <span class="hits">623</span>
          
          <code class="ruby">        data = 0</code>
        </li>
      
        <li class="covered" data-hits="623" data-linenumber="267">
          <span class="hits">623</span>
          
          <code class="ruby">        each_with_index do |bit, i|</code>
        </li>
      
        <li class="covered" data-hits="3197" data-linenumber="268">
          <span class="hits">3197</span>
          
          <code class="ruby">          return undefined if bit.is_a?(Origen::UndefinedClass)</code>
        </li>
      
        <li class="covered" data-hits="3174" data-linenumber="269">
          <span class="hits">3174</span>
          
          <code class="ruby">          data |= bit.data &lt;&lt; i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="270">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="600" data-linenumber="271">
          <span class="hits">600</span>
          
          <code class="ruby">        data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="273">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :val, :data</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="274">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :value, :data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="276">
          
          
          <code class="ruby">      # Returns the inverse of the data value held by the collection</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="277">
          <span class="hits">2</span>
          
          <code class="ruby">      def data_b</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby">        # (&amp; operation takes care of Bignum formatting issues)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="279">
          
          
          <code class="ruby">        ~data &amp; ((1 &lt;&lt; size) - 1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="280">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby">      # Supports reg.bit[0] and bitcollection.bit[0]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="283">
          <span class="hits">2</span>
          
          <code class="ruby">      def bit</code>
        </li>
      
        <li class="covered" data-hits="76" data-linenumber="284">
          <span class="hits">76</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="285">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="286">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="287">
          
          
          <code class="ruby">      # Set the data value of the collection within the patgen, but not on silicon - i.e. calling</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">      # write will not trigger a pattern write event.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="289">
          <span class="hits">2</span>
          
          <code class="ruby">      def write(value, options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">        # If an array is written it means a data value and an overlay have been supplied</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="291">
          
          
          <code class="ruby">        # in one go...</code>
        </li>
      
        <li class="covered" data-hits="123" data-linenumber="292">
          <span class="hits">123</span>
          
          <code class="ruby">        if value.is_a?(Array) &amp;&amp; !value.is_a?(BitCollection)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="293">
          
          
          <code class="ruby">          overlay(value[1])</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="294">
          
          
          <code class="ruby">          value = value[0]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="295">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="123" data-linenumber="296">
          <span class="hits">123</span>
          
          <code class="ruby">        value = value.data if value.respond_to?(&#39;data&#39;)</code>
        </li>
      
        <li class="covered" data-hits="1508" data-linenumber="297">
          <span class="hits">1508</span>
          
          <code class="ruby">        each_with_index { |bit, i| bit.write(value[i], options) }</code>
        </li>
      
        <li class="covered" data-hits="123" data-linenumber="298">
          <span class="hits">123</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="300">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :data=, :write</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="301">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :value=, :write</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="302">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :val=, :write</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="303">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby">      # Will tag all bits for read and if a data value is supplied it</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="305">
          
          
          <code class="ruby">      # will update the expected data for when the read is performed.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="306">
          <span class="hits">2</span>
          
          <code class="ruby">      def read(value = nil, options = {}) # :nodoc:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby">        # First properly assign the args if value is absent...</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="308">
          <span class="hits">18</span>
          
          <code class="ruby">        if value.is_a?(Hash)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="309">
          
          
          <code class="ruby">          options = value</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="310">
          
          
          <code class="ruby">          value = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="311">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="312">
          <span class="hits">18</span>
          
          <code class="ruby">        if value</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="313">
          <span class="hits">11</span>
          
          <code class="ruby">          value = Reg.clean_value(value)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="314">
          <span class="hits">11</span>
          
          <code class="ruby">          write(value, force: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="315">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="316">
          <span class="hits">18</span>
          
          <code class="ruby">        if options[:mask]</code>
        </li>
      
        <li class="covered" data-hits="42" data-linenumber="317">
          <span class="hits">42</span>
          
          <code class="ruby">          each_with_index { |bit, i| bit.read if options[:mask][i] == 1 }</code>
        </li>
      
        <li class="covered" data-hits="42" data-linenumber="318">
          <span class="hits">42</span>
          
          <code class="ruby">          each_with_index { |bit, i| bit.clear_read_flag if options[:mask][i] == 0 }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="320">
          <span class="hits">16</span>
          
          <code class="ruby">          each(&amp;:read)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="321">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="322">
          <span class="hits">18</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="323">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="324">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :assert, :read</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="325">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="326">
          
          
          <code class="ruby">      # Returns a value representing the bit collection / register where a bit value of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="327">
          
          
          <code class="ruby">      # 1 means the bit is enabled for the given operation.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="328">
          <span class="hits">2</span>
          
          <code class="ruby">      def enable_mask(operation)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="329">
          <span class="hits">2</span>
          
          <code class="ruby">        str = &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="330">
          <span class="hits">2</span>
          
          <code class="ruby">        shift_out_left do |bit|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="331">
          
          
          <code class="ruby">          if operation == :store &amp;&amp; bit.is_to_be_stored? ||</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="332">
          <span class="hits">32</span>
          
          <code class="ruby">             operation == :read &amp;&amp; bit.is_to_be_read? ||</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="333">
          
          
          <code class="ruby">             operation == :overlay &amp;&amp; bit.has_overlay?</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="334">
          <span class="hits">4</span>
          
          <code class="ruby">            str += &#39;1&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="335">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="336">
          <span class="hits">28</span>
          
          <code class="ruby">            str += &#39;0&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="337">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="338">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="339">
          <span class="hits">2</span>
          
          <code class="ruby">        str.to_i(2)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="340">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="341">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="342">
          
          
          <code class="ruby">      # Attaches the supplied overlay string to all bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="343">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="344">
          
          
          <code class="ruby">      # reg(:data).overlay(&quot;data_val&quot;)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="345">
          <span class="hits">2</span>
          
          <code class="ruby">      def overlay(value)</code>
        </li>
      
        <li class="covered" data-hits="81" data-linenumber="346">
          <span class="hits">81</span>
          
          <code class="ruby">        each { |bit| bit.overlay(value) }</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="347">
          <span class="hits">7</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="348">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="349">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="350">
          
          
          <code class="ruby">      # Resets all bits, this clears all flags and assigns the data value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="351">
          
          
          <code class="ruby">      # back to the reset state</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="352">
          <span class="hits">2</span>
          
          <code class="ruby">      def reset</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="353">
          <span class="hits">9</span>
          
          <code class="ruby">        each(&amp;:reset)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="354">
          <span class="hits">9</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="355">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="356">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="357">
          
          
          <code class="ruby">      # Shifts out a stream of bit objects corresponding to the size of the BitCollection. i.e. calling</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="358">
          
          
          <code class="ruby">      # this on a 16-bit register this will pass back 16 bit objects.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="359">
          
          
          <code class="ruby">      # If there are holes in the given register then a dummy bit object will be returned that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="360">
          
          
          <code class="ruby">      # is not writable and which will always read as 0.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="361">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="362">
          
          
          <code class="ruby">      #   reg(:data).shift_out_left do |bit|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="363">
          
          
          <code class="ruby">      #       bist_shift(bit)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="364">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="365">
          <span class="hits">2</span>
          
          <code class="ruby">      def shift_out_left</code>
        </li>
      
        <li class="covered" data-hits="206" data-linenumber="366">
          <span class="hits">206</span>
          
          <code class="ruby">        reverse_each { |bit| yield bit }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="367">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="368">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="369">
          
          
          <code class="ruby">      # Same as Reg#shift_out_left but starts from the MSB</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="370">
          <span class="hits">2</span>
          
          <code class="ruby">      def shift_out_right</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="371">
          <span class="hits">27</span>
          
          <code class="ruby">        each { |bit| yield bit }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="372">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="373">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="374">
          
          
          <code class="ruby">      # Returns true if any bits have the read flag set - see Bit#is_to_be_read?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="375">
          
          
          <code class="ruby">      # for more details.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="376">
          <span class="hits">2</span>
          
          <code class="ruby">      def is_to_be_read?</code>
        </li>
      
        <li class="covered" data-hits="71" data-linenumber="377">
          <span class="hits">71</span>
          
          <code class="ruby">        any?(&amp;:is_to_be_read?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="378">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="380">
          
          
          <code class="ruby">      # Returns true if any bits have the store flag set - see Bit#is_to_be_stored?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="381">
          
          
          <code class="ruby">      # for more details.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="382">
          <span class="hits">2</span>
          
          <code class="ruby">      def is_to_be_stored?</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="383">
          <span class="hits">30</span>
          
          <code class="ruby">        any?(&amp;:is_to_be_stored?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="384">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="385">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="386">
          
          
          <code class="ruby">      # Returns true if any bits have the update_required flag set - see Bit#update_required?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="387">
          
          
          <code class="ruby">      # for more details.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="388">
          <span class="hits">2</span>
          
          <code class="ruby">      def update_required?</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="389">
          <span class="hits">5</span>
          
          <code class="ruby">        any?(&amp;:update_required?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="390">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="391">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="392">
          
          
          <code class="ruby">      # Calls the clear_flags method on all bits, see Bit#clear_flags for more details</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="393">
          <span class="hits">2</span>
          
          <code class="ruby">      def clear_flags</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="394">
          <span class="hits">3</span>
          
          <code class="ruby">        each(&amp;:clear_flags)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="395">
          <span class="hits">3</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="396">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="397">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="398">
          
          
          <code class="ruby">      # Returns the value you would need to write to the register to put the given</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="399">
          
          
          <code class="ruby">      # value in these bits</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="400">
          <span class="hits">2</span>
          
          <code class="ruby">      def setting(value)</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="401">
          <span class="hits">7</span>
          
          <code class="ruby">        result = 0</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="402">
          <span class="hits">7</span>
          
          <code class="ruby">        each_with_index do |bit, i|</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="403">
          <span class="hits">7</span>
          
          <code class="ruby">          result |= bit.setting(value[i])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="404">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="405">
          <span class="hits">7</span>
          
          <code class="ruby">        result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="406">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="407">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="408">
          
          
          <code class="ruby">      # Returns true if any bits within are tagged for overlay, supply a specific name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="409">
          
          
          <code class="ruby">      # to require a specific overlay only</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="410">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="411">
          
          
          <code class="ruby">      #   myreg.overlay(&quot;data&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="412">
          
          
          <code class="ruby">      #   myreg.has_overlay?              # =&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="413">
          
          
          <code class="ruby">      #   myreg.has_overlay?(&quot;address&quot;)   # =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="414">
          
          
          <code class="ruby">      #   myreg.has_overlay?(&quot;data&quot;)      # =&gt; true</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="415">
          <span class="hits">2</span>
          
          <code class="ruby">      def has_overlay?(name = nil)</code>
        </li>
      
        <li class="covered" data-hits="118" data-linenumber="416">
          <span class="hits">118</span>
          
          <code class="ruby">        any? { |bit| bit.has_overlay?(name) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="417">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="418">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="419">
          
          
          <code class="ruby">      # Cycles through all bits and returns the last overlay value found, it is assumed therefore</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="420">
          
          
          <code class="ruby">      # that all bits have the same overlay value when calling this method</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="421">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="422">
          
          
          <code class="ruby">      #   myreg.overlay(&quot;data&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="423">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="424">
          
          
          <code class="ruby">      #   myreg.overlay_str   # =&gt; &quot;data&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="425">
          <span class="hits">2</span>
          
          <code class="ruby">      def overlay_str</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="426">
          <span class="hits">3</span>
          
          <code class="ruby">        result = &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="427">
          <span class="hits">3</span>
          
          <code class="ruby">        each do |bit|</code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="428">
          <span class="hits">48</span>
          
          <code class="ruby">          result = bit.overlay_str if bit.has_overlay?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="429">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="430">
          <span class="hits">3</span>
          
          <code class="ruby">        result.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="431">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="432">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="433">
          
          
          <code class="ruby">      # Write the bit value on silicon&lt;br&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="434">
          
          
          <code class="ruby">      # This method will update the data value of the bits and then call $top.write_register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="435">
          
          
          <code class="ruby">      # passing the owngin register as the first argument.&lt;br&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="436">
          
          
          <code class="ruby">      # This method is expected to handle writing the current state of the register to silicon.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="437">
          <span class="hits">2</span>
          
          <code class="ruby">      def write!(value = nil, options = {})</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="438">
          <span class="hits">5</span>
          
          <code class="ruby">        value, options = nil, value if value.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="439">
          <span class="hits">5</span>
          
          <code class="ruby">        write(value, options) if value</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="440">
          <span class="hits">5</span>
          
          <code class="ruby">        @reg.request(:write_register, options)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="441">
          <span class="hits">5</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="442">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="443">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="444">
          
          
          <code class="ruby">      # Similar to write! this method will perform the standard read method and then make</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="445">
          
          
          <code class="ruby">      # a call to $top.read_register(self) with the expectation that this method will</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="446">
          
          
          <code class="ruby">      # implement a read event in the pattern.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="447">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="448">
          
          
          <code class="ruby">      #   reg(:data).read!         # Read register :data, expecting whatever value it currently holds</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="449">
          
          
          <code class="ruby">      #   reg(:data).read!(0x5555) # Read register :data, expecting 0x5555</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="450">
          <span class="hits">2</span>
          
          <code class="ruby">      def read!(value = nil, options = {})</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="451">
          <span class="hits">6</span>
          
          <code class="ruby">        value, options = nil, value if value.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="452">
          <span class="hits">6</span>
          
          <code class="ruby">        read(value, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="453">
          
          
          <code class="ruby">        # launch a read reg</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="454">
          <span class="hits">6</span>
          
          <code class="ruby">        @reg.request(:read_register, options)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="455">
          <span class="hits">6</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="456">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="457">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :assert!, :read!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="458">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="459">
          
          
          <code class="ruby">      # Normally whenever a register is processed by the $top.read_register method</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="460">
          
          
          <code class="ruby">      # it will call Reg#clear_flags to acknowledge that the read has been performed,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="461">
          
          
          <code class="ruby">      # which clears the read and store flags for the given bits. Normally however you</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="462">
          
          
          <code class="ruby">      # want overlays to stick around such that whenever a given bit is written/read its</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="463">
          
          
          <code class="ruby">      # data is always picked from an overlay.&lt;br&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="464">
          
          
          <code class="ruby">      # Call this passing in false for a given register to cause the overlay data to also</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="465">
          
          
          <code class="ruby">      # be cleared by Reg#clear_flags.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="466">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="467">
          
          
          <code class="ruby">      #   reg(:data).overlay(&quot;data_val&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="468">
          
          
          <code class="ruby">      #   reg(:data).has_overlay?           # =&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="469">
          
          
          <code class="ruby">      #   reg(:data).clear_flags</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="470">
          
          
          <code class="ruby">      #   reg(:data).has_overlay?           # =&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="471">
          
          
          <code class="ruby">      #   reg(:data).sticky_overlay(false)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="472">
          
          
          <code class="ruby">      #   reg(:data).clear_flags</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="473">
          
          
          <code class="ruby">      #   reg(:data).has_overlay?           # =&gt; false</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="474">
          <span class="hits">2</span>
          
          <code class="ruby">      def sticky_overlay(set = true)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="475">
          
          
          <code class="ruby">        each { |bit| bit.sticky_overlay = set }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="476">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="477">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="478">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :sticky_overlays, :sticky_overlay</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="479">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="480">
          
          
          <code class="ruby">      # Similar to sticky_overlay this method affects how the store flags are treated by</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="481">
          
          
          <code class="ruby">      # Reg#clear_flags.&lt;br&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="482">
          
          
          <code class="ruby">      # The default is that store flags will get cleared  by Reg#clear_flags, passing true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="483">
          
          
          <code class="ruby">      # into this method will override this and prevent them from clearing.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="484">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="485">
          
          
          <code class="ruby">      #   reg(:data).sticky_store(true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="486">
          
          
          <code class="ruby">      #   reg(:data).store</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="487">
          
          
          <code class="ruby">      #   reg(:data).clear_flags         # Does not clear the request to store</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="488">
          <span class="hits">2</span>
          
          <code class="ruby">      def sticky_store(set = true)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="489">
          
          
          <code class="ruby">        each { |bit| bit.sticky_store = set }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="490">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="491">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="492">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="493">
          
          
          <code class="ruby">      # Marks all bits to be stored</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="494">
          <span class="hits">2</span>
          
          <code class="ruby">      def store</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="495">
          <span class="hits">2</span>
          
          <code class="ruby">        each(&amp;:store)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="496">
          <span class="hits">2</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="497">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="498">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="499">
          
          
          <code class="ruby">      # Marks all bits to be stored and then calls read!</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="500">
          <span class="hits">2</span>
          
          <code class="ruby">      def store!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="501">
          
          
          <code class="ruby">        store</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="502">
          
          
          <code class="ruby">        read!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="503">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="504">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="505">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="506">
          
          
          <code class="ruby">      # Sets the store flag on all bits that already have the overlay flag set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="507">
          
          
          <code class="ruby">      # and then calls $top.read_register passing self as the first argument</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="508">
          <span class="hits">2</span>
          
          <code class="ruby">      def store_overlay_bits!(options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="509">
          
          
          <code class="ruby">        store_overlay_bits(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="510">
          
          
          <code class="ruby">        @reg.request(:read_register, options) # Bypass the normal read method since we don&#39;t want to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="511">
          
          
          <code class="ruby">        # tag the other bits for read</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="512">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="513">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="514">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="515">
          
          
          <code class="ruby">      # Sets the store flag on all bits that already have the overlay flag set</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="516">
          <span class="hits">2</span>
          
          <code class="ruby">      def store_overlay_bits(options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="517">
          
          
          <code class="ruby">        options = { exclude: [],         # Pass in an array of any overlays that are to be excluded from store</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="518">
          
          
          <code class="ruby">                  }.merge(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="519">
          
          
          <code class="ruby">        each do |bit|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="520">
          
          
          <code class="ruby">          bit.store if bit.has_overlay? &amp;&amp; !options[:exclude].include?(bit.overlay_str)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="521">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="522">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="523">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="524">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="525">
          
          
          <code class="ruby">      # Will yield all unique overlay strings attached to the bits within the collection.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="526">
          
          
          <code class="ruby">      # It will also return the number of bits for the overlay (the length) and the current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="527">
          
          
          <code class="ruby">      # data value held in those bits.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="528">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="529">
          
          
          <code class="ruby">      #   reg(:control).unique_overlays do |str, length, data|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="530">
          
          
          <code class="ruby">      #       do_something(str, length, data)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="531">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="532">
          <span class="hits">2</span>
          
          <code class="ruby">      def unique_overlays</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="533">
          
          
          <code class="ruby">        current_overlay = false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="534">
          
          
          <code class="ruby">        length = 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="535">
          
          
          <code class="ruby">        data = 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="536">
          
          
          <code class="ruby">        shift_out_right do |bit|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="537">
          
          
          <code class="ruby">          # Init the current overlay when the first one is encountered</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="538">
          
          
          <code class="ruby">          current_overlay = bit.overlay_str if bit.has_overlay? &amp;&amp; !current_overlay</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="539">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="540">
          
          
          <code class="ruby">          if bit.has_overlay?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="541">
          
          
          <code class="ruby">            if bit.overlay_str != current_overlay</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="542">
          
          
          <code class="ruby">              yield current_overlay, length, data if current_overlay</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="543">
          
          
          <code class="ruby">              length = 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="544">
          
          
          <code class="ruby">              data = 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="545">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="546">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="547">
          
          
          <code class="ruby">            data = data | (bit.data &lt;&lt; length)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="548">
          
          
          <code class="ruby">            length += 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="549">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="550">
          
          
          <code class="ruby">            yield current_overlay, length, data if current_overlay</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="551">
          
          
          <code class="ruby">            length = 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="552">
          
          
          <code class="ruby">            data = 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="553">
          
          
          <code class="ruby">            current_overlay = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="554">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="555">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="556">
          
          
          <code class="ruby">        yield current_overlay, length, data if current_overlay</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="557">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="558">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="559">
          
          
          <code class="ruby">      # Append a value, for example a block identifier, to all overlays</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="560">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="561">
          
          
          <code class="ruby">      #   reg(:data).overlay(&quot;data_val&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="562">
          
          
          <code class="ruby">      #   reg(:data).append_overlays(&quot;_0&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="563">
          
          
          <code class="ruby">      #   reg(:data).overlay_str           # =&gt; &quot;data_val_0&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="564">
          <span class="hits">2</span>
          
          <code class="ruby">      def append_overlays(value)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="565">
          
          
          <code class="ruby">        each do |bit|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="566">
          
          
          <code class="ruby">          bit.overlay(bit.overlay_str + value) if bit.has_overlay?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="567">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="568">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="569">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="570">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="571">
          
          
          <code class="ruby">      # Delete the contained bits from the parent Register</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="572">
          <span class="hits">2</span>
          
          <code class="ruby">      def delete</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="573">
          <span class="hits">2</span>
          
          <code class="ruby">        @reg.delete_bits(self)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="574">
          <span class="hits">2</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="575">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="576">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="577">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_name(name) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="1564" data-linenumber="578">
          <span class="hits">1564</span>
          
          <code class="ruby">        if @name == :unknown</code>
        </li>
      
        <li class="covered" data-hits="297" data-linenumber="579">
          <span class="hits">297</span>
          
          <code class="ruby">          @name = name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="580">
          
          
          <code class="ruby">        elsif ![name].flatten.include?(name)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="581">
          
          
          <code class="ruby">          @name = [@name, name].flatten</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="582">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1564" data-linenumber="583">
          <span class="hits">1564</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="584">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="585">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="586">
          <span class="hits">2</span>
          
          <code class="ruby">      def owner</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="587">
          
          
          <code class="ruby">        first.owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="588">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="589">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="590">
          
          
          <code class="ruby">      # All other methods send to bit 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="591">
          <span class="hits">2</span>
          
          <code class="ruby">      def method_missing(method, *args, &amp;block) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="592">
          <span class="hits">30</span>
          
          <code class="ruby">        if first.respond_to?(method)</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="593">
          <span class="hits">30</span>
          
          <code class="ruby">          if size &gt; 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="594">
          
          
          <code class="ruby">            if [:meta, :meta_data, :metadata].include?(method.to_sym) ||</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="595">
          <span class="hits">11</span>
          
          <code class="ruby">               first.meta_data_method?(method)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="596">
          <span class="hits">11</span>
          
          <code class="ruby">              first.send(method, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="597">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="598">
          
          
          <code class="ruby">              fail &quot;Error, calling #{method} on a multi-bit collection is not implemented!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="599">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="600">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="601">
          <span class="hits">19</span>
          
          <code class="ruby">            first.send(method, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="602">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="603">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="604">
          
          
          <code class="ruby">          fail &quot;BitCollection does not have a method named #{method}!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="605">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="606">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="607">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="608">
          
          
          <code class="ruby">      # Recognize that BitCollection responds to some Bit methods via method_missing</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="609">
          <span class="hits">2</span>
          
          <code class="ruby">      def respond_to?(*args) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="610">
          <span class="hits">25</span>
          
          <code class="ruby">        sym = args.first</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="611">
          <span class="hits">25</span>
          
          <code class="ruby">        first.respond_to?(sym) || super(sym)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="612">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="613">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="614">
          
          
          <code class="ruby">      # Returns true if the values of all bits in the collection are known. The value will be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="615">
          
          
          <code class="ruby">      # unknown in cases where the reset value is undefined or determined by a memory location</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="616">
          
          
          <code class="ruby">      # and where the register has not been written or read to a specific value yet.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="617">
          <span class="hits">2</span>
          
          <code class="ruby">      def has_known_value?</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="618">
          <span class="hits">39</span>
          
          <code class="ruby">        all?(&amp;:has_known_value?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="619">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="620">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="621">
          
          
          <code class="ruby">      # Returns the reset value of the collection, note that this does not reset the register and the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="622">
          
          
          <code class="ruby">      # current data is maintained.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="623">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="624">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="625">
          
          
          <code class="ruby">      #   reg(:control).write(0x55)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="626">
          
          
          <code class="ruby">      #   reg(:control).data         #  =&gt; 0x55</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="627">
          
          
          <code class="ruby">      #   reg(:control).reset_data   #  =&gt; 0x11, assuming the reg was declared with a reset value of 0x11</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="628">
          
          
          <code class="ruby">      #   reg(:control).data         #  =&gt; 0x55</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="629">
          <span class="hits">2</span>
          
          <code class="ruby">      def reset_data(value = nil)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="630">
          
          
          <code class="ruby">        # This method was originally setup to set the reset value by passing an argument</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="631">
          <span class="hits">22</span>
          
          <code class="ruby">        if value</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="632">
          
          
          <code class="ruby">          each_with_index { |bit, i| bit.reset_val = value[i] }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="633">
          
          
          <code class="ruby">          self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="634">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="635">
          <span class="hits">22</span>
          
          <code class="ruby">          data = 0</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="636">
          <span class="hits">22</span>
          
          <code class="ruby">          each_with_index do |bit, i|</code>
        </li>
      
        <li class="covered" data-hits="172" data-linenumber="637">
          <span class="hits">172</span>
          
          <code class="ruby">            return bit.reset_data if bit.reset_data.is_a?(Symbol)</code>
        </li>
      
        <li class="covered" data-hits="160" data-linenumber="638">
          <span class="hits">160</span>
          
          <code class="ruby">            data |= bit.reset_data &lt;&lt; i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="639">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="640">
          <span class="hits">10</span>
          
          <code class="ruby">          data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="641">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="642">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="643">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :reset_val, :reset_data</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="644">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :reset_value, :reset_data</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="645">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :reset_data=, :reset_data</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="646">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :reset_val=, :reset_data</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="647">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :reset_value=, :reset_data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="648">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="649">
          
          
          <code class="ruby">      # Modify writable for bits in collection</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="650">
          <span class="hits">2</span>
          
          <code class="ruby">      def writable(value)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="651">
          
          
          <code class="ruby">        each_with_index { |bit, i| bit.writable = (value[i] == 0b1); bit.set_access_from_rw }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="652">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="653">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="654">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="655">
          
          
          <code class="ruby">      # Modify readable for bits in collection</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="656">
          <span class="hits">2</span>
          
          <code class="ruby">      def readable(value)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="657">
          
          
          <code class="ruby">        each_with_index { |bit, i| bit.readable = (value[i] == 0b1); bit.set_access_from_rw }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="658">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="659">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="660">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="661">
          <span class="hits">2</span>
          
          <code class="ruby">      def feature</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="662">
          <span class="hits">4</span>
          
          <code class="ruby">        feature = []</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="663">
          <span class="hits">4</span>
          
          <code class="ruby">        feature &lt;&lt; fetch(0).feature</code>
        </li>
      
        <li class="covered" data-hits="116" data-linenumber="664">
          <span class="hits">116</span>
          
          <code class="ruby">        each { |bit| feature &lt;&lt; bit.feature if bit.has_feature_constraint? }</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="665">
          <span class="hits">4</span>
          
          <code class="ruby">        feature = feature.flatten.uniq unless feature.empty?</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="666">
          <span class="hits">4</span>
          
          <code class="ruby">        feature.delete(nil) if feature.include?(nil)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="667">
          <span class="hits">4</span>
          
          <code class="ruby">        if !feature.empty?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="668">
          <span class="hits">1</span>
          
          <code class="ruby">          if feature.size == 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="669">
          <span class="hits">1</span>
          
          <code class="ruby">            return feature[0]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="670">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="671">
          
          
          <code class="ruby">            return feature.uniq</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="672">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="673">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="674">
          <span class="hits">3</span>
          
          <code class="ruby">          if Origen.config.strict_errors</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="675">
          
          
          <code class="ruby">            fail &#39;No feature found&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="676">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="677">
          
          
          <code class="ruby">          return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="678">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="679">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="680">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :features, :feature</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="681">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="682">
          
          
          <code class="ruby">      # Return true if there is any feature associated with these bits</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="683">
          <span class="hits">2</span>
          
          <code class="ruby">      def has_feature_constraint?(name = nil)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="684">
          <span class="hits">8</span>
          
          <code class="ruby">        if !name</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="685">
          <span class="hits">4</span>
          
          <code class="ruby">          any?(&amp;:has_feature_constraint?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="686">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="687">
          <span class="hits">38</span>
          
          <code class="ruby">          any? { |bit| bit.enabled_by_feature?(name) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="688">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="689">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="690">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :enabled_by_feature?, :has_feature_constraint?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="691">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="692">
          <span class="hits">2</span>
          
          <code class="ruby">      def enabled?</code>
        </li>
      
        <li class="covered" data-hits="253" data-linenumber="693">
          <span class="hits">253</span>
          
          <code class="ruby">        all?(&amp;:enabled?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="694">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="695">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="696">
          
          
          <code class="ruby">      # Returns true if any bits in the collection are writable</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="697">
          <span class="hits">2</span>
          
          <code class="ruby">      def is_writable?</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="698">
          <span class="hits">30</span>
          
          <code class="ruby">        any?(&amp;:writable?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="699">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="700">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :writable?, :is_writable?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="701">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="702">
          
          
          <code class="ruby">      # Returns true if any bits in the collection are readable</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="703">
          <span class="hits">2</span>
          
          <code class="ruby">      def is_readable?</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="704">
          <span class="hits">30</span>
          
          <code class="ruby">        any?(&amp;:readable?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="705">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="706">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :readable?, :is_readable?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="707">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="708">
          
          
          <code class="ruby">      # Modify clr_only for bits in collection</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="709">
          <span class="hits">2</span>
          
          <code class="ruby">      def clr_only(value)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="710">
          
          
          <code class="ruby">        each_with_index { |bit, i| bit.clr_only = (value[i] == 0b1) }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="711">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="712">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="713">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="714">
          
          
          <code class="ruby">      # Modify set_only for bits in collection</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="715">
          <span class="hits">2</span>
          
          <code class="ruby">      def set_only(value)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="716">
          
          
          <code class="ruby">        each_with_index { |bit, i| bit.set_only = (value[i] == 0b1) }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="717">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="718">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="719">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="720">
          
          
          <code class="ruby">      # Return nvm_dep value held by collection</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="721">
          <span class="hits">2</span>
          
          <code class="ruby">      def nvm_dep</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="722">
          
          
          <code class="ruby">        nvm_dep = 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="723">
          
          
          <code class="ruby">        each_with_index { |bit, i| nvm_dep |= bit.nvm_dep &lt;&lt; i }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="724">
          
          
          <code class="ruby">        nvm_dep</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="725">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="726">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="727">
          
          
          <code class="ruby">      # Clear any w1c set bits back to 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="728">
          <span class="hits">2</span>
          
          <code class="ruby">      def clear_w1c</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="729">
          
          
          <code class="ruby">        each(&amp;:clear_w1c)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="730">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="731">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="732">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="733">
          
          
          <code class="ruby">      # Clear any start set bits back to 0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="734">
          <span class="hits">2</span>
          
          <code class="ruby">      def clear_start</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="735">
          
          
          <code class="ruby">        each(&amp;:clear_start)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="736">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="737">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="738">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="739">
          
          
          <code class="ruby">      # Provides a string summary of the bit collection / register state that would be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="740">
          
          
          <code class="ruby">      # applied to given operation (write or read).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="741">
          
          
          <code class="ruby">      # This is mainly intended to be useful when generating pattern comments describing</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="742">
          
          
          <code class="ruby">      # an upcoming register transaction.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="743">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="744">
          
          
          <code class="ruby">      # This highlights not only bit values bit the status of any flags or overlays that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="745">
          
          
          <code class="ruby">      # are currently set.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="746">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="747">
          
          
          <code class="ruby">      # The data is presented in hex nibble format with individual nibbles are expanded to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="748">
          
          
          <code class="ruby">      # binary format whenever all 4 bits do not have the same status - e.g. if only one</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="749">
          
          
          <code class="ruby">      # of the four is marked for read.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="750">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="751">
          
          
          <code class="ruby">      # The following symbols are used to represent bit state:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="752">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="753">
          
          
          <code class="ruby">      # X - Bit is don&#39;t care (not marked for read)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="754">
          
          
          <code class="ruby">      # V - Bit has been tagged with an overlay</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="755">
          
          
          <code class="ruby">      # S - Bit is marked for store</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="756">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="757">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="758">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="759">
          
          
          <code class="ruby">      #   myreg.status_str(:write)   # =&gt; &quot;0000&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="760">
          
          
          <code class="ruby">      #   myreg.status_str(:read)    # =&gt; &quot;XXXX&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="761">
          
          
          <code class="ruby">      #   myreg[7..4].read(5)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="762">
          
          
          <code class="ruby">      #   myreg.status_str(:read)    # =&gt; &quot;XX5X&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="763">
          
          
          <code class="ruby">      #   myreg[14].read(0)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="764">
          
          
          <code class="ruby">      #   myreg.status_str(:read)    # =&gt; &quot;(x0xx)X5X&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="765">
          <span class="hits">2</span>
          
          <code class="ruby">      def status_str(operation, options = {})</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="766">
          <span class="hits">8</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="767">
          
          
          <code class="ruby">          mark_overlays: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="768">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="769">
          <span class="hits">8</span>
          
          <code class="ruby">        str = &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="770">
          <span class="hits">8</span>
          
          <code class="ruby">        if operation == :read</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="771">
          <span class="hits">6</span>
          
          <code class="ruby">          shift_out_left do |bit|</code>
        </li>
      
        <li class="covered" data-hits="96" data-linenumber="772">
          <span class="hits">96</span>
          
          <code class="ruby">            if bit.is_to_be_stored?</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="773">
          <span class="hits">13</span>
          
          <code class="ruby">              str += STORE_CHAR</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="774">
          
          
          <code class="ruby">            elsif bit.is_to_be_read?</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="775">
          <span class="hits">34</span>
          
          <code class="ruby">              if bit.has_overlay? &amp;&amp; options[:mark_overlays]</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="776">
          <span class="hits">10</span>
          
          <code class="ruby">                str += OVERLAY_CHAR</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="777">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="778">
          <span class="hits">24</span>
          
          <code class="ruby">                str += bit.data.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="779">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="780">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="49" data-linenumber="781">
          <span class="hits">49</span>
          
          <code class="ruby">              str += DONT_CARE_CHAR</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="782">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="783">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="784">
          
          
          <code class="ruby">        elsif operation == :write</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="785">
          <span class="hits">2</span>
          
          <code class="ruby">          shift_out_left do |bit|</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="786">
          <span class="hits">32</span>
          
          <code class="ruby">            if bit.has_overlay? &amp;&amp; options[:mark_overlays]</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="787">
          <span class="hits">5</span>
          
          <code class="ruby">              str += OVERLAY_CHAR</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="788">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="789">
          <span class="hits">27</span>
          
          <code class="ruby">              str += bit.data.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="790">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="791">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="792">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="793">
          
          
          <code class="ruby">          fail &quot;Unknown operation (#{operation}), must be :read or :write&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="794">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="795">
          <span class="hits">8</span>
          
          <code class="ruby">        make_hex_like(str, size / 4)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="796">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="797">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="798">
          
          
          <code class="ruby">      # Shifts the data in the collection left by one place. The data held</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="799">
          
          
          <code class="ruby">      # by the rightmost bit will be set to the given value (0 by default).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="800">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="801">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="802">
          
          
          <code class="ruby">      #   myreg.data          # =&gt; 0b1111</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="803">
          
          
          <code class="ruby">      #   myreg.shift_left</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="804">
          
          
          <code class="ruby">      #   myreg.data          # =&gt; 0b1110</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="805">
          
          
          <code class="ruby">      #   myreg.shift_left</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="806">
          
          
          <code class="ruby">      #   myreg.data          # =&gt; 0b1100</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="807">
          
          
          <code class="ruby">      #   myreg.shift_left(1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="808">
          
          
          <code class="ruby">      #   myreg.data          # =&gt; 0b1001</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="809">
          
          
          <code class="ruby">      #   myreg.shift_left(1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="810">
          
          
          <code class="ruby">      #   myreg.data          # =&gt; 0b0011</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="811">
          <span class="hits">2</span>
          
          <code class="ruby">      def shift_left(data = 0)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="812">
          <span class="hits">4</span>
          
          <code class="ruby">        prev_bit = nil</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="813">
          <span class="hits">4</span>
          
          <code class="ruby">        reverse_each do |bit|</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="814">
          <span class="hits">16</span>
          
          <code class="ruby">          prev_bit.write(bit.data) if prev_bit</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="815">
          <span class="hits">16</span>
          
          <code class="ruby">          prev_bit = bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="816">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="817">
          <span class="hits">4</span>
          
          <code class="ruby">        prev_bit.write(data)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="818">
          <span class="hits">4</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="819">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="820">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="821">
          
          
          <code class="ruby">      # Shifts the data in the collection right by one place. The data held</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="822">
          
          
          <code class="ruby">      # by the leftmost bit will be set to the given value (0 by default).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="823">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="824">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="825">
          
          
          <code class="ruby">      #   myreg.data          # =&gt; 0b1111</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="826">
          
          
          <code class="ruby">      #   myreg.shift_right</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="827">
          
          
          <code class="ruby">      #   myreg.data          # =&gt; 0b0111</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="828">
          
          
          <code class="ruby">      #   myreg.shift_right</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="829">
          
          
          <code class="ruby">      #   myreg.data          # =&gt; 0b0011</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="830">
          
          
          <code class="ruby">      #   myreg.shift_right(1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="831">
          
          
          <code class="ruby">      #   myreg.data          # =&gt; 0b1001</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="832">
          
          
          <code class="ruby">      #   myreg.shift_right(1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="833">
          
          
          <code class="ruby">      #   myreg.data          # =&gt; 0b1100</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="834">
          <span class="hits">2</span>
          
          <code class="ruby">      def shift_right(data = 0)</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="835">
          <span class="hits">29</span>
          
          <code class="ruby">        prev_bit = nil</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="836">
          <span class="hits">29</span>
          
          <code class="ruby">        each do |bit|</code>
        </li>
      
        <li class="covered" data-hits="116" data-linenumber="837">
          <span class="hits">116</span>
          
          <code class="ruby">          prev_bit.write(bit.data) if prev_bit</code>
        </li>
      
        <li class="covered" data-hits="116" data-linenumber="838">
          <span class="hits">116</span>
          
          <code class="ruby">          prev_bit = bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="839">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="840">
          <span class="hits">29</span>
          
          <code class="ruby">        prev_bit.write(data)</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="841">
          <span class="hits">29</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="842">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="843">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="844">
          <span class="hits">2</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="845">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="846">
          
          
          <code class="ruby">      # Converts a binary-like representation of a data value into a hex-like version.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="847">
          
          
          <code class="ruby">      # e.g. input  =&gt; 010S0011SSSS0110   (where S, X or V represent store, don&#39;t care or overlay)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="848">
          
          
          <code class="ruby">      #      output =&gt; (010s)3S6    (i.e. nibbles that are not all of the same type are expanded)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="849">
          <span class="hits">2</span>
          
          <code class="ruby">      def make_hex_like(regval, size_in_nibbles)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="850">
          <span class="hits">8</span>
          
          <code class="ruby">        outstr = &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="851">
          <span class="hits">8</span>
          
          <code class="ruby">        regex = &#39;^&#39;</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="852">
          <span class="hits">40</span>
          
          <code class="ruby">        size_in_nibbles.times { regex += &#39;(....)&#39; }</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="853">
          <span class="hits">8</span>
          
          <code class="ruby">        regex += &#39;$&#39;</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="854">
          <span class="hits">8</span>
          
          <code class="ruby">        Regexp.new(regex) =~ regval</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="855">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="856">
          <span class="hits">8</span>
          
          <code class="ruby">        nibbles = []</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="857">
          <span class="hits">8</span>
          
          <code class="ruby">        size_in_nibbles.times do |n|                   # now grouped by nibble</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="858">
          <span class="hits">32</span>
          
          <code class="ruby">          nibbles &lt;&lt; Regexp.last_match[n + 1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="859">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="860">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="861">
          <span class="hits">8</span>
          
          <code class="ruby">        nibbles.each_with_index do |nibble, i|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="862">
          
          
          <code class="ruby">          # If contains any special chars...</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="863">
          <span class="hits">32</span>
          
          <code class="ruby">          if nibble =~ /[#{DONT_CARE_CHAR}#{STORE_CHAR}#{OVERLAY_CHAR}]/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="864">
          
          
          <code class="ruby">            # If all the same...</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="865">
          <span class="hits">21</span>
          
          <code class="ruby">            if nibble[0] == nibble[1] &amp;&amp; nibble[1] == nibble[2] &amp;&amp; nibble[2] == nibble[3]</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="866">
          <span class="hits">16</span>
          
          <code class="ruby">              outstr += nibble[0, 1] # .to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="867">
          
          
          <code class="ruby">            # Otherwise present this nibble in &#39;binary&#39; format</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="868">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="869">
          <span class="hits">5</span>
          
          <code class="ruby">              outstr += &quot;(#{nibble.downcase})&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="870">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="871">
          
          
          <code class="ruby">          # Otherwise if all 1s and 0s...</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="872">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="873">
          <span class="hits">11</span>
          
          <code class="ruby">            outstr += &#39;%1X&#39; % nibble.to_i(2)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="874">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="875">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="876">
          <span class="hits">8</span>
          
          <code class="ruby">        outstr</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="877">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="878">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="879">
          
          
          <code class="ruby">      # Cleans up indexed references to pins, e.g. makes these equal:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="880">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="881">
          
          
          <code class="ruby">      #   bits(:data)[0,1,2,3]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="882">
          
          
          <code class="ruby">      #   bits(:data)[3,2,1,0]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="883">
          
          
          <code class="ruby">      #   bits(:data)[0..3]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="884">
          
          
          <code class="ruby">      #   bits(:data)[3..0]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="885">
          <span class="hits">2</span>
          
          <code class="ruby">      def expand_and_order(*indexes)</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="886">
          <span class="hits">82</span>
          
          <code class="ruby">        ixs = []</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="887">
          <span class="hits">82</span>
          
          <code class="ruby">        indexes.flatten.each do |index|</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="888">
          <span class="hits">82</span>
          
          <code class="ruby">          if index.is_a?(Range)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="889">
          <span class="hits">4</span>
          
          <code class="ruby">            if index.first &gt; index.last</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="890">
          <span class="hits">4</span>
          
          <code class="ruby">              ixs &lt;&lt; (index.last..index.first).to_a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="891">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="892">
          
          
          <code class="ruby">              ixs &lt;&lt; index.to_a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="893">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="894">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="78" data-linenumber="895">
          <span class="hits">78</span>
          
          <code class="ruby">            ixs &lt;&lt; index</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="896">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="897">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="898">
          <span class="hits">82</span>
          
          <code class="ruby">        ixs.flatten.sort</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="899">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="900">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="901">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="902">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="3586531aa057b6a16b21e65ccf7b47bc3c1ccfd7">
  <div class="header">
    <h3>lib/origen/registers/container.rb</h3>
    <h4><span class="green">90.63 %</span> covered</h4>
    <div>
      <b>96</b> relevant lines. 
      <span class="green"><b>87</b> lines covered</span> and
      <span class="red"><b>9</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Registers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # A container can be used to easily interface register operations to an IPS-style</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # interface where the container will take care of data alignment and byte enable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    # calculations.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    # A container looks and behaves like a register and drivers should be able to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    # accept a container in place of a regular register.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">    # Here are some examples:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">    #     include Origen::Registers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    #     #       Name  Address  Size  Bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">    #     add_reg :r0,   4,       8,    data =&gt; {:bits =&gt; 8}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">    #     add_reg :r1,   5,       8,    data =&gt; {:bits =&gt; 8}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">    #     add_reg :r2,   6,       8,    data =&gt; {:bits =&gt; 8}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">    #     add_reg :r3,   7,       8,    data =&gt; {:bits =&gt; 8}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">    #     reg(:r0).write(0xB0)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">    #     reg(:r1).write(0xB1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">    #     reg(:r2).write(0xB2)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">    #     reg(:r3).write(0xB3)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">    #     big    = Container.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">    #     little = Container.new(:endian =&gt; :little)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">    #     big.add(reg(:r0)).data              # =&gt; 0x0000_00B0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">    #     little.add(reg(:r0)).data           # =&gt; 0xB000_0000</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">    #     big.byte_enable                     # =&gt; 0b0001</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">    #     little.byte_enable                  # =&gt; 0b1000</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">    #     big.empty</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">    #     big.data                            # =&gt; 0x0000_0000</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">    #     big.address                         # =&gt; nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">    #     big.add(reg(:r2))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">    #     big.address                         # =&gt; 4 (longword aligned)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">    #     big.add(reg(:r3)).add(reg(:r1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">    #     big.add.data                        # =&gt; 0xB3B2_B100</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">    #     big.byte_enable                     # =&gt; 0b1110</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">    #     # Treat it like it&#39;s a register in drivers:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">    #     big.shift_out_left do |bit|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">    #       pin(:tdi).drive!(bit.data)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">    #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">    #     # The address can be overridden</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">    #     big.empty</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">    #     big.add(reg(:r2), :address =&gt; 10)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">    #     big.address                         # =&gt; 8 (longword aligned)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">    #     # Containers can accomodate other containers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">    #     big.empty</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">    #     lower_word = Container.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">    #     lower_word.add(:r0).add(:r1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">    #     big.add(:r3)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">    #     lower_word.data                     # =&gt; 0x0000_B1B0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">    #     big.data                            # =&gt; 0xB300_0000</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">    #     big.add(lower_word)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">    #     big.data                            # =&gt; 0xB300_B1B0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">    #     lower_word.data                     # =&gt; 0x0000_B1B0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">    #     # Contained registers are the same register objects</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">    #     reg(:r0).write(0x55)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">    #     big.data                            # =&gt; 0xB300_B155</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">    #     lower_word.data                     # =&gt; 0x0000_B155</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="66">
          <span class="hits">1</span>
          
          <code class="ruby">    class Container</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">      # The size of the container in bits</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :size</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">      # The number of bits represented by an address increment</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">      # of the contained registers. For example if the contained registers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">      # have a byte address this will return 8.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="72">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :bits_per_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">      # Returns the currently held registers</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="74">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :regs</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="75">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :registers, :regs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">      # Set this to a string or an array of strings that represents the name of the object that owns the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">      # container. If present any owned_by? requests made to the container will be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">      # evaluated against this string. If not then the request will be sent to the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">      # first contained register (if present).</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="80">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :owned_by</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">      # @param [Hash] options Options to customize the container</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">      # @option options [Integer] :size (32) The size of the container in bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">      # @option options [Symbol] :endian (:big) The endianness of the container, :big or :little</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">      #   For example big endian means that 4 a 32-bit container the bytes are arranged</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">      #   [3,2,1,0] whereas a little endian container would be [0,1,2,3].</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">      # @option options [Integer] :bits_per_address (8) The number of bits that will be represented</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">      #   by an address increment of the given register&#39;s addresses</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="89">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(options = {})</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="90">
          <span class="hits">21</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">          size:             32,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">          endian:           :big,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">          bits_per_address: 8</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="95">
          <span class="hits">21</span>
          
          <code class="ruby">        @size = options[:size]</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="96">
          <span class="hits">21</span>
          
          <code class="ruby">        @endian = options[:endian]</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="97">
          <span class="hits">21</span>
          
          <code class="ruby">        @owned_by = options[:owned_by]</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="98">
          <span class="hits">21</span>
          
          <code class="ruby">        @bits_per_address = options[:bits_per_address]</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="99">
          <span class="hits">21</span>
          
          <code class="ruby">        @regs = []</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="100">
          <span class="hits">21</span>
          
          <code class="ruby">        @addresses = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="103">
          <span class="hits">1</span>
          
          <code class="ruby">      def contains_bits?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="104">
          
          
          <code class="ruby">        true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">      # Add the given register to the container, currently there is no</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">      # error checking performed to ensure that it doesn&#39;t overlap with</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">      # any existing contained registers.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="110">
          <span class="hits">1</span>
          
          <code class="ruby">      def add(reg, options = {})</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="111">
          <span class="hits">45</span>
          
          <code class="ruby">        @regs &lt;&lt; reg</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="112">
          <span class="hits">45</span>
          
          <code class="ruby">        addr = options[:address] || options[:addr]</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="113">
          <span class="hits">45</span>
          
          <code class="ruby">        @addresses[reg] = addr if addr</code>
        </li>
      
        <li class="covered" data-hits="118" data-linenumber="114">
          <span class="hits">118</span>
          
          <code class="ruby">        @regs.sort_by! { |reg| address_of_reg(reg) }</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="115">
          <span class="hits">45</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="119">
          <span class="hits">1</span>
          
          <code class="ruby">      def address_of_reg(reg)</code>
        </li>
      
        <li class="covered" data-hits="781" data-linenumber="120">
          <span class="hits">781</span>
          
          <code class="ruby">        @addresses[reg] || reg.address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">      # Returns the data held by the contained registers where the data from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">      # each register is shifted into the correct position</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="125">
          <span class="hits">1</span>
          
          <code class="ruby">      def data</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="126">
          <span class="hits">17</span>
          
          <code class="ruby">        d = 0</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="127">
          <span class="hits">17</span>
          
          <code class="ruby">        regs.each do |reg|</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="128">
          <span class="hits">22</span>
          
          <code class="ruby">          d += (reg.data &lt;&lt; bit_shift_for_reg(reg))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="130">
          <span class="hits">17</span>
          
          <code class="ruby">        d</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="132">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :val, :data</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="133">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :value, :data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">      # Data bar, the ones complement of the current data value of the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">      # container</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="137">
          <span class="hits">1</span>
          
          <code class="ruby">      def data_b</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="138">
          <span class="hits">4</span>
          
          <code class="ruby">        ~data &amp; ((1 &lt;&lt; size) - 1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">      # Remove all registers from the container</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="142">
          <span class="hits">1</span>
          
          <code class="ruby">      def empty</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="143">
          <span class="hits">6</span>
          
          <code class="ruby">        @regs = []</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="144">
          <span class="hits">6</span>
          
          <code class="ruby">        @addresses = {}</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="145">
          <span class="hits">6</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">      # Returns the owner of the contained registers (assumed to be the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby">      # same for all)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="150">
          <span class="hits">1</span>
          
          <code class="ruby">      def owner</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="151">
          <span class="hits">7</span>
          
          <code class="ruby">        unless @regs.empty?</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="152">
          <span class="hits">5</span>
          
          <code class="ruby">          @regs.first.owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">      # Proxies to the Reg#owned_by? method</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="157">
          <span class="hits">1</span>
          
          <code class="ruby">      def owned_by?(name)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="158">
          
          
          <code class="ruby">        if owned_by</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="159">
          
          
          <code class="ruby">          [owned_by].flatten.any? do |al|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="160">
          
          
          <code class="ruby">            al.to_s =~ /#{name}/i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="161">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="163">
          
          
          <code class="ruby">          if @regs.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="164">
          
          
          <code class="ruby">            false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="166">
          
          
          <code class="ruby">            @regs.first.owned_by?(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">      # Returns the aligned address of the container based on the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby">      # address of the currently contained registers</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="173">
          <span class="hits">1</span>
          
          <code class="ruby">      def address</code>
        </li>
      
        <li class="covered" data-hits="116" data-linenumber="174">
          <span class="hits">116</span>
          
          <code class="ruby">        unless @regs.empty?</code>
        </li>
      
        <li class="covered" data-hits="112" data-linenumber="175">
          <span class="hits">112</span>
          
          <code class="ruby">          addr = address_of_reg(@regs.first)</code>
        </li>
      
        <li class="covered" data-hits="112" data-linenumber="176">
          <span class="hits">112</span>
          
          <code class="ruby">          shift = Math.log(size / bits_per_address, 2)</code>
        </li>
      
        <li class="covered" data-hits="112" data-linenumber="177">
          <span class="hits">112</span>
          
          <code class="ruby">          (addr &gt;&gt; shift) &lt;&lt; shift</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="180">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :addr, :address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">      # Returns the byte enable required to update the contained registers.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="183">
          <span class="hits">1</span>
          
          <code class="ruby">      def byte_enable</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="184">
          <span class="hits">9</span>
          
          <code class="ruby">        enable = 0</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="185">
          <span class="hits">9</span>
          
          <code class="ruby">        regs.each do |reg|</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="186">
          <span class="hits">14</span>
          
          <code class="ruby">          enable_bits = 0.ones_comp(reg.size / bits_per_address)</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="187">
          <span class="hits">14</span>
          
          <code class="ruby">          enable += (enable_bits &lt;&lt; shift_for_reg(reg))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="189">
          <span class="hits">9</span>
          
          <code class="ruby">        enable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="192">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="193">
          <span class="hits">1</span>
          
          <code class="ruby">      def local_addr_for_reg(reg)</code>
        </li>
      
        <li class="covered" data-hits="596" data-linenumber="194">
          <span class="hits">596</span>
          
          <code class="ruby">        address_of_reg(reg) &amp; 0.ones_comp(Math.log(size / bits_per_address, 2))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="197">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="198">
          <span class="hits">1</span>
          
          <code class="ruby">      def shift_for_reg(reg)</code>
        </li>
      
        <li class="covered" data-hits="596" data-linenumber="199">
          <span class="hits">596</span>
          
          <code class="ruby">        if big_endian?</code>
        </li>
      
        <li class="covered" data-hits="422" data-linenumber="200">
          <span class="hits">422</span>
          
          <code class="ruby">          local_addr_for_reg(reg)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="174" data-linenumber="202">
          <span class="hits">174</span>
          
          <code class="ruby">          (size / bits_per_address) - (local_addr_for_reg(reg) + (reg.size / bits_per_address))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="206">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="207">
          <span class="hits">1</span>
          
          <code class="ruby">      def bit_shift_for_reg(reg)</code>
        </li>
      
        <li class="covered" data-hits="582" data-linenumber="208">
          <span class="hits">582</span>
          
          <code class="ruby">        shift_for_reg(reg) * bits_per_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="211">
          <span class="hits">1</span>
          
          <code class="ruby">      def big_endian?</code>
        </li>
      
        <li class="covered" data-hits="598" data-linenumber="212">
          <span class="hits">598</span>
          
          <code class="ruby">        @endian == :big</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="215">
          <span class="hits">1</span>
          
          <code class="ruby">      def little_endian?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="216">
          
          
          <code class="ruby">        !big_endian?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby">      # Shifts out a stream of bit objects corresponding to the size of the container. i.e. calling</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">      # this on a 32-bit container this will pass back 32 bit objects.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby">      # If there are holes then a dummy bit object will be returned that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">      # is not writable and which will always read as 0.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">      # The index is also returned as a second argument. Note that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby">      # the position property of the bit is not updated to reflect its position</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="226">
          
          
          <code class="ruby">      # within the container (it will return its position with its parent</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">      # register), therefore the index should be used if the calling code</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby">      # needs to work out the bit position within the container.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="229">
          <span class="hits">1</span>
          
          <code class="ruby">      def shift_out_left</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="230">
          <span class="hits">3</span>
          
          <code class="ruby">        size.times do |i|</code>
        </li>
      
        <li class="covered" data-hits="96" data-linenumber="231">
          <span class="hits">96</span>
          
          <code class="ruby">          yield(bit_at_position(size - i - 1), i)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="232">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="233">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="234">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :shift_out_left_with_index, :shift_out_left</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">      # Shifts out a stream of bit objects corresponding to the size of the container. i.e. calling</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby">      # this on a 32-bit container this will pass back 32 bit objects.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby">      # If there are holes then a dummy bit object will be returned that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="239">
          
          
          <code class="ruby">      # is not writable and which will always read as 0.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="240">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">      # The index is also returned as a second argument. Note that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby">      # the position property of the bit is not updated to reflect its position</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby">      # within the container (it will return its position with its parent</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">      # register), therefore the index should be used if the calling code</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby">      # needs to work out the bit position within the container.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="246">
          <span class="hits">1</span>
          
          <code class="ruby">      def shift_out_right</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="247">
          <span class="hits">3</span>
          
          <code class="ruby">        size.times do |i|</code>
        </li>
      
        <li class="covered" data-hits="96" data-linenumber="248">
          <span class="hits">96</span>
          
          <code class="ruby">          yield(bit_at_position(i), i)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="251">
          <span class="hits">1</span>
          
          <code class="ruby">      alias_method :shift_out_right_with_index, :shift_out_right</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby">      # Returns the bit at the given bit position if it exists, otherwise</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="254">
          
          
          <code class="ruby">      # returns an un-writable bit</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="255">
          <span class="hits">1</span>
          
          <code class="ruby">      def bit_at_position(i)</code>
        </li>
      
        <li class="covered" data-hits="592" data-linenumber="256">
          <span class="hits">592</span>
          
          <code class="ruby">        reg = regs.find { |reg| reg_contains_position?(reg, i) }</code>
        </li>
      
        <li class="covered" data-hits="224" data-linenumber="257">
          <span class="hits">224</span>
          
          <code class="ruby">        if reg</code>
        </li>
      
        <li class="covered" data-hits="192" data-linenumber="258">
          <span class="hits">192</span>
          
          <code class="ruby">          reg[i - bit_shift_for_reg(reg)]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="260">
          <span class="hits">32</span>
          
          <code class="ruby">          dummy_bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="262">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="265">
          <span class="hits">1</span>
          
          <code class="ruby">      def reg_contains_position?(reg, position)</code>
        </li>
      
        <li class="covered" data-hits="368" data-linenumber="266">
          <span class="hits">368</span>
          
          <code class="ruby">        start = bit_shift_for_reg(reg)</code>
        </li>
      
        <li class="covered" data-hits="368" data-linenumber="267">
          <span class="hits">368</span>
          
          <code class="ruby">        stop = start + reg.size - 1</code>
        </li>
      
        <li class="covered" data-hits="368" data-linenumber="268">
          <span class="hits">368</span>
          
          <code class="ruby">        position &gt;= start &amp;&amp; position &lt;= stop</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="269">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="270">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="271">
          
          
          <code class="ruby">      # Returns the bit at the given bit position if it exists, otherwise</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby">      # returns an un-writable bit</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="273">
          <span class="hits">1</span>
          
          <code class="ruby">      def [](i)</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="274">
          <span class="hits">32</span>
          
          <code class="ruby">        bit_at_position(i)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="276">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="278">
          <span class="hits">1</span>
          
          <code class="ruby">      def dummy_bit</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="279">
          <span class="hits">32</span>
          
          <code class="ruby">        @dummy_bit ||= Bit.new(self, 0, writable: false)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="280">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby">      # Call the clear_flags on all contained registers</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="283">
          <span class="hits">1</span>
          
          <code class="ruby">      def clear_flags</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="284">
          
          
          <code class="ruby">        @regs.each(&amp;:clear_flags)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="285">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="286">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="287">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="173bfdff56bd1704f856953552c2e24db0e77009">
  <div class="header">
    <h3>lib/origen/registers/domain.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>9</b> relevant lines. 
      <span class="green"><b>9</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Registers</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    class Domain</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :endian</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="8">
          <span class="hits">32</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">          endian: :big</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="11">
          <span class="hits">32</span>
          
          <code class="ruby">        @name = name</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="12">
          <span class="hits">32</span>
          
          <code class="ruby">        @endian = options[:endian]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="c93e9f48dab4384e8392c7b71727a5aa6e3300b2">
  <div class="header">
    <h3>lib/origen/registers/reg.rb</h3>
    <h4><span class="yellow">80.31 %</span> covered</h4>
    <div>
      <b>701</b> relevant lines. 
      <span class="green"><b>563</b> lines covered</span> and
      <span class="red"><b>138</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Registers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # The register class can be used to represent not only h/ware resgisters,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # but really any entity which has an address and data component, such as a specific RAM location.&lt;br&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    # Any registers instantiated through Origen::Registers#add_reg are instances of this class.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    # All methods in BitCollection can also be called on a Reg object.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">    class Reg</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">      include Origen::SubBlocks::Path</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">      include Origen::SubBlocks::Domains</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      # These attributes can be defined on a register at definition time and will get applied</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      # to all of its contained bits unless a specific bit has its own definition of the same</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      # attribute</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">      REG_LEVEL_ATTRIBUTES = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">        feature:  {},</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">        reset:    { aliases: [:res] },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">        memory:   {},</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">        path:     { aliases: [:hdl_path] },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">        abs_path: { aliases: [:absolute_path] },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">        access:   {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">      }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      # Returns the object that own the register.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      #   $soc.reg(:blah).owner   # Returns the $soc object</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="27">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :owner</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="28">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :parent, :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">      # The base address of the register, this will be set dynamically</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      # by Origen based on the parent&#39;s base address</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="31">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :base_address</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="32">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_writer :address # :nodoc:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      # Returns an integer representing the number of bits in the register</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="34">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :size</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">      # The register name</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="36">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      # Any feature associated with the register</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="38">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :feature</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="40">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :grows_backwards # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="41">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :lookup # :nodoc:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      # Returns a full path to the file in which the register was defined</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="43">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :define_file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      # Returns any application-specific meta-data attatched to the given register</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="45">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :meta</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="46">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :meta_data, :meta</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="47">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :metadata, :meta</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">      # If the given register&#39;s reset data is backed by memory, the memory address can</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      # be recorded in this attribute</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="50">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_accessor :memory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">      # Normally shouldn&#39;t be called directly, instantiate through add_reg</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      # Upon initialization bits are stored as follows:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">      # @bits -</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">      # An array of bit objects in position order, @bits[5] corresponds</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">      # to the bit as position r</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">      # @lookup -</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">      # A Hash lookup table for quickly accessing bit objects by name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">      # @lookup = { :bit_or_bus_name =&gt; {:pos =&gt; 3, :bits =&gt; 4} }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="60">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize(owner, address, size, name, options = {}) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="61">
          <span class="hits">242</span>
          
          <code class="ruby">        @owner = owner</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="62">
          <span class="hits">242</span>
          
          <code class="ruby">        @address = address</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="63">
          <span class="hits">242</span>
          
          <code class="ruby">        @size = size</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="64">
          <span class="hits">242</span>
          
          <code class="ruby">        @bits = []</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="65">
          <span class="hits">242</span>
          
          <code class="ruby">        @lookup = {}</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="66">
          <span class="hits">242</span>
          
          <code class="ruby">        @name = name</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="67">
          <span class="hits">242</span>
          
          <code class="ruby">        @init_as_writable = options.delete(:init_as_writable)</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="68">
          <span class="hits">242</span>
          
          <code class="ruby">        @define_file = options.delete(:define_file)</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="69">
          <span class="hits">242</span>
          
          <code class="ruby">        REG_LEVEL_ATTRIBUTES.each do |attribute, _meta|</code>
        </li>
      
        <li class="covered" data-hits="1452" data-linenumber="70">
          <span class="hits">1452</span>
          
          <code class="ruby">          instance_variable_set(&quot;@#{attribute}&quot;, options.delete(attribute))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="72">
          <span class="hits">242</span>
          
          <code class="ruby">        @description_from_api = {}</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="73">
          <span class="hits">242</span>
          
          <code class="ruby">        description = options.delete(:description)</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="74">
          <span class="hits">242</span>
          
          <code class="ruby">        if description</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="75">
          <span class="hits">5</span>
          
          <code class="ruby">          @description_from_api[:_reg] = description.split(/\r?\n/)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="77">
          <span class="hits">242</span>
          
          <code class="ruby">        @meta = default_reg_metadata.merge(options.delete(:meta) || {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">        # Initialize with unwritable bits that read back as zero, can override this</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">        # to make all writable by default by setting the :init_writable option to true</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="81">
          <span class="hits">242</span>
          
          <code class="ruby">        @size.times do |n|</code>
        </li>
      
        <li class="covered" data-hits="4692" data-linenumber="82">
          <span class="hits">4692</span>
          
          <code class="ruby">          @bits &lt;&lt; Bit.new(self, n, writable: @init_as_writable, undefined: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="85">
          <span class="hits">242</span>
          
          <code class="ruby">        add_bits_from_options(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="88">
          <span class="hits">2</span>
          
          <code class="ruby">      def freeze</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="89">
          
          
          <code class="ruby">        bits.each(&amp;:freeze)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">        # Call any methods which cache results to generate the instance variables</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">        # before they are frozen</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="92">
          
          
          <code class="ruby">        address</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="93">
          
          
          <code class="ruby">        super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="96">
          <span class="hits">2</span>
          
          <code class="ruby">      def bind(bitname, live_parameter)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="97">
          <span class="hits">2</span>
          
          <code class="ruby">        unless live_parameter.respond_to?(:is_a_live_parameter?) &amp;&amp; live_parameter.is_a_live_parameter?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="98">
          
          
          <code class="ruby">          fail &#39;Only live updating parameters should be bound, make sure you have not missed .live in the path to the parameter!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="100">
          <span class="hits">2</span>
          
          <code class="ruby">        @parameter_bound_bits ||= {}</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="101">
          <span class="hits">2</span>
          
          <code class="ruby">        @parameter_bound_bits[bitname] = live_parameter</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="104">
          <span class="hits">2</span>
          
          <code class="ruby">      def has_parameter_bound_bits?</code>
        </li>
      
        <li class="covered" data-hits="1368" data-linenumber="105">
          <span class="hits">1368</span>
          
          <code class="ruby">        @parameter_bound_bits &amp;&amp; !@parameter_bound_bits.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="108">
          <span class="hits">2</span>
          
          <code class="ruby">      def update_bound_bits</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="109">
          <span class="hits">12</span>
          
          <code class="ruby">        @updating_bound_bits = true</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="110">
          <span class="hits">12</span>
          
          <code class="ruby">        @parameter_bound_bits.each do |name, val|</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="111">
          <span class="hits">22</span>
          
          <code class="ruby">          bits(name).write(val)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="113">
          <span class="hits">12</span>
          
          <code class="ruby">        @updating_bound_bits = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="116">
          <span class="hits">2</span>
          
          <code class="ruby">      def updating_bound_bits?</code>
        </li>
      
        <li class="covered" data-hits="56" data-linenumber="117">
          <span class="hits">56</span>
          
          <code class="ruby">        @updating_bound_bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="120">
          <span class="hits">2</span>
          
          <code class="ruby">      def inspect</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="121">
          <span class="hits">5</span>
          
          <code class="ruby">        bit_width = 13</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="122">
          <span class="hits">5</span>
          
          <code class="ruby">        desc = [&quot;\n0x%X - :#{name}&quot; % address]</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="123">
          <span class="hits">5</span>
          
          <code class="ruby">        r = size % 8</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="124">
          <span class="hits">5</span>
          
          <code class="ruby">        if r == 0</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="125">
          <span class="hits">3</span>
          
          <code class="ruby">          desc &lt;&lt; (&#39;   &#39; + (&#39;=&#39; * (bit_width + 1) * 8)).chop</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="127">
          <span class="hits">2</span>
          
          <code class="ruby">          desc &lt;&lt; (&#39;   &#39; + (&#39; &#39; * (bit_width + 1) * (8 - r)) + (&#39;=&#39; * (bit_width + 1) * r)).chop</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">        # &quot;&lt;#{self.class}: #{self.name}&gt;&quot;</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="131">
          <span class="hits">5</span>
          
          <code class="ruby">        num_bytes = (size / 8.0).ceil</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="132">
          <span class="hits">5</span>
          
          <code class="ruby">        num_bytes.times do |byte_index|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">          # Need to add support for little endian regs here?</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="134">
          <span class="hits">11</span>
          
          <code class="ruby">          byte_number = num_bytes - byte_index</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="135">
          <span class="hits">11</span>
          
          <code class="ruby">          max_bit = (byte_number * 8) - 1</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="136">
          <span class="hits">11</span>
          
          <code class="ruby">          min_bit = max_bit - 8 + 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">          # BIT INDEX ROW</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="139">
          <span class="hits">11</span>
          
          <code class="ruby">          line = &#39;  &#39;</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="140">
          <span class="hits">11</span>
          
          <code class="ruby">          8.times do |i|</code>
        </li>
      
        <li class="covered" data-hits="88" data-linenumber="141">
          <span class="hits">88</span>
          
          <code class="ruby">            bit_num = (byte_number * 8) - i - 1</code>
        </li>
      
        <li class="covered" data-hits="88" data-linenumber="142">
          <span class="hits">88</span>
          
          <code class="ruby">            if bit_num &gt; size - 1</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="143">
          <span class="hits">10</span>
          
          <code class="ruby">              line &lt;&lt; &#39; &#39; + &#39;&#39;.center(bit_width)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="78" data-linenumber="145">
          <span class="hits">78</span>
          
          <code class="ruby">              line &lt;&lt; &#39;|&#39; + &quot;#{bit_num}&quot;.center(bit_width)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="148">
          <span class="hits">11</span>
          
          <code class="ruby">          line += &#39;|&#39;</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="149">
          <span class="hits">11</span>
          
          <code class="ruby">          desc &lt;&lt; line</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">          # BIT NAME ROW</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="152">
          <span class="hits">11</span>
          
          <code class="ruby">          line = &#39;  &#39;</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="153">
          <span class="hits">11</span>
          
          <code class="ruby">          named_bits include_spacers: true do |name, bit, bitcounter|</code>
        </li>
      
        <li class="covered" data-hits="65" data-linenumber="154">
          <span class="hits">65</span>
          
          <code class="ruby">            if _bit_in_range?(bit, max_bit, min_bit)</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="155">
          <span class="hits">30</span>
          
          <code class="ruby">              if max_bit &gt; (size - 1)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="156">
          <span class="hits">2</span>
          
          <code class="ruby">                (max_bit - (size - 1)).times do</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="157">
          <span class="hits">10</span>
          
          <code class="ruby">                  line &lt;&lt; &#39; &#39; * (bit_width + 1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="161">
          <span class="hits">30</span>
          
          <code class="ruby">              if bit.size &gt; 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="163">
          <span class="hits">9</span>
          
          <code class="ruby">                if name</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="164">
          <span class="hits">9</span>
          
          <code class="ruby">                  if bitcounter.nil?</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="165">
          <span class="hits">9</span>
          
          <code class="ruby">                    bit_name = &quot;#{name}[#{_max_bit_in_range(bit, max_bit, min_bit)}:#{_min_bit_in_range(bit, max_bit, min_bit)}]&quot;</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="166">
          <span class="hits">9</span>
          
          <code class="ruby">                    bit_span = _num_bits_in_range(bit, max_bit, min_bit)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">                  else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="169">
          
          
          <code class="ruby">                    upper = _max_bit_in_range(bit, max_bit, min_bit) + bitcounter - bit.size</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="170">
          
          
          <code class="ruby">                    lower = _min_bit_in_range(bit, max_bit, min_bit) + bitcounter - bit.size</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="171">
          
          
          <code class="ruby">                    bit_name = &quot;#{name}[#{upper}:#{lower}]&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="172">
          
          
          <code class="ruby">                    bit_span = upper - lower + 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="174">
          <span class="hits">9</span>
          
          <code class="ruby">                  width = bit_width * bit_span</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="175">
          <span class="hits">9</span>
          
          <code class="ruby">                  line &lt;&lt; &#39;|&#39; + &quot;#{bit_name[0..width - 2]}&quot;.center(width + bit_span - 1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="178">
          
          
          <code class="ruby">                  bit.shift_out_left do |bit|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="179">
          
          
          <code class="ruby">                    if _index_in_range?(bit.position, max_bit, min_bit)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="180">
          
          
          <code class="ruby">                      line &lt;&lt; &#39;|&#39; + &#39;&#39;.center(bit_width)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="186">
          <span class="hits">21</span>
          
          <code class="ruby">                if name</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="187">
          <span class="hits">21</span>
          
          <code class="ruby">                  bit_name = &quot;#{name}&quot;</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="188">
          <span class="hits">21</span>
          
          <code class="ruby">                  txt = &quot;#{bit_name[0..bit_width - 2]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="190">
          
          
          <code class="ruby">                  txt = &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="192">
          <span class="hits">21</span>
          
          <code class="ruby">                line &lt;&lt; &#39;|&#39; + txt.center(bit_width)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="196">
          <span class="hits">11</span>
          
          <code class="ruby">          line += &#39;|&#39;</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="197">
          <span class="hits">11</span>
          
          <code class="ruby">          desc &lt;&lt; line</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">          # BIT STATE ROW</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="200">
          <span class="hits">11</span>
          
          <code class="ruby">          line = &#39;  &#39;</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="201">
          <span class="hits">11</span>
          
          <code class="ruby">          named_bits include_spacers: true do |name, bit, _bitcounter|</code>
        </li>
      
        <li class="covered" data-hits="65" data-linenumber="202">
          <span class="hits">65</span>
          
          <code class="ruby">            if _bit_in_range?(bit, max_bit, min_bit)</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="203">
          <span class="hits">30</span>
          
          <code class="ruby">              if max_bit &gt; (size - 1)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="204">
          <span class="hits">2</span>
          
          <code class="ruby">                (max_bit - (size - 1)).times do</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="205">
          <span class="hits">10</span>
          
          <code class="ruby">                  line &lt;&lt; &#39; &#39; * (bit_width + 1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="206">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="208">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="209">
          <span class="hits">30</span>
          
          <code class="ruby">              if bit.size &gt; 1</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="210">
          <span class="hits">9</span>
          
          <code class="ruby">                if name</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="211">
          <span class="hits">9</span>
          
          <code class="ruby">                  if bit.has_known_value?</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="212">
          <span class="hits">9</span>
          
          <code class="ruby">                    value = &#39;0x%X&#39; % bit.val[_max_bit_in_range(bit, max_bit, min_bit).._min_bit_in_range(bit, max_bit, min_bit)]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby">                  else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="214">
          
          
          <code class="ruby">                    if bit.reset_val == :undefined</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="215">
          
          
          <code class="ruby">                      value = &#39;X&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="216">
          
          
          <code class="ruby">                    else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="217">
          
          
          <code class="ruby">                      value = &#39;M&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="220">
          <span class="hits">9</span>
          
          <code class="ruby">                  value += _state_desc(bit)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="221">
          <span class="hits">9</span>
          
          <code class="ruby">                  bit_span = _num_bits_in_range(bit, max_bit, min_bit)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="222">
          <span class="hits">9</span>
          
          <code class="ruby">                  width = bit_width * bit_span</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="223">
          <span class="hits">9</span>
          
          <code class="ruby">                  line &lt;&lt; &#39;|&#39; + value.center(width + bit_span - 1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="225">
          
          
          <code class="ruby">                  bit.shift_out_left do |bit|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="226">
          
          
          <code class="ruby">                    if _index_in_range?(bit.position, max_bit, min_bit)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="227">
          
          
          <code class="ruby">                      line &lt;&lt; &#39;|&#39; + &#39;&#39;.center(bit_width)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="231">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="232">
          <span class="hits">21</span>
          
          <code class="ruby">                if name</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="233">
          <span class="hits">21</span>
          
          <code class="ruby">                  if bit.has_known_value?</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="234">
          <span class="hits">21</span>
          
          <code class="ruby">                    val = bit.val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby">                  else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="236">
          
          
          <code class="ruby">                    if bit.reset_val == :undefined</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="237">
          
          
          <code class="ruby">                      val = &#39;X&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby">                    else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="239">
          
          
          <code class="ruby">                      val = &#39;M&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="240">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="242">
          <span class="hits">21</span>
          
          <code class="ruby">                  value = &quot;#{val}&quot; + _state_desc(bit)</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="243">
          <span class="hits">21</span>
          
          <code class="ruby">                  line &lt;&lt; &#39;|&#39; + value.center(bit_width)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="245">
          
          
          <code class="ruby">                  line &lt;&lt; &#39;|&#39; + &#39;&#39;.center(bit_width)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="248">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="250">
          <span class="hits">11</span>
          
          <code class="ruby">          line += &#39;|&#39;</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="251">
          <span class="hits">11</span>
          
          <code class="ruby">          desc &lt;&lt; line</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="253">
          <span class="hits">11</span>
          
          <code class="ruby">          if size &gt;= 8</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="254">
          <span class="hits">10</span>
          
          <code class="ruby">            r = size % 8</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="255">
          <span class="hits">10</span>
          
          <code class="ruby">            if byte_index == 0 &amp;&amp; r != 0</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="256">
          <span class="hits">1</span>
          
          <code class="ruby">              desc &lt;&lt; (&#39;   &#39; + (&#39;=&#39; * (bit_width + 1) * (8 - r)).chop + &#39; &#39; + (&#39;-&#39; * (bit_width + 1) * r)).chop</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="257">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="258">
          <span class="hits">9</span>
          
          <code class="ruby">              desc &lt;&lt; (&#39;   &#39; + (&#39;-&#39; * (bit_width + 1) * 8)).chop</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="261">
          <span class="hits">1</span>
          
          <code class="ruby">            desc &lt;&lt; (&#39;   &#39; + (&#39; &#39; * (bit_width + 1) * (8 - size)) + (&#39;-&#39; * (bit_width + 1) * size)).chop</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="262">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="264">
          <span class="hits">5</span>
          
          <code class="ruby">        desc.join(&quot;\n&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="266">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby">      # Returns a hash containing all register descriptions that have been parsed so far.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="268">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="269">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="270">
          <span class="hits">2</span>
          
          <code class="ruby">      def description_lookup</code>
        </li>
      
        <li class="covered" data-hits="99" data-linenumber="271">
          <span class="hits">99</span>
          
          <code class="ruby">        @@description_lookup ||= {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="273">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="274">
          
          
          <code class="ruby">      # Returns any application specific metadata that has been inherited by the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby">      # given register.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="276">
          
          
          <code class="ruby">      # This does not account for any overridding that may have been applied to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby">      # this register specifically however, use the meta method to get that.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="278">
          <span class="hits">2</span>
          
          <code class="ruby">      def default_reg_metadata</code>
        </li>
      
        <li class="covered" data-hits="2524" data-linenumber="279">
          <span class="hits">2524</span>
          
          <code class="ruby">        Origen::Registers.default_reg_metadata.merge(</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="280">
          
          
          <code class="ruby">          Origen::Registers.reg_metadata[owner.class] || {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="283">
          <span class="hits">2</span>
          
          <code class="ruby">      def bit_value_descriptions(bitname, options = {})</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="284">
          <span class="hits">8</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="285">
          
          
          <code class="ruby">          format: :binary</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="286">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="287">
          <span class="hits">8</span>
          
          <code class="ruby">        base = case options[:format]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">               when :bin, :binary</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="289">
          <span class="hits">8</span>
          
          <code class="ruby">                 2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">               when :hex, :hexadecimal</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="291">
          
          
          <code class="ruby">                 16</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="292">
          
          
          <code class="ruby">               when :dec, :decimal</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="293">
          
          
          <code class="ruby">                 10</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="294">
          
          
          <code class="ruby">               else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="295">
          
          
          <code class="ruby">                 fail &quot;Unknown integer format: #{options[:format]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="296">
          
          
          <code class="ruby">               end</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="297">
          <span class="hits">8</span>
          
          <code class="ruby">        desc = {}</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="298">
          <span class="hits">8</span>
          
          <code class="ruby">        description(bitname).each do |line|</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="299">
          <span class="hits">26</span>
          
          <code class="ruby">          if line =~ /^\s*(\d+)\s+\|\s+(.+)/</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="300">
          <span class="hits">12</span>
          
          <code class="ruby">            desc[Regexp.last_match[1].to_i(base)] = Regexp.last_match[2]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="301">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="303">
          <span class="hits">8</span>
          
          <code class="ruby">        desc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="305">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="306">
          
          
          <code class="ruby">      # Returns the full name of the register when this has been specified in the register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby">      # description like this:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="308">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="309">
          
          
          <code class="ruby">      #   # ** This is the Register Full Name **</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">      #   # This register blah blah</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="311">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby">      # This method will also be called by bit collections to look up the name when</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="313">
          
          
          <code class="ruby">      # defined in a similar manner in the bit description.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="314">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="315">
          
          
          <code class="ruby">      # If no name has been specified this will return nil.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="316">
          <span class="hits">2</span>
          
          <code class="ruby">      def full_name(bitname = :_reg, _options = {})</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="317">
          <span class="hits">11</span>
          
          <code class="ruby">        bitname, options = :_reg, bitname if bitname.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="318">
          <span class="hits">11</span>
          
          <code class="ruby">        desc = description(bitname).first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">        # Capture something like this:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="320">
          
          
          <code class="ruby">        # ** This is the full name ** - This bit blah blah</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="321">
          <span class="hits">11</span>
          
          <code class="ruby">        if desc &amp;&amp; desc =~ /\s*\*\*\s*([^\*.]*)\s*\*\*/</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="322">
          <span class="hits">10</span>
          
          <code class="ruby">          Regexp.last_match[1].strip</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="323">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="324">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="325">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="326">
          
          
          <code class="ruby">      # Escapes brackets and parenthesis. Helper for description method.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="327">
          <span class="hits">2</span>
          
          <code class="ruby">      def escape_special_char(str)</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="328">
          <span class="hits">7</span>
          
          <code class="ruby">        str.gsub(&#39;[&#39;, &#39;\[&#39;).gsub(&#39;]&#39;, &#39;\]&#39;).gsub(&#39;(&#39;, &#39;\(&#39;).gsub(&#39;)&#39;, &#39;\)&#39;) if str</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="329">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="330">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="331">
          
          
          <code class="ruby">      # Returns the description of this register if any, if none then an empty array</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="332">
          
          
          <code class="ruby">      # will be returned</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="333">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby">      # **Note** Adding a description field will override any comment-driven documentation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="335">
          
          
          <code class="ruby">      # of a register (ie markdown style comments)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="336">
          <span class="hits">2</span>
          
          <code class="ruby">      def description(bitname = :_reg, options = {})</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="337">
          <span class="hits">39</span>
          
          <code class="ruby">        bitname, options = :_reg, bitname if bitname.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="338">
          <span class="hits">39</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="339">
          
          
          <code class="ruby">          include_name:       true,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="340">
          
          
          <code class="ruby">          include_bit_values: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="341">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="342">
          <span class="hits">39</span>
          
          <code class="ruby">        if @description_from_api[bitname]</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="343">
          <span class="hits">17</span>
          
          <code class="ruby">          desc = @description_from_api[bitname]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="344">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="345">
          <span class="hits">22</span>
          
          <code class="ruby">          parse_descriptions unless description_lookup[define_file]</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="346">
          <span class="hits">22</span>
          
          <code class="ruby">          begin</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="347">
          <span class="hits">22</span>
          
          <code class="ruby">            desc = description_lookup[define_file][name][bitname] || []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="348">
          
          
          <code class="ruby">          rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="349">
          
          
          <code class="ruby">            desc = []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="350">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="351">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="352">
          <span class="hits">39</span>
          
          <code class="ruby">        desc = desc.reject do |line|</code>
        </li>
      
        <li class="covered" data-hits="93" data-linenumber="353">
          <span class="hits">93</span>
          
          <code class="ruby">          if bitname != :_reg</code>
        </li>
      
        <li class="covered" data-hits="71" data-linenumber="354">
          <span class="hits">71</span>
          
          <code class="ruby">            unless options[:include_bit_values]</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="355">
          <span class="hits">8</span>
          
          <code class="ruby">              !!(line =~ /^\s*(\d+)\s+\|\s+(.+)/)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="356">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="357">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="358">
          <span class="hits">22</span>
          
          <code class="ruby">            false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="359">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="360">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="361">
          <span class="hits">39</span>
          
          <code class="ruby">        if desc.first</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="362">
          <span class="hits">39</span>
          
          <code class="ruby">          unless options[:include_name]</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="363">
          <span class="hits">7</span>
          
          <code class="ruby">            desc[0] = desc.first.sub(/\s*\*\*\s*#{escape_special_char(full_name(bitname))}\s*\*\*\s*-?\s*/, &#39;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="364">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="365">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="366">
          <span class="hits">39</span>
          
          <code class="ruby">        desc.shift if desc.first &amp;&amp; desc.first.strip.empty?</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="367">
          <span class="hits">39</span>
          
          <code class="ruby">        desc.pop if desc.last &amp;&amp; desc.last.strip.empty?</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="368">
          <span class="hits">39</span>
          
          <code class="ruby">        desc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="369">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="370">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :descriptions, :description</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="371">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="372">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="373">
          <span class="hits">2</span>
          
          <code class="ruby">      def parse_descriptions</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="374">
          <span class="hits">1</span>
          
          <code class="ruby">        desc = []</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="375">
          <span class="hits">1</span>
          
          <code class="ruby">        File.readlines(define_file).each do |line|</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="376">
          <span class="hits">94</span>
          
          <code class="ruby">          if line =~ /^\s*#(.*)/</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="377">
          <span class="hits">18</span>
          
          <code class="ruby">            desc &lt;&lt; Regexp.last_match[1].strip</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="378">
          
          
          <code class="ruby">          #              http://rubular.com/r/D8lg2P5kK1                     http://rubular.com/r/XP4ydPV8Fd</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby">          elsif line =~ /^\s*reg\(?\s*[:&quot;&#39;](\w+)[&quot;&#39;]?\s*,.*\sdo/ || line =~ /^\s*add_reg\(?\s*[:&quot;&#39;](\w+)[&quot;&#39;]?\s*,.*/</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="380">
          <span class="hits">8</span>
          
          <code class="ruby">            @current_reg_name = Regexp.last_match[1].to_sym</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="381">
          <span class="hits">8</span>
          
          <code class="ruby">            description_lookup[define_file] ||= {}</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="382">
          <span class="hits">8</span>
          
          <code class="ruby">            description_lookup[define_file][@current_reg_name] ||= {}</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="383">
          <span class="hits">8</span>
          
          <code class="ruby">            description_lookup[define_file][@current_reg_name][:_reg] = desc.dup</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="384">
          <span class="hits">8</span>
          
          <code class="ruby">            desc = []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="385">
          
          
          <code class="ruby">          # http://www.rubular.com/r/7FidbC1JRA</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="386">
          
          
          <code class="ruby">          elsif @current_reg_name &amp;&amp; line =~ /^\s*(add_bit|bit|reg\.bit)s?\(?\s*\d+\.?\.?\d*\s*,\s*:(\w+)/</code>
        </li>
      
        <li class="covered" data-hits="31" data-linenumber="387">
          <span class="hits">31</span>
          
          <code class="ruby">            description_lookup[define_file][@current_reg_name][Regexp.last_match[2].to_sym] = desc.dup</code>
        </li>
      
        <li class="covered" data-hits="31" data-linenumber="388">
          <span class="hits">31</span>
          
          <code class="ruby">            desc = []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="389">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="390">
          <span class="hits">37</span>
          
          <code class="ruby">            desc = []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="391">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="392">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="393">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="394">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="395">
          <span class="hits">2</span>
          
          <code class="ruby">      def contains_bits?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="396">
          
          
          <code class="ruby">        true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="397">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="398">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="399">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="400">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_bits_from_options(options = {}) # :nodoc:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="401">
          
          
          <code class="ruby">        # edit Traynor</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="402">
          
          
          <code class="ruby">        # options is now an array for split bit groups or a hash if single bit/range bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="403">
          
          
          <code class="ruby">        # Now add the requested bits to the register, removing the unwritable bits as required</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="404">
          <span class="hits">242</span>
          
          <code class="ruby">        options.each do |bit_id, bit_params|</code>
        </li>
      
        <li class="covered" data-hits="419" data-linenumber="405">
          <span class="hits">419</span>
          
          <code class="ruby">          if bit_params.is_a? Hash</code>
        </li>
      
        <li class="covered" data-hits="406" data-linenumber="406">
          <span class="hits">406</span>
          
          <code class="ruby">            description = bit_params.delete(:description)</code>
        </li>
      
        <li class="covered" data-hits="406" data-linenumber="407">
          <span class="hits">406</span>
          
          <code class="ruby">            if description</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="408">
          <span class="hits">16</span>
          
          <code class="ruby">              @description_from_api[bit_id] = description.split(/\r?\n/)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="409">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="406" data-linenumber="410">
          <span class="hits">406</span>
          
          <code class="ruby">            bind(bit_id, bit_params.delete(:bind)) if bit_params[:bind]</code>
        </li>
      
        <li class="covered" data-hits="406" data-linenumber="411">
          <span class="hits">406</span>
          
          <code class="ruby">            position = bit_params[:pos] || 0</code>
        </li>
      
        <li class="covered" data-hits="406" data-linenumber="412">
          <span class="hits">406</span>
          
          <code class="ruby">            num_bits = bit_params[:bits] || 1</code>
        </li>
      
        <li class="covered" data-hits="406" data-linenumber="413">
          <span class="hits">406</span>
          
          <code class="ruby">            if @reset</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="414">
          <span class="hits">19</span>
          
          <code class="ruby">              if @reset.is_a?(Symbol)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="415">
          <span class="hits">8</span>
          
          <code class="ruby">                bit_params[:res] = @reset</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="416">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="417">
          <span class="hits">11</span>
          
          <code class="ruby">                bit_params[:res] = @reset[(num_bits + position - 1), position]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="418">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="419">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="406" data-linenumber="420">
          <span class="hits">406</span>
          
          <code class="ruby">            bit_params[:access] = @access if bit_params[:access].nil?</code>
        </li>
      
        <li class="covered" data-hits="406" data-linenumber="421">
          <span class="hits">406</span>
          
          <code class="ruby">            bit_params[:res] = bit_params[:data] if bit_params[:data]</code>
        </li>
      
        <li class="covered" data-hits="406" data-linenumber="422">
          <span class="hits">406</span>
          
          <code class="ruby">            bit_params[:res] = bit_params[:reset] if bit_params[:reset]</code>
        </li>
      
        <li class="covered" data-hits="406" data-linenumber="423">
          <span class="hits">406</span>
          
          <code class="ruby">            if num_bits == 1</code>
        </li>
      
        <li class="covered" data-hits="121" data-linenumber="424">
          <span class="hits">121</span>
          
          <code class="ruby">              add_bit(bit_id, position, bit_params)   # and add the new one</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="425">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="285" data-linenumber="426">
          <span class="hits">285</span>
          
          <code class="ruby">              add_bus(bit_id, position, num_bits, bit_params)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="427">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="428">
          
          
          <code class="ruby">          elsif bit_params.is_a? Array</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="429">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="51" data-linenumber="430">
          <span class="hits">51</span>
          
          <code class="ruby">            description = bit_params.map { |h| h.delete(:description) }.compact.join(&quot;\n&quot;)</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="431">
          <span class="hits">13</span>
          
          <code class="ruby">            unless description.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="432">
          
          
          <code class="ruby">              @description_from_api[bit_id] = description.split(/\r?\n/)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="433">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="434">
          <span class="hits">13</span>
          
          <code class="ruby">            add_bus_scramble(bit_id, bit_params)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="435">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="436">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="437">
          <span class="hits">242</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="438">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="439">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="440">
          
          
          <code class="ruby">      # This method is called whenever reg.clone is called to make a copy of a given register.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="441">
          
          
          <code class="ruby">      # Ruby will correctly copy all instance variables but it will not drill down to copy nested</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="442">
          
          
          <code class="ruby">      # attributes, like the bits contained in @bits.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="443">
          
          
          <code class="ruby">      # This function will therefore correctly clone all bits contained in the register also.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="444">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize_copy(orig) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="445">
          <span class="hits">4</span>
          
          <code class="ruby">        @bits = []</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="446">
          <span class="hits">4</span>
          
          <code class="ruby">        orig.bits.each do |bit|</code>
        </li>
      
        <li class="covered" data-hits="56" data-linenumber="447">
          <span class="hits">56</span>
          
          <code class="ruby">          @bits &lt;&lt; bit.clone</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="448">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="449">
          <span class="hits">4</span>
          
          <code class="ruby">        @lookup = orig.lookup.clone</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="450">
          <span class="hits">4</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="451">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="452">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="453">
          
          
          <code class="ruby">      # Returns a dummy register object that can be used on the fly, this can sometimes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="454">
          
          
          <code class="ruby">      # be useful to configure an intricate read operation.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="455">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="456">
          
          
          <code class="ruby">      #   # Read bit 5 of RAM address 0xFFFF1280</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="457">
          
          
          <code class="ruby">      #   dummy = Reg.dummy           # Create a dummy reg to configure the read operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="458">
          
          
          <code class="ruby">      #   dummy.address = 0xFFFF1280  # Set the address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="459">
          
          
          <code class="ruby">      #   dummy.bit(5).read!(1)       # Read bit 5 expecting a 1</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="460">
          <span class="hits">2</span>
          
          <code class="ruby">      def self.dummy(size = 16)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="461">
          <span class="hits">1</span>
          
          <code class="ruby">        Reg.new(self, 0, size, :dummy, init_as_writable: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="462">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="463">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="464">
          
          
          <code class="ruby">      # Returns each named bit collection contained in the register,</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="465">
          <span class="hits">2</span>
          
          <code class="ruby">      def named_bits(options = {})</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="466">
          <span class="hits">35</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="467">
          
          
          <code class="ruby">          include_spacers: false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="468">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="469">
          <span class="hits">35</span>
          
          <code class="ruby">        result = []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="470">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="471">
          
          
          <code class="ruby">        # test if @lookup has any values stored as an array</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="472">
          
          
          <code class="ruby">        # if so it means there is a split group of bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="473">
          
          
          <code class="ruby">        # process that differently to a single bit or continuous range of bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="474">
          
          
          <code class="ruby">        # which are typically stored in a hash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="475">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="476">
          <span class="hits">35</span>
          
          <code class="ruby">        split_bits = false</code>
        </li>
      
        <li class="covered" data-hits="160" data-linenumber="477">
          <span class="hits">160</span>
          
          <code class="ruby">        @lookup.each { |_k, v| split_bits = true if v.is_a? Array }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="478">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="479">
          <span class="hits">35</span>
          
          <code class="ruby">        if split_bits == false</code>
        </li>
      
        <li class="covered" data-hits="31" data-linenumber="480">
          <span class="hits">31</span>
          
          <code class="ruby">          current_pos = size</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="481">
          
          
          <code class="ruby">          # Sort by position descending</code>
        </li>
      
        <li class="covered" data-hits="128" data-linenumber="482">
          <span class="hits">128</span>
          
          <code class="ruby">          @lookup.sort_by { |_name, details| -details[:pos] }.each do |name, details|</code>
        </li>
      
        <li class="covered" data-hits="97" data-linenumber="483">
          <span class="hits">97</span>
          
          <code class="ruby">            pos = details[:bits] + details[:pos]</code>
        </li>
      
        <li class="covered" data-hits="97" data-linenumber="484">
          <span class="hits">97</span>
          
          <code class="ruby">            if options[:include_spacers] &amp;&amp; (pos != current_pos)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="485">
          
          
          <code class="ruby">              collection = BitCollection.dummy(self, nil, size: current_pos - pos, pos: pos)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="486">
          
          
          <code class="ruby">              unless collection.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="487">
          
          
          <code class="ruby">                if block_given?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="488">
          
          
          <code class="ruby">                  yield nil, collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="489">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="490">
          
          
          <code class="ruby">                  result &lt;&lt; [nil, collection]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="491">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="492">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="493">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="97" data-linenumber="494">
          <span class="hits">97</span>
          
          <code class="ruby">            collection = BitCollection.new(self, name)</code>
        </li>
      
        <li class="covered" data-hits="97" data-linenumber="495">
          <span class="hits">97</span>
          
          <code class="ruby">            details[:bits].times do |i|</code>
        </li>
      
        <li class="covered" data-hits="496" data-linenumber="496">
          <span class="hits">496</span>
          
          <code class="ruby">              collection &lt;&lt; @bits[details[:pos] + i]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="497">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="97" data-linenumber="498">
          <span class="hits">97</span>
          
          <code class="ruby">            unless collection.size == 0</code>
        </li>
      
        <li class="covered" data-hits="97" data-linenumber="499">
          <span class="hits">97</span>
          
          <code class="ruby">              if block_given?</code>
        </li>
      
        <li class="covered" data-hits="97" data-linenumber="500">
          <span class="hits">97</span>
          
          <code class="ruby">                yield name, collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="501">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="502">
          
          
          <code class="ruby">                result &lt;&lt; [name, collection]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="503">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="504">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="97" data-linenumber="505">
          <span class="hits">97</span>
          
          <code class="ruby">            current_pos = details[:pos]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="506">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="31" data-linenumber="507">
          <span class="hits">31</span>
          
          <code class="ruby">          if options[:include_spacers] &amp;&amp; current_pos != 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="508">
          
          
          <code class="ruby">            collection = BitCollection.dummy(self, nil, size: current_pos, pos: 0)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="509">
          
          
          <code class="ruby">            unless collection.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="510">
          
          
          <code class="ruby">              if block_given?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="511">
          
          
          <code class="ruby">                yield nil, collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="512">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="513">
          
          
          <code class="ruby">                result &lt;&lt; [nil, collection]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="514">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="515">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="516">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="517">
          
          
          <code class="ruby">        elsif split_bits == true # if there are split bits, need to convert all register bit values to array elements to allow sorting</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="518">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="519">
          
          
          <code class="ruby">          # if the register has bits split up across it, then store the bits in order of decreasing reg position</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="520">
          
          
          <code class="ruby">          # but first, stuff all the bits in a simple array, as single bits, or ranges of bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="521">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="522">
          <span class="hits">4</span>
          
          <code class="ruby">          @lookup_splits = []</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="523">
          <span class="hits">4</span>
          
          <code class="ruby">          @lookup.each do |k, v|</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="524">
          <span class="hits">28</span>
          
          <code class="ruby">            tempbit = {}</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="525">
          <span class="hits">28</span>
          
          <code class="ruby">            bitcounter = {}</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="526">
          <span class="hits">28</span>
          
          <code class="ruby">            if v.is_a? Hash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="527">
          
          
          <code class="ruby">              # then this is already a single bit or a continuous range so just stuff it into the array</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="528">
          <span class="hits">8</span>
          
          <code class="ruby">              tempbit[k] = v</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="529">
          <span class="hits">8</span>
          
          <code class="ruby">              @lookup_splits &lt;&lt; tempbit.clone</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="530">
          
          
          <code class="ruby">            elsif v.is_a? Array</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="531">
          
          
          <code class="ruby">              # if the bitgroup is split, then decompose into single bits and continuous ranges</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="532">
          <span class="hits">20</span>
          
          <code class="ruby">              v.each_with_index do |bitdetail, _i|</code>
        </li>
      
        <li class="covered" data-hits="56" data-linenumber="533">
          <span class="hits">56</span>
          
          <code class="ruby">                if bitcounter.key?(k)</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="534">
          <span class="hits">36</span>
          
          <code class="ruby">                  bitcounter[k] = bitcounter[k] + bitdetail[:bits]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="535">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="536">
          <span class="hits">20</span>
          
          <code class="ruby">                  bitcounter[k] = bitdetail[:bits]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="537">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="covered" data-hits="56" data-linenumber="538">
          <span class="hits">56</span>
          
          <code class="ruby">                tempbit[k] = bitdetail</code>
        </li>
      
        <li class="covered" data-hits="56" data-linenumber="539">
          <span class="hits">56</span>
          
          <code class="ruby">                @lookup_splits &lt;&lt; tempbit.clone</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="540">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="541">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="542">
          <span class="hits">28</span>
          
          <code class="ruby">            if v.is_a? Array</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="543">
          <span class="hits">20</span>
          
          <code class="ruby">              @lookup_splits.each_with_index do |_e, q|</code>
        </li>
      
        <li class="covered" data-hits="172" data-linenumber="544">
          <span class="hits">172</span>
          
          <code class="ruby">                groupname = @lookup_splits[q].to_a[0][0]</code>
        </li>
      
        <li class="covered" data-hits="172" data-linenumber="545">
          <span class="hits">172</span>
          
          <code class="ruby">                if groupname == k</code>
        </li>
      
        <li class="covered" data-hits="56" data-linenumber="546">
          <span class="hits">56</span>
          
          <code class="ruby">                  @lookup_splits[q][groupname][:bitgrouppos] = bitcounter[groupname] if groupname == k</code>
        </li>
      
        <li class="covered" data-hits="56" data-linenumber="547">
          <span class="hits">56</span>
          
          <code class="ruby">                  bitcounter[groupname] = bitcounter[groupname] - @lookup_splits[q][groupname][:bits]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="548">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="549">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="550">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="551">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="552">
          
          
          <code class="ruby">          # Now sort the array in descending order</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="553">
          
          
          <code class="ruby">          # Does adding the bitgrouppos need to happen after the sort ?</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="554">
          <span class="hits">4</span>
          
          <code class="ruby">          @lookup_splits = @lookup_splits.sort do |a, b|</code>
        </li>
      
        <li class="covered" data-hits="188" data-linenumber="555">
          <span class="hits">188</span>
          
          <code class="ruby">            b.to_a[0][1][:pos] &lt;=&gt; a.to_a[0][1][:pos]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="556">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="557">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="558">
          <span class="hits">4</span>
          
          <code class="ruby">          current_pos = size</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="559">
          <span class="hits">4</span>
          
          <code class="ruby">          countbits = {} # if countbits.method == nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="560">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="561">
          <span class="hits">4</span>
          
          <code class="ruby">          @master = {}</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="562">
          <span class="hits">4</span>
          
          <code class="ruby">          bitgroup = {}</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="563">
          <span class="hits">4</span>
          
          <code class="ruby">          bitinfo = {}</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="564">
          <span class="hits">4</span>
          
          <code class="ruby">          info = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="565">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="566">
          <span class="hits">4</span>
          
          <code class="ruby">          @lookup_splits.each_with_index do |hash, _i|</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="567">
          <span class="hits">64</span>
          
          <code class="ruby">            name = hash.to_a[0][0]</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="568">
          <span class="hits">64</span>
          
          <code class="ruby">            details = hash.to_a[0][1]</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="569">
          <span class="hits">64</span>
          
          <code class="ruby">            bitcounter = hash.to_a[0][1][:bitgrouppos]</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="570">
          <span class="hits">64</span>
          
          <code class="ruby">            pos = details[:bits] + details[:pos]</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="571">
          <span class="hits">64</span>
          
          <code class="ruby">            if options[:include_spacers] &amp;&amp; (pos != current_pos)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="572">
          
          
          <code class="ruby">              collection = BitCollection.dummy(self, nil, size: current_pos - pos, pos: pos)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="573">
          
          
          <code class="ruby">              unless collection.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="574">
          
          
          <code class="ruby">                if block_given?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="575">
          
          
          <code class="ruby">                  yield nil, collection, bitcounter</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="576">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="577">
          
          
          <code class="ruby">                  result &lt;&lt; [nil, collection, bitcounter]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="578">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="579">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="580">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="581">
          <span class="hits">64</span>
          
          <code class="ruby">            collection = BitCollection.new(self, name)</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="582">
          <span class="hits">64</span>
          
          <code class="ruby">            details[:bits].times do |i|</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="583">
          <span class="hits">64</span>
          
          <code class="ruby">              collection &lt;&lt; @bits[details[:pos] + i]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="584">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="585">
          <span class="hits">64</span>
          
          <code class="ruby">            unless collection.size == 0</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="586">
          <span class="hits">64</span>
          
          <code class="ruby">              if block_given?</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="587">
          <span class="hits">64</span>
          
          <code class="ruby">                yield name, collection, bitcounter</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="588">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="589">
          
          
          <code class="ruby">                result &lt;&lt; [name, collection, bitcounter]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="590">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="591">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="592">
          <span class="hits">64</span>
          
          <code class="ruby">            current_pos = details[:pos]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="593">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="594">
          <span class="hits">4</span>
          
          <code class="ruby">          if options[:include_spacers] &amp;&amp; current_pos != 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="595">
          
          
          <code class="ruby">            collection = BitCollection.dummy(self, nil, size: current_pos, pos: 0)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="596">
          
          
          <code class="ruby">            unless collection.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="597">
          
          
          <code class="ruby">              if block_given?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="598">
          
          
          <code class="ruby">                yield nil, collection, bitcounter</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="599">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="600">
          
          
          <code class="ruby">                result &lt;&lt; [nil, collection, bitcounter]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="601">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="602">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="603">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="604">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="605">
          <span class="hits">35</span>
          
          <code class="ruby">        unless block_given?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="606">
          
          
          <code class="ruby">          result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="607">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="608">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="609">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="610">
          
          
          <code class="ruby">      # Returns each named bit collection contained in self</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="611">
          <span class="hits">2</span>
          
          <code class="ruby">      def reverse_named_bits(_options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="612">
          
          
          <code class="ruby">        bits = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="613">
          
          
          <code class="ruby">        named_bits { |name, bit| bits &lt;&lt; [name, bit] }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="614">
          
          
          <code class="ruby">        bits.each do |bit|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="615">
          
          
          <code class="ruby">          yield bit[0], bit[1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="616">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="617">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="618">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="619">
          
          
          <code class="ruby">      # Returns an array of occupied bit positions</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="620">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="621">
          
          
          <code class="ruby">      #   reg :fstat, @base + 0x0000, :size =&gt; 8 do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="622">
          
          
          <code class="ruby">      #     bit 7,  :ccif</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="623">
          
          
          <code class="ruby">      #     bit 6,  :rdcolerr</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="624">
          
          
          <code class="ruby">      #     bit 5,  :accerr</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="625">
          
          
          <code class="ruby">      #     bit 4,  :pviol</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="626">
          
          
          <code class="ruby">      #     bit 0,  :mgstat0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="627">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="628">
          
          
          <code class="ruby">      #   regs(:fstat).used_bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="629">
          
          
          <code class="ruby">      #   =&gt; [0, 4, 5, 6, 7]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="630">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="631">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="632">
          
          
          <code class="ruby">      #   reg :aguahb2, @base + 0x2A, :size =&gt; 8 do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="633">
          
          
          <code class="ruby">      #     bit 5..2, :m0b_hbstrb, :reset =&gt; 0x0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="634">
          
          
          <code class="ruby">      #     bit 1..0, :m0b_htrans, :reset =&gt; 0x2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="635">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="636">
          
          
          <code class="ruby">      #   regs(:aguahb2).used_bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="637">
          
          
          <code class="ruby">      #   =&gt; [0, 1, 2, 3, 4, 5]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="638">
          <span class="hits">2</span>
          
          <code class="ruby">      def used_bits(_options = {})</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="639">
          <span class="hits">12</span>
          
          <code class="ruby">        used_bits = []</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="640">
          <span class="hits">12</span>
          
          <code class="ruby">        named_bits do |_name, bit|</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="641">
          <span class="hits">28</span>
          
          <code class="ruby">          used_bits &lt;&lt; bit.position if bit.size == 1</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="642">
          <span class="hits">28</span>
          
          <code class="ruby">          if bit.size &gt; 1</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="643">
          <span class="hits">18</span>
          
          <code class="ruby">            used_bits &lt;&lt; ((bit.position)..(bit.position + bit.size - 1)).to_a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="644">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="645">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="646">
          <span class="hits">12</span>
          
          <code class="ruby">        used_bits.flatten!</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="647">
          <span class="hits">12</span>
          
          <code class="ruby">        used_bits.sort!</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="648">
          <span class="hits">12</span>
          
          <code class="ruby">        used_bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="649">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="650">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="651">
          
          
          <code class="ruby">      # Returns true if any named_bits exist, false if used_bits is an empty array</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="652">
          <span class="hits">2</span>
          
          <code class="ruby">      def used_bits?(_options = {})</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="653">
          <span class="hits">3</span>
          
          <code class="ruby">        used_bits.size &gt; 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="654">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="655">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="656">
          
          
          <code class="ruby">      # Returns an array of unoccupied bit positions</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="657">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="658">
          
          
          <code class="ruby">      #   reg :fstat, @base + 0x0000, :size =&gt; 8 do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="659">
          
          
          <code class="ruby">      #     bit 7,  :ccif</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="660">
          
          
          <code class="ruby">      #     bit 6,  :rdcolerr</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="661">
          
          
          <code class="ruby">      #     bit 5,  :accerr</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="662">
          
          
          <code class="ruby">      #     bit 4,  :pviol</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="663">
          
          
          <code class="ruby">      #     bit 0,  :mgstat0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="664">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="665">
          
          
          <code class="ruby">      #   regs(:fstat).empty_bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="666">
          
          
          <code class="ruby">      #   =&gt; [1, 2, 3]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="667">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="668">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="669">
          
          
          <code class="ruby">      #   reg :aguahb2, @base + 0x2A, :size =&gt; 8 do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="670">
          
          
          <code class="ruby">      #     bit 5..2, :m0b_hbstrb, :reset =&gt; 0x0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="671">
          
          
          <code class="ruby">      #     bit 1..0, :m0b_htrans, :reset =&gt; 0x2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="672">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="673">
          
          
          <code class="ruby">      #   regs(:aguahb2).empty_bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="674">
          
          
          <code class="ruby">      #   =&gt; [6, 7]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="675">
          <span class="hits">2</span>
          
          <code class="ruby">      def empty_bits(_options = {})</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="676">
          <span class="hits">7</span>
          
          <code class="ruby">        array_span = (0..(size - 1)).to_a</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="677">
          <span class="hits">7</span>
          
          <code class="ruby">        empty_bits = array_span - used_bits</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="678">
          <span class="hits">7</span>
          
          <code class="ruby">        empty_bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="679">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="680">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="681">
          
          
          <code class="ruby">      # Returns true if any named_bits exist, false if used_bits is an empty array</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="682">
          <span class="hits">2</span>
          
          <code class="ruby">      def empty_bits?(_options = {})</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="683">
          <span class="hits">5</span>
          
          <code class="ruby">        empty_bits.size &gt; 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="684">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="685">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="686">
          
          
          <code class="ruby">      # Proxies requests from bit collections to the register owner</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="687">
          <span class="hits">2</span>
          
          <code class="ruby">      def request(operation, options = {}) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="688">
          <span class="hits">11</span>
          
          <code class="ruby">        if operation == :read_register</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="689">
          <span class="hits">6</span>
          
          <code class="ruby">          object = reader</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="690">
          <span class="hits">6</span>
          
          <code class="ruby">          (Origen.top_level || owner).read_register_missing!(self) unless object</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="691">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="692">
          <span class="hits">5</span>
          
          <code class="ruby">          object = writer</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="693">
          <span class="hits">5</span>
          
          <code class="ruby">          (Origen.top_level || owner).write_register_missing!(self) unless object</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="694">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="695">
          <span class="hits">11</span>
          
          <code class="ruby">        object.send(operation, self, options)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="696">
          <span class="hits">11</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="697">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="698">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="699">
          
          
          <code class="ruby">      # Returns the object that will be responsible for writing the given register</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="700">
          <span class="hits">2</span>
          
          <code class="ruby">      def writer</code>
        </li>
      
        <li class="covered" data-hits="248" data-linenumber="701">
          <span class="hits">248</span>
          
          <code class="ruby">        @writer ||= lookup_operation_handler(:write_register)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="702">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="703">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="704">
          
          
          <code class="ruby">      # Returns the object that will be responsible for reading the given register</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="705">
          <span class="hits">2</span>
          
          <code class="ruby">      def reader</code>
        </li>
      
        <li class="covered" data-hits="31" data-linenumber="706">
          <span class="hits">31</span>
          
          <code class="ruby">        @reader ||= lookup_operation_handler(:read_register)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="707">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="708">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="709">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="710">
          <span class="hits">2</span>
          
          <code class="ruby">      def lookup_operation_handler(operation)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="711">
          
          
          <code class="ruby">        # Could have made the controller be the owner when assigned above, but may have run</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="712">
          
          
          <code class="ruby">        # into problems with the reg meta data stuff</code>
        </li>
      
        <li class="covered" data-hits="85" data-linenumber="713">
          <span class="hits">85</span>
          
          <code class="ruby">        reg_owner = owner.respond_to?(:controller) &amp;&amp; owner.controller ? owner.controller : owner</code>
        </li>
      
        <li class="covered" data-hits="85" data-linenumber="714">
          <span class="hits">85</span>
          
          <code class="ruby">        if reg_owner.respond_to?(operation)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="715">
          <span class="hits">10</span>
          
          <code class="ruby">          reg_owner</code>
        </li>
      
        <li class="covered" data-hits="75" data-linenumber="716">
          <span class="hits">75</span>
          
          <code class="ruby">        elsif reg_owner.respond_to?(:owner) &amp;&amp; reg_owner.owner.respond_to?(operation)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="717">
          <span class="hits">2</span>
          
          <code class="ruby">          reg_owner.owner</code>
        </li>
      
        <li class="covered" data-hits="73" data-linenumber="718">
          <span class="hits">73</span>
          
          <code class="ruby">        elsif Origen.top_level &amp;&amp; Origen.top_level.respond_to?(operation)</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="719">
          <span class="hits">33</span>
          
          <code class="ruby">          Origen.top_level</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="720">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="721">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="722">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="723">
          
          
          <code class="ruby">      # Returns the relative address of the given register, equivalent to calling</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="724">
          
          
          <code class="ruby">      # reg.address(:relative =&gt; true)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="725">
          <span class="hits">2</span>
          
          <code class="ruby">      def offset</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="726">
          <span class="hits">1</span>
          
          <code class="ruby">        address(relative: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="727">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="728">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="729">
          
          
          <code class="ruby">      # Returns the register address added to its current base_address value (if any).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="730">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="731">
          
          
          <code class="ruby">      # @param [Hash] options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="732">
          
          
          <code class="ruby">      # @option options [Boolean] :relative (false) Return the address without adding the base address (if present)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="733">
          <span class="hits">2</span>
          
          <code class="ruby">      def address(options = {})</code>
        </li>
      
        <li class="covered" data-hits="697" data-linenumber="734">
          <span class="hits">697</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="735">
          
          
          <code class="ruby">          relative: false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="736">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="697" data-linenumber="737">
          <span class="hits">697</span>
          
          <code class="ruby">        address = @address</code>
        </li>
      
        <li class="covered" data-hits="697" data-linenumber="738">
          <span class="hits">697</span>
          
          <code class="ruby">        domain_option = options[:domains] || options[:domain]</code>
        </li>
      
        <li class="covered" data-hits="697" data-linenumber="739">
          <span class="hits">697</span>
          
          <code class="ruby">        @domain_option ||= domain_option unless frozen?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="740">
          
          
          <code class="ruby">        # Blow the cache when the domain option changes</code>
        </li>
      
        <li class="covered" data-hits="697" data-linenumber="741">
          <span class="hits">697</span>
          
          <code class="ruby">        @base_address_applied = nil unless @domain_option == domain_option</code>
        </li>
      
        <li class="covered" data-hits="697" data-linenumber="742">
          <span class="hits">697</span>
          
          <code class="ruby">        unless @base_address_applied</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="743">
          
          
          <code class="ruby">          # Give highest priority to the original API which allowed the object</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="744">
          
          
          <code class="ruby">          # doing register read/write to define a base_address method</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="745">
          
          
          <code class="ruby">          if (writer &amp;&amp; writer.methods.include?(:base_address) &amp;&amp; writer.method(:base_address).arity != 0) ||</code>
        </li>
      
        <li class="covered" data-hits="53" data-linenumber="746">
          <span class="hits">53</span>
          
          <code class="ruby">             (reader &amp;&amp; reader.methods.include?(:base_address) &amp;&amp; reader.method(:base_address).arity != 0)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="747">
          
          
          <code class="ruby">            # This currently assumes that the base address is always the same</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="748">
          
          
          <code class="ruby">            # for reading and writing</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="749">
          <span class="hits">30</span>
          
          <code class="ruby">            if writer &amp;&amp; writer.respond_to?(:base_address) &amp;&amp; writer.method(:base_address).arity != 0</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="750">
          <span class="hits">30</span>
          
          <code class="ruby">              self.base_address = writer.base_address(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="751">
          
          
          <code class="ruby">            elsif reader &amp;&amp; reader.respond_to?(:base_address) &amp;&amp; reader.method(:base_address).arity != 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="752">
          
          
          <code class="ruby">              self.base_address = reader.base_address(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="753">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="754">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="755">
          <span class="hits">23</span>
          
          <code class="ruby">            o = owner.is_a?(Container) ? owner.owner : owner</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="756">
          <span class="hits">23</span>
          
          <code class="ruby">            d = domain_option || domains</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="757">
          <span class="hits">23</span>
          
          <code class="ruby">            if o &amp;&amp; o.reg_base_address(domain: d)</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="758">
          <span class="hits">23</span>
          
          <code class="ruby">              self.base_address = o.reg_base_address(domain: d)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="759">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="760">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="53" data-linenumber="761">
          <span class="hits">53</span>
          
          <code class="ruby">          @base_address_applied = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="762">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="697" data-linenumber="763">
          <span class="hits">697</span>
          
          <code class="ruby">        unless options[:relative]</code>
        </li>
      
        <li class="covered" data-hits="693" data-linenumber="764">
          <span class="hits">693</span>
          
          <code class="ruby">          address += base_address if base_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="765">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="697" data-linenumber="766">
          <span class="hits">697</span>
          
          <code class="ruby">        if options[:address_type]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="767">
          
          
          <code class="ruby">          Origen.deprecate &#39;Specifying the address_type of a register address will be removed from Origen 3&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="768">
          
          
          <code class="ruby">          case options[:address_type]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="769">
          
          
          <code class="ruby">            when :byte</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="770">
          
          
          <code class="ruby">              address = address * 2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="771">
          
          
          <code class="ruby">            when :word</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="772">
          
          
          <code class="ruby">              address = address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="773">
          
          
          <code class="ruby">            when :longword</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="774">
          
          
          <code class="ruby">              address = address / 2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="775">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="776">
          
          
          <code class="ruby">              fail &#39;Unknown address type requested!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="777">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="778">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="697" data-linenumber="779">
          <span class="hits">697</span>
          
          <code class="ruby">        address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="780">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="781">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :addr, :address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="782">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="783">
          
          
          <code class="ruby">      # Returns true if the register owner matches the given name. A match will be detected</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="784">
          
          
          <code class="ruby">      # if the class names of the register&#39;s owner contains the given name.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="785">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="786">
          
          
          <code class="ruby">      # Alternatively if the register owner implements a method called reg_owner_alias</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="787">
          
          
          <code class="ruby">      # then the value that this returns instead will also be considered when checking if the given</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="788">
          
          
          <code class="ruby">      # name matches. This method can return an array of names if multiple aliases are required.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="789">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="790">
          
          
          <code class="ruby">      # Aliases can be useful for de-coupling the commonly used name, e.g. &quot;NVM&quot; from the actual</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="791">
          
          
          <code class="ruby">      # class name.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="792">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="793">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="794">
          
          
          <code class="ruby">      #   class C90NVM</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="795">
          
          
          <code class="ruby">      #     include Origen::Registers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="796">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="797">
          
          
          <code class="ruby">      #     def initialize</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="798">
          
          
          <code class="ruby">      #       add_reg :clkdiv, 0x3, 16, :div =&gt; {:bits =&gt; 8}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="799">
          
          
          <code class="ruby">      #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="800">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="801">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="802">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="803">
          
          
          <code class="ruby">      #   reg = C90NVM.new.reg(:clkdiv)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="804">
          
          
          <code class="ruby">      #   reg.owned_by?(:ram)      # =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="805">
          
          
          <code class="ruby">      #   reg.owned_by?(:nvm)      # =&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="806">
          
          
          <code class="ruby">      #   reg.owned_by?(:c90nvm)   # =&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="807">
          
          
          <code class="ruby">      #   reg.owned_by?(:c40nvm)   # =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="808">
          
          
          <code class="ruby">      #   reg.owned_by?(:flash)    # =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="809">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="810">
          
          
          <code class="ruby">      # @example Using an alias</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="811">
          
          
          <code class="ruby">      #   class C90NVM</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="812">
          
          
          <code class="ruby">      #     include Origen::Registers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="813">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="814">
          
          
          <code class="ruby">      #     def initialize</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="815">
          
          
          <code class="ruby">      #       add_reg :clkdiv, 0x3, 16, :div =&gt; {:bits =&gt; 8}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="816">
          
          
          <code class="ruby">      #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="817">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="818">
          
          
          <code class="ruby">      #     def reg_owner_alias</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="819">
          
          
          <code class="ruby">      #       &quot;flash&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="820">
          
          
          <code class="ruby">      #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="821">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="822">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="823">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="824">
          
          
          <code class="ruby">      #   reg = C90NVM.new.reg(:clkdiv)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="825">
          
          
          <code class="ruby">      #   reg.owned_by?(:ram)      # =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="826">
          
          
          <code class="ruby">      #   reg.owned_by?(:nvm)      # =&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="827">
          
          
          <code class="ruby">      #   reg.owned_by?(:c90nvm)   # =&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="828">
          
          
          <code class="ruby">      #   reg.owned_by?(:c40nvm)   # =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="829">
          
          
          <code class="ruby">      #   reg.owned_by?(:flash)    # =&gt; true</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="830">
          <span class="hits">2</span>
          
          <code class="ruby">      def owned_by?(name)</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="831">
          <span class="hits">34</span>
          
          <code class="ruby">        !!(owner.class.to_s =~ /#{name}/i) || begin</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="832">
          <span class="hits">27</span>
          
          <code class="ruby">          if owner.respond_to?(:reg_owner_alias)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="833">
          <span class="hits">3</span>
          
          <code class="ruby">            [owner.reg_owner_alias].flatten.any? do |al|</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="834">
          <span class="hits">5</span>
          
          <code class="ruby">              al.to_s =~ /#{name}/i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="835">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="836">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="837">
          <span class="hits">24</span>
          
          <code class="ruby">            false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="838">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="839">
          <span class="hits">34</span>
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="840">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="841">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="842">
          
          
          <code class="ruby">      # Returns true if the register contains a bit(s) matching the given name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="843">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="844">
          
          
          <code class="ruby">      #   add_reg :control, 0x55, :status =&gt; {:pos =&gt; 1}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="845">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="846">
          
          
          <code class="ruby">      #   reg(:control).has_bit?(:result)     # =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="847">
          
          
          <code class="ruby">      #   reg(:control).has_bit?(:status)     # =&gt; true</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="848">
          <span class="hits">2</span>
          
          <code class="ruby">      def has_bit?(name)</code>
        </li>
      
        <li class="covered" data-hits="1980" data-linenumber="849">
          <span class="hits">1980</span>
          
          <code class="ruby">        @lookup.include?(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="850">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="851">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :has_bits?, :has_bit?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="852">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :has_bit, :has_bit?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="853">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :has_bits, :has_bit?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="854">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="855">
          
          
          <code class="ruby">      # Add a bit to the register, should only be called internally</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="856">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_bit(id, position, options = {}) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="121" data-linenumber="857">
          <span class="hits">121</span>
          
          <code class="ruby">        options = { data: @bits[position].data,  # If undefined preserve any data/reset value that has</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="858">
          
          
          <code class="ruby">                    res:  @bits[position].data,   # already been applied at reg level</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="859">
          
          
          <code class="ruby">                  }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="860">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="121" data-linenumber="861">
          <span class="hits">121</span>
          
          <code class="ruby">        @lookup[id] = { pos: position, bits: 1, feature: options[:feature] }</code>
        </li>
      
        <li class="covered" data-hits="121" data-linenumber="862">
          <span class="hits">121</span>
          
          <code class="ruby">        @bits.delete_at(position)    # Remove the initial bit from this position</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="863">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="121" data-linenumber="864">
          <span class="hits">121</span>
          
          <code class="ruby">        @bits.insert(position, Bit.new(self, position, options))</code>
        </li>
      
        <li class="covered" data-hits="121" data-linenumber="865">
          <span class="hits">121</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="866">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="867">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="868">
          
          
          <code class="ruby">      # Add a bus to the register, should only be called internally</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="869">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_bus(id, position, size, options = {}) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="285" data-linenumber="870">
          <span class="hits">285</span>
          
          <code class="ruby">        default_data = 0</code>
        </li>
      
        <li class="covered" data-hits="285" data-linenumber="871">
          <span class="hits">285</span>
          
          <code class="ruby">        size.times do |n|</code>
        </li>
      
        <li class="covered" data-hits="3506" data-linenumber="872">
          <span class="hits">3506</span>
          
          <code class="ruby">          default_data |= @bits[position + n].data &lt;&lt; n</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="873">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="285" data-linenumber="874">
          <span class="hits">285</span>
          
          <code class="ruby">        options = { data: default_data,  # If undefined preserve any data/reset value that has</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="875">
          
          
          <code class="ruby">                    res:  default_data,   # already been applied at reg level</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="876">
          
          
          <code class="ruby">                  }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="877">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="285" data-linenumber="878">
          <span class="hits">285</span>
          
          <code class="ruby">        @lookup[id] = { pos: position, bits: size }</code>
        </li>
      
        <li class="covered" data-hits="285" data-linenumber="879">
          <span class="hits">285</span>
          
          <code class="ruby">        size.times do |n|</code>
        </li>
      
        <li class="covered" data-hits="3506" data-linenumber="880">
          <span class="hits">3506</span>
          
          <code class="ruby">          bit_options = options.dup</code>
        </li>
      
        <li class="covered" data-hits="3506" data-linenumber="881">
          <span class="hits">3506</span>
          
          <code class="ruby">          bit_options[:data] = options[:data][n]</code>
        </li>
      
        <li class="covered" data-hits="3506" data-linenumber="882">
          <span class="hits">3506</span>
          
          <code class="ruby">          if options[:res].is_a?(Symbol)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="883">
          <span class="hits">16</span>
          
          <code class="ruby">            bit_options[:res]  = options[:res]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="884">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="3490" data-linenumber="885">
          <span class="hits">3490</span>
          
          <code class="ruby">            bit_options[:res]  = options[:res][n]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="886">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="3506" data-linenumber="887">
          <span class="hits">3506</span>
          
          <code class="ruby">          @bits.delete_at(position + n)</code>
        </li>
      
        <li class="covered" data-hits="3506" data-linenumber="888">
          <span class="hits">3506</span>
          
          <code class="ruby">          @bits.insert(position + n, Bit.new(self, position + n, bit_options))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="889">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="285" data-linenumber="890">
          <span class="hits">285</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="891">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="892">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="893">
          <span class="hits">2</span>
          
          <code class="ruby">      def add_bus_scramble(id, array_of_hashes = [])</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="894">
          <span class="hits">13</span>
          
          <code class="ruby">        array_of_hashes.each do |options|</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="895">
          <span class="hits">38</span>
          
          <code class="ruby">          bind(id, options.delete(:bind)) if options[:bind]</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="896">
          <span class="hits">38</span>
          
          <code class="ruby">          position = options[:pos] || 0</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="897">
          <span class="hits">38</span>
          
          <code class="ruby">          num_bits = options[:bits] || 1</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="898">
          <span class="hits">38</span>
          
          <code class="ruby">          size = options[:bits]</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="899">
          <span class="hits">38</span>
          
          <code class="ruby">          options[:data] = options[:data] if options[:data]</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="900">
          <span class="hits">38</span>
          
          <code class="ruby">          options[:res] = options[:reset] if options[:reset]</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="901">
          <span class="hits">38</span>
          
          <code class="ruby">          default_data = 0</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="902">
          <span class="hits">38</span>
          
          <code class="ruby">          size.times do |n|</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="903">
          <span class="hits">39</span>
          
          <code class="ruby">            default_data |= @bits[position + n].data &lt;&lt; n</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="904">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="905">
          <span class="hits">38</span>
          
          <code class="ruby">          options = { data: default_data,  # If undefined preserve any data/reset value that has</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="906">
          
          
          <code class="ruby">                      res:  default_data,   # already been applied at reg level</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="907">
          
          
          <code class="ruby">                    }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="908">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="909">
          <span class="hits">38</span>
          
          <code class="ruby">          @lookup[id] = [] if @lookup[id].nil?</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="910">
          <span class="hits">38</span>
          
          <code class="ruby">          @lookup[id] = @lookup[id].push(pos: position, bits: size)</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="911">
          <span class="hits">38</span>
          
          <code class="ruby">          size.times do |n|</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="912">
          <span class="hits">39</span>
          
          <code class="ruby">            bit_options = options.dup</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="913">
          <span class="hits">39</span>
          
          <code class="ruby">            bit_options[:data] = options[:data][n]</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="914">
          <span class="hits">39</span>
          
          <code class="ruby">            bit_options[:res]  = options[:res][n]</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="915">
          <span class="hits">39</span>
          
          <code class="ruby">            @bits.delete_at(position + n)</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="916">
          <span class="hits">39</span>
          
          <code class="ruby">            @bits.insert(position + n, Bit.new(self, position + n, bit_options))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="917">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="918">
          <span class="hits">38</span>
          
          <code class="ruby">          self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="919">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="920">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="921">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="922">
          
          
          <code class="ruby">      # Delete the bits in the collection from the register</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="923">
          <span class="hits">2</span>
          
          <code class="ruby">      def delete_bit(collection)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="924">
          <span class="hits">2</span>
          
          <code class="ruby">        [collection.name].flatten.each do |name|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="925">
          <span class="hits">2</span>
          
          <code class="ruby">          @lookup.delete(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="926">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="927">
          <span class="hits">2</span>
          
          <code class="ruby">        collection.each do |bit|</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="928">
          <span class="hits">16</span>
          
          <code class="ruby">          @bits.delete_at(bit.position)    # Remove the bit</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="929">
          <span class="hits">16</span>
          
          <code class="ruby">          @bits.insert(bit.position, Bit.new(self, bit.position, writable: @init_as_writable))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="930">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="931">
          <span class="hits">2</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="932">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="933">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :delete_bits, :delete_bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="934">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="935">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="936">
          <span class="hits">2</span>
          
          <code class="ruby">      def expand_range(range)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="937">
          <span class="hits">16</span>
          
          <code class="ruby">        if range.first &gt; range.last</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="938">
          <span class="hits">16</span>
          
          <code class="ruby">          range = Range.new(range.last, range.first)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="939">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="940">
          <span class="hits">16</span>
          
          <code class="ruby">        range.each do |i|</code>
        </li>
      
        <li class="covered" data-hits="130" data-linenumber="941">
          <span class="hits">130</span>
          
          <code class="ruby">          yield i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="942">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="943">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="944">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="945">
          
          
          <code class="ruby">      # Returns the bit object(s) responding to the given name, wrapped in a BitCollection.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="946">
          
          
          <code class="ruby">      # This method also accepts multiple name possibilities, if neither bit exists in</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="947">
          
          
          <code class="ruby">      # the register it will raise an error, otherwise it will return the first match.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="948">
          
          
          <code class="ruby">      # If no args passed in, it will return a BitCollection containing all bits.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="949">
          
          
          <code class="ruby">      # If a number is passed in then the bits from those positions are returned.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="950">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="951">
          
          
          <code class="ruby">      #   add_reg :control, 0x55, :status =&gt; {:pos =&gt; 1, :bits =&gt; 2},</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="952">
          
          
          <code class="ruby">      #                           :fail   =&gt; {:pos =&gt; 0}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="953">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="954">
          
          
          <code class="ruby">      #   reg(:control).bit(:fail)              # =&gt; Returns a BitCollection containing the fail bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="955">
          
          
          <code class="ruby">      #   reg(:control).bits(:status)           # =&gt; Returns a BifCollection containing the status bits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="956">
          
          
          <code class="ruby">      #   reg(:control).bit(:bist_fail, :fail)  # =&gt; Returns a BitCollection containing the fail bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="957">
          
          
          <code class="ruby">      #   reg(:control).bit(0)                  # =&gt; Returns a BitCollection containing the fail bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="958">
          
          
          <code class="ruby">      #   reg(:control).bit(1)                  # =&gt; Returns a BitCollection containing status bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="959">
          
          
          <code class="ruby">      #   reg(:control).bit(1,2)                # =&gt; Returns a BitCollection containing both status bits</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="960">
          <span class="hits">2</span>
          
          <code class="ruby">      def bit(*args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="961">
          
          
          <code class="ruby">        # return get_bits_with_constraint(nil,:default) if args.size == 0</code>
        </li>
      
        <li class="covered" data-hits="590" data-linenumber="962">
          <span class="hits">590</span>
          
          <code class="ruby">        constraint = extract_feature_params(args)</code>
        </li>
      
        <li class="covered" data-hits="590" data-linenumber="963">
          <span class="hits">590</span>
          
          <code class="ruby">        if constraint.nil?</code>
        </li>
      
        <li class="covered" data-hits="577" data-linenumber="964">
          <span class="hits">577</span>
          
          <code class="ruby">          constraint = :default</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="965">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="590" data-linenumber="966">
          <span class="hits">590</span>
          
          <code class="ruby">        collection = BitCollection.new(self, :unknown)</code>
        </li>
      
        <li class="covered" data-hits="590" data-linenumber="967">
          <span class="hits">590</span>
          
          <code class="ruby">        if args.size == 0</code>
        </li>
      
        <li class="covered" data-hits="51" data-linenumber="968">
          <span class="hits">51</span>
          
          <code class="ruby">          collection.add_name(name)</code>
        </li>
      
        <li class="covered" data-hits="51" data-linenumber="969">
          <span class="hits">51</span>
          
          <code class="ruby">          @bits.each do |bit|</code>
        </li>
      
        <li class="covered" data-hits="984" data-linenumber="970">
          <span class="hits">984</span>
          
          <code class="ruby">            collection &lt;&lt; get_bits_with_constraint(bit.position, constraint)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="971">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="972">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="539" data-linenumber="973">
          <span class="hits">539</span>
          
          <code class="ruby">          args.flatten!</code>
        </li>
      
        <li class="covered" data-hits="539" data-linenumber="974">
          <span class="hits">539</span>
          
          <code class="ruby">          args.sort!</code>
        </li>
      
        <li class="covered" data-hits="539" data-linenumber="975">
          <span class="hits">539</span>
          
          <code class="ruby">          args.each do |arg_item|</code>
        </li>
      
        <li class="covered" data-hits="578" data-linenumber="976">
          <span class="hits">578</span>
          
          <code class="ruby">            if arg_item.is_a?(Fixnum)</code>
        </li>
      
        <li class="covered" data-hits="310" data-linenumber="977">
          <span class="hits">310</span>
          
          <code class="ruby">              b = get_bits_with_constraint(arg_item, constraint)</code>
        </li>
      
        <li class="covered" data-hits="310" data-linenumber="978">
          <span class="hits">310</span>
          
          <code class="ruby">              collection &lt;&lt; b if b</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="979">
          
          
          <code class="ruby">            elsif arg_item.is_a?(Range)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="980">
          <span class="hits">16</span>
          
          <code class="ruby">              expand_range(arg_item) do |bit_number|</code>
        </li>
      
        <li class="covered" data-hits="130" data-linenumber="981">
          <span class="hits">130</span>
          
          <code class="ruby">                collection &lt;&lt; get_bits_with_constraint(bit_number, constraint)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="982">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="983">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="984">
          
          
          <code class="ruby">              # Reaches here if bit name is specified</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="985">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="252" data-linenumber="986">
          <span class="hits">252</span>
          
          <code class="ruby">              if @lookup.include?(arg_item)</code>
        </li>
      
        <li class="covered" data-hits="247" data-linenumber="987">
          <span class="hits">247</span>
          
          <code class="ruby">                split_bits = false</code>
        </li>
      
        <li class="covered" data-hits="1046" data-linenumber="988">
          <span class="hits">1046</span>
          
          <code class="ruby">                @lookup.each { |_k, v| split_bits = true if v.is_a? Array }</code>
        </li>
      
        <li class="covered" data-hits="247" data-linenumber="989">
          <span class="hits">247</span>
          
          <code class="ruby">                coll = get_lookup_feature_bits(arg_item, constraint, split_bits)</code>
        </li>
      
        <li class="covered" data-hits="247" data-linenumber="990">
          <span class="hits">247</span>
          
          <code class="ruby">                if coll</code>
        </li>
      
        <li class="covered" data-hits="247" data-linenumber="991">
          <span class="hits">247</span>
          
          <code class="ruby">                  coll.each do |b|</code>
        </li>
      
        <li class="covered" data-hits="1513" data-linenumber="992">
          <span class="hits">1513</span>
          
          <code class="ruby">                    collection.add_name(arg_item)</code>
        </li>
      
        <li class="covered" data-hits="1513" data-linenumber="993">
          <span class="hits">1513</span>
          
          <code class="ruby">                    collection &lt;&lt; b</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="994">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="995">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="996">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="997">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="998">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="999">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="590" data-linenumber="1000">
          <span class="hits">590</span>
          
          <code class="ruby">        if collection.size == 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1001">
          
          
          <code class="ruby">          # Originally Origen returned nil when asking for a bit via an index which does not</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1002">
          
          
          <code class="ruby">          # exist, e.g. reg[1000] =&gt; nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1003">
          
          
          <code class="ruby">          # The args numeric clause here is to maintain that behavior</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1004">
          <span class="hits">2</span>
          
          <code class="ruby">          if Origen.config.strict_errors &amp;&amp; !args.all? { |arg| arg.is_a?(Numeric) }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1005">
          
          
          <code class="ruby">            puts &quot;Register #{@name} does not have a bits(s) named :#{args.join(&#39;, :&#39;)} or it might not be enabled.&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1006">
          
          
          <code class="ruby">            puts &#39;This could also be a typo, these are the valid bit names:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1007">
          
          
          <code class="ruby">            puts @lookup.keys</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1008">
          
          
          <code class="ruby">            fail &#39;Missing bits error!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1009">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1010">
          
          
          <code class="ruby">          nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1011">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="589" data-linenumber="1012">
          <span class="hits">589</span>
          
          <code class="ruby">          collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1013">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1014">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1015">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :bits, :bit</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1016">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :[], :bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1017">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1018">
          <span class="hits">2</span>
          
          <code class="ruby">      def get_bits_with_constraint(number, params)</code>
        </li>
      
        <li class="covered" data-hits="1424" data-linenumber="1019">
          <span class="hits">1424</span>
          
          <code class="ruby">        return nil unless @bits[number]</code>
        </li>
      
        <li class="covered" data-hits="1423" data-linenumber="1020">
          <span class="hits">1423</span>
          
          <code class="ruby">        if (params == :default || !params) &amp;&amp; @bits[number].enabled?</code>
        </li>
      
        <li class="covered" data-hits="1183" data-linenumber="1021">
          <span class="hits">1183</span>
          
          <code class="ruby">          @bits[number]</code>
        </li>
      
        <li class="covered" data-hits="240" data-linenumber="1022">
          <span class="hits">240</span>
          
          <code class="ruby">        elsif params == :none &amp;&amp; !@bits[number].has_feature_constraint?</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="1023">
          <span class="hits">32</span>
          
          <code class="ruby">          @bits[number]</code>
        </li>
      
        <li class="covered" data-hits="208" data-linenumber="1024">
          <span class="hits">208</span>
          
          <code class="ruby">        elsif params == :all</code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="1025">
          <span class="hits">48</span>
          
          <code class="ruby">          @bits[number]</code>
        </li>
      
        <li class="covered" data-hits="160" data-linenumber="1026">
          <span class="hits">160</span>
          
          <code class="ruby">        elsif params.class == Array</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="1027">
          <span class="hits">32</span>
          
          <code class="ruby">          params.each do |param|</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="1028">
          <span class="hits">32</span>
          
          <code class="ruby">            unless @bits[number].enabled_by_feature?(param)</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="1029">
          <span class="hits">32</span>
          
          <code class="ruby">              return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1030">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1031">
          
          
          <code class="ruby">            @bits[number]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1032">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="128" data-linenumber="1033">
          <span class="hits">128</span>
          
          <code class="ruby">        elsif @bits[number].enabled_by_feature?(params)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="1034">
          <span class="hits">16</span>
          
          <code class="ruby">          @bits[number]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1035">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="112" data-linenumber="1036">
          <span class="hits">112</span>
          
          <code class="ruby">          return Bit.new(self, number, writable: false)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1037">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1038">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1039">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1040">
          <span class="hits">2</span>
          
          <code class="ruby">      def get_lookup_feature_bits(bit_name, params, split_group_reg)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1041">
          
          
          <code class="ruby">        ##</code>
        </li>
      
        <li class="covered" data-hits="247" data-linenumber="1042">
          <span class="hits">247</span>
          
          <code class="ruby">        if split_group_reg == false # if this register has single bits and continuous ranges</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1043">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="213" data-linenumber="1044">
          <span class="hits">213</span>
          
          <code class="ruby">          if @lookup.include?(bit_name)</code>
        </li>
      
        <li class="covered" data-hits="213" data-linenumber="1045">
          <span class="hits">213</span>
          
          <code class="ruby">            collection = BitCollection.new(self, bit_name)</code>
        </li>
      
        <li class="covered" data-hits="213" data-linenumber="1046">
          <span class="hits">213</span>
          
          <code class="ruby">            (@lookup[bit_name][:bits]).times do |i|</code>
        </li>
      
        <li class="covered" data-hits="1411" data-linenumber="1047">
          <span class="hits">1411</span>
          
          <code class="ruby">              collection &lt;&lt; @bits[@lookup[bit_name][:pos] + i]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1048">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="213" data-linenumber="1049">
          <span class="hits">213</span>
          
          <code class="ruby">            if !params || params == :default</code>
        </li>
      
        <li class="covered" data-hits="210" data-linenumber="1050">
          <span class="hits">210</span>
          
          <code class="ruby">              if collection.enabled?</code>
        </li>
      
        <li class="covered" data-hits="208" data-linenumber="1051">
          <span class="hits">208</span>
          
          <code class="ruby">                return collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1052">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1053">
          
          
          <code class="ruby">            elsif params == :none</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1054">
          
          
          <code class="ruby">              unless collection.has_feature_constraint?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1055">
          
          
          <code class="ruby">                return collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1056">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1057">
          
          
          <code class="ruby">            elsif params == :all</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1058">
          <span class="hits">1</span>
          
          <code class="ruby">              return collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1059">
          
          
          <code class="ruby">            elsif params.class == Array</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1060">
          <span class="hits">2</span>
          
          <code class="ruby">              if params.all? { |param| collection.enabled_by_feature?(param) }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1061">
          
          
          <code class="ruby">                return collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1062">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1063">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1064">
          <span class="hits">1</span>
          
          <code class="ruby">              if collection.enabled_by_feature?(params)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1065">
          <span class="hits">1</span>
          
          <code class="ruby">                return collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1066">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1067">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="1068">
          <span class="hits">3</span>
          
          <code class="ruby">            return BitCollection.dummy(self, bit_name, size: collection.size, pos: @lookup[bit_name][:pos])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1069">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1070">
          
          
          <code class="ruby">            return []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1071">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1072">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="1073">
          <span class="hits">34</span>
          
          <code class="ruby">        elsif split_group_reg == true # if this registers has split bits in its range</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="1074">
          <span class="hits">34</span>
          
          <code class="ruby">          if @lookup.is_a?(Hash) # &amp;&amp; @lookup.include?(bit_name)</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="1075">
          <span class="hits">34</span>
          
          <code class="ruby">            collection = false</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="1076">
          <span class="hits">34</span>
          
          <code class="ruby">            @lookup.each do |k, v|  # k is the bitname, v is the hash of bit data</code>
        </li>
      
        <li class="covered" data-hits="190" data-linenumber="1077">
          <span class="hits">190</span>
          
          <code class="ruby">              if k == bit_name</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="1078">
          <span class="hits">34</span>
          
          <code class="ruby">                collection ||= BitCollection.new(self, k)</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="1079">
          <span class="hits">34</span>
          
          <code class="ruby">                if v.is_a?(Array)</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="1080">
          <span class="hits">28</span>
          
          <code class="ruby">                  v.reverse_each do |pb|  # loop each piece of bit group data</code>
        </li>
      
        <li class="covered" data-hits="90" data-linenumber="1081">
          <span class="hits">90</span>
          
          <code class="ruby">                    (pb[:bits]).times do |i|</code>
        </li>
      
        <li class="covered" data-hits="96" data-linenumber="1082">
          <span class="hits">96</span>
          
          <code class="ruby">                      collection &lt;&lt; @bits[pb[:pos] + i]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1083">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1084">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1085">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="1086">
          <span class="hits">6</span>
          
          <code class="ruby">                  (v[:bits]).times do |i|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="1087">
          <span class="hits">6</span>
          
          <code class="ruby">                    collection &lt;&lt; @bits[v[:pos] + i]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1088">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1089">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1090">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1091">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="1092">
          <span class="hits">34</span>
          
          <code class="ruby">            if !params || params == :default</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="1093">
          <span class="hits">34</span>
          
          <code class="ruby">              if collection.enabled?</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="1094">
          <span class="hits">34</span>
          
          <code class="ruby">                return collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1095">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1096">
          
          
          <code class="ruby">            elsif params == :none</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1097">
          
          
          <code class="ruby">              unless collection.has_feature_constraint?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1098">
          
          
          <code class="ruby">                return collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1099">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1100">
          
          
          <code class="ruby">            elsif params == :all</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1101">
          
          
          <code class="ruby">              return collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1102">
          
          
          <code class="ruby">            elsif params.class == Array</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1103">
          
          
          <code class="ruby">              if params.all? { |param| collection.enabled_by_feature?(param) }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1104">
          
          
          <code class="ruby">                return collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1105">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1106">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1107">
          
          
          <code class="ruby">              if collection.enabled_by_feature?(params)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1108">
          
          
          <code class="ruby">                return collection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1109">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1110">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1111">
          
          
          <code class="ruby">            if @lookup.is_a?(Hash) &amp;&amp; @lookup[bit_name].is_a?(Array)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1112">
          
          
          <code class="ruby">              return BitCollection.dummy(self, bit_name, size: collection.size, pos: @lookup[bit_name][0][:pos])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1113">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1114">
          
          
          <code class="ruby">              return BitCollection.dummy(self, bit_name, size: collection.size, pos: @lookup[bit_name[:pos]])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1115">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1116">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1117">
          
          
          <code class="ruby">            return []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1118">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1119">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1120">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1121">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1122">
          <span class="hits">2</span>
          
          <code class="ruby">      def extract_feature_params(args)</code>
        </li>
      
        <li class="covered" data-hits="1178" data-linenumber="1123">
          <span class="hits">1178</span>
          
          <code class="ruby">        index = args.find_index { |arg| arg.class == Hash }</code>
        </li>
      
        <li class="covered" data-hits="590" data-linenumber="1124">
          <span class="hits">590</span>
          
          <code class="ruby">        if index</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="1125">
          <span class="hits">13</span>
          
          <code class="ruby">          params = args.delete_at(index)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1126">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="577" data-linenumber="1127">
          <span class="hits">577</span>
          
          <code class="ruby">          params = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1128">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1129">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="590" data-linenumber="1130">
          <span class="hits">590</span>
          
          <code class="ruby">        if params</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="1131">
          <span class="hits">13</span>
          
          <code class="ruby">          return params[:enabled_features] || params[:enabled_feature]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1132">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1133">
          
          
          <code class="ruby">          return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1134">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1135">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1136">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1137">
          
          
          <code class="ruby">      # All other Reg methods are delegated to BitCollection</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1138">
          <span class="hits">2</span>
          
          <code class="ruby">      def method_missing(method, *args, &amp;block) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="318" data-linenumber="1139">
          <span class="hits">318</span>
          
          <code class="ruby">        if method.to_sym == :to_ary || method.to_sym == :to_hash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1140">
          
          
          <code class="ruby">          nil</code>
        </li>
      
        <li class="covered" data-hits="316" data-linenumber="1141">
          <span class="hits">316</span>
          
          <code class="ruby">        elsif meta_data_method?(method)</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="1142">
          <span class="hits">13</span>
          
          <code class="ruby">          extract_meta_data(method, *args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1143">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="303" data-linenumber="1144">
          <span class="hits">303</span>
          
          <code class="ruby">          if BitCollection.instance_methods.include?(method)</code>
        </li>
      
        <li class="covered" data-hits="285" data-linenumber="1145">
          <span class="hits">285</span>
          
          <code class="ruby">            BitCollection.new(self, name, @bits).send(method, *args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="1146">
          <span class="hits">18</span>
          
          <code class="ruby">          elsif has_bits?(method)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="1147">
          <span class="hits">18</span>
          
          <code class="ruby">            bits(method)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1148">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1149">
          
          
          <code class="ruby">            super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1150">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1151">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1152">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1153">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1154">
          
          
          <code class="ruby">      # Recognize that Reg responds to all BitCollection methods methods based on</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1155">
          
          
          <code class="ruby">      # application-specific meta data properties</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1156">
          <span class="hits">2</span>
          
          <code class="ruby">      def respond_to?(*args) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="1962" data-linenumber="1157">
          <span class="hits">1962</span>
          
          <code class="ruby">        sym = args.first.to_sym</code>
        </li>
      
        <li class="covered" data-hits="1962" data-linenumber="1158">
          <span class="hits">1962</span>
          
          <code class="ruby">        meta_data_method?(sym) || has_bits?(sym) || super(sym) || BitCollection.instance_methods.include?(sym)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1159">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1160">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1161">
          
          
          <code class="ruby">      # Copy overlays from one reg object to another</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1162">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1163">
          
          
          <code class="ruby">      #   reg(:data_copy).has_overlay?        # =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1164">
          
          
          <code class="ruby">      #   reg(:data).overlay(&quot;data_val&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1165">
          
          
          <code class="ruby">      #   reg(:data_copy).copy_overlays_from(reg(:data))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1166">
          
          
          <code class="ruby">      #   reg(:data_copy).has_overlay?        # =&gt; true</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1167">
          <span class="hits">2</span>
          
          <code class="ruby">      def copy_overlays_from(reg, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1168">
          
          
          <code class="ruby">        size.times do |i|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1169">
          
          
          <code class="ruby">          source_bit = reg.bit[i]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1170">
          
          
          <code class="ruby">          if source_bit.has_overlay?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1171">
          
          
          <code class="ruby">            ov = source_bit.overlay_str</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1172">
          
          
          <code class="ruby">            # If an id has been supplied make sure any trailing ID in the source is</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1173">
          
          
          <code class="ruby">            # changed to supplied identifier</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1174">
          
          
          <code class="ruby">            ov.gsub!(/_\d$/, &quot;_#{options[:update_id]}&quot;) if options[:update_id]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1175">
          
          
          <code class="ruby">            @bits[i].overlay(ov)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1176">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1177">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1178">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1179">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1180">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1181">
          
          
          <code class="ruby">      # Copies data from one reg object to another</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1182">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1183">
          
          
          <code class="ruby">      #   reg(:data_copy).data                # =&gt; 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1184">
          
          
          <code class="ruby">      #   reg(:data).write(0x1234)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1185">
          
          
          <code class="ruby">      #   reg(:data_copy).copy_data_from(reg(:data))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1186">
          
          
          <code class="ruby">      #   reg(:data_copy).data                # =&gt; 0x1234</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1187">
          <span class="hits">2</span>
          
          <code class="ruby">      def copy_data_from(reg)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1188">
          
          
          <code class="ruby">        size.times do |i|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1189">
          
          
          <code class="ruby">          @bits[i].write(reg.bit[i].data)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1190">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1191">
          
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1192">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1193">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1194">
          
          
          <code class="ruby">      # Copies data and overlays from one reg object to another, it does not copy</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1195">
          
          
          <code class="ruby">      # read or store flags</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1196">
          <span class="hits">2</span>
          
          <code class="ruby">      def copy(reg)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="1197">
          <span class="hits">3</span>
          
          <code class="ruby">        size.times do |i|</code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="1198">
          <span class="hits">48</span>
          
          <code class="ruby">          source_bit = reg.bit[i]</code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="1199">
          <span class="hits">48</span>
          
          <code class="ruby">          @bits[i].overlay(source_bit.overlay_str) if source_bit.has_overlay?</code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="1200">
          <span class="hits">48</span>
          
          <code class="ruby">          @bits[i].write(source_bit.data)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1201">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="1202">
          <span class="hits">3</span>
          
          <code class="ruby">        self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1203">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1204">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1205">
          
          
          <code class="ruby">      # Returns the BITWISE AND of reg with another reg or a number, the state of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1206">
          
          
          <code class="ruby">      # both registers remains unchanged</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1207">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1208">
          
          
          <code class="ruby">      #   reg(:data).write(0x5555)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1209">
          
          
          <code class="ruby">      #   reg(:data2).write(0xFFFF)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1210">
          
          
          <code class="ruby">      #   reg(:data) &amp; 0xFF00         # =&gt; 0x5500</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1211">
          
          
          <code class="ruby">      #   reg(:data) &amp; reg(:data2)    # =&gt; 0x5555</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1212">
          <span class="hits">2</span>
          
          <code class="ruby">      def &amp;(val)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1213">
          
          
          <code class="ruby">        data &amp; Reg.clean_value(val)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1214">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1215">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1216">
          
          
          <code class="ruby">      # Returns the BITWISE OR of reg with another reg or a number, the state of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1217">
          
          
          <code class="ruby">      # both registers remains unchanged</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1218">
          <span class="hits">2</span>
          
          <code class="ruby">      def |(val)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1219">
          
          
          <code class="ruby">        data | Reg.clean_value(val)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1220">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1221">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1222">
          
          
          <code class="ruby">      # Returns the SUM of reg with another reg or a number, the state of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1223">
          
          
          <code class="ruby">      # both registers remains unchanged</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1224">
          <span class="hits">2</span>
          
          <code class="ruby">      def +(val)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1225">
          
          
          <code class="ruby">        data + Reg.clean_value(val)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1226">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1227">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1228">
          
          
          <code class="ruby">      # Returns the SUBTRACTION of reg with another reg or a number, the state of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1229">
          
          
          <code class="ruby">      # both registers remains unchanged</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1230">
          <span class="hits">2</span>
          
          <code class="ruby">      def -(val)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1231">
          
          
          <code class="ruby">        data - Reg.clean_value(val)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1232">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1233">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1234">
          
          
          <code class="ruby">      # Returns the DIVISION of reg with another reg or a number, the state of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1235">
          
          
          <code class="ruby">      # both registers remains unchanged</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1236">
          <span class="hits">2</span>
          
          <code class="ruby">      def /(val)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1237">
          
          
          <code class="ruby">        data / Reg.clean_value(val)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1238">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1239">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1240">
          
          
          <code class="ruby">      # Returns the PRODUCT of reg with another reg or a number, the state of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1241">
          
          
          <code class="ruby">      # both registers remains unchanged</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1242">
          <span class="hits">2</span>
          
          <code class="ruby">      def *(val)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1243">
          
          
          <code class="ruby">        data * Reg.clean_value(val)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1244">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1245">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1246">
          
          
          <code class="ruby">      # Cleans an input value, in some cases it could be a register object, or an explicit value.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1247">
          
          
          <code class="ruby">      # This will return an explicit value in either case.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1248">
          <span class="hits">2</span>
          
          <code class="ruby">      def self.clean_value(value) # :nodoc:</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="1249">
          <span class="hits">11</span>
          
          <code class="ruby">        value = value.val if value.respond_to?(&#39;val&#39;)  # Pull out the data value if a reg object has been passed in</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="1250">
          <span class="hits">11</span>
          
          <code class="ruby">        value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1251">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1252">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1253">
          
          
          <code class="ruby">      # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1254">
          <span class="hits">2</span>
          
          <code class="ruby">      def meta_data_method?(method)</code>
        </li>
      
        <li class="covered" data-hits="2278" data-linenumber="1255">
          <span class="hits">2278</span>
          
          <code class="ruby">        attr_name = method.to_s.gsub(/\??=?/, &#39;&#39;).to_sym</code>
        </li>
      
        <li class="covered" data-hits="2278" data-linenumber="1256">
          <span class="hits">2278</span>
          
          <code class="ruby">        if default_reg_metadata.key?(attr_name)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="1257">
          <span class="hits">18</span>
          
          <code class="ruby">          if method.to_s =~ /\?/</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="1258">
          <span class="hits">4</span>
          
          <code class="ruby">            [true, false].include?(default_reg_metadata[attr_name])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1259">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="1260">
          <span class="hits">14</span>
          
          <code class="ruby">            true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1261">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1262">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="2260" data-linenumber="1263">
          <span class="hits">2260</span>
          
          <code class="ruby">          false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1264">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1265">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1266">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1267">
          <span class="hits">2</span>
          
          <code class="ruby">      def extract_meta_data(method, *args)</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="1268">
          <span class="hits">13</span>
          
          <code class="ruby">        method = method.to_s.sub(&#39;?&#39;, &#39;&#39;)</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="1269">
          <span class="hits">13</span>
          
          <code class="ruby">        if method =~ /=/</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1270">
          <span class="hits">1</span>
          
          <code class="ruby">          instance_variable_set(&quot;@#{method.sub(&#39;=&#39;, &#39;&#39;)}&quot;, args.first)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1271">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="1272">
          <span class="hits">12</span>
          
          <code class="ruby">          instance_variable_get(&quot;@#{method}&quot;) || meta[method.to_sym]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1273">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1274">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1275">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1276">
          
          
          <code class="ruby">      # Returns true if the register is constrained by the given/any feature</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1277">
          <span class="hits">2</span>
          
          <code class="ruby">      def enabled_by_feature?(name = nil)</code>
        </li>
      
        <li class="covered" data-hits="50" data-linenumber="1278">
          <span class="hits">50</span>
          
          <code class="ruby">        if !name</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="1279">
          <span class="hits">25</span>
          
          <code class="ruby">          !!feature</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1280">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="1281">
          <span class="hits">25</span>
          
          <code class="ruby">          if feature.class == Array</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1282">
          
          
          <code class="ruby">            feature.each do |f|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1283">
          
          
          <code class="ruby">              if f == name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1284">
          
          
          <code class="ruby">                return true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1285">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1286">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1287">
          
          
          <code class="ruby">            return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1288">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="1289">
          <span class="hits">25</span>
          
          <code class="ruby">            return feature == name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1290">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1291">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1292">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1293">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :has_feature_constraint?, :enabled_by_feature?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1294">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1295">
          
          
          <code class="ruby">      # Query the owner heirarchy to see if this register is enabled</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1296">
          <span class="hits">2</span>
          
          <code class="ruby">      def enabled?</code>
        </li>
      
        <li class="covered" data-hits="3359" data-linenumber="1297">
          <span class="hits">3359</span>
          
          <code class="ruby">        if feature</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="1298">
          <span class="hits">101</span>
          
          <code class="ruby">          value = false</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="1299">
          <span class="hits">101</span>
          
          <code class="ruby">          current_owner = self</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="1300">
          <span class="hits">101</span>
          
          <code class="ruby">          if feature.class == Array</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1301">
          
          
          <code class="ruby">            feature.each do |f|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1302">
          
          
          <code class="ruby">              current_owner = self</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1303">
          
          
          <code class="ruby">              loop do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1304">
          
          
          <code class="ruby">                if current_owner.respond_to?(:owner)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1305">
          
          
          <code class="ruby">                  current_owner = current_owner.owner</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1306">
          
          
          <code class="ruby">                  if current_owner.respond_to?(:has_feature?)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1307">
          
          
          <code class="ruby">                    if current_owner.has_feature?(f)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1308">
          
          
          <code class="ruby">                      value = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1309">
          
          
          <code class="ruby">                      break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1310">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1311">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1312">
          
          
          <code class="ruby">                else # if current owner does not have a owner</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1313">
          
          
          <code class="ruby">                  value = false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1314">
          
          
          <code class="ruby">                  break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1315">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1316">
          
          
          <code class="ruby">              end # loop end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1317">
          
          
          <code class="ruby">              unless value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1318">
          
          
          <code class="ruby">                if Origen.top_level &amp;&amp; \</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1319">
          
          
          <code class="ruby">                   Origen.top_level.respond_to?(:has_feature?) &amp;&amp; \</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1320">
          
          
          <code class="ruby">                   Origen.top_level.has_feature?(f)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1321">
          
          
          <code class="ruby">                  value = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1322">
          
          
          <code class="ruby">                  unless value</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1323">
          
          
          <code class="ruby">                    break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1324">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1325">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1326">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1327">
          
          
          <code class="ruby">              unless value</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1328">
          
          
          <code class="ruby">                break # break if feature not found and return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1329">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1330">
          
          
          <code class="ruby">            end # iterated through all features in array</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1331">
          
          
          <code class="ruby">            return value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1332">
          
          
          <code class="ruby">          else # if feature.class != Array</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="1333">
          <span class="hits">101</span>
          
          <code class="ruby">            loop do</code>
        </li>
      
        <li class="covered" data-hits="169" data-linenumber="1334">
          <span class="hits">169</span>
          
          <code class="ruby">              if current_owner.respond_to?(:owner)</code>
        </li>
      
        <li class="covered" data-hits="135" data-linenumber="1335">
          <span class="hits">135</span>
          
          <code class="ruby">                current_owner = current_owner.owner</code>
        </li>
      
        <li class="covered" data-hits="135" data-linenumber="1336">
          <span class="hits">135</span>
          
          <code class="ruby">                if current_owner.respond_to?(:has_feature?)</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="1337">
          <span class="hits">101</span>
          
          <code class="ruby">                  if current_owner.has_feature?(feature)</code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="1338">
          <span class="hits">67</span>
          
          <code class="ruby">                    value = true</code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="1339">
          <span class="hits">67</span>
          
          <code class="ruby">                    break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1340">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1341">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1342">
          
          
          <code class="ruby">              else # if current owner does not have a owner</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="1343">
          <span class="hits">34</span>
          
          <code class="ruby">                value = false</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="1344">
          <span class="hits">34</span>
          
          <code class="ruby">                break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1345">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1346">
          
          
          <code class="ruby">            end # loop end</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="1347">
          <span class="hits">101</span>
          
          <code class="ruby">            unless value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1348">
          
          
          <code class="ruby">              if Origen.top_level &amp;&amp; \</code>
        </li>
      
        <li class="covered" data-hits="34" data-linenumber="1349">
          <span class="hits">34</span>
          
          <code class="ruby">                 Origen.top_level.respond_to?(:has_feature?) &amp;&amp; \</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1350">
          
          
          <code class="ruby">                 Origen.top_level.has_feature?(feature)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1351">
          
          
          <code class="ruby">                value = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1352">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1353">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="1354">
          <span class="hits">101</span>
          
          <code class="ruby">            return value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1355">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1356">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="3258" data-linenumber="1357">
          <span class="hits">3258</span>
          
          <code class="ruby">          return true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1358">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1359">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1360">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1361">
          
          
          <code class="ruby">      # Returns true if any of the bits within this register has feature</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1362">
          
          
          <code class="ruby">      # associated with it.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1363">
          <span class="hits">2</span>
          
          <code class="ruby">      def has_bits_enabled_by_feature?(name = nil)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1364">
          
          
          <code class="ruby">        if !name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1365">
          
          
          <code class="ruby">          bits.any?(&amp;:has_feature_constraint?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1366">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1367">
          
          
          <code class="ruby">          bits.any? { |bit| bit.enabled_by_feature?(name) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1368">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1369">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1370">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1371">
          <span class="hits">2</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1372">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1373">
          <span class="hits">2</span>
          
          <code class="ruby">      def _state_desc(bits)</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="1374">
          <span class="hits">30</span>
          
          <code class="ruby">        state = []</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="1375">
          <span class="hits">30</span>
          
          <code class="ruby">        unless bits.readable? &amp;&amp; bits.writable?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1376">
          
          
          <code class="ruby">          if bits.readable?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1377">
          
          
          <code class="ruby">            state &lt;&lt; &#39;RO&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1378">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1379">
          
          
          <code class="ruby">            state &lt;&lt; &#39;WO&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1380">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1381">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="1382">
          <span class="hits">30</span>
          
          <code class="ruby">        state &lt;&lt; &#39;Rd&#39; if bits.is_to_be_read?</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="1383">
          <span class="hits">30</span>
          
          <code class="ruby">        state &lt;&lt; &#39;Str&#39; if bits.is_to_be_stored?</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="1384">
          <span class="hits">30</span>
          
          <code class="ruby">        state &lt;&lt; &#39;Ov&#39; if bits.has_overlay?</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="1385">
          <span class="hits">30</span>
          
          <code class="ruby">        if state.empty?</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="1386">
          <span class="hits">30</span>
          
          <code class="ruby">          &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1387">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1388">
          
          
          <code class="ruby">          &quot;(#{state.join(&#39;|&#39;)})&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1389">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1390">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1391">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1392">
          <span class="hits">2</span>
          
          <code class="ruby">      def _max_bit_in_range(bits, max, _min)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="1393">
          <span class="hits">18</span>
          
          <code class="ruby">        upper = bits.position + bits.size - 1</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="1394">
          <span class="hits">18</span>
          
          <code class="ruby">        [upper, max].min - bits.position</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1395">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1396">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1397">
          <span class="hits">2</span>
          
          <code class="ruby">      def _min_bit_in_range(bits, _max, min)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="1398">
          <span class="hits">18</span>
          
          <code class="ruby">        lower = bits.position</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="1399">
          <span class="hits">18</span>
          
          <code class="ruby">        [lower, min].max - bits.position</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1400">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1401">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1402">
          
          
          <code class="ruby">      # Returns true if some portion of the given bits falls</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1403">
          
          
          <code class="ruby">      # within the given range</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1404">
          <span class="hits">2</span>
          
          <code class="ruby">      def _bit_in_range?(bits, max, min)</code>
        </li>
      
        <li class="covered" data-hits="130" data-linenumber="1405">
          <span class="hits">130</span>
          
          <code class="ruby">        upper = bits.position + bits.size - 1</code>
        </li>
      
        <li class="covered" data-hits="130" data-linenumber="1406">
          <span class="hits">130</span>
          
          <code class="ruby">        lower = bits.position</code>
        </li>
      
        <li class="covered" data-hits="130" data-linenumber="1407">
          <span class="hits">130</span>
          
          <code class="ruby">        !((lower &gt; max) || (upper &lt; min))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1408">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1409">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1410">
          
          
          <code class="ruby">      # Returns the number of bits from the given bits that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1411">
          
          
          <code class="ruby">      # fall within the given range</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1412">
          <span class="hits">2</span>
          
          <code class="ruby">      def _num_bits_in_range(bits, max, min)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="1413">
          <span class="hits">18</span>
          
          <code class="ruby">        upper = bits.position + bits.size - 1</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="1414">
          <span class="hits">18</span>
          
          <code class="ruby">        lower = bits.position</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="1415">
          <span class="hits">18</span>
          
          <code class="ruby">        [upper, max].min - [lower, min].max + 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1416">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1417">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1418">
          
          
          <code class="ruby">      # Returns true if the given number is is the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1419">
          
          
          <code class="ruby">      # given range</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1420">
          <span class="hits">2</span>
          
          <code class="ruby">      def _index_in_range?(i, max, min)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1421">
          
          
          <code class="ruby">        !((i &gt; max) || (i &lt; min))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1422">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1423">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1424">
          <span class="hits">2</span>
          
          <code class="ruby">      def _bit_rw(bits)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1425">
          
          
          <code class="ruby">        if bits.readable? &amp;&amp; bits.writable?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1426">
          
          
          <code class="ruby">          &#39;RW&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1427">
          
          
          <code class="ruby">        elsif bits.readable?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1428">
          
          
          <code class="ruby">          &#39;RO&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1429">
          
          
          <code class="ruby">        elsif bits.writable?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1430">
          
          
          <code class="ruby">          &#39;WO&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1431">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1432">
          
          
          <code class="ruby">          &#39;X&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1433">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1434">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1435">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1436">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1437">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="637e921b4e0b273bd7da9382cd7181aa209d504c">
  <div class="header">
    <h3>lib/origen/registers/reg_collection.rb</h3>
    <h4><span class="yellow">90.0 %</span> covered</h4>
    <div>
      <b>10</b> relevant lines. 
      <span class="green"><b>9</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Registers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # This is a regular Ruby hash that is used to store collections of Reg objects, it has additional</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # methods added to allow interaction with the contained registers.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    # All Ruby hash methods are also available - http://www.ruby-doc.org/core/classes/Hash.html</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">    class RegCollection &lt; Hash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">      # Returns the object that owns the registers</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize(owner, _options = {})</code>
        </li>
      
        <li class="covered" data-hits="1424" data-linenumber="11">
          <span class="hits">1424</span>
          
          <code class="ruby">        @owner = owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">      def inspect</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="15">
          <span class="hits">3</span>
          
          <code class="ruby">        map { |k, _v| k }.inspect</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">      # Display all regs visually in a console session</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="19">
          <span class="hits">2</span>
          
          <code class="ruby">      def show</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="20">
          
          
          <code class="ruby">        puts map { |_k, v| v }.inspect</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="6712e3f1693f18385e895bc5814454dc06e243fa">
  <div class="header">
    <h3>lib/origen/revision_control.rb</h3>
    <h4><span class="red">69.23 %</span> covered</h4>
    <div>
      <b>13</b> relevant lines. 
      <span class="green"><b>9</b> lines covered</span> and
      <span class="red"><b>4</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module RevisionControl</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    require &#39;origen/revision_control/base&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :DesignSync, &#39;origen/revision_control/design_sync&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Git,        &#39;origen/revision_control/git&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Subversion, &#39;origen/revision_control/subversion&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">    IGNORE_DIRS =  %w(</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">      .ws .lsf log output web coverage .ref .yardoc .collection .bin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      .session .bundle .tpc pkg tmp lbin .git</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">    )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="13">
          <span class="hits">2</span>
          
          <code class="ruby">    IGNORE_FILES = %w(</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      target/.default release_note.txt *.swp *.swo *~ .bin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      list/referenced.list tags .ref .pdm/pi_attributes.txt</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      environment/.default</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">    )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">    # Creates a new revision controller object based on the supplied :local and :remote</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">    # options.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">    # The revision control system will be worked out from the supplied remote value. This method</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">    # should therefore be used whenever the remote is a variable that could refer to many different</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">    # systems.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">    #   # I know that the remote refers to DesignSync</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">    #   rc = Origen::RevisionControl::DesignSync.new remote: &quot;sync//....&quot;, local: &quot;my/path&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">    #   # The remote is a variable and I don&#39;t know the type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">    #   rc = Origen::RevisionControl.new remote: rc_url, local: &quot;my/path&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="33">
          <span class="hits">2</span>
          
          <code class="ruby">    def self.new(options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">      case</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">      when options[:remote] =~ /^sync/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="36">
          
          
          <code class="ruby">        DesignSync.new(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      when options[:remote] =~ /git/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="38">
          
          
          <code class="ruby">        Git.new(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="40">
          
          
          <code class="ruby">        fail &quot;Could not work out the revision control system for: #{options[:remote]}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="41">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="757d4a591660b487a84edf4d97e2604246495661">
  <div class="header">
    <h3>lib/origen/revision_control/base.rb</h3>
    <h4><span class="red">57.14 %</span> covered</h4>
    <div>
      <b>63</b> relevant lines. 
      <span class="green"><b>36</b> lines covered</span> and
      <span class="red"><b>27</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">require &#39;open3&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">  module RevisionControl</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # Base class of all revision control system drivers,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    # all drivers should support the API methods defined here.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    # Each instance of this class represents the concept of mapping a local directory to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    # a remote repository.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    # Origen.app.rc will return an instance of this class for the revision control system used</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">    # by the current application, the :local attribute will be automatically set to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    # Origen.root and the :remote attribute will be set per the revision control attributes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    # defined in config/application.rb.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">    class Base</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      # Returns a pointer to the remote location (a Pathname object)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :remote</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      # Returns a pointer to the local location (a Pathname object)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">      attr_reader :local</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      # rubocop:disable Lint/UnusedMethodArgument</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">      # All revision control instances represent a remote server mapping</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      # to a local directory, :remote and :local options are required</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="24">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize(options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="25">
          <span class="hits">2</span>
          
          <code class="ruby">        unless options[:remote] &amp;&amp; options[:local]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="26">
          
          
          <code class="ruby">          fail &#39;:remote and :local options must be supplied when instantiating a new RevisionControl object&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="28">
          <span class="hits">2</span>
          
          <code class="ruby">        @remote = Pathname.new(options[:remote])</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="29">
          <span class="hits">2</span>
          
          <code class="ruby">        @local = Pathname.new(options[:local]).expand_path</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="30">
          <span class="hits">2</span>
          
          <code class="ruby">        initialize_local_dir</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      # Build the local workspace for the first time.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">      # This is roughly equivalent to running the checkout command, but should be used in the case where</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      # the local workspace is being setup for the first time.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="37">
          <span class="hits">2</span>
          
          <code class="ruby">      def build(options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="38">
          
          
          <code class="ruby">        fail &quot;The #{self.class} driver does not support the build method!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">      # Checkout the given file or directory, it returns a path to the local file.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">      # The path argument is optional and when not supplied the entire directory will be checked out.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">      # @param [String, Pathname] path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">      #   The path to the remote item to checkout, this can be a pointer to a file or directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">      #   and it can either be a relative path or absolute path to either the local or remote locations.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">      #   Multiple values can be supplied and should be separated by a space.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      # @option options [Boolean] :force (false) Force overwrite of any existing local copy</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      # @option options [String] :version (nil) A specific version to checkout, will get latest if</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">      #   not supplied</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      # @option options [Boolean] :verbose (true) When true will show the command being executed and</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">      #   the raw output from the underlying revision control tool. When false will show nothing, but</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">      #   will still raise an error if the underlying command fails.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="56">
          <span class="hits">2</span>
          
          <code class="ruby">      def checkout(path = nil, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="57">
          
          
          <code class="ruby">        fail &quot;The #{self.class} driver does not support the checkout method!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">      # Checkin the given file or directory, it returns a path to the local file.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">      # The path argument is optional and when not supplied the entire directory will be checked in.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">      # @param [String, Pathname] path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">      #   The path to the remote item to checkout, this can be a pointer to a file or directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">      #   and it can either be a relative path or absolute path to either the local or remote locations.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">      #   Multiple values can be supplied and should be separated by a space.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">      # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">      # @option options [Boolean] :force (false) Force overwrite of any newer version of the file that may</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">      #   exist, i.e. force checkin the current version to become the latest.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">      # @option options [Boolean] :unmanaged (false) Include files matching the given path that are not currently</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">      #   managed by the revision control system.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">      # @option options [Boolean] :comment (nil) Optionally supply a checkin comment.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">      # @option options [Boolean] :verbose (true) When true will show the command being executed and</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">      #   the raw output from the underlying revision control tool. When false will show nothing, but</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">      #   will still raise an error if the underlying command fails.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="77">
          <span class="hits">2</span>
          
          <code class="ruby">      def checkin(path = nil, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="78">
          
          
          <code class="ruby">        fail &quot;The #{self.class} driver does not support the checkin method!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">      # Returns a hash containing the list of files that have changes compared to the given tag</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">      # or compared to the latest version (on the server).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">      #   {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">      #     :added =&gt; [],           # Paths to files that have been added since the previous tag</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">      #     :removed =&gt; [],         # Paths to files that have been removed since the previous tag</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">      #     :changed =&gt; [],         # Paths to files that have changed since the previous tag</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">      #     :present =&gt; true/false, # Convenience attribute for the caller to check if there are any changes, when</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">      #                             # true at least one of the other arrays will contain a value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">      #   }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">      # The dir argument is optional and when not supplied the entire directory will be checked for</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">      # changes.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">      # Note that added files only refers to those files which have been checked into revision control</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">      # since the compared to version, it does not refer to unmanaged files in the workspace.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">      # Use the unmanaged method to get a list of those.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">      # Note also that while a file is considered added or removed depends on the chronological</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">      # relationship between the current version (the user&#39;s workspace) and the reference version.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">      # If the reference version is older than the current version (i.e. an earlier tag), then an added</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">      # file means a file that the current version has and the reference (previous) version did not have.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">      # However if the reference version is newer than the current version (e.g. when comparing to a newer</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">      # tag or the latest version on the server), then an added file means a file that the current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">      # version does not have and which has been added in a newer version of the remote directory.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">      # @param [String, Pathname] dir</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">      #   The path to a sub-directory to check for changes, it can either be a relative path or an</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">      #   absolute path to either the local or remote locations.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">      # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">      # @option options [String] :version (nil) A specific version to compare against, will compare to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">      #   latest if not supplied</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">      # @option options [Boolean] :verbose (false) When true will show the command being executed and</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">      #   the raw output from the underlying revision control tool. When false will show nothing. False</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">      #   is the default as with this command the user is more concerned with seeing the organized</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">      #   summary that is returned from this method.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="118">
          <span class="hits">2</span>
          
          <code class="ruby">      def changes(dir = nil, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="119">
          
          
          <code class="ruby">        fail &quot;The #{self.class} driver does not support the changes method!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">      # Returns an array containing the files that have un-committed local changes.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">      # The dir argument is optional and when not supplied the entire directory will be checked for</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">      # changes.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">      # @param [String, Pathname] dir</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">      #   The path to a sub-directory to check for changes, it can either be a relative path or an</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">      #   absolute path to either the local or remote locations.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">      # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">      # @option options [Boolean] :verbose (false) When true will show the command being executed and</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">      #   the raw output from the underlying revision control tool. When false will show nothing. False</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">      #   is the default as with this command the user is more concerned with seeing the organized</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby">      #   summary that is returned from this method.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="135">
          <span class="hits">2</span>
          
          <code class="ruby">      def local_modifications(dir = nil, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="136">
          
          
          <code class="ruby">        fail &quot;The #{self.class} driver does not support the local_modifications method!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">      # Returns an array containing the list of files that are present in the given directory but</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">      # which are not managed by the revision control system.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">      # The dir argument is optional and when not supplied the entire directory will be checked for</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">      # unmanaged files.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">      # @param [String, Pathname] dir</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">      #   The path to a sub-directory to check for unmanaged files, it can either be a relative path or an</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">      #   absolute path to either the local or remote locations.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">      # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby">      # @option options [Boolean] :verbose (false) When true will show the command being executed and</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby">      #   the raw output from the underlying revision control tool. When false will show nothing. False</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">      #   is the default as with this command the user is more concerned with seeing the organized</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">      #   summary that is returned from this method.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="153">
          <span class="hits">2</span>
          
          <code class="ruby">      def unmanaged(dir = nil, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="154">
          
          
          <code class="ruby">        fail &quot;The #{self.class} driver does not support the unmanaged method!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby">      # Returns the command the user must run to execute a diff of the current version of the given file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">      # against the given version of it.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">      # @param [String, Pathname] file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="161">
          
          
          <code class="ruby">      #   The local path to the file to be compared.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby">      # @param [String] version</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">      #   The version of the file to compare to.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="164">
          <span class="hits">2</span>
          
          <code class="ruby">      def diff_cmd(file, version)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="165">
          
          
          <code class="ruby">        fail &quot;The #{self.class} driver does not support the diff_cmd method!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">      # Returns what is considered to be the top-level root directory by the revision control system.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">      # In the case of an application&#39;s revision controller (returned by Origen.app.rc) this method will often</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">      # return the same directory as Origen.root. However in some cases an application owner may choose to store</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby">      # their application in a sub directory of a larger project entity that is revision controlled. In that</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">      # case Origen.root will return the sub directory and this method will return the top-level directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby">      # of the wider project.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="175">
          <span class="hits">2</span>
          
          <code class="ruby">      def root</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="176">
          
          
          <code class="ruby">        fail &quot;The #{self.class} driver does not support the root method!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">      # Returns the name of the current branch in the local workspace</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="180">
          <span class="hits">2</span>
          
          <code class="ruby">      def current_branch</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="181">
          
          
          <code class="ruby">        fail &quot;The #{self.class} driver does not support the current_branch method!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby">      # Returns true if the revision controller object uses Design Sync</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="185">
          <span class="hits">2</span>
          
          <code class="ruby">      def dssc?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="186">
          
          
          <code class="ruby">        is_a?(DesignSync)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="188">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :design_sync?, :dssc?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby">      # Returns true if the revision controller object uses Git</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="191">
          <span class="hits">2</span>
          
          <code class="ruby">      def git?</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="192">
          <span class="hits">94</span>
          
          <code class="ruby">        is_a?(Git) # :-)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">      # Returns true if the revision controller object uses Subversion</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="196">
          <span class="hits">2</span>
          
          <code class="ruby">      def svn?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="197">
          
          
          <code class="ruby">        is_a?(Subversion) # :-)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="199">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :subversion?, :svn?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby">      # rubocop:enable Lint/UnusedMethodArgument</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="203">
          <span class="hits">2</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="205">
          <span class="hits">2</span>
          
          <code class="ruby">      def clean_path(path = nil, options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="206">
          <span class="hits">2</span>
          
          <code class="ruby">        path, options = nil, path if path.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="207">
          <span class="hits">2</span>
          
          <code class="ruby">        if path</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="208">
          
          
          <code class="ruby">          paths = to_local(path)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="210">
          <span class="hits">2</span>
          
          <code class="ruby">          paths = [local.to_s]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="212">
          <span class="hits">2</span>
          
          <code class="ruby">        [paths, options]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="215">
          
          
          <code class="ruby">      # Converts a given path string to files/directories to an array of absolute paths to the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="216">
          
          
          <code class="ruby">      # resources within the local directory.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">      # The input can either contain a path to the local directory, or the remote.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">      #   to_local(&quot;config/application.rb sync://sync-15088:15088/Projects/common_tester_blocks/origen/lib&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby">      #     # =&gt; [&quot;/home/r49409/origen/config/application.rb&quot;, &quot;/home/r49409/origen/lib&quot;]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="222">
          <span class="hits">2</span>
          
          <code class="ruby">      def to_local(path)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="223">
          
          
          <code class="ruby">        local_abs_paths = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="224">
          
          
          <code class="ruby">        path.to_s.split(/\s+/).each do |p|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="225">
          
          
          <code class="ruby">          if p =~ /^#{remote}/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="226">
          
          
          <code class="ruby">            p.sub!(/^#{remote}/, &#39;&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="227">
          
          
          <code class="ruby">            p.slice!(0) if p =~ /^\//</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="228">
          
          
          <code class="ruby">            p = &quot;#{local}/#{p}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="230">
          
          
          <code class="ruby">            if Pathname.new(p).absolute?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="231">
          
          
          <code class="ruby">              # No action required</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="232">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="233">
          
          
          <code class="ruby">              p = &quot;#{local}/#{p}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="236">
          
          
          <code class="ruby">          local_abs_paths &lt;&lt; p</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="238">
          
          
          <code class="ruby">        local_abs_paths</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="239">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="240">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">      # If the supplied tag looks like a semantic version number, then make sure it has the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby">      # &#39;v&#39; prefix</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="243">
          <span class="hits">2</span>
          
          <code class="ruby">      def prefix_tag(tag)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="244">
          
          
          <code class="ruby">        tag = Origen::VersionString.new(tag)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="245">
          
          
          <code class="ruby">        if tag.semantic?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="246">
          
          
          <code class="ruby">          tag.prefixed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="248">
          
          
          <code class="ruby">          tag</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="251">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="252">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize_local_dir</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="253">
          <span class="hits">2</span>
          
          <code class="ruby">        FileUtils.mkdir_p(local.to_s) unless local.exist?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="254">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="255">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="257">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="9a306651418c62aec868bdac8be614934e5e868c">
  <div class="header">
    <h3>lib/origen/revision_control/git.rb</h3>
    <h4><span class="red">36.45 %</span> covered</h4>
    <div>
      <b>203</b> relevant lines. 
      <span class="green"><b>74</b> lines covered</span> and
      <span class="red"><b>129</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module RevisionControl</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    class Git &lt; Base</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">      # Returns the origin for the PWD</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">      def self.origin</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">        git(&#39;remote --verbose&#39;, verbose: false).each do |remote|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">          if remote =~ /^origin\s+([^\s]+)/</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">            return Regexp.last_match(1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">        nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">      def build(options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="15">
          
          
          <code class="ruby">        if Dir[&quot;#{local}/*&quot;].empty? || options[:force]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="16">
          
          
          <code class="ruby">          FileUtils.rm_rf(local.to_s)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">          # Not using the regular &#39;git&#39; method here since the local dir doesn&#39;t exist to CD into</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="18">
          
          
          <code class="ruby">          system &quot;git clone #{remote} #{local}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="20">
          
          
          <code class="ruby">          fail &quot;The requested workspace is not empty: #{local}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="24">
          <span class="hits">2</span>
          
          <code class="ruby">      def checkout(path = nil, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="25">
          
          
          <code class="ruby">        paths, options = clean_path(path, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">        # Pulls latest metadata from server, does not change workspace</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="27">
          
          
          <code class="ruby">        git &#39;fetch&#39;, options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="29">
          
          
          <code class="ruby">        version = options[:version] || current_branch</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="31">
          
          
          <code class="ruby">        if version == &#39;HEAD&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="32">
          
          
          <code class="ruby">          puts &quot;Sorry, but you are not currently on a branch and I don&#39;t know which branch you want to checkout&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="33">
          
          
          <code class="ruby">          puts &#39;Please supply a branch name as the version to checkout the latest version of it, e.g. origen rc co -v develop&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="34">
          
          
          <code class="ruby">          exit 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">        if options[:force]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="38">
          
          
          <code class="ruby">          version = &quot;origin/#{version}&quot; if remote_branch?(version)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="39">
          
          
          <code class="ruby">          if paths == [local.to_s]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="40">
          
          
          <code class="ruby">            git &quot;reset --hard #{version}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="42">
          
          
          <code class="ruby">            git &#39;reset HEAD&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="43">
          
          
          <code class="ruby">            git &#39;pull&#39;, options</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="44">
          
          
          <code class="ruby">            git &quot;checkout #{version} #{paths.join(&#39; &#39;)}&quot;, options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="47">
          
          
          <code class="ruby">          if paths.size &gt; 1 || paths.first != local.to_s</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="48">
          
          
          <code class="ruby">            fail &#39;The Git driver does not support partial merge checkout, it has to be the whole workspace&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="50">
          
          
          <code class="ruby">          git &#39;reset HEAD&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="51">
          
          
          <code class="ruby">          res = git &#39;stash&#39;, options</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="52">
          
          
          <code class="ruby">          stashed = !res.any? { |l| l =~ /^No local changes to save/ }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="53">
          
          
          <code class="ruby">          git &#39;pull&#39;, options</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="54">
          
          
          <code class="ruby">          git &quot;checkout #{version}&quot;, options</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="55">
          
          
          <code class="ruby">          if stashed</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="56">
          
          
          <code class="ruby">            result = git &#39;stash pop&#39;, { check_errors: false }.merge(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="57">
          
          
          <code class="ruby">            conflicts = []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="58">
          
          
          <code class="ruby">            result.each do |line|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="59">
          
          
          <code class="ruby">              if line =~ /CONFLICT.* (.*)$/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="60">
          
          
          <code class="ruby">                conflicts &lt;&lt; Regexp.last_match(1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="63">
          
          
          <code class="ruby">            git &#39;reset HEAD&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="64">
          
          
          <code class="ruby">            unless conflicts.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="65">
          
          
          <code class="ruby">              Origen.log.info &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="66">
          
          
          <code class="ruby">              Origen.log.error &#39;Your local changes could not automatically merged into the following files, open them to fix the conflicts:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="67">
          
          
          <code class="ruby">              conflicts.each do |conflict|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="68">
          
          
          <code class="ruby">                Origen.log.error &quot;  #{conflict}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="73">
          
          
          <code class="ruby">        paths</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="76">
          <span class="hits">2</span>
          
          <code class="ruby">      def checkin(path = nil, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="77">
          
          
          <code class="ruby">        paths, options = clean_path(path, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">        # Can&#39;t check in unless we have the latest</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="79">
          
          
          <code class="ruby">        if options[:force] &amp;&amp; !options[:initial]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">          # Locally check in the given files</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="81">
          
          
          <code class="ruby">          checkin(paths.join(&#39; &#39;), no_push: true, verbose: false, comment: options[:comment])</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="82">
          
          
          <code class="ruby">          local_rev = current_commit(short: false)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">          # Pull latest</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="84">
          
          
          <code class="ruby">          checkout</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">          # Restore the given files to our previous version</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">          # Errors are ignored here since this can fail if the given file didn&#39;t exist until now,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">          # in that case we already implicitly have the previous version</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="88">
          
          
          <code class="ruby">          git(&quot;checkout #{local_rev} -- #{paths.join(&#39; &#39;)}&quot;, check_errors: false)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">          # Then proceed with checking them in as latest</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="91">
          
          
          <code class="ruby">          checkout unless options[:initial]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="93">
          
          
          <code class="ruby">        cmd = &#39;add&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="94">
          
          
          <code class="ruby">        if options[:unmanaged]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="95">
          
          
          <code class="ruby">          cmd += &#39; -A&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="97">
          
          
          <code class="ruby">          cmd += &#39; -u&#39; unless options[:unmanaged]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="99">
          
          
          <code class="ruby">        cmd += &quot; #{paths.join(&#39; &#39;)}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="100">
          
          
          <code class="ruby">        git cmd, options</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="101">
          
          
          <code class="ruby">        if changes_pending_commit?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="102">
          
          
          <code class="ruby">          cmd = &#39;commit&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="103">
          
          
          <code class="ruby">          if options[:comment] &amp;&amp; !options[:comment].strip.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="104">
          
          
          <code class="ruby">            cmd += &quot; -m \&quot;#{options[:comment].strip}\&quot;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="106">
          
          
          <code class="ruby">            cmd += &quot; -m \&quot;No comment!\&quot;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="108">
          
          
          <code class="ruby">          if options[:author]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="109">
          
          
          <code class="ruby">            if options[:author].respond_to?(:name_and_email)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="110">
          
          
          <code class="ruby">              author =  options[:author].name_and_email</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="112">
          
          
          <code class="ruby">              author = &quot;#{options[:author]} &lt;&gt;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="114">
          
          
          <code class="ruby">            cmd += &quot; --author=\&quot;#{author}\&quot;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="116">
          
          
          <code class="ruby">          if options[:time]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="117">
          
          
          <code class="ruby">            cmd += &quot; --date=\&quot;#{options[:time].strftime(&#39;%a %b %e %H:%M:%S %Y %z&#39;)}\&quot;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="119">
          
          
          <code class="ruby">          git cmd, options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="121">
          
          
          <code class="ruby">        unless options[:no_push]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="122">
          
          
          <code class="ruby">          cmd = &quot;push origin #{current_branch}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="123">
          
          
          <code class="ruby">          cmd += &#39; -u&#39; if options[:initial]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="124">
          
          
          <code class="ruby">          git cmd</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="126">
          
          
          <code class="ruby">        paths</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">      # Returns true if the current user can checkin to the given repo (means has permission</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">      # to push in Git terms)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="131">
          <span class="hits">2</span>
          
          <code class="ruby">      def can_checkin?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="132">
          
          
          <code class="ruby">        git(&#39;push --dry-run&#39;, verbose: false)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="133">
          
          
          <code class="ruby">        true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby">      rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="135">
          
          
          <code class="ruby">        false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="138">
          <span class="hits">2</span>
          
          <code class="ruby">      def changes(dir = nil, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="139">
          
          
          <code class="ruby">        paths, options = clean_path(dir, options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="140">
          
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">          verbose: false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">        # Pulls latest metadata from server, does not change workspace</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="144">
          
          
          <code class="ruby">        git &#39;fetch&#39;, options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="146">
          
          
          <code class="ruby">        version = options[:version] || &#39;HEAD&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="147">
          
          
          <code class="ruby">        objects = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="149">
          
          
          <code class="ruby">        objects[:added]   = git(&quot;diff --name-only --diff-filter=A #{version} #{paths.first}&quot;, options).map(&amp;:strip)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="150">
          
          
          <code class="ruby">        objects[:removed] = git(&quot;diff --name-only --diff-filter=D #{version} #{paths.first}&quot;, options).map(&amp;:strip)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="151">
          
          
          <code class="ruby">        objects[:changed] = git(&quot;diff --name-only --diff-filter=M #{version} #{paths.first}&quot;, options).map(&amp;:strip)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="153">
          
          
          <code class="ruby">        objects[:present] = !objects[:added].empty? || !objects[:removed].empty? || !objects[:changed].empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">        # Return full paths</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="155">
          
          
          <code class="ruby">        objects[:added].map! { |i| &quot;#{paths.first}/&quot; + i }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="156">
          
          
          <code class="ruby">        objects[:removed].map! { |i| &quot;#{paths.first}/&quot; + i }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="157">
          
          
          <code class="ruby">        objects[:changed].map! { |i| &quot;#{paths.first}/&quot; + i }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="158">
          
          
          <code class="ruby">        objects</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="161">
          <span class="hits">2</span>
          
          <code class="ruby">      def local_modifications(dir = nil, options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="162">
          <span class="hits">2</span>
          
          <code class="ruby">        paths, options = clean_path(dir, options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="163">
          <span class="hits">2</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby">          verbose: false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="167">
          <span class="hits">2</span>
          
          <code class="ruby">        cmd = &#39;diff --name-only&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="168">
          <span class="hits">2</span>
          
          <code class="ruby">        dir = &quot; #{paths.first}&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="169">
          <span class="hits">2</span>
          
          <code class="ruby">        unstaged = git(cmd + dir, options).map(&amp;:strip)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="170">
          <span class="hits">2</span>
          
          <code class="ruby">        staged = git(cmd + &#39; --cached&#39; + dir, options).map(&amp;:strip)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="171">
          <span class="hits">2</span>
          
          <code class="ruby">        unstaged + staged</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="174">
          <span class="hits">2</span>
          
          <code class="ruby">      def unmanaged(dir = nil, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="175">
          
          
          <code class="ruby">        paths, options = clean_path(dir, options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="176">
          
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby">          verbose: false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="179">
          
          
          <code class="ruby">        cmd = &quot;ls-files #{paths.first} --exclude-standard --others&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="180">
          
          
          <code class="ruby">        git(cmd, options).map(&amp;:strip)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="183">
          <span class="hits">2</span>
          
          <code class="ruby">      def diff_cmd(file, version = nil)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="184">
          
          
          <code class="ruby">        if version</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="185">
          
          
          <code class="ruby">          &quot;git difftool --tool tkdiff -y #{prefix_tag(version)} #{file}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="187">
          
          
          <code class="ruby">          &quot;git difftool --tool tkdiff -y #{file}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="191">
          <span class="hits">2</span>
          
          <code class="ruby">      def tag(id, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="192">
          
          
          <code class="ruby">        id = VersionString.new(id)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="193">
          
          
          <code class="ruby">        id = id.prefixed if id.semantic?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="194">
          
          
          <code class="ruby">        if options[:comment]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="195">
          
          
          <code class="ruby">          git &quot;tag -a #{id} -m \&quot;#{options[:comment]}\&quot;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="197">
          
          
          <code class="ruby">          git &quot;tag #{id}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="199">
          
          
          <code class="ruby">        git &quot;push origin #{id}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="202">
          <span class="hits">2</span>
          
          <code class="ruby">      def root</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="203">
          
          
          <code class="ruby">        Pathname.new(git(&#39;rev-parse --show-toplevel&#39;, verbose: false).first.strip)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="206">
          <span class="hits">2</span>
          
          <code class="ruby">      def current_branch</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="207">
          <span class="hits">2</span>
          
          <code class="ruby">        git(&#39;rev-parse --abbrev-ref HEAD&#39;, verbose: false).first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="208">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="210">
          <span class="hits">2</span>
          
          <code class="ruby">      def current_commit(options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="211">
          <span class="hits">2</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">          short: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="214">
          <span class="hits">2</span>
          
          <code class="ruby">        commit = git(&#39;rev-parse HEAD&#39;, verbose: false).first</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="215">
          <span class="hits">2</span>
          
          <code class="ruby">        if options[:short]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="216">
          <span class="hits">2</span>
          
          <code class="ruby">          commit[0, 11]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="218">
          
          
          <code class="ruby">          commit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">      # Returns true if the given tag already exists</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="223">
          <span class="hits">2</span>
          
          <code class="ruby">      def tag_exists?(tag)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="224">
          
          
          <code class="ruby">        git(&#39;fetch&#39;, verbose: false) unless @all_tags_fetched</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="225">
          
          
          <code class="ruby">        @all_tags_fetched = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="226">
          
          
          <code class="ruby">        git(&#39;tag&#39;, verbose: false).include?(tag.to_s)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby">      # Returns true if the given string matches a branch name in the remote repo</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby">      #   Origen.app.rc.remote_branch?(&quot;master&quot;)                 # =&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="231">
          
          
          <code class="ruby">      #   Origen.app.rc.remote_branch?(&quot;feature/exists&quot;)         # =&gt; true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="232">
          
          
          <code class="ruby">      #   Origen.app.rc.remote_branch?(&quot;feature/does_not_exist&quot;) # =&gt; false</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="233">
          <span class="hits">2</span>
          
          <code class="ruby">      def remote_branch?(str)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">        # Github doesn&#39;t like the ssh:// for this command, whereas Stash seems</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby">        # to require it.</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="236">
          
          
          <code class="ruby">        if github?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="237">
          
          
          <code class="ruby">          rem = remote_without_protocol</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="239">
          
          
          <code class="ruby">          rem = remote</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="240">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">        # check if matches 40 digit hex string followed by branch name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="242">
          
          
          <code class="ruby">        git(&quot;ls-remote --heads #{remote} #{str}&quot;, verbose: false).any? do |line|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="243">
          
          
          <code class="ruby">          line =~ /^[0-9a-f]{40}\s+[a-zA-Z]/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="247">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialized?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="248">
          
          
          <code class="ruby">        File.exist?(&quot;#{local}/.git&quot;) &amp;&amp;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="249">
          <span class="hits">4</span>
          
          <code class="ruby">          git(&#39;remote -v&#39;, verbose: false).any? { |r| r =~ /#{remote_without_protocol_and_user}/ || r =~ /#{remote_without_protocol_and_user.to_s.gsub(&#39;:&#39;, &quot;\/&quot;)}/ } &amp;&amp;</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="250">
          <span class="hits">6</span>
          
          <code class="ruby">          !git(&#39;status&#39;, verbose: false).any? { |l| l =~ /^#? ?Initial commit$/ }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="251">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby">      # Delete everything in the given directory, or the whole repo</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="254">
          <span class="hits">2</span>
          
          <code class="ruby">      def delete_all(dir = nil, options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="255">
          
          
          <code class="ruby">        paths, options = clean_path(dir, options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="256">
          
          
          <code class="ruby">        files = git(&quot;ls-files #{paths.first}&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="257">
          
          
          <code class="ruby">        FileUtils.rm_f files</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby">      # A class method is provided to fetch the user name since it is useful to have access</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby">      # to this when outside of an application workspace, e.g. when creating a new app</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="262">
          <span class="hits">2</span>
          
          <code class="ruby">      def self.user_name</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="263">
          <span class="hits">47</span>
          
          <code class="ruby">        git(&#39;config user.name&#39;, verbose: false).first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">      rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="265">
          
          
          <code class="ruby">        nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="266">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="268">
          
          
          <code class="ruby">      # A class method is provided to fetch the user email since it is useful to have access</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="269">
          
          
          <code class="ruby">      # to this when outside of an application workspace, e.g. when creating a new app</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="270">
          <span class="hits">2</span>
          
          <code class="ruby">      def self.user_email</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="271">
          
          
          <code class="ruby">        git(&#39;config user.email&#39;, verbose: false).first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby">      rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="273">
          
          
          <code class="ruby">        nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="274">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="276">
          <span class="hits">2</span>
          
          <code class="ruby">      def user_name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="277">
          
          
          <code class="ruby">        self.class.user_name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="279">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="280">
          <span class="hits">2</span>
          
          <code class="ruby">      def user_email</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="281">
          
          
          <code class="ruby">        self.class.user_email</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="283">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="284">
          
          
          <code class="ruby">      # Returns true if the remote points to a github url</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="285">
          <span class="hits">2</span>
          
          <code class="ruby">      def github?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="286">
          
          
          <code class="ruby">        !!(remote.to_s =~ /github.com/)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="287">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="289">
          <span class="hits">2</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="291">
          <span class="hits">2</span>
          
          <code class="ruby">      def remote_without_protocol</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="292">
          <span class="hits">2</span>
          
          <code class="ruby">        Pathname.new(remote.sub(/^.*:\/\//, &#39;&#39;))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="293">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="294">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="295">
          <span class="hits">2</span>
          
          <code class="ruby">      def remote_without_protocol_and_user</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="296">
          <span class="hits">2</span>
          
          <code class="ruby">        Pathname.new(remote_without_protocol.to_s.sub(/^.*@/, &#39;&#39;))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="297">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="299">
          <span class="hits">2</span>
          
          <code class="ruby">      def create_gitignore</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="300">
          
          
          <code class="ruby">        c = Origen::Generator::Compiler.new</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="301">
          
          
          <code class="ruby">        c.compile &quot;#{Origen.top}/templates/git/gitignore.erb&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">                  output_directory:  local,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="303">
          
          
          <code class="ruby">                  quiet:             true,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby">                  check_for_changes: false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="305">
          
          
          <code class="ruby">        FileUtils.mv &quot;#{local}/gitignore&quot;, &quot;#{local}/.gitignore&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="306">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="308">
          <span class="hits">2</span>
          
          <code class="ruby">      def changes_pending_commit?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="309">
          
          
          <code class="ruby">        !(git(&#39;status --verbose&#39;, verbose: false).last =~ /^(no changes|nothing to commit|nothing added to commit but untracked files present)/)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="311">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="312">
          <span class="hits">2</span>
          
          <code class="ruby">      def initialize_local_dir</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="313">
          <span class="hits">2</span>
          
          <code class="ruby">        super</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="314">
          <span class="hits">2</span>
          
          <code class="ruby">        unless initialized?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="315">
          
          
          <code class="ruby">          Origen.log.debug &quot;Initializing Git workspace at #{local}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="316">
          
          
          <code class="ruby">          git &#39;init&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="317">
          
          
          <code class="ruby">          git &#39;remote remove origin&#39;, verbose: false, check_errors: false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="318">
          
          
          <code class="ruby">          git &quot;remote add origin #{remote}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="320">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="321">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="322">
          <span class="hits">2</span>
          
          <code class="ruby">      def git(command, options = {})</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="323">
          <span class="hits">12</span>
          
          <code class="ruby">        options[:local] = local</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="324">
          <span class="hits">12</span>
          
          <code class="ruby">        self.class.git(command, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="325">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="326">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="327">
          
          
          <code class="ruby">      # Execute a git operation, the resultant output is returned in an array</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="328">
          <span class="hits">2</span>
          
          <code class="ruby">      def self.git(command, options = {})</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="329">
          <span class="hits">61</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="330">
          
          
          <code class="ruby">          check_errors: true,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="331">
          
          
          <code class="ruby">          verbose:      true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="332">
          
          
          <code class="ruby">        }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="333">
          <span class="hits">61</span>
          
          <code class="ruby">        output = []</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="334">
          <span class="hits">61</span>
          
          <code class="ruby">        if options[:verbose]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="335">
          
          
          <code class="ruby">          Origen.log.info &quot;git #{command}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="336">
          
          
          <code class="ruby">          Origen.log.info &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="337">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="338">
          <span class="hits">61</span>
          
          <code class="ruby">        chdir options[:local] do</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="339">
          <span class="hits">61</span>
          
          <code class="ruby">          Open3.popen2e(&quot;git #{command}&quot;) do |_stdin, stdout_err, wait_thr|</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="340">
          <span class="hits">61</span>
          
          <code class="ruby">            while line = stdout_err.gets</code>
        </li>
      
        <li class="covered" data-hits="65" data-linenumber="341">
          <span class="hits">65</span>
          
          <code class="ruby">              Origen.log.info line.strip if options[:verbose]</code>
        </li>
      
        <li class="covered" data-hits="65" data-linenumber="342">
          <span class="hits">65</span>
          
          <code class="ruby">              unless line.strip.empty?</code>
        </li>
      
        <li class="covered" data-hits="65" data-linenumber="343">
          <span class="hits">65</span>
          
          <code class="ruby">                output &lt;&lt; line.strip</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="344">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="345">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="346">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="347">
          <span class="hits">61</span>
          
          <code class="ruby">            exit_status = wait_thr.value</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="348">
          <span class="hits">61</span>
          
          <code class="ruby">            unless exit_status.success?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="349">
          
          
          <code class="ruby">              if options[:check_errors]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="350">
          
          
          <code class="ruby">                fail GitError, &quot;This command failed: &#39;git #{command}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="351">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="352">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="353">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="354">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="355">
          <span class="hits">61</span>
          
          <code class="ruby">        output</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="356">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="357">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="358">
          <span class="hits">2</span>
          
          <code class="ruby">      def self.chdir(dir)</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="359">
          <span class="hits">61</span>
          
          <code class="ruby">        if dir</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="360">
          <span class="hits">12</span>
          
          <code class="ruby">          Dir.chdir dir do</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="361">
          <span class="hits">12</span>
          
          <code class="ruby">            yield</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="362">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="363">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="49" data-linenumber="364">
          <span class="hits">49</span>
          
          <code class="ruby">          yield</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="365">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="366">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="367">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="368">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="369">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="c24f41348606feab2212761a36c28a7bb4db774b">
  <div class="header">
    <h3>lib/origen/specs.rb</h3>
    <h4><span class="green">96.76 %</span> covered</h4>
    <div>
      <b>370</b> relevant lines. 
      <span class="green"><b>358</b> lines covered</span> and
      <span class="red"><b>12</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Specs</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Spec, &#39;origen/specs/spec&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Note, &#39;origen/specs/note&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Exhibit, &#39;origen/specs/exhibit&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Doc_Resource, &#39;origen/specs/doc_resource.rb&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Override, &#39;origen/specs/override.rb&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Power_Supply, &#39;origen/specs/power_supply.rb&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Mode_Select, &#39;origen/specs/mode_select.rb&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Version_History, &#39;origen/specs/version_history.rb&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Creation_Info, &#39;origen/specs/creation_info.rb&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="12">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Spec_Features, &#39;origen/specs/spec_features.rb&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="13">
          <span class="hits">2</span>
          
          <code class="ruby">    autoload :Documentation, &#39;origen/specs/documentation.rb&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">    require &#39;origen/specs/checkers&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">    include Checkers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">    attr_accessor :_specs, :_notes, :_exhibits, :_doc_resources, :_overrides, :_power_supplies, :_mode_selects, :_version_history, :_creation_info, :_spec_features, :_documentation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">    # Detailed description for the ip block</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="20">
          <span class="hits">2</span>
          
          <code class="ruby">    attr_accessor :description</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">    # Added :impedance and :power to the spec types</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="23">
          <span class="hits">2</span>
          
          <code class="ruby">    SPEC_TYPES = [:dc, :ac, :temperature, :supply, :impedance, :power]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="25">
          <span class="hits">2</span>
          
          <code class="ruby">    NOTE_TYPES = [:spec, :doc, :mode, :feature, :sighting]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="27">
          <span class="hits">2</span>
          
          <code class="ruby">    FEATURE_TYPES = [:intro, :feature, :subfeature]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="29">
          <span class="hits">2</span>
          
          <code class="ruby">    SpecTableAttr = Struct.new(:table_text, :show, :padding)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">    # A regular Array but print specs to the console via their ID for brevity and</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">    # consistency with other APIs (e.g. $dut.regs  # =&gt; [:reg1, :reg2])</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="33">
          <span class="hits">2</span>
          
          <code class="ruby">    class SpecArray &lt; Array</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="34">
          <span class="hits">2</span>
          
          <code class="ruby">      def inspect</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="35">
          <span class="hits">24</span>
          
          <code class="ruby">        map(&amp;:name).inspect</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">    # Returns a hash of hash containing all specs/modes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">    # If no spec is specified then all specs are returned via inspect</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">    # If a spec is specified, a spec object will be returned if found</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">    # in the current mode.  If a mode option is passed and no spec</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">    # is passed it will filter the specs inspect display by the mode</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">    # and visa-versa</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="45">
          <span class="hits">2</span>
          
          <code class="ruby">    def specs(s = nil, options = {})</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="46">
          <span class="hits">38</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">        type:          nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">        sub_type:      nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">        mode:          current_mode.nil? ? nil : current_mode.name,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">        spec:          nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">        symbol:        false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">        creating_spec: false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      }.update(options || {})</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="54">
          <span class="hits">38</span>
          
          <code class="ruby">      _specs</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="55">
          <span class="hits">38</span>
          
          <code class="ruby">      if s.nil?</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="56">
          <span class="hits">3</span>
          
          <code class="ruby">        return show_specs(options)</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="57">
          <span class="hits">35</span>
          
          <code class="ruby">      elsif s.is_a? Hash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">        # no spec was passed but some option was passed</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="59">
          
          
          <code class="ruby">        options.update(s)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="60">
          
          
          <code class="ruby">        return show_specs(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">        # a spec was passed</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="63">
          <span class="hits">35</span>
          
          <code class="ruby">        options[:spec] = s</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="64">
          <span class="hits">35</span>
          
          <code class="ruby">        return show_specs(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">    # Define and instantiate a Spec object</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="69">
          <span class="hits">2</span>
          
          <code class="ruby">    def spec(name, type = nil, mode = nil, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="70">
          <span class="hits">11</span>
          
          <code class="ruby">      return specs(name, type) unless block_given?</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="71">
          <span class="hits">11</span>
          
          <code class="ruby">      fail &#39;A type argument is required when defining a spec!&#39; unless type</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="72">
          <span class="hits">11</span>
          
          <code class="ruby">      _specs</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="73">
          <span class="hits">11</span>
          
          <code class="ruby">      name = name_audit(name)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="74">
          <span class="hits">11</span>
          
          <code class="ruby">      fail &#39;Specification names must be of SPEC_TYPES Symbol or String and cannot start with a number&#39; if name.nil?</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="75">
          <span class="hits">11</span>
          
          <code class="ruby">      fail &quot;Spec type must be one of #{SPEC_TYPES.join(&#39;, &#39;)}&quot; unless SPEC_TYPES.include? type</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="76">
          <span class="hits">11</span>
          
          <code class="ruby">      type = type</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="77">
          <span class="hits">11</span>
          
          <code class="ruby">      mode = get_mode if mode.nil?</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="78">
          <span class="hits">11</span>
          
          <code class="ruby">      owner_name = &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="79">
          <span class="hits">11</span>
          
          <code class="ruby">      if self.respond_to?(:name) &amp;&amp; send(:name)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="80">
          <span class="hits">3</span>
          
          <code class="ruby">        owner_name = self.name.to_s.downcase.to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">      elsif self == Origen.top_level</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="82">
          <span class="hits">8</span>
          
          <code class="ruby">        owner_name = self.class.to_s.split(&#39;::&#39;).last.downcase.to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="84">
          
          
          <code class="ruby">        owner_name = self.class.to_s.split(&#39;::&#39;).last.downcase.to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="86">
          <span class="hits">11</span>
          
          <code class="ruby">      spec_placeholder = Spec</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">                         .new(name, type, mode, owner_name, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">      # Check if the spec already exists</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="89">
          <span class="hits">11</span>
          
          <code class="ruby">      if has_spec?(name, type: type, mode: mode, sub_type: spec_placeholder.sub_type, creating_spec: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">        # Spec already exists.  Go ahead flag error and drop processing.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">        # This is a fatal error.</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="92">
          
          
          <code class="ruby">        fail &quot;Spec already exists for name: #{name}, type: #{type}, mode: #{mode} for object #{self}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="94">
          <span class="hits">11</span>
          
          <code class="ruby">      @_specs[name][mode][type][spec_placeholder.sub_type] = spec_placeholder</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">    # Returns Boolean based on whether the calling object has any defined specs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">    # If the mode option is selected then the search is narrowed</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="99">
          <span class="hits">2</span>
          
          <code class="ruby">    def has_specs?(options = {})</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="100">
          <span class="hits">3</span>
          
          <code class="ruby">      _specs</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="101">
          <span class="hits">3</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">        type:          nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">        sub_type:      nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">        mode:          current_mode.nil? ? nil : current_mode.name,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">        spec:          nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">        symbol:        false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">        creating_spec: false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="109">
          <span class="hits">3</span>
          
          <code class="ruby">      if @_specs.nil? || @_specs == {}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="110">
          <span class="hits">1</span>
          
          <code class="ruby">        return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="112">
          <span class="hits">2</span>
          
          <code class="ruby">        return !!show_specs(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">    # Returns the modes for this block</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="117">
          <span class="hits">2</span>
          
          <code class="ruby">    def get_modes</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="118">
          
          
          <code class="ruby">      @_modes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">    # Check if the current IP has a spec</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="122">
          <span class="hits">2</span>
          
          <code class="ruby">    def has_spec?(s, options = {})</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="123">
          <span class="hits">22</span>
          
          <code class="ruby">      _specs</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="124">
          <span class="hits">22</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">        type:          nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">        sub_type:      nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">        mode:          current_mode.nil? ? nil : current_mode.name,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">        spec:          nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">        symbol:        false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">        creating_spec: false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="132">
          <span class="hits">22</span>
          
          <code class="ruby">      options[:spec] = s</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="133">
          <span class="hits">22</span>
          
          <code class="ruby">      !!show_specs(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">    # Adds a new documentation notion to the block</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="137">
          <span class="hits">2</span>
          
          <code class="ruby">    def documentation(header_info, selection, applicable_devices, link)</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="138">
          <span class="hits">13</span>
          
          <code class="ruby">      _documentation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">      # Create a new documenation and place it in the 5-D hash</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="140">
          <span class="hits">13</span>
          
          <code class="ruby">      @_documentation[header_info[:section]][header_info[:subsection]][selection[:interface]][selection[:type]][selection[:sub_type]][selection[:mode]][selection[:audience]] = Documentation.new(header_info, selection, applicable_devices, link)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">    # Adds a new feature to the block</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="144">
          <span class="hits">2</span>
          
          <code class="ruby">    def spec_feature(id, attrs, device, text, internal_comment)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">      # Welguisz:  No idea why this is here, but keeping it here because it follows other blocks</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="146">
          <span class="hits">10</span>
          
          <code class="ruby">      _spec_features</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">      # Create a new feature and place it in the features 2-D Hash</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="148">
          <span class="hits">10</span>
          
          <code class="ruby">      @_spec_features[id][device] = Spec_Features.new(id, attrs, device, text, internal_comment)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">    # Define and instantiate a Note object</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="152">
          <span class="hits">2</span>
          
          <code class="ruby">    def note(id, type, options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby">      # Welguisz:  No idea why this is here, but keeping it here because it follows other blocks</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="154">
          <span class="hits">16</span>
          
          <code class="ruby">      _notes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby">      # Create a new note and place it in the notes 2-D Hash</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="156">
          <span class="hits">16</span>
          
          <code class="ruby">      @_notes[id][type] = Note.new(id, type, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="159">
          <span class="hits">2</span>
          
          <code class="ruby">    def exhibit(id, type, overrides = {}, options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">      # Welguisz:  No idea why this is here, but keeping it here because it follows other blocks</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="161">
          <span class="hits">8</span>
          
          <code class="ruby">      _exhibits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby">      # Create a new Exhibit and place it in the exhibits 3-D Hash</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="163">
          <span class="hits">8</span>
          
          <code class="ruby">      @_exhibits[options[:block_id]][id][type] = Exhibit.new(id, type, overrides, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="166">
          <span class="hits">2</span>
          
          <code class="ruby">    def doc_resource(selector = {}, table_title = {}, text = {}, options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby">      # Welguisz:  No idea why this is here, but keeping it here because it follows other blocks</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="168">
          <span class="hits">29</span>
          
          <code class="ruby">      _doc_resources</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="169">
          <span class="hits">29</span>
          
          <code class="ruby">      mode = selector[:mode]</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="170">
          <span class="hits">29</span>
          
          <code class="ruby">      type = selector[:type]</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="171">
          <span class="hits">29</span>
          
          <code class="ruby">      sub_type = selector[:sub_type]</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="172">
          <span class="hits">29</span>
          
          <code class="ruby">      audience = selector[:audience]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">      # Create a new Document Resource and place it in the Doc Resources 4-D Hash</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="174">
          <span class="hits">29</span>
          
          <code class="ruby">      @_doc_resources[mode][type][sub_type][audience] = Doc_Resource.new(selector, table_title, text, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="177">
          <span class="hits">2</span>
          
          <code class="ruby">    def version_history(date, author, changes)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby">      # Welguisz:  No idea why this is here, but keeping it here because it follows other blocks</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="179">
          <span class="hits">3</span>
          
          <code class="ruby">      _version_history</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby">      # Create a new Version History and place it in the version history 2-D Hash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="181">
          <span class="hits">3</span>
          
          <code class="ruby">      tmp_ver_history = Version_History.new(date, author, changes)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="182">
          <span class="hits">3</span>
          
          <code class="ruby">      @_version_history[date][author] = tmp_ver_history</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="185">
          <span class="hits">2</span>
          
          <code class="ruby">    def override(block_options = {}, find_spec = {}, values = {}, options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">      # Welguisz:  No idea why this is here, but keeping it here because it follows other blocks</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="187">
          <span class="hits">9</span>
          
          <code class="ruby">      _overrides</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="188">
          <span class="hits">9</span>
          
          <code class="ruby">      block = block_options[:block]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="189">
          <span class="hits">9</span>
          
          <code class="ruby">      spec_ref = find_spec[:spec_id]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="190">
          <span class="hits">9</span>
          
          <code class="ruby">      mode_ref = find_spec[:mode_ref]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="191">
          <span class="hits">9</span>
          
          <code class="ruby">      sub_type = find_spec[:sub_type]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="192">
          <span class="hits">9</span>
          
          <code class="ruby">      audience = find_spec[:audience]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby">      # Create a new Override and place it in the overrides 5-D Hash</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="194">
          <span class="hits">9</span>
          
          <code class="ruby">      @_overrides[block][spec_ref][mode_ref][sub_type][audience] = Override.new(block_options, find_spec, values, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="197">
          <span class="hits">2</span>
          
          <code class="ruby">    def power_supply(gen, act)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby">      # Welguisz:  No idea why this is here, but keeping it here because it follows other blocks</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="199">
          <span class="hits">20</span>
          
          <code class="ruby">      _power_supplies</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">      # Create a new Power Supply and place it in the power supplies 2-D Hash</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="201">
          <span class="hits">20</span>
          
          <code class="ruby">      @_power_supplies[gen][act] = Power_Supply.new(gen, act)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="204">
          <span class="hits">2</span>
          
          <code class="ruby">    def mode_select(block_information, mode_usage, power_information)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby">      # Welguisz:  No idea why this is here, but keeping it here because it follows other blocks</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="206">
          <span class="hits">6</span>
          
          <code class="ruby">      _mode_selects</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby">      # See if the mode will be used.  If so, create a new Mode Select and place it in mode_selects 2-D Hash</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="208">
          <span class="hits">6</span>
          
          <code class="ruby">      if block_information[:usage]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="209">
          <span class="hits">6</span>
          
          <code class="ruby">        @_mode_selects[block_information[:name]][mode_usage[:mode]] = Mode_Select.new(block_information, mode_usage, power_information)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="213">
          <span class="hits">2</span>
          
          <code class="ruby">    def creation_info(author, date, version, src_info = {}, tool_info = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby">      # Create a new Information Information.  Should only be one.</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="215">
          <span class="hits">4</span>
          
          <code class="ruby">      @_creation_info = Creation_Info.new(author, date, version, src_info, tool_info)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="216">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="218">
          <span class="hits">2</span>
          
          <code class="ruby">    def get_creation_info</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="219">
          <span class="hits">5</span>
          
          <code class="ruby">      @_creation_info</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">    # Returns a Note object from the notes hash</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="223">
          <span class="hits">2</span>
          
          <code class="ruby">    def notes(options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">      # Create a default 2 item hash and update if options is supplied</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="225">
          <span class="hits">4</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="226">
          
          
          <code class="ruby">        id:   nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">        type: nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="229">
          <span class="hits">4</span>
          
          <code class="ruby">      return nil if @_notes.nil?</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="230">
          <span class="hits">3</span>
          
          <code class="ruby">      return nil if @_notes.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="231">
          
          
          <code class="ruby">      # Empty 2-D Hash to be used for notes found based on id and type</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="232">
          <span class="hits">3</span>
          
          <code class="ruby">      notes_found = Hash.new do |h, k|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="233">
          
          
          <code class="ruby">        # h is the id portion of the hash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">        # k is the type portion of the hash</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="235">
          <span class="hits">9</span>
          
          <code class="ruby">        h[k] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby">      # Filter @notes based off of the id</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="238">
          <span class="hits">3</span>
          
          <code class="ruby">      filter_hash(@_notes, options[:id]).each do |id, hash|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="239">
          
          
          <code class="ruby">        # Filter hash based off of the type</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="240">
          <span class="hits">9</span>
          
          <code class="ruby">        filter_hash(hash, options[:type]).each do |type, note|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">          # Store the note into note_found</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="242">
          <span class="hits">9</span>
          
          <code class="ruby">          notes_found[id][type] = note</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="245">
          <span class="hits">3</span>
          
          <code class="ruby">      if notes_found.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="247">
          <span class="hits">3</span>
          
          <code class="ruby">      elsif notes_found.size == 1</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="248">
          <span class="hits">2</span>
          
          <code class="ruby">        notes_found.values.first.values.first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="250">
          <span class="hits">1</span>
          
          <code class="ruby">        return notes_found</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="251">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="254">
          <span class="hits">2</span>
          
          <code class="ruby">    def spec_features(options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="255">
          <span class="hits">2</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">        id:     nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="257">
          
          
          <code class="ruby">        device: nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="259">
          <span class="hits">2</span>
          
          <code class="ruby">      return @_spec_features if options[:id].nil? &amp;&amp; options[:device].nil?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="260">
          <span class="hits">2</span>
          
          <code class="ruby">      return nil if @_spec_features.nil?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="261">
          <span class="hits">2</span>
          
          <code class="ruby">      return nil if @_spec_features.empty?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="262">
          <span class="hits">2</span>
          
          <code class="ruby">      features_found = Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="263">
          <span class="hits">6</span>
          
          <code class="ruby">        h[k] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="265">
          <span class="hits">2</span>
          
          <code class="ruby">      filter_hash(@_spec_features, options[:id]).each do |id, hash|</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="266">
          <span class="hits">7</span>
          
          <code class="ruby">        filter_hash(hash, options[:device]).each do |device, feat|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="267">
          <span class="hits">6</span>
          
          <code class="ruby">          features_found[id][device] = feat</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="268">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="269">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="270">
          <span class="hits">2</span>
          
          <code class="ruby">      if features_found.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="271">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="272">
          <span class="hits">2</span>
          
          <code class="ruby">      elsif features_found.size == 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="273">
          <span class="hits">1</span>
          
          <code class="ruby">        features_found.values.first.values.first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="274">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="275">
          <span class="hits">1</span>
          
          <code class="ruby">        return features_found</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="276">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="279">
          <span class="hits">2</span>
          
          <code class="ruby">    def exhibits(options = {})</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="280">
          <span class="hits">6</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby">        block: nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby">        id:    nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="283">
          
          
          <code class="ruby">        type:  nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="284">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="285">
          <span class="hits">6</span>
          
          <code class="ruby">      return nil if @_exhibits.nil?</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="286">
          <span class="hits">5</span>
          
          <code class="ruby">      return nil if @_exhibits.empty?</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="287">
          <span class="hits">5</span>
          
          <code class="ruby">      ex_found = Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="288">
          <span class="hits">8</span>
          
          <code class="ruby">        h[k] = Hash.new do |hh, kk|</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="289">
          <span class="hits">16</span>
          
          <code class="ruby">          hh[kk] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="291">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="292">
          <span class="hits">5</span>
          
          <code class="ruby">      filter_hash(@_exhibits, options[:block]).each do |_block, hash|</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="293">
          <span class="hits">9</span>
          
          <code class="ruby">        filter_hash(hash, options[:id]).each do |_id, hash_|</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="294">
          <span class="hits">23</span>
          
          <code class="ruby">          filter_hash(hash_, options[:type]).each do |_type, exh|</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="295">
          <span class="hits">16</span>
          
          <code class="ruby">            ex_found[_block][_id][_type] = exh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="296">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="297">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="299">
          <span class="hits">5</span>
          
          <code class="ruby">      if ex_found.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="300">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="301">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="302">
          <span class="hits">5</span>
          
          <code class="ruby">        return ex_found</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="303">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="305">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="306">
          <span class="hits">2</span>
          
          <code class="ruby">    def doc_resources(options = {})</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="307">
          <span class="hits">14</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="308">
          
          
          <code class="ruby">        mode:     nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="309">
          
          
          <code class="ruby">        type:     nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">        sub_type: nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="311">
          
          
          <code class="ruby">        audience: nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="313">
          <span class="hits">14</span>
          
          <code class="ruby">      return nil if @_doc_resources.nil?</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="314">
          <span class="hits">13</span>
          
          <code class="ruby">      return nil if @_doc_resources.empty?</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="315">
          <span class="hits">13</span>
          
          <code class="ruby">      dr_found = Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="316">
          <span class="hits">29</span>
          
          <code class="ruby">        h[k] = Hash.new do |hh, kk|</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="317">
          <span class="hits">47</span>
          
          <code class="ruby">          hh[kk] = Hash.new do |hhh, kkk|</code>
        </li>
      
        <li class="covered" data-hits="78" data-linenumber="318">
          <span class="hits">78</span>
          
          <code class="ruby">            hhh[kkk] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="320">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="321">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="322">
          <span class="hits">13</span>
          
          <code class="ruby">      filter_hash(@_doc_resources, options[:mode]).each do |_mode, hash|</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="323">
          <span class="hits">29</span>
          
          <code class="ruby">        filter_hash(hash, options[:type]).each do |_type, hash_|</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="324">
          <span class="hits">47</span>
          
          <code class="ruby">          filter_hash(hash_, options[:sub_type]).each do |_sub_type, hash__|</code>
        </li>
      
        <li class="covered" data-hits="78" data-linenumber="325">
          <span class="hits">78</span>
          
          <code class="ruby">            filter_hash(hash__, options[:audience]).each do |_audience, spec|</code>
        </li>
      
        <li class="covered" data-hits="127" data-linenumber="326">
          <span class="hits">127</span>
          
          <code class="ruby">              dr_found[_mode][_type][_sub_type][_audience] = spec</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="327">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="328">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="329">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="330">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="331">
          <span class="hits">13</span>
          
          <code class="ruby">      if dr_found.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="332">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="333">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="334">
          <span class="hits">13</span>
          
          <code class="ruby">        return dr_found</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="335">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="336">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="337">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="338">
          <span class="hits">2</span>
          
          <code class="ruby">    def documentations(options = {})</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="339">
          <span class="hits">18</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="340">
          
          
          <code class="ruby">        section:    nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="341">
          
          
          <code class="ruby">        subsection: nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="342">
          
          
          <code class="ruby">        interface:  nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="343">
          
          
          <code class="ruby">        mode:       nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="344">
          
          
          <code class="ruby">        type:       nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="345">
          
          
          <code class="ruby">        sub_type:   nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="346">
          
          
          <code class="ruby">        audience:   nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="347">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="348">
          <span class="hits">18</span>
          
          <code class="ruby">      return nil if @_documentation.nil?</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="349">
          <span class="hits">17</span>
          
          <code class="ruby">      return nil if @_documentation.empty?</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="350">
          <span class="hits">17</span>
          
          <code class="ruby">      doc_found = Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="351">
          <span class="hits">22</span>
          
          <code class="ruby">        h[k] = Hash.new do |hh, kk|</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="352">
          <span class="hits">45</span>
          
          <code class="ruby">          hh[kk] = Hash.new do |hhh, kkk|</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="353">
          <span class="hits">45</span>
          
          <code class="ruby">            hhh[kkk] = Hash.new do |hhhh, kkkk|</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="354">
          <span class="hits">45</span>
          
          <code class="ruby">              hhhh[kkkk] = Hash.new do |hhhhh, kkkkk|</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="355">
          <span class="hits">45</span>
          
          <code class="ruby">                hhhhh[kkkkk] = Hash.new do |hhhhhh, kkkkkk|</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="356">
          <span class="hits">45</span>
          
          <code class="ruby">                  hhhhhh[kkkkkk] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="357">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="358">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="359">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="360">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="361">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="362">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="363">
          <span class="hits">17</span>
          
          <code class="ruby">      filter_hash(@_documentation, options[:section]).each do |_section, hash|</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="364">
          <span class="hits">37</span>
          
          <code class="ruby">        filter_hash(hash, options[:subsection]).each do |_subsection, hash_|</code>
        </li>
      
        <li class="covered" data-hits="75" data-linenumber="365">
          <span class="hits">75</span>
          
          <code class="ruby">          filter_hash(hash_, options[:interface]).each do |_interface, hash__|</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="366">
          <span class="hits">45</span>
          
          <code class="ruby">            filter_hash(hash__, options[:type]).each do |_type, hash___|</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="367">
          <span class="hits">45</span>
          
          <code class="ruby">              filter_hash(hash___, options[:sub_type]).each do |_sub_type, hash____|</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="368">
          <span class="hits">45</span>
          
          <code class="ruby">                filter_hash(hash____, options[:mode]).each do |_mode, hash_____|</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="369">
          <span class="hits">45</span>
          
          <code class="ruby">                  filter_hash(hash_____, options[:audience]).each do |_audience, doc|</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="370">
          <span class="hits">45</span>
          
          <code class="ruby">                    doc_found[_section][_subsection][_interface][_type][_sub_type][_mode][_audience] = doc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="371">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="372">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="373">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="374">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="375">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="376">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="377">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="378">
          <span class="hits">17</span>
          
          <code class="ruby">      if doc_found.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="380">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="381">
          <span class="hits">14</span>
          
          <code class="ruby">        return doc_found</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="382">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="383">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="384">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="385">
          <span class="hits">2</span>
          
          <code class="ruby">    def overrides(options = {})</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="386">
          <span class="hits">17</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="387">
          
          
          <code class="ruby">        block:    nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="388">
          
          
          <code class="ruby">        spec_ref: nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="389">
          
          
          <code class="ruby">        mode_ref: nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="390">
          
          
          <code class="ruby">        sub_type: nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="391">
          
          
          <code class="ruby">        audience: nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="392">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="393">
          <span class="hits">17</span>
          
          <code class="ruby">      return nil if @_overrides.nil?</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="394">
          <span class="hits">16</span>
          
          <code class="ruby">      return nil if @_overrides.empty?</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="395">
          <span class="hits">16</span>
          
          <code class="ruby">      overrides_found = Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="396">
          <span class="hits">27</span>
          
          <code class="ruby">        h[k] = Hash.new do |hh, kk|</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="397">
          <span class="hits">38</span>
          
          <code class="ruby">          hh[kk] = Hash.new do |hhh, kkk|</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="398">
          <span class="hits">38</span>
          
          <code class="ruby">            hhh[kkk] = Hash.new do |hhhh, kkkk|</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="399">
          <span class="hits">38</span>
          
          <code class="ruby">              hhhh[kkkk] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="400">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="401">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="402">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="403">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="404">
          <span class="hits">16</span>
          
          <code class="ruby">      filter_hash(@_overrides, options[:block]).each do |_block, hash|</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="405">
          <span class="hits">36</span>
          
          <code class="ruby">        filter_hash(hash, options[:spec_ref]).each do |_spec_ref, hash_|</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="406">
          <span class="hits">62</span>
          
          <code class="ruby">          filter_hash(hash_, options[:mode_ref]).each do |_mode_ref, hash__|</code>
        </li>
      
        <li class="covered" data-hits="50" data-linenumber="407">
          <span class="hits">50</span>
          
          <code class="ruby">            filter_hash(hash__, options[:sub_type]).each do |_sub_type, hash___|</code>
        </li>
      
        <li class="covered" data-hits="44" data-linenumber="408">
          <span class="hits">44</span>
          
          <code class="ruby">              filter_hash(hash___, options[:audience]).each do |_audience, override|</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="409">
          <span class="hits">38</span>
          
          <code class="ruby">                overrides_found[_block][_spec_ref][_mode_ref][_sub_type][_audience] = override</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="410">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="411">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="412">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="413">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="414">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="415">
          <span class="hits">16</span>
          
          <code class="ruby">      if overrides_found.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="416">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="417">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="418">
          <span class="hits">15</span>
          
          <code class="ruby">        return overrides_found</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="419">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="420">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="421">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="422">
          <span class="hits">2</span>
          
          <code class="ruby">    def mode_selects(options = {})</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="423">
          <span class="hits">7</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="424">
          
          
          <code class="ruby">        block: nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="425">
          
          
          <code class="ruby">        mode:  nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="426">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="427">
          <span class="hits">7</span>
          
          <code class="ruby">      return nil if @_mode_selects.nil?</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="428">
          <span class="hits">6</span>
          
          <code class="ruby">      return nil if @_mode_selects.empty?</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="429">
          <span class="hits">6</span>
          
          <code class="ruby">      modes_found = Hash.new do|h, k|</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="430">
          <span class="hits">9</span>
          
          <code class="ruby">        h[k] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="431">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="432">
          <span class="hits">6</span>
          
          <code class="ruby">      filter_hash(@_mode_selects, options[:block]).each do |block, hash|</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="433">
          <span class="hits">11</span>
          
          <code class="ruby">        filter_hash(hash, options[:mode]).each do |mode, sel|</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="434">
          <span class="hits">11</span>
          
          <code class="ruby">          modes_found[block][mode] = sel</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="435">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="436">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="437">
          <span class="hits">6</span>
          
          <code class="ruby">      if modes_found.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="438">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="439">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="440">
          <span class="hits">6</span>
          
          <code class="ruby">        return modes_found</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="441">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="442">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="443">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="444">
          <span class="hits">2</span>
          
          <code class="ruby">    def power_supplies(options = {})</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="445">
          <span class="hits">8</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="446">
          
          
          <code class="ruby">        gen: nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="447">
          
          
          <code class="ruby">        act: nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="448">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="449">
          <span class="hits">8</span>
          
          <code class="ruby">      ps_found = Hash.new do|h, k|</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="450">
          <span class="hits">11</span>
          
          <code class="ruby">        h[k] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="451">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="452">
          <span class="hits">8</span>
          
          <code class="ruby">      return nil if @_power_supplies.nil?</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="453">
          <span class="hits">7</span>
          
          <code class="ruby">      return nil if @_power_supplies.empty?</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="454">
          <span class="hits">7</span>
          
          <code class="ruby">      filter_hash(@_power_supplies, options[:gen]).each do |gen, hash|</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="455">
          <span class="hits">14</span>
          
          <code class="ruby">        filter_hash(hash, options[:act]).each do |act, sel|</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="456">
          <span class="hits">38</span>
          
          <code class="ruby">          ps_found[gen][act] = sel</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="457">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="458">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="459">
          <span class="hits">7</span>
          
          <code class="ruby">      if ps_found.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="460">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="461">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="462">
          <span class="hits">7</span>
          
          <code class="ruby">        return ps_found</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="463">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="464">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="465">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="466">
          <span class="hits">2</span>
          
          <code class="ruby">    def versions</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="467">
          
          
          <code class="ruby">      @_version_history</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="468">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="469">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="470">
          <span class="hits">2</span>
          
          <code class="ruby">    def info</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="471">
          
          
          <code class="ruby">      @_creation_info</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="472">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="473">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="474">
          
          
          <code class="ruby">    # Delete all specs</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="475">
          <span class="hits">2</span>
          
          <code class="ruby">    def delete_all_specs</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="476">
          <span class="hits">1</span>
          
          <code class="ruby">      @_specs = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="477">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="478">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="479">
          
          
          <code class="ruby">    # Delete all notes</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="480">
          <span class="hits">2</span>
          
          <code class="ruby">    def delete_all_notes</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="481">
          <span class="hits">1</span>
          
          <code class="ruby">      @_notes = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="482">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="483">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="484">
          
          
          <code class="ruby">    # Delete all exhibits</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="485">
          <span class="hits">2</span>
          
          <code class="ruby">    def delete_all_exhibits</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="486">
          <span class="hits">1</span>
          
          <code class="ruby">      @_exhibits = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="487">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="488">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="489">
          <span class="hits">2</span>
          
          <code class="ruby">    def delete_all_doc_resources</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="490">
          <span class="hits">1</span>
          
          <code class="ruby">      @_doc_resources = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="491">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="492">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="493">
          <span class="hits">2</span>
          
          <code class="ruby">    def delete_all_overrides</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="494">
          <span class="hits">1</span>
          
          <code class="ruby">      @_overrides = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="495">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="496">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="497">
          <span class="hits">2</span>
          
          <code class="ruby">    def delete_all_power_supplies</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="498">
          <span class="hits">1</span>
          
          <code class="ruby">      @_power_supplies = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="499">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="500">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="501">
          <span class="hits">2</span>
          
          <code class="ruby">    def delete_all_version_history</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="502">
          
          
          <code class="ruby">      @_version_history = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="503">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="504">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="505">
          <span class="hits">2</span>
          
          <code class="ruby">    def delete_all_mode_selects</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="506">
          <span class="hits">1</span>
          
          <code class="ruby">      @_mode_selects = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="507">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="508">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="509">
          <span class="hits">2</span>
          
          <code class="ruby">    def delete_creation_info</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="510">
          <span class="hits">1</span>
          
          <code class="ruby">      @_creation_info = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="511">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="512">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="513">
          <span class="hits">2</span>
          
          <code class="ruby">    def delete_spec_features</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="514">
          
          
          <code class="ruby">      @_spec_features = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="515">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="516">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="517">
          <span class="hits">2</span>
          
          <code class="ruby">    def delete_all_documentation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="518">
          <span class="hits">1</span>
          
          <code class="ruby">      @_documentation = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="519">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="520">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="521">
          <span class="hits">2</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="522">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="523">
          <span class="hits">2</span>
          
          <code class="ruby">    def _specs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="524">
          
          
          <code class="ruby">      # 4D hash with name, type, mode, and sub_type as keys</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="525">
          
          
          <code class="ruby">      @_specs ||= Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="526">
          <span class="hits">8</span>
          
          <code class="ruby">        h[k] = Hash.new do |hh, kk|</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="527">
          <span class="hits">11</span>
          
          <code class="ruby">          hh[kk] = Hash.new do |hhh, kkk|</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="528">
          <span class="hits">11</span>
          
          <code class="ruby">            hhh[kkk] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="529">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="530">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="143" data-linenumber="531">
          <span class="hits">143</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="532">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="533">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="534">
          
          
          <code class="ruby">    # Two-dimensional hash with note id and type as the keys</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="535">
          <span class="hits">2</span>
          
          <code class="ruby">    def _notes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="536">
          
          
          <code class="ruby">      @_notes ||= Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="537">
          <span class="hits">8</span>
          
          <code class="ruby">        h[k] = {}</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="538">
          <span class="hits">16</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="539">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="540">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="541">
          <span class="hits">2</span>
          
          <code class="ruby">    def _spec_features</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="542">
          
          
          <code class="ruby">      @_spec_features ||= Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="543">
          <span class="hits">6</span>
          
          <code class="ruby">        h[k] = {}</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="544">
          <span class="hits">10</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="545">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="546">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="547">
          <span class="hits">2</span>
          
          <code class="ruby">    def _exhibits</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="548">
          
          
          <code class="ruby">      @_exhibits ||= Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="549">
          <span class="hits">3</span>
          
          <code class="ruby">        h[k] = Hash.new do |hh, kk|</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="550">
          <span class="hits">8</span>
          
          <code class="ruby">          hh[kk] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="551">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="552">
          <span class="hits">8</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="553">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="554">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="555">
          <span class="hits">2</span>
          
          <code class="ruby">    def _doc_resources</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="556">
          
          
          <code class="ruby">      @_doc_resources ||= Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="557">
          <span class="hits">6</span>
          
          <code class="ruby">        h[k] = Hash.new do |hh, kk|</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="558">
          <span class="hits">9</span>
          
          <code class="ruby">          hh[kk] = Hash.new do |hhh, kkk|</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="559">
          <span class="hits">15</span>
          
          <code class="ruby">            hhh[kkk] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="560">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="561">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="562">
          <span class="hits">29</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="563">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="564">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="565">
          <span class="hits">2</span>
          
          <code class="ruby">    def _documentation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="566">
          
          
          <code class="ruby">      @_documentation ||= Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="567">
          <span class="hits">5</span>
          
          <code class="ruby">        h[k] = Hash.new do |hh, kk|</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="568">
          <span class="hits">13</span>
          
          <code class="ruby">          hh[kk] = Hash.new do |hhh, kkk|</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="569">
          <span class="hits">13</span>
          
          <code class="ruby">            hhh[kkk] = Hash.new do |hhhh, kkkk|</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="570">
          <span class="hits">13</span>
          
          <code class="ruby">              hhhh[kkkk] = Hash.new do |hhhhh, kkkkk|</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="571">
          <span class="hits">13</span>
          
          <code class="ruby">                hhhhh[kkkkk] = Hash.new do |hhhhhh, kkkkkk|</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="572">
          <span class="hits">13</span>
          
          <code class="ruby">                  hhhhhh[kkkkkk] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="573">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="574">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="575">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="576">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="577">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="578">
          <span class="hits">13</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="579">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="580">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="581">
          <span class="hits">2</span>
          
          <code class="ruby">    def _overrides</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="582">
          
          
          <code class="ruby">      @_overrides ||= Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="583">
          <span class="hits">6</span>
          
          <code class="ruby">        h[k] = Hash.new do |hh, kk|</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="584">
          <span class="hits">9</span>
          
          <code class="ruby">          hh[kk] = Hash.new do |hhh, kkk|</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="585">
          <span class="hits">9</span>
          
          <code class="ruby">            hhh[kkk] = Hash.new do |hhhh, kkkk|</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="586">
          <span class="hits">9</span>
          
          <code class="ruby">              hhhh[kkkk] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="587">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="588">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="589">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="590">
          <span class="hits">9</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="591">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="592">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="593">
          <span class="hits">2</span>
          
          <code class="ruby">    def _power_supplies</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="594">
          
          
          <code class="ruby">      @_power_supplies ||= Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="595">
          <span class="hits">6</span>
          
          <code class="ruby">        h[k] = {}</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="596">
          <span class="hits">20</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="597">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="598">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="599">
          <span class="hits">2</span>
          
          <code class="ruby">    def _mode_selects</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="600">
          
          
          <code class="ruby">      @_mode_selects ||= Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="601">
          <span class="hits">5</span>
          
          <code class="ruby">        h[k] = {}</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="602">
          <span class="hits">6</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="603">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="604">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="605">
          <span class="hits">2</span>
          
          <code class="ruby">    def _version_history</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="606">
          
          
          <code class="ruby">      @_version_history ||= Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="607">
          <span class="hits">3</span>
          
          <code class="ruby">        h[k] = {}</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="608">
          <span class="hits">3</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="609">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="610">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="611">
          <span class="hits">2</span>
          
          <code class="ruby">    def _creation_info</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="612">
          
          
          <code class="ruby">      @_creation_info = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="613">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="614">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="615">
          
          
          <code class="ruby">    # Return a hash based on the filter provided</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="616">
          <span class="hits">2</span>
          
          <code class="ruby">    def filter_hash(hash, filter, debug = false)</code>
        </li>
      
        <li class="covered" data-hits="1220" data-linenumber="617">
          <span class="hits">1220</span>
          
          <code class="ruby">      fail &#39;Hash argument is not a Hash!&#39; unless hash.is_a? Hash</code>
        </li>
      
        <li class="covered" data-hits="1220" data-linenumber="618">
          <span class="hits">1220</span>
          
          <code class="ruby">      filtered_hash = {}</code>
        </li>
      
        <li class="covered" data-hits="1220" data-linenumber="619">
          <span class="hits">1220</span>
          
          <code class="ruby">      select_logic = case filter</code>
        </li>
      
        <li class="covered" data-hits="148" data-linenumber="620">
          <span class="hits">148</span>
          
          <code class="ruby">        when String then &#39;k.nil? ? false : k[Regexp.new(filter)] &amp;&amp; k.length == filter.length&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="621">
          
          
          <code class="ruby">        when (Fixnum || Integer || Float || Numeric) then &quot;k[Regexp.new(&#39;#{filter}&#39;)]&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="622">
          <span class="hits">1</span>
          
          <code class="ruby">        when Regexp then &#39;k[filter]&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="623">
          
          
          <code class="ruby">        when Symbol then</code>
        </li>
      
        <li class="covered" data-hits="227" data-linenumber="624">
          <span class="hits">227</span>
          
          <code class="ruby">          &#39;k == filter&#39;</code>
        </li>
      
        <li class="covered" data-hits="844" data-linenumber="625">
          <span class="hits">844</span>
          
          <code class="ruby">        when NilClass then true # Return all specs if a filter is set to nil (i.e. user doesn&#39;t care about this filter)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="626">
          
          
          <code class="ruby">        else true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="627">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="628">
          
          
          <code class="ruby">      # rubocop:disable UnusedBlockArgument</code>
        </li>
      
        <li class="covered" data-hits="1220" data-linenumber="629">
          <span class="hits">1220</span>
          
          <code class="ruby">      filtered_hash = hash.select do |k, v|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="630">
          
          
          <code class="ruby">        # binding.pry if filter == &#39;SubSection A&#39;</code>
        </li>
      
        <li class="covered" data-hits="2034" data-linenumber="631">
          <span class="hits">2034</span>
          
          <code class="ruby">        [TrueClass, FalseClass].include?(select_logic.class) ? select_logic : eval(select_logic)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="632">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1220" data-linenumber="633">
          <span class="hits">1220</span>
          
          <code class="ruby">      filtered_hash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="634">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="635">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="636">
          
          
          <code class="ruby">    # Filters the 4D hash to find specs for all user visible API</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="637">
          <span class="hits">2</span>
          
          <code class="ruby">    def show_specs(options = {})</code>
        </li>
      
        <li class="covered" data-hits="69" data-linenumber="638">
          <span class="hits">69</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="639">
          
          
          <code class="ruby">        mode:              nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="640">
          
          
          <code class="ruby">        spec:              nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="641">
          
          
          <code class="ruby">        type:              nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="642">
          
          
          <code class="ruby">        sub_type:          nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="643">
          
          
          <code class="ruby">        specs_to_be_shown: SpecArray.new,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="644">
          
          
          <code class="ruby">        owner:             nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="645">
          
          
          <code class="ruby">        symbol:            false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="646">
          
          
          <code class="ruby">        creating_spec:     false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="647">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="69" data-linenumber="648">
          <span class="hits">69</span>
          
          <code class="ruby">      options[:symbol] ? symbol = options.delete(:spec) : symbol = nil</code>
        </li>
      
        <li class="covered" data-hits="69" data-linenumber="649">
          <span class="hits">69</span>
          
          <code class="ruby">      specs_to_be_shown = options[:specs_to_be_shown]</code>
        </li>
      
        <li class="covered" data-hits="69" data-linenumber="650">
          <span class="hits">69</span>
          
          <code class="ruby">      filter_hash(_specs, options[:spec]).each do |_spec, hash|</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="651">
          <span class="hits">86</span>
          
          <code class="ruby">        filter_hash(hash, options[:mode]).each do |_mode, hash_|</code>
        </li>
      
        <li class="covered" data-hits="78" data-linenumber="652">
          <span class="hits">78</span>
          
          <code class="ruby">          filter_hash(hash_, options[:type]).each do |_type, hash__|</code>
        </li>
      
        <li class="covered" data-hits="78" data-linenumber="653">
          <span class="hits">78</span>
          
          <code class="ruby">            filter_hash(hash__, options[:sub_type]).each do |_sub_type, spec|</code>
        </li>
      
        <li class="covered" data-hits="78" data-linenumber="654">
          <span class="hits">78</span>
          
          <code class="ruby">              if symbol</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="655">
          <span class="hits">16</span>
          
          <code class="ruby">                if spec.symbol &amp;&amp; (spec.symbol.gsub(/&lt;.*?&gt;/, &#39;&#39;).downcase.to_sym == symbol)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="656">
          <span class="hits">1</span>
          
          <code class="ruby">                  specs_to_be_shown &lt;&lt; spec</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="657">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="658">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="659">
          <span class="hits">62</span>
          
          <code class="ruby">                specs_to_be_shown &lt;&lt; spec</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="660">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="661">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="662">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="663">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="664">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="665">
          
          
          <code class="ruby">      # If no specs were found must check the possibility another search</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="666">
          
          
          <code class="ruby">      # should be started with mode set to :local or :global</code>
        </li>
      
        <li class="covered" data-hits="69" data-linenumber="667">
          <span class="hits">69</span>
          
          <code class="ruby">      if specs_to_be_shown.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="668">
          
          
          <code class="ruby">        # Don&#39;t want to re-call this method if the callee is trying to create a spec and just wants to know</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="669">
          
          
          <code class="ruby">        # if there is a spec with the exact same options</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="670">
          <span class="hits">24</span>
          
          <code class="ruby">        if options[:creating_spec] == false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="671">
          
          
          <code class="ruby">          # Doesn&#39;t make sense to recall the method however if the mode is already set to :global or :local</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="672">
          <span class="hits">13</span>
          
          <code class="ruby">          unless [:global, :local, nil].include?(options[:mode])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="673">
          
          
          <code class="ruby">            # Need to check if there are :global or :local specs that match the filter(s) as well</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="674">
          <span class="hits">7</span>
          
          <code class="ruby">            if self == Origen.top_level</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="675">
          <span class="hits">6</span>
          
          <code class="ruby">              options[:mode] = :global</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="676">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="677">
          <span class="hits">1</span>
          
          <code class="ruby">              options[:mode] = :local</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="678">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="679">
          <span class="hits">7</span>
          
          <code class="ruby">            options[:specs_to_be_shown] = specs_to_be_shown</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="680">
          <span class="hits">7</span>
          
          <code class="ruby">            Origen.log.debug &quot;re-calling show_specs with options #{options}&quot;</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="681">
          <span class="hits">7</span>
          
          <code class="ruby">            return show_specs(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="682">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="683">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="684">
          <span class="hits">17</span>
          
          <code class="ruby">        Origen.log.debug &quot;Returning no specs for options #{options}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="685">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="covered" data-hits="45" data-linenumber="686">
          <span class="hits">45</span>
          
          <code class="ruby">      elsif specs_to_be_shown.size == 1</code>
        </li>
      
        <li class="covered" data-hits="41" data-linenumber="687">
          <span class="hits">41</span>
          
          <code class="ruby">        print_to_console(specs_to_be_shown) if options[:verbose] == true</code>
        </li>
      
        <li class="covered" data-hits="41" data-linenumber="688">
          <span class="hits">41</span>
          
          <code class="ruby">        Origen.log.debug &quot;returning one spec #{specs_to_be_shown.first.name}&quot;</code>
        </li>
      
        <li class="covered" data-hits="41" data-linenumber="689">
          <span class="hits">41</span>
          
          <code class="ruby">        return specs_to_be_shown.first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="690">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="691">
          <span class="hits">4</span>
          
          <code class="ruby">        Origen.log.debug &quot;returning an array of specs during initial search: #{specs_to_be_shown}&quot;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="692">
          <span class="hits">4</span>
          
          <code class="ruby">        return specs_to_be_shown</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="693">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="694">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="695">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="696">
          
          
          <code class="ruby">    # Method to print a spec table to the console</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="697">
          <span class="hits">2</span>
          
          <code class="ruby">    def specs_to_table_string(specs_to_be_shown)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="698">
          <span class="hits">22</span>
          
          <code class="ruby">      whitespace_padding = 3</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="699">
          <span class="hits">22</span>
          
          <code class="ruby">      table = []</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="700">
          <span class="hits">22</span>
          
          <code class="ruby">      attrs_to_be_shown = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="701">
          
          
          <code class="ruby">        name:        SpecTableAttr.new(&#39;Name&#39;,      true,  &#39;Name&#39;.length + whitespace_padding),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="702">
          
          
          <code class="ruby">        symbol:      SpecTableAttr.new(&#39;Symbol&#39;,    false, &#39;Symbol&#39;.length + whitespace_padding),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="703">
          
          
          <code class="ruby">        mode:        SpecTableAttr.new(&#39;Mode&#39;,      true,  &#39;Mode&#39;.length + whitespace_padding),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="704">
          
          
          <code class="ruby">        type:        SpecTableAttr.new(&#39;Type&#39;,      true,  &#39;Type&#39;.length + whitespace_padding),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="705">
          
          
          <code class="ruby">        sub_type:    SpecTableAttr.new(&#39;Sub-Type&#39;,  false, &#39;Sub-Type&#39;.length + whitespace_padding),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="706">
          
          
          <code class="ruby">        # spec SpecTableAttribute :description is called parameter in the spec table output to match historical docs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="707">
          
          
          <code class="ruby">        description: SpecTableAttr.new(&#39;Parameter&#39;, false, &#39;Parameter&#39;.length + whitespace_padding),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="708">
          
          
          <code class="ruby">        min:         SpecTableAttr.new(&#39;Min&#39;,       false, &#39;Min&#39;.length + whitespace_padding),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="709">
          
          
          <code class="ruby">        typ:         SpecTableAttr.new(&#39;Typ&#39;,       false, &#39;Typ&#39;.length + whitespace_padding),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="710">
          
          
          <code class="ruby">        max:         SpecTableAttr.new(&#39;Max&#39;,       false, &#39;Max&#39;.length + whitespace_padding),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="711">
          
          
          <code class="ruby">        unit:        SpecTableAttr.new(&#39;Unit&#39;,      false, &#39;Unit&#39;.length + whitespace_padding),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="712">
          
          
          <code class="ruby">        audience:    SpecTableAttr.new(&#39;Audience&#39;,  false, &#39;Audience&#39;.length + whitespace_padding)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="713">
          
          
          <code class="ruby">        # notes:       SpecTableAttr.new(&#39;Notes&#39;,     false, &#39;Notes&#39;.length + whitespace_padding)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="714">
          
          
          <code class="ruby">      }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="715">
          
          
          <code class="ruby">      # Calculate the padding needed in the spec table for the longest attr of all specs</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="716">
          <span class="hits">22</span>
          
          <code class="ruby">      specs_to_be_shown.each do |spec|</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="717">
          <span class="hits">22</span>
          
          <code class="ruby">        attrs_to_be_shown.each do |attr_name, attr_struct|</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="718">
          <span class="hits">242</span>
          
          <code class="ruby">          unless spec.send(attr_name).nil?</code>
        </li>
      
        <li class="covered" data-hits="212" data-linenumber="719">
          <span class="hits">212</span>
          
          <code class="ruby">            if spec.send(attr_name).class == Origen::Specs::Spec::Limit</code>
        </li>
      
        <li class="covered" data-hits="66" data-linenumber="720">
          <span class="hits">66</span>
          
          <code class="ruby">              next if spec.send(attr_name).value.nil?</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="721">
          <span class="hits">40</span>
          
          <code class="ruby">              current_padding = spec.send(attr_name).value.to_s.length + whitespace_padding</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="722">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="146" data-linenumber="723">
          <span class="hits">146</span>
          
          <code class="ruby">              current_padding = spec.send(attr_name).to_s.length + whitespace_padding</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="724">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="186" data-linenumber="725">
          <span class="hits">186</span>
          
          <code class="ruby">            attr_struct.padding = current_padding if attr_struct.padding &lt; current_padding</code>
        </li>
      
        <li class="covered" data-hits="186" data-linenumber="726">
          <span class="hits">186</span>
          
          <code class="ruby">            attr_struct.show = true # We found real data for this attr on at least one spec so show it in the spec table</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="727">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="728">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="729">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="730">
          
          
          <code class="ruby">      # Now that each spec attribute padding construct the spec table header</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="731">
          <span class="hits">22</span>
          
          <code class="ruby">      header = &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="732">
          <span class="hits">22</span>
          
          <code class="ruby">      attrs_to_be_shown.each do |_attr_name, attr_struct|</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="733">
          <span class="hits">242</span>
          
          <code class="ruby">        next if attr_struct.show == false</code>
        </li>
      
        <li class="covered" data-hits="186" data-linenumber="734">
          <span class="hits">186</span>
          
          <code class="ruby">        header += &quot;| #{attr_struct.table_text}&quot;.ljust(attr_struct.padding)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="735">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="736">
          <span class="hits">22</span>
          
          <code class="ruby">      header += &#39;|&#39;</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="737">
          <span class="hits">22</span>
          
          <code class="ruby">      ip_header = &quot;| IP: #{specs_to_be_shown.first.ip_name} &quot;.ljust(header.length - 1)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="738">
          <span class="hits">22</span>
          
          <code class="ruby">      ip_header += &#39;|&#39;</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="739">
          <span class="hits">22</span>
          
          <code class="ruby">      table &lt;&lt; &#39;=&#39; * header.length</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="740">
          <span class="hits">22</span>
          
          <code class="ruby">      table &lt;&lt; ip_header</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="741">
          <span class="hits">22</span>
          
          <code class="ruby">      table &lt;&lt; &#39;=&#39; * header.length</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="742">
          <span class="hits">22</span>
          
          <code class="ruby">      table &lt;&lt; header</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="743">
          <span class="hits">22</span>
          
          <code class="ruby">      table &lt;&lt; &#39;-&#39; * header.length</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="744">
          
          
          <code class="ruby">      # Create the data lines in the spec table</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="745">
          <span class="hits">22</span>
          
          <code class="ruby">      specs_to_be_shown.each do |spec|</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="746">
          <span class="hits">22</span>
          
          <code class="ruby">        data = &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="747">
          <span class="hits">22</span>
          
          <code class="ruby">        attrs_to_be_shown.each do |attr_name, attr_struct|</code>
        </li>
      
        <li class="covered" data-hits="242" data-linenumber="748">
          <span class="hits">242</span>
          
          <code class="ruby">          next if attr_struct.show == false</code>
        </li>
      
        <li class="covered" data-hits="186" data-linenumber="749">
          <span class="hits">186</span>
          
          <code class="ruby">          if spec.send(attr_name).class == Origen::Specs::Spec::Limit</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="750">
          <span class="hits">40</span>
          
          <code class="ruby">            data += &quot;| #{spec.send(attr_name).value}&quot;.ljust(attr_struct.padding)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="751">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="146" data-linenumber="752">
          <span class="hits">146</span>
          
          <code class="ruby">            data += &quot;| #{spec.send(attr_name)}&quot;.ljust(attr_struct.padding)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="753">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="754">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="755">
          <span class="hits">22</span>
          
          <code class="ruby">        table &lt;&lt; data += &#39;|&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="756">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="757">
          <span class="hits">22</span>
          
          <code class="ruby">      table &lt;&lt; &#39;-&#39; * header.length</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="758">
          <span class="hits">22</span>
          
          <code class="ruby">      table.flatten.join(&quot;\n&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="759">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="760">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="761">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="c1de94ef97b6b142551c6b2e1eaa65819f2417c5">
  <div class="header">
    <h3>lib/origen/specs/checkers.rb</h3>
    <h4><span class="red">71.64 %</span> covered</h4>
    <div>
      <b>67</b> relevant lines. 
      <span class="green"><b>48</b> lines covered</span> and
      <span class="red"><b>19</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module Specs</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    module Checkers</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">      require &#39;nokogiri&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">      # rubocop:disable Style/RescueModifier:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">      def name_audit(name)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="8">
          <span class="hits">22</span>
          
          <code class="ruby">        return name if name.nil?</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="9">
          <span class="hits">22</span>
          
          <code class="ruby">        return nil unless name.is_a?(Symbol) || name.is_a?(String)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="10">
          <span class="hits">22</span>
          
          <code class="ruby">        if name == :inspect</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="11">
          
          
          <code class="ruby">          Origen.log.debug &#39;:inspect is a reserved spec name&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="12">
          
          
          <code class="ruby">          return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="14">
          <span class="hits">22</span>
          
          <code class="ruby">        if name.match(/^\d/)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="15">
          
          
          <code class="ruby">          Origen.log.debug &quot;Spec #{name} starts with a number&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="16">
          
          
          <code class="ruby">          return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="18">
          <span class="hits">22</span>
          
          <code class="ruby">        if name.match(/\s+/)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="19">
          
          
          <code class="ruby">          Origen.log.debug &quot;Spec #{name} contains white space, removing it&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="20">
          
          
          <code class="ruby">          name.delete!(/\s+/)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="22">
          <span class="hits">22</span>
          
          <code class="ruby">        name.is_a?(String) ? name.downcase.to_sym : name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      # Check that min, max are not mixed with typ.  If a user wants</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      # a baseline value for a spec use target as it will not be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">      # checked against pass/fail</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="28">
          <span class="hits">2</span>
          
          <code class="ruby">      def limits_ok?</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="29">
          <span class="hits">11</span>
          
          <code class="ruby">        status = true</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="30">
          <span class="hits">11</span>
          
          <code class="ruby">        if (@min.exp.to_s.include? &#39;/&#39;) || (@max.exp.to_s.include? &#39;/&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="31">
          
          
          <code class="ruby">          return status</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="33">
          <span class="hits">11</span>
          
          <code class="ruby">        if @min.exp.nil? ^ @max.exp.nil?</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="34">
          <span class="hits">3</span>
          
          <code class="ruby">          @limit_type = :single_sided</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="35">
          <span class="hits">3</span>
          
          <code class="ruby">          if @typ.exp</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">            # status = false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">            Origen.log.debug &quot;Spec #{@name} has a typical limit defined with either min or max.  They are mutually exclusive, use &#39;target&#39; when using min or max&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">        elsif @min.exp &amp;&amp; @max.exp</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="40">
          <span class="hits">7</span>
          
          <code class="ruby">          @limit_type = :double_sided</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">          # Both min and max must be numerical to compare them</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="42">
          <span class="hits">7</span>
          
          <code class="ruby">          if @min.value.is_a?(Numeric) &amp;&amp; @max.value.is_a?(Numeric)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">            # Check that min and max make sense</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="44">
          <span class="hits">6</span>
          
          <code class="ruby">            if @max.value &lt;= @min.value || @min.value &gt;= @max.value</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="45">
          
          
          <code class="ruby">              status = false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="46">
          
          
          <code class="ruby">              Origen.log.debug &quot;Spec #{@name} has min (#{@min.value}) and max (#{@max.value}) reversed&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">            # Check that target is OK</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="49">
          <span class="hits">6</span>
          
          <code class="ruby">            unless @target.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="50">
          
          
          <code class="ruby">              if @target.value &lt;= @min.value || @target.value &gt;= @max.value</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="51">
          
          
          <code class="ruby">                status = false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="52">
          
          
          <code class="ruby">                Origen.log.debug &quot;Spec #{@name} has a target (#{@target.value}) that is not within the min (#{@min.value}) and max #{@max.value}) values&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="57">
          <span class="hits">11</span>
          
          <code class="ruby">        status</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="60">
          <span class="hits">2</span>
          
          <code class="ruby">      def get_mode</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="61">
          <span class="hits">8</span>
          
          <code class="ruby">        spec_mode = nil</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="62">
          <span class="hits">8</span>
          
          <code class="ruby">        if current_mode.nil?</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="63">
          <span class="hits">6</span>
          
          <code class="ruby">          if self == Origen.top_level</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="64">
          <span class="hits">5</span>
          
          <code class="ruby">            spec_mode = :global</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="66">
          <span class="hits">1</span>
          
          <code class="ruby">            spec_mode = :local</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="69">
          <span class="hits">2</span>
          
          <code class="ruby">          spec_mode = current_mode.name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="71">
          <span class="hits">8</span>
          
          <code class="ruby">        spec_mode</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="74">
          <span class="hits">2</span>
          
          <code class="ruby">      def evaluate_limit(limit)</code>
        </li>
      
        <li class="covered" data-hits="190" data-linenumber="75">
          <span class="hits">190</span>
          
          <code class="ruby">        return limit if [Fixnum, Float, Numeric, Symbol].include? limit.class</code>
        </li>
      
        <li class="covered" data-hits="134" data-linenumber="76">
          <span class="hits">134</span>
          
          <code class="ruby">        return nil if limit.nil?</code>
        </li>
      
        <li class="covered" data-hits="108" data-linenumber="77">
          <span class="hits">108</span>
          
          <code class="ruby">        limit = limit.to_s if [Nokogiri::XML::NodeSet, Nokogiri::XML::Text, Nokogiri::XML::Element].include? limit.class</code>
        </li>
      
        <li class="covered" data-hits="108" data-linenumber="78">
          <span class="hits">108</span>
          
          <code class="ruby">        limit.gsub!(&quot;\n&quot;, &#39; &#39;)</code>
        </li>
      
        <li class="covered" data-hits="108" data-linenumber="79">
          <span class="hits">108</span>
          
          <code class="ruby">        limit.scrub!</code>
        </li>
      
        <li class="covered" data-hits="108" data-linenumber="80">
          <span class="hits">108</span>
          
          <code class="ruby">        result = false</code>
        </li>
      
        <li class="covered" data-hits="108" data-linenumber="81">
          <span class="hits">108</span>
          
          <code class="ruby">        if !!(limit.match(/^\d+\.\d+$/)) || !!(limit.match(/^-\d+\.\d+$/))</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="82">
          
          
          <code class="ruby">          result = Float(limit).round(4) rescue false # Use the same four digits of accuracy as the Spec model</code>
        </li>
      
        <li class="covered" data-hits="108" data-linenumber="83">
          <span class="hits">108</span>
          
          <code class="ruby">        elsif !!(limit.match(/\d+\.\d+\s+\d+\.\d+/)) # workaround for multiple specs authoring bug</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="84">
          
          
          <code class="ruby">          Origen.log.debug &quot;Found two numbers without an operator in the limit string &#39;#{limit}&#39;, choosing the first...&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="85">
          
          
          <code class="ruby">          first_number = limit.match(/(\d+\.\d+)\s+\d+\.\d+/).captures.first</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="86">
          
          
          <code class="ruby">          result = Float(first_number).round(4) rescue false # Use the same four digits of accuracy as the Spec model</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">        # elsif !!(limit.match(/^tbd$/i)) # unique case of TBD or To Be Determined, will convert to symbol</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">        #  limit = limit.downcase.to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="108" data-linenumber="90">
          <span class="hits">108</span>
          
          <code class="ruby">          result = Integer(limit) rescue false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="108" data-linenumber="92">
          <span class="hits">108</span>
          
          <code class="ruby">        if result == false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">          # Attempt to eval the limit because users could write a limit like &quot;3.3 + 50.mV&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">          # which would not work with the code above but should eval to a number 3.35</code>
        </li>
      
        <li class="covered" data-hits="108" data-linenumber="95">
          <span class="hits">108</span>
          
          <code class="ruby">          begin</code>
        </li>
      
        <li class="covered" data-hits="108" data-linenumber="96">
          <span class="hits">108</span>
          
          <code class="ruby">            result = eval(limit)</code>
        </li>
      
        <li class="covered" data-hits="102" data-linenumber="97">
          <span class="hits">102</span>
          
          <code class="ruby">            return result.round(4) if result.is_a? Numeric</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="98">
          <span class="hits">6</span>
          
          <code class="ruby">            rescue SyntaxError, NameError, TypeError</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="99">
          <span class="hits">6</span>
          
          <code class="ruby">              Origen.log.debug &quot;Limit &#39;#{limit}&#39; had to be rescued, storing it as a #{limit.class}&quot;</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="100">
          <span class="hits">6</span>
          
          <code class="ruby">              if limit.is_a? Symbol</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="101">
          
          
          <code class="ruby">                return limit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="103">
          <span class="hits">6</span>
          
          <code class="ruby">                return &quot;#{limit}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="107">
          
          
          <code class="ruby">          return result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="4eacb7547787cb285cd1cfdb4de27b576708cb87">
  <div class="header">
    <h3>lib/origen/specs/creation_info.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>13</b> relevant lines. 
      <span class="green"><b>13</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Specs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Ruby Data Class that contains Creation Information for the IP Block</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    class Creation_Info</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :author, :date, :revision, :source, :tool, :tool_version, :ip_version, :ip_block_name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">      # Initialize the Creation Info block to store data for latest version of the file.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">      # ==== Parameters</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">      # * author    # Author/Subject Matter Expert for the IP Block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      # * date      # Date that the File was released to Downstream Audiences</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      # ==== Source Information</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      # * :revision      # Revision Information</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      # * :source        # Where the Information came from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      # * :ip_block_name # Block Name for the IP. e.g. DDR for DDRC1, DDRC2; I2C for I2C1, I2C2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      # ==== Tool Info</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      # * :tool      # Tool that created the initial XML file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">      # * :version   # Version of the Tool that created the XML file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      # ==== Example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      #   Creation_Info.new(&quot;author&quot;, &quot;07/10/2015&quot;, :revision =&gt; &quot;5.4&quot;, :source =&gt; &quot;CSV&quot;, :tool =&gt; &quot;oRiGeN&quot;, :tool_version =&gt; &quot;0.0.6&quot;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(author, date, ip_version, src_info = {}, tool_info = {})</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="28">
          <span class="hits">4</span>
          
          <code class="ruby">        @author = author</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="29">
          <span class="hits">4</span>
          
          <code class="ruby">        @date = date</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="30">
          <span class="hits">4</span>
          
          <code class="ruby">        @ip_version = ip_version</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="31">
          <span class="hits">4</span>
          
          <code class="ruby">        @revision = src_info[:revision]</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="32">
          <span class="hits">4</span>
          
          <code class="ruby">        @source = src_info[:source]</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="33">
          <span class="hits">4</span>
          
          <code class="ruby">        @ip_block_name = src_info[:ip_block_name]</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="34">
          <span class="hits">4</span>
          
          <code class="ruby">        @tool = tool_info[:tool]</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="35">
          <span class="hits">4</span>
          
          <code class="ruby">        @tool_version = tool_info[:version]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="4a011e1d2a2fe53cbc9516934d4bc8b042706d4e">
  <div class="header">
    <h3>lib/origen/specs/doc_resource.rb</h3>
    <h4><span class="red">35.71 %</span> covered</h4>
    <div>
      <b>70</b> relevant lines. 
      <span class="green"><b>25</b> lines covered</span> and
      <span class="red"><b>45</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Specs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # This class is used to store text information to help with documentation processes</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    class Doc_Resource</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">      # Mode is part of the 4-D Hash for the Tables.  Corresponds to Spec 4-D Hash</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :mode</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">      # Type is part of the 4-D Hash for the Tables.  Corresponds to Spec 4-D Hash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">      # Usual values</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">      # * DC -&gt; Direct Current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      # * AC -&gt; Alternate Current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      # * Temp -&gt; Temperature</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      # * Supply -&gt; Supply</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      # SubType is part of the 4-D Hash for the Tables. Corresponds to Spec 4-D Hash</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :sub_type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      # Audience is part of the 4-D Hash for the Tables.  Corresponds to Spec 4-D Hash</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :audience</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      # Table Title that should appear for the table.  If blank, generic Table Title will be used</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      # Hash is created from mode, type, sub_type, and audience.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :table_title</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">      # Note References that should be referenced within the table title</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :note_refs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      # Exhibit References that should be referenced within the table title</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :exhibit_refs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      # DITA Formatted Text that appears before the table</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :before_table</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      # DITA Formatted Text that appears after the table</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :after_table</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      # Documentation Options that will change the appearance of the output.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="40">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :doc_options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      # Initialize the Class</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="43">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(selector = {}, table_title = {}, text = {}, options = {})</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="44">
          <span class="hits">29</span>
          
          <code class="ruby">        @mode = selector[:mode]</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="45">
          <span class="hits">29</span>
          
          <code class="ruby">        @type = selector[:type]</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="46">
          <span class="hits">29</span>
          
          <code class="ruby">        @sub_type = selector[:sub_type]</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="47">
          <span class="hits">29</span>
          
          <code class="ruby">        @audience = selector[:audience]</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="48">
          <span class="hits">29</span>
          
          <code class="ruby">        @table_title = table_title[:title]</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="49">
          <span class="hits">29</span>
          
          <code class="ruby">        @note_refs = table_title[:note_refs]</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="50">
          <span class="hits">29</span>
          
          <code class="ruby">        @exhibit_refs = table_title[:exhibit_refs]</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="51">
          <span class="hits">29</span>
          
          <code class="ruby">        @before_table = text[:before]</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="52">
          <span class="hits">29</span>
          
          <code class="ruby">        @after_table = text[:after]</code>
        </li>
      
        <li class="covered" data-hits="29" data-linenumber="53">
          <span class="hits">29</span>
          
          <code class="ruby">        @doc_options = options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">      # Converts to an XML file.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="57">
          <span class="hits">1</span>
          
          <code class="ruby">      def to_xml</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="58">
          
          
          <code class="ruby">        tmp = {}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="59">
          
          
          <code class="ruby">        tmp[&#39;mode&#39;] = @mode unless @mode.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="60">
          
          
          <code class="ruby">        tmp[&#39;type&#39;] = @type unless @type.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="61">
          
          
          <code class="ruby">        tmp[&#39;sub_type&#39;] = @sub_type unless @sub_type.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="62">
          
          
          <code class="ruby">        tmp[&#39;audience&#39;] = @audience unless @audience.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="63">
          
          
          <code class="ruby">        doc_resource_ml = Nokogiri::XML::Builder.new do |xml|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">          xml.doc_resource(tmp.each do |t, d|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="65">
          
          
          <code class="ruby">            &quot;#{t}=\&quot;#{d}\&quot;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="67">
          
          
          <code class="ruby">                          ) do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="68">
          
          
          <code class="ruby">            unless @table_title.nil? &amp;&amp; @note_refs.size == 0 &amp;&amp; @exhibit_refs.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="69">
          
          
          <code class="ruby">              unless @note_refs.first.to_s.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="70">
          
          
          <code class="ruby">                unless @exhibit_refs.first.to_s.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="71">
          
          
          <code class="ruby">                  xml.title do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="72">
          
          
          <code class="ruby">                    unless @table_title.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="73">
          
          
          <code class="ruby">                      xml.Text @table_title.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="75">
          
          
          <code class="ruby">                    unless @note_refs.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="76">
          
          
          <code class="ruby">                      unless @note_refs.first.to_s.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="77">
          
          
          <code class="ruby">                        xml.noteRefs do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="78">
          
          
          <code class="ruby">                          @note_refs = [@note_refs] unless @note_refs.is_a? Array</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="79">
          
          
          <code class="ruby">                          @note_refs.each do |note_ref|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="80">
          
          
          <code class="ruby">                            unless note_ref.to_s.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="81">
          
          
          <code class="ruby">                              xml.noteRef(href: note_ref.to_s)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">                            end # unless note_ref.to_s.size == 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">                          end # @note_refs.each do |note_ref|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">                        end # xml.noteRefs do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">                      end # unless @note_refs.first.to_s.size == 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">                    end # unless @note_refs.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="87">
          
          
          <code class="ruby">                    unless @exhibit_refs.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="88">
          
          
          <code class="ruby">                      unless @exhibit_refs.first.to_s.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="89">
          
          
          <code class="ruby">                        xml.exhibitRefs do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="90">
          
          
          <code class="ruby">                          @exhibit_refs = [@exhibit_refs] unless @exhibit_refs.is_a? Array</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="91">
          
          
          <code class="ruby">                          @exhibit_refs.each do |exhibit_ref|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="92">
          
          
          <code class="ruby">                            unless exhibit_ref.to_s.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="93">
          
          
          <code class="ruby">                              xml.exhibitRef(href: exhibit_ref.to_s)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">                            end # unless exhibit_ref.to_s.size == 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">                          end # @exhibit_refs.each do |exhibit_ref|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">                        end # xml.exhibitRefs do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">                      end # unless @exhibit_refs.first.to_s.size == 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">                    end # unless @exhibit_refs.size == 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">                  end # xml.title.done</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">                end # unless @exhibit_refs.to_s.size == 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">              end  # unless @note_refs.to_s.size == 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">            end # unless @table_title.nil? &amp;&amp; @note_refs.size == 0 &amp;&amp; @exhibit_refs.size == 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="103">
          
          
          <code class="ruby">            unless @before_table.nil? &amp;&amp; @after_table.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="104">
          
          
          <code class="ruby">              xml.paragraphs do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="105">
          
          
          <code class="ruby">                unless @before_table.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="106">
          
          
          <code class="ruby">                  if (@before_table.is_a? Nokogiri::XML::Node) || (@before_table.is_a? Nokogiri::XML::Element)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="107">
          
          
          <code class="ruby">                    xml.before_table do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="108">
          
          
          <code class="ruby">                      if @before_table.name == &#39;body&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="109">
          
          
          <code class="ruby">                        xml &lt;&lt; @before_table.children.to_xml</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">                      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="111">
          
          
          <code class="ruby">                        xml &lt;&lt; @before_table.to_xml</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">                      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">                  else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="115">
          
          
          <code class="ruby">                    xml.before_table @before_table</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="118">
          
          
          <code class="ruby">                unless @after_table.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="119">
          
          
          <code class="ruby">                  if (@after_table.is_a? Nokogiri::XML::Node) || (@after_table.is_a? Nokogiri::XML::Element)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="120">
          
          
          <code class="ruby">                    xml.after_table do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="121">
          
          
          <code class="ruby">                      if @after_table.name == &#39;body&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="122">
          
          
          <code class="ruby">                        xml &lt;&lt; @after_table.children.to_xml</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">                      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="124">
          
          
          <code class="ruby">                        xml &lt;&lt; @after_table.to_xml</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">                      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">                  else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="128">
          
          
          <code class="ruby">                    xml.after_table @after_table</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">              end # xml.paragraphs do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">            end # unless @before_table.nil? &amp;&amp; @after_table.nil?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">          end # xml.doc_resource</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby">        end # doc_resource_ml = Nokogiri::</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="135">
          
          
          <code class="ruby">        doc_resource_ml.doc.at_xpath(&#39;doc_resource&#39;).to_xml</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">      end  # to_xml</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="f2c40f045dd67acaf56b39d04fae6e5292abb295">
  <div class="header">
    <h3>lib/origen/specs/documentation.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>24</b> relevant lines. 
      <span class="green"><b>24</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Specs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # This class is used to store documentation map that the user can change</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    class Documentation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">      # Level that Section is at.  Allows for a key to be found.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :level</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">      # This is the Section Header for the Documentation Map.  Usually these are main headers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">      # Examples:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      #  I. Overall DC Electricals</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">      #  II. General AC Charactertistics</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      #  III. Power Sequencing</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :section</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      # This is the subsection header for the Documentation Map.  These are found under main headers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      # Examples</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      #  I. Overall DC electrical</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">      #    A. Absolute Maximum Ratings</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      #    B. Recommend Operating Conditions</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      #    C. Output Driver</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :subsection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      # Exhibit References that should be referenced within the table title</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :interface</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      # Mode is part of the 4-D Hash for the Tables.  Corresponds to Spec 4-D Hash</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :mode</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">      # Type is part of the 4-D Hash for the Tables.  Corresponds to Spec 4-D Hash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      # Usual values</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      # * DC -&gt; Direct Current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      # * AC -&gt; Alternate Current</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">      # * Temp -&gt; Temperature</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">      # * Supply -&gt; Supply</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">      # SubType is part of the 4-D Hash for the Tables. Corresponds to Spec 4-D Hash</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :sub_type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">      # Audience is part of the 4-D Hash for the Tables.  Corresponds to Spec 4-D Hash</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="42">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :audience</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      # DITA Formatted Text that appears before the table</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="45">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :link</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">      # Applicable Devices for the map</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="48">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :applicable_devices</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      # Initialize the Class</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="51">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(header_info = {}, selection = {}, applicable_devs = [], link = nil)</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="52">
          <span class="hits">13</span>
          
          <code class="ruby">        @level = header_info[:level]</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="53">
          <span class="hits">13</span>
          
          <code class="ruby">        @section = header_info[:section]</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="54">
          <span class="hits">13</span>
          
          <code class="ruby">        @subsection = header_info[:subsection]</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="55">
          <span class="hits">13</span>
          
          <code class="ruby">        @interface = selection[:interface]</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="56">
          <span class="hits">13</span>
          
          <code class="ruby">        @mode = selection[:mode]</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="57">
          <span class="hits">13</span>
          
          <code class="ruby">        @type = selection[:type]</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="58">
          <span class="hits">13</span>
          
          <code class="ruby">        @sub_type = selection[:sub_type]</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="59">
          <span class="hits">13</span>
          
          <code class="ruby">        @audience = selection[:audience]</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="60">
          <span class="hits">13</span>
          
          <code class="ruby">        @applicable_devices = applicable_devs</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="61">
          <span class="hits">13</span>
          
          <code class="ruby">        @link = link</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="bfd2a793d573c06bcc04c7950aeb531757c6a1a6">
  <div class="header">
    <h3>lib/origen/specs/exhibit.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>27</b> relevant lines. 
      <span class="green"><b>27</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Specs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # This class is used to store spec exhibit information used to document IP</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    class Exhibit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">      # ID for the exhibit.  This allows the exhibit to reference easier</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">      # Type of exhibit.  Currently only :fig is supported.  In the future, this could be :topic or :table or anything else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">      # Title for the Exhibit.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :title</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      # Description for the Exhibit</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :description</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      # Reference link</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :reference</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      # Markup needed for the exhibit</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :markup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      # Do we include the exhibit in this block</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :include_exhibit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      # Block ID that this exhibit is being used in.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :block_id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">      # Title Override.  Allows for the SoC to override the title so that it makes more sense</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :title_override</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      # Reference Override.  This allows for the SoC to use a different figure (e.g. Power Supplies are different)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :reference_override</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">      # Description Override.  This allows for the SoC to use a different description</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :description_override</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(id, type, overrides, options = {})</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="39">
          <span class="hits">8</span>
          
          <code class="ruby">        @id = id</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="40">
          <span class="hits">8</span>
          
          <code class="ruby">        @type = type</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="41">
          <span class="hits">8</span>
          
          <code class="ruby">        @title = options[:title]</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="42">
          <span class="hits">8</span>
          
          <code class="ruby">        @description = options[:description]</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="43">
          <span class="hits">8</span>
          
          <code class="ruby">        @reference = options[:reference]</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="44">
          <span class="hits">8</span>
          
          <code class="ruby">        @title_override = overrides[:title]</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="45">
          <span class="hits">8</span>
          
          <code class="ruby">        @reference_override = overrides[:reference]</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="46">
          <span class="hits">8</span>
          
          <code class="ruby">        @description_override = overrides[:description]</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="47">
          <span class="hits">8</span>
          
          <code class="ruby">        @markup = options[:markup]</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="48">
          <span class="hits">8</span>
          
          <code class="ruby">        @include_exhibit = true</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="49">
          <span class="hits">8</span>
          
          <code class="ruby">        @include_exhibit = options[:include_exhibit] unless options[:include_exhibit].nil?</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="50">
          <span class="hits">8</span>
          
          <code class="ruby">        @block_id = options[:block_id]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="f4527ff7a084add7030262f51f816b7867e3b85e">
  <div class="header">
    <h3>lib/origen/specs/mode_select.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>22</b> relevant lines. 
      <span class="green"><b>22</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Specs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # This class is used to store mode select for IP</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    class Mode_Select</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">      # Block Name at the SoC (e.g. DDRC1, DDRC2, DDRC3)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">      # Data Sheet Header/Group Name</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :ds_header</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">      # Block Use at the SoC Level</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :usage</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      # Mode Reference Name</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :mode</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      # SoC Supports this mode?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :supported</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      # SoC Supply List</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :supply</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      # SoC Supply Voltage Level</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :supply_level</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      # Use Information from different data source</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :diff_loc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">      # Location of the block to read</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :location</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      # There are three sub-blocks of information in Mode Select</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      # * block_information:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">      # ** name : The name of the block as instiniated in the SoC</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">      # ** ds_header:  Data Sheet Header/Group.  Allows for multiple instantation to be grouped under one header in datasheet or allows for them to broken out</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      # ** usage:  Block is used in this SoC {Could be starting point for license plate support}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      # ** location:  File path to the specml location</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      # * mode_usage:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      # ** mode: The mode name at the IP Level</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">      # ** usage: Does this IP in this SoC support this mode?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">      # * power_information:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      # ** supply:  Name of the supply for that Interface.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">      # ** voltage_level:  Array of the possible values for this supply e.g. [1.8, 2.5, 3.3] or [1.8]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">      # ** use_diff:  Use information from a different location</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(block_information, mode_usage, power_information)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="48">
          <span class="hits">6</span>
          
          <code class="ruby">        @block = block_information[:name]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="49">
          <span class="hits">6</span>
          
          <code class="ruby">        @ds_header = block_information[:ds_header]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="50">
          <span class="hits">6</span>
          
          <code class="ruby">        @usage = block_information[:usage]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="51">
          <span class="hits">6</span>
          
          <code class="ruby">        @location = block_information[:location]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="52">
          <span class="hits">6</span>
          
          <code class="ruby">        @mode = mode_usage[:mode]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="53">
          <span class="hits">6</span>
          
          <code class="ruby">        @supported = mode_usage[:supported]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="54">
          <span class="hits">6</span>
          
          <code class="ruby">        @supply = power_information[:supply]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="55">
          <span class="hits">6</span>
          
          <code class="ruby">        @supply_level = power_information[:voltage_level]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="56">
          <span class="hits">6</span>
          
          <code class="ruby">        @diff_loc = power_information[:use_diff]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="04eebd198aa26af3614e015aa6538af9b30571ab">
  <div class="header">
    <h3>lib/origen/specs/note.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>18</b> relevant lines. 
      <span class="green"><b>18</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Specs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # This class is used to store spec note information used to document IP</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    class Note</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">      # id is the id for the note.  The goal for the id is to allow multiple specs to reference one note.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">      # spec.notes = [id1, id2, id3]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">      # spec1.notes = [id1, id4, id5]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      # Type should be :ac or :dc, but this might have been phased out.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">      #  TODO:  Check to see if :type has been deprecated or is still needed</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      # Mode will match the mode that this note belongs to.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      #  TODO:  Check to see if :mode has been deprecated or is still needed</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :mode</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">      # Audience should be :ac or :dc, but this might have been phased out.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      #  TODO:  Check to see if :type has been deprecated or is still needed</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :audience</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">      # Plain text of the note.  No Mark-up allowed in this field.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :text</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      # Markup of the text field.  Currently markup has been tested with</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">      # * DITA</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      # * XML</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">      # * HTML</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">      # Need to test the following markup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      # * Markdown</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :markup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      # Internal comment that could be used to know why the note was needed. Think of this as a breadcrumb</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      # to find out about more information on the note.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :internal_comment</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      # Initialize the class</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(id, type, options = {})</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="42">
          <span class="hits">17</span>
          
          <code class="ruby">        @id = id</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="43">
          <span class="hits">17</span>
          
          <code class="ruby">        @type = type</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="44">
          <span class="hits">17</span>
          
          <code class="ruby">        @mode = options[:mode]</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="45">
          <span class="hits">17</span>
          
          <code class="ruby">        @audience = options[:audience]</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="46">
          <span class="hits">17</span>
          
          <code class="ruby">        @text = options[:text]</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="47">
          <span class="hits">17</span>
          
          <code class="ruby">        @markup = options[:markup]</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="48">
          <span class="hits">17</span>
          
          <code class="ruby">        @internal_comment = options[:internal_comment]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="abade76dce54e58597c3c816f108268a46eb87d5">
  <div class="header">
    <h3>lib/origen/specs/override.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>16</b> relevant lines. 
      <span class="green"><b>16</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Specs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # This class is used to store override information for specified specs on instantiated IP</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    class Override</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :block, :usage, :spec_ref, :mode_ref, :sub_type, :audience, :minimum, :maximum, :typical, :disable, :hidespec</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(block_options = {}, find_spec = {}, values = {}, options = {})</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="8">
          <span class="hits">9</span>
          
          <code class="ruby">        @block = block_options[:block]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="9">
          <span class="hits">9</span>
          
          <code class="ruby">        @usage = block_options[:usage]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="10">
          <span class="hits">9</span>
          
          <code class="ruby">        @spec_ref = find_spec[:spec_id]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="11">
          <span class="hits">9</span>
          
          <code class="ruby">        @mode_ref = find_spec[:mode_ref]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="12">
          <span class="hits">9</span>
          
          <code class="ruby">        @sub_type = find_spec[:sub_type]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="13">
          <span class="hits">9</span>
          
          <code class="ruby">        @audience = find_spec[:audience]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="14">
          <span class="hits">9</span>
          
          <code class="ruby">        @minimum = values[:min]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="15">
          <span class="hits">9</span>
          
          <code class="ruby">        @maximum = values[:max]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="16">
          <span class="hits">9</span>
          
          <code class="ruby">        @typical = values[:typ]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="17">
          <span class="hits">9</span>
          
          <code class="ruby">        @disable = options[:disable]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="18">
          <span class="hits">9</span>
          
          <code class="ruby">        @hidespec = options[:hidespec]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="37d0f0d261018d52040d54bb30bf11619c675398">
  <div class="header">
    <h3>lib/origen/specs/power_supply.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>16</b> relevant lines. 
      <span class="green"><b>16</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Specs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # This class is used to store Power Supply Information at the SoC Level</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    class Power_Supply</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">      # Generic Power Supply Name.  For example:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">      # *  GVDD</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">      # *  DVDD</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">      # *  TVDD</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">      # *  EVDD</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :generic</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      # The Actual Power Supply Name.  For example, GVDD could be the generic name and actual names can be G1VDD and G2VDD.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      # GVDD ==&gt; {G1VDD, G2VDD, G3VDD}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      # DVDD ==&gt; {D1VDD, D2VDD}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :actual</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      # Voltages for the power supply.  Needs to be supplied by a different source</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">      # Voltages is an array for all possible values for that power supply</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      # DVDD ==&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      #   * 1.8 V</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      #   * 3.3 V</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :voltages</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      # Display Name for the Voltage.  Will be in html/dita code</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      # G1VDD --&gt;  G1V&lt;sub&gt;DD&lt;/sub&gt;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :display_name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      # Input Display Name for the Voltage</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">      # G1VDD --&gt; G1V&lt;sub&gt;IN&lt;/sub&gt;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :input_display_name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">      # Output Displat Name for the Voltage</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      # G1VDD --&gt; G1V&lt;sub&gt;OUT&lt;/sub&gt;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :output_display_name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      # Initialize the variables</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(gen, act)</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="38">
          <span class="hits">20</span>
          
          <code class="ruby">        @generic = gen</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="39">
          <span class="hits">20</span>
          
          <code class="ruby">        @actual = act</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="40">
          <span class="hits">20</span>
          
          <code class="ruby">        @voltages = []</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="41">
          <span class="hits">20</span>
          
          <code class="ruby">        @display_name = &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="42">
          <span class="hits">20</span>
          
          <code class="ruby">        @input_display_name = &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="43">
          <span class="hits">20</span>
          
          <code class="ruby">        @output_display_name = &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="ade197bb8e0f0c2dff4fbd20f6162212e6c30159">
  <div class="header">
    <h3>lib/origen/specs/spec.rb</h3>
    <h4><span class="red">41.1 %</span> covered</h4>
    <div>
      <b>146</b> relevant lines. 
      <span class="green"><b>60</b> lines covered</span> and
      <span class="red"><b>86</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Specs</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    class Spec</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">      autoload :Note, &#39;origen/specs/note&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">      autoload :Exhibit, &#39;origen/specs/exhibit&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      include Checkers</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      extend Checkers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">      SpecAttribute = Struct.new(:name, :type, :required, :author, :description)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">      Limit = Struct.new(:exp) do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">        def value</code>
        </li>
      
        <li class="covered" data-hits="190" data-linenumber="13">
          <span class="hits">190</span>
          
          <code class="ruby">          Origen::Specs::Spec.send(:evaluate_limit, exp)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">      TYPES = Origen::Specs::SPEC_TYPES</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">      ATTRS = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">        ip_name:                    SpecAttribute.new(:ip_name, Symbol, true, :design, &#39;The parent IP object of the specification&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">        name:                       SpecAttribute.new(:name, Symbol, true, :design, &#39;Specification Name&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">        type:                       SpecAttribute.new(:type, Symbol, true, :design, &quot;Specification Type, acceptable values: #{TYPES}&quot;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">        sub_type:                   SpecAttribute.new(:sub_type, Symbol, true, :design, &#39;Specification sub-type (e.g. :max_operating_condition)&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">        mode:                       SpecAttribute.new(:mode, Symbol, true, :design, &#39;Specification mode, inherited from the owning parent object&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">        symbol:                     SpecAttribute.new(:symbol, String, false, :design, &#39;Specification symbol, can contain HTML&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">        description:                SpecAttribute.new(:description, String, false, :design, &#39;Specification description&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">        audience:                   SpecAttribute.new(:audience, Symbol, false, :design, &#39;Specification audience, acceptable values are :internal and :external&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">        min:                        SpecAttribute.new(:min, Limit, false, :design, &#39;Specification minimum limit. The limit expression is displayed, not a resolved value&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">        min_ovr:                    SpecAttribute.new(:min_ovr, Limit, false, :design, &#39;Specification minimum limit at SoC level.  The limit expression is displaye,d not a resolved value&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">        max:                        SpecAttribute.new(:max, Limit, false, :design, &#39;Specification maximum limit. The limit expression is displayed, not a resolved value&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">        max_ovr:                    SpecAttribute.new(:max_ovr, Limit, false, :design, &#39;Specification maximum limit at SoC level.  The limit expression is displaye,d not a resolved value&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">        typ:                        SpecAttribute.new(:typ, Limit, false, :design, &#39;Specification typical limit. The limit expression is displayed, not a resolved value&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">        typ_ovr:                    SpecAttribute.new(:typ_ovr, Limit, false, :design, &#39;Specification typical limit at SoC level.  The limit expression is displaye,d not a resolved value&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">        unit:                       SpecAttribute.new(:unit, String, false, :design, &#39;Specification unit of measure&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">        constraints:                SpecAttribute.new(:constraints, String, false, :design, &quot;Single logical expression or a CSV list of logical expressions required for the spec to be valid (e.g. &#39;GVDD == 1.2V&#39;&quot;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">        limit_type:                 SpecAttribute.new(:limit_type, Symbol, false, :design, &#39;Auto-generated attribute based on analysis of the spec limits. Acceptable values are :single_sided and :double_sided&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">        notes:                      SpecAttribute.new(:notes, Hash, false, :design, &#39;Specification notes&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">        hidespec:                   SpecAttribute.new(:hidespec, [String, Array], false, :design, &#39;Add the ability to hide specs based off license plate&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">        disposition_required:       SpecAttribute.new(:disposition_required, TrueClass, false, :pde, &#39;Boolean representation of whether a specification needs a disposition based on silicon results or customer input&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">        priority:                   SpecAttribute.new(:priority, TrueClass, false, :pde, &#39;Integer value (1-4) to indicate which priority the cz for this spec will be:  1. Highest priority, for critical or historically risky specs   2. Medium priority, relatively low risk. Not required until all priority 1 specs have been handled  3. Lowest priority, very low risk, low performance specs  4. No plans to characterize&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">        target:                     SpecAttribute.new(:target, String, false, :pde, &#39;Specification target limit.  Not used for pass/fail results but for data analysis&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">        guardband:                  SpecAttribute.new(:guardband, Limit, false, :pde, &#39;Specification guardband limit&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">        testable:                   SpecAttribute.new(:testable, TrueClass, false, :pde, &#39;Boolean representation of whether a specification is testable&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">        tested_at_probe:            SpecAttribute.new(:tested_at_probe, TrueClass, false, :pde, &#39;Boolean representation of whether a specification is tested at probe&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">        tested_at_ft_hot:           SpecAttribute.new(:tested_at_ft_hot, TrueClass, false, :pde, &#39;Boolean representation of whether a specification is tested at final test hot temperature&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">        tested_at_ft_ext_hot:       SpecAttribute.new(:tested_at_ft_ext_hot, TrueClass, false, :pde, &#39;Boolean representation of whether a specification is tested at final test extended hot temperature&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">        tested_at_ft_cold:          SpecAttribute.new(:tested_at_ft_cold, TrueClass, false, :pde, &#39;Boolean representation of whether a specification is tested at final test cold temperature&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">        tested_at_ft_ext_cold:      SpecAttribute.new(:tested_at_ft_ext_cold, TrueClass, false, :pde, &#39;Boolean representation of whether a specification is tested at final test extended cold temperature&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">        tested_at_ft_room:          SpecAttribute.new(:tested_at_ft_room, TrueClass, false, :pde, &#39;Boolean representation of whether a specification is tested at final test room temperature&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">        guaranteed_by_prod_test:    SpecAttribute.new(:guaranteed_by_prod_test, TrueClass, false, :pde, &#39;Boolean representation of whether a specification is guaranteed by production test&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">        guaranteed_by_proxy_test:   SpecAttribute.new(:guaranteed_by_proxy_test, TrueClass, false, :pde, &#39;Boolean representation of whether a specification is guaranteed by production test via a proxy test such as BIST&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">        guaranteed_by_construction: SpecAttribute.new(:guaranteed_by_construction, TrueClass, false, :pde, &#39;Boolean representation of whether a specification is guaranteed by physical construction, design documentation required&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">        guaranteed_by_simulation:   SpecAttribute.new(:guaranteed_by_simulation, TrueClass, false, :pde, &#39;Boolean representation of whether a specification is tested guaranteed by simulation, design documentation required&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">        cz_on_ate:                  SpecAttribute.new(:cz_on_ate, TrueClass, false, :pde, &#39;Boolean representation of whether a specification is characterized on ATE&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">        cz_ate_sample_size:         SpecAttribute.new(:cz_ate_sample_size, Integer, false, :pde, &#39;Integer number representing the sample size of the split used for customer Cpk calculation as tested on ATE&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">        cz_ate_cpk:                 SpecAttribute.new(:cz_ate_cpk, Float, false, :pde, &#39;Float number representing the customer or representative Cpk of the specification as tested on ATE&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">        cz_on_bench:                SpecAttribute.new(:cz_on_bench, TrueClass, false, :pde, &#39;Boolean representation of whether a specification is characterized on a bench setup&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">        cz_bench_sample_size:       SpecAttribute.new(:cz_bench_sample_size, Integer, false, :pde, &#39;Integer number representing the sample size of the split used for customer Cpk calculation on a bench setup&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">        cz_bench_cpk:               SpecAttribute.new(:cz_bench_cpk, Float, false, :pde, &#39;Float number representing the customer or representative Cpk of the specification as tested on a bench setup&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">        cz_on_system:               SpecAttribute.new(:cz_on_system, TrueClass, false, :pde, &#39;Boolean representation of whether a specification is characterized in a system setup&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">        cz_system_sample_size:      SpecAttribute.new(:cz_system_sample_size, Integer, false, :pde, &#39;Integer number representing the sample size of the split used for customer Cpk calculation in a system&#39;),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">        cz_system_cpk:              SpecAttribute.new(:cz_system_cpk, Float, false, :pde, &#39;Float number representing the customer or representative Cpk of the specification as tested in a system&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">      }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="65">
          <span class="hits">1</span>
          
          <code class="ruby">      ATTRS.each do |_id, spec_attr|</code>
        </li>
      
        <li class="covered" data-hits="43" data-linenumber="66">
          <span class="hits">43</span>
          
          <code class="ruby">        class_eval(&quot;def #{spec_attr.name}(param=nil); param.nil?  ? @#{spec_attr.name} : (@#{spec_attr.name} = param); end&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">      # There are at least three attributes needed to define a unique spec.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">      #   1) name (e.g. :vdd)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">      #   2) type (e.g. :dc)  Possible values are [:dc, :ac, :temperature]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">      #   3) mode (e.g. :global).  mode defaults to the current mode found for the parent object</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">      # A mode is defined as a device state that requires some sequence of actions to be enabled.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">      # A type is a classification moniker that exists without any stimulus required.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">      # Some specs require a fourth attribute sub_type to be uniquely defined.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">      # For example, a global device level VDD specification would require four attributes to be unique.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">      # Here is an example of two spec definitions for a VDD power supply</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">      #   name = :vdd, type: :dc, mode: :global, sub_type: typical_operating_conditions, typ = &quot;1.0V +/- 30mV&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">      #   name = :vdd, type: :dc, mode: :global, sub_type: maximum_operating_conditions, min = -0.3V, max = 1.8V</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">      # Whereas a typical DDR timing specification might only need three attributes to be unique</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">      #   name: :tddkhas, type: :ac, mode: ddr4dr2400, sub_type: nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="83">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(name, type, mode, owner_name, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="84">
          <span class="hits">11</span>
          
          <code class="ruby">        @name = name_audit(name)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="85">
          <span class="hits">11</span>
          
          <code class="ruby">        fail &#39;Specification names must be of types Symbol or String and cannot start with a number&#39; if @name.nil?</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="86">
          <span class="hits">11</span>
          
          <code class="ruby">        @type = type</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="87">
          <span class="hits">11</span>
          
          <code class="ruby">        @sub_type = nil # not necessary to be able to find a unique spec, but required for some specs</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="88">
          <span class="hits">11</span>
          
          <code class="ruby">        @mode = mode</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="89">
          <span class="hits">11</span>
          
          <code class="ruby">        @ip_name = owner_name</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="90">
          <span class="hits">11</span>
          
          <code class="ruby">        @symbol = nil # Meant to be populated with HTML representing the way the spec name should look in a document</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="91">
          <span class="hits">11</span>
          
          <code class="ruby">        @description = nil</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="92">
          <span class="hits">11</span>
          
          <code class="ruby">        @min, @typ, @max, @target = nil, nil, nil, nil</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="93">
          <span class="hits">11</span>
          
          <code class="ruby">        @min_ovr, @typ_ovr, @typ_ovr = nil, nil, nil</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="94">
          <span class="hits">11</span>
          
          <code class="ruby">        @audience = nil</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="95">
          <span class="hits">11</span>
          
          <code class="ruby">        @notes = {}</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="96">
          <span class="hits">11</span>
          
          <code class="ruby">        @exhibits = {}</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="97">
          <span class="hits">11</span>
          
          <code class="ruby">        @testable = nil</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="98">
          <span class="hits">11</span>
          
          <code class="ruby">        @guardband = nil</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="99">
          <span class="hits">11</span>
          
          <code class="ruby">        (block.arity &lt; 1 ? (instance_eval(&amp;block)) : block.call(self)) if block_given?</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="100">
          <span class="hits">11</span>
          
          <code class="ruby">        fail &quot;Spec type must be one of #{TYPES.join(&#39;, &#39;)}&quot; unless TYPES.include? type</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="101">
          <span class="hits">11</span>
          
          <code class="ruby">        @min = Limit.new(@min)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="102">
          <span class="hits">11</span>
          
          <code class="ruby">        @max = Limit.new(@max)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="103">
          <span class="hits">11</span>
          
          <code class="ruby">        @typ = Limit.new(@typ)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="104">
          <span class="hits">11</span>
          
          <code class="ruby">        @min_ovr = Limit.new(@min_ovr)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="105">
          <span class="hits">11</span>
          
          <code class="ruby">        @max_ovr = Limit.new(@max_ovr)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="106">
          <span class="hits">11</span>
          
          <code class="ruby">        @typ_ovr = Limit.new(@typ_ovr)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="107">
          <span class="hits">11</span>
          
          <code class="ruby">        @guardband = Limit.new(@guardband)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="108">
          <span class="hits">11</span>
          
          <code class="ruby">        fail &quot;Spec #{name} failed the limits audit!&quot; unless limits_ok?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="111">
          <span class="hits">1</span>
          
          <code class="ruby">      def inspect</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="112">
          <span class="hits">22</span>
          
          <code class="ruby">        $dut.send(:specs_to_table_string, [self])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">      rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="114">
          
          
          <code class="ruby">        super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">      # Returns the trace_matrix name.  The Trace Matrix Name is composed of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">      # * @name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">      # * @type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">      # * @subtype</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">      # * @mode</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="122">
          <span class="hits">1</span>
          
          <code class="ruby">      def trace_matrix_name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="123">
          
          
          <code class="ruby">        name_set = trace_matrix_name_choose</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="124">
          
          
          <code class="ruby">        ret_name = &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="125">
          
          
          <code class="ruby">        case name_set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">        when 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="127">
          
          
          <code class="ruby">          ret_name = &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">        when 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="129">
          
          
          <code class="ruby">          ret_name = &quot;#{@mode}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">        when 2</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="131">
          
          
          <code class="ruby">          ret_name = &quot;#{@sub_type}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">        when 3</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="133">
          
          
          <code class="ruby">          ret_name = &quot;#{@sub_type}_#{@mode}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby">        when 4</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="135">
          
          
          <code class="ruby">          ret_name = &quot;#{@type}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">        when 5</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="137">
          
          
          <code class="ruby">          ret_name = &quot;#{@type}_#{@mode}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">        when 6</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="139">
          
          
          <code class="ruby">          ret_name = &quot;#{@type}_#{@sub_type}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">        when 7</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="141">
          
          
          <code class="ruby">          ret_name = &quot;#{@type}_#{@sub_type}_#{@mode}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">        when 8</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="143">
          
          
          <code class="ruby">          ret_name = &quot;#{small_name}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">        when 9</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="145">
          
          
          <code class="ruby">          ret_name = &quot;#{small_name}_#{@mode}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">        when 10</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="147">
          
          
          <code class="ruby">          ret_name = &quot;#{small_name}_#{@sub_type}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">        when 11</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="149">
          
          
          <code class="ruby">          ret_name = &quot;#{small_name}_#{@sub_type}_#{@mode}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby">        when 12</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="151">
          
          
          <code class="ruby">          ret_name = &quot;#{small_name}_#{@type}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">        when 13</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="153">
          
          
          <code class="ruby">          ret_name = &quot;#{small_name}_#{@type}_#{@mode}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">        when 14</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="155">
          
          
          <code class="ruby">          ret_name = &quot;#{small_name}_#{@type}_#{@sub_type}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">        when 15</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="157">
          
          
          <code class="ruby">          ret_name = &quot;#{small_name}_#{@type}_#{@sub_type}_#{@mode}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="159">
          
          
          <code class="ruby">          ret_name = &#39;Bad trace matrix code&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="161">
          
          
          <code class="ruby">        ret_name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby">      # This will create the trace matrix name to be placed into a dita phrase element</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby">      # End goal will be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">      # {code:xml}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby">      #   &lt;ph audience=&quot;internal&quot;&gt;trace_matrix_name&lt;/ph&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">      # {code}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="169">
          <span class="hits">1</span>
          
          <code class="ruby">      def trace_matrix_name_to_dita</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="170">
          
          
          <code class="ruby">        tmp_doc = Nokogiri::XML(&#39;&lt;foo&gt;&lt;bar /&gt;&lt;/foo&gt;&#39;, nil, &#39;EUC-JP&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="172">
          
          
          <code class="ruby">        tmp_node = Nokogiri::XML::Node.new(&#39;lines&#39;, tmp_doc)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="173">
          
          
          <code class="ruby">        tmp_node1 = Nokogiri::XML::Node.new(&#39;i&#39;, tmp_doc)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="174">
          
          
          <code class="ruby">        tmp_node.set_attribute(&#39;audience&#39;, &#39;trace-matrix-id&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="175">
          
          
          <code class="ruby">        text_node1 = Nokogiri::XML::Text.new(&quot;[#{trace_matrix_name}]&quot;, tmp_node)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="176">
          
          
          <code class="ruby">        tmp_node1 &lt;&lt; text_node1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="177">
          
          
          <code class="ruby">        tmp_node &lt;&lt; tmp_node1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="178">
          
          
          <code class="ruby">        tmp_node.at_xpath(&#39;.&#39;).to_xml</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="181">
          <span class="hits">1</span>
          
          <code class="ruby">      def method_missing(method, *args, &amp;block)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="182">
          
          
          <code class="ruby">        ivar = &quot;@#{method.to_s.gsub(&#39;=&#39;, &#39;&#39;)}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="183">
          
          
          <code class="ruby">        ivar_sym = &quot;:#{ivar}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="184">
          
          
          <code class="ruby">        if method.to_s =~ /=$/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="185">
          
          
          <code class="ruby">          define_singleton_method(method) do |val|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="186">
          
          
          <code class="ruby">            instance_variable_set(ivar, val)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby">        elsif instance_variables.include? ivar_sym</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="189">
          
          
          <code class="ruby">          instance_variable_get(ivar)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="191">
          
          
          <code class="ruby">          define_singleton_method(method) do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="192">
          
          
          <code class="ruby">            instance_variable_get(ivar)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="195">
          
          
          <code class="ruby">        send(method, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="197">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby">      # Do a &#39;diff&#39; from the current spec (self) and the compare spec</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">      # Returns a hash with attribute as key and an array of the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">      # attribute values that differed</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="201">
          <span class="hits">1</span>
          
          <code class="ruby">      def diff(compare_spec)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="202">
          
          
          <code class="ruby">        diff_results = Hash.new do |h, k|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="203">
          
          
          <code class="ruby">          h[k] = []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby">        # Loop through self&#39;s isntance variables first</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="206">
          
          
          <code class="ruby">        instance_variables.each do |ivar|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="207">
          
          
          <code class="ruby">          ivar_sym = ivar.to_s.gsub(&#39;@&#39;, &#39;&#39;).to_sym</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="208">
          
          
          <code class="ruby">          next if ivar_sym == :notes # temporarily disable until notes diff method written</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="209">
          
          
          <code class="ruby">          ivar_str = ivar.to_s.gsub(&#39;@&#39;, &#39;&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="210">
          
          
          <code class="ruby">          if compare_spec.respond_to? ivar_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">            # Check if the instance variable is a Limit and if so then find</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">            # all instance_variables and diff them as well</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="213">
          
          
          <code class="ruby">            if instance_variable_get(ivar).class == Origen::Specs::Spec::Limit</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="214">
          
          
          <code class="ruby">              limit_diff_results = diff_limits(instance_variable_get(ivar), compare_spec.instance_variable_get(ivar))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="215">
          
          
          <code class="ruby">              # Extract the limit diff pairs and merge with updated keys with the diff_results hash</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="216">
          
          
          <code class="ruby">              limit_diff_results.each do |k, v|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="217">
          
          
          <code class="ruby">                limit_diff_key = &quot;#{ivar_str}_#{k}&quot;.to_sym</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="218">
          
          
          <code class="ruby">                diff_results[limit_diff_key] = v</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="221">
          
          
          <code class="ruby">              unless instance_variable_get(ivar) == compare_spec.instance_variable_get(ivar)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="222">
          
          
          <code class="ruby">                diff_results[ivar_sym] = [instance_variable_get(ivar), compare_spec.instance_variable_get(ivar)]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="223">
          
          
          <code class="ruby">                Origen.log.debug &quot;Found spec difference for instance variable #{ivar} for #{self} and #{compare_spec}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="226">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">            # The compare spec doesn&#39;t have the current instance variable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby">            # so log a difference</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="229">
          
          
          <code class="ruby">            if instance_variable_get(ivar).class == Origen::Specs::Spec::Limit</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="230">
          
          
          <code class="ruby">              limit_diff_results = diff_limits(instance_variable_get(ivar), compare_spec.instance_variable_get(ivar))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="231">
          
          
          <code class="ruby">              # Extract the limit diff pairs and merge with updated keys with the diff_results hash</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="232">
          
          
          <code class="ruby">              limit_diff_results.each do |k, v|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="233">
          
          
          <code class="ruby">                limit_diff_key = &quot;#{ivar_str}_#{k}&quot;.to_sym</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="234">
          
          
          <code class="ruby">                diff_results[limit_diff_key] = v</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="237">
          
          
          <code class="ruby">              Origen.log.debug &quot;Instance variable #{ivar} exists for #{self} and does not for #{compare_spec}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="238">
          
          
          <code class="ruby">              diff_results[ivar_sym] = [instance_variable_get(ivar), &#39;&#39;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="239">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="240">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby">        # Loop through unique instance variables for compare_spec</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="243">
          
          
          <code class="ruby">        diff_results</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby">      # Monkey patch of hash/array include? method needed because</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby">      # Origen::Specs#specs can return a single Spec instance or an Array of Specs</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="248">
          <span class="hits">1</span>
          
          <code class="ruby">      def include?(s)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="249">
          <span class="hits">1</span>
          
          <code class="ruby">        s == @name ? true : false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="251">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">      # Add a specification note</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="253">
          <span class="hits">1</span>
          
          <code class="ruby">      def add_note(id, options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="254">
          <span class="hits">1</span>
          
          <code class="ruby">        options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="255">
          
          
          <code class="ruby">          type: :spec</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">        }.update(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="257">
          
          
          <code class="ruby">        # Create the Note instance and add to the notes attribute</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="258">
          <span class="hits">1</span>
          
          <code class="ruby">        @notes[id] = Origen::Specs::Note.new(id, options[:type], options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby">      # Returns a Note object from the notes hash</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="262">
          <span class="hits">1</span>
          
          <code class="ruby">      def notes(id = nil)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="263">
          <span class="hits">3</span>
          
          <code class="ruby">        return nil if @notes.nil?</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="264">
          <span class="hits">3</span>
          
          <code class="ruby">        @notes.filter(id)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="266">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby">      # Returns the number of notes as an Integer</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="268">
          <span class="hits">1</span>
          
          <code class="ruby">      def note_count</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="269">
          
          
          <code class="ruby">        @notes.size</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="270">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="271">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="272">
          <span class="hits">1</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="273">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="274">
          <span class="hits">1</span>
          
          <code class="ruby">      def small_name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="275">
          
          
          <code class="ruby">        if @name.to_s[0..@ip_name.to_s.length].include? @ip_name.to_s</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="276">
          
          
          <code class="ruby">          ret_name = @name.to_s[@ip_name.to_s.length + 1..-1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="278">
          
          
          <code class="ruby">          ret_name = @name.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="279">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="280">
          
          
          <code class="ruby">        ret_name = ret_name.partition(&#39;-&#39;).last if ret_name.include? &#39;-&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="281">
          
          
          <code class="ruby">        ret_name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="283">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="284">
          
          
          <code class="ruby">      # This assumes the limit objects are Structs</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="285">
          <span class="hits">1</span>
          
          <code class="ruby">      def diff_limits(limit_one, limit_two = nil)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="286">
          
          
          <code class="ruby">        diff_results = Hash.new do |h, k|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="287">
          
          
          <code class="ruby">          h[k] = []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="289">
          
          
          <code class="ruby">        # Only need to loop through limit one ivars because the Limit class cannot</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">        # be changed in 3rd party files like the Spec class can be</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="291">
          
          
          <code class="ruby">        limit_one.members.each do |m|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="292">
          
          
          <code class="ruby">          if limit_two.respond_to? m</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="293">
          
          
          <code class="ruby">            unless limit_one.send(m) == limit_two.send(m)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="294">
          
          
          <code class="ruby">              diff_results[m] = [limit_one.send(m), limit_two.send(m)]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="295">
          
          
          <code class="ruby">              Origen.log.debug &quot;Found limit difference for member #{m} for #{limit_one} and #{limit_two}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="296">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="297">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby">            # Limit two doesn&#39;t have the current instance variable or was not provided</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby">            # as an argument so log a difference</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="300">
          
          
          <code class="ruby">            Origen.log.debug &quot;Member #{m} exists for #{limit_one} and does not for #{limit_two}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="301">
          
          
          <code class="ruby">            diff_results[m] = [limit_one.send(m), &#39;&#39;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="303">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="304">
          
          
          <code class="ruby">        diff_results</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="305">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="306">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="307">
          <span class="hits">1</span>
          
          <code class="ruby">      def trace_matrix_name_choose</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="308">
          
          
          <code class="ruby">        name_set = 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="309">
          
          
          <code class="ruby">        name_set = 8 unless @name.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="310">
          
          
          <code class="ruby">        name_set += 4 unless @type.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="311">
          
          
          <code class="ruby">        name_set += 2 unless @sub_type.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="312">
          
          
          <code class="ruby">        unless @mode.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="313">
          
          
          <code class="ruby">          unless  (@mode.to_s.include? &#39;local&#39;) || (@mode.to_s.include? &#39;global&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="314">
          
          
          <code class="ruby">            name_set += 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="315">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="316">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="317">
          
          
          <code class="ruby">        name_set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="318">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="320">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="321">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="69bd9065c0b7c0e9926054f44ac7624c31543aa5">
  <div class="header">
    <h3>lib/origen/specs/spec_features.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>18</b> relevant lines. 
      <span class="green"><b>18</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Specs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Ruby Data Class that contains Creation Information for the IP Block</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    class Spec_Features</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">      # This is the Id of the Feature that will be referenced</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">      # Future goal is to be able to tie this ID to a specification in a Product Requirements Document</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">      # Feature Type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      # Current supported types are</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">      #   intro :: Intro Paragraph for the Features Page</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      #   feature :: Main Feature (e.g. Additional peripherals include)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      #   subfeature :: Sub Feature that will be a sub-bullet to feature.  (e.g. Four I2C controllers)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      # Feature Reference</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      #  To be used for sub-feature so that they can be linked easily</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :feature_ref</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      # Applicable Devices for this feature.  This allows for multiple devices from one piece of silicon</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      #  If this feature is on Part B and Part D, then applicable devices will include Part B and Part D, but no other parts</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :applicable_devices</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      # The actual text of the feature</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :text</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">      # Internal comments about this feature.  Why was this feature included here?  Any changes from the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      # Product Requirements Document</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :internal_comments</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">      # Intended Audience for this feature. Internal or External?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :audience</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">      # Initialize the Feature to be used</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(id, attrs, applicable_devices, text, internal_comments)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="36">
          <span class="hits">10</span>
          
          <code class="ruby">        @id = id</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="37">
          <span class="hits">10</span>
          
          <code class="ruby">        @type = attrs[:type]</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="38">
          <span class="hits">10</span>
          
          <code class="ruby">        @feature_ref = attrs[:feature_ref]</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="39">
          <span class="hits">10</span>
          
          <code class="ruby">        @audience = attrs[:audience]</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="40">
          <span class="hits">10</span>
          
          <code class="ruby">        @applicable_devices = applicable_devices</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="41">
          <span class="hits">10</span>
          
          <code class="ruby">        @text = text</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="42">
          <span class="hits">10</span>
          
          <code class="ruby">        @internal_comments = internal_comments</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">    end # module Features</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">  end # module Specs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">end # module Origen</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="36ad9ef4e31ece70f513aa833136b85935bc8282">
  <div class="header">
    <h3>lib/origen/specs/version_history.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>8</b> relevant lines. 
      <span class="green"><b>8</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Specs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # This class is used to store spec exhibit information used to document IP</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    class Version_History</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :date, :author, :changes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(date, author, changes)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="8">
          <span class="hits">3</span>
          
          <code class="ruby">        @date = date</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="9">
          <span class="hits">3</span>
          
          <code class="ruby">        @author = author</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="10">
          <span class="hits">3</span>
          
          <code class="ruby">        @changes = changes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    end # class Version History</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">  end # module Specs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">end # module Origen</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="efa58c1e259647be7f3b51d719d6649dfbbea7bb">
  <div class="header">
    <h3>lib/origen/sub_blocks.rb</h3>
    <h4><span class="yellow">83.15 %</span> covered</h4>
    <div>
      <b>178</b> relevant lines. 
      <span class="green"><b>148</b> lines covered</span> and
      <span class="red"><b>30</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  module SubBlocks</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # This will be called whenever an object that includes this module</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # is instantiated</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    # @api private</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">    def init_sub_blocks(*args)</code>
        </li>
      
        <li class="covered" data-hits="1079" data-linenumber="8">
          <span class="hits">1079</span>
          
          <code class="ruby">      options = args.find { |a| a.is_a?(Hash) }</code>
        </li>
      
        <li class="covered" data-hits="776" data-linenumber="9">
          <span class="hits">776</span>
          
          <code class="ruby">      if options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">        # Using reg_base_address for storage to avoid class with the original Origen base</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">        # address API, but will accept any of these</code>
        </li>
      
        <li class="covered" data-hits="174" data-linenumber="12">
          <span class="hits">174</span>
          
          <code class="ruby">        @reg_base_address = options.delete(:reg_base_address) || options.delete(:reg_base_address) ||</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">                            options.delete(:base_address) || options.delete(:base) || 0</code>
        </li>
      
        <li class="covered" data-hits="174" data-linenumber="14">
          <span class="hits">174</span>
          
          <code class="ruby">        if options[:_instance]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="15">
          <span class="hits">6</span>
          
          <code class="ruby">          if @reg_base_address.is_a?(Array)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">            @reg_base_address = @reg_base_address[options[:_instance]]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">          elsif options[:base_address_step]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">            @reg_base_address = @reg_base_address + (options[:_instance] * options[:base_address_step])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="174" data-linenumber="21">
          <span class="hits">174</span>
          
          <code class="ruby">        @domain_names = [options.delete(:domain) || options.delete(:domains)].flatten.compact</code>
        </li>
      
        <li class="covered" data-hits="174" data-linenumber="22">
          <span class="hits">174</span>
          
          <code class="ruby">        @domain_specified = !@domain_names.empty?</code>
        </li>
      
        <li class="covered" data-hits="174" data-linenumber="23">
          <span class="hits">174</span>
          
          <code class="ruby">        @path = options.delete(:path)</code>
        </li>
      
        <li class="covered" data-hits="174" data-linenumber="24">
          <span class="hits">174</span>
          
          <code class="ruby">        @abs_path = options.delete(:abs_path) || options.delete(:absolute_path)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="776" data-linenumber="26">
          <span class="hits">776</span>
          
          <code class="ruby">      if is_a?(SubBlock)</code>
        </li>
      
        <li class="covered" data-hits="31" data-linenumber="27">
          <span class="hits">31</span>
          
          <code class="ruby">        options.each do |k, v|</code>
        </li>
      
        <li class="covered" data-hits="77" data-linenumber="28">
          <span class="hits">77</span>
          
          <code class="ruby">          send(&quot;#{k}=&quot;, v)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="33">
          <span class="hits">2</span>
          
          <code class="ruby">    module Domains</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="34">
          <span class="hits">2</span>
          
          <code class="ruby">      def domain(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="35">
          <span class="hits">32</span>
          
          <code class="ruby">        domains[name] = Origen::Registers::Domain.new(name, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="38">
          <span class="hits">2</span>
          
          <code class="ruby">      def domain_specified?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="39">
          
          
          <code class="ruby">        @domain_specified</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="42">
          <span class="hits">2</span>
          
          <code class="ruby">      def domains</code>
        </li>
      
        <li class="covered" data-hits="130" data-linenumber="43">
          <span class="hits">130</span>
          
          <code class="ruby">        @domains ||= {}.with_indifferent_access</code>
        </li>
      
        <li class="covered" data-hits="130" data-linenumber="44">
          <span class="hits">130</span>
          
          <code class="ruby">        if @domain_names</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="45">
          <span class="hits">17</span>
          
          <code class="ruby">          @domain_names.each do |domain|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="46">
          <span class="hits">6</span>
          
          <code class="ruby">            if domain.is_a?(Origen::Registers::Domain)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="47">
          
          
          <code class="ruby">              @domains[domain.id] = domain</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">            elsif parent.domains[domain]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="49">
          <span class="hits">6</span>
          
          <code class="ruby">              @domains[domain] = parent.domains[domain]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="51">
          
          
          <code class="ruby">              fail &quot;Uknown domain: #{domain}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="54">
          <span class="hits">17</span>
          
          <code class="ruby">          @domain_names = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="130" data-linenumber="56">
          <span class="hits">130</span>
          
          <code class="ruby">        if parent &amp;&amp; @domains.empty?</code>
        </li>
      
        <li class="covered" data-hits="43" data-linenumber="57">
          <span class="hits">43</span>
          
          <code class="ruby">          parent.domains</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="87" data-linenumber="59">
          <span class="hits">87</span>
          
          <code class="ruby">          @domains</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="62">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :register_domains, :domains</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="64">
          <span class="hits">2</span>
          
          <code class="ruby">    include Domains</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">    # Jumping through some hoops here since many Origen modules talk about an owner,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">    # but would prefer to start standardizing on parent in future, so this should give</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">    # most Origen models a parent method</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="69">
          <span class="hits">2</span>
          
          <code class="ruby">    module Parent</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="70">
          <span class="hits">2</span>
          
          <code class="ruby">      def parent</code>
        </li>
      
        <li class="covered" data-hits="2673" data-linenumber="71">
          <span class="hits">2673</span>
          
          <code class="ruby">        @owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="73">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :owner, :parent</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="75">
          <span class="hits">2</span>
          
          <code class="ruby">      unless method_defined? :owner=</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="76">
          <span class="hits">2</span>
          
          <code class="ruby">        def owner=(obj)</code>
        </li>
      
        <li class="covered" data-hits="199" data-linenumber="77">
          <span class="hits">199</span>
          
          <code class="ruby">          if obj.respond_to?(:controller) &amp;&amp; obj.controller</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="78">
          
          
          <code class="ruby">            @owner = obj.controller</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="199" data-linenumber="80">
          <span class="hits">199</span>
          
          <code class="ruby">            @owner = obj</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="84">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :parent=, :owner=</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="86">
          <span class="hits">2</span>
          
          <code class="ruby">    include Parent</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="88">
          <span class="hits">2</span>
          
          <code class="ruby">    module RegBaseAddress</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="89">
          <span class="hits">2</span>
          
          <code class="ruby">      def reg_base_address(options = {})</code>
        </li>
      
        <li class="covered" data-hits="135" data-linenumber="90">
          <span class="hits">135</span>
          
          <code class="ruby">        if options[:relative]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="91">
          
          
          <code class="ruby">          reg_base_address_for_domain(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="135" data-linenumber="93">
          <span class="hits">135</span>
          
          <code class="ruby">          total_reg_base_address = reg_base_address_for_domain(options)</code>
        </li>
      
        <li class="covered" data-hits="135" data-linenumber="94">
          <span class="hits">135</span>
          
          <code class="ruby">          if parent</code>
        </li>
      
        <li class="covered" data-hits="73" data-linenumber="95">
          <span class="hits">73</span>
          
          <code class="ruby">            total_reg_base_address += parent.reg_base_address(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="135" data-linenumber="97">
          <span class="hits">135</span>
          
          <code class="ruby">          total_reg_base_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="101">
          <span class="hits">2</span>
          
          <code class="ruby">      def reg_base_address_for_domain(options)</code>
        </li>
      
        <li class="covered" data-hits="135" data-linenumber="102">
          <span class="hits">135</span>
          
          <code class="ruby">        if @reg_base_address</code>
        </li>
      
        <li class="covered" data-hits="73" data-linenumber="103">
          <span class="hits">73</span>
          
          <code class="ruby">          if @reg_base_address.is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="104">
          <span class="hits">12</span>
          
          <code class="ruby">            if options[:domain]</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="105">
          <span class="hits">12</span>
          
          <code class="ruby">              if options[:domain].is_a?(Hash)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="106">
          <span class="hits">8</span>
          
          <code class="ruby">                domains = options[:domain].keys</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="108">
          <span class="hits">4</span>
          
          <code class="ruby">                domains = [options[:domain]].flatten</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="110">
          <span class="hits">12</span>
          
          <code class="ruby">              bases = domains.map do |d|</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="111">
          <span class="hits">12</span>
          
          <code class="ruby">                @reg_base_address.with_indifferent_access[d]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">              end.compact</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="113">
          <span class="hits">12</span>
          
          <code class="ruby">              if bases.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="114">
          
          
          <code class="ruby">                @reg_base_address[:default] || 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="116">
          <span class="hits">12</span>
          
          <code class="ruby">                if bases.size &gt; 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="117">
          
          
          <code class="ruby">                  fail &#39;Multiple base addresses found, specify the domain you want, e.g. reg.address(domain: :ahb)&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="119">
          <span class="hits">12</span>
          
          <code class="ruby">                  bases.first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="123">
          
          
          <code class="ruby">              @reg_base_address[:default] || 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="126">
          <span class="hits">61</span>
          
          <code class="ruby">            @reg_base_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="129">
          <span class="hits">62</span>
          
          <code class="ruby">          0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="133">
          <span class="hits">2</span>
          
          <code class="ruby">      unless method_defined? :base_address</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="134">
          <span class="hits">2</span>
          
          <code class="ruby">        def base_address</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="135">
          <span class="hits">15</span>
          
          <code class="ruby">          reg_base_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="139">
          <span class="hits">2</span>
          
          <code class="ruby">    include RegBaseAddress</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="141">
          <span class="hits">2</span>
          
          <code class="ruby">    module Path</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="142">
          <span class="hits">2</span>
          
          <code class="ruby">      def path=(val)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="143">
          
          
          <code class="ruby">        @path = val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="146">
          <span class="hits">2</span>
          
          <code class="ruby">      def path_var</code>
        </li>
      
        <li class="covered" data-hits="1840" data-linenumber="147">
          <span class="hits">1840</span>
          
          <code class="ruby">        @path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="150">
          <span class="hits">2</span>
          
          <code class="ruby">      def abs_path=(val)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="151">
          <span class="hits">1</span>
          
          <code class="ruby">        @abs_path = val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="153">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :full_path=, :abs_path=</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="155">
          <span class="hits">2</span>
          
          <code class="ruby">      def abs_path</code>
        </li>
      
        <li class="covered" data-hits="1805" data-linenumber="156">
          <span class="hits">1805</span>
          
          <code class="ruby">        @abs_path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="158">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :full_path, :abs_path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="160">
          <span class="hits">2</span>
          
          <code class="ruby">      def path(options = {})</code>
        </li>
      
        <li class="covered" data-hits="1806" data-linenumber="161">
          <span class="hits">1806</span>
          
          <code class="ruby">        return abs_path if abs_path</code>
        </li>
      
        <li class="covered" data-hits="1784" data-linenumber="162">
          <span class="hits">1784</span>
          
          <code class="ruby">        if is_a?(Origen::Registers::BitCollection)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">          # Special case where path relative to the register has been requested</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="164">
          <span class="hits">19</span>
          
          <code class="ruby">          if options[:relative_to] == parent</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="165">
          <span class="hits">1</span>
          
          <code class="ruby">            if size == 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="166">
          
          
          <code class="ruby">              return &quot;[#{position}]&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="168">
          <span class="hits">1</span>
          
          <code class="ruby">              return &quot;[#{position + size - 1}:#{position}]&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="171">
          <span class="hits">18</span>
          
          <code class="ruby">            p = parent.parent</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="1765" data-linenumber="174">
          <span class="hits">1765</span>
          
          <code class="ruby">          p = parent</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1783" data-linenumber="176">
          <span class="hits">1783</span>
          
          <code class="ruby">        if p &amp;&amp; p != options[:relative_to]</code>
        </li>
      
        <li class="covered" data-hits="805" data-linenumber="177">
          <span class="hits">805</span>
          
          <code class="ruby">          if p.path(options).empty?</code>
        </li>
      
        <li class="covered" data-hits="740" data-linenumber="178">
          <span class="hits">740</span>
          
          <code class="ruby">            root = &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="65" data-linenumber="180">
          <span class="hits">65</span>
          
          <code class="ruby">            root = &quot;#{p.path(options)}.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">          # If a path variable has been set on a top-level object, then we will</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby">          # include that in path, otherwise by default the top-level object is not</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">          # included in the path</code>
        </li>
      
        <li class="covered" data-hits="978" data-linenumber="186">
          <span class="hits">978</span>
          
          <code class="ruby">          if p || path_var</code>
        </li>
      
        <li class="covered" data-hits="85" data-linenumber="187">
          <span class="hits">85</span>
          
          <code class="ruby">            root = &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="893" data-linenumber="189">
          <span class="hits">893</span>
          
          <code class="ruby">            return &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="890" data-linenumber="192">
          <span class="hits">890</span>
          
          <code class="ruby">        local = (path_var || name || self.class.to_s.split(&#39;::&#39;).last).to_s</code>
        </li>
      
        <li class="covered" data-hits="890" data-linenumber="193">
          <span class="hits">890</span>
          
          <code class="ruby">        if local == &#39;hidden&#39;</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="194">
          <span class="hits">14</span>
          
          <code class="ruby">          root.chop</code>
        </li>
      
        <li class="covered" data-hits="876" data-linenumber="195">
          <span class="hits">876</span>
          
          <code class="ruby">        elsif is_a?(Origen::Registers::BitCollection) &amp;&amp; parent.path_var == :hidden</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="196">
          <span class="hits">2</span>
          
          <code class="ruby">          &quot;#{root.chop}#{local}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="197">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="874" data-linenumber="198">
          <span class="hits">874</span>
          
          <code class="ruby">          &quot;#{root}#{local}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="201">
          <span class="hits">2</span>
          
          <code class="ruby">      alias_method :hdl_path, :path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="203">
          <span class="hits">2</span>
          
          <code class="ruby">    include Path</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby">    # Returns a hash containing all immediate children of the given sub-block</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="206">
          <span class="hits">2</span>
          
          <code class="ruby">    def sub_blocks(*args)</code>
        </li>
      
        <li class="covered" data-hits="1025" data-linenumber="207">
          <span class="hits">1025</span>
          
          <code class="ruby">      if args.empty?</code>
        </li>
      
        <li class="covered" data-hits="1022" data-linenumber="208">
          <span class="hits">1022</span>
          
          <code class="ruby">        @sub_blocks ||= {}.with_indifferent_access</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="210">
          <span class="hits">3</span>
          
          <code class="ruby">        sub_block(*args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="213">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :children, :sub_blocks</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="215">
          
          
          <code class="ruby">    # Delete all sub_blocks by emptyig the Hash</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="216">
          <span class="hits">2</span>
          
          <code class="ruby">    def delete_sub_blocks</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="217">
          
          
          <code class="ruby">      @sub_blocks = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="220">
          <span class="hits">2</span>
          
          <code class="ruby">    def sub_blocks_array</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="221">
          
          
          <code class="ruby">      sub_blocks.map { |_name, sub_block| sub_block }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="223">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :children_array, :sub_blocks_array</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby">    # Returns an array containing all descendant child objects of the given sub-block, i.e. this returns</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="226">
          
          
          <code class="ruby">    # an array containing children&#39;s children as well</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby">    # Note that this returns an array instead of a hash since there could be naming collisions in the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby">    # hash keys</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="230">
          <span class="hits">2</span>
          
          <code class="ruby">    def all_sub_blocks</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="231">
          
          
          <code class="ruby">      @all_sub_blocks ||= begin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="232">
          
          
          <code class="ruby">        (sub_blocks_array + sub_blocks_array.map(&amp;:all_sub_blocks)).flatten</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="233">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">    # Returns true if the given sub block owns at least one register</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="237">
          <span class="hits">2</span>
          
          <code class="ruby">    def owns_registers?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="238">
          
          
          <code class="ruby">      if regs</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="239">
          
          
          <code class="ruby">        regs.is_a?(Origen::Registers::RegCollection) &amp;&amp; !regs.empty?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="240">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="241">
          
          
          <code class="ruby">        false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="245">
          <span class="hits">2</span>
          
          <code class="ruby">    def sub_block(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="171" data-linenumber="246">
          <span class="hits">171</span>
          
          <code class="ruby">      if i = options.delete(:instances)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="247">
          <span class="hits">3</span>
          
          <code class="ruby">        a = []</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="248">
          <span class="hits">3</span>
          
          <code class="ruby">        options[:_instance] = i</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="249">
          <span class="hits">3</span>
          
          <code class="ruby">        i.times do |j|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="250">
          <span class="hits">6</span>
          
          <code class="ruby">          o = options.dup</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="251">
          <span class="hits">6</span>
          
          <code class="ruby">          o[:_instance] = j</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="252">
          <span class="hits">6</span>
          
          <code class="ruby">          a &lt;&lt; sub_block(&quot;#{name}#{j}&quot;, o)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="254">
          <span class="hits">3</span>
          
          <code class="ruby">        define_singleton_method &quot;#{name}s&quot; do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="255">
          <span class="hits">1</span>
          
          <code class="ruby">          a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="257">
          <span class="hits">3</span>
          
          <code class="ruby">        a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="259">
          <span class="hits">168</span>
          
          <code class="ruby">        class_name = options.delete(:class_name)</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="260">
          <span class="hits">168</span>
          
          <code class="ruby">        if class_name</code>
        </li>
      
        <li class="covered" data-hits="137" data-linenumber="261">
          <span class="hits">137</span>
          
          <code class="ruby">          if eval(&quot;defined? ::#{namespace}::#{class_name}&quot;)</code>
        </li>
      
        <li class="covered" data-hits="137" data-linenumber="262">
          <span class="hits">137</span>
          
          <code class="ruby">            klass = eval(&quot;::#{namespace}::#{class_name}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="264">
          
          
          <code class="ruby">            if eval(&quot;defined? #{class_name}&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="265">
          
          
          <code class="ruby">              klass = eval(class_name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="266">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="267">
          
          
          <code class="ruby">              if eval(&quot;defined? #{self.class}::#{class_name}&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="268">
          
          
          <code class="ruby">                klass = eval(&quot;#{self.class}::#{class_name}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="269">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="270">
          
          
          <code class="ruby">                puts &quot;Could not find class: #{class_name}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="271">
          
          
          <code class="ruby">                fail &#39;Unknown sub block class!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="273">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="274">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="31" data-linenumber="276">
          <span class="hits">31</span>
          
          <code class="ruby">          klass = Origen::SubBlock</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="278">
          <span class="hits">168</span>
          
          <code class="ruby">        unless klass.respond_to?(:includes_origen_model)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="279">
          
          
          <code class="ruby">          puts &#39;Any class which is to be instantiated as a sub_block must include Origen::Model,&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="280">
          
          
          <code class="ruby">          puts &quot;add this to #{klass}:&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="281">
          
          
          <code class="ruby">          puts &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="282">
          
          
          <code class="ruby">          puts &#39;  include Origen::Model&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="283">
          
          
          <code class="ruby">          puts &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="284">
          
          
          <code class="ruby">          fail &#39;Sub block does not include Origen::Model!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="285">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="286">
          <span class="hits">168</span>
          
          <code class="ruby">        block = klass.new(options.merge(parent: self, name: name))</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="287">
          <span class="hits">168</span>
          
          <code class="ruby">        if sub_blocks[name]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="288">
          
          
          <code class="ruby">          fail &quot;You have already defined a sub-block named #{name} within class #{self.class}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="289">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="290">
          <span class="hits">168</span>
          
          <code class="ruby">          sub_blocks[name] = block</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="291">
          <span class="hits">168</span>
          
          <code class="ruby">          if respond_to?(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="292">
          
          
          <code class="ruby">            # puts &quot;Tried to create a sub-block named #{name} in #{self.class}, but it already has a method with this name!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="293">
          
          
          <code class="ruby">            # puts &quot;To avoid confusion rename one of them and try again!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="294">
          
          
          <code class="ruby">            # raise &quot;Non-unique sub-block name!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="295">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="164" data-linenumber="296">
          <span class="hits">164</span>
          
          <code class="ruby">            define_singleton_method name do</code>
        </li>
      
        <li class="covered" data-hits="638" data-linenumber="297">
          <span class="hits">638</span>
          
          <code class="ruby">              sub_blocks[name]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="300">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="301">
          <span class="hits">168</span>
          
          <code class="ruby">        block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="303">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="305">
          <span class="hits">2</span>
          
          <code class="ruby">    def namespace</code>
        </li>
      
        <li class="covered" data-hits="274" data-linenumber="306">
          <span class="hits">274</span>
          
          <code class="ruby">      self.class.to_s.sub(/::[^:]*$/, &#39;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="308">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="309">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">  # A simple class that will be instantiated by default when a sub block is</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="311">
          
          
          <code class="ruby">  # defined without another class name specified</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="313">
          
          
          <code class="ruby">  # This class includes support for registers, pins, etc.</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="314">
          <span class="hits">2</span>
          
          <code class="ruby">  class SubBlock</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="315">
          <span class="hits">2</span>
          
          <code class="ruby">    include Origen::Model</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="316">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="317">
          
          
          <code class="ruby">    # Used to create attribute accessors on the fly.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="318">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">    # On first call of a missing method a method is generated to avoid the missing lookup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="320">
          
          
          <code class="ruby">    # next time, this should be faster for repeated lookups of the same method, e.g. reg</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="321">
          <span class="hits">2</span>
          
          <code class="ruby">    def method_missing(method, *args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="41" data-linenumber="322">
          <span class="hits">41</span>
          
          <code class="ruby">      return regs(method) if self.has_reg?(method)</code>
        </li>
      
        <li class="covered" data-hits="41" data-linenumber="323">
          <span class="hits">41</span>
          
          <code class="ruby">      return ports(method) if self.has_port?(method)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="324">
          <span class="hits">18</span>
          
          <code class="ruby">      if method.to_s =~ /=$/</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="325">
          <span class="hits">16</span>
          
          <code class="ruby">        define_singleton_method(method) do |val|</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="326">
          <span class="hits">16</span>
          
          <code class="ruby">          instance_variable_set(&quot;@#{method.to_s.sub(&#39;=&#39;, &#39;&#39;)}&quot;, val)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="327">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="328">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="329">
          <span class="hits">2</span>
          
          <code class="ruby">        define_singleton_method(method) do</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="330">
          <span class="hits">2</span>
          
          <code class="ruby">          instance_variable_get(&quot;@#{method}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="331">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="332">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="333">
          <span class="hits">18</span>
          
          <code class="ruby">      send(method, *args, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="335">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="336">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="02441df4eab3218f402d2ef4f93da55f7b9f62d7">
  <div class="header">
    <h3>lib/origen/utility/block_args.rb</h3>
    <h4><span class="yellow">81.25 %</span> covered</h4>
    <div>
      <b>16</b> relevant lines. 
      <span class="green"><b>13</b> lines covered</span> and
      <span class="red"><b>3</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Utility</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # BlockArgs provides a neat way to pass multiple block arguments to a method</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # that the method can then used in various ways.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    # (blocks in Ruby are merely nameless methods you can pass to methods as an argument. Used to pass ruby code to a method basically.)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    # A single BlockArgs object is an array of these blocks that can be added or</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">    # deleted.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">    #   def handle_some_blocks(options={})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    #     blockA = Origen::Utility::BlockArgs.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">    #     blockB = Origen::Utility::BlockArgs.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">    #     yield blockA, blockB</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">    #     puts &quot;Handling blocks!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">    #     if options[:block_to_run] == :blockA</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">    #       blockA.each do |block|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">    #         block.call</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">    #       end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">    #     else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">    #       blockB.each do |block|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">    #         block.call</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">    #       end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">    #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">    #     puts &quot;Done handling blocks!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">    #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">    # To then use the above method:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">    #   handle_some_blocks(options) do |blockA, blockB|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">    #     blockA.add do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">    #       puts &quot;do task 1&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">    #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">    #     blockA.add do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">    #       puts &quot;do task 2&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">    #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">    #     blockB.add do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">    #       puts &quot;do task 3&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">    #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">    #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">    # Many blocks can be added in this case to either the blockA or blockB BlockArg objects.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">    # The only reason 2 BlockArg objects are used above is that handle_some_blocks wants to use</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">    # different blocks depending on an option argument.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">    # This is a very powerful way to put code specific to one application in a different method in</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">    # different class (e.g. handle_some_blocks) where the code calling it doesn&#39;t need to know</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">    # exact implementation details.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="56">
          <span class="hits">1</span>
          
          <code class="ruby">    class BlockArgs</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">      # any Enumerable methods also can be used</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">      # e.g. each_with_index</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="59">
          <span class="hits">1</span>
          
          <code class="ruby">      include Enumerable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">      # Creates a new BlockArgs object</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="62">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="63">
          <span class="hits">12</span>
          
          <code class="ruby">        @block_args = []</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">      # Adds a block to the BlockArgs object</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="67">
          <span class="hits">1</span>
          
          <code class="ruby">      def add(&amp;block)</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="68">
          <span class="hits">14</span>
          
          <code class="ruby">        @block_args &lt;&lt; block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">      # Deletes a block to the BlockArgs object</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="72">
          <span class="hits">1</span>
          
          <code class="ruby">      def delete(&amp;block)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="73">
          
          
          <code class="ruby">        @block_args.delete(block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">      # required to enumerate objects for Enumerable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">      # iterator returns each block at a time</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="78">
          <span class="hits">1</span>
          
          <code class="ruby">      def each</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="79">
          <span class="hits">18</span>
          
          <code class="ruby">        @block_args.each do |arg|</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="80">
          <span class="hits">22</span>
          
          <code class="ruby">          yield arg</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">      # same as each but returns index of each block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">      # instead of block itself.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="86">
          <span class="hits">1</span>
          
          <code class="ruby">      def each_index</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="87">
          
          
          <code class="ruby">        @block_args.each_index do |i|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="88">
          
          
          <code class="ruby">          yield i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="a08aa52bcb9a6b1af7ebc1dbeb703a4212022330">
  <div class="header">
    <h3>lib/origen/utility/diff.rb</h3>
    <h4><span class="yellow">86.59 %</span> covered</h4>
    <div>
      <b>82</b> relevant lines. 
      <span class="green"><b>71</b> lines covered</span> and
      <span class="red"><b>11</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Utility</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Diff provides an easy way to diff the contents of two files while optionally</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">    # ignoring any differences in file comments.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    #   differ = Origen::Utility::Diff.new(:ignore_blank_lines =&gt; true, :comment_char =&gt; &quot;//&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    #   differ.file_a = &quot;#{Origen.root}/my/file1.v&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">    #   differ.file_b = &quot;#{Origen.root}/my/file2.v&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">    #   if differ.diffs?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    #     puts &quot;You&#39;ve changed something!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    #   end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">    class Diff</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      # Full path to File A, this attribute must be set before calling any diff actions</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :file_a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      # Full path to File B, this attribute must be set before calling any diff actions</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :file_b</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      # When true the diff will ignore blank lines, or lines that contain only whitespace</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :ignore_blank_lines</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      # Set this attribute to the comment char used by the given file and comments will</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">      # be ignored by the diff.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      # An array of strings can be passed in to mask multiple comment identifiers.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_accessor :comment_char</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      # Create a new diff, attributes can be initialized via the options, or can be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">      # set later.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(options = {})</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="29">
          <span class="hits">57</span>
          
          <code class="ruby">        @file_a = options[:file_a]</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="30">
          <span class="hits">57</span>
          
          <code class="ruby">        @file_b = options[:file_b]</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="31">
          <span class="hits">57</span>
          
          <code class="ruby">        @ignore_blank_lines = options[:ignore_blank_lines]</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="32">
          <span class="hits">57</span>
          
          <code class="ruby">        @comment_char = options[:comment_char]</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="33">
          <span class="hits">57</span>
          
          <code class="ruby">        @suspend_string = options[:suspend_string] # permits suspending diff check based on a string</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="34">
          <span class="hits">57</span>
          
          <code class="ruby">        @resume_string  = options[:resume_string]  # permits resuming diff check based on a string</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="35">
          <span class="hits">57</span>
          
          <code class="ruby">        @suspend_diff = false</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="36">
          <span class="hits">57</span>
          
          <code class="ruby">        @resume_diff = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      # Returns true if there are differences between the two files based on the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      # current configuration</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">      def diffs?</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="42">
          <span class="hits">57</span>
          
          <code class="ruby">        initialize_counters</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="43">
          <span class="hits">57</span>
          
          <code class="ruby">        result = false</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="44">
          <span class="hits">57</span>
          
          <code class="ruby">        content_a = File.readlines(@file_a)</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="45">
          <span class="hits">57</span>
          
          <code class="ruby">        content_b = File.readlines(@file_b)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="47">
          <span class="hits">57</span>
          
          <code class="ruby">        changes = false</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="48">
          <span class="hits">57</span>
          
          <code class="ruby">        lines_remaining = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="50">
          <span class="hits">57</span>
          
          <code class="ruby">        while lines_remaining</code>
        </li>
      
        <li class="covered" data-hits="3189" data-linenumber="51">
          <span class="hits">3189</span>
          
          <code class="ruby">          a = get_next_line_a(content_a)   # Get the next vectors</code>
        </li>
      
        <li class="covered" data-hits="3189" data-linenumber="52">
          <span class="hits">3189</span>
          
          <code class="ruby">          b = get_next_line_b(content_b)</code>
        </li>
      
        <li class="covered" data-hits="3189" data-linenumber="53">
          <span class="hits">3189</span>
          
          <code class="ruby">          if !a &amp;&amp; !b       # If both patterns finished</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="54">
          <span class="hits">57</span>
          
          <code class="ruby">            lines_remaining = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">          elsif !a || !b    # If only 1 pattern finished</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="56">
          
          
          <code class="ruby">            lines_remaining = false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="57">
          
          
          <code class="ruby">            changes = true unless @suspend_diff     # There are extra vectors in one of the patterns</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">          elsif a != b      # If the vectors don&#39;t match</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="59">
          
          
          <code class="ruby">            changes = true unless @suspend_diff</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="3189" data-linenumber="61">
          <span class="hits">3189</span>
          
          <code class="ruby">          if @resume_diff # resume checking diffs for subsequent lines</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="62">
          
          
          <code class="ruby">            @suspend_diff = false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="63">
          
          
          <code class="ruby">            @resume_diff = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="67">
          <span class="hits">57</span>
          
          <code class="ruby">        changes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="70">
          <span class="hits">1</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="72">
          <span class="hits">1</span>
          
          <code class="ruby">      def set_suspend_diff(line)</code>
        </li>
      
        <li class="covered" data-hits="6264" data-linenumber="73">
          <span class="hits">6264</span>
          
          <code class="ruby">        if line.valid_encoding?</code>
        </li>
      
        <li class="covered" data-hits="6264" data-linenumber="74">
          <span class="hits">6264</span>
          
          <code class="ruby">          if @suspend_string &amp;&amp; !@suspend_diff</code>
        </li>
      
        <li class="covered" data-hits="6264" data-linenumber="75">
          <span class="hits">6264</span>
          
          <code class="ruby">            if line =~ /#{@suspend_string}/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="76">
          
          
          <code class="ruby">              @suspend_diff = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="78">
          
          
          <code class="ruby">          elsif @resume_string &amp;&amp; @suspend_diff</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="79">
          
          
          <code class="ruby">            if line =~ /#{@resume_string}/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="80">
          
          
          <code class="ruby">              @resume_diff = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="86">
          <span class="hits">1</span>
          
          <code class="ruby">      def get_next_line_b(array)</code>
        </li>
      
        <li class="covered" data-hits="3189" data-linenumber="87">
          <span class="hits">3189</span>
          
          <code class="ruby">        @b_ix = next_index(array, @b_ix)</code>
        </li>
      
        <li class="covered" data-hits="3189" data-linenumber="88">
          <span class="hits">3189</span>
          
          <code class="ruby">        get_line(array, @b_ix)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="91">
          <span class="hits">1</span>
          
          <code class="ruby">      def get_next_line_a(array)</code>
        </li>
      
        <li class="covered" data-hits="3189" data-linenumber="92">
          <span class="hits">3189</span>
          
          <code class="ruby">        @a_ix = next_index(array, @a_ix)</code>
        </li>
      
        <li class="covered" data-hits="3189" data-linenumber="93">
          <span class="hits">3189</span>
          
          <code class="ruby">        get_line(array, @a_ix)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">      # Fetches the line from the given array and does some pre-processing</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="97">
          <span class="hits">1</span>
          
          <code class="ruby">      def get_line(array, ix)</code>
        </li>
      
        <li class="covered" data-hits="6378" data-linenumber="98">
          <span class="hits">6378</span>
          
          <code class="ruby">        line = array[ix]</code>
        </li>
      
        <li class="covered" data-hits="6378" data-linenumber="99">
          <span class="hits">6378</span>
          
          <code class="ruby">        if line</code>
        </li>
      
        <li class="covered" data-hits="6264" data-linenumber="100">
          <span class="hits">6264</span>
          
          <code class="ruby">          set_suspend_diff(line)</code>
        </li>
      
        <li class="covered" data-hits="6264" data-linenumber="101">
          <span class="hits">6264</span>
          
          <code class="ruby">          if @comment_char</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">            # Screen off any inline comments at the end of line</code>
        </li>
      
        <li class="covered" data-hits="6236" data-linenumber="103">
          <span class="hits">6236</span>
          
          <code class="ruby">            begin</code>
        </li>
      
        <li class="covered" data-hits="6236" data-linenumber="104">
          <span class="hits">6236</span>
          
          <code class="ruby">              [@comment_char].flatten.each do |comchar|</code>
        </li>
      
        <li class="covered" data-hits="6236" data-linenumber="105">
          <span class="hits">6236</span>
          
          <code class="ruby">                unless line =~ /^\s*#{comchar}/</code>
        </li>
      
        <li class="covered" data-hits="6236" data-linenumber="106">
          <span class="hits">6236</span>
          
          <code class="ruby">                  if line =~ /(.*)\s*#{comchar}.*/</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="107">
          <span class="hits">2</span>
          
          <code class="ruby">                    return Regexp.last_match[1].strip</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">                  else</code>
        </li>
      
        <li class="covered" data-hits="6234" data-linenumber="109">
          <span class="hits">6234</span>
          
          <code class="ruby">                    return line.strip</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">            # This rescue is a crude way to guard against non-ASCII files that find</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">            # their way in here</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">          rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="116">
          
          
          <code class="ruby">            return line</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="119">
          <span class="hits">28</span>
          
          <code class="ruby">            line.strip</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">      # Find the next line in the given array and return the new index pointer</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="125">
          <span class="hits">1</span>
          
          <code class="ruby">      def next_index(array, ix = nil)</code>
        </li>
      
        <li class="covered" data-hits="6378" data-linenumber="126">
          <span class="hits">6378</span>
          
          <code class="ruby">        ix = ix ? ix + 1 : 0</code>
        </li>
      
        <li class="covered" data-hits="6378" data-linenumber="127">
          <span class="hits">6378</span>
          
          <code class="ruby">        matched = false</code>
        </li>
      
        <li class="covered" data-hits="6378" data-linenumber="128">
          <span class="hits">6378</span>
          
          <code class="ruby">        while !matched &amp;&amp; ix &lt; array.size</code>
        </li>
      
        <li class="covered" data-hits="9911" data-linenumber="129">
          <span class="hits">9911</span>
          
          <code class="ruby">          begin</code>
        </li>
      
        <li class="covered" data-hits="9911" data-linenumber="130">
          <span class="hits">9911</span>
          
          <code class="ruby">            comment_matched = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">            # Skip comment lines</code>
        </li>
      
        <li class="covered" data-hits="9911" data-linenumber="132">
          <span class="hits">9911</span>
          
          <code class="ruby">            if @comment_char</code>
        </li>
      
        <li class="covered" data-hits="9879" data-linenumber="133">
          <span class="hits">9879</span>
          
          <code class="ruby">              [@comment_char].flatten.each do |char|</code>
        </li>
      
        <li class="covered" data-hits="10853" data-linenumber="134">
          <span class="hits">10853</span>
          
          <code class="ruby">                if array[ix] =~ /^\s*#{char}.*/</code>
        </li>
      
        <li class="covered" data-hits="3495" data-linenumber="135">
          <span class="hits">3495</span>
          
          <code class="ruby">                  comment_matched = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">            # Skip blank lines</code>
        </li>
      
        <li class="covered" data-hits="9911" data-linenumber="140">
          <span class="hits">9911</span>
          
          <code class="ruby">            if comment_matched</code>
        </li>
      
        <li class="covered" data-hits="3495" data-linenumber="141">
          <span class="hits">3495</span>
          
          <code class="ruby">              ix += 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">            elsif @ignore_blank_lines &amp;&amp; array[ix] =~ /^\s*$/</code>
        </li>
      
        <li class="covered" data-hits="152" data-linenumber="143">
          <span class="hits">152</span>
          
          <code class="ruby">              ix += 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="6264" data-linenumber="145">
          <span class="hits">6264</span>
          
          <code class="ruby">              matched = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">        # This rescue is a crude way to guard against non-ASCII files that find</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">        # there way in here</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby">        rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="150">
          
          
          <code class="ruby">          matched = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="6378" data-linenumber="153">
          <span class="hits">6378</span>
          
          <code class="ruby">        ix</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="156">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize_counters</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="157">
          <span class="hits">57</span>
          
          <code class="ruby">        @a_ix = nil</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="158">
          <span class="hits">57</span>
          
          <code class="ruby">        @b_ix = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="161">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="78c4dc281a1a1c0a5e4260ffdab85d1304401c6b">
  <div class="header">
    <h3>lib/origen/version_string.rb</h3>
    <h4><span class="yellow">84.27 %</span> covered</h4>
    <div>
      <b>178</b> relevant lines. 
      <span class="green"><b>150</b> lines covered</span> and
      <span class="red"><b>28</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">module Origen</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">  class VersionString &lt; String</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">    include Utility::TimeAndDate</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">    require &#39;date&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    # returns version number string but strips out prefix</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">    def initialize(version, prefix = &#39;v&#39;)</code>
        </li>
      
        <li class="covered" data-hits="247" data-linenumber="8">
          <span class="hits">247</span>
          
          <code class="ruby">      version.gsub!(/^#{prefix}/, &#39;&#39;)  # remove leading prefix</code>
        </li>
      
        <li class="covered" data-hits="247" data-linenumber="9">
          <span class="hits">247</span>
          
          <code class="ruby">      super(version)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    # Returns a new production timestamp version string</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="13">
          <span class="hits">2</span>
          
          <code class="ruby">    def self.production_timestamp</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="14">
          
          
          <code class="ruby">      VersionString.new(&quot;Rel#{time_now(format: :universal, include_time: false)}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">    # Returns a new development timestamp version string</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">    def self.development_timestamp</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="19">
          
          
          <code class="ruby">      VersionString.new(&quot;#{User.current.initials}_#{time_now(format: :universal, underscore: true)}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">    # Returns true if the version is a production tag</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="23">
          <span class="hits">2</span>
          
          <code class="ruby">    def production?</code>
        </li>
      
        <li class="covered" data-hits="298" data-linenumber="24">
          <span class="hits">298</span>
          
          <code class="ruby">      !!(self =~ /^v?\d+\.\d+\.\d+$/ || self =~ /^Rel\d+$/)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">    # Returns true if the version is a development tag</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="28">
          <span class="hits">2</span>
          
          <code class="ruby">    def development?</code>
        </li>
      
        <li class="covered" data-hits="176" data-linenumber="29">
          <span class="hits">176</span>
          
          <code class="ruby">      !production?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="32">
          <span class="hits">2</span>
          
          <code class="ruby">    def less_than?(version)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="33">
          
          
          <code class="ruby">      condition_met?(&quot;&lt; #{version}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="35">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :lt?, :less_than?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="37">
          <span class="hits">2</span>
          
          <code class="ruby">    def less_than_or_equal_to?(version)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="38">
          
          
          <code class="ruby">      condition_met?(&quot;&lt;= #{version}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="40">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :lte?, :less_than_or_equal_to?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="42">
          <span class="hits">2</span>
          
          <code class="ruby">    def greater_than?(version)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="43">
          
          
          <code class="ruby">      condition_met?(&quot;&gt; #{version}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="45">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :gt?, :greater_than?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="47">
          <span class="hits">2</span>
          
          <code class="ruby">    def greater_than_or_equal_to?(version)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="48">
          
          
          <code class="ruby">      condition_met?(&quot;&gt;= #{version}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="50">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :gte?, :greater_than_or_equal_to?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">    # Returns true if the version is a correctly formatted semantic</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">    # or timestamp version number</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="54">
          <span class="hits">2</span>
          
          <code class="ruby">    def valid?(_options = {})</code>
        </li>
      
        <li class="covered" data-hits="122" data-linenumber="55">
          <span class="hits">122</span>
          
          <code class="ruby">      latest? || semantic? || timestamp?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">    # Returns true if the version is a semantic format version number</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="59">
          <span class="hits">2</span>
          
          <code class="ruby">    def semantic?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">      !!(self =~ /^v?\d+\.\d+\.\d+$/ ||</code>
        </li>
      
        <li class="covered" data-hits="359" data-linenumber="61">
          <span class="hits">359</span>
          
          <code class="ruby">         self =~ /^v?\d+\.\d+\.\d+\.(dev|pre)\d+$/</code>
        </li>
      
        <li class="covered" data-hits="359" data-linenumber="62">
          <span class="hits">359</span>
          
          <code class="ruby">        )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="65">
          <span class="hits">2</span>
          
          <code class="ruby">    def next_dev(type = :minor)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="66">
          <span class="hits">9</span>
          
          <code class="ruby">      if semantic?</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="67">
          <span class="hits">9</span>
          
          <code class="ruby">        if pre</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="68">
          <span class="hits">6</span>
          
          <code class="ruby">          if self =~ /dev/</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="69">
          <span class="hits">3</span>
          
          <code class="ruby">            VersionString.new(&quot;#{major}.#{minor + 1}.0.pre#{pre + 1}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="71">
          <span class="hits">3</span>
          
          <code class="ruby">            VersionString.new(&quot;#{major}.#{minor}.#{tiny}.pre#{pre + 1}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="74">
          <span class="hits">3</span>
          
          <code class="ruby">          case type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">          when :major</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="76">
          <span class="hits">1</span>
          
          <code class="ruby">            VersionString.new(&quot;#{major + 1}.0.0.pre0&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">          when :minor, :development</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="78">
          <span class="hits">1</span>
          
          <code class="ruby">            VersionString.new(&quot;#{major}.#{minor + 1}.0.pre0&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">          when :tiny, :bugfix</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="80">
          <span class="hits">1</span>
          
          <code class="ruby">            VersionString.new(&quot;#{major}.#{minor}.#{tiny + 1}.pre0&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="82">
          
          
          <code class="ruby">            fail &quot;Unknown version counter type &#39;#{type}&#39;, must be :major, :minor or :tiny&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="86">
          
          
          <code class="ruby">        VersionString.new(&quot;#{User.current.initials}_#{time_now(format: :universal, underscore: true)}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="90">
          <span class="hits">2</span>
          
          <code class="ruby">    def next_prod(type = :minor)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="91">
          <span class="hits">9</span>
          
          <code class="ruby">      if semantic?</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="92">
          <span class="hits">9</span>
          
          <code class="ruby">        if pre</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="93">
          <span class="hits">6</span>
          
          <code class="ruby">          if self =~ /dev/</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="94">
          <span class="hits">3</span>
          
          <code class="ruby">            case type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">            when :major</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="96">
          <span class="hits">1</span>
          
          <code class="ruby">              VersionString.new(&quot;#{major + 1}.0.0&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">            when :minor, :production</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="98">
          <span class="hits">1</span>
          
          <code class="ruby">              VersionString.new(&quot;#{major}.#{minor + 1}.0&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">            when :tiny, :bugfix</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="100">
          <span class="hits">1</span>
          
          <code class="ruby">              VersionString.new(&quot;#{major}.#{minor}.#{tiny + 1}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="102">
          
          
          <code class="ruby">              fail &quot;Unknown version counter type &#39;#{type}&#39;, must be :major, :minor or :tiny&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="105">
          <span class="hits">3</span>
          
          <code class="ruby">            VersionString.new(&quot;#{major}.#{minor}.#{tiny}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="108">
          <span class="hits">3</span>
          
          <code class="ruby">          case type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">          when :major</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="110">
          <span class="hits">1</span>
          
          <code class="ruby">            VersionString.new(&quot;#{major + 1}.0.0&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">          when :minor, :production</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="112">
          <span class="hits">1</span>
          
          <code class="ruby">            VersionString.new(&quot;#{major}.#{minor + 1}.0&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">          when :tiny, :bugfix</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="114">
          <span class="hits">1</span>
          
          <code class="ruby">            VersionString.new(&quot;#{major}.#{minor}.#{tiny + 1}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="116">
          
          
          <code class="ruby">            fail &quot;Unknown version counter type &#39;#{type}&#39;, must be :major, :minor or :tiny&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="120">
          
          
          <code class="ruby">        VersionString.new(&quot;Rel#{time_now(format: :universal, include_time: false)}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="124">
          <span class="hits">2</span>
          
          <code class="ruby">    def major</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">      @major ||= begin</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="126">
          <span class="hits">21</span>
          
          <code class="ruby">        if semantic?</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="127">
          <span class="hits">21</span>
          
          <code class="ruby">          self =~ /v?(\d+)/</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="128">
          <span class="hits">21</span>
          
          <code class="ruby">          Regexp.last_match[1].to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="130">
          
          
          <code class="ruby">          fail &quot;#{self} is not a valid semantic version number!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="132">
          <span class="hits">21</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="135">
          <span class="hits">2</span>
          
          <code class="ruby">    def minor</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">      @minor ||= begin</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="137">
          <span class="hits">18</span>
          
          <code class="ruby">        if semantic?</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="138">
          <span class="hits">18</span>
          
          <code class="ruby">          self =~ /v?\d+.(\d+)/</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="139">
          <span class="hits">18</span>
          
          <code class="ruby">          Regexp.last_match[1].to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="141">
          
          
          <code class="ruby">          fail &quot;#{self} is not a valid semantic version number!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="143">
          <span class="hits">18</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="146">
          <span class="hits">2</span>
          
          <code class="ruby">    def bugfix</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">      @bugfix ||= begin</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="148">
          <span class="hits">12</span>
          
          <code class="ruby">        if semantic?</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="149">
          <span class="hits">12</span>
          
          <code class="ruby">          self =~ /v?\d+.\d+.(\d+)/</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="150">
          <span class="hits">12</span>
          
          <code class="ruby">          Regexp.last_match[1].to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="152">
          
          
          <code class="ruby">          fail &quot;#{self} is not a valid semantic version number!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="154">
          <span class="hits">12</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="156">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :tiny, :bugfix</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="158">
          <span class="hits">2</span>
          
          <code class="ruby">    def pre</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">      @pre ||= begin</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="160">
          <span class="hits">21</span>
          
          <code class="ruby">        if semantic?</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="161">
          <span class="hits">21</span>
          
          <code class="ruby">          if self =~ /(dev|pre)(\d+)$/</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="162">
          <span class="hits">13</span>
          
          <code class="ruby">            Regexp.last_match[2].to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="165">
          
          
          <code class="ruby">          fail &quot;#{self} is not a valid semantic version number!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="167">
          <span class="hits">28</span>
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="169">
          <span class="hits">2</span>
          
          <code class="ruby">    alias_method :dev, :pre</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="171">
          <span class="hits">2</span>
          
          <code class="ruby">    def latest?</code>
        </li>
      
        <li class="covered" data-hits="462" data-linenumber="172">
          <span class="hits">462</span>
          
          <code class="ruby">      downcase == &#39;trunk&#39; || downcase == &#39;latest&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">    # Returns true if the version is a timestamp format version number</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="176">
          <span class="hits">2</span>
          
          <code class="ruby">    def timestamp?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby">      !!(self =~ /^Rel\d\d\d\d\d\d\d\d$/ ||</code>
        </li>
      
        <li class="covered" data-hits="279" data-linenumber="178">
          <span class="hits">279</span>
          
          <code class="ruby">         self =~ /^\w\w\w?_\d\d\d\d_\d\d_\d\d_\d\d_\d\d$/)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby">    # Returns true if the version fulfills the supplied condition.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">    # Example conditions:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby">    #   &quot;v2.1.3&quot;      # must equal the given version</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">    #   &quot;= v2.1.3&quot;    # alias for the above</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">    #   &quot;&gt; v2.1.3&quot;    # must be greater than the given version</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">    #   &quot;&gt;= v2.1.3&quot;   # must be greater than or equal to the given version</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby">    #   &quot;&lt; v2.1.3&quot;    # must be less than the given version</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">    #   &quot;&lt;= v2.1.3&quot;   # must be less than or equal to the given version</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby">    #   &quot;production&quot;  # must be a production tag</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="191">
          <span class="hits">2</span>
          
          <code class="ruby">    def condition_met?(condition)</code>
        </li>
      
        <li class="covered" data-hits="128" data-linenumber="192">
          <span class="hits">128</span>
          
          <code class="ruby">      condition = condition.to_s.strip</code>
        </li>
      
        <li class="covered" data-hits="128" data-linenumber="193">
          <span class="hits">128</span>
          
          <code class="ruby">      if condition == &#39;prod&#39; || condition == &#39;production&#39;</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="194">
          <span class="hits">18</span>
          
          <code class="ruby">        production?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="110" data-linenumber="196">
          <span class="hits">110</span>
          
          <code class="ruby">      elsif condition =~ /^&gt;=\s*(.*)/</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="197">
          <span class="hits">6</span>
          
          <code class="ruby">        tag = validate_condition!(condition, Regexp.last_match[1])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby">        # Force false in the case where a production and development</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">        # timestamp fall on the same date. Since the production tag</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">        # does not contain time information it is impossible to say</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby">        # which one is greater</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="202">
          <span class="hits">6</span>
          
          <code class="ruby">        if production? != tag.production? &amp;&amp; timestamp? &amp;&amp;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby">           to_date == tag.to_date</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="204">
          <span class="hits">1</span>
          
          <code class="ruby">          false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="206">
          <span class="hits">5</span>
          
          <code class="ruby">          numeric &gt;= tag.numeric &amp;&amp; ((self.latest? || tag.latest?) || self.timestamp? == tag.timestamp?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="208">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="104" data-linenumber="209">
          <span class="hits">104</span>
          
          <code class="ruby">      elsif condition =~ /^&gt;\s*(.*)/</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="210">
          <span class="hits">40</span>
          
          <code class="ruby">        tag = validate_condition!(condition, Regexp.last_match[1])</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="211">
          <span class="hits">40</span>
          
          <code class="ruby">        if production? != tag.production? &amp;&amp; timestamp? &amp;&amp;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">           to_date == tag.to_date</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="213">
          <span class="hits">1</span>
          
          <code class="ruby">          false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="215">
          <span class="hits">39</span>
          
          <code class="ruby">          numeric &gt; tag.numeric &amp;&amp; ((self.latest? || tag.latest?) || self.timestamp? == tag.timestamp?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="216">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="218">
          <span class="hits">64</span>
          
          <code class="ruby">      elsif condition =~ /^&lt;=\s*(.*)/</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="219">
          <span class="hits">6</span>
          
          <code class="ruby">        tag = validate_condition!(condition, Regexp.last_match[1])</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="220">
          <span class="hits">6</span>
          
          <code class="ruby">        numeric &lt;= tag.numeric &amp;&amp; ((self.latest? || tag.latest?) || self.timestamp? == tag.timestamp?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="58" data-linenumber="222">
          <span class="hits">58</span>
          
          <code class="ruby">      elsif condition =~ /^&lt;\s*(.*)/</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="223">
          <span class="hits">36</span>
          
          <code class="ruby">        tag = validate_condition!(condition, Regexp.last_match[1])</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="224">
          <span class="hits">36</span>
          
          <code class="ruby">        numeric &lt; tag.numeric &amp;&amp; ((self.latest? || tag.latest?) || self.timestamp? == tag.timestamp?)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="226">
          <span class="hits">22</span>
          
          <code class="ruby">      elsif condition =~ /^==?\s*(.*)/</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="227">
          <span class="hits">6</span>
          
          <code class="ruby">        tag = validate_condition!(condition, Regexp.last_match[1])</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="228">
          <span class="hits">6</span>
          
          <code class="ruby">        self == tag</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="231">
          <span class="hits">16</span>
          
          <code class="ruby">        tag = validate_condition!(condition, condition)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="232">
          <span class="hits">16</span>
          
          <code class="ruby">        self == tag</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="233">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">    # Returns a numeric representation of the version, this can be used</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby">    # for chronological comparison with other versions</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="238">
          <span class="hits">2</span>
          
          <code class="ruby">    def numeric</code>
        </li>
      
        <li class="covered" data-hits="172" data-linenumber="239">
          <span class="hits">172</span>
          
          <code class="ruby">      if latest?</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="240">
          <span class="hits">16</span>
          
          <code class="ruby">        1_000_000_000_000_000_000_000_000_000</code>
        </li>
      
        <li class="covered" data-hits="156" data-linenumber="241">
          <span class="hits">156</span>
          
          <code class="ruby">      elsif semantic?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby">        # This assumes each counter will never go &gt; 1000</code>
        </li>
      
        <li class="covered" data-hits="88" data-linenumber="243">
          <span class="hits">88</span>
          
          <code class="ruby">        if development?</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="244">
          <span class="hits">8</span>
          
          <code class="ruby">          self =~ /v?(\d+).(\d+).(\d+).(dev|pre)(\d+)/</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="245">
          <span class="hits">8</span>
          
          <code class="ruby">          (Regexp.last_match[1].to_i * 1000 * 1000 * 1000) +</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="246">
          <span class="hits">8</span>
          
          <code class="ruby">            (Regexp.last_match[2].to_i * 1000 * 1000) +</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="247">
          <span class="hits">8</span>
          
          <code class="ruby">            (Regexp.last_match[3].to_i * 1000) +</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="248">
          <span class="hits">8</span>
          
          <code class="ruby">            Regexp.last_match[5].to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="250">
          <span class="hits">80</span>
          
          <code class="ruby">          self =~ /v?(\d+).(\d+).(\d+)/</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="251">
          <span class="hits">80</span>
          
          <code class="ruby">          (Regexp.last_match[1].to_i * 1000 * 1000 * 1000) +</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="252">
          <span class="hits">80</span>
          
          <code class="ruby">            (Regexp.last_match[2].to_i * 1000 * 1000) +</code>
        </li>
      
        <li class="covered" data-hits="160" data-linenumber="253">
          <span class="hits">160</span>
          
          <code class="ruby">            (Regexp.last_match[3].to_i * 1000)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="254">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="68" data-linenumber="255">
          <span class="hits">68</span>
          
          <code class="ruby">      elsif timestamp?</code>
        </li>
      
        <li class="covered" data-hits="68" data-linenumber="256">
          <span class="hits">68</span>
          
          <code class="ruby">        to_time.to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="257">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="258">
          
          
          <code class="ruby">        validate!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="262">
          
          
          <code class="ruby">    # Returns the version as a time, only applicable for timestamps,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby">    # otherwise an error will be raised</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="264">
          <span class="hits">2</span>
          
          <code class="ruby">    def to_time</code>
        </li>
      
        <li class="covered" data-hits="76" data-linenumber="265">
          <span class="hits">76</span>
          
          <code class="ruby">      if latest?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="266">
          
          
          <code class="ruby">        Time.new(10_000, 1, 1)</code>
        </li>
      
        <li class="covered" data-hits="76" data-linenumber="267">
          <span class="hits">76</span>
          
          <code class="ruby">      elsif timestamp?</code>
        </li>
      
        <li class="covered" data-hits="76" data-linenumber="268">
          <span class="hits">76</span>
          
          <code class="ruby">        if development?</code>
        </li>
      
        <li class="covered" data-hits="66" data-linenumber="269">
          <span class="hits">66</span>
          
          <code class="ruby">          self =~ /\w+_(\d\d\d\d)_(\d\d)_(\d\d)_(\d\d)_(\d\d)$/</code>
        </li>
      
        <li class="covered" data-hits="66" data-linenumber="270">
          <span class="hits">66</span>
          
          <code class="ruby">          Time.new(Regexp.last_match[1], Regexp.last_match[2], Regexp.last_match[3], Regexp.last_match[4], Regexp.last_match[5])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="271">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="272">
          <span class="hits">10</span>
          
          <code class="ruby">          self =~ /Rel(\d\d\d\d)(\d\d)(\d\d)/</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="273">
          <span class="hits">10</span>
          
          <code class="ruby">          Time.new(Regexp.last_match[1], Regexp.last_match[2], Regexp.last_match[3])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="274">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="276">
          
          
          <code class="ruby">        fail &quot;Version tag #{self} cannot be converted to a time!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="279">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="280">
          
          
          <code class="ruby">    # Returns the version as a date, only applicable for timestamps,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby">    # otherwise an error will be raised</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="282">
          <span class="hits">2</span>
          
          <code class="ruby">    def to_date</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="283">
          <span class="hits">8</span>
          
          <code class="ruby">      if latest?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="284">
          
          
          <code class="ruby">        Date.new(10_000, 1, 1)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="285">
          <span class="hits">8</span>
          
          <code class="ruby">      elsif timestamp?</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="286">
          <span class="hits">8</span>
          
          <code class="ruby">        to_time.to_date</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="287">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="288">
          
          
          <code class="ruby">        fail &quot;Version tag #{self} cannot be converted to a date!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="289">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="291">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="292">
          
          
          <code class="ruby">    # Validates the given condition and the extracted tag, returns the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="293">
          
          
          <code class="ruby">    # tag wrapped in a VersionString if valid, will raise an error if</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="294">
          
          
          <code class="ruby">    # not</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="295">
          <span class="hits">2</span>
          
          <code class="ruby">    def validate_condition!(condition, tag)</code>
        </li>
      
        <li class="covered" data-hits="110" data-linenumber="296">
          <span class="hits">110</span>
          
          <code class="ruby">      tag = VersionString.new(tag)</code>
        </li>
      
        <li class="covered" data-hits="110" data-linenumber="297">
          <span class="hits">110</span>
          
          <code class="ruby">      tag.validate!(&quot;The version condition, #{condition}, is not valid!&quot;)</code>
        </li>
      
        <li class="covered" data-hits="110" data-linenumber="298">
          <span class="hits">110</span>
          
          <code class="ruby">      tag</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="300">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="301">
          
          
          <code class="ruby">    # Will raise an error if the version is not valid, i.e. if valid?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">    # returns false</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="303">
          <span class="hits">2</span>
          
          <code class="ruby">    def validate!(msg = nil)</code>
        </li>
      
        <li class="covered" data-hits="122" data-linenumber="304">
          <span class="hits">122</span>
          
          <code class="ruby">      unless valid?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="305">
          
          
          <code class="ruby">        if msg</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="306">
          
          
          <code class="ruby">          fail msg</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="308">
          
          
          <code class="ruby">          fail &quot;The version string, #{self}, is not valid!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="309">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="122" data-linenumber="311">
          <span class="hits">122</span>
          
          <code class="ruby">      self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="313">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="314">
          
          
          <code class="ruby">    # Returns the minimum Origen version that would satisfy the given condition,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="315">
          
          
          <code class="ruby">    # if the condition does not specify a minimum nil will be returned</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="316">
          <span class="hits">2</span>
          
          <code class="ruby">    def self.minimum_version(condition)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="317">
          <span class="hits">10</span>
          
          <code class="ruby">      if condition =~ /^==?\s*(.*)/</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="318">
          <span class="hits">2</span>
          
          <code class="ruby">        version = Regexp.last_match[1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">      elsif condition =~ /^&gt;=\s*(.*)/</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="320">
          <span class="hits">2</span>
          
          <code class="ruby">        version = Regexp.last_match[1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="321">
          
          
          <code class="ruby">      elsif condition =~ /^&gt;\s*(.*)/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="322">
          
          
          <code class="ruby">        # This is tricky to support, would probably require a lookup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="323">
          
          
          <code class="ruby">        # table of all versions to be maintained</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="324">
          
          
          <code class="ruby">        fail &#39;Minimum &gt; version is currently not supported!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="325">
          
          
          <code class="ruby">      elsif condition =~ /^&lt;=?\s*(.*)/</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="326">
          <span class="hits">4</span>
          
          <code class="ruby">        nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="327">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="328">
          <span class="hits">2</span>
          
          <code class="ruby">        version = condition</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="329">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="330">
          <span class="hits">10</span>
          
          <code class="ruby">      VersionString.new(version).validate! if version</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="331">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="332">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="333">
          
          
          <code class="ruby">    # Returns the maximum Origen version that would satisfy the given condition,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby">    # if the condition does not specify a maximum nil will be returned</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="335">
          <span class="hits">2</span>
          
          <code class="ruby">    def self.maximum_version(condition)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="336">
          <span class="hits">10</span>
          
          <code class="ruby">      if condition =~ /^==?\s*(.*)/</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="337">
          <span class="hits">2</span>
          
          <code class="ruby">        version = Regexp.last_match[1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="338">
          
          
          <code class="ruby">      elsif condition =~ /^&lt;=\s*(.*)/</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="339">
          <span class="hits">2</span>
          
          <code class="ruby">        version = Regexp.last_match[1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="340">
          
          
          <code class="ruby">      elsif condition =~ /^&lt;\s*(.*)/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="341">
          
          
          <code class="ruby">        # This is tricky to support, would probably require a lookup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="342">
          
          
          <code class="ruby">        # table of all versions to be maintained</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="343">
          
          
          <code class="ruby">        fail &#39;Maximum &lt; version is currently not supported!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="344">
          
          
          <code class="ruby">      elsif condition =~ /^&gt;=?\s*(.*)/</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="345">
          <span class="hits">4</span>
          
          <code class="ruby">        nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="346">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="347">
          <span class="hits">2</span>
          
          <code class="ruby">        version = condition</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="348">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="349">
          <span class="hits">10</span>
          
          <code class="ruby">      VersionString.new(version).validate! if version</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="350">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="351">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="352">
          
          
          <code class="ruby">    # Returns the version prefixed with the given value (&#39;v&#39; by default) if not</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="353">
          
          
          <code class="ruby">    # already present</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="354">
          <span class="hits">2</span>
          
          <code class="ruby">    def prefixed(str = &#39;v&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="355">
          
          
          <code class="ruby">      if self =~ /^#{str}/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="356">
          
          
          <code class="ruby">        to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="357">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="358">
          
          
          <code class="ruby">        &quot;#{str}#{self}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="359">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="360">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="361">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="362">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
      </div>
    </div>
  </body>
</html>
