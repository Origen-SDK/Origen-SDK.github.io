<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta property="og:locale" content="en_US">
    <meta name="content-language" content="en_US">

    
    <title>Create a Semiconductor ATE Pattern in 20 Minutes</title>
    <meta property="og:title" content="Create a Semiconductor ATE Pattern in 20 Minutes">
    <meta name="twitter:title" content="Create a Semiconductor ATE Pattern in 20 Minutes">
    <meta itemprop="name" content="Create a Semiconductor ATE Pattern in 20 Minutes">
      
  
  
    <link rel="author" href="https://plus.google.com/u/1/b/106463981272125989995/106463981272125989">
  
  
    <meta property="og:url" content="https://origen-sdk.org/origen/videos/1-pattern-in-20-minutes">
    <meta name="twitter:url" content="https://origen-sdk.org/origen/videos/1-pattern-in-20-minutes">
  
  
    <meta property="og:image" content="https://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:image" content="https://origen-sdk.org/favicon-260x260.png">
    <meta itemprop="image" content="https://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:card" content="summary">
  
    <meta property="og:site_name" content="Origen - The Semiconductor Developer's Kit">
  
  
    <meta property="fb:admins" content="origensdk">
  
  
    <meta name="twitter:site" content="@origensdk">
  

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://origen-sdk.org/css/bootstrap_custom.css"></script>
    <!-- Load this up top to allow pages to execute JQuery snippets -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
        ga('create', 'UA-64455560-1', 'auto');
        ga('send', 'pageview');
      </script>
    

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="https://origen-sdk.org/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="https://origen-sdk.org/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://origen-sdk.org/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://origen-sdk.org/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://origen-sdk.org/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://origen-sdk.org/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://origen-sdk.org/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://origen-sdk.org/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://origen-sdk.org/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="https://origen-sdk.org/manifest.json">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
  </head>

  <body>
    
      <div class="container">
        <nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <a href="/" class="navbar-brand" style="margin-top: -4px;">
        <img src="https://origen-sdk.org/img/origen-device.png" style="height:30px; margin-right: 2px; display: inline; margin-top: -2px;">
        <img src="https://origen-sdk.org/img/origen-text.png" style="height:15px; display: inline;">
      </a>
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li class=""><a href="/origen/guides/installation/introduction">Guides</a></li>
        <li class="active"><a href="/origen/videos/1-pattern-in-20-minutes">Videos</a></li>
        <li class=""><a href="/origen/publications">Publications</a></li>
        <li class=""><a href="/origen/api">API</a></li>
        <li class=""><a href="https://github.com/Origen-SDK">Github</a></li>
        <li class=""><a href="/origen/community">Community</a></li>
        <li class=""><a href="/origen/release_notes">Release Notes</a></li>
        <li class=""><a href="/origen/plugins">Plugins</a></li>
      </ul>
    </div>
<!--/.nav-collapse -->
  </div>
</nav>

<div class="row">
  <div class="col-md-3 sidebar-nav-container">
    <div class="well sidebar-nav" style="margin-top: 20px;">
        <div id="search">
          <form style="margin-bottom: 15px;">
            <div class="input-group">
              <input class="form-control" type="search" placeholder="Search the videos...">
              <span class="input-group-btn">
                <button type="submit" class="btn btn-search">GO!</button>
              </span>
            </div>
          </form>
        </div>
        <div class="panel-group" id="sidebar-accordion">

          <ul class="nav nav-list">
<li class="active"><a href="/origen/videos/1-pattern-in-20-minutes/">1 - A Pattern in 20 Minutes</a></li>
<li class=""><a href="/origen/videos/2-model-data-import/">2 - Model Data Import</a></li>
<li class=""><a href="/origen/videos/3-the-compiler/">3 - The Compiler</a></li>
<li class=""><a href="/origen/videos/4-create-header/">4 - Creating a Header File</a></li>
<li class=""><a href="/origen/videos/5-create-program-flow/">5 - Create Test Program Flow</a></li>
<li class=""><a href="/origen/videos/6-create-program-tests/">6 - Create Test Program Tests</a></li>
           </ul>
      

        </div>

    </div>
  </div>

  <div class="col-md-9 nav-page-container">
    <article class="search-results">

      <h3 class="topic-title">Videos</h3>

      <h2 class="topic-subtitle">Create a Semiconductor ATE Pattern in 20 Minutes</h2>

      <hr>

      <p>Learn how to build a basic IP model and then use this to create a single-source pattern to target multiple ATEs and devices.</p>

      <div style="text-align: center; margin-bottom: 20px;">
  <iframe width="640" height="360" src="https://www.youtube.com/embed/v2OsgmClfyU?rel=0" frameborder="0" allowfullscreen=""></iframe>
</div>

      <div>

  <!-- Nav tabs -->
  <ul id="videoTabs" class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active"><a href="#code" aria-controls="code" role="tab" data-toggle="tab">Code</a></li>
    <li role="presentation"><a href="#comments" aria-controls="comments" role="tab" data-toggle="tab">Comments</a></li>
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="code">

            <div>    
  <a class="anchor" name="References"></a>          
  <h4><a href="#References">References</a></h4>          
</div>

            <ul>
              <li><a href="https://github.com/Origen-Demos/1-pattern-in-20-minutes">Full source code on Github</a></li>
              <li><a href="/origen/guides/models/registers">Defining registers</a></li>
              <li><a href="/origen/guides/controllers/introduction">Controllers</a></li>
              <li><a href="/origen/guides/pattern/common">Common tester API</a></li>
            </ul>

            <div>    
  <a class="anchor" name="Code"></a>          
  <h4><a href="#Code">Code</a></h4>          
</div>

            <h5 id="ip-model-and-controller">IP Model and Controller</h5>

            <pre><code class="language-ruby"># lib/atd_test/atd.rb
module ATDTest
  class ATD
    include Origen::Model

    def initialize(options = {})
      instantiate_registers(options)
    end

    def instantiate_registers(options = {})
      reg :sc1, 0x0, size: 32 do |reg|
        reg.bit 7, :coco, access: :ro
        reg.bit 6, :aien
        reg.bit 5, :diff
        reg.bit 4..0, :adch
      end

      reg :r, 0x10, size: 32 do |reg|
        reg.bit 15..0, :d
      end
    end
  end
end
</code></pre>

            <pre><code class="language-ruby"># lib/atd_test/atd_controller.rb
module ATDTest
  class ATDController
    include Origen::Controller

    def convert(channel)
      ss "Performing an ATD conversion on channel #{channel}"
      sc1.adch.write!(channel)
      tester.wait time_in_us: 100
      sc1.coco.assert!(1)
      r.d # Return the result bits
    end
  end
end
</code></pre>

            <h5 id="test-pattern">Test Pattern</h5>

            <pre><code class="language-ruby"># pattern/atd_convert_ch10.rb
Pattern.create do
  result = dut.atd0.convert(10)
  result.store!
end
</code></pre>

            <h5 id="device-models-and-controllers">Device Models and Controllers</h5>

            <pre><code class="language-ruby"># lib/atd_test/falcon.rb
module ATDTest
  class Falcon
    include Origen::TopLevel

    def initialize(options = {})
      instantiate_pins(options)
      instantiate_registers(options)
      instantiate_sub_blocks(options)
    end

    def instantiate_pins(options = {})
      add_pin :tclk
      add_pin :tdi
      add_pin :tdo
      add_pin :tms
      add_pin :resetb
      add_pins :port_a, size: 8
    end

    def instantiate_registers(options = {})
    end

    def instantiate_sub_blocks(options = {})
      sub_block :atd, instances: 2, class_name: 'ATD',
        base_address: [0x1000_0000, 0x1000_1000]
    end
  end
end
</code></pre>

            <pre><code class="language-ruby"># lib/atd_test/falcon_controller.rb
module ATDTest
  class FalconController
    include Origen::Controller
    include OrigenNexus

    # Hook the Nexus module into the register API, any register read
    # requests will use the Nexus by default
    def read_register(reg, options = {})
      nexus.read_register(reg, options)
    end

    # As above for write requests
    def write_register(reg, options = {})
      nexus.write_register(reg, options)
    end

    def startup(options)
      pp 'Enter test mode' do
        tester.set_timeset('func_25mhz', 40)   # Where 40 is the period in ns
        pin(:tclk).drive!(1)
        pin(:resetb).drive!(1)
        nexus.jtag.write_ir(0x5, size: 8)
        nexus.jtag.write_dr(0x25, size: 16)
        tester.wait time_in_us: 100
      end
    end

    def shutdown(options)
      pp 'Reset the device' do
        pin(:resetb).drive!(0)
        pin(:tclk).drive!(0)
      end
    end
  end
end
</code></pre>

            <pre><code class="language-ruby"># lib/atd_test/eagle.rb
module ATDTest
  class Eagle
    include Origen::TopLevel

    def initialize(options = {})
      instantiate_pins(options)
      instantiate_registers(options)
      instantiate_sub_blocks(options)
    end

    def instantiate_pins(options = {})
      add_pin :swd_clk
      add_pin :swd_dio
      add_pin :tclk
      add_pin :resetb
      add_pins :port_a, size: 8
    end

    def instantiate_registers(options = {})
    end

    def instantiate_sub_blocks(options = {})
      sub_block :atd, instances: 2, class_name: 'ATD'
    end
  end
end
</code></pre>

            <pre><code class="language-ruby"># lib/atd_test/eagle_controller.rb
module ATDTest
  class EagleController
    include Origen::Controller
    include OrigenARMDebug
    include OrigenSWD

    def read_register(reg, options = {})
      arm_debug.read_register(reg, options)
    end

    # As above for write requests
    def write_register(reg, options = {})
      arm_debug.write_register(reg, options)
    end

    def startup(options)
      pp 'Enter test mode' do
        tester.set_timeset('func_25mhz', 40)   # Where 40 is the period in ns
        pin(:tclk).drive!(1)
        pin(:resetb).drive!(1)
        tester.wait time_in_us: 100
      end
    end

    def shutdown(options)
      pp 'Reset the device' do
        pin(:resetb).drive!(0)
        pin(:tclk).drive!(0)
      end
    end
  end
end
</code></pre>

          </div>
<div role="tabpanel" class="tab-pane" id="comments">
<div style="position: relative">
  <hr>
  <div>    
  <a class="anchor" name="Comments"></a>          
  <h4><a href="#Comments">Comments</a></h4>          
</div>
</div>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'origen-sdk';
    var disqus_title;
    var disqus_url = 'http://' + window.location.hostname + window.location.pathname;

    disqus_title = $("h1").text();
    if (disqus_title.length == 0) {
      disqus_title = $("h2").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("h3").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("title").text();
    } else {
      disqus_title = disqus_title + ' (' + $("title").text() + ')';
    }

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
</div>
</div>

</div>

    </article>
  </div>
</div>

<script src="/origen/search.js"></script>


      </div><!-- /.container -->
    

    <footer class="footer">
      <div class="container">
        <p class="pull-left text-muted">
          Generated with the <a href="https://origen-sdk.org">Origen Semiconductor Developer's Kit</a>
        </p>
        <p class="pull-right text-muted">Origen is released under the terms of the <a href="https://choosealicense.com/licenses/mit/">MIT license</a></p>
      </div>
    </footer>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://origen-sdk.org/js/lunr.min.js"></script>
    <script src="https://origen-sdk.org/js/highlight.js"></script>
    <script src="https://origen-sdk.org/js/custom.js"></script>
    
      <script>
        ((window.gitter = {}).chat = {}).options = {
          room: 'Origen-SDK/users'
        };
      </script>
      <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
    
  </body>
</html>
