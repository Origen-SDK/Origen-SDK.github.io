<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta property="og:locale" content="en_US">
    <meta name="content-language" content="en_US">

    
    <title>Origen - Guides</title>
    <meta property="og:title" content="Origen - Guides">
    <meta name="twitter:title" content="Origen - Guides">
    <meta itemprop="name" content="Origen - Guides">
      
  
  
    <link rel="author" href="https://plus.google.com/u/1/b/106463981272125989995/106463981272125989">
  
  
    <meta property="og:url" content="https://origen-sdk.org/origen/guides/models/defining">
    <meta name="twitter:url" content="https://origen-sdk.org/origen/guides/models/defining">
  
  
    <meta property="og:image" content="https://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:image" content="https://origen-sdk.org/favicon-260x260.png">
    <meta itemprop="image" content="https://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:card" content="summary">
  
    <meta property="og:site_name" content="Origen - The Semiconductor Developer's Kit">
  
  
    <meta property="fb:admins" content="origensdk">
  
  
    <meta name="twitter:site" content="@origensdk">
  

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://origen-sdk.org/css/bootstrap_custom.css"></script>
    <!-- Load this up top to allow pages to execute JQuery snippets -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
        ga('create', 'UA-64455560-1', 'auto');
        ga('send', 'pageview');
      </script>
    

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="https://origen-sdk.org/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="https://origen-sdk.org/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://origen-sdk.org/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://origen-sdk.org/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://origen-sdk.org/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://origen-sdk.org/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://origen-sdk.org/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://origen-sdk.org/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://origen-sdk.org/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="https://origen-sdk.org/manifest.json">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
  </head>

  <body>
    
      <div class="container">
        <nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <a href="/" class="navbar-brand" style="margin-top: -4px;">
        <img src="https://origen-sdk.org/img/origen-device.png" style="height:30px; margin-right: 2px; display: inline; margin-top: -2px;">
        <img src="https://origen-sdk.org/img/origen-text.png" style="height:15px; display: inline;">
      </a>
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li class="active"><a href="/origen/guides/installation/introduction">Guides</a></li>
        <li class=""><a href="/origen/videos/1-pattern-in-20-minutes">Videos</a></li>
        <li class=""><a href="/origen/publications">Publications</a></li>
        <li class=""><a href="/origen/api">API</a></li>
        <li class=""><a href="https://github.com/Origen-SDK">Github</a></li>
        <li class=""><a href="/origen/community">Community</a></li>
        <li class=""><a href="/origen/release_notes">Release Notes</a></li>
        <li class=""><a href="/origen/plugins">Plugins</a></li>
      </ul>
    </div>
<!--/.nav-collapse -->
  </div>
</nav>

<div class="row">
  <div class="col-md-3 sidebar-nav-container">
    <div class="well sidebar-nav" style="margin-top: 20px;">
        <div id="search">
          <form style="margin-bottom: 15px;">
            <div class="input-group">
              <input class="form-control" type="search" placeholder="Search the guides...">
              <span class="input-group-btn">
                <button type="submit" class="btn btn-search">GO!</button>
              </span>
            </div>
          </form>
        </div>
        <div class="panel-group" id="sidebar-accordion">

          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-0">
              <a class="no-underline">
                Installing Origen
              </a>
            </div>
            <div id="sidebar-collapse-0" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/installation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/installation/installing">How to Install</a></li>
<li class=""><a href="/origen/guides/installation/installwin">How to Install (Windows)</a></li>
<li class=""><a href="/origen/guides/installation/company">Company Customization</a></li>
<li class=""><a href="/origen/guides/installation/gems">Understanding Gems</a></li>
<li class=""><a href="/origen/guides/installation/invoking">Invoking Considerations</a></li>
<li class=""><a href="/origen/guides/installation/workspace">Workspace Management</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-1">
              <a class="no-underline">
                Getting Started with Origen
              </a>
            </div>
            <div id="sidebar-collapse-1" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/starting/core">Core concepts</a></li>
<li class=""><a href="/origen/guides/starting/app">Creating a New App</a></li>
<li class=""><a href="/origen/guides/starting/directory">Directory Structure</a></li>
<li class=""><a href="/origen/guides/starting/commit">The Initial Commit</a></li>
<li class=""><a href="/origen/guides/starting/files">Creating New Files</a></li>
<li class=""><a href="/origen/guides/starting/blocks">Understanding Blocks</a></li>
<li class=""><a href="/origen/guides/starting/architecture">Application Architecture</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-2">
              <a class="no-underline">
                Runtime Environment
              </a>
            </div>
            <div id="sidebar-collapse-2" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/runtime/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/runtime/mode">Mode</a></li>
<li class=""><a href="/origen/guides/runtime/environment">Environment</a></li>
<li class=""><a href="/origen/guides/runtime/target">Target</a></li>
<li class=""><a href="/origen/guides/runtime/production">Production Targets</a></li>
<li class=""><a href="/origen/guides/runtime/global">Global Setup</a></li>
<li class=""><a href="/origen/guides/runtime/loadorder">Load Order</a></li>
<li class=""><a href="/origen/guides/runtime/programming">Programming</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-3">
              <a class="no-underline">
                Models
              </a>
            </div>
            <div id="sidebar-collapse-3" class="panel-collapse collapse in">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/models/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/models/naming">Naming</a></li>
<li class="active"><a href="/origen/guides/models/defining">Definition &amp; Hierarchy</a></li>
<li class=""><a href="/origen/guides/models/attributes">Adding Attributes</a></li>
<li class=""><a href="/origen/guides/models/versioning">Versioning</a></li>
<li class=""><a href="/origen/guides/models/bugs">Bugs &amp; Features</a></li>
<li class=""><a href="/origen/guides/models/modes">Package, Mode &amp; Configuration</a></li>
<li class=""><a href="/origen/guides/models/registers">Registers</a></li>
<li class=""><a href="/origen/guides/models/pins">Pins</a></li>
<li class=""><a href="/origen/guides/models/power">Power Domains</a></li>
<li class=""><a href="/origen/guides/models/hw">Hardware Attributes</a></li>
<li class=""><a href="/origen/guides/models/parameters">Parameters</a></li>
<li class=""><a href="/origen/guides/models/specs">Specifications</a></li>
<li class=""><a href="/origen/guides/models/fuses">Fuses</a></li>
<li class=""><a href="/origen/guides/models/components">Generic Components</a></li>
<li class=""><a href="/origen/guides/models/componentable">Creating Your Own Components</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-4">
              <a class="no-underline">
                Compiler (Views)
              </a>
            </div>
            <div id="sidebar-collapse-4" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/compiler/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/compiler/creating">Creating Templates</a></li>
<li class=""><a href="/origen/guides/compiler/subtemplates">Using Sub-Templates</a></li>
<li class=""><a href="/origen/guides/compiler/helpers">Helpers</a></li>
<li class=""><a href="/origen/guides/compiler/running">Running The Compiler</a></li>
<li class=""><a href="/origen/guides/compiler/inline">Inline Compiler</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-5">
              <a class="no-underline">
                Controllers
              </a>
            </div>
            <div id="sidebar-collapse-5" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/controllers/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/controllers/shadow">Shadow Controllers</a></li>
<li class=""><a href="/origen/guides/controllers/direct">Direct Controllers</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-6">
              <a class="no-underline">
                Pattern Generator
              </a>
            </div>
            <div id="sidebar-collapse-6" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/pattern/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/pattern/creating">Creating Patterns</a></li>
<li class=""><a href="/origen/guides/pattern/pins">Pins</a></li>
<li class=""><a href="/origen/guides/pattern/timing">Timing and Waiting</a></li>
<li class=""><a href="/origen/guides/pattern/registers">Registers</a></li>
<li class=""><a href="/origen/guides/pattern/documenting">Documenting Patterns</a></li>
<li class=""><a href="/origen/guides/pattern/name">Generating by Name</a></li>
<li class=""><a href="/origen/guides/pattern/common">Common API</a></li>
<li class=""><a href="/origen/guides/pattern/j750">J750 API</a></li>
<li class=""><a href="/origen/guides/pattern/v93k">V93K API</a></li>
<li class=""><a href="/origen/guides/pattern/ultraflex">UltraFlex API</a></li>
<li class=""><a href="/origen/guides/pattern/stil">STIL &amp; Other Formats</a></li>
<li class=""><a href="/origen/guides/pattern/custom">Custom Testers</a></li>
<li class=""><a href="/origen/guides/pattern/running">Running The PatGen</a></li>
<li class=""><a href="/origen/guides/pattern/concurrent">Concurrent Patterns</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-7">
              <a class="no-underline">
                Test Program Generator
              </a>
            </div>
            <div id="sidebar-collapse-7" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/program/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/program/philosophy">Philosophy</a></li>
<li class=""><a href="/origen/guides/program/flows">Creating Flows</a></li>
<li class=""><a href="/origen/guides/program/flowapi">Managing Flow Control</a></li>
<li class=""><a href="/origen/guides/program/interface">Creating an Interface</a></li>
<li class=""><a href="/origen/guides/program/resources">Additional Resources</a></li>
<li class=""><a href="/origen/guides/program/code">Dynamic Custom Code</a></li>
<li class=""><a href="/origen/guides/program/charz">Characterization API</a></li>
<li class=""><a href="/origen/guides/program/j750">J750 API</a></li>
<li class=""><a href="/origen/guides/program/v93k">V93K Common API</a></li>
<li class=""><a href="/origen/guides/program/v93ksmt7">V93K SMT7 API</a></li>
<li class=""><a href="/origen/guides/program/v93ksmt8">V93K SMT8 API</a></li>
<li class=""><a href="/origen/guides/program/ultraflex">UltraFLEX API</a></li>
<li class=""><a href="/origen/guides/program/doc">Documenting the Program</a></li>
<li class=""><a href="/origen/guides/program/custom">Creating Custom Testers</a></li>
<li class=""><a href="/origen/guides/program/generating">Running the ProgGen</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-8">
              <a class="no-underline">
                Decompilation
              </a>
            </div>
            <div id="sidebar-collapse-8" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/decompilation/overview">Overview &amp; Example</a></li>
<li class=""><a href="/origen/guides/decompilation/decompilerapi">Decompiling, Adding Pins, &amp; Executing</a></li>
<li class=""><a href="/origen/guides/decompilation/universalapi">Working with Decompiled Patterns</a></li>
<li class=""><a href="/origen/guides/decompilation/platformspecifics">Platform Specifics</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-9">
              <a class="no-underline">
                Simulation
              </a>
            </div>
            <div id="sidebar-collapse-9" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/simulation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/simulation/howitworks">How It Works</a></li>
<li class=""><a href="/origen/guides/simulation/compiling">Compiling the DUT</a></li>
<li class=""><a href="/origen/guides/simulation/ams">AMS Support</a></li>
<li class=""><a href="/origen/guides/simulation/environment">Environment Setup</a></li>
<li class=""><a href="/origen/guides/simulation/app">Application Setup</a></li>
<li class=""><a href="/origen/guides/simulation/patterns">Simulating Patterns</a></li>
<li class=""><a href="/origen/guides/simulation/flows">Simulating Flows</a></li>
<li class=""><a href="/origen/guides/simulation/direct">Direct DUT Manipulation</a></li>
<li class=""><a href="/origen/guides/simulation/log">Simulator Log Output</a></li>
<li class=""><a href="/origen/guides/simulation/artifacts">Artifacts</a></li>
<li class=""><a href="/origen/guides/simulation/debugging">Debugging</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-10">
              <a class="no-underline">
                Documentation Generator
              </a>
            </div>
            <div id="sidebar-collapse-10" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/documentation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/documentation/markdown">Markdown</a></li>
<li class=""><a href="/origen/guides/documentation/linking">Linking</a></li>
<li class=""><a href="/origen/guides/documentation/styling">Styling</a></li>
<li class=""><a href="/origen/guides/documentation/testing">Testing</a></li>
<li class=""><a href="/origen/guides/documentation/api">API Generation</a></li>
<li class=""><a href="/origen/guides/documentation/deploying">Deploying</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-11">
              <a class="no-underline">
                Plugins
              </a>
            </div>
            <div id="sidebar-collapse-11" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/plugins/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/plugins/importing">Using a Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/creating">Creating a Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/current">Current &amp; Default Plugins</a></li>
<li class=""><a href="/origen/guides/plugins/environment">Dev Environment</a></li>
<li class=""><a href="/origen/guides/plugins/development">Dev Considerations</a></li>
<li class=""><a href="/origen/guides/plugins/paths">Paths &amp; Origen.root</a></li>
<li class=""><a href="/origen/guides/plugins/app">Config &amp; Origen.app</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-12">
              <a class="no-underline">
                Miscellaneous
              </a>
            </div>
            <div id="sidebar-collapse-12" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/misc/revisioncontrol">Revision Control</a></li>
<li class=""><a href="/origen/guides/misc/remotes">Origen Remotes</a></li>
<li class=""><a href="/origen/guides/misc/lint">Lint Testing</a></li>
<li class=""><a href="/origen/guides/misc/session">Session Store</a></li>
<li class=""><a href="/origen/guides/misc/lsf">LSF API</a></li>
<li class=""><a href="/origen/guides/misc/users">Users, Emails &amp; Maillists</a></li>
<li class=""><a href="/origen/guides/misc/utilities">Utilities &amp; Helpers</a></li>
<li class=""><a href="/origen/guides/misc/coreext">Ruby Extensions</a></li>
<li class=""><a href="/origen/guides/misc/logger">Logger</a></li>
<li class=""><a href="/origen/guides/misc/commands">Adding Commands</a></li>
<li class=""><a href="/origen/guides/misc/commandsov">Overriding Commands</a></li>
<li class=""><a href="/origen/guides/misc/callbacks">Callbacks</a></li>
<li class=""><a href="/origen/guides/misc/appcallbacks">Application Callbacks</a></li>
<li class=""><a href="/origen/guides/misc/misc">Miscellaneous Topics</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-13">
              <a class="no-underline">
                Advanced Topics
              </a>
            </div>
            <div id="sidebar-collapse-13" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/advanced/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/advanced/invocations">Invocation Customization</a></li>
<li class=""><a href="/origen/guides/advanced/newapps">Custom App Generators</a></li>
                </ul>
              </div>
            </div>
          </div>
      

        </div>

    </div>
  </div>

  <div class="col-md-9 nav-page-container">
    <article class="search-results">

      <h3 class="topic-title">Models</h3>

      <h2 class="topic-subtitle">Definition &amp; Hierarchy</h2>

      <hr>

      <div>    
  <a class="anchor" name="Creating_A_Model"></a>          
  <h4><a href="#Creating_A_Model">Creating A Model</a></h4>          
</div>

      <p>A model can be any class that includes the <code>Origen::Model</code> module, this will give you access to
all Origen APIs for defining registers, pins, etc. and generally makes Origen aware of any instances of the
model when you instantiate them.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MyModel</span>
  include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">Model</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p>As a general rule <strong>include the <code>Origen::Model</code> module every time you create a new class in Origen</strong>,
even if the model is
not of an SoC or an IP block and the concept of registers and pins does not apply.
There is not really any downside to including these APIs if you are not going to use them and this
module is the main mechanism to hook your class into the Origen ecosystem.</p>

      <div>    
  <a class="anchor" name="Creating_A_Top_Level_Model"></a>          
  <h4><a href="#Creating_A_Top_Level_Model">Creating A Top Level Model</a></h4>          
</div>

      <p>If a given model represents the top-level of an device then you should also include the <code>Origen::TopLevel</code>
module, this specifically lets Origen know that it is a top-level model and as such it holds a special
place in the Origen runtime environment - for example any register write requests will be sent to this
object for dispatch.</p>

      <p>Internally the <code>Origen::TopLevel</code> module includes the <code>Origen::Model</code> module and
therefore it does not need to be specifically included in top-level model classes (although there is
no harm from doing so).</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MySoCModel</span>
  include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">TopLevel</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <div class="alert alert-danger">
  <strong>Warning!</strong> While you can define multiple top-level models only one of them can be instantiated
  per target or Origen thread of execution. Attempts to instantiate a 2nd top-level object will raise an error.
</div>

      <p>Regardless of what name is given to an instance of a top-level class it can always be looked up via
<code>Origen.top_level</code> or more simply <code>$dut</code>. All Origen developers can rely on this
convention to access the current top-level object:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>soc = <span style="color:#036;font-weight:bold">MySoCModel</span>.new
<span style="color:#036;font-weight:bold">Origen</span>.top_level == soc      <span style="color:#777"># =&gt; true</span>
<span style="color:#d70">$dut</span> == soc                  <span style="color:#777"># =&gt; true</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="Modelling_Hierarchy_by_Example"></a>          
  <h4><a href="#Modelling_Hierarchy_by_Example">Modelling Hierarchy by Example</a></h4>          
</div>

      <p>As your experience with your application grows, the way to partition your models for easiest maintenance
and development will start to become clear. At that point you may feel decide to start introducing
abstract classes to handle the concepts that exist within your domain and which don’t necessarily have
a direct counterpart in the physical domain.</p>

      <p>However to get started we recommend that you closely follow the physical architecture of your target device, where
each of the main IP blocks that you care about has an associated model.</p>

      <p>In this example we are going to set up an Origen model structure that will allow us to write some 
test code for a fictional NVM module contained within an SoC.</p>

      <div>    
  <a class="anchor" name="The_Top_Level"></a>          
  <h4><a href="#The_Top_Level">The Top Level</a></h4>          
</div>

      <p>We are going to call our application ‘NVM’ and all of our code will reside in the NVM namespace. However
the top-level SoC model is something of a special case because potentially it could be shared by many
applications - e.g. an application concerned with testing the SRAM could re-use our SoC model.</p>

      <p>So to set us up to handle that eventuality in the future let’s put all of our top-level definitions into
their own namespace which
we will call <code>SOC</code>. Here is how to define the top level model:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># lib/soc/eagle_m352.rb</span>
<span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">SOC</span>
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">EAGLE_M352</span>
    include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">TopLevel</span>

    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(options={})
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p>The initialize method will automatically be called by Ruby whenever a new instance of this class is
instantiated - so this is a place to do any setup or initialization that is required whenever a new
Eagle model comes into being.</p>

      <p>At this point we have also chosen to have this method optionally accept a hash of options, we will do this
almost every time we define a method since it builds in great flexibility and the ability to handle
additional arguments in future that we may not have thought about when first defining a new method.</p>

      <div>    
  <a class="anchor" name="Interacting_with_Our_New_Model"></a>          
  <h4><a href="#Interacting_with_Our_New_Model">Interacting with Our New Model</a></h4>          
</div>

      <p>Our first model is now defined and we can now go and talk to it for the first time, to do so start
an interactive Origen session from your terminal:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>origen i
</pre></div>
</div>
      </div>

      <p>This command loads up an interactive Ruby terminal and automatically loads Origen and your application, so we can
now experiment with our models:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#d70">$dut</span> = <span style="color:#036;font-weight:bold">SOC</span>::<span style="color:#036;font-weight:bold">EAGLE_M352</span>.new

<span style="color:#d70">$dut</span>.is_a?(<span style="color:#036;font-weight:bold">SOC</span>::<span style="color:#036;font-weight:bold">EAGLE_M352</span>)     <span style="color:#777"># =&gt; true</span>
</pre></div>
</div>
      </div>

      <p>Above we simply instantiated a new instance of our class, and then asked it if it was an instance of
<code>SOC::EAGLE_M352</code>, to which it replied: ‘yes’.</p>

      <div>    
  <a class="anchor" name="Adding_Sub_Blocks"></a>          
  <h4><a href="#Adding_Sub_Blocks">Adding Sub Blocks</a></h4>          
</div>

      <p>Sub-blocks should be used to model IP blocks or indeed any sub-components within that IP, a generic sub-block
can be declared very simply within the top-level’s initialize method:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># lib/soc/eagle_m352.rb</span>
<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(options={})
  sub_block <span style="color:#A60">:nvm</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p>By default this will instantiate an object that includes all of the usual Origen APIs (regs, pins, etc.) and 
this can then be decorated as required by the application (see example below). Most importantly this wires up
everything internally such that the relationship between the child and the parent are known to Origen and it
will automatically build an accessor to get the child module:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#d70">$dut</span> = <span style="color:#036;font-weight:bold">SOC</span>::<span style="color:#036;font-weight:bold">EAGLE_M352</span>.new

<span style="color:#d70">$dut</span>.nvm         <span style="color:#777"># =&gt; Generic Origen object</span>
<span style="color:#d70">$dut</span>.nvm.parent  <span style="color:#777"># =&gt; $dut</span>

<span style="color:#d70">$dut</span>.children    <span style="color:#777"># =&gt; {:nvm =&gt; &lt;object&gt;}</span>

<span style="color:#777"># Decorate as required by calling Origen APIs on the object</span>
<span style="color:#d70">$dut</span>.nvm.reg <span style="color:#A60">:reg1</span>, <span style="color:#00D">0x30</span> <span style="color:#080;font-weight:bold">do</span> |reg|
  reg.bits <span style="color:#00D">31</span>..<span style="color:#00D">0</span>, <span style="color:#A60">:data</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># The NVM now has a register available...</span>
<span style="color:#d70">$dut</span>.nvm.reg1.write(<span style="color:#00D">0x1234</span>)
</pre></div>
</div>
      </div>

      <p>The above approach is ideal where the models are being built from a 3rd party data source (e.g. standard XML)
and all that is required is to get an Origen object representation of the same data.</p>

      <p>However in cases where more native richness is required you can supply a class for the object,
let’s create a dedicated model for our NVM IP:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># lib/nvm/nvm_m682.rb</span>
<span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">NVM</span>
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">NVM_M682</span>
    include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">Model</span>

    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(options={})
      <span style="color:#777"># Add an example register</span>
      reg <span style="color:#A60">:reg1</span>, <span style="color:#00D">0x30</span> <span style="color:#080;font-weight:bold">do</span> |reg|
        reg.bits <span style="color:#00D">31</span>..<span style="color:#00D">0</span>, <span style="color:#A60">:data</span>, <span style="color:#606">reset</span>: <span style="color:#00D">0xFFFF_FFFF</span>
      <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p>This follows the same pattern as our first model, note the use of the <code>NVM</code> namespace and the
subsequent storage of the file in the <code>lib/nvm</code> directory rather than <code>lib/soc</code>.</p>

      <p>We can now refer to this class in our sub-block definition and verify that the register we added is available:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># lib/soc/eagle_m352.rb</span>
<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(options={})
  sub_block <span style="color:#A60">:nvm</span>, <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">NVM_M682</span><span style="color:#710">"</span></span>
<span style="color:#080;font-weight:bold">end</span>


<span style="color:#d70">$dut</span> = <span style="color:#036;font-weight:bold">SOC</span>::<span style="color:#036;font-weight:bold">EAGLE_M352</span>.new
<span style="color:#d70">$dut</span>.nvm.reg1.address        <span style="color:#777"># =&gt; 0x30</span>
<span style="color:#d70">$dut</span>.nvm.reg1.data           <span style="color:#777"># =&gt; 0xFFFF_FFFF</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="Adding_Sub_Block_Groups"></a>          
  <h4><a href="#Adding_Sub_Block_Groups">Adding Sub Block Groups</a></h4>          
</div>

      <p>If needing to add several similar sub blocks, a <code>sub_block_group</code> can be used.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># lib/soc/eagle_m352.rb</span>
<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(options={})
  sub_block_group <span style="color:#A60">:memories</span> <span style="color:#080;font-weight:bold">do</span>
    sub_block <span style="color:#A60">:memory0</span>,        <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">MEMORY_128_B954</span><span style="color:#710">"</span></span>
    sub_block <span style="color:#A60">:memory1</span>,        <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">MEMORY_64_B954</span><span style="color:#710">"</span></span>
    sub_block <span style="color:#A60">:memory2</span>,        <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">MEMORY_32_B954</span><span style="color:#710">"</span></span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#d70">$dut</span> = <span style="color:#036;font-weight:bold">SOC</span>::<span style="color:#036;font-weight:bold">EAGLE_M352</span>.new
<span style="color:#d70">$dut</span>.memory0.class               <span style="color:#777"># MEMORY_128_B954</span>
<span style="color:#d70">$dut</span>.memory1.class               <span style="color:#777"># MEMORY_64_B954</span>
<span style="color:#d70">$dut</span>.memory2.class               <span style="color:#777"># MEMORY_32_B954</span>
<span style="color:#d70">$dut</span>.memories.class              <span style="color:#777"># Array (Array of all 3 memory sub_blocks)</span>

<span style="color:#777"># By default uses sub_block_group uses Array class, so all Array methods are available</span>
memories                         <span style="color:#777"># =&gt; [&lt;memory 0 instance&gt;, &lt;memory 1 instance&gt;, &lt;memory 2 instance&gt;]</span>
memories.size                    <span style="color:#777"># =&gt; 3</span>
memories.first                   <span style="color:#777"># =&gt; &lt;memory 0 instance&gt;</span>
</pre></div>
</div>
      </div>

      <p>In addition, a custom container class can also be used instead of an Array to contain the sub_block objects if desired.
To do this, pass the desired container class as follows:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># lib/soc/eagle_m352.rb</span>
<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(options={})
  sub_block_group <span style="color:#A60">:memories</span>, <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">MEMORIES_B294</span><span style="color:#710">"</span></span> <span style="color:#080;font-weight:bold">do</span>
    sub_block <span style="color:#A60">:memory0</span>,        <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">MEMORY_128_B954</span><span style="color:#710">"</span></span>
    sub_block <span style="color:#A60">:memory1</span>,        <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">MEMORY_64_B954</span><span style="color:#710">"</span></span>
    sub_block <span style="color:#A60">:memory2</span>,        <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">MEMORY_32_B954</span><span style="color:#710">"</span></span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>


<span style="color:#d70">$dut</span> = <span style="color:#036;font-weight:bold">SOC</span>::<span style="color:#036;font-weight:bold">EAGLE_M352</span>.new
<span style="color:#d70">$dut</span>.memory0.class               <span style="color:#777"># MEMORY_128_B954</span>
<span style="color:#d70">$dut</span>.memory1.class               <span style="color:#777"># MEMORY_64_B954</span>
<span style="color:#d70">$dut</span>.memory2.class               <span style="color:#777"># MEMORY_32_B954</span>
<span style="color:#d70">$dut</span>.memories.class              <span style="color:#777"># MEMORIES_B954 (custom class containing all 3 memory sub_blocks)</span>

</pre></div>
</div>
      </div>

      <p>The recommended way to create a custom container class is to sub-class the Array class, then add additional methods, like this:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># lib/memories.rb</span>
<span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MEMORIES_B294</span> &lt; ::<span style="color:#036;font-weight:bold">Array</span>
  <span style="color:#777"># Example of a custom method to print the names of all contained memories</span>
  <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">print_ids</span>
    <span style="color:#777"># Since this class is based on Array, we can use all Array methods like 'each'</span>
    <span style="color:#777"># on the contained objects</span>
    each { |mem| puts mem.id }
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># All conventional Array methods are supported since we sub-classed Array</span>
memories.size                   <span style="color:#777"># =&gt; 3</span>
memories.first                  <span style="color:#777"># =&gt; &lt;memory 0 instance&gt;</span>
memories.map { |mem| mem.id }   <span style="color:#777"># =&gt; [:memory0, :memory1, :memory2]</span>

<span style="color:#777"># Plus we have our custom method(s)</span>
memories.print_ids
=&gt;
memory0
memory1
memory2
</pre></div>
</div>
      </div>

      <p>If you do not sub-class Array, then you will need to be sure to define a <code>&lt;&lt;</code> push type method:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># lib/memories.rb</span>
<span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MEMORIES_B294</span>
  <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>
    <span style="color:#33B">@sub_blocks</span> = {}
  <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#777"># Example of a custom &lt;&lt; method to permit adding sub_blocks to container</span>
  <span style="color:#777"># Required for use with sub_block_group</span>
  <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">&lt;&lt;</span>(sub_block)
    <span style="color:#33B">@sub_blocks</span>[sub_block.id] = sub_block
  <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#777"># Example of a custom method to print the names of all contained memories</span>
  <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">print_ids</span>
    each { |mem| puts mem.id }
  <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#777"># Example of custom 'each' method</span>
  <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">each</span>
    <span style="color:#33B">@sub_blocks</span>.each_value <span style="color:#080;font-weight:bold">do</span> |sub_block|
      <span style="color:#080;font-weight:bold">yield</span> sub_block
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># Drawback is you only have methods defined in this class.</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="Wash,_Rinse,_Repeat"></a>          
  <h4><a href="#Wash,_Rinse,_Repeat">Wash, Rinse, Repeat</a></h4>          
</div>

      <p>This process can now be repeated to model the complete design hierarchy, the <code>sub_block</code> method
can be used within sub-blocks themselves with no limit on depth.</p>

      <p>Here are the complete set of initial stub models for the Eagle and it’s NVM module:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># lib/soc/eagle_m352.rb</span>
<span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">SOC</span>
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">EAGLE_M352</span>
    include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">TopLevel</span>

    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(options={})
      sub_block <span style="color:#A60">:nvm</span>, <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">NVM_M682</span><span style="color:#710">"</span></span>
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># lib/nvm/nvm_m682.rb</span>
<span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">NVM</span>
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">NVM_M682</span>
    include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">Model</span>

    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(options={})
      sub_block  <span style="color:#A60">:analog</span>,        <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">ANALOG_T921</span><span style="color:#710">"</span></span>
      sub_block_group <span style="color:#A60">:memories</span>, <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">MEMORIES_B294</span><span style="color:#710">"</span></span> <span style="color:#080;font-weight:bold">do</span>
        sub_block <span style="color:#A60">:memory0</span>,        <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">MEMORY_128_B954</span><span style="color:#710">"</span></span>
        sub_block <span style="color:#A60">:memory1</span>,        <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">MEMORY_64_B954</span><span style="color:#710">"</span></span>
        sub_block <span style="color:#A60">:memory2</span>,        <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">MEMORY_32_B954</span><span style="color:#710">"</span></span>
      <span style="color:#080;font-weight:bold">end</span>
      sub_block  <span style="color:#A60">:state_machine</span>, <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">CONTROL_D345</span><span style="color:#710">"</span></span>
    <span style="color:#080;font-weight:bold">end</span>

  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># lib/nvm/analog_t921.rb</span>
<span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">NVM</span>
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">ANALOG_T921</span>
    include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">Model</span>

    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(options={})
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># lib/nvm/memory_128_b954.rb</span>
<span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">NVM</span>
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MEMORY_128_B954</span>
    include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">Model</span>

    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(options={})
      <span style="color:#33B">@size_in_kB</span> = <span style="color:#00D">128</span>
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># lib/nvm/memory_64_b954.rb</span>
<span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">NVM</span>
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MEMORY_64_B954</span>
    include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">Model</span>

    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(options={})
      <span style="color:#33B">@size_in_kB</span> = <span style="color:#00D">64</span>
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># lib/nvm/memory_32_b954.rb</span>
<span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">NVM</span>
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MEMORY_32_B954</span>
    include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">Model</span>

    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(options={})
      <span style="color:#33B">@size_in_kB</span> = <span style="color:#00D">32</span>
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># lib/memories.rb</span>
<span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MEMORIES_B294</span> &lt; ::<span style="color:#036;font-weight:bold">Array</span>
  <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">print_ids</span>
    each { |mem| puts mem.id }
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># file: lib/nvm/control_d345.rb</span>
<span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">NVM</span>
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">CONTROL_D345</span>
    include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">Model</span>

    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(options={})
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p>A couple of points are worth noting from the above code:</p>

      <ul>
        <li>The namespace reference is not required when making references to other models/classes within the
same namespace.</li>
        <li>Multiple instances of the <em>memory</em> sub-block have been defined. By convention use the
plural for the group name, i.e. <code>:memories</code> and singular with an incrementing digit
for the sub_blocks contained therein:  <code>memory0</code>, <code>memory1</code>, etc.</li>
        <li>The classes for the various NVM sub-blocks are all empty right now and as such they did
not really need to be defined, however these are placeholders for us to go on and add more
logic in the future.</li>
      </ul>

      <p>Even though we have not yet added any logic to our models they are starting to become useful,
for example we can now ask the Eagle how many NVM memory blocks that it has:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#d70">$dut</span> = <span style="color:#036;font-weight:bold">SOC</span>::<span style="color:#036;font-weight:bold">EAGLE_M352</span>.new

<span style="color:#d70">$dut</span>.nvm.memories.size    <span style="color:#777"># =&gt; 4</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="Overriding_and_Inheriting"></a>          
  <h3><a href="#Overriding_and_Inheriting">Overriding and Inheriting</a></h3>          
</div>

      <div class="alert alert-warning">
  <strong>WARNING: </strong>This is a beta feature, there still may be some bugs/undefined behavior when overriding or inheriting blocks.
</div>

      <p>Ideally, you will not need to override or inherit blocks. But if you need to make some application
specific overrides to methods defined in blocks that were instantiated in another application that
you don’t have control over, overriding may be the solution. Similarly, if you need to make an
application specific derivative of a block thats been defined in another app, and it doesn’t make
sense to define the derivative in that app, then you may want to utilize the inherit functionality.</p>

      <div>    
  <a class="anchor" name="Override"></a>          
  <h4><a href="#Override">Override</a></h4>          
</div>

      <p>Override allows you to recreate a block that already existed.
For example, lets say that your dut included a sub block called ‘dummy_block’ of class
<code>OtherApp::Block::BlockA</code> which was created in another app, and it instantiated a sub block
called ‘dummy_sub’ of class <code>OtherApp::Block::BlockA::Sub1</code>.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># file: app/blocks/dut/my_dut/sub_blocks.rb</span>
sub_block <span style="color:#A60">:dummy_block</span>, <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">OtherApp::Block::BlockA</span><span style="color:#710">'</span></span>
</pre></div>
</div>
      </div>

      <p>Which you can now access dummy_sub via <code>dut.dummy_block.dummy_sub</code>. But now lets say that your
application needs a different sub block under dummy block, <code>MyApp::DUT::MyDut::Sub2</code>.</p>

      <p>You could override the existing <code>dut.dummy_block.dummy_sub</code> like so:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># file: app/blocks/dut/my_dut/sub_blocks.rb</span>
sub_block <span style="color:#A60">:dummy_block</span>, <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">OtherApp::Block::BlockA</span><span style="color:#710">'</span></span>
dummy_block.sub_block <span style="color:#A60">:dummy_sub</span>, <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">MyApp::DUT::MyDut::Sub2</span><span style="color:#710">'</span></span>, <span style="color:#606">override</span>: <span style="color:#069">true</span>
</pre></div>
</div>
      </div>

      <h5 id="skiprequirefiles">skip_require_files</h5>

      <p>When overriding, previously instantiated subblocks have already initialzed some namespaces, which can result in some funny constant behavior:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#036;font-weight:bold">NamespaceA</span>::<span style="color:#036;font-weight:bold">B</span>::<span style="color:#036;font-weight:bold">C</span>
=&gt;  <span style="color:#036;font-weight:bold">NameSpaceX</span>::<span style="color:#036;font-weight:bold">Y</span>::<span style="color:#036;font-weight:bold">Z</span>
</pre></div>
</div>
      </div>

      <p>To get around this the override feature will require the relevant block files which returns the constant behavior back to sanity:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#036;font-weight:bold">NamespaceA</span>::<span style="color:#036;font-weight:bold">B</span>::<span style="color:#036;font-weight:bold">C</span>
=&gt;  <span style="color:#036;font-weight:bold">NameSpaceA</span>::<span style="color:#036;font-weight:bold">B</span>::<span style="color:#036;font-weight:bold">C</span>
</pre></div>
</div>
      </div>

      <p>However, there are many block files which aren’t meant to be required directly (e.g attributes.rb) as they could contain method calls which wouldn’t
be available at the time they are required. So by default, these kinds of block files are skipped.
Specifically: attributes.rb, parameters.rb, pins.rb, registers.rb, sub_blocks.rb, and timesets.rb</p>

      <p>If you have other block files in your modeling that you need require to skip, you can do so by passing an array of files (without the extension) to the sub_block method as an option of <code>skip_require_files</code>:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>dummy_block.sub_block <span style="color:#A60">:dummy_sub</span>, <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">MyApp::DUT::MyDut::Sub2</span><span style="color:#710">'</span></span>, <span style="color:#606">override</span>: <span style="color:#069">true</span>, <span style="color:#606">skip_require_files</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">%w(</span><span style="color:#D20">file1 file2 file3</span><span style="color:#710">)</span></span>
</pre></div>
</div>
      </div>

      <p>Note however that you’ll likely need to include the files that are skipped by default in your custom skip_require_files option as this will override the default array.</p>

      <div>    
  <a class="anchor" name="Inherit"></a>          
  <h4><a href="#Inherit">Inherit</a></h4>          
</div>

      <p>Continuing the above example from Override, lets now say that you want your new
<code>MyApp::DUT::MyDut::Sub2</code> sub block to inherit <code>OtherApp::Block::BlockA::Sub1</code> as a starting point.
You can already mostly accomplish this the same way that derivatives operate by setting your class
definitions in your model.rb and controller.rb files of <code>MyApp::DUT::MyDut::Sub2</code> to inherit the class
of <code>OtherApp::Block::BlockA::Sub1</code>’s model.rb and controller.rb:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># file: app/blocks/dut/my_dut/sub_blocks/sub2/model.rb</span>
<span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MyAPP::DUT::MyDut::Sub2</span> &lt; <span style="color:#036;font-weight:bold">OtherApp</span>::<span style="color:#036;font-weight:bold">Block</span>::<span style="color:#036;font-weight:bold">BlockA</span>::<span style="color:#036;font-weight:bold">Sub1</span>

<span style="color:#777"># file: app/blocks/dut/my_dut/sub_blocks/sub2/controller.rb</span>
<span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MyAPP::DUT::MyDut::Sub2Controller</span> &lt; <span style="color:#036;font-weight:bold">OtherApp</span>::<span style="color:#036;font-weight:bold">Block</span>::<span style="color:#036;font-weight:bold">BlockA</span>::<span style="color:#036;font-weight:bold">Sub1Controller</span>
</pre></div>
</div>
      </div>

      <p>But what this does not do, is inherit the block files (attributes.rb, parameters.rb, etc…) associated
with <code>OtherApp::Block::BlockA::Sub1</code>. To do that, you can also pass the inherit option to <code>sub_block</code>, which
will instruct the block loader to pick up those files as well:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># file: app/blocks/dut/my_dut/sub_blocks.rb</span>
sub_block <span style="color:#A60">:dummy_block</span>, <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">OtherApp::Block::BlockA</span><span style="color:#710">'</span></span>
dummy_block.sub_block <span style="color:#A60">:dummy_sub</span>, <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">MyApp::DUT::MyDut::Sub2</span><span style="color:#710">'</span></span>, <span style="color:#606">override</span>: <span style="color:#069">true</span>, <span style="color:#606">inherit</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">OtherApp::Block::BlockA</span><span style="color:#710">'</span></span>
</pre></div>
</div>
      </div>

      <h5 id="bug-and-feature-inheritance">Bug and Feature inheritance</h5>

      <p>By default, if the inherit option is passed it will attempt to propagate any features and bugs from the class specified in the inherit option to the sub block being defined.
If you’d like to prevent either from happening, then you can pass either disable_bug_inheritance and/or disable_feature_inheritance options to the sub_block method:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>dummy_block.sub_block <span style="color:#A60">:dummy_sub</span>, <span style="color:#606">class_name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">MyApp::DUT::MyDut::Sub2</span><span style="color:#710">'</span></span>, <span style="color:#606">override</span>: <span style="color:#069">true</span>, <span style="color:#606">inherit</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">OtherApp::Block::BlockA</span><span style="color:#710">'</span></span>, <span style="color:#606">disable_bug_inheritance</span>: <span style="color:#069">true</span>, <span style="color:#606">disable_feature_inheritance</span>: <span style="color:#069">true</span>
</pre></div>
</div>
      </div>

      <div style="position: relative">
  <hr>
  <div>    
  <a class="anchor" name="Comments"></a>          
  <h4><a href="#Comments">Comments</a></h4>          
</div>
</div>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'origen-sdk';
    var disqus_title;
    var disqus_url = 'http://' + window.location.hostname + window.location.pathname;

    disqus_title = $("h1").text();
    if (disqus_title.length == 0) {
      disqus_title = $("h2").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("h3").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("title").text();
    } else {
      disqus_title = disqus_title + ' (' + $("title").text() + ')';
    }

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>

    </article>
  </div>
</div>

<script src="/origen/search.js"></script>


      </div><!-- /.container -->
    

    <footer class="footer">
      <div class="container">
        <p class="pull-left text-muted">
          Generated with the <a href="https://origen-sdk.org">Origen Semiconductor Developer's Kit</a>
        </p>
        <p class="pull-right text-muted">Origen is released under the terms of the <a href="https://choosealicense.com/licenses/mit/">MIT license</a></p>
      </div>
    </footer>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://origen-sdk.org/js/lunr.min.js"></script>
    <script src="https://origen-sdk.org/js/highlight.js"></script>
    <script src="https://origen-sdk.org/js/custom.js"></script>
    
      <script>
        ((window.gitter = {}).chat = {}).options = {
          room: 'Origen-SDK/users'
        };
      </script>
      <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
    
  </body>
</html>
