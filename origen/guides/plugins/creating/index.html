<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta property="og:locale" content="en_US">
    <meta name="content-language" content="en_US">

    
    <title>Origen - Guides</title>
    <meta property="og:title" content="Origen - Guides">
    <meta name="twitter:title" content="Origen - Guides">
    <meta itemprop="name" content="Origen - Guides">
      
  
  
    <link rel="author" href="https://plus.google.com/u/1/b/106463981272125989995/106463981272125989">
  
  
    <meta property="og:url" content="http://origen-sdk.org/origen/guides/plugins/creating">
    <meta name="twitter:url" content="http://origen-sdk.org/origen/guides/plugins/creating">
  
  
    <meta property="og:image" content="http://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:image" content="http://origen-sdk.org/favicon-260x260.png">
    <meta itemprop="image" content="http://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:card" content="summary">
  
    <meta property="og:site_name" content="Origen - The Semiconductor Developer's Kit">
  
  
    <meta property="fb:admins" content="origensdk">
  
  
    <meta name="twitter:site" content="@origensdk">
  

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://origen-sdk.org/css/bootstrap_custom.css"></script>
    <!-- Load this up top to allow pages to execute JQuery snippets -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
        ga('create', 'UA-64455560-1', 'auto');
        ga('send', 'pageview');
      </script>
    

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="http://origen-sdk.org/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="http://origen-sdk.org/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="http://origen-sdk.org/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="http://origen-sdk.org/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="http://origen-sdk.org/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="http://origen-sdk.org/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="http://origen-sdk.org/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="http://origen-sdk.org/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="http://origen-sdk.org/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="http://origen-sdk.org/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://origen-sdk.org/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="http://origen-sdk.org/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="http://origen-sdk.org/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="http://origen-sdk.org/manifest.json">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
  </head>

  <body>
    
      <div class="container">
        <nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <a href="/" class="navbar-brand" style="margin-top: -4px;">
        <img src="http://origen-sdk.org/img/origen-device.png" style="height:30px; margin-right: 2px; display: inline; margin-top: -2px;">
        <img src="http://origen-sdk.org/img/origen-text.png" style="height:15px; display: inline;">
      </a>
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li class="active"><a href="/origen/guides/installation/introduction">Guides</a></li>
        <li class=""><a href="/origen/videos/1-pattern-in-20-minutes">Videos</a></li>
        <li class=""><a href="/origen/publications">Publications</a></li>
        <li class=""><a href="/origen/api">API</a></li>
        <li class=""><a href="https://github.com/Origen-SDK">Github</a></li>
        <li class=""><a href="/origen/community">Community</a></li>
        <li class=""><a href="/origen/release_notes">Release Notes</a></li>
        <li class=""><a href="/origen/plugins">Plugins</a></li>
      </ul>
    </div>
<!--/.nav-collapse -->
  </div>
</nav>

<div class="row">
  <div class="col-md-3 sidebar-nav-container">
    <div class="well sidebar-nav" style="margin-top: 20px;">
        <div id="search">
          <form style="margin-bottom: 15px;">
            <div class="input-group">
              <input class="form-control" type="search" placeholder="Search the guides...">
              <span class="input-group-btn">
                <button type="submit" class="btn btn-search">GO!</button>
              </span>
            </div>
          </form>
        </div>
        <div class="panel-group" id="sidebar-accordion">

          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-0">
              <a class="no-underline">
                Installing Origen
              </a>
            </div>
            <div id="sidebar-collapse-0" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/installation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/installation/installing">How to Install</a></li>
<li class=""><a href="/origen/guides/installation/installwin">How to Install (Windows)</a></li>
<li class=""><a href="/origen/guides/installation/company">Company Customization</a></li>
<li class=""><a href="/origen/guides/installation/gems">Understanding Gems</a></li>
<li class=""><a href="/origen/guides/installation/invoking">Invoking Considerations</a></li>
<li class=""><a href="/origen/guides/installation/workspace">Workspace Management</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-1">
              <a class="no-underline">
                Getting Started with Origen
              </a>
            </div>
            <div id="sidebar-collapse-1" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/starting/core">Core concepts</a></li>
<li class=""><a href="/origen/guides/starting/app">Creating a New App</a></li>
<li class=""><a href="/origen/guides/starting/directory">Directory Structure</a></li>
<li class=""><a href="/origen/guides/starting/commit">The Initial Commit</a></li>
<li class=""><a href="/origen/guides/starting/files">Creating New Files</a></li>
<li class=""><a href="/origen/guides/starting/blocks">Understanding Blocks</a></li>
<li class=""><a href="/origen/guides/starting/architecture">Application Architecture</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-2">
              <a class="no-underline">
                Runtime Environment
              </a>
            </div>
            <div id="sidebar-collapse-2" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/runtime/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/runtime/mode">Mode</a></li>
<li class=""><a href="/origen/guides/runtime/environment">Environment</a></li>
<li class=""><a href="/origen/guides/runtime/target">Target</a></li>
<li class=""><a href="/origen/guides/runtime/production">Production Targets</a></li>
<li class=""><a href="/origen/guides/runtime/global">Global Setup</a></li>
<li class=""><a href="/origen/guides/runtime/loadorder">Load Order</a></li>
<li class=""><a href="/origen/guides/runtime/programming">Programming</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-3">
              <a class="no-underline">
                Models
              </a>
            </div>
            <div id="sidebar-collapse-3" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/models/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/models/naming">Naming</a></li>
<li class=""><a href="/origen/guides/models/defining">Definition &amp; Hierarchy</a></li>
<li class=""><a href="/origen/guides/models/attributes">Adding Attributes</a></li>
<li class=""><a href="/origen/guides/models/versioning">Versioning</a></li>
<li class=""><a href="/origen/guides/models/bugs">Bugs &amp; Features</a></li>
<li class=""><a href="/origen/guides/models/modes">Package, Mode &amp; Configuration</a></li>
<li class=""><a href="/origen/guides/models/registers">Registers</a></li>
<li class=""><a href="/origen/guides/models/pins">Pins</a></li>
<li class=""><a href="/origen/guides/models/power">Power Domains</a></li>
<li class=""><a href="/origen/guides/models/hw">Hardware Attributes</a></li>
<li class=""><a href="/origen/guides/models/parameters">Parameters</a></li>
<li class=""><a href="/origen/guides/models/specs">Specifications</a></li>
<li class=""><a href="/origen/guides/models/fuses">Fuses</a></li>
<li class=""><a href="/origen/guides/models/components">Generic Components</a></li>
<li class=""><a href="/origen/guides/models/componentable">Creating Your Own Components</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-4">
              <a class="no-underline">
                Compiler (Views)
              </a>
            </div>
            <div id="sidebar-collapse-4" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/compiler/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/compiler/creating">Creating Templates</a></li>
<li class=""><a href="/origen/guides/compiler/subtemplates">Using Sub-Templates</a></li>
<li class=""><a href="/origen/guides/compiler/helpers">Helpers</a></li>
<li class=""><a href="/origen/guides/compiler/running">Running The Compiler</a></li>
<li class=""><a href="/origen/guides/compiler/inline">Inline Compiler</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-5">
              <a class="no-underline">
                Controllers
              </a>
            </div>
            <div id="sidebar-collapse-5" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/controllers/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/controllers/shadow">Shadow Controllers</a></li>
<li class=""><a href="/origen/guides/controllers/direct">Direct Controllers</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-6">
              <a class="no-underline">
                Pattern Generator
              </a>
            </div>
            <div id="sidebar-collapse-6" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/pattern/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/pattern/creating">Creating Patterns</a></li>
<li class=""><a href="/origen/guides/pattern/pins">Pins</a></li>
<li class=""><a href="/origen/guides/pattern/timing">Timing and Waiting</a></li>
<li class=""><a href="/origen/guides/pattern/registers">Registers</a></li>
<li class=""><a href="/origen/guides/pattern/documenting">Documenting Patterns</a></li>
<li class=""><a href="/origen/guides/pattern/name">Generating by Name</a></li>
<li class=""><a href="/origen/guides/pattern/common">Common API</a></li>
<li class=""><a href="/origen/guides/pattern/j750">J750 API</a></li>
<li class=""><a href="/origen/guides/pattern/v93k">V93K API</a></li>
<li class=""><a href="/origen/guides/pattern/ultraflex">UltraFlex API</a></li>
<li class=""><a href="/origen/guides/pattern/stil">STIL &amp; Other Formats</a></li>
<li class=""><a href="/origen/guides/pattern/custom">Custom Testers</a></li>
<li class=""><a href="/origen/guides/pattern/running">Running The PatGen</a></li>
<li class=""><a href="/origen/guides/pattern/concurrent">Concurrent Patterns</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-7">
              <a class="no-underline">
                Test Program Generator
              </a>
            </div>
            <div id="sidebar-collapse-7" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/program/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/program/philosophy">Philosophy</a></li>
<li class=""><a href="/origen/guides/program/flows">Creating Flows</a></li>
<li class=""><a href="/origen/guides/program/flowapi">Managing Flow Control</a></li>
<li class=""><a href="/origen/guides/program/interface">Creating an Interface</a></li>
<li class=""><a href="/origen/guides/program/resources">Additional Resources</a></li>
<li class=""><a href="/origen/guides/program/code">Dynamic Custom Code</a></li>
<li class=""><a href="/origen/guides/program/j750">J750 API</a></li>
<li class=""><a href="/origen/guides/program/v93k">V93K Common API</a></li>
<li class=""><a href="/origen/guides/program/v93ksmt7">V93K SMT7 API</a></li>
<li class=""><a href="/origen/guides/program/v93ksmt8">V93K SMT8 API</a></li>
<li class=""><a href="/origen/guides/program/ultraflex">UltraFLEX API</a></li>
<li class=""><a href="/origen/guides/program/doc">Documenting the Program</a></li>
<li class=""><a href="/origen/guides/program/custom">Creating Custom Testers</a></li>
<li class=""><a href="/origen/guides/program/generating">Running the ProgGen</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-8">
              <a class="no-underline">
                Simulation
              </a>
            </div>
            <div id="sidebar-collapse-8" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/simulation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/simulation/howitworks">How It Works</a></li>
<li class=""><a href="/origen/guides/simulation/compiling">Compiling the DUT</a></li>
<li class=""><a href="/origen/guides/simulation/ams">AMS Support</a></li>
<li class=""><a href="/origen/guides/simulation/environment">Environment Setup</a></li>
<li class=""><a href="/origen/guides/simulation/app">Application Setup</a></li>
<li class=""><a href="/origen/guides/simulation/patterns">Simulating Patterns</a></li>
<li class=""><a href="/origen/guides/simulation/flows">Simulating Flows</a></li>
<li class=""><a href="/origen/guides/simulation/direct">Direct DUT Manipulation</a></li>
<li class=""><a href="/origen/guides/simulation/log">Simulator Log Output</a></li>
<li class=""><a href="/origen/guides/simulation/artifacts">Artifacts</a></li>
<li class=""><a href="/origen/guides/simulation/debugging">Debugging</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-9">
              <a class="no-underline">
                Documentation Generator
              </a>
            </div>
            <div id="sidebar-collapse-9" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/documentation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/documentation/markdown">Markdown</a></li>
<li class=""><a href="/origen/guides/documentation/linking">Linking</a></li>
<li class=""><a href="/origen/guides/documentation/styling">Styling</a></li>
<li class=""><a href="/origen/guides/documentation/testing">Testing</a></li>
<li class=""><a href="/origen/guides/documentation/api">API Generation</a></li>
<li class=""><a href="/origen/guides/documentation/deploying">Deploying</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-10">
              <a class="no-underline">
                Plugins
              </a>
            </div>
            <div id="sidebar-collapse-10" class="panel-collapse collapse in">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/plugins/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/plugins/importing">Using a Plugin</a></li>
<li class="active"><a href="/origen/guides/plugins/creating">Creating a Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/current">Current Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/environment">Dev Environment</a></li>
<li class=""><a href="/origen/guides/plugins/development">Dev Considerations</a></li>
<li class=""><a href="/origen/guides/plugins/paths">Paths &amp; Origen.root</a></li>
<li class=""><a href="/origen/guides/plugins/app">Config &amp; Origen.app</a></li>
<li class=""><a href="/origen/guides/plugins/misc">Miscellaneous Topics</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-11">
              <a class="no-underline">
                Miscellaneous
              </a>
            </div>
            <div id="sidebar-collapse-11" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/misc/revisioncontrol">Revision Control</a></li>
<li class=""><a href="/origen/guides/misc/remotes">Origen Remotes</a></li>
<li class=""><a href="/origen/guides/misc/lint">Lint Testing</a></li>
<li class=""><a href="/origen/guides/misc/session">Session Store</a></li>
<li class=""><a href="/origen/guides/misc/lsf">LSF API</a></li>
<li class=""><a href="/origen/guides/misc/users">Users, Emails &amp; Maillists</a></li>
<li class=""><a href="/origen/guides/misc/utilities">Utilities &amp; Helpers</a></li>
<li class=""><a href="/origen/guides/misc/coreext">Ruby Extensions</a></li>
<li class=""><a href="/origen/guides/misc/logger">Logger</a></li>
<li class=""><a href="/origen/guides/misc/commands">Adding Commands</a></li>
<li class=""><a href="/origen/guides/misc/commandsov">Overriding Commands</a></li>
<li class=""><a href="/origen/guides/misc/callbacks">Callbacks</a></li>
<li class=""><a href="/origen/guides/misc/appcallbacks">Application Callbacks</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-12">
              <a class="no-underline">
                Advanced Topics
              </a>
            </div>
            <div id="sidebar-collapse-12" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/advanced/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/advanced/invocations">Invocation Customization</a></li>
<li class=""><a href="/origen/guides/advanced/newapps">Custom App Generators</a></li>
                </ul>
              </div>
            </div>
          </div>
      

        </div>

    </div>
  </div>

  <div class="col-md-9 nav-page-container">
    <article class="search-results">

      <h3 class="topic-title">Plugins</h3>

      <h2 class="topic-subtitle">Creating a Plugin</h2>

      <hr>

      <p>Origen plugins are essentially Origen applications themselves.
Follow the standard instructions to <a href="/origen/guides/starting/app">Create a New Application</a>
and choose one of the available plugin templates rather than an application template.</p>

      <div>    
  <a class="anchor" name="Understanding_How_Plugins_are_Loaded"></a>          
  <h4><a href="#Understanding_How_Plugins_are_Loaded">Understanding How Plugins are Loaded</a></h4>          
</div>

      <p>For the purposes of this guide let’s say we are creating a plugin called <code>ATDTest</code>
and this would have a top-level lib file called <code>lib/atd_test.rb</code>.</p>

      <p>When a plugin is run from its own workspace, we would call this running in standalone or development
mode, then it is loaded like any other Origen application.
The first thing Origen does in this case is to load the plugin’s gem bundle, defined in its <code>Gemfile</code>,
and then boot the plugin by loading <code>config/boot.rb</code>. Normally such a file will look like this:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># config/boot.rb</span>
require <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">atd_test</span><span style="color:#710">'</span></span>
</pre></div>
</div>
      </div>

      <p>So by default this simply loads the plugin’s top-level file which in this example is
<code>lib/atd_test.rb</code>.</p>

      <p>However when the plugin is loaded as part of a parent application, neither the plugin’s <code>Gemfile</code> or
its <code>config/boot.rb</code> file will be loaded.
Instead the parent application’s <code>Gemfile</code> will be loaded, and this will contain
a reference to our plugin. The tool that evaluates the Gemfile, called <a href="http://bundler.io">Bundler</a>, will
inspect our plugin’s <code>gemspec</code> file (in this example <code>atd_test.gemspec</code>) and
it will ensure that any dependencies listed there are met. Once the gem bundle has been created
it will then load our plugin’s top-level file, <code>lib/atd_test.rb</code>.</p>

      <p>The take away from this is that the following rules should be observed when creating plugins:</p>

      <ul>
        <li>Load all of your plugin’s code from it’s top-level file (<code>lib/atd_test.rb</code>), if that requires
all of the lib code you wish to share with your users then they will not need to do anything except
add your plugin to their <code>Gemfile</code>.</li>
        <li>The plugin’s <code>config/boot.rb</code> file should only be used for loading any code which is for testing
only or for otherwise running your plugin within its own workspace environment.</li>
        <li>The plugin’s <code>Gemfile</code> should not be used. This should contain a line that calls <code>gemspec</code>
which tells Bundler to refer to the plugin’s gemspec file instead, e.g. <code>atd_test.gemspec</code>. This
prevents you from having to maintain the plugin’s gem dependencies in two separate locations.</li>
        <li>The plugin’s gemspec should be used to declare all of its gem dependencies as shown below. <strong>Note that plugins
must never specify an absolute version of gems in its runtime dependencies.</strong>
</li>
      </ul>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># atd_test.gemspec</span>

<span style="color:#777"># Declare any dependencies that the plugin will need when it is running within a parent application.</span>
<span style="color:#777"># Never specify an absolute version since that can easily conflict with other plugins if they did the</span>
<span style="color:#777"># same. Instead specify a range, normally just a minimum version that you need.</span>
spec.add_runtime_dependency <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">origen_jtag</span><span style="color:#710">"</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">&gt;= 1.1.0</span><span style="color:#710">"</span></span>

<span style="color:#777"># Declare any dependencies that the plugin need when running in standalone/development mode only, a</span>
<span style="color:#777"># very common example is the documentation helpers plugin. This is only required to build the plugins</span>
<span style="color:#777"># web pages, but it is not required at runtime.</span>
<span style="color:#777"># Note that absolute version numbers are allowed here since this does not apply outside of this plugin.</span>
spec.add_development_dependency <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">origen_doc_helpers</span><span style="color:#710">"</span></span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="Sharing_Models_and_Other_Lib_Code"></a>          
  <h4><a href="#Sharing_Models_and_Other_Lib_Code">Sharing Models and Other Lib Code</a></h4>          
</div>

      <p>The plugin’s <code>lib</code> directory will be automatically added to the Ruby load path
no special consideration is required to expose lib code to the parent application.
In our example the parent application will be able to load
any of our code like this:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>require <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">atd_test/atd_16b</span><span style="color:#710">'</span></span>
</pre></div>
</div>
      </div>

      <p>However as noted above the plugin’s top-level file, <code>lib/atd_test.rb</code> will be automatically
loaded, therefore it is the usual convention to have this file require everything else so that the parent
application does not need to manually require anything.</p>

      <div>    
  <a class="anchor" name="Sharing_Other_IP"></a>          
  <h4><a href="#Sharing_Other_IP">Sharing Other IP</a></h4>          
</div>

      <p>To share source files, templates and commands the plugin must define <code>config.shared</code> in
its <code>config/application.rb</code> file, here is an example that will share everything:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>config.shared = {
  <span style="color:#A60">:patterns</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">pattern</span><span style="color:#710">"</span></span>,
  <span style="color:#A60">:templates</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">templates</span><span style="color:#710">"</span></span>,
  <span style="color:#A60">:programs</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">program</span><span style="color:#710">"</span></span>,
  <span style="color:#A60">:command_launcher</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">config/shared_commands.rb</span><span style="color:#710">"</span></span>
}
</pre></div>
</div>
      </div>

      <p>Access can be restricted by specifying a sub-directory, or by simply
removing the given resource:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># Only share a subset of patterns (those that live within the pattern/shared directory, those</span>
<span style="color:#777"># in pattern/development for example would not be available to the host application)</span>
config.shared = {
  <span style="color:#A60">:patterns</span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">pattern/shared</span><span style="color:#710">"</span></span>,
<span style="color:#777">#  :templates =&gt; "templates",</span>
<span style="color:#777">#  :programs =&gt; "program",</span>
<span style="color:#777">#  :command_launcher =&gt; "config/shared_commands.rb"</span>
<span style="color:#777">#  :global_launcher =&gt; "config/global_commands.rb"</span>
}
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="Sharing_Templates"></a>          
  <h4><a href="#Sharing_Templates">Sharing Templates</a></h4>          
</div>

      <p>The host application can reference a template from an added
plugin by using the plugin’s name as a pointer to the
shared template directory (the directory specified in the plugin’s
<code>config.shared[:templates]</code> attribute),
and then a relative path from there to the required template.</p>

      <p>For example the <a href="http://origen-sdk.org/doc_helpers">doc_helpers</a>
plugin contains a test flow layout template at
<code>templates/shared/test/_flow.md.erb</code>, and an importing
application would reference this template via the path
<code>doc_helpers/test/_flow.md.erb</code>.</p>

      <div>    
  <a class="anchor" name="Sharing_Pattern_and_Program_Sources"></a>          
  <h4><a href="#Sharing_Pattern_and_Program_Sources">Sharing Pattern and Program Sources</a></h4>          
</div>

      <p>When test pattern and program directories are shared Origen will look within these for
the requests patterns/flows whenever the given plugin is designated as the
current plugin.</p>

      <p>See the <a href="/origen/guides/plugins/current">Current Plugin</a> for more detail on this.</p>

      <p>For example say our plugin is called <code>atd_test</code> and it provides a pattern
called <code>atd_ramp.rb</code>, then
it could be generated like this from the parent application workspace:</p>

      <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>origen pl atd_test
origen g atd_ramp
</pre></div>
</div>
      </div>

      <p>Alternatively you can override the current plugin at runtime like this, this is
equivalent to the above:</p>

      <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>origen g atd_ramp --plugin atd_test
</pre></div>
</div>
      </div>

      <p>Program generation source files work from exactly the same principles.</p>

      <p>Note that since there is currently no easy way to view a list of all patterns provided
by a plugin, it is conventional for the plugin to provide custom commands to generate
a complete set of patterns, e.g. something like this:</p>

      <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>origen atd_test:prod_pats   # Generate all production patterns from the ATD plugin
origen atd_test:prod_prog   # Generate the production test program from the ATD plugin
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="Sharing_Application_Commands"></a>          
  <h4><a href="#Sharing_Application_Commands">Sharing Application Commands</a></h4>          
</div>

      <p>To share custom commands supply a path to a command definition/launcher file within the plugin
as shown in the example above.</p>

      <p>This file works very similar to the way that <a href="/origen/guides/misc/commands">custom commands</a>
are added to an application.</p>

      <p>Here is an example command launcher file from a real plugin, this adds a custom
command, <code>origen atd_test:j750</code>, to the host application and also extends the
<code>origen g</code> command by adding an additional option to it.</p>

      <p>Note the use of <a href="/origen/guides/plugins/paths">Origen.root!</a> and
<a href="/origen/guides/plugins/app">Origen.app!</a> to refer to the plugin’s own root
and application instance rather than that of the host application.</p>

      <p>Also note that the command has been called <code>atd_test:j750</code> instead of just
<code>j750</code>, this is to ensure that there is no naming collision with commands
that could be added by other plugins.
In future Origen will automatically apply a plugin specific prefix to the commands like this,
but until then all plugin developers are expected to be good citizens and add this manually.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># config/shared_commands.rb</span>

<span style="color:#777"># The requested command is passed in here as @command</span>
<span style="color:#080;font-weight:bold">case</span> <span style="color:#33B">@command</span>

<span style="color:#080;font-weight:bold">when</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">atd_test:j750</span><span style="color:#710">"</span></span>
  require <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#036;font-weight:bold">Origen</span>.root!<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">/lib/commands/j750</span><span style="color:#710">"</span></span>
  <span style="color:#777"># Important to exit when a command has been fulfilled or else Origen core will try and execute it</span>
  exit <span style="color:#00D">0</span>

<span style="color:#777"># Add an additional option to the standard generate command, important to have no exit here</span>
<span style="color:#080;font-weight:bold">when</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">generate</span><span style="color:#710">"</span></span>
  <span style="color:#33B">@application_options</span> &lt;&lt; [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">--md5</span><span style="color:#710">"</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">Apply an MD5 checksum to pattern names</span><span style="color:#710">"</span></span>]
  <span style="color:#036;font-weight:bold">Origen</span>.app!.md5 = <span style="color:#069">true</span> <span style="color:#080;font-weight:bold">if</span> <span style="color:#069">ARGV</span>.include?(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">--md5</span><span style="color:#710">"</span></span>)

<span style="color:#777"># Always leave an else clause to allow control to fall back through to the Origen command handler.</span>
<span style="color:#777"># You probably want to also add the command details to the help shown via 'origen -h',</span>
<span style="color:#777"># you can do this bb adding the required text to @plugin_commands before handing control back to</span>
<span style="color:#777"># Origen.</span>
<span style="color:#080;font-weight:bold">else</span>
  <span style="color:#33B">@plugin_commands</span> &lt;&lt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&lt;&lt;-EOT</span></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">
 atd_test:j750 Generate the ATD test program for J750</span><span style="color:#710">
  EOT</span></span>

<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="Sharing_Global_Commands"></a>          
  <h4><a href="#Sharing_Global_Commands">Sharing Global Commands</a></h4>          
</div>

      <p>The above allows you to share commands when running from within an application instance. But what if
we want to share commands regardless of whether we are running in an application? In this way, Origen
can be even further utilized as a tool distribution platform and but allow all of our non-application
specific functionality to still be used. E.g., LSF manager, authentication, revision control APIs, etc.</p>

      <p>Adding shared global commands is very similiar to adding shared application commands, as shown above. The 
<code>global_launcher</code> option in the <code>config.shared</code> definition points to a file containing
the global commands. This file, call it <code>config/global_commands.rb</code>, for example, is analogous to
the <code>config/shared_commands.rb</code> file from the above and looks about the same, with the exception
that the <code>@plugin_commands</code> variable is now <code>@global_commands</code>. An example is below:</p>

      <pre><code>
case @command

# Print the current version notes of the atd_test module.
when "atd_test:version_notes"
  require "#{Origen.root!}/lib/commands/version_notes"
  exit 0

else
  @global_commands &lt;&lt; &lt;&lt;-EOT
 atd_test:version_notes             Checks the dPDM BOM versus the DS HREFs
                                    -h for a full description
  EOT

end

</code></pre>

      <div class="alert alert-danger">
  <strong>Danger!</strong> Global commands are a bit more involved and require some extra setup outside of the
  plugin itself. When inside an application, these commands will behave as <code>Shared</code> commands,
  but outside of an application, the plugin must be brought in as a dependency either through <code>User Installs</code>
  or <code>Tool Repo Installs</code>, or must be added to the system gems. For a refresher on what this means,
  please see the <a href="/origen/guides/installation/invoking">Invocation Considerations Guide</a>. For even more
  details please see the <a href="/origen/guides/advanced/invocations">Advanced Topic On Invocations</a>.
</div>

      <div class="alert alert-danger">
  <strong>Danger!</strong> <code>Global</code> commands behave slightly differently when run from an application
  versus running without one. Origen does provide a 'standalone' application which gives all the functionality,
  but this application cannot be customized. If you find yourself requiring application-specific behavior, your command
  is better suited to be a <code>Shared</code> command.
</div>

      <div class="alert alert-danger">
  <strong>Danger!</strong> Although <code>Global</code> and <code>Shared</code> commands may have differences
  in the application behavior, they do not have any differences, from an Origen perspective, when invoked
  either by a <code>Tool Repo Install</code> or <code>User Install</code> setup versus a <code>System Level</code>
  setup. Bundler makes it easier to develop Global commands than using Gem natively, so it is recommended
  that you use a <code>User Install</code> when developing Global commands. You can read up on this is and
  how to set it up in the <a href="/origen/guides/advanced/invocations">Advanced Topic On Invocations</a>.
</div>

      <div>    
  <a class="anchor" name="Command_Sharing_Considerations"></a>          
  <h4><a href="#Command_Sharing_Considerations">Command Sharing Considerations</a></h4>          
</div>

      <p>Due to the way that Origen acknowledges shared, global, and application commands, a pitfall exists where user-defined commands
can step on each other (known as <i>command clobbering</i>). This has the implication that you may not be running the command you think you
are running.</p>

      <p>Consider a plugin, called <code>my_plugin_1</code> that adds and implements a shared command <code>my_command</code>. This
command will be available to any application which contains <code>my_plugin_1</code> as a dependency. Now, consider a second plugin,
<code>my_plugin_2</code> which is also a dependency of the application. <code>my_plugin_2</code> also adds and implements the
command <code>my_command</code>. Both plugins are adding the same command and are clobbering the command listing. The behavior
will be dependent on the load order and can be difficult to predict.</p>

      <p>For example, if <code>my_plugin_1</code> is listed before <code>my_plugin_2</code> in the application’s <code>Gemfile</code>, then
<code>my_plugin_1</code> will be loaded and evaluated first and <code>my_command</code> in <code>my_plugin_1</code> will be run. However,
that is not all the consideration needed. If <code>my_plugin_1</code> actually lists <code>my_plugin_2</code> as its dependency,
then <code>my_plugin_2</code> will be loaded before <code>my_plugin_1</code> regardless of the load order in the application’s
<code>Gemfile</code>. Now, <code>my_command</code> in <code>my_plugin_2</code> will be run. This means that it can be difficult
to track which one of the commands will be run in the case of command clobbering between plugins. You can use the <code>bundle</code>
command to see what the final load order is and track down which version of the command will be run.</p>

      <p>The solution to this is to add namespacing to each of the plugins, as shown in the 
<a href="/origen/guides/plugins/creating#Sharing_Application_Commands">Sharing Application Commands</a> 
section above. <b>However, this is up to the plugin developers to abide by. Origen does not guarantee nor enforce this 
behavior and is none the wiser to plugins stepping on each other. No
warnings or errors are generated in the event of command clobbering.</b></p>

      <p>Regarding global commands, the same pitfall exists. However, an additional issue is that a shared command can now clobber a global
command. In the current Origen implementation, shared commands take precedence over global commands. Meaning, if <code>my_plugin_1</code>
implements <code>my_command</code> as a global command and, for one reason or another, it implements <code>my_command</code> as a shared
command, then when running in an application the <code>shared</code> version of <code>my_command</code> will be used. However, external
to an application, the <code>global</code> version of <code>my_command</code> will be run. Like shared command clobbering, <b>no warnings
or errors are generated, Origen is completely oblivious to this behavior, and it is up to the plugin developers to ensure this does not
occur.</b></p>

      <p>This is a known issue which has been registerd with the core team. For tracking this issue’s status, please see the 
<a href="https://github.com/Origen-SDK/origen/issues/108">Cascading Commands Issue on Github.</a></p>

      <div style="position: relative">
  <hr>
  <div>    
  <a class="anchor" name="Comments"></a>          
  <h4><a href="#Comments">Comments</a></h4>          
</div>
</div>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'origen-sdk';
    var disqus_title;
    var disqus_url = 'http://' + window.location.hostname + window.location.pathname;

    disqus_title = $("h1").text();
    if (disqus_title.length == 0) {
      disqus_title = $("h2").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("h3").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("title").text();
    } else {
      disqus_title = disqus_title + ' (' + $("title").text() + ')';
    }

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>

    </article>
  </div>
</div>

<script src="/origen/search.js"></script>


      </div><!-- /.container -->
    

    <footer class="footer">
      <div class="container">
        <p class="pull-left text-muted">
          Generated with the <a href="http://origen-sdk.org">Origen Semiconductor Developer's Kit</a>
        </p>
        <p class="pull-right text-muted">Origen is released under the terms of the <a href="https://choosealicense.com/licenses/mit/">MIT license</a></p>
      </div>
    </footer>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="http://origen-sdk.org/js/lunr.min.js"></script>
    <script src="http://origen-sdk.org/js/highlight.js"></script>
    <script src="http://origen-sdk.org/js/custom.js"></script>
    
      <script>
        ((window.gitter = {}).chat = {}).options = {
          room: 'Origen-SDK/users'
        };
      </script>
      <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
    
  </body>
</html>
