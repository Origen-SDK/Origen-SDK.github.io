<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta property="og:locale" content="en_US">
    <meta name="content-language" content="en_US">

    
    <title>Origen - Guides</title>
    <meta property="og:title" content="Origen - Guides">
    <meta name="twitter:title" content="Origen - Guides">
    <meta itemprop="name" content="Origen - Guides">
      
  
  
    <link rel="author" href="https://plus.google.com/u/1/b/106463981272125989995/106463981272125989">
  
  
    <meta property="og:url" content="https://origen-sdk.org/origen/home/info-rchitect/">
    <meta name="twitter:url" content="https://origen-sdk.org/origen/home/info-rchitect/">
  
  
    <meta property="og:image" content="https://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:image" content="https://origen-sdk.org/favicon-260x260.png">
    <meta itemprop="image" content="https://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:card" content="summary">
  
    <meta property="og:site_name" content="Origen - The Semiconductor Developer's Kit">
  
  
    <meta property="fb:admins" content="origensdk">
  
  
    <meta name="twitter:site" content="@origensdk">
  

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://origen-sdk.org/css/bootstrap_custom.css"></script>
    <!-- Load this up top to allow pages to execute JQuery snippets -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
        ga('create', 'UA-64455560-1', 'auto');
        ga('send', 'pageview');
      </script>
    

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="https://origen-sdk.org/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="https://origen-sdk.org/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://origen-sdk.org/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://origen-sdk.org/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://origen-sdk.org/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://origen-sdk.org/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://origen-sdk.org/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://origen-sdk.org/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://origen-sdk.org/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="https://origen-sdk.org/manifest.json">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
  </head>

  <body>
    
      <div class="container">
        <nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <a href="/" class="navbar-brand" style="margin-top: -4px;">
        <img src="https://origen-sdk.org/img/origen-device.png" style="height:30px; margin-right: 2px; display: inline; margin-top: -2px;">
        <img src="https://origen-sdk.org/img/origen-text.png" style="height:15px; display: inline;">
      </a>
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li class="active"><a href="/origen/guides/installation/introduction">Guides</a></li>
        <li class=""><a href="/origen/videos/1-pattern-in-20-minutes">Videos</a></li>
        <li class=""><a href="/origen/publications">Publications</a></li>
        <li class=""><a href="/origen/api">API</a></li>
        <li class=""><a href="https://github.com/Origen-SDK">Github</a></li>
        <li class=""><a href="/origen/community">Community</a></li>
        <li class=""><a href="/origen/release_notes">Release Notes</a></li>
        <li class=""><a href="/origen/plugins">Plugins</a></li>
      </ul>
    </div>
<!--/.nav-collapse -->
  </div>
</nav>

<div class="row">
  <div class="col-md-3 sidebar-nav-container">
    <div class="well sidebar-nav" style="margin-top: 20px;">
        <div id="search">
          <form style="margin-bottom: 15px;">
            <div class="input-group">
              <input class="form-control" type="search" placeholder="Search the guides...">
              <span class="input-group-btn">
                <button type="submit" class="btn btn-search">GO!</button>
              </span>
            </div>
          </form>
        </div>
        <div class="panel-group" id="sidebar-accordion">

          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-0">
              <a class="no-underline">
                Installing Origen
              </a>
            </div>
            <div id="sidebar-collapse-0" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/installation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/installation/installing">How to Install</a></li>
<li class=""><a href="/origen/guides/installation/installwin">How to Install (Windows)</a></li>
<li class=""><a href="/origen/guides/installation/company">Company Customization</a></li>
<li class=""><a href="/origen/guides/installation/gems">Understanding Gems</a></li>
<li class=""><a href="/origen/guides/installation/invoking">Invoking Considerations</a></li>
<li class=""><a href="/origen/guides/installation/workspace">Workspace Management</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-1">
              <a class="no-underline">
                Getting Started with Origen
              </a>
            </div>
            <div id="sidebar-collapse-1" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/starting/core">Core concepts</a></li>
<li class=""><a href="/origen/guides/starting/app">Creating a New App</a></li>
<li class=""><a href="/origen/guides/starting/directory">Directory Structure</a></li>
<li class=""><a href="/origen/guides/starting/commit">The Initial Commit</a></li>
<li class=""><a href="/origen/guides/starting/files">Creating New Files</a></li>
<li class=""><a href="/origen/guides/starting/blocks">Understanding Blocks</a></li>
<li class=""><a href="/origen/guides/starting/architecture">Application Architecture</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-2">
              <a class="no-underline">
                Runtime Environment
              </a>
            </div>
            <div id="sidebar-collapse-2" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/runtime/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/runtime/mode">Mode</a></li>
<li class=""><a href="/origen/guides/runtime/environment">Environment</a></li>
<li class=""><a href="/origen/guides/runtime/target">Target</a></li>
<li class=""><a href="/origen/guides/runtime/production">Production Targets</a></li>
<li class=""><a href="/origen/guides/runtime/global">Global Setup</a></li>
<li class=""><a href="/origen/guides/runtime/loadorder">Load Order</a></li>
<li class=""><a href="/origen/guides/runtime/programming">Programming</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-3">
              <a class="no-underline">
                Models
              </a>
            </div>
            <div id="sidebar-collapse-3" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/models/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/models/naming">Naming</a></li>
<li class=""><a href="/origen/guides/models/defining">Definition &amp; Hierarchy</a></li>
<li class=""><a href="/origen/guides/models/attributes">Adding Attributes</a></li>
<li class=""><a href="/origen/guides/models/versioning">Versioning</a></li>
<li class=""><a href="/origen/guides/models/bugs">Bugs &amp; Features</a></li>
<li class=""><a href="/origen/guides/models/modes">Package, Mode &amp; Configuration</a></li>
<li class=""><a href="/origen/guides/models/registers">Registers</a></li>
<li class=""><a href="/origen/guides/models/pins">Pins</a></li>
<li class=""><a href="/origen/guides/models/power">Power Domains</a></li>
<li class=""><a href="/origen/guides/models/hw">Hardware Attributes</a></li>
<li class=""><a href="/origen/guides/models/parameters">Parameters</a></li>
<li class=""><a href="/origen/guides/models/specs">Specifications</a></li>
<li class=""><a href="/origen/guides/models/fuses">Fuses</a></li>
<li class=""><a href="/origen/guides/models/components">Generic Components</a></li>
<li class=""><a href="/origen/guides/models/componentable">Creating Your Own Components</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-4">
              <a class="no-underline">
                Compiler (Views)
              </a>
            </div>
            <div id="sidebar-collapse-4" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/compiler/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/compiler/creating">Creating Templates</a></li>
<li class=""><a href="/origen/guides/compiler/subtemplates">Using Sub-Templates</a></li>
<li class=""><a href="/origen/guides/compiler/helpers">Helpers</a></li>
<li class=""><a href="/origen/guides/compiler/running">Running The Compiler</a></li>
<li class=""><a href="/origen/guides/compiler/inline">Inline Compiler</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-5">
              <a class="no-underline">
                Controllers
              </a>
            </div>
            <div id="sidebar-collapse-5" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/controllers/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/controllers/shadow">Shadow Controllers</a></li>
<li class=""><a href="/origen/guides/controllers/direct">Direct Controllers</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-6">
              <a class="no-underline">
                Pattern Generator
              </a>
            </div>
            <div id="sidebar-collapse-6" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/pattern/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/pattern/creating">Creating Patterns</a></li>
<li class=""><a href="/origen/guides/pattern/pins">Pins</a></li>
<li class=""><a href="/origen/guides/pattern/timing">Timing and Waiting</a></li>
<li class=""><a href="/origen/guides/pattern/registers">Registers</a></li>
<li class=""><a href="/origen/guides/pattern/documenting">Documenting Patterns</a></li>
<li class=""><a href="/origen/guides/pattern/name">Generating by Name</a></li>
<li class=""><a href="/origen/guides/pattern/common">Common API</a></li>
<li class=""><a href="/origen/guides/pattern/j750">J750 API</a></li>
<li class=""><a href="/origen/guides/pattern/v93k">V93K API</a></li>
<li class=""><a href="/origen/guides/pattern/ultraflex">UltraFlex API</a></li>
<li class=""><a href="/origen/guides/pattern/stil">STIL &amp; Other Formats</a></li>
<li class=""><a href="/origen/guides/pattern/custom">Custom Testers</a></li>
<li class=""><a href="/origen/guides/pattern/running">Running The PatGen</a></li>
<li class=""><a href="/origen/guides/pattern/concurrent">Concurrent Patterns</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-7">
              <a class="no-underline">
                Test Program Generator
              </a>
            </div>
            <div id="sidebar-collapse-7" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/program/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/program/philosophy">Philosophy</a></li>
<li class=""><a href="/origen/guides/program/flows">Creating Flows</a></li>
<li class=""><a href="/origen/guides/program/flowapi">Managing Flow Control</a></li>
<li class=""><a href="/origen/guides/program/interface">Creating an Interface</a></li>
<li class=""><a href="/origen/guides/program/resources">Additional Resources</a></li>
<li class=""><a href="/origen/guides/program/code">Dynamic Custom Code</a></li>
<li class=""><a href="/origen/guides/program/j750">J750 API</a></li>
<li class=""><a href="/origen/guides/program/v93k">V93K Common API</a></li>
<li class=""><a href="/origen/guides/program/v93ksmt7">V93K SMT7 API</a></li>
<li class=""><a href="/origen/guides/program/v93ksmt8">V93K SMT8 API</a></li>
<li class=""><a href="/origen/guides/program/ultraflex">UltraFLEX API</a></li>
<li class=""><a href="/origen/guides/program/doc">Documenting the Program</a></li>
<li class=""><a href="/origen/guides/program/custom">Creating Custom Testers</a></li>
<li class=""><a href="/origen/guides/program/generating">Running the ProgGen</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-8">
              <a class="no-underline">
                Simulation
              </a>
            </div>
            <div id="sidebar-collapse-8" class="panel-collapse collapse in">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/simulation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/simulation/howitworks">How It Works</a></li>
<li class=""><a href="/origen/guides/simulation/compiling">Compiling the DUT</a></li>
<li class=""><a href="/origen/guides/simulation/ams">AMS Support</a></li>
<li class=""><a href="/origen/guides/simulation/environment">Environment Setup</a></li>
<li class=""><a href="/origen/guides/simulation/app">Application Setup</a></li>
<li class="active"><a href="/origen/guides/simulation/patterns">Simulating Patterns</a></li>
<li class=""><a href="/origen/guides/simulation/flows">Simulating Flows</a></li>
<li class=""><a href="/origen/guides/simulation/direct">Direct DUT Manipulation</a></li>
<li class=""><a href="/origen/guides/simulation/log">Simulator Log Output</a></li>
<li class=""><a href="/origen/guides/simulation/artifacts">Artifacts</a></li>
<li class=""><a href="/origen/guides/simulation/debugging">Debugging</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-9">
              <a class="no-underline">
                Documentation Generator
              </a>
            </div>
            <div id="sidebar-collapse-9" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/documentation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/documentation/markdown">Markdown</a></li>
<li class=""><a href="/origen/guides/documentation/linking">Linking</a></li>
<li class=""><a href="/origen/guides/documentation/styling">Styling</a></li>
<li class=""><a href="/origen/guides/documentation/testing">Testing</a></li>
<li class=""><a href="/origen/guides/documentation/api">API Generation</a></li>
<li class=""><a href="/origen/guides/documentation/deploying">Deploying</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-10">
              <a class="no-underline">
                Plugins
              </a>
            </div>
            <div id="sidebar-collapse-10" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/plugins/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/plugins/importing">Using a Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/creating">Creating a Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/current">Current Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/environment">Dev Environment</a></li>
<li class=""><a href="/origen/guides/plugins/development">Dev Considerations</a></li>
<li class=""><a href="/origen/guides/plugins/paths">Paths &amp; Origen.root</a></li>
<li class=""><a href="/origen/guides/plugins/app">Config &amp; Origen.app</a></li>
<li class=""><a href="/origen/guides/plugins/misc">Miscellaneous Topics</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-11">
              <a class="no-underline">
                Miscellaneous
              </a>
            </div>
            <div id="sidebar-collapse-11" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/misc/revisioncontrol">Revision Control</a></li>
<li class=""><a href="/origen/guides/misc/remotes">Origen Remotes</a></li>
<li class=""><a href="/origen/guides/misc/lint">Lint Testing</a></li>
<li class=""><a href="/origen/guides/misc/session">Session Store</a></li>
<li class=""><a href="/origen/guides/misc/lsf">LSF API</a></li>
<li class=""><a href="/origen/guides/misc/users">Users, Emails &amp; Maillists</a></li>
<li class=""><a href="/origen/guides/misc/utilities">Utilities &amp; Helpers</a></li>
<li class=""><a href="/origen/guides/misc/coreext">Ruby Extensions</a></li>
<li class=""><a href="/origen/guides/misc/logger">Logger</a></li>
<li class=""><a href="/origen/guides/misc/commands">Adding Commands</a></li>
<li class=""><a href="/origen/guides/misc/commandsov">Overriding Commands</a></li>
<li class=""><a href="/origen/guides/misc/callbacks">Callbacks</a></li>
<li class=""><a href="/origen/guides/misc/appcallbacks">Application Callbacks</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-12">
              <a class="no-underline">
                Advanced Topics
              </a>
            </div>
            <div id="sidebar-collapse-12" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/advanced/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/advanced/invocations">Invocation Customization</a></li>
<li class=""><a href="/origen/guides/advanced/newapps">Custom App Generators</a></li>
                </ul>
              </div>
            </div>
          </div>
      

        </div>

    </div>
  </div>

  <div class="col-md-9 nav-page-container">
    <article class="search-results">

      <h3 class="topic-title">Simulation</h3>

      <h2 class="topic-subtitle">Simulating Patterns</h2>

      <hr>

      <p>Patterns are simulated by simply generating the pattern with
a <a href="/origen/guides/simulation/environment">simulation environment</a>
selected:</p>

      <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>origen g my_pattern -e environment/sim.rb
</pre></div>
</div>
      </div>

      <p>Most of the <a href="/origen/guides/pattern/common">common pattern API</a> is supported
by OrigenSim and therefore you should expect to find the simulation environment
a drop-in replacement for your conventional ATE environment driver.</p>

      <p>If you come across an API that OrigenSim does not support but you think that
it should, please raise a ticket here describing what you
tried to do <a href="https://github.com/Origen-SDK/origen_sim/issues">https://github.com/Origen-SDK/origen_sim/issues</a>.</p>

      <div>    
  <a class="anchor" name="Waiting_For_Events"></a>          
  <h4><a href="#Waiting_For_Events">Waiting For Events</a></h4>          
</div>

      <p>When your pattern invokes some DUT action and you need to wait for it to complete, you
normally have two options:</p>

      <ul>
        <li>Calculate how long it should take and wait for a fixed delay</li>
        <li>Implement a match loop to dynamically wait for an expected response to occur</li>
      </ul>

      <p>Both of these are fully supported by OrigenSim, see the
<a href="/origen/guides/pattern/timing">Timing and Waiting guide</a> for more information on these APIs.</p>

      <p>However, if your pattern generation flow is going to be supported by simulation, then you also have
a third option - to derive the required wait time from the simulation itself.</p>

      <p>OrigenSim makes this very easy via the following API:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>cc <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">Wait for the program command to complete</span><span style="color:#710">"</span></span>

tester.sim_delay <span style="color:#A60">:program_command</span> <span style="color:#080;font-weight:bold">do</span>
  dut.pin(<span style="color:#A60">:done</span>).assert!(<span style="color:#00D">1</span>)
<span style="color:#080;font-weight:bold">end</span>
dut.pin(<span style="color:#A60">:done</span>).dont_care  <span style="color:#777"># Any pin assertions/reads created within the block will persist beyond it, so</span>
                          <span style="color:#777"># remember to clear any assertions that you don't want to carryover afterwards</span>
</pre></div>
</div>
      </div>

      <p>The <code>sim_delay</code> method provides the convenience of a match loop for the purposes of
delay calculation but will still generate a static pattern for the ATE. It will automatically calculate how
long the given block takes to pass and then insert that delay when later generating the pattern for an ATE.</p>

      <p>An ID must be given to each delay, <code>:program_command</code> in this example, and if the same ID is used in multiple
calls to <code>sim_delay</code> then it means that the same delay will be used for each occurrence.</p>

      <p>When simulating a pattern that contains <code>sim_delay</code> block(s) for the first time, the delay will
be calculated from the simulation and stored in an Org file (Origen native pattern format) within your
application’s pattern directory. These files should be committed to your revision control system and considered
as part of your application.</p>

      <p>The next time that you simulate it, the previously calculated delay will be inserted into the
pattern and therefore the simulation will be verifying that the delay is correct.</p>

      <p>If you want to re-calculate the delays during a simulation then run with the <code>--sim_capture</code> switch:</p>

      <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>origen g my_pattern -e environment/sim.rb --sim_capture
</pre></div>
</div>
      </div>

      <p>Additional padding can be added to the calculated delay like this (all the usual <code>time_in_us:</code> style
of time options are supported):</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>tester.sim_delay <span style="color:#A60">:program_command</span>, <span style="color:#606">padding</span>: { <span style="color:#606">time_in_cycles</span>: <span style="color:#00D">10</span> } <span style="color:#080;font-weight:bold">do</span>
  dut.pin(<span style="color:#A60">:done</span>).assert!(<span style="color:#00D">1</span>)
<span style="color:#080;font-weight:bold">end</span>
dut.pin(<span style="color:#A60">:done</span>).dont_care  <span style="color:#777"># Any pin assertions/reads created within the block will persist beyond it, so</span>
                          <span style="color:#777"># remember to clear any assertions that you don't want to carryover afterwards</span>
</pre></div>
</div>
      </div>

      <p>By default, the block will be evaluated constantly until it passes when calculating the delay from
the simulation.</p>

      <p>If the time is long and this is making your simulation run too slow, you can use lower resolution
by supplying a <code>:resolution</code> option, either as a number of cycles:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>tester.sim_delay <span style="color:#A60">:program_command</span>, <span style="color:#606">resolution</span>: <span style="color:#00D">10</span> <span style="color:#080;font-weight:bold">do</span>
  dut.pin(<span style="color:#A60">:done</span>).assert!(<span style="color:#00D">1</span>)
<span style="color:#080;font-weight:bold">end</span>
dut.pin(<span style="color:#A60">:done</span>).dont_care  <span style="color:#777"># Any pin assertions/reads created within the block will persist beyond it, so</span>
                          <span style="color:#777"># remember to clear any assertions that you don't want to carryover afterwards</span>
</pre></div>
</div>
      </div>

      <p>or by supplying a hash filled with the usual time options:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>tester.sim_delay <span style="color:#A60">:program_command</span>, <span style="color:#606">resolution</span>: { <span style="color:#606">time_in_ns</span>: <span style="color:#00D">50</span> } <span style="color:#080;font-weight:bold">do</span>
  dut.pin(<span style="color:#A60">:done</span>).assert!(<span style="color:#00D">1</span>)
<span style="color:#080;font-weight:bold">end</span>
dut.pin(<span style="color:#A60">:done</span>).dont_care  <span style="color:#777"># Any pin assertions/reads created within the block will persist beyond it, so</span>
                          <span style="color:#777"># remember to clear any assertions that you don't want to carryover afterwards</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="Capturing_Responses_from_the_Simulation"></a>          
  <h4><a href="#Capturing_Responses_from_the_Simulation">Capturing Responses from the Simulation</a></h4>          
</div>

      <p>Sometimes the response from your DUT maybe hard to predict and/or complicated to model in Origen, think about a digital data
stream response from a pin when testing a communications protocol.</p>

      <p>OrigenSim provides an API for such a case which allows pin output values for a subset of pins/vectors
to be sampled during a simulation. The response is then captured and converted into the corresponding
expect data when the same pattern is later generated for the ATE.</p>

      <p>Capturing is really easy, just wrap the operation you want to capture in your pattern source code like this:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>tester.sim_capture <span style="color:#A60">:cmd55</span>, <span style="color:#A60">:dout</span>, <span style="color:#A60">:test_bus</span>, <span style="color:#A60">:tdo</span> <span style="color:#080;font-weight:bold">do</span>
  dut.pins(<span style="color:#A60">:din_port</span>).drive!(<span style="color:#00D">0x1234_5678</span>)
  dut.cmd.write!(<span style="color:#00D">0x55</span>)
  <span style="color:#00D">60</span>.cycles
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p>The first argument is an ID for the capture, this can be anything but the user must assign it.
Then supply a list of pin/pin_group IDs (or pin objects) that you want to capture.</p>

      <p>If you use the same ID more than once it means that the same captured data will be used in multiple places.</p>

      <p>When you add this to the pattern an error will be raised if you try to generate an ATE pattern, this will
advise that the data has not been captured yet and it must be run in a simulation first.</p>

      <p>When you run it in a simulation for the first time, the data will be captured and stored to your application
in the <code>pattern/sim_capture</code> directory. These files should be checked into your application as if they were regular patterns.</p>

      <p>On subsequent simulation runs, the data will not be captured but instead will be re-played from the simulation
- i.e. the pattern will assert that the DUT output matches what is in the capture file.
In other words, by adding this and then simulating twice using the same command, you are both capturing and
then verifying the captured data.</p>

      <p>Add this switch to update the captures during a subsequent simulation run:</p>

      <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>origen g my_pattern --sim_capture
</pre></div>
</div>
      </div>

      <p>To use the captured data in an ATE pattern, simply switch to an ATE target and generate as normal.</p>

      <p>A known limitation of this feature is that the pin state data is currently captured at the end of a cycle, not
at the point during the cycle where it will be read by the pattern.
However, if this were to be a problem in a particular application, you would see it fail when re-playing the
captured data in simulation.</p>

      <div>    
  <a class="anchor" name="Configuring_the_Capture_Storage_Location"></a>          
  <h4><a href="#Configuring_the_Capture_Storage_Location">Configuring the Capture Storage Location</a></h4>          
</div>

      <p>By default, both <code>sim_delay</code> and <code>sim_capture</code> will save their captured data to 
Org files (Origen native pattern format) using the following file naming rule:
<code>Origen.root/pattern/org/&lt;target name&gt;/&lt;capture ID&gt;.org</code>.</p>

      <p>If your application is a top-level application then the default setting should work fine unless you wish
to share/re-use captured data between multiple targets.</p>

      <p>Another reason to change from the default would be if data is captured at plugin-level and this needs
to be referenced later when running within a top-level application.
There are potentially two issues in that case:</p>

      <ul>
        <li>
<code>Origen.root</code> will point to the top-level application’s root instead of the plugin’s</li>
        <li>The target name used at the top-level could be different from the one that was used within the plugin to capture
the data</li>
      </ul>

      <p>In such cases, the default capture directory can be changed by setting the <code>OrigenSim.capture_dir</code> attribute.
This can be set anytime before the first call is made to <code>sim_delay</code> or <code>sim_capture</code>.</p>

      <p>For example, a plugin that needs its captured data to work later as part of a top-level application,
could set the capture directory in a <a href="/origen/guides/misc/callbacks/#startup(options)">startup callback</a>,
like this:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">startup</span>(options)
  <span style="color:#777"># Only modify this if we are the current app or plugin</span>
  <span style="color:#080;font-weight:bold">if</span> <span style="color:#036;font-weight:bold">Origen</span>.app!.current? || <span style="color:#036;font-weight:bold">Origen</span>.app!.current_plugin?
    <span style="color:#777"># Use a directory within our root and named after the current IP block, rather than the target</span>
    <span style="color:#036;font-weight:bold">OrigenSim</span>.capture_dir = <span style="color:#036;font-weight:bold">Origen</span>.root!.join(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">pattern</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">org</span><span style="color:#710">'</span></span>, dut.myip.name)
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="Creating_Simulation-Only_Assertions"></a>          
  <h4><a href="#Creating_Simulation-Only_Assertions">Creating Simulation-Only Assertions</a></h4>          
</div>

      <p>Users are of course encouraged to write patterns that test the DUT via its pin interface since such
patterns will work in physical environments like the ATE.</p>

      <p>However, it can be useful to supplement your patterns with simulation-only assertions which peek inside
the DUT to check that it is behaving as expected. Such assertions can report useful failure information
back to the user which may help when debugging a failed pattern simulation.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># This code must be skipped when the pattern is generating for an ATE target environment</span>
<span style="color:#080;font-weight:bold">if</span> tester.sim?
  value = tester.simulator.peek(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">origen.dut.path.to.net</span><span style="color:#710">"</span></span>).to_i[<span style="color:#00D">7</span>..<span style="color:#00D">4</span>]
  <span style="color:#080;font-weight:bold">if</span> value != <span style="color:#00D">0xA</span>
    <span style="color:#036;font-weight:bold">OrigenSim</span>.error <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">The internal node was </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>value.to_hex<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> instead of 0xA!</span><span style="color:#710">"</span></span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p>Note the use of <code>OrigenSim.error</code> to report the error message, this will cause the simulation result
to be reported as a FAIL, even if all pin level assertions otherwise pass.</p>

      <p>Also note that the value returned from the <code>peek</code> method is converted into an integer. This is because
<code>peek</code> returns an instance of <a href="/origen/api/Origen/Value.html">Origen::Value</a> which can also handle
<code>X</code> or <code>Z</code> values.</p>

      <p>So for example, if you actually wanted a given bit to be <code>Z</code> you could write your assertion as:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">unless</span> tester.simulator.peek(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">origen.dut.path.to.net</span><span style="color:#710">"</span></span>)[<span style="color:#00D">4</span>].z?
  <span style="color:#036;font-weight:bold">OrigenSim</span>.error <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">Bit 4 of some net was not in hi-Z mode!</span><span style="color:#710">"</span></span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p>See the <a href="/origen/guides/simulation/direct">Direct DUT Manipulation</a> guide for more details on these
APIs.</p>

      <div style="position: relative">
  <hr>
  <div>    
  <a class="anchor" name="Comments"></a>          
  <h4><a href="#Comments">Comments</a></h4>          
</div>
</div>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'origen-sdk';
    var disqus_title;
    var disqus_url = 'https://' + window.location.hostname + window.location.pathname;

    disqus_title = $("h1").text();
    if (disqus_title.length == 0) {
      disqus_title = $("h2").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("h3").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("title").text();
    } else {
      disqus_title = disqus_title + ' (' + $("title").text() + ')';
    }

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>

    </article>
  </div>
</div>

<script src="/origen/search.js"></script>


      </div><!-- /.container -->
    

    <footer class="footer">
      <div class="container">
        <p class="pull-left text-muted">
          Generated with the <a href="https://origen-sdk.org">Origen Semiconductor Developer's Kit</a>
        </p>
        <p class="pull-right text-muted">Origen is released under the terms of the <a href="https://choosealicense.com/licenses/mit/">MIT license</a></p>
      </div>
    </footer>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://origen-sdk.org/js/lunr.min.js"></script>
    <script src="https://origen-sdk.org/js/highlight.js"></script>
    <script src="https://origen-sdk.org/js/custom.js"></script>
    
      <script>
        ((window.gitter = {}).chat = {}).options = {
          room: 'Origen-SDK/users'
        };
      </script>
      <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
    
  </body>
</html>
