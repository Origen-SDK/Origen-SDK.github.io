<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta property="og:locale" content="en_US">
    <meta name="content-language" content="en_US">

    
    <title>Origen - Guides</title>
    <meta property="og:title" content="Origen - Guides">
    <meta name="twitter:title" content="Origen - Guides">
    <meta itemprop="name" content="Origen - Guides">
      
  
  
    <link rel="author" href="https://plus.google.com/u/1/b/106463981272125989995/106463981272125989">
  
  
    <meta property="og:url" content="https://origen-sdk.org/origen/guides/advanced/newapps">
    <meta name="twitter:url" content="https://origen-sdk.org/origen/guides/advanced/newapps">
  
  
    <meta property="og:image" content="https://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:image" content="https://origen-sdk.org/favicon-260x260.png">
    <meta itemprop="image" content="https://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:card" content="summary">
  
    <meta property="og:site_name" content="Origen - The Semiconductor Developer's Kit">
  
  
    <meta property="fb:admins" content="origensdk">
  
  
    <meta name="twitter:site" content="@origensdk">
  

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://origen-sdk.org/css/bootstrap_custom.css"></script>
    <!-- Load this up top to allow pages to execute JQuery snippets -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
        ga('create', 'UA-64455560-1', 'auto');
        ga('send', 'pageview');
      </script>
    

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="https://origen-sdk.org/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="https://origen-sdk.org/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://origen-sdk.org/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://origen-sdk.org/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://origen-sdk.org/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://origen-sdk.org/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://origen-sdk.org/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://origen-sdk.org/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://origen-sdk.org/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="https://origen-sdk.org/manifest.json">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
  </head>

  <body>
    
      <div class="container">
        <nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <a href="/" class="navbar-brand" style="margin-top: -4px;">
        <img src="https://origen-sdk.org/img/origen-device.png" style="height:30px; margin-right: 2px; display: inline; margin-top: -2px;">
        <img src="https://origen-sdk.org/img/origen-text.png" style="height:15px; display: inline;">
      </a>
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li class="active"><a href="/origen/guides/installation/introduction">Guides</a></li>
        <li class=""><a href="/origen/videos/1-pattern-in-20-minutes">Videos</a></li>
        <li class=""><a href="/origen/publications">Publications</a></li>
        <li class=""><a href="/origen/api">API</a></li>
        <li class=""><a href="https://github.com/Origen-SDK">Github</a></li>
        <li class=""><a href="/origen/community">Community</a></li>
        <li class=""><a href="/origen/release_notes">Release Notes</a></li>
        <li class=""><a href="/origen/plugins">Plugins</a></li>
      </ul>
    </div>
<!--/.nav-collapse -->
  </div>
</nav>

<div class="row">
  <div class="col-md-3 sidebar-nav-container">
    <div class="well sidebar-nav" style="margin-top: 20px;">
        <div id="search">
          <form style="margin-bottom: 15px;">
            <div class="input-group">
              <input class="form-control" type="search" placeholder="Search the guides...">
              <span class="input-group-btn">
                <button type="submit" class="btn btn-search">GO!</button>
              </span>
            </div>
          </form>
        </div>
        <div class="panel-group" id="sidebar-accordion">

          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-0">
              <a class="no-underline">
                Installing Origen
              </a>
            </div>
            <div id="sidebar-collapse-0" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/installation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/installation/installing">How to Install</a></li>
<li class=""><a href="/origen/guides/installation/installwin">How to Install (Windows)</a></li>
<li class=""><a href="/origen/guides/installation/company">Company Customization</a></li>
<li class=""><a href="/origen/guides/installation/gems">Understanding Gems</a></li>
<li class=""><a href="/origen/guides/installation/invoking">Invoking Considerations</a></li>
<li class=""><a href="/origen/guides/installation/workspace">Workspace Management</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-1">
              <a class="no-underline">
                Getting Started with Origen
              </a>
            </div>
            <div id="sidebar-collapse-1" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/starting/core">Core concepts</a></li>
<li class=""><a href="/origen/guides/starting/app">Creating a New App</a></li>
<li class=""><a href="/origen/guides/starting/directory">Directory Structure</a></li>
<li class=""><a href="/origen/guides/starting/commit">The Initial Commit</a></li>
<li class=""><a href="/origen/guides/starting/files">Creating New Files</a></li>
<li class=""><a href="/origen/guides/starting/blocks">Understanding Blocks</a></li>
<li class=""><a href="/origen/guides/starting/architecture">Application Architecture</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-2">
              <a class="no-underline">
                Runtime Environment
              </a>
            </div>
            <div id="sidebar-collapse-2" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/runtime/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/runtime/mode">Mode</a></li>
<li class=""><a href="/origen/guides/runtime/environment">Environment</a></li>
<li class=""><a href="/origen/guides/runtime/target">Target</a></li>
<li class=""><a href="/origen/guides/runtime/production">Production Targets</a></li>
<li class=""><a href="/origen/guides/runtime/global">Global Setup</a></li>
<li class=""><a href="/origen/guides/runtime/loadorder">Load Order</a></li>
<li class=""><a href="/origen/guides/runtime/programming">Programming</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-3">
              <a class="no-underline">
                Models
              </a>
            </div>
            <div id="sidebar-collapse-3" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/models/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/models/naming">Naming</a></li>
<li class=""><a href="/origen/guides/models/defining">Definition &amp; Hierarchy</a></li>
<li class=""><a href="/origen/guides/models/attributes">Adding Attributes</a></li>
<li class=""><a href="/origen/guides/models/versioning">Versioning</a></li>
<li class=""><a href="/origen/guides/models/bugs">Bugs &amp; Features</a></li>
<li class=""><a href="/origen/guides/models/modes">Package, Mode &amp; Configuration</a></li>
<li class=""><a href="/origen/guides/models/registers">Registers</a></li>
<li class=""><a href="/origen/guides/models/pins">Pins</a></li>
<li class=""><a href="/origen/guides/models/power">Power Domains</a></li>
<li class=""><a href="/origen/guides/models/hw">Hardware Attributes</a></li>
<li class=""><a href="/origen/guides/models/parameters">Parameters</a></li>
<li class=""><a href="/origen/guides/models/specs">Specifications</a></li>
<li class=""><a href="/origen/guides/models/fuses">Fuses</a></li>
<li class=""><a href="/origen/guides/models/components">Generic Components</a></li>
<li class=""><a href="/origen/guides/models/componentable">Creating Your Own Components</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-4">
              <a class="no-underline">
                Compiler (Views)
              </a>
            </div>
            <div id="sidebar-collapse-4" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/compiler/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/compiler/creating">Creating Templates</a></li>
<li class=""><a href="/origen/guides/compiler/subtemplates">Using Sub-Templates</a></li>
<li class=""><a href="/origen/guides/compiler/helpers">Helpers</a></li>
<li class=""><a href="/origen/guides/compiler/running">Running The Compiler</a></li>
<li class=""><a href="/origen/guides/compiler/inline">Inline Compiler</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-5">
              <a class="no-underline">
                Controllers
              </a>
            </div>
            <div id="sidebar-collapse-5" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/controllers/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/controllers/shadow">Shadow Controllers</a></li>
<li class=""><a href="/origen/guides/controllers/direct">Direct Controllers</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-6">
              <a class="no-underline">
                Pattern Generator
              </a>
            </div>
            <div id="sidebar-collapse-6" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/pattern/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/pattern/creating">Creating Patterns</a></li>
<li class=""><a href="/origen/guides/pattern/pins">Pins</a></li>
<li class=""><a href="/origen/guides/pattern/timing">Timing and Waiting</a></li>
<li class=""><a href="/origen/guides/pattern/registers">Registers</a></li>
<li class=""><a href="/origen/guides/pattern/documenting">Documenting Patterns</a></li>
<li class=""><a href="/origen/guides/pattern/name">Generating by Name</a></li>
<li class=""><a href="/origen/guides/pattern/common">Common API</a></li>
<li class=""><a href="/origen/guides/pattern/j750">J750 API</a></li>
<li class=""><a href="/origen/guides/pattern/v93k">V93K API</a></li>
<li class=""><a href="/origen/guides/pattern/ultraflex">UltraFlex API</a></li>
<li class=""><a href="/origen/guides/pattern/stil">STIL &amp; Other Formats</a></li>
<li class=""><a href="/origen/guides/pattern/custom">Custom Testers</a></li>
<li class=""><a href="/origen/guides/pattern/running">Running The PatGen</a></li>
<li class=""><a href="/origen/guides/pattern/concurrent">Concurrent Patterns</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-7">
              <a class="no-underline">
                Test Program Generator
              </a>
            </div>
            <div id="sidebar-collapse-7" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/program/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/program/philosophy">Philosophy</a></li>
<li class=""><a href="/origen/guides/program/flows">Creating Flows</a></li>
<li class=""><a href="/origen/guides/program/flowapi">Managing Flow Control</a></li>
<li class=""><a href="/origen/guides/program/interface">Creating an Interface</a></li>
<li class=""><a href="/origen/guides/program/resources">Additional Resources</a></li>
<li class=""><a href="/origen/guides/program/code">Dynamic Custom Code</a></li>
<li class=""><a href="/origen/guides/program/j750">J750 API</a></li>
<li class=""><a href="/origen/guides/program/v93k">V93K API</a></li>
<li class=""><a href="/origen/guides/program/ultraflex">UltraFLEX API</a></li>
<li class=""><a href="/origen/guides/program/doc">Documenting the Program</a></li>
<li class=""><a href="/origen/guides/program/custom">Creating Custom Testers</a></li>
<li class=""><a href="/origen/guides/program/generating">Running the ProgGen</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-8">
              <a class="no-underline">
                Simulation
              </a>
            </div>
            <div id="sidebar-collapse-8" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/simulation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/simulation/howitworks">How It Works</a></li>
<li class=""><a href="/origen/guides/simulation/compiling">Compiling the DUT</a></li>
<li class=""><a href="/origen/guides/simulation/ams">AMS Support</a></li>
<li class=""><a href="/origen/guides/simulation/environment">Environment Setup</a></li>
<li class=""><a href="/origen/guides/simulation/app">Application Setup</a></li>
<li class=""><a href="/origen/guides/simulation/patterns">Simulating Patterns</a></li>
<li class=""><a href="/origen/guides/simulation/flows">Simulating Flows</a></li>
<li class=""><a href="/origen/guides/simulation/direct">Direct DUT Manipulation</a></li>
<li class=""><a href="/origen/guides/simulation/log">Simulator Log Output</a></li>
<li class=""><a href="/origen/guides/simulation/artifacts">Artifacts</a></li>
<li class=""><a href="/origen/guides/simulation/debugging">Debugging</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-9">
              <a class="no-underline">
                Documentation Generator
              </a>
            </div>
            <div id="sidebar-collapse-9" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/documentation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/documentation/markdown">Markdown</a></li>
<li class=""><a href="/origen/guides/documentation/linking">Linking</a></li>
<li class=""><a href="/origen/guides/documentation/styling">Styling</a></li>
<li class=""><a href="/origen/guides/documentation/testing">Testing</a></li>
<li class=""><a href="/origen/guides/documentation/api">API Generation</a></li>
<li class=""><a href="/origen/guides/documentation/deploying">Deploying</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-10">
              <a class="no-underline">
                Plugins
              </a>
            </div>
            <div id="sidebar-collapse-10" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/plugins/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/plugins/importing">Using a Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/creating">Creating a Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/current">Current Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/environment">Dev Environment</a></li>
<li class=""><a href="/origen/guides/plugins/development">Dev Considerations</a></li>
<li class=""><a href="/origen/guides/plugins/paths">Paths &amp; Origen.root</a></li>
<li class=""><a href="/origen/guides/plugins/app">Config &amp; Origen.app</a></li>
<li class=""><a href="/origen/guides/plugins/misc">Miscellaneous Topics</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-11">
              <a class="no-underline">
                Miscellaneous
              </a>
            </div>
            <div id="sidebar-collapse-11" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/misc/revisioncontrol">Revision Control</a></li>
<li class=""><a href="/origen/guides/misc/remotes">Origen Remotes</a></li>
<li class=""><a href="/origen/guides/misc/lint">Lint Testing</a></li>
<li class=""><a href="/origen/guides/misc/session">Session Store</a></li>
<li class=""><a href="/origen/guides/misc/lsf">LSF API</a></li>
<li class=""><a href="/origen/guides/misc/users">Users, Emails &amp; Maillists</a></li>
<li class=""><a href="/origen/guides/misc/utilities">Utilities &amp; Helpers</a></li>
<li class=""><a href="/origen/guides/misc/coreext">Ruby Extensions</a></li>
<li class=""><a href="/origen/guides/misc/logger">Logger</a></li>
<li class=""><a href="/origen/guides/misc/commands">Adding Commands</a></li>
<li class=""><a href="/origen/guides/misc/commandsov">Overriding Commands</a></li>
<li class=""><a href="/origen/guides/misc/callbacks">Callbacks</a></li>
<li class=""><a href="/origen/guides/misc/appcallbacks">Application Callbacks</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-12">
              <a class="no-underline">
                Advanced Topics
              </a>
            </div>
            <div id="sidebar-collapse-12" class="panel-collapse collapse in">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/advanced/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/advanced/invocations">Invocation Customization</a></li>
<li class="active"><a href="/origen/guides/advanced/newapps">Custom App Generators</a></li>
                </ul>
              </div>
            </div>
          </div>
      

        </div>

    </div>
  </div>

  <div class="col-md-9 nav-page-container">
    <article class="search-results">

      <h3 class="topic-title">Advanced Topics</h3>

      <h2 class="topic-subtitle">Creating Custom Application Generators</h2>

      <hr>

      <p>When initially getting started with Origen, it is sufficient to use the generic
set of new application generators that are built into the <code>origen new</code> command.</p>

      <p>However, over time you may start to identify common configuration or setups that
are used regularly within many of your own applications or those created by your
company.
Origen provides the ability to extend the <code>origen new</code> command on an individual user
or a per-company basis, so that newly created applications come with much more customized
setup and configuration out-of-the-box than is provided by the generic starter applications.</p>

      <p>To extend the <code>origen new</code> command with your own custom application generators,
first run <code>origen new</code> to create an application generator plugin by selecting the following options:</p>

      <ul>
        <li>1 - Origen Infrastructure
          <ul>
            <li>0 - A plugin to make your own application templates available through the ‘origen new’ command</li>
          </ul>
        </li>
      </ul>

      <p>To hook your plugin into the <code>origen new</code> command, either release it to your private gem server, check it into your
Git server, or copy it to a central location that is accessible to all of your users.
Then update the <a href="https://github.com/Origen-SDK/origen/blob/master/origen_site_config.yml#L7">app_generators</a> attribute within your
<a href="https://origen-sdk.org/origen/guides/installation/company/">site_config file</a> to point to wherever you have put it.</p>

      <p>If you don’t see it straight away, run <code>origen new</code> with the <code>--fetch</code> option to force it to
fetch the latest versions of the generators.</p>

      <p>There now follows a guide on how to add a new generator to your custom generators plugin…</p>

      <div>    
  <a class="anchor" name="Quickstart"></a>          
  <h2><a href="#Quickstart">Quickstart</a></h2>          
</div>

      <p>To create a new application generator run the following command:</p>

      <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>origen app_gen:new
</pre></div>
</div>
      </div>

      <p>This will create a new generator within the <code>lib</code> directory and then update the top-level file in the <code>lib</code> directory
to properly hook it into the <code>origen new</code> system.
By default, this new generator will create the same empty application or plugin starter that you would get from
selecting option 0 in the <code>origen new</code> command.</p>

      <p>You can test run your new generator by running the following command:</p>

      <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>origen app_gen:test
</pre></div>
</div>
      </div>

      <p>This will build a new app in the application’s <code>tmp</code> directory, and when complete you can cd into that directory
and run <code>origen -v</code> to verify that it can boot. At this point you can further interact with the application in the
normal way to test out anything else.</p>

      <p>During the creation of a new generator, you will likely repeat this many times as you go through the process of modifying the
generator and then observing the new output. To make this easier, a system is built in that allows you to automate the
answers to the questions that are given to the user when creating a new application.</p>

      <p>Within the top-level lib file you will see a set of test inputs something like this:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#036;font-weight:bold">TEST_INPUTS</span> = [
  <span style="color:#777"># 0 - TestEngineering::MicroTestBlock</span>
  [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">1</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">0</span><span style="color:#710">'</span></span>, <span style="color:#A60">:default</span>, <span style="color:#A60">:default</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">A cool plugin</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">yes</span><span style="color:#710">'</span></span>, <span style="color:#A60">:default</span>]
] <span style="color:#777"># END_OF_TEST_INPUTS Don't remove this comment, it is used by the app_gen:new command!</span>
</pre></div>
</div>
      </div>

      <p>The last item in the array will be a starter set of inputs that has been created for the new genrator that was just added.
To test the new generator with these inputs supply the <code>-i</code> option and supply the index number of the set of inputs you
wish to apply:</p>

      <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>origen app_gen:test -i 0
</pre></div>
</div>
      </div>
      <p>Modify the inputs as required as you further develop the generator, making sure to add a value for any additional questions
that you add. The <code>:default</code> keyword can be used for any questions which have a default option that you wish to select, this
is equivalent to just pressing return in response to the given question.</p>

      <p>In all cases an additional argument must be supplied at the end, this tells the test command about any commands that you want
to run within the generated application to test it.
Supplying the <code>:default</code> keyword for this argument will execute the following tests:</p>

      <ul>
        <li>origen -v</li>
        <li>origen lint –no-correct</li>
        <li>Test that the default target loads cleanly</li>
        <li>origen web compile –no-serve</li>
      </ul>

      <p>If you want to run no tests, set this final argument to <code>nil</code>.</p>

      <p>Alternatively you can specify your own set of operations by supplying an array of commands:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">1</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">0</span><span style="color:#710">'</span></span>, <span style="color:#A60">:default</span>, <span style="color:#A60">:default</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">A cool plugin</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">yes</span><span style="color:#710">'</span></span>, [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">origen -v</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">origen g my_pattern</span><span style="color:#710">'</span></span>]]
</pre></div>
</div>
      </div>

      <p>Within the array of custom commands you can also supply the <code>:default</code> and <code>:load_target</code> keywords to execute the default
set of tests or the load target test respectively, for example:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">1</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">0</span><span style="color:#710">'</span></span>, <span style="color:#A60">:default</span>, <span style="color:#A60">:default</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">A cool plugin</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">yes</span><span style="color:#710">'</span></span>, [<span style="color:#A60">:default</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">origen g my_pattern</span><span style="color:#710">'</span></span>]]
</pre></div>
</div>
      </div>

      <p>To run a regression test which will execute all sets of test inputs, run:</p>

      <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>origen app_gen:test -r
</pre></div>
</div>
      </div>

      <p>You should find the generator file itself (the one created for you in a sub-folder of the <code>lib</code> directory) well commented
and with pointers towards examples from existing generators.</p>

      <p>Once you are happy with your new generator release your application generators plugin in the normal way. The version of the
generators picked up by the <code>origen new</code> command is automatically refreshed on a per-user basis every 24 hours, or if you
need access to it immediately run <code>origen new</code> with the <code>--fetch</code> option to force it.</p>

      <p>There now follows a more detailed guide on how to create the generator itself.</p>

      <div>    
  <a class="anchor" name="Notes_on_Creating_Generators"></a>          
  <h2><a href="#Notes_on_Creating_Generators">Notes on Creating Generators</a></h2>          
</div>

      <p>The application generators use a code generator API from Origen core which itself leans heavily on a 3rd party gem library called
Thor. This gem is used quite widely in the Ruby community for this kind of thing, not least by the code generators
provided by the Ruby on Rails web application platform.</p>

      <p>The code generator API allows the user to do things like:</p>

      <ul>
        <li>Run code to collect user input</li>
        <li>Compile templates to produce dynamic output based on the user’s responses</li>
        <li>Copy files verbatim</li>
        <li>Create directories and symlinks</li>
        <li>Delete and inject lines into existing files</li>
      </ul>

      <p>Each application type that can be generated by this plugin is an example of a code generator.</p>

      <p>The new application generators are organized into the following hierarchy:</p>

      <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>OrigenAppGenerators::Application
  |
   -&gt; MyAppGenerators::Application (Mixes in MyAppGenerators::Base)
  |
   -&gt; OrigenAppGenerators::Plugin
        |
        -&gt; MyAppGenerators::Plugin (Mixes in MyAppGenerators::Base)
</pre></div>
</div>
      </div>

      <p><strong>All generators must be a subclass of either <code>OrigenAppGenerators::Application</code>
or <code>OrigenAppGenerators::Plugin</code> depending on whether the end application is intended to be a plugin or not.</strong></p>

      <p>The new application generators should all perform the following functions:</p>

      <ul>
        <li>Prompt the user with some questions to get the new application name and so on</li>
        <li>Create the new application files by either copying or compiling source files and creating
symlinks or directories as required</li>
        <li>Make any final modifications to the resulting files</li>
        <li>Display any information that the user should know about their new application</li>
      </ul>

      <div>    
  <a class="anchor" name="Generator_Execution"></a>          
  <h3><a href="#Generator_Execution">Generator Execution</a></h3>          
</div>

      <p>When a generator is executed any methods defined in it will be called in the order that they are
defined.
Any methods that are marked as <code>protected</code> will not be called.</p>

      <p>For example when the following generator is executed:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">MyAppGenerators</span>
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MyGenerator</span> &lt; <span style="color:#036;font-weight:bold">Application</span>
    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">say_hello</span>
      puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">Hello</span><span style="color:#710">"</span></span> 
    <span style="color:#080;font-weight:bold">end</span>

    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">call_a_helper</span>
      puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">About to call</span><span style="color:#710">"</span></span>
      a_helper_method
      puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">Returned from call</span><span style="color:#710">"</span></span>
    <span style="color:#080;font-weight:bold">end</span>

    protected

    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">a_helper_method</span>
      puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">Helper method called!</span><span style="color:#710">"</span></span>
    <span style="color:#080;font-weight:bold">end</span>

    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">this_does_nothing</span>
      puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">Another method called!</span><span style="color:#710">"</span></span>
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p>Then you would see this:</p>

      <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>Hello
About to call
Helper method called!
Returned from call
</pre></div>
</div>
      </div>

      <p>Note that any methods defined by the parent classes will get called first. The
parent <code>OrigenAppGenerators::Application</code> and <code>OrigenAppGenerators::Plugin</code> classes implement methods to get the user
input that will be common to all applications.</p>

      <p>You can disable this behavior if required by re-defining the relevant methods within the child generator class.</p>

      <div>    
  <a class="anchor" name="Source_Files"></a>          
  <h3><a href="#Source_Files">Source Files</a></h3>          
</div>

      <p>All template or static source files for the generators live in <code>templates/app_generators</code> and from
there in sub folders based on the name of the particular generator.</p>

      <p>All path references to source files made in your generator should be relative to its source file folder, and in
practice what this means is that if you want to refer to the source file of what will become
<code>Origen.root/config/application.rb</code> then you just refer to <code>config/application.rb</code>.</p>

      <p>When looking for a particular source file the generator will search in the various source directories
belonging to your generator’s parent classes.
For example let’s say you make a test engineering generator that has the following class hierarchy:</p>

      <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>OrigenAppGenerators::Application
  |
   -&gt; OrigenAppGenerators::Plugin
        |
         -&gt; MyAppGenerators::Plugin (Mixes in MyAppGenerators::Base)
              |
               -&gt; TestEngineering::TestBlock
</pre></div>
</div>
      </div>

      <p>Then the following source paths will be searched in this order:</p>

      <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>&lt;my_app_generators&gt;/templates/app_generators/test_engineering/test_block
&lt;my_app_generators&gt;/templates/app_generators/plugin
&lt;my_app_generators&gt;/templates/app_generators/base
&lt;origen_app_generators&gt;/templates/app_generators/plugin
&lt;origen_app_generators&gt;/templates/app_generators/application
</pre></div>
</div>
      </div>

      <p>This means that if you create a file called <code>config/application.rb</code> within
<code>&lt;my_app_generators&gt;/templates/app_generators/test_engineering/test_block</code> then this will override the corresponding
file from origen_app_generators.</p>

      <p>However see the warning in <em>The Filelist</em> section below before doing this!</p>

      <div>    
  <a class="anchor" name="Lean_Environment"></a>          
  <h3><a href="#Lean_Environment">Lean Environment</a></h3>          
</div>

      <p>When the generator is run by a user to generate a new application, it will not run within the scope of an
Origen application.
This means that any references to <code>Origen.app</code> within the generator code are meaningless and will
result in an error.</p>

      <p>Furthermore, because there is no application there is also no associated gem bundle, so the generator must
be able to run within the lean Ruby environment that is used to boot Origen. In practice what this means is
that you can use any gems that Origen itself relies on (these will be installed in the base Ruby installation),
but you cannot use any others.</p>

      <p>The <code>origen app_gen:test</code> command that is provided for testing the generators will run them within the lean environment, so if it
works there you can be confident that it will also run in production.</p>

      <div>    
  <a class="anchor" name="The_Filelist"></a>          
  <h3><a href="#The_Filelist">The Filelist</a></h3>          
</div>

      <p>Each generator should return the list of files to be created in the new application via its
<code>filelist</code> method.
If you don’t make any changes to this then it will simply inherit the list of files defined
by the generator’s parent class.</p>

      <p>The filelist is also used to define any directories or symlinks that should be created.
The generator class created by the <code>origen app_gen:new</code> command contains a commented example of how to add or
remove the various elements from the filelist.</p>

      <p>Some application generators may not make any changes to the filelist and will simply augment
the basic application/plugin shell by adding additional code to some of the existing files.</p>

      <p>This can be done by either overriding the source file by defining it in the generator’s own
source directory, or by post-modifying the files after the filelist has been rendered as described further
down.</p>

      <p><strong>Warning!</strong> While it is tempting (and easier) to simply copy a source file and then
edit it as required for your target application, this will make your generator harder to maintain as it
will not automatically pick up changes and improvements to the master templates that will occur over time.
Therefore it is always preferable to post-modify the file to delete sections or to modify or add additional code
whenever possible.</p>

      <p><strong>Note that developers should not add logic to the application/plugin master source files to
implement generator specific output. This approach is not scalable as in the future this plugin
is expected to support many different application types.</strong></p>

      <p>Instead, individual generators must either completely override or post-modify the master files
as appropriate.</p>

      <div>    
  <a class="anchor" name="Templates"></a>          
  <h4><a href="#Templates">Templates</a></h4>          
</div>

      <p>All files in the file list will be compiled unless explicitly marked with <code>copy: true</code>
or if the destination file name ends in <code>.erb</code>.</p>

      <p>ERB markup can be used the same way as in regular Origen templates with the following exceptions:</p>

      <p>Whole line Ruby is not enabled (a limitation imposed by Thor), therefore instead of this:</p>

      <div class="language-eruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>% if x_is_true
Include something
% end
</pre></div>
</div>
      </div>

      <p>You must do:</p>

      <div class="language-eruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">&lt;%</span> <span style="color:#080;font-weight:bold">if</span> x_is_true <span style="font-weight:bold;color:#666">-%&gt;</span></span>
Include something
<span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">&lt;%</span> <span style="color:#080;font-weight:bold">end</span> <span style="font-weight:bold;color:#666">-%&gt;</span></span>
</pre></div>
</div>
      </div>

      <p>Access to variables collected by your generator at runtime is done by assigning them to instance
variables (instead of the options hash used by the Origen compiler).</p>

      <p>So for example if you have your user input a product name, then you should assign that to an
instance variable:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#33B">@product_name</span> = get_product_name
</pre></div>
</div>
      </div>

      <p>Then in the template:</p>

      <div class="language-eruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>The product name is <span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">&lt;%=</span> <span style="color:#33B">@product_name</span> <span style="font-weight:bold;color:#666">%&gt;</span></span>
</pre></div>
</div>
      </div>

      <p>By convention, templates in this plugin do not end in <code>.erb</code> and this is reserved
for files that would become <code>.erb</code> files in the end application.</p>

      <div>    
  <a class="anchor" name="Post_Generation_Modifications"></a>          
  <h3><a href="#Post_Generation_Modifications">Post Generation Modifications</a></h3>          
</div>

      <p>It is better to customize any files that are common to all applications
by post modification rather than by completely overriding the entire file.</p>

      <p>To do this you have access to the Thor Action methods described here:
<a href="https://www.rubydoc.info/github/wycats/thor/Thor/Actions">Thor Action API</a></p>

      <p>You can see some examples of these being used in the <code>enable</code> method in
<code>lib/app_generators/new.rb</code> where they are used to add the new generator details
to <code>lib/origen_app_generators.rb</code>.</p>

      <p>As a quick example say you wanted to add a method to <code>config/application.rb</code>, this
could be achieved by injecting it at the end of the class like this:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># Always ensure the filelist has been rendered first</span>
<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">generate_files</span>
  build_filelist 
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># Add a custom domain method to config/application.rb</span>
<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">add_method_to_application</span>
  <span style="color:#777"># Define a regular expression to define a point in the file where you want to inject, in this</span>
  <span style="color:#777"># case the 'end' of the class definition (the only 'end' that occurs at the beginning of a line)</span>
  end_of_class = <span style="background-color:hsla(300,100%,50%,0.06)"><span style="color:#404">/</span><span style="color:#808">^end</span><span style="color:#404">/</span></span>
  <span style="color:#777"># Define the code snippet</span>
  code = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&lt;&lt;-END</span></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">
  def some_domain_specific_method
    do_something
  end  </span><span style="color:#710">
  END</span></span>
  <span style="color:#777"># Now inject it</span>
  inject_into_file <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">config/application.rb</span><span style="color:#710">"</span></span>, code, <span style="color:#606">before</span>: end_of_class
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <div style="position: relative">
  <hr>
  <div>    
  <a class="anchor" name="Comments"></a>          
  <h4><a href="#Comments">Comments</a></h4>          
</div>
</div>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'origen-sdk';
    var disqus_title;
    var disqus_url = 'https://' + window.location.hostname + window.location.pathname;

    disqus_title = $("h1").text();
    if (disqus_title.length == 0) {
      disqus_title = $("h2").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("h3").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("title").text();
    } else {
      disqus_title = disqus_title + ' (' + $("title").text() + ')';
    }

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>

    </article>
  </div>
</div>

<script src="/origen/search.js"></script>


      </div><!-- /.container -->
    

    <footer class="footer">
      <div class="container">
        <p class="pull-left text-muted">
          Generated with the <a href="https://origen-sdk.org">Origen Semiconductor Developer's Kit</a>
        </p>
        <p class="pull-right text-muted">Origen is released under the terms of the <a href="https://choosealicense.com/licenses/mit/">MIT license</a></p>
      </div>
    </footer>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://origen-sdk.org/js/lunr.min.js"></script>
    <script src="https://origen-sdk.org/js/highlight.js"></script>
    <script src="https://origen-sdk.org/js/custom.js"></script>
    
      <script>
        ((window.gitter = {}).chat = {}).options = {
          room: 'Origen-SDK/users'
        };
      </script>
      <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
    
  </body>
</html>
