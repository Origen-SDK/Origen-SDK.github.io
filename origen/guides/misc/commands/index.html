<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta property="og:locale" content="en_US">
    <meta name="content-language" content="en_US">

    
    <title>Origen - Guides</title>
    <meta property="og:title" content="Origen - Guides">
    <meta name="twitter:title" content="Origen - Guides">
    <meta itemprop="name" content="Origen - Guides">
      
  
  
    <link rel="author" href="https://plus.google.com/u/1/b/106463981272125989995/106463981272125989">
  
  
    <meta property="og:url" content="https://origen-sdk.org/origen/guides/misc/commands">
    <meta name="twitter:url" content="https://origen-sdk.org/origen/guides/misc/commands">
  
  
    <meta property="og:image" content="https://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:image" content="https://origen-sdk.org/favicon-260x260.png">
    <meta itemprop="image" content="https://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:card" content="summary">
  
    <meta property="og:site_name" content="Origen - The Semiconductor Developer's Kit">
  
  
    <meta property="fb:admins" content="origensdk">
  
  
    <meta name="twitter:site" content="@origensdk">
  

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://origen-sdk.org/css/bootstrap_custom.css"></script>
    <!-- Load this up top to allow pages to execute JQuery snippets -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
        ga('create', 'UA-64455560-1', 'auto');
        ga('send', 'pageview');
      </script>
    

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="https://origen-sdk.org/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="https://origen-sdk.org/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://origen-sdk.org/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://origen-sdk.org/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://origen-sdk.org/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://origen-sdk.org/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://origen-sdk.org/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://origen-sdk.org/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://origen-sdk.org/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="https://origen-sdk.org/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="https://origen-sdk.org/manifest.json">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
  </head>

  <body>
    
      <div class="container">
        <nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <a href="/" class="navbar-brand" style="margin-top: -4px;">
        <img src="https://origen-sdk.org/img/origen-device.png" style="height:30px; margin-right: 2px; display: inline; margin-top: -2px;">
        <img src="https://origen-sdk.org/img/origen-text.png" style="height:15px; display: inline;">
      </a>
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown ">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="tour">Tour <span class="caret"></span></a>
          <ul class="dropdown-menu" aria-labelledby="tour">
            <li><a href="/origen/tour/basics">Basics</a></li>
            <li class="divider">
            </li>
<li><a href="/origen/tour/test-engineering">Test Engineers</a></li>
            <li><a href="/origen/tour/design-engineering">Design Engineers</a></li>
          </ul>
        </li>
        <li class="active"><a href="/origen/guides/starting/introduction">Guides</a></li>
        <li class=""><a href="/origen/videos/1-pattern-in-20-minutes">Videos</a></li>
        <li class=""><a href="/origen/publications">Publications</a></li>
        <li class=""><a href="/origen/api">API</a></li>
        <li class=""><a href="https://github.com/Origen-SDK">Github</a></li>
        <li class=""><a href="/origen/community">Community</a></li>
        <li class=""><a href="/origen/release_notes">Release Notes</a></li>
        <li class=""><a href="/origen/plugins">Plugins</a></li>
      </ul>
    </div>
<!--/.nav-collapse -->
  </div>
</nav>

<div class="row">
  <div class="col-md-3 sidebar-nav-container">
    <div class="well sidebar-nav" style="margin-top: 20px;">
        <div id="search">
          <form style="margin-bottom: 15px;">
            <div class="input-group">
              <input class="form-control" type="search" placeholder="Search the guides...">
              <span class="input-group-btn">
                <button type="submit" class="btn btn-search">GO!</button>
              </span>
            </div>
          </form>
        </div>
        <div class="panel-group" id="sidebar-accordion">

          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-0">
              <a class="no-underline">
                Getting Started with Origen
              </a>
            </div>
            <div id="sidebar-collapse-0" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/starting/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/starting/core">Core concepts</a></li>
<li class=""><a href="/origen/guides/starting/installing">How to Install</a></li>
<li class=""><a href="/origen/guides/starting/installwin">How to Install (Windows)</a></li>
<li class=""><a href="/origen/guides/starting/company">Company Customization</a></li>
<li class=""><a href="/origen/guides/starting/gems">Understanding Gems</a></li>
<li class=""><a href="/origen/guides/starting/app">Creating a New App</a></li>
<li class=""><a href="/origen/guides/starting/invoking">Invoking Considerations</a></li>
<li class=""><a href="/origen/guides/starting/commit">The Initial Commit</a></li>
<li class=""><a href="/origen/guides/starting/workspace">Workspace Management</a></li>
<li class=""><a href="/origen/guides/starting/architecture">Application Architecture</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-1">
              <a class="no-underline">
                Runtime Environment
              </a>
            </div>
            <div id="sidebar-collapse-1" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/runtime/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/runtime/mode">Mode</a></li>
<li class=""><a href="/origen/guides/runtime/environment">Environment</a></li>
<li class=""><a href="/origen/guides/runtime/target">Target</a></li>
<li class=""><a href="/origen/guides/runtime/production">Production Targets</a></li>
<li class=""><a href="/origen/guides/runtime/global">Global Setup</a></li>
<li class=""><a href="/origen/guides/runtime/loadorder">Load Order</a></li>
<li class=""><a href="/origen/guides/runtime/programming">Programming</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-2">
              <a class="no-underline">
                Models
              </a>
            </div>
            <div id="sidebar-collapse-2" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/models/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/models/naming">Naming</a></li>
<li class=""><a href="/origen/guides/models/defining">Definition &amp; Hierarchy</a></li>
<li class=""><a href="/origen/guides/models/attributes">Adding Attributes</a></li>
<li class=""><a href="/origen/guides/models/versioning">Versioning</a></li>
<li class=""><a href="/origen/guides/models/bugs">Bugs &amp; Features</a></li>
<li class=""><a href="/origen/guides/models/modes">Package, Mode &amp; Configuration</a></li>
<li class=""><a href="/origen/guides/models/registers">Registers</a></li>
<li class=""><a href="/origen/guides/models/pins">Pins</a></li>
<li class=""><a href="/origen/guides/models/power">Power Domains</a></li>
<li class=""><a href="/origen/guides/models/hw">Hardware Attributes</a></li>
<li class=""><a href="/origen/guides/models/parameters">Parameters</a></li>
<li class=""><a href="/origen/guides/models/specs">Specifications</a></li>
<li class=""><a href="/origen/guides/models/fuses">Fuses</a></li>
<li class=""><a href="/origen/guides/models/components">Generic Components</a></li>
<li class=""><a href="/origen/guides/models/componentable">Creating Your Own Components</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-3">
              <a class="no-underline">
                Compiler (Views)
              </a>
            </div>
            <div id="sidebar-collapse-3" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/compiler/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/compiler/creating">Creating Templates</a></li>
<li class=""><a href="/origen/guides/compiler/subtemplates">Using Sub-Templates</a></li>
<li class=""><a href="/origen/guides/compiler/helpers">Helpers</a></li>
<li class=""><a href="/origen/guides/compiler/running">Running The Compiler</a></li>
<li class=""><a href="/origen/guides/compiler/inline">Inline Compiler</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-4">
              <a class="no-underline">
                Controllers
              </a>
            </div>
            <div id="sidebar-collapse-4" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/controllers/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/controllers/shadow">Shadow Controllers</a></li>
<li class=""><a href="/origen/guides/controllers/direct">Direct Controllers</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-5">
              <a class="no-underline">
                Pattern Generator
              </a>
            </div>
            <div id="sidebar-collapse-5" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/pattern/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/pattern/creating">Creating Patterns</a></li>
<li class=""><a href="/origen/guides/pattern/pins">Pins</a></li>
<li class=""><a href="/origen/guides/pattern/timing">Timing and Waiting</a></li>
<li class=""><a href="/origen/guides/pattern/registers">Registers</a></li>
<li class=""><a href="/origen/guides/pattern/documenting">Documenting Patterns</a></li>
<li class=""><a href="/origen/guides/pattern/name">Generating by Name</a></li>
<li class=""><a href="/origen/guides/pattern/common">Common API</a></li>
<li class=""><a href="/origen/guides/pattern/j750">J750 API</a></li>
<li class=""><a href="/origen/guides/pattern/v93k">V93K API</a></li>
<li class=""><a href="/origen/guides/pattern/ultraflex">UltraFlex API</a></li>
<li class=""><a href="/origen/guides/pattern/custom">Custom Testers</a></li>
<li class=""><a href="/origen/guides/pattern/running">Running The PatGen</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-6">
              <a class="no-underline">
                Test Program Generator
              </a>
            </div>
            <div id="sidebar-collapse-6" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/program/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/program/philosophy">Philosophy</a></li>
<li class=""><a href="/origen/guides/program/flows">Creating Flows</a></li>
<li class=""><a href="/origen/guides/program/flowapi">Managing Flow Control</a></li>
<li class=""><a href="/origen/guides/program/interface">Creating an Interface</a></li>
<li class=""><a href="/origen/guides/program/resources">Additional Resources</a></li>
<li class=""><a href="/origen/guides/program/code">Dynamic Custom Code</a></li>
<li class=""><a href="/origen/guides/program/j750">J750 API</a></li>
<li class=""><a href="/origen/guides/program/v93k">V93K API</a></li>
<li class=""><a href="/origen/guides/program/ultraflex">UltraFLEX API</a></li>
<li class=""><a href="/origen/guides/program/doc">Documenting the Program</a></li>
<li class=""><a href="/origen/guides/program/custom">Creating Custom Testers</a></li>
<li class=""><a href="/origen/guides/program/generating">Running the ProgGen</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-7">
              <a class="no-underline">
                Simulation
              </a>
            </div>
            <div id="sidebar-collapse-7" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/simulation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/simulation/howitworks">How It Works</a></li>
<li class=""><a href="/origen/guides/simulation/compiling">Compiling the DUT</a></li>
<li class=""><a href="/origen/guides/simulation/environment">Environment Setup</a></li>
<li class=""><a href="/origen/guides/simulation/app">Application Setup</a></li>
<li class=""><a href="/origen/guides/simulation/patterns">Simulating Patterns</a></li>
<li class=""><a href="/origen/guides/simulation/flows">Simulating Flows</a></li>
<li class=""><a href="/origen/guides/simulation/log">Simulator Log Output</a></li>
<li class=""><a href="/origen/guides/simulation/artifacts">Artifacts</a></li>
<li class=""><a href="/origen/guides/simulation/debugging">Interactive Debugging</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-8">
              <a class="no-underline">
                Documentation Generator
              </a>
            </div>
            <div id="sidebar-collapse-8" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/documentation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/documentation/markdown">Markdown</a></li>
<li class=""><a href="/origen/guides/documentation/linking">Linking</a></li>
<li class=""><a href="/origen/guides/documentation/styling">Styling</a></li>
<li class=""><a href="/origen/guides/documentation/testing">Testing</a></li>
<li class=""><a href="/origen/guides/documentation/api">API Generation</a></li>
<li class=""><a href="/origen/guides/documentation/deploying">Deploying</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-9">
              <a class="no-underline">
                Plugins
              </a>
            </div>
            <div id="sidebar-collapse-9" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/plugins/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/plugins/importing">Using a Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/creating">Creating a Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/current">Current Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/environment">Dev Environment</a></li>
<li class=""><a href="/origen/guides/plugins/development">Dev Considerations</a></li>
<li class=""><a href="/origen/guides/plugins/paths">Paths &amp; Origen.root</a></li>
<li class=""><a href="/origen/guides/plugins/app">Config &amp; Origen.app</a></li>
<li class=""><a href="/origen/guides/plugins/misc">Miscellaneous Topics</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-10">
              <a class="no-underline">
                Miscellaneous
              </a>
            </div>
            <div id="sidebar-collapse-10" class="panel-collapse collapse in">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/misc/revisioncontrol">Revision Control</a></li>
<li class=""><a href="/origen/guides/misc/remotes">Origen Remotes</a></li>
<li class=""><a href="/origen/guides/misc/lint">Lint Testing</a></li>
<li class=""><a href="/origen/guides/misc/session">Session Store</a></li>
<li class=""><a href="/origen/guides/misc/lsf">LSF API</a></li>
<li class=""><a href="/origen/guides/misc/users">Users, Emails &amp; Maillists</a></li>
<li class=""><a href="/origen/guides/misc/utilities">Utilities &amp; Helpers</a></li>
<li class=""><a href="/origen/guides/misc/coreext">Ruby Extensions</a></li>
<li class=""><a href="/origen/guides/misc/logger">Logger</a></li>
<li class="active"><a href="/origen/guides/misc/commands">Adding Commands</a></li>
<li class=""><a href="/origen/guides/misc/commandsov">Overriding Commands</a></li>
<li class=""><a href="/origen/guides/misc/callbacks">Callbacks</a></li>
<li class=""><a href="/origen/guides/misc/appcallbacks">Application Callbacks</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-11">
              <a class="no-underline">
                Advanced Topics
              </a>
            </div>
            <div id="sidebar-collapse-11" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/advanced/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/advanced/invocations">Invocation Customization</a></li>
<li class=""><a href="/origen/guides/advanced/newapps">Custom App Generators</a></li>
                </ul>
              </div>
            </div>
          </div>
      

        </div>

    </div>
  </div>

  <div class="col-md-9 nav-page-container">
    <article class="search-results">

      <h3 class="topic-title">Miscellaneous</h3>

      <h2 class="topic-subtitle">Adding Commands</h2>

      <hr>

      <p>Applications can add their own custom commands to the Origen namespace which makes
it very easy to distribute and document custom scripts that support the application environment.
Of course like everything else these scripts will have full access to the device models
by default.</p>

      <p>Commands should be added to the file
<code>config/commands.rb</code> in the first instance
and as they grow you can extract the larger commands out to their own files.</p>

      <p>A skeleton <code>config/commands.rb</code> file should already exist in your application and
when an <code>origen</code> command is launched via the command line Origen gives the application
command file the first shot at fulfilling it.
So in fact it is also possible to override the built-in commands if you ever have a need to do so.</p>

      <p>An empty command file has this structure:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>aliases ={
}

<span style="color:#777"># The requested command is passed in here as @command, this checks it against</span>
<span style="color:#777"># the above alias table and should not be removed.</span>
<span style="color:#33B">@command</span> = aliases[<span style="color:#33B">@command</span>] || <span style="color:#33B">@command</span>

<span style="color:#777"># Now branch to the specific task code</span>
<span style="color:#080;font-weight:bold">case</span> <span style="color:#33B">@command</span>

<span style="color:#080;font-weight:bold">else</span>
  <span style="color:#33B">@application_commands</span> = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&lt;&lt;-END</span></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">
  END</span></span>

<span style="color:#080;font-weight:bold">end</span> 
</pre></div>
</div>
      </div>

      <p>When the command is launched the first argument, the command name, will be available in the instance
variable <code>@command</code>.
Your code should interrogate this variable to decide whether the command request is one that should be
handled by your application, or else left for Origen to dispatch (in the skeleton commands file all
requests are simply passed through to Origen by default).</p>

      <p>Let’s say for example that we want to implement a command that will print the current time, we could
accomplish this like so:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>aliases ={
  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">time</span><span style="color:#710">"</span></span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">current_time</span><span style="color:#710">"</span></span>
}

<span style="color:#777"># The requested command is passed in here as @command, this checks it against</span>
<span style="color:#777"># the above alias table and should not be removed.</span>
<span style="color:#33B">@command</span> = aliases[<span style="color:#33B">@command</span>] || <span style="color:#33B">@command</span>

<span style="color:#777"># Now branch to the specific task code</span>
<span style="color:#080;font-weight:bold">case</span> <span style="color:#33B">@command</span>

<span style="color:#080;font-weight:bold">when</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">current_time</span><span style="color:#710">"</span></span>
  puts <span style="color:#036;font-weight:bold">Time</span>.now
  exit <span style="color:#00D">0</span>

<span style="color:#080;font-weight:bold">else</span>
  <span style="color:#33B">@application_commands</span> = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&lt;&lt;-END</span></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">
 current_time      Print the current time (aliased as "time") </span><span style="color:#710">
  END</span></span>

<span style="color:#080;font-weight:bold">end</span> 
</pre></div>
</div>
      </div>

      <p>The following points are worth noting from this example:</p>

      <ul>
        <li>We implemented an alias of “time” for the “current_time” command. This means that it
can be launched either via <code>origen current_time</code> or the more succinct <code>origen time</code>. The
use of aliases is completely at your discretion and they are not required.</li>
        <li>The command code should always complete with <code>exit 0</code>. This is to end the current command
request since otherwise the request will then fall through to Origen which will attempt to process it.</li>
        <li>You can document your commands via the <code>@application_commands</code> variable, this should
be a simple one liner that describes what your command does. This information will be available to the
user when they run <code>origen -h</code>. More detailed documentation for your command can be added
by adding support for command options (see below).</li>
      </ul>

      <div>    
  <a class="anchor" name="Loading_the_Application"></a>          
  <h4><a href="#Loading_the_Application">Loading the Application</a></h4>          
</div>

      <p>Such commands will execute very quickly since they don’t bother to load any of your
application environment, but what if you need to access your models?</p>

      <p>The application will load automatically anytime you reference <code>Origen.app</code>, this
will load your <code>config/boot.rb</code> file and all of your models and other logic
will then become available.
One other useful side effect of this for
scripting purposes is that it will make the root directory of your application available
via <code>Origen.root</code>.</p>

      <p>For example:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#036;font-weight:bold">MyClass</span>.do_something    <span style="color:#777"># =&gt; I want to access my code here but this is giving an error</span>

<span style="color:#036;font-weight:bold">Origen</span>.app   <span style="color:#777"># Make a reference to the application, this will load it if is not already loaded</span>

<span style="color:#036;font-weight:bold">MyClass</span>.do_something    <span style="color:#777"># =&gt; Now it works</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="Loading_the_Target"></a>          
  <h4><a href="#Loading_the_Target">Loading the Target</a></h4>          
</div>

      <p>See the dedicated section on <a href="/origen/guides/runtime/programming">Programming the Runtime Environment</a>.</p>

      <div>    
  <a class="anchor" name="Handling_Command_Options"></a>          
  <h4><a href="#Handling_Command_Options">Handling Command Options</a></h4>          
</div>

      <p>Most scripts will benefit from giving the user some options to configure the behavior and this is easy to add.
Any command arguments or options passed in by the user will be available via the <code>ARGV</code> array.</p>

      <div class="alert alert-danger">

        <div>    
  <a class="anchor" name="Note!"></a>          
  <h4><a href="#Note!">Note!</a></h4>          
</div>

        <p><code>-d</code> is a reserved option which you cannot use, Origen uses this to enable the debugger and will strip it
out of <code>ARGV</code> before handing it over to your command code.</p>
      </div>

      <p>You can actually query this variable manually to decide what to do, but it is recommended that you use
the Ruby <a href="https://ruby-doc.org/stdlib-2.2.0/libdoc/optparse/rdoc/OptionParser.html">OptionParser</a> library
which makes it very easy to both parse user options and to document them.</p>

      <p>Let’s say that we wanted to give the user the ability to specify what format the time should be presented
in by using the <a href="https://www.ruby-doc.org/core-2.2.0/Time.html#method-i-strftime">strftime</a> method. This could
be accomplished like this:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>aliases ={
  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">time</span><span style="color:#710">"</span></span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">current_time</span><span style="color:#710">"</span></span>
}

<span style="color:#777"># The requested command is passed in here as @command, this checks it against</span>
<span style="color:#777"># the above alias table and should not be removed.</span>
<span style="color:#33B">@command</span> = aliases[<span style="color:#33B">@command</span>] || <span style="color:#33B">@command</span>

<span style="color:#777"># Now branch to the specific task code</span>
<span style="color:#080;font-weight:bold">case</span> <span style="color:#33B">@command</span>

<span style="color:#080;font-weight:bold">when</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">current_time</span><span style="color:#710">"</span></span>
  options = {}
  opt_parser = <span style="color:#036;font-weight:bold">OptionParser</span>.new <span style="color:#080;font-weight:bold">do</span> |opts|
    opts.banner = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&lt;&lt;-END_DESC</span></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">
 origen time - This command will print the current time using the default Time
               format, alternatively specify your own format via the -f option.</span><span style="color:#710">
    END_DESC</span></span>
    opts.on(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">-f</span><span style="color:#710">"</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">--format FORMAT</span><span style="color:#710">"</span></span>, <span style="color:#036;font-weight:bold">String</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">FORMAT should use strftime notation</span><span style="color:#710">"</span></span>) { |t| options[<span style="color:#A60">:format</span>] = t }
    opts.separator <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#710">"</span></span>
    opts.on(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">-h</span><span style="color:#710">"</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">--help</span><span style="color:#710">"</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">Show this message</span><span style="color:#710">"</span></span>) { puts opts; exit }
  <span style="color:#080;font-weight:bold">end</span>
  opt_parser.parse! <span style="color:#069">ARGV</span>

  <span style="color:#080;font-weight:bold">if</span> options[<span style="color:#A60">:format</span>]
    puts <span style="color:#036;font-weight:bold">Time</span>.now.strftime(options[<span style="color:#A60">:format</span>])
  <span style="color:#080;font-weight:bold">else</span>
    puts <span style="color:#036;font-weight:bold">Time</span>.now
  <span style="color:#080;font-weight:bold">end</span>
  exit <span style="color:#00D">0</span>

<span style="color:#080;font-weight:bold">else</span>
  <span style="color:#33B">@application_commands</span> = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&lt;&lt;-END</span></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">
 current_time      Print the current time (aliased as "time") </span><span style="color:#710">
  END</span></span>

<span style="color:#080;font-weight:bold">end</span> 
</pre></div>
</div>
      </div>

      <p>Note the following in the above example:</p>

      <ul>
        <li>We initially declare an empty hash called <code>options</code> which we will then populate based on the
user input.</li>
        <li>
<code>opts.banner</code> can be used to specify a detailed description of how the command works. This is
used in conjunction with the <code>-h</code> option which we have handled at the bottom. This should be
included in all of your commands to provided a consistent user interface, the user can now
run <code>origen time -h</code> to display the command description and a summary of all 
available options. The <code>-h</code> implementation is an example of how to handle Boolean options.</li>
        <li>The <code>-f</code> option itself is implemented as an option that accepts a String parameter, which we
collect and place in the options hash to make it easily available to downstream code. This allows
the user to run <code>origen time -f "%Y"</code> for example which will display the current year only.</li>
      </ul>

      <div>    
  <a class="anchor" name="Moving_To_a_New_File"></a>          
  <h4><a href="#Moving_To_a_New_File">Moving To a New File</a></h4>          
</div>

      <p>As your application becomes more complex you will find that you want to organize your commands better instead
of having them all dumped into a single file.</p>

      <p>In this case we could extract the command code above into the application library, <code>lib/commands/current_time.rb</code>, 
for example, and then include it like this:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>aliases ={
  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">time</span><span style="color:#710">"</span></span> =&gt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">current_time</span><span style="color:#710">"</span></span>
}

<span style="color:#777"># The requested command is passed in here as @command, this checks it against</span>
<span style="color:#777"># the above alias table and should not be removed.</span>
<span style="color:#33B">@command</span> = aliases[<span style="color:#33B">@command</span>] || <span style="color:#33B">@command</span>

<span style="color:#777"># Now branch to the specific task code</span>
<span style="color:#080;font-weight:bold">case</span> <span style="color:#33B">@command</span>

<span style="color:#080;font-weight:bold">when</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">current_time</span><span style="color:#710">"</span></span>
  require <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">commands/current_time</span><span style="color:#710">"</span></span>
  exit <span style="color:#00D">0</span>

<span style="color:#080;font-weight:bold">else</span>
  <span style="color:#33B">@application_commands</span> = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&lt;&lt;-END</span></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">
 current_time      Print the current time (aliased as "time") </span><span style="color:#710">
  END</span></span>

<span style="color:#080;font-weight:bold">end</span> 
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="More_Examples"></a>          
  <h4><a href="#More_Examples">More Examples</a></h4>          
</div>

      <p>This is obviously a very trivial example and real commands can grow to be infinitely complex.
For some real world examples you can look at the implementation of the
<a href="https://github.com/Origen-SDK/origen/tree/master/lib/origen/commands">built in Origen commands</a>
which have been implemented using the
same techniques described above.</p>

      <p>Also be sure to check out the 
<a href="https://ruby-doc.org/stdlib-2.2.0/libdoc/optparse/rdoc/OptionParser.html">OptionParser</a> documentation
which contains further examples and documentation on option parsing.</p>

      <div style="position: relative">
  <hr>
  <div>    
  <a class="anchor" name="Comments"></a>          
  <h4><a href="#Comments">Comments</a></h4>          
</div>
</div>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'origen-sdk';
    var disqus_title;
    var disqus_url = 'https://' + window.location.hostname + window.location.pathname;

    disqus_title = $("h1").text();
    if (disqus_title.length == 0) {
      disqus_title = $("h2").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("h3").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("title").text();
    } else {
      disqus_title = disqus_title + ' (' + $("title").text() + ')';
    }

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>

    </article>
  </div>
</div>

<script src="/origen/search.js"></script>


      </div><!-- /.container -->
    

    <footer class="footer">
      <div class="container">
        <p class="pull-left text-muted">
          Generated with the <a href="https://origen-sdk.org">Origen Semiconductor Developer's Kit</a>
        </p>
        <p class="pull-right text-muted">Origen is released under the terms of the <a href="https://choosealicense.com/licenses/mit/">MIT license</a></p>
      </div>
    </footer>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://origen-sdk.org/js/lunr.min.js"></script>
    <script src="https://origen-sdk.org/js/highlight.js"></script>
    <script src="https://origen-sdk.org/js/custom.js"></script>
    
      <script>
        ((window.gitter = {}).chat = {}).options = {
          room: 'Origen-SDK/users'
        };
      </script>
      <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
    
  </body>
</html>
