<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta property="og:locale" content="en_US">
    <meta name="content-language" content="en_US">

    
    <title>Origen - Guides</title>
    <meta property="og:title" content="Origen - Guides">
    <meta name="twitter:title" content="Origen - Guides">
    <meta itemprop="name" content="Origen - Guides">
      
  
  
    <link rel="author" href="https://plus.google.com/u/1/b/106463981272125989995/106463981272125989">
  
  
    <meta property="og:url" content="http://origen-sdk.org/origen/guides/misc/callbacks">
    <meta name="twitter:url" content="http://origen-sdk.org/origen/guides/misc/callbacks">
  
  
    <meta property="og:image" content="http://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:image" content="http://origen-sdk.org/favicon-260x260.png">
    <meta itemprop="image" content="http://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:card" content="summary">
  
    <meta property="og:site_name" content="Origen - The Semiconductor Developer's Kit">
  
  
    <meta property="fb:admins" content="origensdk">
  
  
    <meta name="twitter:site" content="@origensdk">
  

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://origen-sdk.org/css/bootstrap_custom.css"></script>
    <!-- Load this up top to allow pages to execute JQuery snippets -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
        ga('create', 'UA-64455560-1', 'auto');
        ga('send', 'pageview');
      </script>
    

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="http://origen-sdk.org/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="http://origen-sdk.org/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="http://origen-sdk.org/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="http://origen-sdk.org/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="http://origen-sdk.org/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="http://origen-sdk.org/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="http://origen-sdk.org/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="http://origen-sdk.org/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="http://origen-sdk.org/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="http://origen-sdk.org/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://origen-sdk.org/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="http://origen-sdk.org/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="http://origen-sdk.org/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="http://origen-sdk.org/manifest.json">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
  </head>

  <body>
    
      <div class="container">
        <nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <a href="/" class="navbar-brand" style="margin-top: -4px;">
        <img src="http://origen-sdk.org/img/origen-device.png" style="height:30px; margin-right: 2px; display: inline; margin-top: -2px;">
        <img src="http://origen-sdk.org/img/origen-text.png" style="height:15px; display: inline;">
      </a>
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown ">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="tour">Tour <span class="caret"></span></a>
          <ul class="dropdown-menu" aria-labelledby="tour">
            <li><a href="/origen/tour/basics">Basics</a></li>
            <li class="divider">
            </li>
<li><a href="/origen/tour/test-engineering">Test Engineers</a></li>
            <li><a href="/origen/tour/design-engineering">Design Engineers</a></li>
          </ul>
        </li>
        <li class="active"><a href="/origen/guides/starting/introduction">Guides</a></li>
        <li class=""><a href="/origen/videos/1-pattern-in-20-minutes">Videos</a></li>
        <li class=""><a href="/origen/publications">Publications</a></li>
        <li class=""><a href="/origen/api">API</a></li>
        <li class=""><a href="https://github.com/Origen-SDK">Github</a></li>
        <li class=""><a href="/origen/community">Community</a></li>
        <li class=""><a href="/origen/release_notes">Release Notes</a></li>
        <li class=""><a href="/origen/plugins">Plugins</a></li>
      </ul>
    </div>
<!--/.nav-collapse -->
  </div>
</nav>

<div class="row">
  <div class="col-md-3 sidebar-nav-container">
    <div class="well sidebar-nav" style="margin-top: 20px;">
        <div id="search">
          <form style="margin-bottom: 15px;">
            <div class="input-group">
              <input class="form-control" type="search" placeholder="Search the guides...">
              <span class="input-group-btn">
                <button type="submit" class="btn btn-search">GO!</button>
              </span>
            </div>
          </form>
        </div>
        <div class="panel-group" id="sidebar-accordion">

          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-0">
              <a class="no-underline">
                Getting Started with Origen
              </a>
            </div>
            <div id="sidebar-collapse-0" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/starting/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/starting/core">Core concepts</a></li>
<li class=""><a href="/origen/guides/starting/installing">How to Install</a></li>
<li class=""><a href="/origen/guides/starting/installwin">How to Install (Windows)</a></li>
<li class=""><a href="/origen/guides/starting/company">Company Customization</a></li>
<li class=""><a href="/origen/guides/starting/gems">Understanding Gems</a></li>
<li class=""><a href="/origen/guides/starting/app">Creating a New App</a></li>
<li class=""><a href="/origen/guides/starting/invoking">Invoking Considerations</a></li>
<li class=""><a href="/origen/guides/starting/commit">The Initial Commit</a></li>
<li class=""><a href="/origen/guides/starting/workspace">Workspace Management</a></li>
<li class=""><a href="/origen/guides/starting/architecture">Application Architecture</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-1">
              <a class="no-underline">
                Runtime Environment
              </a>
            </div>
            <div id="sidebar-collapse-1" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/runtime/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/runtime/mode">Mode</a></li>
<li class=""><a href="/origen/guides/runtime/environment">Environment</a></li>
<li class=""><a href="/origen/guides/runtime/target">Target</a></li>
<li class=""><a href="/origen/guides/runtime/production">Production Targets</a></li>
<li class=""><a href="/origen/guides/runtime/global">Global Setup</a></li>
<li class=""><a href="/origen/guides/runtime/loadorder">Load Order</a></li>
<li class=""><a href="/origen/guides/runtime/programming">Programming</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-2">
              <a class="no-underline">
                Models
              </a>
            </div>
            <div id="sidebar-collapse-2" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/models/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/models/naming">Naming</a></li>
<li class=""><a href="/origen/guides/models/defining">Definition &amp; Hierarchy</a></li>
<li class=""><a href="/origen/guides/models/attributes">Adding Attributes</a></li>
<li class=""><a href="/origen/guides/models/versioning">Versioning</a></li>
<li class=""><a href="/origen/guides/models/bugs">Bugs &amp; Features</a></li>
<li class=""><a href="/origen/guides/models/modes">Package, Mode &amp; Configuration</a></li>
<li class=""><a href="/origen/guides/models/registers">Registers</a></li>
<li class=""><a href="/origen/guides/models/pins">Pins</a></li>
<li class=""><a href="/origen/guides/models/power">Power Domains</a></li>
<li class=""><a href="/origen/guides/models/hw">Hardware Attributes</a></li>
<li class=""><a href="/origen/guides/models/parameters">Parameters</a></li>
<li class=""><a href="/origen/guides/models/specs">Specifications</a></li>
<li class=""><a href="/origen/guides/models/fuses">Fuses</a></li>
<li class=""><a href="/origen/guides/models/components">Generic Components</a></li>
<li class=""><a href="/origen/guides/models/componentable">Creating Your Own Components</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-3">
              <a class="no-underline">
                Compiler (Views)
              </a>
            </div>
            <div id="sidebar-collapse-3" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/compiler/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/compiler/creating">Creating Templates</a></li>
<li class=""><a href="/origen/guides/compiler/subtemplates">Using Sub-Templates</a></li>
<li class=""><a href="/origen/guides/compiler/helpers">Helpers</a></li>
<li class=""><a href="/origen/guides/compiler/running">Running The Compiler</a></li>
<li class=""><a href="/origen/guides/compiler/inline">Inline Compiler</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-4">
              <a class="no-underline">
                Controllers
              </a>
            </div>
            <div id="sidebar-collapse-4" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/controllers/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/controllers/shadow">Shadow Controllers</a></li>
<li class=""><a href="/origen/guides/controllers/direct">Direct Controllers</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-5">
              <a class="no-underline">
                Pattern Generator
              </a>
            </div>
            <div id="sidebar-collapse-5" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/pattern/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/pattern/creating">Creating Patterns</a></li>
<li class=""><a href="/origen/guides/pattern/pins">Pins</a></li>
<li class=""><a href="/origen/guides/pattern/timing">Timing and Waiting</a></li>
<li class=""><a href="/origen/guides/pattern/registers">Registers</a></li>
<li class=""><a href="/origen/guides/pattern/documenting">Documenting Patterns</a></li>
<li class=""><a href="/origen/guides/pattern/name">Generating by Name</a></li>
<li class=""><a href="/origen/guides/pattern/common">Common API</a></li>
<li class=""><a href="/origen/guides/pattern/j750">J750 API</a></li>
<li class=""><a href="/origen/guides/pattern/v93k">V93K API</a></li>
<li class=""><a href="/origen/guides/pattern/ultraflex">UltraFlex API</a></li>
<li class=""><a href="/origen/guides/pattern/custom">Custom Testers</a></li>
<li class=""><a href="/origen/guides/pattern/running">Running The PatGen</a></li>
<li class=""><a href="/origen/guides/pattern/concurrent">Concurrent Patterns</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-6">
              <a class="no-underline">
                Test Program Generator
              </a>
            </div>
            <div id="sidebar-collapse-6" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/program/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/program/philosophy">Philosophy</a></li>
<li class=""><a href="/origen/guides/program/flows">Creating Flows</a></li>
<li class=""><a href="/origen/guides/program/flowapi">Managing Flow Control</a></li>
<li class=""><a href="/origen/guides/program/interface">Creating an Interface</a></li>
<li class=""><a href="/origen/guides/program/resources">Additional Resources</a></li>
<li class=""><a href="/origen/guides/program/code">Dynamic Custom Code</a></li>
<li class=""><a href="/origen/guides/program/j750">J750 API</a></li>
<li class=""><a href="/origen/guides/program/v93k">V93K API</a></li>
<li class=""><a href="/origen/guides/program/ultraflex">UltraFLEX API</a></li>
<li class=""><a href="/origen/guides/program/doc">Documenting the Program</a></li>
<li class=""><a href="/origen/guides/program/custom">Creating Custom Testers</a></li>
<li class=""><a href="/origen/guides/program/generating">Running the ProgGen</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-7">
              <a class="no-underline">
                Simulation
              </a>
            </div>
            <div id="sidebar-collapse-7" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/simulation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/simulation/howitworks">How It Works</a></li>
<li class=""><a href="/origen/guides/simulation/compiling">Compiling the DUT</a></li>
<li class=""><a href="/origen/guides/simulation/environment">Environment Setup</a></li>
<li class=""><a href="/origen/guides/simulation/app">Application Setup</a></li>
<li class=""><a href="/origen/guides/simulation/patterns">Simulating Patterns</a></li>
<li class=""><a href="/origen/guides/simulation/flows">Simulating Flows</a></li>
<li class=""><a href="/origen/guides/simulation/log">Simulator Log Output</a></li>
<li class=""><a href="/origen/guides/simulation/artifacts">Artifacts</a></li>
<li class=""><a href="/origen/guides/simulation/debugging">Debugging</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-8">
              <a class="no-underline">
                Documentation Generator
              </a>
            </div>
            <div id="sidebar-collapse-8" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/documentation/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/documentation/markdown">Markdown</a></li>
<li class=""><a href="/origen/guides/documentation/linking">Linking</a></li>
<li class=""><a href="/origen/guides/documentation/styling">Styling</a></li>
<li class=""><a href="/origen/guides/documentation/testing">Testing</a></li>
<li class=""><a href="/origen/guides/documentation/api">API Generation</a></li>
<li class=""><a href="/origen/guides/documentation/deploying">Deploying</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-9">
              <a class="no-underline">
                Plugins
              </a>
            </div>
            <div id="sidebar-collapse-9" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/plugins/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/plugins/importing">Using a Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/creating">Creating a Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/current">Current Plugin</a></li>
<li class=""><a href="/origen/guides/plugins/environment">Dev Environment</a></li>
<li class=""><a href="/origen/guides/plugins/development">Dev Considerations</a></li>
<li class=""><a href="/origen/guides/plugins/paths">Paths &amp; Origen.root</a></li>
<li class=""><a href="/origen/guides/plugins/app">Config &amp; Origen.app</a></li>
<li class=""><a href="/origen/guides/plugins/misc">Miscellaneous Topics</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-10">
              <a class="no-underline">
                Miscellaneous
              </a>
            </div>
            <div id="sidebar-collapse-10" class="panel-collapse collapse in">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/misc/revisioncontrol">Revision Control</a></li>
<li class=""><a href="/origen/guides/misc/remotes">Origen Remotes</a></li>
<li class=""><a href="/origen/guides/misc/lint">Lint Testing</a></li>
<li class=""><a href="/origen/guides/misc/session">Session Store</a></li>
<li class=""><a href="/origen/guides/misc/lsf">LSF API</a></li>
<li class=""><a href="/origen/guides/misc/users">Users, Emails &amp; Maillists</a></li>
<li class=""><a href="/origen/guides/misc/utilities">Utilities &amp; Helpers</a></li>
<li class=""><a href="/origen/guides/misc/coreext">Ruby Extensions</a></li>
<li class=""><a href="/origen/guides/misc/logger">Logger</a></li>
<li class=""><a href="/origen/guides/misc/commands">Adding Commands</a></li>
<li class=""><a href="/origen/guides/misc/commandsov">Overriding Commands</a></li>
<li class="active"><a href="/origen/guides/misc/callbacks">Callbacks</a></li>
<li class=""><a href="/origen/guides/misc/appcallbacks">Application Callbacks</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading clickable" data-toggle="collapse" data-parent="#sidebar-accordion" href="#sidebar-collapse-11">
              <a class="no-underline">
                Advanced Topics
              </a>
            </div>
            <div id="sidebar-collapse-11" class="panel-collapse collapse ">
              <div class="panel-body">
                <ul class="nav nav-list">
<li class=""><a href="/origen/guides/advanced/introduction">Introduction</a></li>
<li class=""><a href="/origen/guides/advanced/invocations">Invocation Customization</a></li>
<li class=""><a href="/origen/guides/advanced/newapps">Custom App Generators</a></li>
                </ul>
              </div>
            </div>
          </div>
      

        </div>

    </div>
  </div>

  <div class="col-md-9 nav-page-container">
    <article class="search-results">

      <h3 class="topic-title">Miscellaneous</h3>

      <h2 class="topic-subtitle">Callbacks</h2>

      <hr>

      <p>Callbacks provide a way for an application to hook into the Origen process
and have the opportunity to modify the standard behavior in some way.</p>

      <p>This could also be accomplished by redefining any of Origen’s code at application-level
but that approach
is not recommended since it leaves the application at risk of breaking if Origen ever
makes changes to how things work internally.</p>

      <p>Callbacks on the other hand are an official API that will always work between releases.</p>

      <p>Note that it is very easy to add additional callbacks to Origen, so if you can see the need
for one that is not already covered please <a href="/origen/community">contact us via the community channels</a>
to discuss.</p>

      <div>    
  <a class="anchor" name="Registering_Listeners"></a>          
  <h4><a href="#Registering_Listeners">Registering Listeners</a></h4>          
</div>

      <p>Callbacks work by registering <em>listeners</em> with Origen. As the Origen process executes
it will come across various points where callbacks have been enabled and which will cause
Origen to pause and ask all of the listeners if they have any code that they wish to execute.
If so control will transfer to the listener who will execute something and who may or may not return
control back to the Origen process when complete.</p>

      <p>In other words Origen will call-back to the application at various points during the process.</p>

      <p>A listener can be any object instance within your application and by default the application
itself (as defined in <code>config/application.rb</code>) and any classes which include
<code>Origen::TopLevel</code> or <code>Origen::Model</code>
are already registered as listeners.</p>

      <p>Additional custom classes can be registered by simply including the callbacks module:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">NVM</span>
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">CallbackHandlers</span>

    include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">Callbacks</span>

  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p>Note that listeners have to be object instances, so in the example above the listener is only
registered when the application creates a new instance of <code>CallbackHandlers</code>.
If an instance is never created then the callbacks implemented in that class will never be
called.</p>

      <p>This is particularly true of any objects that are defined <a href="/origen/guides/models/defining/#Adding_Sub_Blocks">as sub-blocks</a>
since the sub-block is not actually instantiated until the point where it is first referenced
by an application.</p>

      <div class="alert alert-warning">
  <strong>Note!</strong> One exception to the above rule is the <code>on_create</code> callback.
  Since this is commonly used as a delayed version of initialize, Origen will invoke that method
  at the point when the listener object is instantiated if the <code>on_create</code> callbacks
  have already been called.
</div>

      <div>    
  <a class="anchor" name="Persistent_Listeners"></a>          
  <h4><a href="#Persistent_Listeners">Persistent Listeners</a></h4>          
</div>

      <p>By default the pool of listeners is cleared out before a target load and they will be replaced
by whatever objects are instantiated by the new target.
In most cases this is the desired behavior and everything in the application will behave
as you would expect.</p>

      <p>However in some cases it may be desired to setup callback listeners that will persist across
target loads so that they keep listening for the entire duration of an Origen thread.
This can be achieved by including the <code>PersistentCallbacks</code> module instead:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">NVM</span>
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">PersistentCallbackHandlers</span>

    include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">PersistentCallbacks</span>

  <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#777"># Instantiate an instance of this class immediately when this file is loaded, this object will</span>
  <span style="color:#777"># then listen for the remainder of the Origen thread</span>
  <span style="color:#036;font-weight:bold">PersistentCallbackHandlers</span>.new
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p>A common use case is to use a persistent callback listener that implements <code>on_load_target</code> to
implement common target behavior - i.e. implement logic that should run for every target.
Most crucially plugins can take full advantage of this to augment all of the targets of their
host application.</p>

      <div>    
  <a class="anchor" name="Implementing_a_Callback"></a>          
  <h4><a href="#Implementing_a_Callback">Implementing a Callback</a></h4>          
</div>

      <p>Implementing a callback is simply a matter of implementing an agreed method name within a
listener.</p>

      <p>So at each callback point the Origen code is basically:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>listeners.each <span style="color:#080;font-weight:bold">do</span> |listener|
  <span style="color:#080;font-weight:bold">if</span> listener.respond_to?(callback_x)
    listener.callback_x(arg_x, arg_y)
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>  
</pre></div>
</div>
      </div>

      <p>So any listeners which don’t implement a specific callback are simply ignored.</p>

      <p>To enable the above callback our custom listener would be changed to:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">NVM</span>
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">CallbackHandlers</span>

    include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">Callbacks</span>

    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">callback_x</span>(arg_x, arg_y)
      <span style="color:#080;font-weight:bold">if</span> arg_x == <span style="color:#A60">:ft_pattern</span>
        puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">Final test not supported yet!</span><span style="color:#710">"</span></span>
        exit <span style="color:#00D">0</span>
      <span style="color:#080;font-weight:bold">end</span>
      <span style="color:#777"># Otherwise return to Origen</span>
    <span style="color:#080;font-weight:bold">end</span>

  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p>As mentioned the application is already registered as a listener, so the above <code>callback_x</code>
method could be added to <code>config/application.rb</code> and it would be called at the appropriate
time.</p>

      <div>    
  <a class="anchor" name="Calling_Order"></a>          
  <h4><a href="#Calling_Order">Calling Order</a></h4>          
</div>

      <p>If an application has mutliple listeners for the same callback then they will all get called,
however the order that they are called in is undefined unless otherwise specified in the
documentation for a particular callback (e.g. startup and shutdown callbacks).</p>

      <p>Generally if calling order is important the recommended approach is for the application to
implement a single callback and then from there co-ordinate calling any additional application
methods that need to be run.</p>

      <div>    
  <a class="anchor" name="Available_Callbacks"></a>          
  <h3><a href="#Available_Callbacks">Available Callbacks</a></h3>          
</div>

      <p>There now follows a listing of all available callbacks, these have been split up by function:</p>

      <ul>
        <li><a href="#environment_setup">Environment Setup</a></li>
        <li><a href="#environment_teardown">Environment Teardown</a></li>
        <li><a href="#generation">Generation</a></li>
        <li><a href="#mode_changed">Mode Changed</a></li>
        <li><a href="#reset">Reset</a></li>
        <li><a href="#pattern_generation">Pattern Generation</a></li>
        <li><a href="#program_generation">Program Generation</a></li>
        <li><a href="#web_compiler">Web Compiler</a></li>
        <li><a href="#release_process">Release Process</a></li>
        <li><a href="#initializing_models">Intializing Models</a></li>
      </ul>

      <p><a class="anchor" name="environment_setup"></a></p>

      <div>    
  <a class="anchor" name="Environment_Setup"></a>          
  <h3><a href="#Environment_Setup">Environment Setup</a></h3>          
</div>

      <div>    
  <a class="anchor" name="before_load_target"></a>          
  <h4><a href="#before_load_target">before_load_target</a></h4>          
</div>

      <p>This callback is triggered immediately before the target is loaded.</p>

      <p>The intended use case is to allow any domain specific clean up that needs to be done when reloading
or changing the target during an Origen thread of execution.
Origen will take care of ensuring that the top-level model, the tester and all callback listeners are
safely removed and/or re-instantiated between target loads, and in the vast majority of cases the
application should never need to use this.</p>

      <div>    
  <a class="anchor" name="on_create"></a>          
  <h4><a href="#on_create">on_create</a></h4>          
</div>

      <p>This callback is triggered immediately after the target is loaded.</p>

      <p>The intended use case is to allow the application to complete any target object initialization that may
be dependent on other target objects. 
In other words you can think of this like a regular <code>initialize</code> method but one where
all objects instaniated by the target are guaranteed to be available.</p>

      <p>No return value is expected.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">Callbacks</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>
  <span style="color:#777"># Would be creating a target instantiation order dependency by doing this here</span>
  <span style="color:#777"># tester.do_something</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">on_create</span>
  <span style="color:#777"># But not here</span>
  tester.do_something
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="on_load_target"></a>          
  <h4><a href="#on_load_target">on_load_target</a></h4>          
</div>

      <p>This is basically an alias of on_create and it behaves in exactly the same way.</p>

      <p>Conceptually though it reflects a different way of using this callback: on_create can be thought of
as an enhanced version of initialize at a model level, whereas on_load_target can be thought of as
a way to augment all targets with common behavior.</p>

      <p>See the section on Persistent Listeners above for some more discussion on this.</p>

      <div>    
  <a class="anchor" name="on_top_level_instantiated(top_level_object)"></a>          
  <h4><a href="#on_top_level_instantiated(top_level_object)">on_top_level_instantiated(top_level_object)</a></h4>          
</div>

      <p>This callback is triggered immediately after a top-level object (an object that includes the
<code>Origen::TopLevel</code> module, normally an object representing the top-level of the SoC)
is instantiated.</p>

      <p>No return value is expected.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">Callbacks</span>

<span style="color:#777"># Automatically instantiate a RAM model whenever a DUT model is instantiated, the size will</span>
<span style="color:#777"># be determined by the ram_size attribute of the DUT</span>
<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">on_top_level_instantiated</span>(dut)
  <span style="color:#d70">$ram</span> = <span style="color:#036;font-weight:bold">MyPlugin</span>::<span style="color:#036;font-weight:bold">RAM</span>.new <span style="color:#606">size</span>: dut.ram_size
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="interactive_startup"></a>          
  <h4><a href="#interactive_startup">interactive_startup</a></h4>          
</div>

      <p>This will be called immediately before giving control to the user when opening an interactive
console session (by running <code>origen i</code>).
The target will already be loaded prior to calling.</p>

      <p>The intended use case is to give the application a chance to perform a device setup sequence in the
case where the environment is connected to an Origen Link compatible tester driver.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># This is called automatically at the start of an interactive session (origen i)</span>
<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">interactive_startup</span>
  <span style="color:#777"># Run the regular pattern startup method upon opening the console to put the device in test mode</span>
  startup <span style="color:#080;font-weight:bold">if</span> tester.link?
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="interactive_shutdown"></a>          
  <h4><a href="#interactive_shutdown">interactive_shutdown</a></h4>          
</div>

      <p>This will be called immediately before shutting down an interactive console session.</p>

      <p>The intended use case is to shutdown the device in the case where the environment is connected
to an Origen Link compatible tester driver.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># This is called automatically at the end of an interactive session (origen i)</span>
<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">interactive_shutdown</span>
  <span style="color:#777"># Run the regular pattern shutdown method to put the device in reset</span>
  shutdown <span style="color:#080;font-weight:bold">if</span> tester.link?
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p><a class="anchor" name="environment_teardown"></a></p>

      <div>    
  <a class="anchor" name="Environment_Teardown"></a>          
  <h3><a href="#Environment_Teardown">Environment Teardown</a></h3>          
</div>

      <div>    
  <a class="anchor" name="on_origen_shutdown"></a>          
  <h4><a href="#on_origen_shutdown">on_origen_shutdown</a></h4>          
</div>

      <p>This callback is triggered at the very end of an Origen thread of execution and is 
guaranteed to be called even if the thread crashes.</p>

      <p>An example use cases is to ensure that any temporary files are deleted.</p>

      <p><a class="anchor" name="mode_changed"></a></p>

      <div>    
  <a class="anchor" name="Mode_Changed"></a>          
  <h3><a href="#Mode_Changed">Mode Changed</a></h3>          
</div>

      <div>    
  <a class="anchor" name="on_mode_changed"></a>          
  <h4><a href="#on_mode_changed">on_mode_changed</a></h4>          
</div>

      <p>This callback is triggered whenever an object <a href="/origen/api/Origen/Model.html#current_mode=-instance_method">changes its current mode</a>.
It takes an options hash as an argument with the recently changed mode being passed.  It can be used to change other DUT objects, 
such as clocks and register settings.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">on_mode_changed</span>(options)
  <span style="color:#080;font-weight:bold">if</span> options[<span style="color:#A60">:instance</span>] == <span style="color:#069">self</span>
    <span style="color:#080;font-weight:bold">case</span> options[<span style="color:#A60">:mode</span>]
    <span style="color:#080;font-weight:bold">when</span> <span style="color:#A60">:mode1</span>
      clocks(<span style="color:#A60">:coreclk</span>).setpoint = <span style="color:#60E">1.2</span>.Ghz
      clocks(<span style="color:#A60">:memclk</span>).setpoint = <span style="color:#00D">600</span>.Mhz
    <span style="color:#080;font-weight:bold">when</span> <span style="color:#A60">:mode2</span>
      clocks(<span style="color:#A60">:coreclk</span>).setpoint = <span style="color:#60E">1.0</span>.Ghz
      clocks(<span style="color:#A60">:memclk</span>).setpoint = <span style="color:#00D">500</span>.Mhz
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p><a class="anchor" name="generation"></a></p>

      <div>    
  <a class="anchor" name="Generation"></a>          
  <h3><a href="#Generation">Generation</a></h3>          
</div>

      <div>    
  <a class="anchor" name="before_lsf_submission"></a>          
  <h4><a href="#before_lsf_submission">before_lsf_submission</a></h4>          
</div>

      <p>This callback is triggered immediately before submitting a batch of jobs to the LSF.</p>

      <p>No return value is expected.</p>

      <div>    
  <a class="anchor" name="before_generate(options)"></a>          
  <h4><a href="#before_generate(options)">before_generate(options)</a></h4>          
</div>

      <p>This callback is triggered immediately before launching a generate operation, that is before
starting the current batch of program generation, pattern generation or compile jobs.</p>

      <p>No return value is expected.</p>

      <div>    
  <a class="anchor" name="before_generate_local(options)"></a>          
  <h4><a href="#before_generate_local(options)">before_generate_local(options)</a></h4>          
</div>

      <p>As above but only called when running locally.</p>

      <div>    
  <a class="anchor" name="before_generate_remote(options)"></a>          
  <h4><a href="#before_generate_remote(options)">before_generate_remote(options)</a></h4>          
</div>

      <p>As above but only called when running on a remote LSF machine.</p>

      <p><a class="anchor" name="reset"></a></p>

      <div>    
  <a class="anchor" name="Reset"></a>          
  <h3><a href="#Reset">Reset</a></h3>          
</div>

      <p>The reset callbacks will kick in when the <code>reset</code> or <code>reset!</code> method
is called on the top-level object.</p>

      <p>They will be executed in the following order:</p>

      <ul>
        <li><strong>before_top_level_reset</strong></li>
        <li>
<strong>shutdown</strong> (reset! only)</li>
        <li>
<strong>on_top_level_reset!</strong> (reset! only)</li>
        <li><strong>on_top_level_reset</strong></li>
        <li>registers are reset here</li>
        <li>
<strong>startup</strong> (reset! only)</li>
        <li><strong>after_top_level_reset</strong></li>
      </ul>

      <p>Generally with all reset callbacks the application code is not expected to take care of
reseting registers or any other Origen-owned objects.
Only state specifically setup by the application code should need to be teared down and
re-established.</p>

      <div>    
  <a class="anchor" name="before_top_level_reset"></a>          
  <h4><a href="#before_top_level_reset">before_top_level_reset</a></h4>          
</div>

      <p>Called as soon as the <code>reset</code> or <code>reset!</code> method is called on the
top-level object and before any other reset activity takes place.</p>

      <p>This callback should not be used to generate reset vectors, use the <code>shutdown</code>
callback for that.</p>

      <p>No return value is expected.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">before_top_level_reset</span>
  <span style="color:#33B">@some_state_attribute</span> = <span style="color:#069">nil</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="on_top_level_reset"></a>          
  <h4><a href="#on_top_level_reset">on_top_level_reset</a></h4>          
</div>

      <p>Called when the <code>reset</code> or <code>reset!</code> method has been called on the
top-level object and after the top-level has been shutdown.</p>

      <p>No return value is expected.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">on_top_level_reset</span>
  <span style="color:#33B">@some_state_attribute</span> = <span style="color:#069">nil</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="on_top_level_reset!"></a>          
  <h4><a href="#on_top_level_reset!">on_top_level_reset!</a></h4>          
</div>

      <p>Called only when the <code>reset!</code> method has been called on the top-level object,
otherwise the same as <code>reset</code>.</p>

      <div>    
  <a class="anchor" name="after_top_level_reset"></a>          
  <h4><a href="#after_top_level_reset">after_top_level_reset</a></h4>          
</div>

      <p>Called at the very end of a reset sequence initiated by calling <code>reset</code>
or <code>reset!</code> on the
top-level object at which point the top-level has already been re-started.</p>

      <p>This callback should not be used to generate reset vectors, use the <code>startup</code>
callback for that.</p>

      <p>No return value is expected.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">after_top_level_reset</span>
  <span style="color:#33B">@some_state_attribute</span> = <span style="color:#069">nil</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p><a class="anchor" name="pattern_generation"></a></p>

      <div>    
  <a class="anchor" name="Pattern_Generation"></a>          
  <h3><a href="#Pattern_Generation">Pattern Generation</a></h3>          
</div>

      <div>    
  <a class="anchor" name="startup(options)"></a>          
  <h4><a href="#startup(options)">startup(options)</a></h4>          
</div>

      <p>Called at the start of a Pattern.create block, this callback provides an opportunity to
implement startup vectors.</p>

      <p>It will also be called as part of a within-pattern reset sequence initiated by calling
<code>reset!</code> on the top-level object.</p>

      <p>Any options supplied to Pattern.create are passed in as an argument.</p>

      <p>The top-level (DUT) object is guaranteed to be called first for this callback, this enables
the common case where the top-level will generate the mode entry vectors from
this callback and then child modules can generate any additional vectors safe in the knowledge
that mode has already been entered.</p>

      <p>No return value is expected.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">startup</span>(options)
  tester.set_timeset(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">nvmbist</span><span style="color:#710">"</span></span>, <span style="color:#00D">40</span>)
  dut.pin(<span style="color:#A60">:reset</span>).drive!(<span style="color:#00D">1</span>)
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="shutdown(options)"></a>          
  <h4><a href="#shutdown(options)">shutdown(options)</a></h4>          
</div>

      <p>Called at the very end of a Pattern.create block, this callback provides an opportunity to
implement reset vectors.</p>

      <p>It will also be called as part of a within-pattern reset sequence initiated by calling
<code>reset!</code> on the top-level object.</p>

      <p>Any options supplied to Pattern.create are passed in as an argument.</p>

      <p>The top-level (DUT) object is guaranteed to be called last for this callback, this enables
the common case where the child modules can insert any shutdown/safe-state vectors before
the top-level finally pulls reset.</p>

      <p>No return value is expected.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">shutdown</span>(options)
  dut.pin(<span style="color:#A60">:reset</span>).drive!(<span style="color:#00D">0</span>)
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="before_pattern(pattern_name)"></a>          
  <h4><a href="#before_pattern(pattern_name)">before_pattern(pattern_name)</a></h4>          
</div>

      <p>This callback is triggered immediately before running a Pattern.create block.</p>

      <p>At this point the target is fully loaded but the pattern is not yet opened - so you can’t
generate vectors from here.</p>

      <p>The intended use case for this callback is to establish state within your models based on the
pattern name. This can be used in conjunction with a pattern name translator to generate
variants of your existing patterns without having to create a new pattern source.</p>

      <p>No return value is expected.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># If the requested pattern has 'trimmed' in the name then look for the equivalent</span>
<span style="color:#777"># source file without 'trimmed' in the name.</span>
<span style="color:#777"># The output pattern will still contain 'trimmed' in the name.</span>
config.pattern_name_translator <span style="color:#080;font-weight:bold">do</span> |name|
  <span style="color:#080;font-weight:bold">if</span> name =~ <span style="background-color:hsla(300,100%,50%,0.06)"><span style="color:#404">/</span><span style="color:#808">trimmed</span><span style="color:#404">/</span></span>
    {<span style="color:#606">source</span>: name.gsub(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">trimmed_</span><span style="color:#710">"</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#710">"</span></span>), <span style="color:#606">output</span>: name}
  <span style="color:#080;font-weight:bold">else</span>
    name
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># Setup the dut model differently if generating a pattern for a trimmed device</span>
<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">before_pattern</span>(pattern_name)
  <span style="color:#080;font-weight:bold">if</span> name =~ <span style="background-color:hsla(300,100%,50%,0.06)"><span style="color:#404">/</span><span style="color:#808">trimmed</span><span style="color:#404">/</span></span>
    dut.apply_default_trims = <span style="color:#069">false</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="before_pattern_lookup(requested_pattern)"></a>          
  <h4><a href="#before_pattern_lookup(requested_pattern)">before_pattern_lookup(requested_pattern)</a></h4>          
</div>

      <p>This callback is triggered before Origen searches for the requested pattern source.</p>

      <p>The intended use case is to give the application a chance to dispatch the pattern itself,
or to decide to withhold it based on some properties of the current target.</p>

      <p>If the callback returns a value of false or nil then Origen will abort further processing
of this pattern and move onto the next one.
Origen will proceed to dispatch the pattern as normal
if any other value is returned.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">before_pattern_lookup</span>(requested_pattern)
  <span style="color:#080;font-weight:bold">if</span> requested_pattern =~ <span style="background-color:hsla(300,100%,50%,0.06)"><span style="color:#404">/</span><span style="color:#808">blk_1</span><span style="color:#404">/</span></span>
    <span style="color:#777"># Only proceed with this pattern if the current target has a blk 1</span>
    dut.has_blk1?
  <span style="color:#080;font-weight:bold">else</span> <span style="color:#777"># Proceed as normal</span>
    requested_pattern
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="pattern_generated(path_to_generated_pattern)"></a>          
  <h4><a href="#pattern_generated(path_to_generated_pattern)">pattern_generated(path_to_generated_pattern)</a></h4>          
</div>

      <p>This callback is triggered at the end of every pattern that is generated, the path to
the generated file (wrapped in a Pathname) is passed to the listener.</p>

      <p>The intended use case is to give plugins a hook to kick off additional operations at the
end of a pattern being generated, such as to go and simulate it or to compile it to a
binary. Normally this callback would be implemented in a persistent listener within a plugin
to have the plugin called after every pattern that is generated.</p>

      <p>No return value is expected.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">VirtualTester</span>
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">PersistentCallbackHandlers</span>
    include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">PersistentCallbacks</span>

    <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">pattern_generated</span>(path_to_generated_pattern)
      <span style="color:#080;font-weight:bold">if</span> <span style="color:#d70">$vt_simulation_enabled</span>  <span style="color:#777"># Set this back when the command was launched or however you want to enable</span>
        <span style="color:#036;font-weight:bold">VirtualTester</span>::<span style="color:#036;font-weight:bold">Runner</span>.new(path_to_generated_pattern)
      <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#777"># Instantiate an instance of this class immediately when this file is required, this object will</span>
  <span style="color:#777"># then listen for the remainder of the Origen thread</span>
  <span style="color:#036;font-weight:bold">PersistentCallbackHandlers</span>.new
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p><a class="anchor" name="program_generation"></a></p>

      <div>    
  <a class="anchor" name="Program_Generation"></a>          
  <h3><a href="#Program_Generation">Program Generation</a></h3>          
</div>

      <div>    
  <a class="anchor" name="on_flow_start(options)"></a>          
  <h4><a href="#on_flow_start(options)">on_flow_start(options)</a></h4>          
</div>

      <p>Called at the start of a top-level Flow.create block, note that it is not called at the
beginning of sub-flows that are included by the top-level flow.</p>

      <p>Any options supplied to Flow.create are passed in as an argument.</p>

      <p>No return value is expected.</p>

      <div>    
  <a class="anchor" name="on_flow_end(options)"></a>          
  <h4><a href="#on_flow_end(options)">on_flow_end(options)</a></h4>          
</div>

      <p>Called at the very end of a top-level Flow.create block, note that it is not called at the
end of sub-flows that are included by the top-level flow.</p>

      <p>Any options supplied to Flow.create are passed in as an argument.</p>

      <p>No return value is expected.</p>

      <div>    
  <a class="anchor" name="on_resource_start(options)"></a>          
  <h4><a href="#on_resource_start(options)">on_resource_start(options)</a></h4>          
</div>

      <p>Logically equivalent to on_flow_start, except this one will be called when the top
level is a Resource.create block instead of a Flow.create block.</p>

      <div>    
  <a class="anchor" name="on_resource_end(options)"></a>          
  <h4><a href="#on_resource_end(options)">on_resource_end(options)</a></h4>          
</div>

      <p>Logically equivalent to on_flow_end, except this one will be called when the top
level is a Resource.create block instead of a Flow.create block.</p>

      <div>    
  <a class="anchor" name="program_generated"></a>          
  <h4><a href="#program_generated">program_generated</a></h4>          
</div>

      <p>This callback is triggered after a test program has been completely generated and all files have been
written.
No particular arguments are passed in, however the <code>Origen.interface</code> instance for the program that was
just generated is still live and the application should be able to retrieve any meta data it might want
about the program from there.</p>

      <p>No return value is expected.</p>

      <p><a class="anchor" name="web_compiler"></a></p>

      <div>    
  <a class="anchor" name="Web_Compiler"></a>          
  <h3><a href="#Web_Compiler">Web Compiler</a></h3>          
</div>

      <div>    
  <a class="anchor" name="before_web_compile(options)"></a>          
  <h4><a href="#before_web_compile(options)">before_web_compile(options)</a></h4>          
</div>

      <p>This is called immediately prior to running the requested <code>origen web compile</code> operation
and it provides the application with an opportunity to dynamically generate some templates
for the compiler to execute.</p>

      <p>The command line arguments are decoded and available in the given options hash.</p>

      <p>No return value is expected.</p>

      <div>    
  <a class="anchor" name="after_web_compile(options)"></a>          
  <h4><a href="#after_web_compile(options)">after_web_compile(options)</a></h4>          
</div>

      <p>This is called immediately after running the requested <code>origen web compile</code> operation
and provides the application with an opportunity to add anything else to the web/output
directory.</p>

      <p>The command line arguments are decoded and available in the given options hash.</p>

      <p>No return value is expected.</p>

      <div>    
  <a class="anchor" name="after_web_site_compile(options)"></a>          
  <h4><a href="#after_web_site_compile(options)">after_web_site_compile(options)</a></h4>          
</div>

      <p>Similar to <code>after_web_compile</code>, except that this one will only be called when
a request has been made to compile the entire web site, i.e. when  <code>origen web compile</code>
has been called without a file argument(s).</p>

      <p>The command line arguments are decoded and available in the given options hash.</p>

      <p>No return value is expected.</p>

      <p><a class="anchor" name="release_process"></a></p>

      <div>    
  <a class="anchor" name="Release_Process"></a>          
  <h3><a href="#Release_Process">Release Process</a></h3>          
</div>

      <div>    
  <a class="anchor" name="validate_release"></a>          
  <h4><a href="#validate_release">validate_release</a></h4>          
</div>

      <p>This is called immediately prior to the release (origen rc tag) process and gives the application
a chance to do any final checks to authorize that the release can go ahead.</p>

      <p>No return value is expected but the callback handler is expected to exit the process if
it decides that the release should be aborted.</p>

      <p>Typically this hook would be used to launch the application’s test suite and if it fails
abort the process, here is an example:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># Ensure that all tests pass before allowing a release to continue</span>
<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">validate_release</span>
  <span style="color:#080;font-weight:bold">if</span> !system(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">origen specs</span><span style="color:#710">"</span></span>) || !system(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">origen examples</span><span style="color:#710">"</span></span>)
    puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">Sorry but you can't release with failing tests, please fix them and try again.</span><span style="color:#710">"</span></span>
    exit <span style="color:#00D">1</span>
  <span style="color:#080;font-weight:bold">else</span>
    puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">All tests passing, proceeding with release process!</span><span style="color:#710">"</span></span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="before_release_tag(identifier,_note,_type,_selector,_options)"></a>          
  <h4><a href="#before_release_tag(identifier,_note,_type,_selector,_options)">before_release_tag(identifier, note, type, selector, options)</a></h4>          
</div>

      <p>This callback is triggered immediately before the application is tagged, all release properties
are available in the arguments.</p>

      <p>No return value is expected.</p>

      <div>    
  <a class="anchor" name="before_release_gem"></a>          
  <h4><a href="#before_release_gem">before_release_gem</a></h4>          
</div>

      <p>This callback is triggered immediately before the gem is built if the application is a plugin.
It is not called at all if the application is a top-level app.</p>

      <p>It can be used to prepare files to be included in the gem package.</p>

      <p>No return value is expected.</p>

      <div>    
  <a class="anchor" name="after_release_gem"></a>          
  <h4><a href="#after_release_gem">after_release_gem</a></h4>          
</div>

      <p>This callback is triggered immediately before the gem is built if the application is a plugin.
It is not called at all if the application is a top-level app.</p>

      <p>It can be used to clean up after building the gem package.</p>

      <p>No return value is expected.</p>

      <div>    
  <a class="anchor" name="after_release_tag(identifier,_note,_type,_selector,_options)"></a>          
  <h4><a href="#after_release_tag(identifier,_note,_type,_selector,_options)">after_release_tag(identifier, note, type, selector, options)</a></h4>          
</div>

      <p>This callback is triggered immediately after the application has been tagged and before the
release email has been sent.</p>

      <p>If the callback doesn’t return then the release email will not be sent.</p>

      <p>No return value is expected.</p>

      <div>    
  <a class="anchor" name="after_release_email(identifier,_note,_type,_selector,_options)"></a>          
  <h4><a href="#after_release_email(identifier,_note,_type,_selector,_options)">after_release_email(identifier, note, type, selector, options)</a></h4>          
</div>

      <p>Called at the very end of the release process.</p>

      <p>This callback is commonly used to kick off any doc builds or other post release tasks within
the application.</p>

      <p>No return value is expected.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># Example of automatically deploying documents after a tag</span>
<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">after_release_email</span>(tag, note, type, selector, options)
  command = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">origen web compile --remote --api</span><span style="color:#710">"</span></span>
  <span style="color:#036;font-weight:bold">Dir</span>.chdir <span style="color:#036;font-weight:bold">Origen</span>.root <span style="color:#080;font-weight:bold">do</span>
    system command
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <div>    
  <a class="anchor" name="before_deploy_site"></a>          
  <h4><a href="#before_deploy_site">before_deploy_site</a></h4>          
</div>

      <p>Called immediately before a web site is deployed.</p>

      <p>This gives the application a chance to add any additional files to the web site
before it is deployed.</p>

      <p>No return value is expected.</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># Generate a test coverage report and add it to the web site</span>
<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">before_deploy_site</span>
  <span style="color:#036;font-weight:bold">Dir</span>.chdir <span style="color:#036;font-weight:bold">Origen</span>.root <span style="color:#080;font-weight:bold">do</span>
    system <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">origen specs -c</span><span style="color:#710">"</span></span>
    system <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">mv </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#036;font-weight:bold">Origen</span>.root<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">/coverage </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#036;font-weight:bold">Origen</span>.root<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">/web/output/coverage</span><span style="color:#710">"</span></span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
      </div>

      <p><a class="anchor" name="initializing_models"></a></p>

      <div>    
  <a class="anchor" name="Initializing_Models"></a>          
  <h3><a href="#Initializing_Models">Initializing Models</a></h3>          
</div>

      <div>    
  <a class="anchor" name="origen_model_init"></a>          
  <h4><a href="#origen_model_init">origen_model_init</a></h4>          
</div>

      <p>Called only when a <code>class</code> or <code>module</code> has a <code>class method</code> called
<code>origen_model_init</code> <u>AND</u> when said class mixes in <code>Origen::Model</code>.</p>

      <p>This will be called during the class’ instantiation process, when the class has been allocated but before
it has been initialized using its own <code>initialize</code> method. This can be used to boot modules or
classes using Origen and leaving a module’s <code>included?</code> method alone.</p>

      <p>This differs from the <code>pre_initialize</code> callback in that <code>origen_model_init</code> will recurse
into the inherited modules and classes.</p>

      <p>This method should accept a single argument, which is the allocated class instance that called <code>origen_model_init</code>.</p>

      <p>For example:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">module</span> <span style="color:#B06;font-weight:bold">A</span>
  <span style="color:#080;font-weight:bold">def</span> <span style="color:#069">self</span>.<span style="color:#06B;font-weight:bold">origen_model_init</span>(instance_of_caller)
    puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">init module A - called by </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>instance_of_caller.class<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">"</span></span>
  <span style="color:#080;font-weight:bold">end</span>
  
  <span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">B</span>
    <span style="color:#080;font-weight:bold">def</span> <span style="color:#069">self</span>.<span style="color:#06B;font-weight:bold">origen_model_init</span>(instance_of_caller)
      puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">init class B in module A - called by </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>instance_of_caller.class<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">"</span></span>
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Parent</span>
  include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">Model</span>
  include <span style="color:#036;font-weight:bold">A</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#036;font-weight:bold">Parent</span>.new
  <span style="color:#777">#=&gt; "init module A - called by Parent"</span>
  <span style="color:#777">#=&gt; "init class B in module A - called by Parent" &lt;= this is called prior to any A::B initialization.</span>
<span style="color:#777">#=&gt; Instance of Parent class</span>

</pre></div>
</div>
      </div>

      <p>Note that included modules and classes do not need to mix in <code>Origen::Model</code>. Only the class including
said modules and classes.</p>

      <p>Again, this is for use in booting included classes and modules, not in booting the parent. <code>origen_model_init</code>
will NOT be called in following and <code>pre_initialize</code> should be used:</p>

      <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>
<span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Parent</span>
  include <span style="color:#036;font-weight:bold">Origen</span>::<span style="color:#036;font-weight:bold">Model</span>
  include <span style="color:#036;font-weight:bold">A</span>
  
  <span style="color:#080;font-weight:bold">def</span> <span style="color:#069">self</span>.<span style="color:#06B;font-weight:bold">origen_model_init</span>(instance_of_caller)
    puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">origen_model_init in Parent</span><span style="color:#710">"</span></span>
  <span style="color:#080;font-weight:bold">end</span>
  
  <span style="color:#080;font-weight:bold">def</span> <span style="color:#069">self</span>.<span style="color:#06B;font-weight:bold">pre_initialize</span>
    puts <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">pre_initialize in Parent</span><span style="color:#710">"</span></span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#036;font-weight:bold">Parent</span>.new
  <span style="color:#777">#=&gt; "init module A - called by Parent"</span>
  <span style="color:#777">#=&gt; "init class B in module A - called by Parent"</span>
  <span style="color:#777">#=&gt; "pre_initialize in Parent"</span>
<span style="color:#777">#=&gt; Instance of Parent class</span>

</pre></div>
</div>
      </div>

      <div style="position: relative">
  <hr>
  <div>    
  <a class="anchor" name="Comments"></a>          
  <h4><a href="#Comments">Comments</a></h4>          
</div>
</div>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'origen-sdk';
    var disqus_title;
    var disqus_url = 'http://' + window.location.hostname + window.location.pathname;

    disqus_title = $("h1").text();
    if (disqus_title.length == 0) {
      disqus_title = $("h2").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("h3").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("title").text();
    } else {
      disqus_title = disqus_title + ' (' + $("title").text() + ')';
    }

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>

    </article>
  </div>
</div>

<script src="/origen/search.js"></script>


      </div><!-- /.container -->
    

    <footer class="footer">
      <div class="container">
        <p class="pull-left text-muted">
          Generated with the <a href="http://origen-sdk.org">Origen Semiconductor Developer's Kit</a>
        </p>
        <p class="pull-right text-muted">Origen is released under the terms of the <a href="https://choosealicense.com/licenses/mit/">MIT license</a></p>
      </div>
    </footer>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="http://origen-sdk.org/js/lunr.min.js"></script>
    <script src="http://origen-sdk.org/js/highlight.js"></script>
    <script src="http://origen-sdk.org/js/custom.js"></script>
    
      <script>
        ((window.gitter = {}).chat = {}).options = {
          room: 'Origen-SDK/users'
        };
      </script>
      <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
    
  </body>
</html>
