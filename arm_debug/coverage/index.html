<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Origen arm debug</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.10.0/application.js' type='text/javascript'></script>    
    <link href='./assets/0.10.0/application.css' media='screen, projection, print' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" type="image/png" href="./assets/0.10.0/favicon_yellow.png" />
    <link rel="icon" type="image/png" href="./assets/0.10.0/favicon.png" />
  </head>
  
  <body>
    <div id="loading">
      <img src="./assets/0.10.0/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" style="display:none;">
      <div class="timestamp">Generated <abbr class="timeago" title="2016-01-06T14:28:28-06:00">2016-01-06T14:28:28-06:00</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent"><span class="yellow">80.31%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         6.05
       </span>
    </span> hits/line)
  </h2>
  <a name="AllFiles"></a>
  <div>
    <b>7</b> files in total.
    <b>513</b> relevant lines. 
    <span class="green"><b>412</b> lines covered</span> and
    <span class="red"><b>101</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#8c1883fbb69f83fbbf34e9e433a1158a09344bb6" class="src_link" title="lib/origen_arm_debug.rb">lib/origen_arm_debug.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>16</td>
        <td>10</td>
        <td>10</td>
        <td>0</td>
        <td>5.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#b4baed4c64825b7e1b7da4fd7a5084a5c820eaed" class="src_link" title="lib/origen_arm_debug/driver.rb">lib/origen_arm_debug/driver.rb</a></td>
        <td class="red strong">60.98 %</td>
        <td>107</td>
        <td>41</td>
        <td>25</td>
        <td>16</td>
        <td>4.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#2640894e17e65a29f5e103e0cc94cbe6c4a1b1b9" class="src_link" title="lib/origen_arm_debug/dut.rb">lib/origen_arm_debug/dut.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>51</td>
        <td>17</td>
        <td>17</td>
        <td>0</td>
        <td>3.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#d650e830423d2bfff276010f577d250b8e78644c" class="src_link" title="lib/origen_arm_debug/dut_jtag.rb">lib/origen_arm_debug/dut_jtag.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>18</td>
        <td>11</td>
        <td>11</td>
        <td>0</td>
        <td>2.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#d146984556eb1858d25cf68b1e0c72d5d5febeba" class="src_link" title="lib/origen_arm_debug/dut_swd.rb">lib/origen_arm_debug/dut_swd.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>15</td>
        <td>8</td>
        <td>8</td>
        <td>0</td>
        <td>2.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#54b60cb14625c1f90c7c38bacbab201a89d71bc0" class="src_link" title="lib/origen_arm_debug/mem_ap.rb">lib/origen_arm_debug/mem_ap.rb</a></td>
        <td class="red strong">76.74 %</td>
        <td>461</td>
        <td>215</td>
        <td>165</td>
        <td>50</td>
        <td>3.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#ee101de3b39e7b697a23dc1e0f6d965a05c7b6cf" class="src_link" title="lib/origen_arm_debug/swj_dp.rb">lib/origen_arm_debug/swj_dp.rb</a></td>
        <td class="yellow strong">83.41 %</td>
        <td>502</td>
        <td>211</td>
        <td>176</td>
        <td>35</td>
        <td>10.1</td>
      </tr>
      
    </tbody>
  </table>
</div>


        
      </div>
    
      <div id="footer">
        Generated by <a href="http://github.com/colszowka/simplecov">simplecov</a> v0.10.0 
        and simplecov-html v0.10.0<br/>
        using examples
      </div>
    
      <div class="source_files">
      
        <div class="source_table" id="8c1883fbb69f83fbbf34e9e433a1158a09344bb6">
  <div class="header">
    <h3>lib/origen_arm_debug.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>10</b> relevant lines. 
      <span class="green"><b>10</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;origen&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">require_relative &#39;../config/application.rb&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;origen_jtag&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;origen_swd&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"># Include this module to add a ARM Debug driver to your class</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">module OrigenARMDebug</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">  autoload :Driver, &#39;origen_arm_debug/driver&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">  autoload :SWJ_DP, &#39;origen_arm_debug/swj_dp&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">  autoload :MemAP,  &#39;origen_arm_debug/mem_ap&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">  # Returns an instance of the OrigenARMDebug::Driver</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">  def arm_debug</code>
        </li>
      
        <li class="covered" data-hits="49" data-linenumber="14">
          <span class="hits">49</span>
          
          <code class="ruby">    @arm_debug ||= Driver.new(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="b4baed4c64825b7e1b7da4fd7a5084a5c820eaed">
  <div class="header">
    <h3>lib/origen_arm_debug/driver.rb</h3>
    <h4><span class="red">60.98 %</span> covered</h4>
    <div>
      <b>41</b> relevant lines. 
      <span class="green"><b>25</b> lines covered</span> and
      <span class="red"><b>16</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module OrigenARMDebug</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">  # To use this driver the owner model must include the SWD or JTAG protocol drivers:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">  #   include JTAG</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">  #     or</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">  #   include SWD</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">  class Driver</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    # Returns the parent object that instantiated the driver, could be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">    # either a DUT object or a protocol abstraction</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    # Initialize class variables</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">    # @param [Object] owner Parent object</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">    #   DUT.new.arm_debug</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(owner, options = {})</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="21">
          <span class="hits">8</span>
          
          <code class="ruby">      @owner = owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">    # Create and/or return the SWJ_DP object with specified protocol</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">    def swj_dp</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="26">
          <span class="hits">27</span>
          
          <code class="ruby">      if owner.respond_to?(:swd)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="27">
          <span class="hits">6</span>
          
          <code class="ruby">        @swj_dp ||= SWJ_DP.new(self, :swd)</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="28">
          <span class="hits">21</span>
          
          <code class="ruby">      elsif owner.respond_to?(:jtag)</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="29">
          <span class="hits">21</span>
          
          <code class="ruby">        @swj_dp ||= SWJ_DP.new(self, :jtag)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">    # Returns an instance of the OrigenARMDebug::MemAP</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">    def mem_ap</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="35">
          
          
          <code class="ruby">      @mem_ap ||= MemAP.new(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">    # Method to add additional Memory Access Ports (MEM-AP) with specified base address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">    # @param [Integer] name Short name for mem_ap that is being created</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">    # @param [Integer] base_address Base address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">    # @examples</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">    #   arm_debug.add_mem_ap(&#39;alt_ahbapi&#39;, 0x02000000)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="46">
          <span class="hits">1</span>
          
          <code class="ruby">    def add_mem_ap(name, base_address)</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="47">
          <span class="hits">24</span>
          
          <code class="ruby">      instance_variable_set(&quot;@#{name}&quot;, MemAP.new(self, name: name, base_address: base_address))</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="48">
          <span class="hits">24</span>
          
          <code class="ruby">      self.class.send(:attr_accessor, name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">    # Read from a MEM-AP register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">    # @param [Integer, Origen::Register::Reg, Origen::Register::BitCollection, Origen::Register::Bit] reg_or_val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">    #   Value to be read. If a reg/bit collection is supplied this can be pre-marked for</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">    #   read, store or overlay and which will result in the requested action being applied to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">    #   the cycles corresponding to those bits only (don&#39;t care cycles will be generated for the others).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">    def read_register(reg_or_val, options = {})</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="59">
          <span class="hits">5</span>
          
          <code class="ruby">      if options[:ap].nil?</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="60">
          <span class="hits">5</span>
          
          <code class="ruby">        ap = mem_ap           # default to &#39;mem_ap&#39; if no AP is specified as an option</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="62">
          
          
          <code class="ruby">        ap = options[:ap]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="64">
          <span class="hits">5</span>
          
          <code class="ruby">      ap.read_register(reg_or_val, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">    # Write data to a MEM-AP register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">    # @param [Integer, Origen::Register::Reg, Origen::Register::BitCollection, Origen::Register::Bit] reg_or_val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">    #   Value to be written to. If a reg/bit collection is supplied this can be pre-marked for</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">    #   read, store or overlay and which will result in the requested action being applied to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">    #   the cycles corresponding to those bits only (don&#39;t care cycles will be generated for the others).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="74">
          <span class="hits">1</span>
          
          <code class="ruby">    def write_register(reg_or_val, options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="75">
          <span class="hits">2</span>
          
          <code class="ruby">      if options[:ap].nil?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="76">
          <span class="hits">2</span>
          
          <code class="ruby">        ap = mem_ap           # default to &#39;mem_ap&#39; if no AP is specified as an option</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="78">
          
          
          <code class="ruby">        ap = options[:ap]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="80">
          <span class="hits">2</span>
          
          <code class="ruby">      ap.write_register(reg_or_val, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="83">
          <span class="hits">1</span>
          
          <code class="ruby">    def inspect_driver</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="84">
          
          
          <code class="ruby">      Origen.log.info &quot;ARM Debug Driver = #{arm_debug_driver}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="87">
          <span class="hits">1</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">    # Short-cut to protocol driver</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="90">
          <span class="hits">1</span>
          
          <code class="ruby">    def arm_debug_driver</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="91">
          
          
          <code class="ruby">      return @arm_debug_driver if @arm_debug_driver</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="92">
          
          
          <code class="ruby">      if owner.respond_to?(:jtag)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="93">
          
          
          <code class="ruby">        @arm_debug_driver = owner.jtag</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="94">
          
          
          <code class="ruby">      elsif owner.respond_to?(:swd)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="95">
          
          
          <code class="ruby">        @arm_debug_driver = owner.swd</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="97">
          
          
          <code class="ruby">        puts &#39;Cannot find a compatible physical driver!&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="98">
          
          
          <code class="ruby">        puts &#39;The ARM debug protocol supports the following phyiscal drivers:&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="99">
          
          
          <code class="ruby">        puts &#39;  JTAG - http://origen-sdk.org/origen_jtag&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="100">
          
          
          <code class="ruby">        puts &#39;  Single Wire Debug - http://origen-sdk.org/origen_swd&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="101">
          
          
          <code class="ruby">        puts &#39;  Background Debug - http://origen-sdk.org/origen_bdm&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="102">
          
          
          <code class="ruby">        puts &quot;Add one to your #{owner.class} to resolve this error.&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="103">
          
          
          <code class="ruby">        fail &#39;ARM Debug error!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="2640894e17e65a29f5e103e0cc94cbe6c4a1b1b9">
  <div class="header">
    <h3>lib/origen_arm_debug/dut.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>17</b> relevant lines. 
      <span class="green"><b>17</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module OrigenARMDebug</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">  # This is a dummy DUT model which is used</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">  # to instantiate and test the ARMDebug locally</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">  # during development.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">  #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">  # It is not included when this library is imported.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">  class DUT</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">    include OrigenARMDebug</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">    include Origen::Callbacks</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">    include Origen::Registers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    # Initializes simple dut model with test register and required jtag/swd pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">    #   $dut = OrigenARMDebug::DUT.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="18">
          <span class="hits">8</span>
          
          <code class="ruby">      add_reg :dap,  0x0, 35, data: { pos: 0, bits: 35 }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="20">
          <span class="hits">8</span>
          
          <code class="ruby">      add_reg :test, 0x0, 32, data: { pos: 0, bits: 32 },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">                              bit:  { pos: 0 }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="23">
          <span class="hits">8</span>
          
          <code class="ruby">      arm_debug.add_mem_ap(&#39;mem_ap&#39;, 0x00000000)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="24">
          <span class="hits">8</span>
          
          <code class="ruby">      arm_debug.add_mem_ap(&#39;mdm_ap&#39;, 0x01000000)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="25">
          <span class="hits">8</span>
          
          <code class="ruby">      arm_debug.add_mem_ap(&#39;alt_ahbapi&#39;, 0x02000000)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">    # Add any custom startup business here.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">    def startup(options)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="32">
          <span class="hits">6</span>
          
          <code class="ruby">      $tester.set_timeset(&#39;arm_debug&#39;, 40)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">    # Read data from a register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">    # @param [Register] reg Register name or address value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">    def read_register(reg, options = {})</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="40">
          <span class="hits">5</span>
          
          <code class="ruby">      arm_debug.read_register(reg, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">    # Write data to a register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">    # @param [Register] reg Register name or address value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">    def write_register(reg, options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="48">
          <span class="hits">2</span>
          
          <code class="ruby">      arm_debug.write_register(reg, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="d650e830423d2bfff276010f577d250b8e78644c">
  <div class="header">
    <h3>lib/origen_arm_debug/dut_jtag.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>11</b> relevant lines. 
      <span class="green"><b>11</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module OrigenARMDebug</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">  # Simple JTAG-specific dut model that inherits from protocol-agnostic DUT model</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">  class JTAG_DUT &lt; DUT</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    include OrigenJTAG</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">    include Origen::Pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    # Adds jtag-required pins to the simple dut model</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    # Returns nothing.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="10">
          <span class="hits">4</span>
          
          <code class="ruby">      super</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="11">
          <span class="hits">4</span>
          
          <code class="ruby">      add_pin :tclk</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="12">
          <span class="hits">4</span>
          
          <code class="ruby">      add_pin :tdi</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="13">
          <span class="hits">4</span>
          
          <code class="ruby">      add_pin :tdo</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="14">
          <span class="hits">4</span>
          
          <code class="ruby">      add_pin :tms</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="15">
          <span class="hits">4</span>
          
          <code class="ruby">      add_pin :trst</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="d146984556eb1858d25cf68b1e0c72d5d5febeba">
  <div class="header">
    <h3>lib/origen_arm_debug/dut_swd.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>8</b> relevant lines. 
      <span class="green"><b>8</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module OrigenARMDebug</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">  # Simple SWD-specific dut model that inherits from protocol-agnostic DUT model</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">  class SWD_DUT &lt; DUT</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    include OrigenSWD</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">    include Origen::Pins</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    # Adds swd-required pins to the simple dut model</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    # Returns nothing.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="10">
          <span class="hits">4</span>
          
          <code class="ruby">      super</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="11">
          <span class="hits">4</span>
          
          <code class="ruby">      add_pin :swd_clk</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="12">
          <span class="hits">4</span>
          
          <code class="ruby">      add_pin :swd_dio</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="54b60cb14625c1f90c7c38bacbab201a89d71bc0">
  <div class="header">
    <h3>lib/origen_arm_debug/mem_ap.rb</h3>
    <h4><span class="red">76.74 %</span> covered</h4>
    <div>
      <b>215</b> relevant lines. 
      <span class="green"><b>165</b> lines covered</span> and
      <span class="red"><b>50</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module OrigenARMDebug</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">  # Object that defines the API necessary to perform MEM-AP transactions.  Requires</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">  #  a top-level protocol be defined as well as a top-level instantiation of an</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">  #  SWJ-DP object.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">  class MemAP</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    # ARM Debug Interface v5.1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">    MEM_ADDR_CSW  = 0x00000000</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">    MEM_ADDR_TAR  = 0x00000004</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">    MEM_ADDR_DRW  = 0x0000000C</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">    MEM_ADDR_BD0  = 0x00000010</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">    MEM_ADDR_BD1  = 0x00000014</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">    MEM_ADDR_BD2  = 0x00000018</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">    MEM_ADDR_BD3  = 0x0000001C</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">    MEM_ADDR_CFG  = 0x000000F4</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">    MEM_ADDR_BASE = 0x000000F8</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">    MEM_ADDR_IDR  = 0x000000FC</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">    # Returns the parent object that instantiated the driver</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">    # Initialize class variables</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">    # @param [Object] owner Parent object</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">    #   DUT.new.arm_debug.mem_ap</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(owner, options = {})</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="30">
          <span class="hits">24</span>
          
          <code class="ruby">      @owner = owner</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="31">
          <span class="hits">24</span>
          
          <code class="ruby">      @name = options[:name].nil? ? &#39;default&#39; : options[:name]</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="32">
          <span class="hits">24</span>
          
          <code class="ruby">      @base_address = options[:base_address].nil? ? 0x00000000 : options[:base_address]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">      # reset values for MEM-AP registers</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="35">
          <span class="hits">24</span>
          
          <code class="ruby">      @current_csw = 0x00000000</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="36">
          <span class="hits">24</span>
          
          <code class="ruby">      @current_tar = 0xffffffff</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="37">
          <span class="hits">24</span>
          
          <code class="ruby">      @current_dsw = 0x00000000</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">    # Shortcut name to SWJ-DP Debug Port</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">    def debug_port</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="42">
          <span class="hits">15</span>
          
          <code class="ruby">      owner.swj_dp</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :dp, :debug_port</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">    # Output some instance-specific information</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">    def inspect</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="48">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen.log.info &#39;=&#39; * 30</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="49">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen.log.info &#39; MEM-AP INFO&#39;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="50">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen.log.info &quot;  name: #{@name}&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="51">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen.log.info &quot;  base address: 0x#{@base_address.to_hex}&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="52">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen.log.info &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="53">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen.log.debug &quot;  csw_reg_addr  = 0x#{csw_reg_addr.to_hex}&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="54">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen.log.debug &quot;  tar_reg_addr  = 0x#{tar_reg_addr.to_hex}&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="55">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen.log.debug &quot;  drw_reg_addr  = 0x#{drw_reg_addr.to_hex}&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="56">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen.log.debug &quot;  bd0_reg_addr  = 0x#{bd0_reg_addr.to_hex}&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="57">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen.log.debug &quot;  bd1_reg_addr  = 0x#{bd1_reg_addr.to_hex}&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="58">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen.log.debug &quot;  bd2_reg_addr  = 0x#{bd2_reg_addr.to_hex}&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="59">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen.log.debug &quot;  bd3_reg_addr  = 0x#{bd3_reg_addr.to_hex}&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="60">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen.log.debug &quot;  cfg_reg_addr  = 0x#{cfg_reg_addr.to_hex}&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="61">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen.log.debug &quot;  base_reg_addr = 0x#{base_reg_addr.to_hex}&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="62">
          <span class="hits">3</span>
          
          <code class="ruby">      Origen.log.debug &quot;  idr_reg_addr  = 0x#{idr_reg_addr.to_hex}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">    # -----------------------------------------------------------------------------</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">    # User API</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">    # -----------------------------------------------------------------------------</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby">    def read_register(reg_or_val, options = {})</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="69">
          <span class="hits">5</span>
          
          <code class="ruby">      if reg_or_val.respond_to?(:data)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="70">
          <span class="hits">5</span>
          
          <code class="ruby">        addr = reg_or_val.addr</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="71">
          <span class="hits">5</span>
          
          <code class="ruby">        options = { reg: reg_or_val }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="73">
          
          
          <code class="ruby">        addr = reg_or_val                 # if not a register, use the &#39;val&#39; as target addr</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="76">
          <span class="hits">5</span>
          
          <code class="ruby">      options = { size: 32 }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="77">
          <span class="hits">5</span>
          
          <code class="ruby">      options = { r_mask: &#39;mask&#39;, r_attempts: 1 }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="78">
          <span class="hits">5</span>
          
          <code class="ruby">      msg = &#39;Arm Debug: Shift out data for reading&#39;</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="79">
          <span class="hits">5</span>
          
          <code class="ruby">      options = { arm_debug_comment: msg }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="80">
          <span class="hits">5</span>
          
          <code class="ruby">      size = options[:size]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="82">
          <span class="hits">5</span>
          
          <code class="ruby">      set_size(size)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="83">
          <span class="hits">5</span>
          
          <code class="ruby">      set_addr(addr)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="84">
          <span class="hits">5</span>
          
          <code class="ruby">      debug_port.read_ap(drw_reg_addr, options)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="85">
          <span class="hits">5</span>
          
          <code class="ruby">      rdata = get_rdata(size, addr, rdata)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="86">
          <span class="hits">5</span>
          
          <code class="ruby">      increment_addr</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="88">
          <span class="hits">5</span>
          
          <code class="ruby">      cc &quot;MEM-AP(#{@name}): R-#{size.to_s(10)}: &quot;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">        &quot;addr=0x#{addr.to_s(16).rjust(size / 4, &#39;0&#39;)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="92">
          <span class="hits">1</span>
          
          <code class="ruby">    def write_register(reg_or_val, options = {});</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="93">
          <span class="hits">2</span>
          
          <code class="ruby">      if reg_or_val.respond_to?(:data)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="94">
          <span class="hits">2</span>
          
          <code class="ruby">        addr = reg_or_val.addr</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="95">
          <span class="hits">2</span>
          
          <code class="ruby">        wdata = reg_or_val.data</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="96">
          <span class="hits">2</span>
          
          <code class="ruby">        options = { reg: reg_or_val }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="98">
          
          
          <code class="ruby">        addr = reg_or_val                 # if not a register, use the &#39;val&#39; as target addr</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="99">
          
          
          <code class="ruby">        wdata = options[:wdata]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="101">
          <span class="hits">2</span>
          
          <code class="ruby">      options = { size: 32 }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="102">
          <span class="hits">2</span>
          
          <code class="ruby">      options = { w_attempts: 1 }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="103">
          <span class="hits">2</span>
          
          <code class="ruby">      msg = &quot;Arm Debug: Shift in data to write: #{wdata.to_hex}&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="104">
          <span class="hits">2</span>
          
          <code class="ruby">      options = { arm_debug_comment: msg }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="105">
          <span class="hits">2</span>
          
          <code class="ruby">      size = options[:size]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="107">
          <span class="hits">2</span>
          
          <code class="ruby">      set_size(size)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="108">
          <span class="hits">2</span>
          
          <code class="ruby">      set_addr(addr)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="109">
          <span class="hits">2</span>
          
          <code class="ruby">      wdata = get_wdata(size, addr, wdata)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="110">
          <span class="hits">2</span>
          
          <code class="ruby">      debug_port.write_ap(drw_reg_addr, wdata, options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="111">
          <span class="hits">2</span>
          
          <code class="ruby">      increment_addr</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="113">
          <span class="hits">2</span>
          
          <code class="ruby">      cc &quot;MEM-AP(#{@name}): WR-#{size.to_s(10)}: &quot;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">        &quot;addr=0x#{addr.to_s(16).rjust(size / 4, &#39;0&#39;)}, &quot;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">        &quot;data=0x#{wdata.to_s(16).rjust(size / 4, &#39;0&#39;)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">    # Method to read from a mem_ap register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">    # @param [Integer] addr Address of register to be read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">    #   # don&#39;t care what data actually is</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">    #   mem_ap.read(0x2000000, size: 32)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">    #   # expect read data to be = 0x5a5a5a5a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">    #   mem_ap.read(0x2000000, size: 32, edata: 0x5a5a5a5a)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">    #   # expect read data to be = 0xXXXXXX5a (mask out all bits except [7:0])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">    #   mem_ap.read(0x2000000, size: 32, edata: 0x5a5a5a5a, r_mask: 0x000000ff)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">    # Returns nothing.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="134">
          <span class="hits">1</span>
          
          <code class="ruby">    def read(addr, options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="135">
          <span class="hits">2</span>
          
          <code class="ruby">      options = { size: 32 }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="136">
          <span class="hits">2</span>
          
          <code class="ruby">      options = { r_mask: &#39;mask&#39;, r_attempts: 1 }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="137">
          <span class="hits">2</span>
          
          <code class="ruby">      msg = &#39;Arm Debug: Shift out data for reading&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="138">
          <span class="hits">2</span>
          
          <code class="ruby">      options = { arm_debug_comment: msg }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="139">
          <span class="hits">2</span>
          
          <code class="ruby">      size = options[:size]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="141">
          <span class="hits">2</span>
          
          <code class="ruby">      set_size(size)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="142">
          <span class="hits">2</span>
          
          <code class="ruby">      set_addr(addr)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="143">
          <span class="hits">2</span>
          
          <code class="ruby">      debug_port.read_ap(drw_reg_addr, options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="144">
          <span class="hits">2</span>
          
          <code class="ruby">      rdata = get_rdata(size, addr, rdata)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="145">
          <span class="hits">2</span>
          
          <code class="ruby">      increment_addr</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="147">
          <span class="hits">2</span>
          
          <code class="ruby">      cc &quot;MEM-AP(#{@name}): R-#{size.to_s(10)}: &quot;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">        &quot;addr=0x#{addr.to_s(16).rjust(size / 4, &#39;0&#39;)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">    # Method to write to a mem_ap register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby">    # @param [Integer] addr Address of register to be read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">    # @param [Integer] wdata Data to be written</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">    #   mem_ap.write(0x2000000, 0xc3c3a5a5, size: 32)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">    # Returns nothing.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="161">
          <span class="hits">1</span>
          
          <code class="ruby">    def write(addr, wdata, options = {});</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="162">
          <span class="hits">2</span>
          
          <code class="ruby">      options = { size: 32 }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="163">
          <span class="hits">2</span>
          
          <code class="ruby">      options = { w_attempts: 1 }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="164">
          <span class="hits">2</span>
          
          <code class="ruby">      msg = &quot;Arm Debug: Shift in data to write: #{wdata.to_hex}&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="165">
          <span class="hits">2</span>
          
          <code class="ruby">      options = { arm_debug_comment: msg }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="166">
          <span class="hits">2</span>
          
          <code class="ruby">      size = options[:size]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="168">
          <span class="hits">2</span>
          
          <code class="ruby">      set_size(size)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="169">
          <span class="hits">2</span>
          
          <code class="ruby">      set_addr(addr)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="170">
          <span class="hits">2</span>
          
          <code class="ruby">      wdata = get_wdata(size, addr, wdata)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="171">
          <span class="hits">2</span>
          
          <code class="ruby">      debug_port.write_ap(drw_reg_addr, wdata, options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="172">
          <span class="hits">2</span>
          
          <code class="ruby">      increment_addr</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="174">
          <span class="hits">2</span>
          
          <code class="ruby">      cc &quot;MEM-AP(#{@name}): WR-#{size.to_s(10)}: &quot;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">        &quot;addr=0x#{addr.to_s(16).rjust(size / 4, &#39;0&#39;)}, &quot;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby">        &quot;data=0x#{wdata.to_s(16).rjust(size / 4, &#39;0&#39;)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">    # Method to write and then read from a mem_ap register (legacy)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby">    # @param [Integer] addr Address of register to be read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">    # @param [Integer] wdata Data to be written</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">    #   # don&#39;t care what read-back data actually is</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">    #   mem_ap.write_read(0x2000000, 0xc3c3a5a5, size: 32)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">    #   # expect read-back data to be same as write data = 0xc3c3a5a5</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby">    #   mem_ap.read(0x2000000, 0xc3c3a5a5, size: 32, edata: 0xc3c3a5a5)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="192">
          
          
          <code class="ruby">    #   # expect read-back data to be = 0xXXXXXXa5 (mask out all bits except [7:0])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby">    #   mem_ap.read(0x2000000, 0xc3c3a5a5, size: 32, edata: 0xc3c3a5a5, r_mask: 0x000000ff)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">    # Returns nothing.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="196">
          <span class="hits">1</span>
          
          <code class="ruby">    def write_read(addr, wdata, options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="197">
          <span class="hits">1</span>
          
          <code class="ruby">      options = { size: 32 }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="198">
          <span class="hits">1</span>
          
          <code class="ruby">      options = { edata: 0x00000000, r_mask: 0xffffffff, actual: 0x00000000 }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="199">
          <span class="hits">1</span>
          
          <code class="ruby">      options = { w_attempts: 1, r_attempts: 1 }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="200">
          <span class="hits">1</span>
          
          <code class="ruby">      size = options[:size]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="202">
          <span class="hits">1</span>
          
          <code class="ruby">      write(addr, wdata, options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="203">
          <span class="hits">1</span>
          
          <code class="ruby">      options[:edata] = wdata &amp; options[:r_mask] if options[:edata] == 0x00000000</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="204">
          <span class="hits">1</span>
          
          <code class="ruby">      read(addr, options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="205">
          <span class="hits">1</span>
          
          <code class="ruby">      actual = wdata &amp; options[:r_mask]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="206">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="207">
          <span class="hits">1</span>
          
          <code class="ruby">      cc &quot;MEM-AP(#{@name}): WR-#{size.to_s(10)}: &quot;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="208">
          
          
          <code class="ruby">        &quot;addr=0x#{addr.to_s(16).rjust(size / 4, &#39;0&#39;)}, &quot;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby">        &quot;wdata=0x#{wdata.to_s(16).rjust(size / 4, &#39;0&#39;)}, &quot;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby">        &quot;read=0x#{actual.to_s(16).rjust(size / 4, &#39;0&#39;)}, &quot;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">        &quot;expect=0x#{options[:edata].to_s(16).rjust(size / 4, &#39;0&#39;)}, &quot;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">        &quot;mask=0x#{options[:r_mask].to_s(16).rjust(size / 4, &#39;0&#39;)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="215">
          
          
          <code class="ruby">    # -----------------------------------------------------------------------------</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="216">
          
          
          <code class="ruby">    # Legacy Support (to be phased out)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">    # -----------------------------------------------------------------------------</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby">    # Method to read from a mem_ap register (legacy)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby">    # @param [Integer] addr Address of register to be read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">    # @param [Integer] rdata This really does nothing since only care about value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby">    #   of options[:edata]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby">    # Returns nothing.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="226">
          <span class="hits">1</span>
          
          <code class="ruby">    def r(addr, rdata, options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">      # Warn caller that this method is being deprecated</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="228">
          
          
          <code class="ruby">      msg = &#39;Use mem_ap.read(addr, options) instead of R(addr, rdata, options)&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="229">
          
          
          <code class="ruby">      Origen.deprecate msg</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="231">
          
          
          <code class="ruby">      # Patch arguments and send to new method</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="232">
          
          
          <code class="ruby">      options = { rdata: rdata }.merge(options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="233">
          
          
          <code class="ruby">      read(addr, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="235">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :R, :r</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby">    # Method to write to a mem_ap register (legacy)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="239">
          
          
          <code class="ruby">    # @param [Integer] addr Address of register to be written to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="240">
          
          
          <code class="ruby">    # @param [Integer] wdata Data to be written</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby">    # Returns nothing.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="243">
          <span class="hits">1</span>
          
          <code class="ruby">    def w(addr, wdata, options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">      # Warn caller that this method is being deprecated</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="245">
          
          
          <code class="ruby">      msg = &#39;Use mem_ap.write(addr, wdata, options) instead of W(addr, wdata, options)&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="246">
          
          
          <code class="ruby">      Origen.deprecate msg</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="248">
          
          
          <code class="ruby">      # Patch arguments and send to new method</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="249">
          
          
          <code class="ruby">      write(addr, wdata, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="251">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :W, :w</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby">    # Method to write and then read from a mem_ap register (legacy)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="254">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="255">
          
          
          <code class="ruby">    # @param [Integer] addr Address of register to be read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">    # @param [Integer] wdata Data to be written</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="257">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby">    # Returns nothing.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="259">
          <span class="hits">1</span>
          
          <code class="ruby">    def wr(addr, wdata, options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby">      # Warn caller that this method is being deprecated</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="261">
          
          
          <code class="ruby">      msg = &#39;Use mem_ap.write_read(addr, wdata, options) instead of WR(addr, wdata, options)&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="262">
          
          
          <code class="ruby">      Origen.deprecate msg</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">      # Patch arguments and send to new method</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="265">
          
          
          <code class="ruby">      write_read(addr, wdata, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="266">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="267">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :WR, :wr</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="268">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="269">
          
          
          <code class="ruby">    # -----------------------------------------------------------------------------</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="270">
          
          
          <code class="ruby">    # Support Code</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="271">
          
          
          <code class="ruby">    # -----------------------------------------------------------------------------</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="273">
          <span class="hits">1</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="274">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby">    # Sets the size of the data (by writing to the CSW size bits).  It will only</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="276">
          
          
          <code class="ruby">    #   write to the size if the size from the previous transaction has changed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby">    # @param [Integer] size Size of data, supports 8-bit, 16-bit, and 32-bit</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="279">
          <span class="hits">1</span>
          
          <code class="ruby">    def set_size(size)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="280">
          <span class="hits">11</span>
          
          <code class="ruby">      case size</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="281">
          
          
          <code class="ruby">        when 8 then  new_size = 0x00000000</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="282">
          
          
          <code class="ruby">        when 16 then new_size = 0x00000001</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="283">
          <span class="hits">11</span>
          
          <code class="ruby">        when 32 then new_size = 0x00000002</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="284">
          
          
          <code class="ruby">        else new_size = 0x00000002</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="285">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="286">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="287">
          <span class="hits">11</span>
          
          <code class="ruby">      if (@current_csw == 0x00000000)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="288">
          <span class="hits">1</span>
          
          <code class="ruby">        debug_port.read_ap(csw_reg_addr)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="289">
          <span class="hits">1</span>
          
          <code class="ruby">        @current_csw = 0x23000040</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="291">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="292">
          <span class="hits">11</span>
          
          <code class="ruby">      csw_size = @current_csw &amp; 0x00000003</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="293">
          <span class="hits">11</span>
          
          <code class="ruby">      if (csw_size != new_size)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="294">
          <span class="hits">1</span>
          
          <code class="ruby">        new_csw = (@current_csw &amp; 0xfffffffc) | new_size</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="295">
          <span class="hits">1</span>
          
          <code class="ruby">        debug_port.write_ap(csw_reg_addr, new_csw)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="296">
          <span class="hits">1</span>
          
          <code class="ruby">        @current_csw = new_csw</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="297">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="300">
          
          
          <code class="ruby">    # Sets the addr of the transaction.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="301">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">    # @param [Integer] addr Address of data to be read from or written to</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="303">
          <span class="hits">1</span>
          
          <code class="ruby">    def set_addr(addr)</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="304">
          <span class="hits">11</span>
          
          <code class="ruby">      arm_debug_comment = &quot;Arm Debug: Shift in read/write address: #{addr.to_hex}&quot;</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="305">
          <span class="hits">11</span>
          
          <code class="ruby">      options = { arm_debug_comment: arm_debug_comment }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="306">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="307">
          <span class="hits">11</span>
          
          <code class="ruby">      if (@current_tar != addr)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="308">
          <span class="hits">2</span>
          
          <code class="ruby">        debug_port.write_ap(tar_reg_addr, addr, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="309">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="310">
          <span class="hits">11</span>
          
          <code class="ruby">      @current_tar = addr;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="311">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="313">
          
          
          <code class="ruby">    # Increment the address for the next transaction.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="314">
          <span class="hits">1</span>
          
          <code class="ruby">    def increment_addr</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="315">
          <span class="hits">11</span>
          
          <code class="ruby">      current_csw_5_4 = (@current_csw &amp; 0x00000030) &gt;&gt; 4</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="316">
          <span class="hits">11</span>
          
          <code class="ruby">      current_csw_2_0 = @current_csw &amp; 0x00000007</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="317">
          <span class="hits">11</span>
          
          <code class="ruby">      if (current_csw_5_4 == 0b01)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="318">
          
          
          <code class="ruby">        case current_csw_2_0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="319">
          
          
          <code class="ruby">          when 0b000 then @current_tar += 1   # Increment single</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="320">
          
          
          <code class="ruby">          when 0b001 then @current_tar += 2   # Increment single</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="321">
          
          
          <code class="ruby">          when 0b010 then @current_tar += 4   # Increment single</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="322">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="323">
          <span class="hits">11</span>
          
          <code class="ruby">      elsif (current_csw_5_4 == 0b10)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="324">
          
          
          <code class="ruby">        @current_tar += 4                     # Increment packed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="325">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="326">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="327">
          <span class="hits">11</span>
          
          <code class="ruby">      if current_csw_5_4 &amp;&amp; ((@current_tar &amp; 0xfffffc00) == 0xffffffff)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="328">
          
          
          <code class="ruby">        # reset tar when attempting to increment past 1kB boundary</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="329">
          
          
          <code class="ruby">        @current_tar = 0xffffffff</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="330">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="331">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="332">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="333">
          
          
          <code class="ruby">    # Create a bit-wise mask based on size, address and mask parameters.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="335">
          
          
          <code class="ruby">    # @param [Integer] size Size of data, supports 8-bit, 16-bit, and 32-bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="336">
          
          
          <code class="ruby">    # @param [Integer] addr Address of data to be read from or written to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="337">
          
          
          <code class="ruby">    # @param [Integer] mask Mask for full data, used to create nibble mask</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="338">
          <span class="hits">1</span>
          
          <code class="ruby">    def get_mask(size, addr, mask)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="339">
          
          
          <code class="ruby">      addr_1_0 &amp;= 0x00000003</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="340">
          
          
          <code class="ruby">      case size</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="341">
          
          
          <code class="ruby">        when 8</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="342">
          
          
          <code class="ruby">          case addr_1_0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="343">
          
          
          <code class="ruby">            when 0b00 then mask &amp;= 0x000000ff</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="344">
          
          
          <code class="ruby">            when 0b01 then mask &amp;= 0x0000ff00</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="345">
          
          
          <code class="ruby">            when 0b10 then mask &amp;= 0x00ff0000</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="346">
          
          
          <code class="ruby">            when 0b11 then mask &amp;= 0xff000000</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="347">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="348">
          
          
          <code class="ruby">        when 16</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="349">
          
          
          <code class="ruby">          case addr_1_0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="350">
          
          
          <code class="ruby">            when 0b00 then mask &amp;= 0x0000ffff</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="351">
          
          
          <code class="ruby">            when 0b10 then mask &amp;= 0xffff0000</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="352">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="353">
          
          
          <code class="ruby">        when 32</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="354">
          
          
          <code class="ruby">          mask &amp;= 0xffffffff</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="355">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="356">
          
          
          <code class="ruby">      mask</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="357">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="358">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="359">
          
          
          <code class="ruby">    # Create a bit-wise read-data based on size, address and rdata parameters.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="360">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="361">
          
          
          <code class="ruby">    # @param [Integer] size Size of data, supports 8-bit, 16-bit, and 32-bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="362">
          
          
          <code class="ruby">    # @param [Integer] addr Address of data to be read from or written to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="363">
          
          
          <code class="ruby">    # @param [Integer] rdata Full data for read, used to create nibble read data</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="364">
          <span class="hits">1</span>
          
          <code class="ruby">    def get_rdata(size, addr, rdata)</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="365">
          <span class="hits">7</span>
          
          <code class="ruby">      addr_1_0 &amp;= 0x00000003</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="366">
          <span class="hits">7</span>
          
          <code class="ruby">      case size</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="367">
          
          
          <code class="ruby">        when 8</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="368">
          
          
          <code class="ruby">          case addr_1_0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="369">
          
          
          <code class="ruby">            when 0b00 then rdata = 0x000000ff &amp; rdata</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="370">
          
          
          <code class="ruby">            when 0b01 then rdata = 0x000000ff &amp; (rdata &gt;&gt; 8)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="371">
          
          
          <code class="ruby">            when 0b10 then rdata = 0x000000ff &amp; (rdata &gt;&gt; 16)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="372">
          
          
          <code class="ruby">            when 0b11 then rdata = 0x000000ff &amp; (rdata &gt;&gt; 24)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="373">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="374">
          
          
          <code class="ruby">        when 16</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="375">
          
          
          <code class="ruby">          case addr_1_0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="376">
          
          
          <code class="ruby">                  when 0b00 then rdata = 0x0000ffff &amp; rdata</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="377">
          
          
          <code class="ruby">                  when 0b10 then rdata = 0x0000ffff &amp; (rdata &gt;&gt; 16)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="378">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby">        when 32</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="380">
          <span class="hits">7</span>
          
          <code class="ruby">          rdata = rdata</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="381">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="382">
          <span class="hits">7</span>
          
          <code class="ruby">      rdata</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="383">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="384">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="385">
          
          
          <code class="ruby">    # Create a bit-wise read-data based on size, address and wdata parameters.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="386">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="387">
          
          
          <code class="ruby">    # @param [Integer] size Size of data, supports 8-bit, 16-bit, and 32-bit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="388">
          
          
          <code class="ruby">    # @param [Integer] addr Address of data to be read from or written to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="389">
          
          
          <code class="ruby">    # @param [Integer] wdata Full data for write, used to create nibble write data</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="390">
          <span class="hits">1</span>
          
          <code class="ruby">    def get_wdata(size, addr, wdata);</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="391">
          <span class="hits">4</span>
          
          <code class="ruby">      addr_1_0 &amp;= 0x00000003</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="392">
          <span class="hits">4</span>
          
          <code class="ruby">      case size</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="393">
          
          
          <code class="ruby">        when 8</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="394">
          
          
          <code class="ruby">          case addr_1_0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="395">
          
          
          <code class="ruby">                  when 0b00 then wdata = 0x000000ff &amp; wdata</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="396">
          
          
          <code class="ruby">                  when 0b01 then wdata = 0x0000ff00 &amp; (wdata &lt;&lt; 8)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="397">
          
          
          <code class="ruby">                  when 0b10 then wdata = 0x00ff0000 &amp; (wdata &lt;&lt; 16)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="398">
          
          
          <code class="ruby">                  when 0b11 then wdata = 0xff000000 &amp; (wdata &lt;&lt; 24)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="399">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="400">
          
          
          <code class="ruby">        when 16</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="401">
          
          
          <code class="ruby">          case addr_1_0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="402">
          
          
          <code class="ruby">                  when 0b00 then wdata = 0x0000ffff &amp; wdata</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="403">
          
          
          <code class="ruby">                  when 0b10 then wdata = 0xffff0000 &amp; (wdata &lt;&lt; 16)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="404">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="405">
          
          
          <code class="ruby">        when 32</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="406">
          <span class="hits">4</span>
          
          <code class="ruby">          wdata = wdata</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="407">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="408">
          <span class="hits">4</span>
          
          <code class="ruby">      wdata</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="409">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="410">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="411">
          
          
          <code class="ruby">    # Returns address of CSW register for this mem-ap instance</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="412">
          <span class="hits">1</span>
          
          <code class="ruby">    def csw_reg_addr</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="413">
          <span class="hits">5</span>
          
          <code class="ruby">      MEM_ADDR_CSW + @base_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="414">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="415">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="416">
          
          
          <code class="ruby">    # Returns address of TAR register for this mem-ap instance</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="417">
          <span class="hits">1</span>
          
          <code class="ruby">    def tar_reg_addr</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="418">
          <span class="hits">5</span>
          
          <code class="ruby">      MEM_ADDR_TAR + @base_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="419">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="420">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="421">
          
          
          <code class="ruby">    # Returns address of DRW register for this mem-ap instance</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="422">
          <span class="hits">1</span>
          
          <code class="ruby">    def drw_reg_addr</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="423">
          <span class="hits">14</span>
          
          <code class="ruby">      MEM_ADDR_DRW + @base_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="424">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="425">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="426">
          
          
          <code class="ruby">    # Returns address of BD0 register for this mem-ap instance</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="427">
          <span class="hits">1</span>
          
          <code class="ruby">    def bd0_reg_addr</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="428">
          <span class="hits">3</span>
          
          <code class="ruby">      MEM_ADDR_BD0 + @base_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="429">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="430">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="431">
          
          
          <code class="ruby">    # Returns address of BD1 register for this mem-ap instance</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="432">
          <span class="hits">1</span>
          
          <code class="ruby">    def bd1_reg_addr</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="433">
          <span class="hits">3</span>
          
          <code class="ruby">      MEM_ADDR_BD1 + @base_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="434">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="435">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="436">
          
          
          <code class="ruby">    # Returns address of BD2 register for this mem-ap instance</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="437">
          <span class="hits">1</span>
          
          <code class="ruby">    def bd2_reg_addr</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="438">
          <span class="hits">3</span>
          
          <code class="ruby">      MEM_ADDR_BD2 + @base_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="439">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="440">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="441">
          
          
          <code class="ruby">    # Returns address of BD3 register for this mem-ap instance</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="442">
          <span class="hits">1</span>
          
          <code class="ruby">    def bd3_reg_addr</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="443">
          <span class="hits">3</span>
          
          <code class="ruby">      MEM_ADDR_BD3 + @base_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="444">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="445">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="446">
          
          
          <code class="ruby">    # Returns address of CFG register for this mem-ap instance</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="447">
          <span class="hits">1</span>
          
          <code class="ruby">    def cfg_reg_addr</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="448">
          <span class="hits">3</span>
          
          <code class="ruby">      MEM_ADDR_CFG + @base_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="449">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="450">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="451">
          
          
          <code class="ruby">    # Returns address of BASE register for this mem-ap instance</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="452">
          <span class="hits">1</span>
          
          <code class="ruby">    def base_reg_addr</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="453">
          <span class="hits">3</span>
          
          <code class="ruby">      MEM_ADDR_BASE + @base_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="454">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="455">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="456">
          
          
          <code class="ruby">    # Returns address of IDR register for this mem-ap instance</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="457">
          <span class="hits">1</span>
          
          <code class="ruby">    def idr_reg_addr</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="458">
          <span class="hits">3</span>
          
          <code class="ruby">      MEM_ADDR_IDR + @base_address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="459">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="460">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="461">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="ee101de3b39e7b697a23dc1e0f6d965a05c7b6cf">
  <div class="header">
    <h3>lib/origen_arm_debug/swj_dp.rb</h3>
    <h4><span class="yellow">83.41 %</span> covered</h4>
    <div>
      <b>211</b> relevant lines. 
      <span class="green"><b>176</b> lines covered</span> and
      <span class="red"><b>35</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module OrigenARMDebug</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">  # Object that defines API for performing Debug AP transations using SWD or JTAG</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">  class SWJ_DP</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    include Origen::Registers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    # Returns the parent object that instantiated the driver, could be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">    # either a DUT object or a protocol abstraction</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    # Protocol implemented at the top-level (i.e. SWD or JTAG)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :imp</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    # Customizable delay for DUT-specific required cycles for write_ap transaction</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">    #   to complete</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :write_ap_dly</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">    # Customizable delay for DUT-specific required cycles for acc_access transaction</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">    #   to complete</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :acc_access_dly</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">    # Customizable random number generator mode.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">    #   compress: any uncompared data will be set to 0 when shifted out for better vector compression</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">    #   unrolled: any uncompared data will be set to 5 when shifted out for complete unrolling of JTAG data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">    #   random: true random number generation, not ideal for pattern comparison</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :random_mode</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">    # Initialize class variables</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">    # @param [Object] owner Parent object</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">    #   # Create new SWD::Driver object</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">    #   DUT.new.arm_debug.swj_dp</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(owner, implementation, options = {})</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="37">
          <span class="hits">3</span>
          
          <code class="ruby">      @owner = owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="39">
          <span class="hits">3</span>
          
          <code class="ruby">      if implementation == :jtag || implementation == :swd</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="40">
          <span class="hits">3</span>
          
          <code class="ruby">        @imp = implementation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="42">
          
          
          <code class="ruby">        msg = &quot;SWJ-DP: &#39;#{implementation}&#39; implementation not supported.  JTAG and SWD only&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="43">
          
          
          <code class="ruby">        fail msg</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="46">
          <span class="hits">3</span>
          
          <code class="ruby">      @random_mode = :compress</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="48">
          <span class="hits">3</span>
          
          <code class="ruby">      @write_ap_dly = 8</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="49">
          <span class="hits">3</span>
          
          <code class="ruby">      @acc_access_dly = 7</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="51">
          <span class="hits">3</span>
          
          <code class="ruby">      @current_apaddr = 0</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="52">
          <span class="hits">3</span>
          
          <code class="ruby">      @orundetect = 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="54">
          <span class="hits">3</span>
          
          <code class="ruby">      add_reg :ir,        0x00,  4, data: { pos: 0, bits: 4 }      # ARM-JTAG Instruction Register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="56">
          <span class="hits">3</span>
          
          <code class="ruby">      add_reg :dpacc,     0x00, 35, rnw:  { pos: 0 },            # DP-Access Register (DPACC)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">                                    a:    { pos: 1, bits: 2 },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">                                    data: { pos: 3, bits: 32 }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="60">
          <span class="hits">3</span>
          
          <code class="ruby">      add_reg :apacc,     0x00, 35, rnw:  { pos: 0 },            # AP-Access Register (APACC)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">                                    a:    { pos: 1, bits: 2 },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">                                    data: { pos: 0, bits: 32 }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">      # jtag-dp only</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="65">
          <span class="hits">3</span>
          
          <code class="ruby">      add_reg :idcode,    0x00, 32, data: { pos: 0, bits: 32 }   # Device ID Code Register (IDCODE)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="66">
          <span class="hits">3</span>
          
          <code class="ruby">      add_reg :abort,     0x00, 35, rnw:  { pos: 0 },            # Abort Register (ABORT)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">                                    a:    { pos: 1, bits: 2 },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">                                    data: { pos: 0, bits: 32 }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">      # DP Registers</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="71">
          <span class="hits">3</span>
          
          <code class="ruby">      add_reg :dpidr,     0x00, 32, data: { pos: 0, bits: 32 }</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="72">
          <span class="hits">3</span>
          
          <code class="ruby">      add_reg :ctrl_stat, 0x04, 32, data: { pos: 0, bits: 32 }</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="73">
          <span class="hits">3</span>
          
          <code class="ruby">      add_reg :select,    0x08, 32, data: { pos: 0, bits: 32 }</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="74">
          <span class="hits">3</span>
          
          <code class="ruby">      add_reg :rdbuff,    0x0C, 32, data: { pos: 0, bits: 32 }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">    #-------------------------------------</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">    #  DPACC Access API</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">    #-------------------------------------</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">    # Method to read from a Debug Port register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">    # @param [String] name Name of register to be read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">    #   Supports: &#39;IDCODE&#39;,&#39;ABORT&#39;,&#39;CTRL/STAT&#39;,&#39;SELECT&#39;,&#39;RDBUFF&#39;,&#39;WCR&#39;,&#39;RESEND&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">    # @option options [Integer] edata Value to compare read data against</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="87">
          <span class="hits">1</span>
          
          <code class="ruby">    def read_dp(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="88">
          <span class="hits">21</span>
          
          <code class="ruby">      options = { r_attempts: 1, mask: 0xffffffff }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="89">
          <span class="hits">21</span>
          
          <code class="ruby">      if @imp == :swd</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="90">
          <span class="hits">6</span>
          
          <code class="ruby">        read_dp_swd(name, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="92">
          <span class="hits">15</span>
          
          <code class="ruby">        read_dp_jtag(name, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="94">
          <span class="hits">21</span>
          
          <code class="ruby">      msg = &quot;#{@imp.to_s.upcase}-DP: R-32: name=&#39;#{name}&#39;&quot;</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="95">
          <span class="hits">21</span>
          
          <code class="ruby">      msg += &quot;, expected=#{options[:edata].to_s(16).rjust(8, &#39;0&#39;)}&quot; unless options[:edata].nil?</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="96">
          <span class="hits">21</span>
          
          <code class="ruby">      cc msg</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">    # Method to read from a Debug Port register and compare for an expected value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">    # @param [String] name Name of register to be read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">    #   Supports: &#39;IDCODE&#39;,&#39;ABORT&#39;,&#39;CTRL/STAT&#39;,&#39;SELECT&#39;,&#39;RDBUFF&#39;,&#39;WCR&#39;,&#39;RESEND&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">    # @param [Integer] edata Value to compare read data against</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="105">
          <span class="hits">1</span>
          
          <code class="ruby">    def read_expect_dp(name, edata, options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="106">
          <span class="hits">2</span>
          
          <code class="ruby">      options[:edata] = edata</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="107">
          <span class="hits">2</span>
          
          <code class="ruby">      read_dp(name, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">    # Method to write to a Debug Port register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">    # @param [String] name Name of register to be written to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">    #   Supports: &#39;IDCODE&#39;,&#39;ABORT&#39;,&#39;CTRL/STAT&#39;,&#39;SELECT&#39;,&#39;RDBUFF&#39;,&#39;WCR&#39;,&#39;RESEND&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">    # @param [Integer] wdata Value to written</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="116">
          <span class="hits">1</span>
          
          <code class="ruby">    def write_dp(name, wdata, options = {})</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="117">
          <span class="hits">6</span>
          
          <code class="ruby">      options = { w_attempts: 1 }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="118">
          <span class="hits">6</span>
          
          <code class="ruby">      if @imp == :swd</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="119">
          <span class="hits">3</span>
          
          <code class="ruby">        write_dp_swd(name, wdata, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="121">
          <span class="hits">3</span>
          
          <code class="ruby">        write_dp_jtag(name, wdata, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="123">
          <span class="hits">6</span>
          
          <code class="ruby">      cc &quot;#{@imp.to_s.upcase}-DP: W-32: name=&#39;#{name}&#39;, data=0x#{wdata.to_s(16).rjust(8, &#39;0&#39;)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">    # Method to write to and then read from a Debug Port register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">    # @param [String] name Name of register to be written to and read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">    #   Supports: &#39;IDCODE&#39;,&#39;ABORT&#39;,&#39;CTRL/STAT&#39;,&#39;SELECT&#39;,&#39;RDBUFF&#39;,&#39;WCR&#39;,&#39;RESEND&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">    # @param [Integer] wdata Value to written</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="132">
          <span class="hits">1</span>
          
          <code class="ruby">    def write_read_dp(name, wdata, options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="133">
          <span class="hits">2</span>
          
          <code class="ruby">      write_dp(name, wdata, options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="134">
          <span class="hits">2</span>
          
          <code class="ruby">      read_dp(name, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="136">
          <span class="hits">2</span>
          
          <code class="ruby">      cc &quot;#{@imp.to_s.upcase}-DP: WR-32: name=&#39;#{name}&#39;, data=0x#{wdata.to_s(16).rjust(8, &#39;0&#39;)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">    #-------------------------------------</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">    #  APACC Access API</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">    #-------------------------------------</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">    # Method to read from a Access Port register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">    # @param [Integer] addr Address of register to be read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">    # @option options [Integer] edata Value to compare read data against</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="148">
          <span class="hits">1</span>
          
          <code class="ruby">    def read_ap(addr, options = {})</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="149">
          <span class="hits">14</span>
          
          <code class="ruby">      rwb = 1</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="150">
          <span class="hits">14</span>
          
          <code class="ruby">      options = { r_attempts: 1 }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">      # Create another copy of options with select keys removed.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby">      # This first read is junk so we do not want to store it or compare it.</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="154">
          <span class="hits">14</span>
          
          <code class="ruby">      junk_options = options.clone.delete_if do |key, val|</code>
        </li>
      
        <li class="covered" data-hits="47" data-linenumber="155">
          <span class="hits">47</span>
          
          <code class="ruby">        (key.eql?(:r_mask) &amp;&amp; val.eql?(&#39;store&#39;)) || key.eql?(:compare_data) || key.eql?(:reg)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="158">
          <span class="hits">14</span>
          
          <code class="ruby">      apacc_access(addr, rwb, random, 0, junk_options)</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="159">
          <span class="hits">14</span>
          
          <code class="ruby">      read_dp(&#39;RDBUFF&#39;, options)                     # This is the real data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="161">
          <span class="hits">14</span>
          
          <code class="ruby">      if @imp == :swd</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="162">
          <span class="hits">3</span>
          
          <code class="ruby">        cc &quot;SW-AP: R-32: addr=0x#{addr.to_s(16).rjust(8, &#39;0&#39;)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="164">
          <span class="hits">11</span>
          
          <code class="ruby">        cc &quot;JTAG-AP: R-32: addr=0x#{addr.to_s(16).rjust(8, &#39;0&#39;)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">    # Method to read from a Access Port register and compare against specific value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">    # @param [Integer] addr Address of register to be read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">    # @param [Integer] edata Value to compare read data against</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="173">
          <span class="hits">1</span>
          
          <code class="ruby">    def read_expect_ap(addr, edata, options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="174">
          <span class="hits">2</span>
          
          <code class="ruby">      options[:edata] = edata</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="175">
          <span class="hits">2</span>
          
          <code class="ruby">      read_ap(addr, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="177">
          <span class="hits">1</span>
          
          <code class="ruby">    alias_method :wait_read_expect_ap, :read_expect_ap</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">    # Method to write to a Access Port register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby">    # @param [Integer] addr Address of register to be read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">    # @param [Integer] wdata Value to written</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="184">
          <span class="hits">1</span>
          
          <code class="ruby">    def write_ap(addr, wdata, options = {})</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="185">
          <span class="hits">9</span>
          
          <code class="ruby">      rwb = 0</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="186">
          <span class="hits">9</span>
          
          <code class="ruby">      options = { w_attempts: 1 }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="187">
          <span class="hits">9</span>
          
          <code class="ruby">      apacc_access(addr, rwb, wdata, 0, options)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="188">
          <span class="hits">9</span>
          
          <code class="ruby">      $tester.cycle(repeat: @write_ap_dly) if @imp == :jtag</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="189">
          <span class="hits">9</span>
          
          <code class="ruby">      if @imp == :swd</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="190">
          <span class="hits">1</span>
          
          <code class="ruby">        cc &#39;SW-AP: W-32: &#39;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">          &quot;addr=0x#{addr.to_s(16).rjust(8, &#39;0&#39;)}, &quot;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="192">
          
          
          <code class="ruby">          &quot;data=0x#{wdata.to_s(16).rjust(8, &#39;0&#39;)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="194">
          <span class="hits">8</span>
          
          <code class="ruby">        cc &#39;JTAG-AP: W-32: &#39;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">          &quot;addr=0x#{addr.to_s(16).rjust(8, &#39;0&#39;)}, &quot;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby">          &quot;data=0x#{wdata.to_s(16).rjust(8, &#39;0&#39;)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="197">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">    # Method to write to and then read from a Debug Port register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">    # @param [Integer] addr Address of register to be read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby">    # @param [Integer] wdata Value to written</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="205">
          <span class="hits">1</span>
          
          <code class="ruby">    def write_read_ap(addr, wdata, options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="206">
          <span class="hits">2</span>
          
          <code class="ruby">      write_ap(addr, wdata, options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="207">
          <span class="hits">2</span>
          
          <code class="ruby">      read_ap(addr, options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="208">
          <span class="hits">2</span>
          
          <code class="ruby">      if @imp == :swd</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="209">
          <span class="hits">1</span>
          
          <code class="ruby">        cc &#39;SW-AP: WR-32: &#39;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby">          &quot;addr=0x#{addr.to_s(16).rjust(8, &#39;0&#39;)}, &quot;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">          &quot;data=0x#{wdata.to_s(16).rjust(8, &#39;0&#39;)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="213">
          <span class="hits">1</span>
          
          <code class="ruby">        cc &#39;JTAG-AP: WR-32: &#39;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby">          &quot;addr=0x#{addr.to_s(16).rjust(8, &#39;0&#39;)}, &quot;\</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="215">
          
          
          <code class="ruby">          &quot;data=0x#{wdata.to_s(16).rjust(8, &#39;0&#39;)}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="216">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="219">
          <span class="hits">1</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby">    #-----------------------------------------------</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">    #  DPACC Access Implementation-Specific methods</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby">    #-----------------------------------------------</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby">    # Method to read from a Debug Port register with SWD protocol</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="226">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">    # @param [String] name Name of register to be read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby">    #   Supports: &#39;IDCODE&#39;,&#39;ABORT&#39;,&#39;CTRL/STAT&#39;,&#39;SELECT&#39;,&#39;RDBUFF&#39;,&#39;WCR&#39;,&#39;RESEND&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="230">
          <span class="hits">1</span>
          
          <code class="ruby">    def read_dp_swd(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="231">
          <span class="hits">6</span>
          
          <code class="ruby">      rwb = 1</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="232">
          <span class="hits">6</span>
          
          <code class="ruby">      case name</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="233">
          <span class="hits">2</span>
          
          <code class="ruby">        when &#39;IDCODE&#39;    then dpacc_access(name, rwb, random, options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="234">
          
          
          <code class="ruby">        when &#39;ABORT&#39;     then Origen.log.error &quot;#{name} #{@imp.to_s.upcase}-DP register is write-only!&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="235">
          <span class="hits">1</span>
          
          <code class="ruby">        when &#39;CTRL/STAT&#39; then dpacc_access(name, rwb, random, options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="236">
          
          
          <code class="ruby">        when &#39;SELECT&#39;    then Origen.log.error &quot;#{name} #{@imp.to_s.upcase}-DP register is write-only!&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="237">
          <span class="hits">3</span>
          
          <code class="ruby">        when &#39;RDBUFF&#39;    then dpacc_access(name, rwb, random, options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="238">
          
          
          <code class="ruby">        when &#39;WCR&#39;       then dpacc_access(name, rwb, random, options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="239">
          
          
          <code class="ruby">        when &#39;RESEND&#39;    then dpacc_access(name, rwb, random, options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="240">
          
          
          <code class="ruby">        else Origen.log.error &quot;Unknown #{@imp.to_s.upcase}-DP register name #{name}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">    # Method to read from a Debug Port register with JTAG protocol</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby">    # @param [String] name Name of register to be read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby">    #   Supports: &#39;IDCODE&#39;,&#39;ABORT&#39;,&#39;CTRL/STAT&#39;,&#39;SELECT&#39;,&#39;RDBUFF&#39;,&#39;WCR&#39;,&#39;RESEND&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="248">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="249">
          <span class="hits">1</span>
          
          <code class="ruby">    def read_dp_jtag(name, options = {})</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="250">
          <span class="hits">15</span>
          
          <code class="ruby">      rwb = 1</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="251">
          <span class="hits">15</span>
          
          <code class="ruby">      set_ir(name) if name == &#39;IDCODE&#39;</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="252">
          <span class="hits">15</span>
          
          <code class="ruby">      case name</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="253">
          <span class="hits">2</span>
          
          <code class="ruby">        when &#39;IDCODE&#39;    then jtag.write_dr(random, size: 32)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="254">
          
          
          <code class="ruby">        when &#39;ABORT&#39;     then Origen.log.error &quot;#{name} #{@imp.to_s.upcase}-DP register is write-only!&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="255">
          <span class="hits">1</span>
          
          <code class="ruby">        when &#39;CTRL/STAT&#39; then dpacc_access(name, rwb, random, options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="256">
          
          
          <code class="ruby">        when &#39;SELECT&#39;    then dpacc_access(name, rwb, random, options)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="257">
          <span class="hits">12</span>
          
          <code class="ruby">        when &#39;RDBUFF&#39;    then dpacc_access(name, rwb, random, options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="258">
          
          
          <code class="ruby">        else Origen.log.error &quot;Unknown #{@imp.to_s.upcase}-DP register name #{name}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="260">
          <span class="hits">15</span>
          
          <code class="ruby">      read_dp(&#39;RDBUFF&#39;, options) if name != &#39;IDCODE&#39; &amp;&amp; name != &#39;RDBUFF&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="262">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby">    # Method to write to a Debug Port register with SWD protocol</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby">    # @param [String] name Name of register to be read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="266">
          
          
          <code class="ruby">    #   Supports: &#39;IDCODE&#39;,&#39;ABORT&#39;,&#39;CTRL/STAT&#39;,&#39;SELECT&#39;,&#39;RDBUFF&#39;,&#39;WCR&#39;,&#39;RESEND&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby">    # @param [Integer] wdata Data to be written</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="268">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="269">
          <span class="hits">1</span>
          
          <code class="ruby">    def write_dp_swd(name, wdata, options = {})</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="270">
          <span class="hits">3</span>
          
          <code class="ruby">      rwb = 0</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="271">
          <span class="hits">3</span>
          
          <code class="ruby">      case name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="272">
          
          
          <code class="ruby">        when &#39;IDCODE&#39;    then Origen.log.error &quot;#{name} #{@imp.to_s.upcase}-DP register is read-only!&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="273">
          
          
          <code class="ruby">        when &#39;ABORT&#39;     then dpacc_access(name, rwb, wdata, options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="274">
          <span class="hits">1</span>
          
          <code class="ruby">        when &#39;CTRL/STAT&#39; then dpacc_access(name, rwb, wdata, options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="275">
          <span class="hits">2</span>
          
          <code class="ruby">        when &#39;SELECT&#39;    then dpacc_access(name, rwb, wdata, options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="276">
          
          
          <code class="ruby">        when &#39;RDBUFF&#39;    then Origen.log.error &quot;#{name} #{@imp.to_s.upcase}-DP register is read-only!&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="277">
          
          
          <code class="ruby">        when &#39;WCR&#39;       then dpacc_access(name, rwb, wdata, options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="278">
          
          
          <code class="ruby">        when &#39;RESEND&#39;    then Origen.log.error &quot;#{name} #{@imp.to_s.upcase}-DP register is read-only!&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="279">
          
          
          <code class="ruby">        else Origen.log.error &quot;Unknown #{@imp.to_s.upcase}-DP register name #{name}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="280">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="283">
          
          
          <code class="ruby">    # Method to write to a Debug Port register with JTAG protocol</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="284">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="285">
          
          
          <code class="ruby">    # @param [String] name Name of register to be read from</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="286">
          
          
          <code class="ruby">    #   Supports: &#39;IDCODE&#39;,&#39;ABORT&#39;,&#39;CTRL/STAT&#39;,&#39;SELECT&#39;,&#39;RDBUFF&#39;,&#39;WCR&#39;,&#39;RESEND&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="287">
          
          
          <code class="ruby">    # @param [Integer] wdata Data to be written</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="289">
          <span class="hits">1</span>
          
          <code class="ruby">    def write_dp_jtag(name, wdata, options = {})</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="290">
          <span class="hits">3</span>
          
          <code class="ruby">      rwb = 0</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="291">
          <span class="hits">3</span>
          
          <code class="ruby">      case name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="292">
          
          
          <code class="ruby">        when &#39;IDCODE&#39;    then Origen.log.error &quot;#{name} #{@imp.to_s.upcase}-DP register is read-only!&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="293">
          
          
          <code class="ruby">        when &#39;ABORT&#39;     then dpacc_access(name, rwb, wdata, options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="294">
          <span class="hits">1</span>
          
          <code class="ruby">        when &#39;CTRL/STAT&#39; then dpacc_access(name, rwb, wdata, options)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="295">
          <span class="hits">2</span>
          
          <code class="ruby">        when &#39;SELECT&#39;    then dpacc_access(name, rwb, wdata, options)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="296">
          
          
          <code class="ruby">        when &#39;RDBUFF&#39;    then Origen.log.error &quot;#{name} #{@imp.to_s.upcase}-DP register is read-only!&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="297">
          
          
          <code class="ruby">        else Origen.log.error &quot;Unknown #{@imp.to_s.upcase}-DP register name #{name}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="300">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="301">
          
          
          <code class="ruby">    # Method</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="303">
          
          
          <code class="ruby">    # @param [Integer] name Name of register to be transacted</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby">    # @param [Integer] rwb Indicates read or write</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="305">
          
          
          <code class="ruby">    # @param [Integer] wdata Value of data to be written</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="306">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="307">
          <span class="hits">1</span>
          
          <code class="ruby">    def dpacc_access(name, rwb, wdata, options = {})</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="308">
          <span class="hits">25</span>
          
          <code class="ruby">      addr = get_dp_addr(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="309">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="310">
          <span class="hits">25</span>
          
          <code class="ruby">      if name == &#39;CTRL/STAT&#39; &amp;&amp; @imp == :swd</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="311">
          <span class="hits">2</span>
          
          <code class="ruby">        set_apselect(@current_apaddr &amp; 0xFFFFFFFE, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="313">
          <span class="hits">25</span>
          
          <code class="ruby">      set_ir(name) if @imp == :jtag</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="314">
          <span class="hits">25</span>
          
          <code class="ruby">      options = { name: name }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="315">
          <span class="hits">25</span>
          
          <code class="ruby">      acc_access(addr, rwb, 0, wdata, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="316">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="317">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="318">
          
          
          <code class="ruby">    # Method</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="320">
          
          
          <code class="ruby">    # @param [Integer] addr Address of register to be transacted</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="321">
          
          
          <code class="ruby">    # @param [Integer] rwb Indicates read or write</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="322">
          
          
          <code class="ruby">    # @param [Integer] wdata Value of data to be written</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="323">
          
          
          <code class="ruby">    # @param [Integer] rdata Value of data to be read back</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="324">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="325">
          <span class="hits">1</span>
          
          <code class="ruby">    def apacc_access(addr, rwb, wdata, rdata, options = {})</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="326">
          <span class="hits">23</span>
          
          <code class="ruby">      set_apselect((addr &amp; 0xFFFFFFFE) | (@current_apaddr &amp; 1), options)</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="327">
          <span class="hits">23</span>
          
          <code class="ruby">      if @imp == :swd</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="328">
          <span class="hits">4</span>
          
          <code class="ruby">        options.delete(:w_delay) if options.key?(:w_delay)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="329">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="330">
          <span class="hits">19</span>
          
          <code class="ruby">        set_ir(&#39;APACC&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="331">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="332">
          <span class="hits">23</span>
          
          <code class="ruby">      options = { name: &#39;APACC&#39; }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="333">
          <span class="hits">23</span>
          
          <code class="ruby">      acc_access((addr &amp; 0xC), rwb, 1, wdata, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="335">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="336">
          
          
          <code class="ruby">    # Method</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="337">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="338">
          
          
          <code class="ruby">    # @param [Integer] addr Address of register to be transacted</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="339">
          
          
          <code class="ruby">    # @param [Integer] rwb Indicates read or write</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="340">
          
          
          <code class="ruby">    # @param [Integer] ap_dp Indicates Access Port or Debug Port</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="341">
          
          
          <code class="ruby">    # @param [Integer] wdata Value of data to be written</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="342">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="343">
          <span class="hits">1</span>
          
          <code class="ruby">    def acc_access(addr, rwb, ap_dp, wdata, options = {})</code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="344">
          <span class="hits">48</span>
          
          <code class="ruby">      if @imp == :swd</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="345">
          <span class="hits">13</span>
          
          <code class="ruby">        acc_access_swd(addr, rwb, ap_dp, wdata, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="346">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="347">
          <span class="hits">35</span>
          
          <code class="ruby">        acc_access_jtag(addr, rwb, ap_dp, wdata, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="348">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="349">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="350">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="351">
          
          
          <code class="ruby">    # Method SWD-specific</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="352">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="353">
          
          
          <code class="ruby">    # @param [Integer] addr Address of register to be transacted</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="354">
          
          
          <code class="ruby">    # @param [Integer] rwb Indicates read or write</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="355">
          
          
          <code class="ruby">    # @param [Integer] ap_dp Indicates Access Port or Debug Port</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="356">
          
          
          <code class="ruby">    # @param [Integer] wdata Value of data to be written</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="357">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="358">
          <span class="hits">1</span>
          
          <code class="ruby">    def acc_access_swd(addr, rwb, ap_dp, wdata, options = {})</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="359">
          <span class="hits">13</span>
          
          <code class="ruby">      _name = options.delete(:name)</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="360">
          <span class="hits">13</span>
          
          <code class="ruby">      if (rwb == 1)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="361">
          <span class="hits">9</span>
          
          <code class="ruby">        if options[:reg].nil?</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="362">
          <span class="hits">9</span>
          
          <code class="ruby">          swd.read(ap_dp, addr, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="363">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="364">
          
          
          <code class="ruby">          # make sure reg.addr = addr</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="365">
          
          
          <code class="ruby">          Origen.log.error &#39;SWJ_DP ERROR: In acc_access_swd, addr does not match options[:reg].addr&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="366">
          
          
          <code class="ruby">          swd.read(ap_dp, options[:reg], options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="367">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="368">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="369">
          <span class="hits">4</span>
          
          <code class="ruby">        swd.write(ap_dp, addr, wdata, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="370">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="371">
          <span class="hits">13</span>
          
          <code class="ruby">      options = { w_delay: 10 }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="372">
          <span class="hits">13</span>
          
          <code class="ruby">      swd.swd_dio_to_0(options[:w_delay])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="373">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="374">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="375">
          
          
          <code class="ruby">    # Method JTAG-specific</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="376">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="377">
          
          
          <code class="ruby">    # @param [Integer] addr Address of register to be transacted</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="378">
          
          
          <code class="ruby">    # @param [Integer] rwb Indicates read or write</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby">    # @param [Integer] ap_dp Indicates Access Port or Debug Port</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="380">
          
          
          <code class="ruby">    # @param [Integer] wdata Value of data to be written</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="381">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="382">
          <span class="hits">1</span>
          
          <code class="ruby">    def acc_access_jtag(addr, rwb, ap_dp, wdata, options = {})</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="383">
          <span class="hits">35</span>
          
          <code class="ruby">      _name = options.delete(:name)</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="384">
          <span class="hits">35</span>
          
          <code class="ruby">      if !options[:r_attempts].nil?</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="385">
          <span class="hits">26</span>
          
          <code class="ruby">        attempts = options[:r_attempts]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="386">
          
          
          <code class="ruby">      elsif !options[:r_attempts].nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="387">
          
          
          <code class="ruby">        attempts = options[:w_attempts]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="388">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="389">
          <span class="hits">9</span>
          
          <code class="ruby">        attempts = 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="390">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="391">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="392">
          <span class="hits">35</span>
          
          <code class="ruby">      attempts.times do</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="393">
          <span class="hits">35</span>
          
          <code class="ruby">        if _name == &#39;RDBUFF&#39;</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="394">
          <span class="hits">12</span>
          
          <code class="ruby">          if options[:reg].nil?</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="395">
          <span class="hits">7</span>
          
          <code class="ruby">            if options[:r_mask] == &#39;store&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="396">
          
          
          <code class="ruby">              reg(:dpacc).bits(:data).store</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="397">
          
          
          <code class="ruby">            elsif options.key?(:compare_data)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="398">
          
          
          <code class="ruby">              reg(:dpacc).bits(:data).data = options[:compare_data]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="399">
          
          
          <code class="ruby">            elsif options.key?(:edata)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="400">
          <span class="hits">4</span>
          
          <code class="ruby">              options[:compare_data] = options[:edata]</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="401">
          <span class="hits">4</span>
          
          <code class="ruby">              reg(:dpacc).bits(:data).data = options[:edata]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="402">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="403">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="404">
          <span class="hits">5</span>
          
          <code class="ruby">            reg(:dpacc).bits(:data).data = options[:reg].data</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="405">
          <span class="hits">5</span>
          
          <code class="ruby">            (3..34).each do |i|</code>
        </li>
      
        <li class="covered" data-hits="160" data-linenumber="406">
          <span class="hits">160</span>
          
          <code class="ruby">              reg(:dpacc).bits(i).read if options[:reg].bits(i - 3).is_to_be_read?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="407">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="408">
          <span class="hits">5</span>
          
          <code class="ruby">            (3..34).each do |i|</code>
        </li>
      
        <li class="covered" data-hits="160" data-linenumber="409">
          <span class="hits">160</span>
          
          <code class="ruby">              reg(:dpacc).bits(i).store if options[:reg].bits(i - 3).is_to_be_stored?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="410">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="411">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="412">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="413">
          <span class="hits">12</span>
          
          <code class="ruby">          options = options.merge(size: reg(:dpacc).size)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="414">
          <span class="hits">12</span>
          
          <code class="ruby">          jtag.read_dr(reg(:dpacc), options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="415">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="416">
          <span class="hits">23</span>
          
          <code class="ruby">          reg(:dpacc).bits(:data).write(wdata)</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="417">
          <span class="hits">23</span>
          
          <code class="ruby">          reg(:dpacc).bits(:a).write((addr &amp; 0x0000000C) &gt;&gt; 2)</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="418">
          <span class="hits">23</span>
          
          <code class="ruby">          reg(:dpacc).bits(:rnw).write(rwb)</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="419">
          <span class="hits">23</span>
          
          <code class="ruby">          options = options.merge(size: reg(:dpacc).size)</code>
        </li>
      
        <li class="covered" data-hits="23" data-linenumber="420">
          <span class="hits">23</span>
          
          <code class="ruby">          jtag.write_dr(reg(:dpacc), options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="421">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="422">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="423">
          <span class="hits">35</span>
          
          <code class="ruby">      $tester.cycle(repeat: @acc_access_dly)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="424">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="425">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="426">
          
          
          <code class="ruby">    # Returns the address of the register based on the name (string) of the register</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="427">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="428">
          
          
          <code class="ruby">    # @param [String] name Name of the register</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="429">
          <span class="hits">1</span>
          
          <code class="ruby">    def get_dp_addr(name)</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="430">
          <span class="hits">25</span>
          
          <code class="ruby">      case name</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="431">
          <span class="hits">2</span>
          
          <code class="ruby">        when &#39;IDCODE&#39;    then return 0x0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="432">
          
          
          <code class="ruby">        when &#39;ABORT&#39;     then return 0x0</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="433">
          <span class="hits">4</span>
          
          <code class="ruby">        when &#39;CTRL/STAT&#39; then return 0x4</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="434">
          <span class="hits">4</span>
          
          <code class="ruby">        when &#39;SELECT&#39;    then return 0x8</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="435">
          <span class="hits">15</span>
          
          <code class="ruby">        when &#39;RDBUFF&#39;    then return 0xC</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="436">
          
          
          <code class="ruby">        when &#39;WCR&#39;       then return 0x4</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="437">
          
          
          <code class="ruby">        when &#39;RESEND&#39;    then return 0x8</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="438">
          
          
          <code class="ruby">        else Origen.log.error &quot;Unknown #{@imp.to_s.upcase}-DP register name #{name}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="439">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="440">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="441">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="442">
          
          
          <code class="ruby">    # Shifts IR code into the JTAG/ARM Instruction Regsiter based on requested Register Name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="443">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="444">
          
          
          <code class="ruby">    # @param [String] name Name of the register to be interacted with</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="445">
          <span class="hits">1</span>
          
          <code class="ruby">    def set_ir(name)</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="446">
          <span class="hits">37</span>
          
          <code class="ruby">      case name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="447">
          
          
          <code class="ruby">        when &#39;IDCODE&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="448">
          <span class="hits">2</span>
          
          <code class="ruby">          reg(:ir).write(0b1110)                          # JTAGC_ARM_IDCODE</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="449">
          
          
          <code class="ruby">        when &#39;ABORT&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="450">
          
          
          <code class="ruby">          reg(:ir).write(0b1000)                          # JTAGC_ARM_ABORT</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="451">
          
          
          <code class="ruby">        when &#39;CTRL/STAT&#39;, &#39;SELECT&#39;, &#39;RDBUFF&#39;</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="452">
          <span class="hits">16</span>
          
          <code class="ruby">          reg(:ir).write(0b1010)                          # JTAGC_ARM_DPACC</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="453">
          
          
          <code class="ruby">        when &#39;APACC&#39;</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="454">
          <span class="hits">19</span>
          
          <code class="ruby">          reg(:ir).write(0b1011)                          # JTAGC_ARM_APACC</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="455">
          
          
          <code class="ruby">        when &#39;RESEND&#39;, &#39;WCR&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="456">
          
          
          <code class="ruby">          Origen.log.error &quot;#{name} is a SW-DP only register&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="457">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="458">
          
          
          <code class="ruby">          Origen.log.error &quot;Unknown JTAG-DP register name: #{name}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="459">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="460">
          <span class="hits">37</span>
          
          <code class="ruby">      jtag.write_ir(reg(:ir), size: reg(:ir).size)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="461">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="462">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="463">
          
          
          <code class="ruby">    # Method to select an Access Port (AP) by writing to the SELECT register in the Debug Port</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="464">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="465">
          
          
          <code class="ruby">    # @param [Integer] addr Address to be written to the SELECT register.  It&#39;s value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="466">
          
          
          <code class="ruby">    #    will determine which Access Port is selected.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="467">
          
          
          <code class="ruby">    # @param [Hash] options Options to customize the operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="468">
          <span class="hits">1</span>
          
          <code class="ruby">    def set_apselect(addr, options = {})</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="469">
          <span class="hits">25</span>
          
          <code class="ruby">      if @imp == :swd</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="470">
          <span class="hits">6</span>
          
          <code class="ruby">        addr &amp;= 0xff0000f1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="471">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="472">
          <span class="hits">19</span>
          
          <code class="ruby">        addr &amp;= 0xff0000f0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="473">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="474">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="475">
          <span class="hits">25</span>
          
          <code class="ruby">      if (addr != @current_apaddr)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="476">
          <span class="hits">4</span>
          
          <code class="ruby">        write_dp(&#39;SELECT&#39;, addr &amp; 0xff0000ff, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="477">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="478">
          <span class="hits">25</span>
          
          <code class="ruby">      @current_apaddr = addr</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="479">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="480">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="481">
          
          
          <code class="ruby">    # Generates 32-bit number for &#39;dont care&#39; jtag shift outs.  Value generated</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="482">
          
          
          <code class="ruby">    #   depends on class variable &#39;random_mode&#39;.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="483">
          <span class="hits">1</span>
          
          <code class="ruby">    def random</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="484">
          <span class="hits">35</span>
          
          <code class="ruby">      case @random_mode</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="485">
          <span class="hits">35</span>
          
          <code class="ruby">        when :compress then return 0x00000000</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="486">
          
          
          <code class="ruby">        when :unrolled then return 0x55555555</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="487">
          
          
          <code class="ruby">        when :random then return rand(4_294_967_295)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="488">
          
          
          <code class="ruby">        else return 0x00000000</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="489">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="490">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="491">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="492">
          
          
          <code class="ruby">    # Provides shortname access to top-level jtag driver</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="493">
          <span class="hits">1</span>
          
          <code class="ruby">    def jtag</code>
        </li>
      
        <li class="covered" data-hits="74" data-linenumber="494">
          <span class="hits">74</span>
          
          <code class="ruby">      owner.owner.jtag</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="495">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="496">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="497">
          
          
          <code class="ruby">    # Provides shortname access to top-level swd driver</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="498">
          <span class="hits">1</span>
          
          <code class="ruby">    def swd</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="499">
          <span class="hits">26</span>
          
          <code class="ruby">      owner.owner.swd</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="500">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="501">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="502">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
      </div>
    </div>
  </body>
</html>
