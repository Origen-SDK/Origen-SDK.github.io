<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: OrigenARMDebug::ABSIF_SWD
  
    &mdash; Origen ARM Debug 0.4.0
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!OrigenARMDebug/ABSIF_SWD.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (A)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../OrigenARMDebug.html" title="OrigenARMDebug (module)">OrigenARMDebug</a></span></span>
     &raquo; 
    <span class="title">ABSIF_SWD</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: OrigenARMDebug::ABSIF_SWD
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">OrigenARMDebug::ABSIF_SWD</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2">Origen::Registers</dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/origen_arm_debug/abs_if_swd.rb</dd>
  
</dl>
<div class="clear"></div>





  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#owner-instance_method" title="#owner (instance method)">- (Object) <strong>owner</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute owner.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#acc_access-instance_method" title="#acc_access (instance method)">- (Object) <strong>acc_access</strong>(address, rwb, ap_dp, wdata, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#apacc_access-instance_method" title="#apacc_access (instance method)">- (Object) <strong>apacc_access</strong>(addr, rwb, wdata, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dpacc_access-instance_method" title="#dpacc_access (instance method)">- (Object) <strong>dpacc_access</strong>(name, rwb, wdata, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Low-level access functions.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_dp_addr-instance_method" title="#get_dp_addr (instance method)">- (Object) <strong>get_dp_addr</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (ABSIF_SWD) <strong>initialize</strong>(owner, options = {}) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of ABSIF_SWD.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#R_ap-instance_method" title="#R_ap (instance method)">- (Object) <strong>R_ap</strong>(addr, rdata, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#R_dp-instance_method" title="#R_dp (instance method)">- (Object) <strong>R_dp</strong>(name, rdata, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Highest level implementation of API - abstracted from &#39;read&#39; and
&#39;write&#39; for future merging with JTAG debug.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#RE_dp-instance_method" title="#RE_dp (instance method)">- (Object) <strong>RE_dp</strong>(name, edata, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_ap-instance_method" title="#read_ap (instance method)">- (Object) <strong>read_ap</strong>(addr, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_dp-instance_method" title="#read_dp (instance method)">- (Object) <strong>read_dp</strong>(name, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>SWD-specific functions.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_apselect-instance_method" title="#set_apselect (instance method)">- (Object) <strong>set_apselect</strong>(addr, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#swd_xor_calc-instance_method" title="#swd_xor_calc (instance method)">- (Object) <strong>swd_xor_calc</strong>(size, number) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Calculate exclusive OR.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#W_ap-instance_method" title="#W_ap (instance method)">- (Object) <strong>W_ap</strong>(addr, wdata, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#W_dp-instance_method" title="#W_dp (instance method)">- (Object) <strong>W_dp</strong>(name, wdata, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#WAIT_RE_ap-instance_method" title="#WAIT_RE_ap (instance method)">- (Object) <strong>WAIT_RE_ap</strong>(addr, edata, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#WR_ap-instance_method" title="#WR_ap (instance method)">- (Object) <strong>WR_ap</strong>(addr, wdata, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#WR_dp-instance_method" title="#WR_dp (instance method)">- (Object) <strong>WR_dp</strong>(name, wdata, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_ap-instance_method" title="#write_ap (instance method)">- (Object) <strong>write_ap</strong>(addr, wdata, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_dp-instance_method" title="#write_dp (instance method)">- (Object) <strong>write_dp</strong>(name, wdata, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="OrigenARMDebug::ABSIF_SWD (class)">ABSIF_SWD</a></span></tt>) <strong>initialize</strong>(owner, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of ABSIF_SWD</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 18</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_owner'>owner</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@current_apaddr</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@orundetect</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@owner</span> <span class='op'>=</span> <span class='id identifier rubyid_owner'>owner</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="owner-instance_method">
  
    - (<tt>Object</tt>) <strong>owner</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute owner</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 15</span>

<span class='kw'>def</span> <span class='id identifier rubyid_owner'>owner</span>
  <span class='ivar'>@owner</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="acc_access-instance_method">
  
    - (<tt>Object</tt>) <strong>acc_access</strong>(address, rwb, ap_dp, wdata, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 181</span>

<span class='kw'>def</span> <span class='id identifier rubyid_acc_access'>acc_access</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_rwb'>rwb</span><span class='comma'>,</span> <span class='id identifier rubyid_ap_dp'>ap_dp</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_start'>start</span>      <span class='op'>=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_apndp'>apndp</span>      <span class='op'>=</span> <span class='id identifier rubyid_ap_dp'>ap_dp</span>
  <span class='id identifier rubyid_rnw'>rnw</span>        <span class='op'>=</span> <span class='id identifier rubyid_rwb'>rwb</span>
  <span class='id identifier rubyid_addr'>addr</span>       <span class='op'>=</span> <span class='id identifier rubyid_address'>address</span> <span class='op'>&gt;&gt;</span> <span class='int'>2</span>
  <span class='id identifier rubyid_parity_pr'>parity_pr</span>  <span class='op'>=</span> <span class='id identifier rubyid_ap_dp'>ap_dp</span> <span class='op'>^</span> <span class='id identifier rubyid_rwb'>rwb</span> <span class='op'>^</span> <span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span> <span class='op'>&gt;&gt;</span> <span class='int'>3</span><span class='rparen'>)</span> <span class='op'>^</span> <span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span> <span class='op'>&gt;&gt;</span> <span class='int'>2</span><span class='rparen'>)</span> <span class='op'>&amp;</span> <span class='lparen'>(</span><span class='int'>0x01</span><span class='rparen'>)</span> <span class='op'>^</span> <span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span> <span class='op'>&gt;&gt;</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>&amp;</span> <span class='lparen'>(</span><span class='int'>0x01</span><span class='rparen'>)</span> <span class='op'>^</span> <span class='id identifier rubyid_addr'>addr</span> <span class='op'>&amp;</span> <span class='int'>0x01</span>
  <span class='id identifier rubyid_trn'>trn</span>        <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_data'>data</span>       <span class='op'>=</span> <span class='id identifier rubyid_wdata'>wdata</span>
  <span class='id identifier rubyid_require_dp'>require_dp</span> <span class='op'>=</span> <span class='ivar'>@orundetect</span>
  <span class='id identifier rubyid_line_reset'>line_reset</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_stop'>stop</span>       <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_park'>park</span>       <span class='op'>=</span> <span class='int'>1</span>

  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SWD transaction</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Packet Request Phase</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_annotate'>annotate</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Send Start Bit</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_send_data'>send_data</span><span class='lparen'>(</span><span class='id identifier rubyid_start'>start</span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cc'>cc</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Send APnDP Bit (DP or AP Access Register Bit)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>prefix:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_send_data'>send_data</span><span class='lparen'>(</span><span class='id identifier rubyid_apndp'>apndp</span><span class='comma'>,</span>      <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_c2'>c2</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Send RnW Bit (read or write bit)</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_send_data'>send_data</span><span class='lparen'>(</span><span class='id identifier rubyid_rnw'>rnw</span><span class='comma'>,</span>        <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_c2'>c2</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Send Address Bits (2 bits)</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_send_data'>send_data</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span>       <span class='int'>2</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_c2'>c2</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Send Parity Bit</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_send_data'>send_data</span><span class='lparen'>(</span><span class='id identifier rubyid_parity_pr'>parity_pr</span><span class='comma'>,</span>  <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_c2'>c2</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Send Stop Bit</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_send_data'>send_data</span><span class='lparen'>(</span><span class='id identifier rubyid_stop'>stop</span><span class='comma'>,</span>       <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_c2'>c2</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Send Park Bit</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_send_data'>send_data</span><span class='lparen'>(</span><span class='id identifier rubyid_park'>park</span><span class='comma'>,</span>       <span class='int'>1</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Acknowledge Response phase</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_send_data'>send_data</span><span class='lparen'>(</span><span class='int'>0xf</span><span class='comma'>,</span> <span class='id identifier rubyid_trn'>trn</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_get_data'>get_data</span> <span class='lparen'>(</span><span class='int'>3</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Read/Write Data Phase</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_rwb'>rwb</span> <span class='op'>==</span> <span class='int'>1</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Read</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:r_mask</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>store</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_pin'>pin</span><span class='lparen'>(</span><span class='symbol'>:swd_dio</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SWD 32-Bit Read Data Start</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_get_data'>get_data</span><span class='lparen'>(</span><span class='int'>32</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SWD 32-Bit Read Data End</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Get Read Parity Bit</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_get_data'>get_data</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Send Read ACK bits</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_send_data'>send_data</span><span class='lparen'>(</span><span class='int'>0xf</span><span class='comma'>,</span> <span class='id identifier rubyid_trn'>trn</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Write</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Send ACK Bits</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_send_data'>send_data</span><span class='lparen'>(</span><span class='int'>0xf</span><span class='comma'>,</span> <span class='id identifier rubyid_trn'>trn</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SWD 32-Bit Write Start</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_send_data'>send_data</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='int'>32</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SWD 32-Bit Write End</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Send Write Parity Bit</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_send_data'>send_data</span><span class='lparen'>(</span><span class='id identifier rubyid_swd_xor_calc'>swd_xor_calc</span><span class='lparen'>(</span><span class='int'>32</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:w_delay</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SWD DIO to 0 for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:w_delay</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> cycles</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_swd_dio_to_0'>swd_dio_to_0</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:w_delay</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SWD DIO to 0 for 10 cycles</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span><span class='period'>.</span><span class='id identifier rubyid_swd'>swd</span><span class='period'>.</span><span class='id identifier rubyid_swd_dio_to_0'>swd_dio_to_0</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="apacc_access-instance_method">
  
    - (<tt>Object</tt>) <strong>apacc_access</strong>(addr, rwb, wdata, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164
165
166</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 162</span>

<span class='kw'>def</span> <span class='id identifier rubyid_apacc_access'>apacc_access</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_rwb'>rwb</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_set_apselect'>set_apselect</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span> <span class='op'>&amp;</span> <span class='int'>0xFFFFFFFE</span><span class='rparen'>)</span> <span class='op'>|</span> <span class='lparen'>(</span><span class='ivar'>@current_apaddr</span> <span class='op'>&amp;</span> <span class='int'>1</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:w_delay</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:w_delay</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_acc_access'>acc_access</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span> <span class='op'>&amp;</span> <span class='int'>0xC</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_rwb'>rwb</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dpacc_access-instance_method">
  
    - (<tt>Object</tt>) <strong>dpacc_access</strong>(name, rwb, wdata, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Low-level access functions</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 142</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dpacc_access'>dpacc_access</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_rwb'>rwb</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_addr'>addr</span> <span class='op'>=</span> <span class='id identifier rubyid_get_dp_addr'>get_dp_addr</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CTRL/STAT</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CTRL/STAT</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_set_apselect'>set_apselect</span><span class='lparen'>(</span><span class='ivar'>@current_apaddr</span> <span class='op'>&amp;</span> <span class='int'>0xFFFFFFFE</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WCR</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>NOT IMPLEMENTED</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_acc_access'>acc_access</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_rwb'>rwb</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WCR</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>NOT IMPLEMENTED</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CTRL/STAT</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='ivar'>@orundetect</span> <span class='op'>=</span> <span class='id identifier rubyid_wdata'>wdata</span> <span class='op'>&amp;</span> <span class='int'>0x1</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_dp_addr-instance_method">
  
    - (<tt>Object</tt>) <strong>get_dp_addr</strong>(name) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170
171
172
173
174
175
176
177
178
179</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 168</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_dp_addr'>get_dp_addr</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_name'>name</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>IDCODE</span><span class='tstring_end'>&#39;</span></span>    <span class='kw'>then</span> <span class='kw'>return</span> <span class='int'>0x0</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ABORT</span><span class='tstring_end'>&#39;</span></span>     <span class='kw'>then</span> <span class='kw'>return</span> <span class='int'>0x0</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CTRL/STAT</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>then</span> <span class='kw'>return</span> <span class='int'>0x4</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WCR</span><span class='tstring_end'>&#39;</span></span>       <span class='kw'>then</span> <span class='kw'>return</span> <span class='int'>0x4</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RESEND</span><span class='tstring_end'>&#39;</span></span>    <span class='kw'>then</span> <span class='kw'>return</span> <span class='int'>0x8</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT</span><span class='tstring_end'>&#39;</span></span>    <span class='kw'>then</span> <span class='kw'>return</span> <span class='int'>0x8</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RDBUFF</span><span class='tstring_end'>&#39;</span></span>    <span class='kw'>then</span> <span class='kw'>return</span> <span class='int'>0xC</span>
     <span class='kw'>else</span> <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Unknown SW-DP register name</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="R_ap-instance_method">
  
    - (<tt>Object</tt>) <strong>R_ap</strong>(addr, rdata, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 34</span>

<span class='kw'>def</span> <span class='const'>R_ap</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_rdata'>rdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Reading address </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_addr'>addr</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_read_ap'>read_ap</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="R_dp-instance_method">
  
    - (<tt>Object</tt>) <strong>R_dp</strong>(name, rdata, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Highest level implementation of API - abstracted from &#39;read&#39; and
&#39;write&#39; for future merging with JTAG debug</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


25
26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 25</span>

<span class='kw'>def</span> <span class='const'>R_dp</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_rdata'>rdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Reading </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_read_dp'>read_dp</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="RE_dp-instance_method">
  
    - (<tt>Object</tt>) <strong>RE_dp</strong>(name, edata, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 30</span>

<span class='kw'>def</span> <span class='const'>RE_dp</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_edata'>edata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>R_dp</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_edata'>edata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_ap-instance_method">
  
    - (<tt>Object</tt>) <strong>read_ap</strong>(addr, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


130
131
132
133
134
135
136
137
138
139</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 130</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read_ap'>read_ap</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='comment'># Create another copy of options with select keys removed. This first read is junk so we do not want to
</span>  <span class='comment'># store it or compare it.
</span>  <span class='id identifier rubyid_junk_options'>junk_options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_clone'>clone</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_val'>val</span><span class='op'>|</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_eql?'>eql?</span><span class='lparen'>(</span><span class='symbol'>:r_mask</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_val'>val</span><span class='period'>.</span><span class='id identifier rubyid_eql?'>eql?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>store</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_eql?'>eql?</span><span class='lparen'>(</span><span class='symbol'>:compare_data</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='comment'># pass junk options onto the first apacc access
</span>  <span class='id identifier rubyid_apacc_access'>apacc_access</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0x55555555</span><span class='comma'>,</span> <span class='id identifier rubyid_junk_options'>junk_options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_read_dp'>read_dp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RDBUFF</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='comment'># This is the real data
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_dp-instance_method">
  
    - (<tt>Object</tt>) <strong>read_dp</strong>(name, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>SWD-specific functions</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102
103
104
105
106
107
108
109
110
111</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 100</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read_dp'>read_dp</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_name'>name</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>IDCODE</span><span class='tstring_end'>&#39;</span></span>    <span class='kw'>then</span> <span class='id identifier rubyid_dpacc_access'>dpacc_access</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0x55555555</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ABORT</span><span class='tstring_end'>&#39;</span></span>     <span class='kw'>then</span> <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Write only register!</span><span class='tstring_end'>&#39;</span></span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CTRL/STAT</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>then</span> <span class='id identifier rubyid_dpacc_access'>dpacc_access</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0x55555555</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT</span><span class='tstring_end'>&#39;</span></span>    <span class='kw'>then</span> <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Write only register!</span><span class='tstring_end'>&#39;</span></span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RDBUFF</span><span class='tstring_end'>&#39;</span></span>    <span class='kw'>then</span> <span class='id identifier rubyid_dpacc_access'>dpacc_access</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0x55555555</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WCR</span><span class='tstring_end'>&#39;</span></span>       <span class='kw'>then</span> <span class='id identifier rubyid_dpacc_access'>dpacc_access</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0x55555555</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RESEND</span><span class='tstring_end'>&#39;</span></span>    <span class='kw'>then</span> <span class='id identifier rubyid_dpacc_access'>dpacc_access</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0x55555555</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
     <span class='kw'>else</span> <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Unknown SW-DP register name</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_apselect-instance_method">
  
    - (<tt>Object</tt>) <strong>set_apselect</strong>(addr, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


248
249
250
251
252
253
254
255
256
257
258</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 248</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_apselect'>set_apselect</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_addr'>addr</span> <span class='op'>&amp;=</span> <span class='int'>0xff0000f1</span>
  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SET_APSelect: addr = 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_addr'>addr</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span> <span class='op'>!=</span> <span class='ivar'>@current_apaddr</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SET_APSelect: write_dp SELECT</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_write_dp'>write_dp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_addr'>addr</span> <span class='op'>&amp;</span> <span class='int'>0xff0000ff</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='ivar'>@current_apaddr</span> <span class='op'>=</span> <span class='id identifier rubyid_addr'>addr</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="swd_xor_calc-instance_method">
  
    - (<tt>Object</tt>) <strong>swd_xor_calc</strong>(size, number) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Calculate exclusive OR</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


261
262
263
264
265
266
267</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 261</span>

<span class='kw'>def</span> <span class='id identifier rubyid_swd_xor_calc'>swd_xor_calc</span><span class='lparen'>(</span><span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='id identifier rubyid_number'>number</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_xor'>xor</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_size'>size</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_bit'>bit</span><span class='op'>|</span>
    <span class='id identifier rubyid_xor'>xor</span> <span class='op'>^=</span> <span class='lparen'>(</span><span class='id identifier rubyid_number'>number</span> <span class='op'>&gt;&gt;</span> <span class='id identifier rubyid_bit'>bit</span><span class='rparen'>)</span> <span class='op'>&amp;</span> <span class='int'>0x01</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_xor'>xor</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="W_ap-instance_method">
  
    - (<tt>Object</tt>) <strong>W_ap</strong>(addr, wdata, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


75
76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 75</span>

<span class='kw'>def</span> <span class='const'>W_ap</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>w_attempts:</span> <span class='int'>1</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Writing 0x</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> to address 0x</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_addr'>addr</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_write_ap'>write_ap</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="W_dp-instance_method">
  
    - (<tt>Object</tt>) <strong>W_dp</strong>(name, wdata, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53
54
55
56</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 53</span>

<span class='kw'>def</span> <span class='const'>W_dp</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Writing 0x</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> to </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_write_dp'>write_dp</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="WAIT_RE_ap-instance_method">
  
    - (<tt>Object</tt>) <strong>WAIT_RE_ap</strong>(addr, edata, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41
42
43
44
45
46
47
48
49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 39</span>

<span class='kw'>def</span> <span class='const'>WAIT_RE_ap</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_edata'>edata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>mask:</span> <span class='int'>0xffffffff</span><span class='comma'>,</span> <span class='label'>r_attempts:</span> <span class='int'>1</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='comment'># just assume that it always passes
</span>  <span class='id identifier rubyid_actual'>actual</span> <span class='op'>=</span> <span class='id identifier rubyid_edata'>edata</span>

  <span class='const'>R_ap</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_actual'>actual</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ABS-IF: WAIT_RE-AP: addr = 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_addr'>addr</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>\
                         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>actual = 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_actual'>actual</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>\
                         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expected = 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_edata'>edata</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>\
                         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mask = 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mask</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="WR_ap-instance_method">
  
    - (<tt>Object</tt>) <strong>WR_ap</strong>(addr, wdata, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 81</span>

<span class='kw'>def</span> <span class='const'>WR_ap</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>edata:</span> <span class='int'>0x00000000</span><span class='comma'>,</span> <span class='label'>mask:</span> <span class='int'>0xffffffff</span><span class='comma'>,</span>
              <span class='label'>w_attempts:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>r_attempts:</span> <span class='int'>1</span>
            <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='comment'># just assume that it always passes
</span>  <span class='id identifier rubyid_actual'>actual</span> <span class='op'>=</span> <span class='id identifier rubyid_wdata'>wdata</span> <span class='op'>&amp;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mask</span><span class='rbracket'>]</span>
  <span class='const'>W_ap</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:w_delay</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:w_delay</span><span class='rparen'>)</span>
  <span class='const'>R_ap</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_actual'>actual</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ABS-IF: WR-AP: addr = 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_addr'>addr</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>\
                   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>write = 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_wdata'>wdata</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>\
                    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>read = 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_actual'>actual</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>\
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expected = 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:edata</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>\
                    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mask = 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mask</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="WR_dp-instance_method">
  
    - (<tt>Object</tt>) <strong>WR_dp</strong>(name, wdata, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 58</span>

<span class='kw'>def</span> <span class='const'>WR_dp</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>edata:</span> <span class='int'>0x00000000</span><span class='comma'>,</span> <span class='label'>mask:</span> <span class='int'>0xffffffff</span><span class='comma'>,</span>
              <span class='label'>w_attempts:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>r_attempts:</span> <span class='int'>1</span>
            <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='comment'># just assume that it always passes
</span>  <span class='id identifier rubyid_actual'>actual</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:edata</span><span class='rbracket'>]</span> <span class='op'>&amp;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mask</span><span class='rbracket'>]</span>

  <span class='const'>W_dp</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='const'>R_dp</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_actual'>actual</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ABS-IF: WR-DP: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> write = 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_wdata'>wdata</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>\
                            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>read = 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_actual'>actual</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>\
                            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expected = 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:edata</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>\
                            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mask = 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mask</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_ap-instance_method">
  
    - (<tt>Object</tt>) <strong>write_ap</strong>(addr, wdata, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_write_ap'>write_ap</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_apacc_access'>apacc_access</span><span class='lparen'>(</span><span class='id identifier rubyid_addr'>addr</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_dp-instance_method">
  
    - (<tt>Object</tt>) <strong>write_dp</strong>(name, wdata, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


113
114
115
116
117
118
119
120
121
122
123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_arm_debug/abs_if_swd.rb', line 113</span>

<span class='kw'>def</span> <span class='id identifier rubyid_write_dp'>write_dp</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_name'>name</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>IDCODE</span><span class='tstring_end'>&#39;</span></span>    <span class='kw'>then</span> <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SW-DP register is read-only</span><span class='tstring_end'>&#39;</span></span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ABORT</span><span class='tstring_end'>&#39;</span></span>     <span class='kw'>then</span> <span class='id identifier rubyid_dpacc_access'>dpacc_access</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CTRL/STAT</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>then</span> <span class='id identifier rubyid_dpacc_access'>dpacc_access</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT</span><span class='tstring_end'>&#39;</span></span>    <span class='kw'>then</span> <span class='id identifier rubyid_dpacc_access'>dpacc_access</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RDBUFF</span><span class='tstring_end'>&#39;</span></span>    <span class='kw'>then</span> <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SW-DP register is read-only</span><span class='tstring_end'>&#39;</span></span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WCR</span><span class='tstring_end'>&#39;</span></span>       <span class='kw'>then</span> <span class='id identifier rubyid_dpacc_access'>dpacc_access</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_wdata'>wdata</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
     <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RESEND</span><span class='tstring_end'>&#39;</span></span>    <span class='kw'>then</span> <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SW-DP register is read-only</span><span class='tstring_end'>&#39;</span></span>
     <span class='kw'>else</span> <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Unknown SW-DP register name</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Mon Aug 24 21:38:37 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.1.5).
</div>

  </body>
</html>