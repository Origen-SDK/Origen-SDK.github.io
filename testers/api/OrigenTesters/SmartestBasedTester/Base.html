<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: OrigenTesters::SmartestBasedTester::Base
  
    &mdash; Origen Testers 0.8.5
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "OrigenTesters::SmartestBasedTester::Base";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (B)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../OrigenTesters.html" title="OrigenTesters (module)">OrigenTesters</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../SmartestBasedTester.html" title="OrigenTesters::SmartestBasedTester (module)">SmartestBasedTester</a></span></span>
     &raquo; 
    <span class="title">Base</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="../../class_list.html"></iframe>

      <div id="content"><h1>Class: OrigenTesters::SmartestBasedTester::Base
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">OrigenTesters::SmartestBasedTester::Base</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="../VectorBasedTester.html" title="OrigenTesters::VectorBasedTester (module)">VectorBasedTester</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/origen_testers/smartest_based_tester/base.rb<span class="defines">,<br />
  lib/origen_testers/smartest_based_tester/base/flow.rb,<br /> lib/origen_testers/smartest_based_tester/base/generator.rb,<br /> lib/origen_testers/smartest_based_tester/base/test_suite.rb,<br /> lib/origen_testers/smartest_based_tester/base/test_suites.rb,<br /> lib/origen_testers/smartest_based_tester/base/test_method.rb,<br /> lib/origen_testers/smartest_based_tester/base/test_methods.rb,<br /> lib/origen_testers/smartest_based_tester/base/pattern_master.rb,<br /> lib/origen_testers/smartest_based_tester/base/variables_file.rb,<br /> lib/origen_testers/smartest_based_tester/base/pattern_compiler.rb,<br /> lib/origen_testers/smartest_based_tester/base/test_methods/limits.rb,<br /> lib/origen_testers/smartest_based_tester/base/test_methods/ac_tml.rb,<br /> lib/origen_testers/smartest_based_tester/base/test_methods/dc_tml.rb,<br /> lib/origen_testers/smartest_based_tester/base/test_methods/base_tml.rb,<br /> lib/origen_testers/smartest_based_tester/base/test_methods/custom_tml.rb</span>
</dd>
  </dl>
  
</div>

<div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="V93K.html" title="OrigenTesters::SmartestBasedTester::V93K (class)">V93K</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Base/Generator.html" title="OrigenTesters::SmartestBasedTester::Base::Generator (module)">Generator</a></span>
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Base/Flow.html" title="OrigenTesters::SmartestBasedTester::Base::Flow (class)">Flow</a></span>, <span class='object_link'><a href="Base/PatternCompiler.html" title="OrigenTesters::SmartestBasedTester::Base::PatternCompiler (class)">PatternCompiler</a></span>, <span class='object_link'><a href="Base/PatternMaster.html" title="OrigenTesters::SmartestBasedTester::Base::PatternMaster (class)">PatternMaster</a></span>, <span class='object_link'><a href="Base/TestMethod.html" title="OrigenTesters::SmartestBasedTester::Base::TestMethod (class)">TestMethod</a></span>, <span class='object_link'><a href="Base/TestMethods.html" title="OrigenTesters::SmartestBasedTester::Base::TestMethods (class)">TestMethods</a></span>, <span class='object_link'><a href="Base/TestSuite.html" title="OrigenTesters::SmartestBasedTester::Base::TestSuite (class)">TestSuite</a></span>, <span class='object_link'><a href="Base/TestSuites.html" title="OrigenTesters::SmartestBasedTester::Base::TestSuites (class)">TestSuites</a></span>, <span class='object_link'><a href="Base/VariablesFile.html" title="OrigenTesters::SmartestBasedTester::Base::VariablesFile (class)">VariablesFile</a></span>
    
  
</p>






  <h2>Instance Attribute Summary</h2>
  
  <h3 class="inherited">Attributes included from <span class='object_link'><a href="../API.html" title="OrigenTesters::API (module)">API</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../API.html#comment_level-instance_method" title="OrigenTesters::API#comment_level (method)">#comment_level</a></span>, <span class='object_link'><a href="../API.html#generating-instance_method" title="OrigenTesters::API#generating (method)">#generating</a></span>, <span class='object_link'><a href="../API.html#includes-instance_method" title="OrigenTesters::API#includes (method)">#includes</a></span></p>

  
  
  <h3 class="inherited">Attributes included from <span class='object_link'><a href="../Timing.html" title="OrigenTesters::Timing (module)">Timing</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Timing.html#level_period-instance_method" title="OrigenTesters::Timing#level_period (method)">#level_period</a></span>, <span class='object_link'><a href="../Timing.html#timing_toggled_pins-instance_method" title="OrigenTesters::Timing#timing_toggled_pins (method)">#timing_toggled_pins</a></span></p>

  
  
  <h3 class="inherited">Attributes included from <span class='object_link'><a href="../VectorGenerator.html" title="OrigenTesters::VectorGenerator (module)">VectorGenerator</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../VectorGenerator.html#compress-instance_method" title="OrigenTesters::VectorGenerator#compress (method)">#compress</a></span>, <span class='object_link'><a href="../VectorGenerator.html#expand_repeats-instance_method" title="OrigenTesters::VectorGenerator#expand_repeats (method)">#expand_repeats</a></span>, <span class='object_link'><a href="../VectorGenerator.html#vector_comments-instance_method" title="OrigenTesters::VectorGenerator#vector_comments (method)">#vector_comments</a></span></p>


  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#before_timeset_change-instance_method" title="#before_timeset_change (instance method)">#<strong>before_timeset_change</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#call_subroutine-instance_method" title="#call_subroutine (instance method)">#<strong>call_subroutine</strong>(name, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Call a subroutine.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#called_subroutines-instance_method" title="#called_subroutines (instance method)">#<strong>called_subroutines</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an array of subroutines called while generating the current
pattern.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#end_subroutine-instance_method" title="#end_subroutine (instance method)">#<strong>end_subroutine</strong>(_cond = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Ends the current subroutine that was started with a previous call to
start_subroutine.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#format_vector-instance_method" title="#format_vector (instance method)">#<strong>format_vector</strong>(vec)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This is an internal method use by Origen which returns a fully formatted
vector You can override this if you wish to change the output formatting at
vector level.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#freq_count-instance_method" title="#freq_count (instance method)">#<strong>freq_count</strong>(_pin, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Do a frequency measure.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#handshake-instance_method" title="#handshake (instance method)">#<strong>handshake</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Handshake with the tester.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>  &#x21d2; Base </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a new J750 instance, normally there would only ever be one of these
assigned to the global variable such as $tester by your target:   $tester =
J750.new.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#local_subroutines-instance_method" title="#local_subroutines (instance method)">#<strong>local_subroutines</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an array of subroutines created by the current pattern.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#loop_vectors-instance_method" title="#loop_vectors (instance method)">#<strong>loop_vectors</strong>(name = nil, number_of_loops = 1, _global = false)  &#x21d2; Object </a>
    

    
      (also: #loop_vector)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Add a loop to the pattern.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#match-instance_method" title="#match (instance method)">#<strong>match</strong>(pin, state, timeout_in_cycles, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generates a match loop on up to two pins.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pattern_footer-instance_method" title="#pattern_footer (instance method)">#<strong>pattern_footer</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>An internal method called by Origen to generate the pattern footer.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pattern_header-instance_method" title="#pattern_header (instance method)">#<strong>pattern_header</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>An internal method called by Origen to create the pattern header.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#propagation_delay-instance_method" title="#propagation_delay (instance method)">#<strong>propagation_delay</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the number of cycles to wait for any fails to propagate through the
pipeline based on the current timeset.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#repeat_previous-instance_method" title="#repeat_previous (instance method)">#<strong>repeat_previous</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>All vectors generated with the supplied block will have all pins set to the
repeat previous state.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_subroutine-instance_method" title="#start_subroutine (instance method)">#<strong>start_subroutine</strong>(name)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Start a subroutine.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#store-instance_method" title="#store (instance method)">#<strong>store</strong>(*pins)  &#x21d2; Object </a>
    

    
      (also: #capture)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Capture the pin data from a vector to the tester.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#store_next_cycle-instance_method" title="#store_next_cycle (instance method)">#<strong>store_next_cycle</strong>(*pins)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Same as the store method, except that the capture will be applied to the
next vector to be generated.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../VectorBasedTester.html" title="OrigenTesters::VectorBasedTester (module)">VectorBasedTester</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../VectorBasedTester.html#register_tester-instance_method" title="OrigenTesters::VectorBasedTester#register_tester (method)">#register_tester</a></span></p>

  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../API.html" title="OrigenTesters::API (module)">API</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../API.html#annotate-instance_method" title="OrigenTesters::API#annotate (method)">#annotate</a></span>, <span class='object_link'><a href="../API.html#any_clocks_running%3F-instance_method" title="OrigenTesters::API#any_clocks_running? (method)">#any_clocks_running?</a></span>, <span class='object_link'><a href="../API.html#c1-instance_method" title="OrigenTesters::API#c1 (method)">#c1</a></span>, <span class='object_link'><a href="../API.html#c2-instance_method" title="OrigenTesters::API#c2 (method)">#c2</a></span>, <span class='object_link'><a href="../API.html#clocks_running-instance_method" title="OrigenTesters::API#clocks_running (method)">#clocks_running</a></span>, <span class='object_link'><a href="../API.html#comment_char-instance_method" title="OrigenTesters::API#comment_char (method)">#comment_char</a></span>, <span class='object_link'><a href="../API.html#cycle-instance_method" title="OrigenTesters::API#cycle (method)">#cycle</a></span>, <span class='object_link'><a href="../API.html#diff_friendly_output%3D-instance_method" title="OrigenTesters::API#diff_friendly_output= (method)">#diff_friendly_output=</a></span>, <span class='object_link'><a href="../API.html#diff_friendly_output%3F-instance_method" title="OrigenTesters::API#diff_friendly_output? (method)">#diff_friendly_output?</a></span>, <span class='object_link'><a href="../API.html#doc%3F-instance_method" title="OrigenTesters::API#doc? (method)">#doc?</a></span>, <span class='object_link'><a href="../API.html#generate%3F-instance_method" title="OrigenTesters::API#generate? (method)">#generate?</a></span>, <span class='object_link'><a href="../API.html#generating_pattern%3F-instance_method" title="OrigenTesters::API#generating_pattern? (method)">#generating_pattern?</a></span>, <span class='object_link'><a href="../API.html#generating_program%3F-instance_method" title="OrigenTesters::API#generating_program? (method)">#generating_program?</a></span>, <span class='object_link'><a href="../API.html#ignore_fails-instance_method" title="OrigenTesters::API#ignore_fails (method)">#ignore_fails</a></span>, <span class='object_link'><a href="../API.html#import_test_time-instance_method" title="OrigenTesters::API#import_test_time (method)">#import_test_time</a></span>, <span class='object_link'><a href="../API.html#inhibit_vectors_and_comments-instance_method" title="OrigenTesters::API#inhibit_vectors_and_comments (method)">#inhibit_vectors_and_comments</a></span>, <span class='object_link'><a href="../API.html#is_command_based%3F-instance_method" title="OrigenTesters::API#is_command_based? (method)">#is_command_based?</a></span>, <span class='object_link'><a href="../API.html#is_vector_based%3F-instance_method" title="OrigenTesters::API#is_vector_based? (method)">#is_vector_based?</a></span>, <span class='object_link'><a href="../API.html#j750%3F-instance_method" title="OrigenTesters::API#j750? (method)">#j750?</a></span>, <span class='object_link'><a href="../API.html#j750_hpt%3F-instance_method" title="OrigenTesters::API#j750_hpt? (method)">#j750_hpt?</a></span>, <span class='object_link'><a href="../API.html#link%3F-instance_method" title="OrigenTesters::API#link? (method)">#link?</a></span>, <span class='object_link'><a href="../API.html#name-instance_method" title="OrigenTesters::API#name (method)">#name</a></span>, <span class='object_link'><a href="../API.html#pat_extension-instance_method" title="OrigenTesters::API#pat_extension (method)">#pat_extension</a></span>, <span class='object_link'><a href="../API.html#pattern_section-instance_method" title="OrigenTesters::API#pattern_section (method)">#pattern_section</a></span>, <span class='object_link'><a href="../API.html#pins_need_toggling-instance_method" title="OrigenTesters::API#pins_need_toggling (method)">#pins_need_toggling</a></span>, <span class='object_link'><a href="../API.html#pop_running_clock-instance_method" title="OrigenTesters::API#pop_running_clock (method)">#pop_running_clock</a></span>, <span class='object_link'><a href="../API.html#program_comment_char-instance_method" title="OrigenTesters::API#program_comment_char (method)">#program_comment_char</a></span>, <span class='object_link'><a href="../API.html#push_running_clock-instance_method" title="OrigenTesters::API#push_running_clock (method)">#push_running_clock</a></span>, <span class='object_link'><a href="../API.html#slice_repeats-instance_method" title="OrigenTesters::API#slice_repeats (method)">#slice_repeats</a></span>, <span class='object_link'><a href="../API.html#snip-instance_method" title="OrigenTesters::API#snip (method)">#snip</a></span>, <span class='object_link'><a href="../API.html#ss-instance_method" title="OrigenTesters::API#ss (method)">#ss</a></span>, <span class='object_link'><a href="../API.html#step_comment_prefix-instance_method" title="OrigenTesters::API#step_comment_prefix (method)">#step_comment_prefix</a></span>, <span class='object_link'><a href="../API.html#ultraflex%3F-instance_method" title="OrigenTesters::API#ultraflex? (method)">#ultraflex?</a></span>, <span class='object_link'><a href="../API.html#update_running_clocks-instance_method" title="OrigenTesters::API#update_running_clocks (method)">#update_running_clocks</a></span>, <span class='object_link'><a href="../API.html#v93k%3F-instance_method" title="OrigenTesters::API#v93k? (method)">#v93k?</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Timing.html" title="OrigenTesters::Timing (module)">Timing</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Timing.html#called_timesets-instance_method" title="OrigenTesters::Timing#called_timesets (method)">#called_timesets</a></span>, <span class='object_link'><a href="../Timing.html#count-instance_method" title="OrigenTesters::Timing#count (method)">#count</a></span>, <span class='object_link'><a href="../Timing.html#current_period_in_ns-instance_method" title="OrigenTesters::Timing#current_period_in_ns (method)">#current_period_in_ns</a></span>, <span class='object_link'><a href="../Timing.html#current_timeset-instance_method" title="OrigenTesters::Timing#current_timeset (method)">#current_timeset</a></span>, <span class='object_link'><a href="../Timing.html#cycles_to_time-instance_method" title="OrigenTesters::Timing#cycles_to_time (method)">#cycles_to_time</a></span>, <span class='object_link'><a href="../Timing.html#delay-instance_method" title="OrigenTesters::Timing#delay (method)">#delay</a></span>, <span class='object_link'><a href="../Timing.html#max_repeat_loop-instance_method" title="OrigenTesters::Timing#max_repeat_loop (method)">#max_repeat_loop</a></span>, <span class='object_link'><a href="../Timing.html#min_period_timeset-instance_method" title="OrigenTesters::Timing#min_period_timeset (method)">#min_period_timeset</a></span>, <span class='object_link'><a href="../Timing.html#min_repeat_loop-instance_method" title="OrigenTesters::Timing#min_repeat_loop (method)">#min_repeat_loop</a></span>, <span class='object_link'><a href="../Timing.html#set_timeset-instance_method" title="OrigenTesters::Timing#set_timeset (method)">#set_timeset</a></span>, <span class='object_link'><a href="../Timing.html#timeset_changed-instance_method" title="OrigenTesters::Timing#timeset_changed (method)">#timeset_changed</a></span>, <span class='object_link'><a href="../Timing.html#wait-instance_method" title="OrigenTesters::Timing#wait (method)">#wait</a></span></p>

  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../VectorGenerator.html" title="OrigenTesters::VectorGenerator (module)">VectorGenerator</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../VectorGenerator.html#_render-instance_method" title="OrigenTesters::VectorGenerator#_render (method)">#_render</a></span>, <span class='object_link'><a href="../VectorGenerator.html#add_microcode_to_last_or_cycle-instance_method" title="OrigenTesters::VectorGenerator#add_microcode_to_last_or_cycle (method)">#add_microcode_to_last_or_cycle</a></span>, <span class='object_link'><a href="../VectorGenerator.html#align-instance_method" title="OrigenTesters::VectorGenerator#align (method)">#align</a></span>, <span class='object_link'><a href="../VectorGenerator.html#align_to_last-instance_method" title="OrigenTesters::VectorGenerator#align_to_last (method)">#align_to_last</a></span>, <span class='object_link'><a href="../VectorGenerator.html#before_write_pattern_line-instance_method" title="OrigenTesters::VectorGenerator#before_write_pattern_line (method)">#before_write_pattern_line</a></span>, <span class='object_link'><a href="../VectorGenerator.html#current_pin_vals-instance_method" title="OrigenTesters::VectorGenerator#current_pin_vals (method)">#current_pin_vals</a></span>, <span class='object_link'><a href="../VectorGenerator.html#cycle_count-instance_method" title="OrigenTesters::VectorGenerator#cycle_count (method)">#cycle_count</a></span>, <span class='object_link'><a href="../VectorGenerator.html#dec_vec_count-instance_method" title="OrigenTesters::VectorGenerator#dec_vec_count (method)">#dec_vec_count</a></span>, <span class='object_link'><a href="../VectorGenerator.html#dont_compress-instance_method" title="OrigenTesters::VectorGenerator#dont_compress (method)">#dont_compress</a></span>, <span class='object_link'><a href="../VectorGenerator.html#dont_compress%3D-instance_method" title="OrigenTesters::VectorGenerator#dont_compress= (method)">#dont_compress=</a></span>, <span class='object_link'><a href="../VectorGenerator.html#execution_time_in_ns-instance_method" title="OrigenTesters::VectorGenerator#execution_time_in_ns (method)">#execution_time_in_ns</a></span>, <span class='object_link'><a href="../VectorGenerator.html#expand_vector-instance_method" title="OrigenTesters::VectorGenerator#expand_vector (method)">#expand_vector</a></span>, <span class='object_link'><a href="../VectorGenerator.html#format-instance_method" title="OrigenTesters::VectorGenerator#format (method)">#format</a></span>, <span class='object_link'><a href="../VectorGenerator.html#format_pin_state-instance_method" title="OrigenTesters::VectorGenerator#format_pin_state (method)">#format_pin_state</a></span>, <span class='object_link'><a href="../VectorGenerator.html#get_pingroup-instance_method" title="OrigenTesters::VectorGenerator#get_pingroup (method)">#get_pingroup</a></span>, <span class='object_link'><a href="../VectorGenerator.html#inc_cycle_count-instance_method" title="OrigenTesters::VectorGenerator#inc_cycle_count (method)">#inc_cycle_count</a></span>, <span class='object_link'><a href="../VectorGenerator.html#inc_vec_count-instance_method" title="OrigenTesters::VectorGenerator#inc_vec_count (method)">#inc_vec_count</a></span>, <span class='object_link'><a href="../VectorGenerator.html#inhibit_pin-instance_method" title="OrigenTesters::VectorGenerator#inhibit_pin (method)">#inhibit_pin</a></span>, <span class='object_link'><a href="../VectorGenerator.html#inhibited_pins-instance_method" title="OrigenTesters::VectorGenerator#inhibited_pins (method)">#inhibited_pins</a></span>, <span class='object_link'><a href="../VectorGenerator.html#last_object-instance_method" title="OrigenTesters::VectorGenerator#last_object (method)">#last_object</a></span>, <span class='object_link'><a href="../VectorGenerator.html#last_vector-instance_method" title="OrigenTesters::VectorGenerator#last_vector (method)">#last_vector</a></span>, <span class='object_link'><a href="../VectorGenerator.html#microcode-instance_method" title="OrigenTesters::VectorGenerator#microcode (method)">#microcode</a></span>, <span class='object_link'><a href="../VectorGenerator.html#ordered_pins-instance_method" title="OrigenTesters::VectorGenerator#ordered_pins (method)">#ordered_pins</a></span>, <span class='object_link'><a href="../VectorGenerator.html#ordered_pins_cache-instance_method" title="OrigenTesters::VectorGenerator#ordered_pins_cache (method)">#ordered_pins_cache</a></span>, <span class='object_link'><a href="../VectorGenerator.html#pingroup_map-instance_method" title="OrigenTesters::VectorGenerator#pingroup_map (method)">#pingroup_map</a></span>, <span class='object_link'><a href="../VectorGenerator.html#pipeline-instance_method" title="OrigenTesters::VectorGenerator#pipeline (method)">#pipeline</a></span>, <span class='object_link'><a href="../VectorGenerator.html#preset_next_vector-instance_method" title="OrigenTesters::VectorGenerator#preset_next_vector (method)">#preset_next_vector</a></span>, <span class='object_link'><a href="../VectorGenerator.html#push_comment-instance_method" title="OrigenTesters::VectorGenerator#push_comment (method)">#push_comment</a></span>, <span class='object_link'><a href="../VectorGenerator.html#push_vector-instance_method" title="OrigenTesters::VectorGenerator#push_vector (method)">#push_vector</a></span>, <span class='object_link'><a href="../VectorGenerator.html#regex_for_pin-instance_method" title="OrigenTesters::VectorGenerator#regex_for_pin (method)">#regex_for_pin</a></span>, <span class='object_link'><a href="../VectorGenerator.html#regex_for_pin_sub-instance_method" title="OrigenTesters::VectorGenerator#regex_for_pin_sub (method)">#regex_for_pin_sub</a></span>, <span class='object_link'><a href="../VectorGenerator.html#remove_store_from_vector-instance_method" title="OrigenTesters::VectorGenerator#remove_store_from_vector (method)">#remove_store_from_vector</a></span>, <span class='object_link'><a href="../VectorGenerator.html#render-instance_method" title="OrigenTesters::VectorGenerator#render (method)">#render</a></span>, <span class='object_link'><a href="../VectorGenerator.html#render_body-instance_method" title="OrigenTesters::VectorGenerator#render_body (method)">#render_body</a></span>, <span class='object_link'><a href="../VectorGenerator.html#render_footer-instance_method" title="OrigenTesters::VectorGenerator#render_footer (method)">#render_footer</a></span>, <span class='object_link'><a href="../VectorGenerator.html#render_header-instance_method" title="OrigenTesters::VectorGenerator#render_header (method)">#render_header</a></span>, <span class='object_link'><a href="../VectorGenerator.html#render_template-instance_method" title="OrigenTesters::VectorGenerator#render_template (method)">#render_template</a></span>, <span class='object_link'><a href="../VectorGenerator.html#reset_cycle_count-instance_method" title="OrigenTesters::VectorGenerator#reset_cycle_count (method)">#reset_cycle_count</a></span>, <span class='object_link'><a href="../VectorGenerator.html#stage-instance_method" title="OrigenTesters::VectorGenerator#stage (method)">#stage</a></span>, <span class='object_link'><a href="../VectorGenerator.html#track_and_format_vector-instance_method" title="OrigenTesters::VectorGenerator#track_and_format_vector (method)">#track_and_format_vector</a></span>, <span class='object_link'><a href="../VectorGenerator.html#update_pin_from_formatted_state-instance_method" title="OrigenTesters::VectorGenerator#update_pin_from_formatted_state (method)">#update_pin_from_formatted_state</a></span>, <span class='object_link'><a href="../VectorGenerator.html#update_vector-instance_method" title="OrigenTesters::VectorGenerator#update_vector (method)">#update_vector</a></span>, <span class='object_link'><a href="../VectorGenerator.html#update_vector_pin_val-instance_method" title="OrigenTesters::VectorGenerator#update_vector_pin_val (method)">#update_vector_pin_val</a></span>, <span class='object_link'><a href="../VectorGenerator.html#vec_count-instance_method" title="OrigenTesters::VectorGenerator#vec_count (method)">#vec_count</a></span>, <span class='object_link'><a href="../VectorGenerator.html#vector_group_size-instance_method" title="OrigenTesters::VectorGenerator#vector_group_size (method)">#vector_group_size</a></span>, <span class='object_link'><a href="../VectorGenerator.html#vector_group_size%3D-instance_method" title="OrigenTesters::VectorGenerator#vector_group_size= (method)">#vector_group_size=</a></span>, <span class='object_link'><a href="../VectorGenerator.html#with_vector_group_size-instance_method" title="OrigenTesters::VectorGenerator#with_vector_group_size (method)">#with_vector_group_size</a></span></p>

  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="OrigenTesters::SmartestBasedTester::Base (class)">Base</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new J750 instance, normally there would only ever be one of these
assigned to the global variable such as $tester by your target:</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$tester</span> <span class='op'>=</span> <span class='const'>J750</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11
12
13
14
15
16
17
18
19</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
  <span class='ivar'>@max_repeat_loop</span> <span class='op'>=</span> <span class='int'>65_535</span>
  <span class='ivar'>@min_repeat_loop</span> <span class='op'>=</span> <span class='int'>17</span>
  <span class='ivar'>@pat_extension</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>avc</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@compress</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='comment'># @support_repeat_previous = true
</span>  <span class='ivar'>@match_entries</span> <span class='op'>=</span> <span class='int'>10</span>
  <span class='ivar'>@name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>v93k</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@comment_char</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@level_period</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="before_timeset_change-instance_method">
  
    #<strong>before_timeset_change</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


428
429
430</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 428</span>

<span class='kw'>def</span> <span class='id identifier rubyid_before_timeset_change'>before_timeset_change</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_microcode'>microcode</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SQPG CTIM </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:new</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_level_period?'>level_period?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="call_subroutine-instance_method">
  
    #<strong>call_subroutine</strong>(name, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Call a subroutine.</p>

<p>This calls a subroutine immediately following previous vector, it does not
generate a new vector.</p>

<p>Subroutines should always be called through this method as it ensures a
running log of called subroutines is maintained and which then gets output
in the pattern header to import the right dependencies.</p>

<p>An offset option is available to make the call on earlier vectors.</p>

<p>Repeated calls to the same subroutine will automatically be compressed
unless option :suppress_repeated_calls is supplied and set to false. This
means that for the common use case of calling a subroutine to implement an
overlay the subroutine can be called for every bit that has the overlay and
the pattern will automatically generate correctly.</p>

<h4 id="label-Examples">Examples</h4>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_call_subroutine'>call_subroutine</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mysub</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_call_subroutine'>call_subroutine</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_other_sub</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:offset</span> <span class='op'>=&gt;</span> <span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146
147
148
149
150
151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_call_subroutine'>call_subroutine</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>offset:</span>                  <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>suppress_repeated_calls:</span> <span class='kw'>true</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_called_subroutines'>called_subroutines</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span> <span class='kw'>unless</span> <span class='id identifier rubyid_called_subroutines'>called_subroutines</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='ivar'>@inhibit_vectors</span>

  <span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SQPG JSUB </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:suppress_repeated_calls</span><span class='rbracket'>]</span> <span class='op'>||</span>
     <span class='id identifier rubyid_last_object'>last_object</span> <span class='op'>!=</span> <span class='id identifier rubyid_code'>code</span>
    <span class='id identifier rubyid_microcode'>microcode</span> <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='label'>offset:</span> <span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="called_subroutines-instance_method">
  
    #<strong>called_subroutines</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an array of subroutines called while generating the current pattern</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


369
370
371</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 369</span>

<span class='kw'>def</span> <span class='id identifier rubyid_called_subroutines'>called_subroutines</span>
  <span class='ivar'>@called_subroutines</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="end_subroutine-instance_method">
  
    #<strong>end_subroutine</strong>(_cond = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Ends the current subroutine that was started with a previous call to
start_subroutine</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 117</span>

<span class='kw'>def</span> <span class='id identifier rubyid_end_subroutine'>end_subroutine</span><span class='lparen'>(</span><span class='id identifier rubyid__cond'>_cond</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='const'>Pattern</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span> <span class='label'>call_shutdown_callbacks:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>subroutine:</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="format_vector-instance_method">
  
    #<strong>format_vector</strong>(vec)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This is an internal method use by Origen which returns a fully formatted
vector You can override this if you wish to change the output formatting at
vector level</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 380</span>

<span class='kw'>def</span> <span class='id identifier rubyid_format_vector'>format_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_vec'>vec</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_timeset'>timeset</span> <span class='op'>=</span> <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_timeset'>timeset</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_timeset'>timeset</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_pin_vals'>pin_vals</span> <span class='op'>=</span> <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_pin_vals'>pin_vals</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_pin_vals'>pin_vals</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_repeat'>repeat</span> <span class='comment'># &gt; 1
</span>    <span class='id identifier rubyid_microcode'>microcode</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>R</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_repeat'>repeat</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_microcode'>microcode</span> <span class='op'>=</span> <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_microcode'>microcode</span> <span class='op'>?</span> <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_microcode'>microcode</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_header_comments'>header_comments</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_comments'>comments</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_comment'>comment</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_comment'>comment</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_comment'>comment</span> <span class='op'>=</span> <span class='id identifier rubyid_comment'>comment</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'># </span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_comment'>comment</span> <span class='op'>=</span> <span class='id identifier rubyid_comment'>comment</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>#</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_comment'>comment</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_header_comments'>header_comments</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_comment'>comment</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\cm</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_pin_vals'>pin_vals</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='gvar'>$_testers_enable_vector_comments</span> <span class='op'>||</span> <span class='id identifier rubyid_vector_comments'>vector_comments</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_comment'>comment</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_header_comments'>header_comments</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_number'>number</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_cycle'>cycle</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_inline_comment'>inline_comment</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_inline'>inline</span> <span class='op'>=</span> <span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_inline_comment'>inline_comment</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> # </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vec'>vec</span><span class='period'>.</span><span class='id identifier rubyid_inline_comment'>inline_comment</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_comment'>comment</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_header_comments'>header_comments</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_inline'>inline</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_mode'>mode</span><span class='period'>.</span><span class='id identifier rubyid_simulation?'>simulation?</span> <span class='op'>||</span> <span class='gvar'>$_testers_no_inline_comments</span>
    <span class='id identifier rubyid_comment'>comment</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_microcode'>microcode</span><span class='period'>.</span><span class='id identifier rubyid_ljust'>ljust</span><span class='lparen'>(</span><span class='int'>25</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_timeset'>timeset</span><span class='period'>.</span><span class='id identifier rubyid_ljust'>ljust</span><span class='lparen'>(</span><span class='int'>27</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pin_vals'>pin_vals</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_comment'>comment</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="freq_count-instance_method">
  
    #<strong>freq_count</strong>(_pin, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Do a frequency measure.</p>

<h4 id="label-Examples">Examples</h4>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_freq_count'>freq_count</span><span class='lparen'>(</span><span class='gvar'>$top</span><span class='period'>.</span><span class='id identifier rubyid_pin'>pin</span><span class='lparen'>(</span><span class='symbol'>:d_out</span><span class='rparen'>)</span><span class='rparen'>)</span>                 <span class='comment'># Freq measure on pin &quot;d_out&quot;</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


169
170
171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 169</span>

<span class='kw'>def</span> <span class='id identifier rubyid_freq_count'>freq_count</span><span class='lparen'>(</span><span class='id identifier rubyid__pin'>_pin</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='const'>Pattern</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="handshake-instance_method">
  
    #<strong>handshake</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Handshake with the tester.</p>

<h4 id="label-Examples">Examples</h4>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_handshake'>handshake</span>                   <span class='comment'># Pass control to the tester for a measurement</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


159
160
161
162
163</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 159</span>

<span class='kw'>def</span> <span class='id identifier rubyid_handshake'>handshake</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='const'>Pattern</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="local_subroutines-instance_method">
  
    #<strong>local_subroutines</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an array of subroutines created by the current pattern</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


374
375
376</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 374</span>

<span class='kw'>def</span> <span class='id identifier rubyid_local_subroutines'>local_subroutines</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@local_subroutines</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="loop_vectors-instance_method">
  
    #<strong>loop_vectors</strong>(name = nil, number_of_loops = 1, _global = false)  &#x21d2; <tt>Object</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='loop_vector-instance_method'>loop_vector</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Add a loop to the pattern.</p>

<p>Pass in the number of times to execute it, all vectors generated by the
given block will be captured in the loop.</p>

<h4 id="label-Examples">Examples</h4>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_loop_vectors'>loop_vectors</span> <span class='int'>3</span> <span class='kw'>do</span>   <span class='comment'># Do this 3 times...
</span>    <span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_cycle'>cycle</span>
    <span class='id identifier rubyid_some_other_method_to_generate_vectors'>some_other_method_to_generate_vectors</span>
<span class='kw'>end</span></code></pre>

<p>For compatibility with the J750 you can supply a name as the first argument
and that will simply be ignored when generated for the V93K tester…</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_loop_vectors'>loop_vectors</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_loop</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>3</span> <span class='kw'>do</span>   <span class='comment'># Do this 3 times...
</span>    <span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_cycle'>cycle</span>
    <span class='id identifier rubyid_some_other_method_to_generate_vectors'>some_other_method_to_generate_vectors</span>
<span class='kw'>end</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


317
318
319
320
321
322
323
324
325
326
327
328
329</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 317</span>

<span class='kw'>def</span> <span class='id identifier rubyid_loop_vectors'>loop_vectors</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_number_of_loops'>number_of_loops</span> <span class='op'>=</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid__global'>_global</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='comment'># The name argument is present to maych J750 API, sort out the
</span>  <span class='kw'>unless</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_number_of_loops'>number_of_loops</span><span class='comma'>,</span> <span class='id identifier rubyid_global'>global</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_number_of_loops'>number_of_loops</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_number_of_loops'>number_of_loops</span> <span class='op'>&gt;</span> <span class='int'>1</span>
    <span class='id identifier rubyid_microcode'>microcode</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SQPG LBGN </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_number_of_loops'>number_of_loops</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>yield</span>
    <span class='id identifier rubyid_microcode'>microcode</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SQPG LEND;</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='kw'>yield</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="match-instance_method">
  
    #<strong>match</strong>(pin, state, timeout_in_cycles, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Generates a match loop on up to two pins.</p>

<p>This method is not really intended to be called directly, rather you should
call via Tester#wait e.g. $tester.wait(:match =&gt; true).</p>

<p>The timeout should be provided in cycles, however when called via the wait
method the time-based helpers (time_in_us, etc) will be converted to cycles
for you. The following options are available to tailor the match loop
behavior, defaults in parenthesis:</p>
<ul><li>
<p>:pin - The pin object to match on (<strong>required</strong>)</p>
</li><li>
<p>:state - The pin state to match on, :low or :high
(<strong>required</strong>)</p>
</li><li>
<p>:check_for_fails (false) - Flushes the pipeline and checks for fails prior
to the match (to allow binout of fails encountered before the match)</p>
</li><li>
<p>:pin2 (nil) - Optionally supply a second pin to match on</p>
</li><li>
<p>:state2 (nil) - State for the second pin (required if :pin2 is supplied)</p>
</li><li>
<p>:force_fail_on_timeout (true) - Force a vector mis-compare if the match
loop times out</p>
</li></ul>

<h4 id="label-Examples">Examples</h4>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span><span class='lparen'>(</span><span class='symbol'>:match</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:time_in_us</span> <span class='op'>=&gt;</span> <span class='int'>5000</span><span class='comma'>,</span> <span class='symbol'>:pin</span> <span class='op'>=&gt;</span> <span class='gvar'>$top</span><span class='period'>.</span><span class='id identifier rubyid_pin'>pin</span><span class='lparen'>(</span><span class='symbol'>:done</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='symbol'>:state</span> <span class='op'>=&gt;</span> <span class='symbol'>:high</span><span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 194</span>

<span class='kw'>def</span> <span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='id identifier rubyid_pin'>pin</span><span class='comma'>,</span> <span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_timeout_in_cycles'>timeout_in_cycles</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>check_for_fails:</span>       <span class='kw'>false</span><span class='comma'>,</span>
    <span class='label'>pin2:</span>                  <span class='kw'>false</span><span class='comma'>,</span>
    <span class='label'>state2:</span>                <span class='kw'>false</span><span class='comma'>,</span>
    <span class='label'>global_loops:</span>          <span class='kw'>false</span><span class='comma'>,</span>
    <span class='label'>generate_subroutine:</span>   <span class='kw'>false</span><span class='comma'>,</span>
    <span class='label'>force_fail_on_timeout:</span> <span class='kw'>true</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='comment'># Ensure the match pins are don&#39;t care by default
</span>  <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_dont_care'>dont_care</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_dont_care'>dont_care</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin2</span><span class='rbracket'>]</span>

  <span class='comment'># Single condition loops are simple
</span>  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin2</span><span class='rbracket'>]</span>
    <span class='comment'># Use the counted match loop (rather than timed) which is recommended in the V93K docs for new applications
</span>    <span class='comment'># No pre-match failure handling is required here because the system will cleanly record failure info
</span>    <span class='comment'># for this kind of match loop
</span>    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>for the </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'> pin to go </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='comment'># Need to ensure at least 8 cycles with no compares before entering
</span>    <span class='int'>8</span><span class='period'>.</span><span class='id identifier rubyid_cycles'>cycles</span>
    <span class='id identifier rubyid_number_of_loops'>number_of_loops</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_timeout_in_cycles'>timeout_in_cycles</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='int'>72</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_ceil'>ceil</span>
    <span class='comment'># This seems to be a limit on the max MACT value, so account for longer times by expanding
</span>    <span class='comment'># the wait loop
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_number_of_loops'>number_of_loops</span> <span class='op'>&gt;</span> <span class='int'>262_144</span>
      <span class='id identifier rubyid_mrpt'>mrpt</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_timeout_in_cycles'>timeout_in_cycles</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='int'>262_144</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='int'>8</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_ceil'>ceil</span>
      <span class='id identifier rubyid_mrpt'>mrpt</span> <span class='op'>=</span> <span class='const'>Math</span><span class='period'>.</span><span class='id identifier rubyid_sqrt'>sqrt</span><span class='lparen'>(</span><span class='id identifier rubyid_mrpt'>mrpt</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_ceil'>ceil</span>
      <span class='id identifier rubyid_mrpt'>mrpt</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='int'>8</span> <span class='op'>-</span> <span class='lparen'>(</span><span class='id identifier rubyid_mrpt'>mrpt</span> <span class='op'>%</span> <span class='int'>8</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='comment'># Keep to a multiple of 8, but round up to be safe
</span>      <span class='id identifier rubyid_number_of_loops'>number_of_loops</span> <span class='op'>=</span> <span class='int'>262_144</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_mrpt'>mrpt</span> <span class='op'>=</span> <span class='int'>8</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_microcode'>microcode</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SQPG MACT </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_number_of_loops'>number_of_loops</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
    <span class='comment'># Strobe the pin for the required state
</span>    <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='symbol'>:low</span> <span class='op'>?</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_expect_lo'>expect_lo</span> <span class='op'>:</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_expect_hi'>expect_hi</span>
    <span class='comment'># Always do 8 vectors here as this allows reconstruction of test results if multiple loops
</span>    <span class='comment'># are called in a pattern
</span>    <span class='int'>8</span><span class='period'>.</span><span class='id identifier rubyid_cycles'>cycles</span>
    <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_dont_care'>dont_care</span>
    <span class='comment'># Now do the wait loop, mrpt should always be a multiple of 8
</span>    <span class='id identifier rubyid_microcode'>microcode</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SQPG MRPT </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mrpt'>mrpt</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_mrpt'>mrpt</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_cycle'>cycle</span><span class='lparen'>(</span><span class='label'>dont_compress:</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_microcode'>microcode</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SQPG PADDING;</span><span class='tstring_end'>&#39;</span></span>
    <span class='int'>8</span><span class='period'>.</span><span class='id identifier rubyid_cycles'>cycles</span>

  <span class='kw'>else</span>

    <span class='comment'># For two pins do something more like the J750 approach where branching based on miscompares is used
</span>    <span class='comment'># to keep the loop going
</span>    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>for the </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'> pin to go </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>or the </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'> pin to go </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:state2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:check_for_fails</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Return preserving existing errors if the pattern has already failed before arriving here</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_cycle'>cycle</span><span class='lparen'>(</span><span class='label'>repeat:</span> <span class='id identifier rubyid_propagation_delay'>propagation_delay</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_microcode'>microcode</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SQPG RETC 1 1;</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_number_of_loops'>number_of_loops</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_timeout_in_cycles'>timeout_in_cycles</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_propagation_delay'>propagation_delay</span> <span class='op'>*</span> <span class='int'>2</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='int'>2</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_ceil'>ceil</span>

    <span class='id identifier rubyid_loop_vectors'>loop_vectors</span> <span class='id identifier rubyid_number_of_loops'>number_of_loops</span> <span class='kw'>do</span>
      <span class='comment'># Check pin 1
</span>      <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Check if </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'> is </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'> yet</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='symbol'>:low</span> <span class='op'>?</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_expect_lo!'>expect_lo!</span> <span class='op'>:</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_expect_hi!'>expect_hi!</span>
      <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_dont_care'>dont_care</span>
      <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Wait for failure to propagate</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_cycle'>cycle</span><span class='lparen'>(</span><span class='label'>repeat:</span> <span class='id identifier rubyid_propagation_delay'>propagation_delay</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Exit match loop if pin has matched (no error), otherwise clear error and remain in loop</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_microcode'>microcode</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SQPG RETC 0 0;</span><span class='tstring_end'>&#39;</span></span>

      <span class='comment'># Check pin 2
</span>      <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Check if </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'> is </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:state2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'> yet</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:state2</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:low</span> <span class='op'>?</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_expect_lo!'>expect_lo!</span> <span class='op'>:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_expect_hi!'>expect_hi!</span>
      <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_dont_care'>dont_care</span>
      <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Wait for failure to propagate</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_cycle'>cycle</span><span class='lparen'>(</span><span class='label'>repeat:</span> <span class='id identifier rubyid_propagation_delay'>propagation_delay</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Exit match loop if pin has matched (no error), otherwise clear error and remain in loop</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_microcode'>microcode</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SQPG RETC 0 0;</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force_fail_on_timeout</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_cc'>cc</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>To get here something has gone wrong, strobe again to force a pattern failure</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='symbol'>:low</span> <span class='op'>?</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_expect_lo'>expect_lo</span> <span class='op'>:</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_expect_hi'>expect_hi</span>
      <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:state2</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:low</span> <span class='op'>?</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_expect_lo'>expect_lo</span> <span class='op'>:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_expect_hi'>expect_hi</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin2</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_cycle'>cycle</span>
      <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_dont_care'>dont_care</span>
      <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_dont_care'>dont_care</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin2</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pattern_footer-instance_method">
  
    #<strong>pattern_footer</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>An internal method called by Origen to generate the pattern footer</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


364
365
366</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 364</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pattern_footer'>pattern_footer</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_microcode'>microcode</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SQPG STOP;</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:subroutine</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pattern_header-instance_method">
  
    #<strong>pattern_header</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>An internal method called by Origen to create the pattern header</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 333</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pattern_header'>pattern_header</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pin_list'>pin_list</span> <span class='op'>=</span> <span class='id identifier rubyid_ordered_pins'>ordered_pins</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_app'>app</span><span class='period'>.</span><span class='id identifier rubyid_pin_pattern_order'>pin_pattern_order</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
      <span class='comment'># specified name overrides pin name
</span>      <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Origen</span><span class='op'>::</span><span class='const'>Pins</span><span class='op'>::</span><span class='const'>PinCollection</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>!=</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
        <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='comment'># groups or aliases can be lower case
</span>      <span class='kw'>else</span>
        <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span> <span class='comment'># pins must be uppercase
</span>      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Origen</span><span class='op'>::</span><span class='const'>Pins</span><span class='op'>::</span><span class='const'>PinCollection</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>!=</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
        <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='comment'># groups or aliases can be lower case
</span>      <span class='kw'>else</span>
        <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span> <span class='comment'># pins must be uppercase
</span>      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_microcode'>microcode</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FORMAT </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pin_list'>pin_list</span><span class='embexpr_end'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_ordered_pins'>ordered_pins</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id identifier rubyid_max_pin_name_length'>max_pin_name_length</span> <span class='op'>=</span> <span class='id identifier rubyid_ordered_pins'>ordered_pins</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
    <span class='id identifier rubyid_pin_widths'>pin_widths</span> <span class='op'>=</span> <span class='id identifier rubyid_ordered_pins'>ordered_pins</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span> <span class='rbrace'>}</span>

    <span class='id identifier rubyid_max_pin_name_length'>max_pin_name_length</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
      <span class='id identifier rubyid_cc'>cc</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span> <span class='op'>*</span> <span class='int'>50</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id identifier rubyid_ordered_pins'>ordered_pins</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span> <span class='op'>*</span> <span class='id identifier rubyid_pin_widths'>pin_widths</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="propagation_delay-instance_method">
  
    #<strong>propagation_delay</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the number of cycles to wait for any fails to propagate through the
pipeline based on the current timeset</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


289
290
291
292
293
294
295
296
297</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 289</span>

<span class='kw'>def</span> <span class='id identifier rubyid_propagation_delay'>propagation_delay</span>
  <span class='comment'># From &#39;Calculating the buffer cycles for JMPE and RETC (and match loops)&#39; in SmarTest docs
</span>  <span class='id identifier rubyid_data_queue_buffer'>data_queue_buffer</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>105</span><span class='comma'>,</span> <span class='int'>64</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='int'>125</span> <span class='op'>+</span> <span class='id identifier rubyid_current_period_in_ns'>current_period_in_ns</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_current_period_in_ns'>current_period_in_ns</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_ceil'>ceil</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span> <span class='op'>+</span> <span class='int'>3</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='int'>8</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='int'>72</span>
  <span class='comment'># Don&#39;t know how to calculate at runtime, hardcoding these to some default values for now
</span>  <span class='id identifier rubyid_number_of_sites'>number_of_sites</span> <span class='op'>=</span> <span class='int'>128</span>
  <span class='id identifier rubyid_sclk_period'>sclk_period</span> <span class='op'>=</span> <span class='int'>40</span>
  <span class='id identifier rubyid_prop_delay_buffer'>prop_delay_buffer</span> <span class='op'>=</span> <span class='int'>195</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='int'>2</span> <span class='op'>*</span> <span class='id identifier rubyid_number_of_sites'>number_of_sites</span> <span class='op'>+</span> <span class='int'>3</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='lparen'>(</span><span class='id identifier rubyid_sclk_period'>sclk_period</span> <span class='op'>/</span> <span class='int'>2</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_data_queue_buffer'>data_queue_buffer</span> <span class='op'>+</span> <span class='id identifier rubyid_prop_delay_buffer'>prop_delay_buffer</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="repeat_previous-instance_method">
  
    #<strong>repeat_previous</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>All vectors generated with the supplied block will have all pins set to the
repeat previous state. Any pins that are changed state within the block
will still update to the supplied value.</p>

<h4 id="label-Example">Example</h4>

<pre class="code ruby"><code class="ruby"><span class='comment'># All pins except invoke will be assigned the repeat previous code
</span><span class='comment'># in the generated vector. On completion of the block they will
</span><span class='comment'># return to their previous state, except for invoke which will
</span><span class='comment'># retain the value assigned within the block.
</span><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_repeat_previous'>repeat_previous</span> <span class='kw'>do</span>
    <span class='gvar'>$top</span><span class='period'>.</span><span class='id identifier rubyid_pin'>pin</span><span class='lparen'>(</span><span class='symbol'>:invoke</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_drive'>drive</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_cycle'>cycle</span>
<span class='kw'>end</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


422
423
424
425
426</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 422</span>

<span class='kw'>def</span> <span class='id identifier rubyid_repeat_previous'>repeat_previous</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_app'>app</span><span class='period'>.</span><span class='id identifier rubyid_pin_map'>pin_map</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__id'>_id</span><span class='comma'>,</span> <span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_repeat_previous'>repeat_previous</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='rbrace'>}</span>
  <span class='kw'>yield</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_app'>app</span><span class='period'>.</span><span class='id identifier rubyid_pin_map'>pin_map</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__id'>_id</span><span class='comma'>,</span> <span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_repeat_previous'>repeat_previous</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start_subroutine-instance_method">
  
    #<strong>start_subroutine</strong>(name)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Start a subroutine.</p>

<p>Generates a global subroutine label. Global is used to adhere to the best
practice of containing all subroutines in dedicated patterns, e.g.
global_subs.atp</p>

<h4 id="label-Examples">Examples</h4>

<pre class="code ruby"><code class="ruby">$tester.start_subroutine(&quot;wait_for_done&quot;)
&lt; generate your subroutine vectors here &gt;
$tester.end_subroutine</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


110
111
112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 110</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start_subroutine'>start_subroutine</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_local_subroutines'>local_subroutines</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span> <span class='kw'>unless</span> <span class='id identifier rubyid_local_subroutines'>local_subroutines</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='ivar'>@inhibit_vectors</span>
  <span class='comment'># name += &quot;_subr&quot; unless name =~ /sub/
</span>  <span class='const'>Pattern</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>call_startup_callbacks:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>subroutine:</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="store-instance_method">
  
    #<strong>store</strong>(*pins)  &#x21d2; <tt>Object</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='capture-instance_method'>capture</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Capture the pin data from a vector to the tester.</p>

<p>This method uses the Digital Capture feature (Selective mode) of the V93000
to capture the data from the given pins on the previous vector. Note that
is does not actually generate a new vector.</p>

<p>Note also that any drive cycles on the target pins can also be captured, to
avoid this the wavetable should be set up like this to infer a &#39;D&#39;
(Don&#39;t Capture) on vectors where the target pin is being used to drive
data:</p>

<pre class="code ruby"><code class="ruby">PINS nvm_fail
0  d1:0  r1:D  0
1  d1:1  r1:D  1
2  r1:C  Capt
3  r1:D  NoCapt</code></pre>

<p>Sometimes when generating vectors within a loop you may want to apply a
capture retrospectively to a previous vector, passing in an offset option
will allow you to do this.</p>

<h4 id="label-Examples">Examples</h4>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_cycle'>cycle</span>                     <span class='comment'># This is the vector you want to capture
</span><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span> <span class='symbol'>:pin</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_pin'>pin</span><span class='lparen'>(</span><span class='symbol'>:fail</span><span class='rparen'>)</span>  <span class='comment'># This applys the required opcode to the given pins
</span>
<span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_cycle'>cycle</span>                     <span class='comment'># This one gets captured
</span><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_cycle'>cycle</span>
<span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_cycle'>cycle</span>
<span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span><span class='lparen'>(</span><span class='symbol'>:pin</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_pin'>pin</span><span class='lparen'>(</span><span class='symbol'>:fail</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='symbol'>:offset</span> <span class='op'>=&gt;</span> <span class='op'>-</span><span class='int'>2</span><span class='rparen'>)</span> <span class='comment'># Just realized I need to capture that earlier vector
</span>
<span class='comment'># Capturing multiple pins:
</span><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_cycle'>cycle</span>
<span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span> <span class='symbol'>:pins</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_pin'>pin</span><span class='lparen'>(</span><span class='symbol'>:fail</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_pin'>pin</span><span class='lparen'>(</span><span class='symbol'>:done</span><span class='rparen'>)</span><span class='rbracket'>]</span>
</code></pre>

<p>Since the V93K store operates on a pin level (rather than vector level as
on the J750) equivalent functionality can also be achieved by setting the
store attribute of the pin itself prior to calling $tester.cycle. However
it is recommended to use the tester API to do the store if
cross-compatiblity with other platforms, such as the J750, is required.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 59</span>

<span class='kw'>def</span> <span class='id identifier rubyid_store'>store</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_pins'>pins</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>offset:</span> <span class='int'>0</span>
            <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pins'>pins</span> <span class='op'>=</span> <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>For the V93K you must supply the pins to store/capture</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span>
    <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_restore_state'>restore_state</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_capture'>capture</span>
      <span class='id identifier rubyid_update_vector_pin_val'>update_vector_pin_val</span> <span class='id identifier rubyid_pin'>pin</span><span class='comma'>,</span> <span class='label'>offset:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_last_vector'>last_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_dont_compress'>dont_compress</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='id identifier rubyid_last_vector'>last_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_contains_capture'>contains_capture</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="store_next_cycle-instance_method">
  
    #<strong>store_next_cycle</strong>(*pins)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Same as the store method, except that the capture will be applied to the
next vector to be generated.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_store_next_cycle'>store_next_cycle</span>
<span class='gvar'>$tester</span><span class='period'>.</span><span class='id identifier rubyid_cycle'>cycle</span>                <span class='comment'># This is the vector that will be captured</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_testers/smartest_based_tester/base.rb', line 84</span>

<span class='kw'>def</span> <span class='id identifier rubyid_store_next_cycle'>store_next_cycle</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_pins'>pins</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pins'>pins</span> <span class='op'>=</span> <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>For the V93K you must supply the pins to store/capture</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span><span class='semicolon'>;</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_capture'>capture</span> <span class='rbrace'>}</span>
  <span class='comment'># Register this clean up function to be run after the next vector
</span>  <span class='comment'># is generated, cool or what!
</span>  <span class='id identifier rubyid_preset_next_vector'>preset_next_vector</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_vector'>vector</span><span class='op'>|</span>
    <span class='id identifier rubyid_vector'>vector</span><span class='period'>.</span><span class='id identifier rubyid_contains_capture'>contains_capture</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_pins'>pins</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:restore</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Oct  6 07:59:40 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.1.5).
</div>

    </div>
  </body>
</html>