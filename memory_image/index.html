<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta property="og:locale" content="en_US">
    <meta name="content-language" content="en_US">

    
    <title>Origen Memory Image</title>
    <meta property="og:title" content="Origen Memory Image">
    <meta name="twitter:title" content="Origen Memory Image">
    <meta itemprop="name" content="Origen Memory Image">
      
  
  
  
  
    <meta property="og:image" content="http://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:image" content="http://origen-sdk.org/favicon-260x260.png">
    <meta itemprop="image" content="http://origen-sdk.org/favicon-260x260.png">
    <meta name="twitter:card" content="summary">
  
  
  

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://origen-sdk.org/css/bootstrap_custom.css"></script>
    <!-- Load this up top to allow pages to execute JQuery snippets -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
        ga('create', 'UA-64455560-1', 'auto');
        ga('send', 'pageview');
      </script>
    

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="http://origen-sdk.org/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="http://origen-sdk.org/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="http://origen-sdk.org/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="http://origen-sdk.org/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="http://origen-sdk.org/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="http://origen-sdk.org/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="http://origen-sdk.org/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="http://origen-sdk.org/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="http://origen-sdk.org/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="http://origen-sdk.org/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://origen-sdk.org/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="http://origen-sdk.org/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="http://origen-sdk.org/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="http://origen-sdk.org/manifest.json">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
  </head>

  <body>
    
      <div class="container">
        <nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/memory_image/">Home</a>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li class=""><a href="/memory_image/api/">API</a></li>
        <li class=""><a href="/memory_image/coverage">Coverage</a></li>
        <li class=""><a href="/memory_image/release_notes">Release Notes</a></li>
        <li><a href="https://github.com/Origen-SDK/origen_memory_image">Github</a></li>
      </ul>
<a href="http://origen-sdk.org" class=" pull-right">
  <img src="http://origen-sdk.org/img/origen-device.png" style="height:30px; margin-top: 10px;">
  <img src="http://origen-sdk.org/img/origen-text.png" style="height:15px; margin-top: 10px; margin-left: 5px;">
</a>

    </div>
<!--/.nav-collapse -->
  </div>
</nav>

<div class="row">
  <div class="span12">

    <h1>Origen Memory Image <span style="font-size: 14px">(0.6.0)</span>
</h1>

    <div>    
  <a class="anchor" name="Purpose"></a>          
  <h3><a href="#Purpose">Purpose</a></h3>          
</div>

    <p>This plugin provides a common API for easily reading memory image files in any format
so that their contained data can then be used in Origen:</p>

    <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span style="color:#777"># Read in an s-record</span>
srec = <span style="color:#036;font-weight:bold">OrigenMemoryImage</span>.new(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">srecs/test_atd.abs.S19</span><span style="color:#710">"</span></span>)

<span style="color:#777"># Write it to the DUT, or otherwise work with it, however you like</span>
srec.to_a.each <span style="color:#080;font-weight:bold">do</span> |addr, data|
  <span style="color:#d70">$dut</span>.write_memory data, <span style="color:#606">address</span>: addr
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
    </div>

    <div>    
  <a class="anchor" name="How_To_Import"></a>          
  <h3><a href="#How_To_Import">How To Import</a></h3>          
</div>

    <h5 id="to-use-in-an-application">To use in an application:</h5>

    <p>Add the following to your application’s <code>Gemfile</code>:</p>

    <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>gem <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">origen_memory_image</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">0.6.0</span><span style="color:#710">'</span></span>
</pre></div>
</div>
    </div>

    <h5 id="to-use-in-a-plugin">To use in a plugin:</h5>

    <p>Add the following to your plugin’s gemspec:</p>

    <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>spec.add_runtime_dependency <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">origen_memory_image</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">~&gt; 0</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">&gt;= 0.6.0</span><span style="color:#710">'</span></span>
</pre></div>
</div>
    </div>

    <p>and require the gem in your code:</p>

    <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>require <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">origen_memory_image</span><span style="color:#710">'</span></span>
</pre></div>
</div>
    </div>

    <div>    
  <a class="anchor" name="How_To_Use"></a>          
  <h3><a href="#How_To_Use">How To Use</a></h3>          
</div>

    <p>Create a memory map object that points to a specific source file, note that
you do not need to supply the format.
Also note that the format is detected by looking at the file content and the naming
and extension of the file has no relevance (so it can be called anything).</p>

    <p>The path to the file can be absolute or relative to <code>Origen.root</code>:</p>

    <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>my_srec = <span style="color:#036;font-weight:bold">OrigenMemoryImage</span>.new(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">source_files/test_atd.abs.S19</span><span style="color:#710">"</span></span>)
my_hex  = <span style="color:#036;font-weight:bold">OrigenMemoryImage</span>.new(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">source_files/math.hex</span><span style="color:#710">"</span></span>)
</pre></div>
</div>
    </div>

    <p>Memory images can also be created directly from a string:</p>

    <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>str = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&lt;&lt;-END</span></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">
@2D100E00
0D 15 0F 13 0E 14 10 12
00 00 04 17 04 03 05 06</span><span style="color:#710">
END</span></span>

my_hex = <span style="color:#036;font-weight:bold">OrigenMemoryImage</span>.new(str, <span style="color:#606">source</span>: <span style="color:#036;font-weight:bold">String</span>)
</pre></div>
</div>
    </div>

    <p>Every memory image object then supports a common API.</p>

    <p>The <code>start_address</code> method returns the start (execution start) address:</p>

    <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>my_srec.start_address   <span style="color:#777"># =&gt; 0x3000_F000</span>
</pre></div>
</div>
    </div>

    <p>The <code>to_a</code> method returns the file content as an array of address/data pairs,
this method supports options to set the data width, flip the data endianness, and crop the data
between starting and ending address:</p>

    <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>my_srec.to_a                                      <span style="color:#777"># =&gt; [[0x3000_F000, 0x11223344], [0x3000_F004, 0x55667788], [0x3000_F008, 0x99AABBCC], ...]</span>

my_srec.to_a(<span style="color:#606">flip_endianness</span>: <span style="color:#069">true</span>)               <span style="color:#777"># =&gt; [[0x3000_F000, 0x44332211], [0x3000_F004, 0x88776655], [0x3000_F008, 0x99AABBCC], ...]</span>

my_srec.to_a(<span style="color:#606">data_width_in_bytes</span>: <span style="color:#00D">2</span>)              <span style="color:#777"># =&gt; [[0x3000_F000, 0x1122], [0x3000_F002, 0x3344], [0x3000_F004, 0x5566], ...]</span>

my_srec.to_a(<span style="color:#606">crop</span>: [<span style="color:#00D">0x3000_F004</span>])                 <span style="color:#777"># =&gt; [[0x3000_F004, 0x55667788], [0x3000_F008, 0x99AABBCC], ...]</span>

my_srec.to_a(<span style="color:#606">crop</span>: [<span style="color:#00D">0x3000_F000</span>, <span style="color:#00D">0x3000_F004</span>])    <span style="color:#777"># =&gt; [[0x3000_F000, 0x11223344], [0x3000_F004, 0x55667788]]</span>

</pre></div>
</div>
    </div>

    <p>Such an array can be iterated on like this to separate the address and data:</p>

    <div class="language-ruby highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>my_srec.to_a.each <span style="color:#080;font-weight:bold">do</span> |address, data|
  <span style="color:#777"># Process as required</span>
<span style="color:#080;font-weight:bold">end</span>
</pre></div>
</div>
    </div>

    <div>    
  <a class="anchor" name="Currently_Supported_Formats"></a>          
  <h3><a href="#Currently_Supported_Formats">Currently Supported Formats</a></h3>          
</div>

    <div>    
  <a class="anchor" name="S-Records"></a>          
  <h4><a href="#S-Records">S-Records</a></h4>          
</div>

    <p>Any valid S-record:</p>

    <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>S017000068656C6C6F5F776F726C645F6576622E73726563D6
S3153F00002018F09FE518F09FE518F09FE518F09FE55B
S3153F00003018F09FE500F020E314F09FE514F09FE5EC
S3113F000270F406003F102100407800003FDC
S3153F0005B05FF0FF301B4908605FF0FF301A49086063
S3093F0006F0704700000A
S7053F000410A7
</pre></div>
</div>
    </div>

    <div>    
  <a class="anchor" name="Hex_Files"></a>          
  <h4><a href="#Hex_Files">Hex Files</a></h4>          
</div>

    <p>The data lines can be grouped into any size:</p>

    <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>@18000000
1E E0 02 1C 22 40 1B E0 02 1C 22 43 18 E0 02 1C 
5A 78 0A 43 03 E0 03 4B F7 21 5A 78 0A 40 00 20 
22 E0 84 42 22 D3 1F E0 84 42 1F D9 1C E0 84 42 
@180000E0
002B20D1 03E0012A 01D1002B 1BD00223 
2340022A 02D1002B 15D103E0 032A01D1 
@180001F0
780000187C0000188200001888000018 
</pre></div>
</div>
    </div>

    <div>    
  <a class="anchor" name="Binary_Files"></a>          
  <h4><a href="#Binary_Files">Binary Files</a></h4>          
</div>

    <p>A binary file:</p>

    <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>00001101000101010000111100010011
00001110000101000001000000010010
00000000000000000000010000010111
00000100000000110000010100000110
</pre></div>
</div>
    </div>

    <div>    
  <a class="anchor" name="How_To_Setup_a_Development_Environment"></a>          
  <h3><a href="#How_To_Setup_a_Development_Environment">How To Setup a Development Environment</a></h3>          
</div>

    <p><a href="https://github.com/Origen-SDK/origen_memory_image">Clone the repository from Github</a>.</p>

    <p>Follow the instructions here if you want to make a 3rd party app
workspace use your development copy of the OrigenMemoryImage plugin:
<a href="http://origen-sdk.org/origen/latest/guides/plugins">Setting up a Plugin Development Environment</a></p>

    <p>This plugin also contains a test suite, makes sure this passes before committing
any changes!</p>

    <div class="language-text highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre>origen specs
</pre></div>
</div>
    </div>

    <div style="position: relative">
  <hr>
  <div>    
  <a class="anchor" name="Comments"></a>          
  <h4><a href="#Comments">Comments</a></h4>          
</div>
</div>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'origen-sdk';
    var disqus_title;
    var disqus_url = 'http://' + window.location.hostname + window.location.pathname;

    disqus_title = $("h1").text();
    if (disqus_title.length == 0) {
      disqus_title = $("h2").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("h3").text();
    }
    if (disqus_title.length == 0) {
      disqus_title = $("title").text();
    } else {
      disqus_title = disqus_title + ' (' + $("title").text() + ')';
    }

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>

  </div>
</div>


      </div><!-- /.container -->
    

    <footer class="footer">
      <div class="container">
        <p class="pull-left text-muted">
          Generated with the <a href="http://origen-sdk.org">Origen Semiconductor Developer's Kit</a>
        </p>
        <p class="pull-right text-muted">Origen is released under the terms of the <a href="http://choosealicense.com/licenses/lgpl-3.0/">LGPLv3</a></p>
      </div>
    </footer>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="http://origen-sdk.org/js/lunr.min.js"></script>
    <script src="http://origen-sdk.org/js/highlight.js"></script>
    <script src="http://origen-sdk.org/js/custom.js"></script>
    
  </body>
</html>
