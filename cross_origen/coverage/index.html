<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Cross origen</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.10.0/application.js' type='text/javascript'></script>    
    <link href='./assets/0.10.0/application.css' media='screen, projection, print' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" type="image/png" href="./assets/0.10.0/favicon_red.png" />
    <link rel="icon" type="image/png" href="./assets/0.10.0/favicon.png" />
  </head>
  
  <body>
    <div id="loading">
      <img src="./assets/0.10.0/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" style="display:none;">
      <div class="timestamp">Generated <abbr class="timeago" title="2016-04-04T15:03:16-05:00">2016-04-04T15:03:16-05:00</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent"><span class="red">79.24%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         77.19
       </span>
    </span> hits/line)
  </h2>
  <a name="AllFiles"></a>
  <div>
    <b>7</b> files in total.
    <b>713</b> relevant lines. 
    <span class="green"><b>565</b> lines covered</span> and
    <span class="red"><b>148</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#bd77dd95b010de123377ce9026347efc54d11921" class="src_link" title="lib/cross_origen.rb">lib/cross_origen.rb</a></td>
        <td class="yellow strong">87.04 %</td>
        <td>108</td>
        <td>54</td>
        <td>47</td>
        <td>7</td>
        <td>3.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#cc17ecd7c549a2c102481849c8c3ce5f583ac777" class="src_link" title="lib/cross_origen/headers.rb">lib/cross_origen/headers.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>21</td>
        <td>10</td>
        <td>10</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#5fd88b46a673cddd9797b6312148911ee1e71a52" class="src_link" title="lib/cross_origen/ip_xact.rb">lib/cross_origen/ip_xact.rb</a></td>
        <td class="green strong">96.43 %</td>
        <td>280</td>
        <td>168</td>
        <td>162</td>
        <td>6</td>
        <td>37.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#3551c29c2d1376214d0d501d2f155a648c8c83a0" class="src_link" title="lib/cross_origen/origen_format.rb">lib/cross_origen/origen_format.rb</a></td>
        <td class="red strong">64.78 %</td>
        <td>541</td>
        <td>335</td>
        <td>217</td>
        <td>118</td>
        <td>4.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c7b538303da36e8b0652b69e08fcefb3728f0c48" class="src_link" title="lib/cross_origen/ralf.rb">lib/cross_origen/ralf.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>15</td>
        <td>7</td>
        <td>7</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#9a3421dbe6e431922a08363ea9e2497fa6f4bd8d" class="src_link" title="lib/cross_origen/test/dut.rb">lib/cross_origen/test/dut.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>64</td>
        <td>28</td>
        <td>28</td>
        <td>0</td>
        <td>5.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#91db8462c023ed0f75d0691014cdbdb2754f5730" class="src_link" title="lib/cross_origen/xml_doc.rb">lib/cross_origen/xml_doc.rb</a></td>
        <td class="yellow strong">84.68 %</td>
        <td>252</td>
        <td>111</td>
        <td>94</td>
        <td>17</td>
        <td>423.8</td>
      </tr>
      
    </tbody>
  </table>
</div>


        
          <div class="file_list_container" id="Test">
  <h2>
    <span class="group_name">Test</span>
    (<span class="covered_percent"><span class="green">100.0%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         5.7
       </span>
    </span> hits/line)
  </h2>
  <a name="Test"></a>
  <div>
    <b>1</b> files in total.
    <b>28</b> relevant lines. 
    <span class="green"><b>28</b> lines covered</span> and
    <span class="red"><b>0</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#9a3421dbe6e431922a08363ea9e2497fa6f4bd8d" class="src_link" title="lib/cross_origen/test/dut.rb">lib/cross_origen/test/dut.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>64</td>
        <td>28</td>
        <td>28</td>
        <td>0</td>
        <td>5.7</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Ungrouped">
  <h2>
    <span class="group_name">Ungrouped</span>
    (<span class="covered_percent"><span class="red">78.39%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         80.11
       </span>
    </span> hits/line)
  </h2>
  <a name="Ungrouped"></a>
  <div>
    <b>6</b> files in total.
    <b>685</b> relevant lines. 
    <span class="green"><b>537</b> lines covered</span> and
    <span class="red"><b>148</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#bd77dd95b010de123377ce9026347efc54d11921" class="src_link" title="lib/cross_origen.rb">lib/cross_origen.rb</a></td>
        <td class="yellow strong">87.04 %</td>
        <td>108</td>
        <td>54</td>
        <td>47</td>
        <td>7</td>
        <td>3.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#cc17ecd7c549a2c102481849c8c3ce5f583ac777" class="src_link" title="lib/cross_origen/headers.rb">lib/cross_origen/headers.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>21</td>
        <td>10</td>
        <td>10</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#5fd88b46a673cddd9797b6312148911ee1e71a52" class="src_link" title="lib/cross_origen/ip_xact.rb">lib/cross_origen/ip_xact.rb</a></td>
        <td class="green strong">96.43 %</td>
        <td>280</td>
        <td>168</td>
        <td>162</td>
        <td>6</td>
        <td>37.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#3551c29c2d1376214d0d501d2f155a648c8c83a0" class="src_link" title="lib/cross_origen/origen_format.rb">lib/cross_origen/origen_format.rb</a></td>
        <td class="red strong">64.78 %</td>
        <td>541</td>
        <td>335</td>
        <td>217</td>
        <td>118</td>
        <td>4.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c7b538303da36e8b0652b69e08fcefb3728f0c48" class="src_link" title="lib/cross_origen/ralf.rb">lib/cross_origen/ralf.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>15</td>
        <td>7</td>
        <td>7</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#91db8462c023ed0f75d0691014cdbdb2754f5730" class="src_link" title="lib/cross_origen/xml_doc.rb">lib/cross_origen/xml_doc.rb</a></td>
        <td class="yellow strong">84.68 %</td>
        <td>252</td>
        <td>111</td>
        <td>94</td>
        <td>17</td>
        <td>423.8</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
      </div>
    
      <div id="footer">
        Generated by <a href="http://github.com/colszowka/simplecov">simplecov</a> v0.10.0 
        and simplecov-html v0.10.0<br/>
        using test
      </div>
    
      <div class="source_files">
      
        <div class="source_table" id="bd77dd95b010de123377ce9026347efc54d11921">
  <div class="header">
    <h3>lib/cross_origen.rb</h3>
    <h4><span class="yellow">87.04 %</span> covered</h4>
    <div>
      <b>54</b> relevant lines. 
      <span class="green"><b>47</b> lines covered</span> and
      <span class="red"><b>7</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;origen&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">require_relative &#39;../config/application.rb&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">require_relative &#39;../config/environment.rb&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">module CrossOrigen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">  if RUBY_VERSION &lt; &#39;2.0.0&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="7">
          
          
          <code class="ruby">    require &#39;scrub_rb&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">  extend ActiveSupport::Concern</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">  included do</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="12">
          <span class="hits">3</span>
          
          <code class="ruby">    include Origen::Model</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">  def instance_respond_to?(method_name)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="16">
          
          
          <code class="ruby">    public_methods.include?(method_name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_import(options = {})</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="20">
          <span class="hits">14</span>
          
          <code class="ruby">    file = cr_file(options)</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="21">
          <span class="hits">14</span>
          
          <code class="ruby">    cr_translator(file, options).import(file, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">  def to_ralf(options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">    cr_ralf.owner_to_ralf(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">  def to_ip_xact(options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="29">
          <span class="hits">2</span>
          
          <code class="ruby">    cr_ip_xact.owner_to_xml(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">  alias_method :to_ipxact, :to_ip_xact</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">  def to_origen(options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">    options[:obj] = self</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">    cr_to_origen(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">  def to_header(options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">    cr_headers.owner_to_header(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">  # Tries the given methods and returns the first one to return a value,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">  # ultimately returns nil if no value is found.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_try(*methods)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="45">
          <span class="hits">2</span>
          
          <code class="ruby">    methods.each do |method|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="46">
          <span class="hits">3</span>
          
          <code class="ruby">      if self.respond_to?(method)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="47">
          <span class="hits">2</span>
          
          <code class="ruby">        val = send(method)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="48">
          <span class="hits">2</span>
          
          <code class="ruby">        return val if val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">    nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">  # Returns an instance of the DesignSync interface</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="55">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_design_sync</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="56">
          
          
          <code class="ruby">    @cr_design_sync ||= DesignSync.new(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="59">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_headers</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="60">
          <span class="hits">1</span>
          
          <code class="ruby">    @cr_headers ||= Headers.new(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">  # Creates Ruby files necessary to model all sub_blocks and registers found (recursively) owned by options[:obj]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">  # The Ruby files are created at options[:path] (app output directory by default)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="65">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_to_origen(options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="66">
          <span class="hits">1</span>
          
          <code class="ruby">    options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">      obj:  $dut,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">      path: Origen.app.config.output_directory</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">    }.update(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">    # This method assumes and checks for $self to contain Origen::Model</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="71">
          <span class="hits">1</span>
          
          <code class="ruby">    error &quot;ERROR: #{options[:obj].class} does not contain Origen::Model as required&quot; unless options[:obj].class &lt; Origen::Model</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">    # Check to make sure there are sub_blocks or regs directly under $dut</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="73">
          <span class="hits">1</span>
          
          <code class="ruby">    error &quot;ERROR: options[:obj]ect #{options[:obj].object_id} of class #{options[:obj].class} does not contain registers or sub_blocks&quot; unless options[:obj].owns_registers? || options[:obj].instance_respond_to?(:sub_blocks)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="74">
          <span class="hits">1</span>
          
          <code class="ruby">    OrigenFormat.new(options).export</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="77">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_ralf</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="78">
          <span class="hits">1</span>
          
          <code class="ruby">    @cr_ralf ||= Ralf.new(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="81">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_ip_xact</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="82">
          <span class="hits">17</span>
          
          <code class="ruby">    @cr_ip_xact ||= IpXact.new(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="85">
          <span class="hits">1</span>
          
          <code class="ruby">  private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">  # Returns an instance of the translator for the format of the given file</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="88">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_translator(file, _options = {})</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="89">
          <span class="hits">14</span>
          
          <code class="ruby">    snippet = IO.read(file, 2000)  # Read first 2000 characters</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="90">
          <span class="hits">14</span>
          
          <code class="ruby">    case snippet</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">    when /spiritconsortium/</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="92">
          <span class="hits">14</span>
          
          <code class="ruby">      cr_ip_xact</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="94">
          
          
          <code class="ruby">      fail &quot;Unknown file format for file: #{file}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">  # Returns a local path to the given file defined by the options.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="99">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_file(options = {})</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="100">
          <span class="hits">14</span>
          
          <code class="ruby">    if options[:path]</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="101">
          <span class="hits">14</span>
          
          <code class="ruby">      options[:path]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="102">
          
          
          <code class="ruby">    elsif options[:vault]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="103">
          
          
          <code class="ruby">      cr_design_sync.fetch(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="105">
          
          
          <code class="ruby">      fail &#39;You must supply a :path or :vault option pointing to the import file!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="cc17ecd7c549a2c102481849c8c3ce5f583ac777">
  <div class="header">
    <h3>lib/cross_origen/headers.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>10</b> relevant lines. 
      <span class="green"><b>10</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module CrossOrigen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  class Headers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Returns the object that included the CrossOrigen module</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(owner)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      @owner = owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    # Returns a string representing the owner as a C header</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">    def owner_to_header(_options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">      Origen.compile(&quot;#{path_to_templates}/headers/default.h.erb&quot;, scope: owner)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">    def path_to_templates</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">      &quot;#{File.expand_path(File.dirname(__FILE__))}/../../templates&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="5fd88b46a673cddd9797b6312148911ee1e71a52">
  <div class="header">
    <h3>lib/cross_origen/ip_xact.rb</h3>
    <h4><span class="green">96.43 %</span> covered</h4>
    <div>
      <b>168</b> relevant lines. 
      <span class="green"><b>162</b> lines covered</span> and
      <span class="red"><b>6</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module CrossOrigen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  class IpXact &lt; XMLDoc</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    AddressSpace = Struct.new(:name, :range, :width)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">    MemoryMaps = Struct.new(:name, :address_blocks)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">    AddressBlock = Struct.new(:name, :base_address, :range, :width)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">    # Import/reader that currently only supports creating registers and bit fields</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">    def import(file, options = {}) # rubocop:disable CyclomaticComplexity</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="11">
          <span class="hits">14</span>
          
          <code class="ruby">      require &#39;kramdown&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="13">
          <span class="hits">14</span>
          
          <code class="ruby">      address_spaces = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="15">
          <span class="hits">14</span>
          
          <code class="ruby">      doc(file, options) do |doc|</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="16">
          <span class="hits">14</span>
          
          <code class="ruby">        doc.xpath(&#39;//spirit:addressSpaces/spirit:addressSpace&#39;).each do |addr_space|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="17">
          
          
          <code class="ruby">          name = fetch addr_space.at_xpath(&#39;spirit:name&#39;), downcase: true, to_sym: true, get_text: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="18">
          
          
          <code class="ruby">          range = fetch addr_space.at_xpath(&#39;spirit:range&#39;), get_text: true, to_dec: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="19">
          
          
          <code class="ruby">          width = fetch addr_space.at_xpath(&#39;spirit:width&#39;), get_text: true, to_i: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="20">
          
          
          <code class="ruby">          address_spaces[name] = AddressSpace.new(name, range, width)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="22">
          <span class="hits">14</span>
          
          <code class="ruby">        doc.xpath(&#39;//spirit:memoryMaps/spirit:memoryMap&#39;).each do |mem_map|</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="23">
          <span class="hits">14</span>
          
          <code class="ruby">          mem_map_name = fetch mem_map.at_xpath(&#39;spirit:name&#39;), downcase: true, to_sym: true, get_text: true</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="24">
          <span class="hits">14</span>
          
          <code class="ruby">          if mem_map_name.to_s.empty?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">            mem_map_obj = owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="27">
          <span class="hits">13</span>
          
          <code class="ruby">            owner.sub_block mem_map_name</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="28">
          <span class="hits">13</span>
          
          <code class="ruby">            mem_map_obj = owner.send(mem_map_name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="30">
          <span class="hits">14</span>
          
          <code class="ruby">          mem_map.xpath(&#39;spirit:addressBlock&#39;).each do |addr_block|</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="31">
          <span class="hits">27</span>
          
          <code class="ruby">            name = fetch addr_block.at_xpath(&#39;spirit:name&#39;), downcase: true, to_sym: true, get_text: true</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="32">
          <span class="hits">27</span>
          
          <code class="ruby">            base_address = fetch addr_block.at_xpath(&#39;spirit:baseAddress&#39;), get_text: true, to_dec: true</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="33">
          <span class="hits">27</span>
          
          <code class="ruby">            range = fetch addr_block.at_xpath(&#39;spirit:range&#39;), get_text: true, to_dec: true</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="34">
          <span class="hits">27</span>
          
          <code class="ruby">            width = fetch addr_block.at_xpath(&#39;spirit:width&#39;), get_text: true, to_i: true</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="35">
          <span class="hits">27</span>
          
          <code class="ruby">            if name.to_s.empty?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">              addr_block_obj = mem_map_obj</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="38">
          <span class="hits">26</span>
          
          <code class="ruby">              mem_map_obj.sub_block name, base_address: base_address, range: range, lau: width</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="39">
          <span class="hits">26</span>
          
          <code class="ruby">              addr_block_obj = mem_map_obj.send(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="41">
          <span class="hits">27</span>
          
          <code class="ruby">            addr_block.xpath(&#39;spirit:register&#39;).each do |register|</code>
        </li>
      
        <li class="covered" data-hits="105" data-linenumber="42">
          <span class="hits">105</span>
          
          <code class="ruby">              name = fetch register.at_xpath(&#39;spirit:name&#39;), downcase: true, to_sym: true, get_text: true</code>
        </li>
      
        <li class="covered" data-hits="105" data-linenumber="43">
          <span class="hits">105</span>
          
          <code class="ruby">              size = fetch register.at_xpath(&#39;spirit:size&#39;), get_text: true, to_i: true</code>
        </li>
      
        <li class="covered" data-hits="105" data-linenumber="44">
          <span class="hits">105</span>
          
          <code class="ruby">              addr_offset = fetch register.at_xpath(&#39;spirit:addressOffset&#39;), get_text: true, to_dec: true</code>
        </li>
      
        <li class="covered" data-hits="105" data-linenumber="45">
          <span class="hits">105</span>
          
          <code class="ruby">              access = fetch register.at_xpath(&#39;spirit:access&#39;), get_text: true</code>
        </li>
      
        <li class="covered" data-hits="105" data-linenumber="46">
          <span class="hits">105</span>
          
          <code class="ruby">              reset_value = fetch register.at_xpath(&#39;spirit:reset/spirit:value&#39;), get_text: true, to_dec: true</code>
        </li>
      
        <li class="covered" data-hits="105" data-linenumber="47">
          <span class="hits">105</span>
          
          <code class="ruby">              reset_mask = fetch register.at_xpath(&#39;spirit:reset/spirit:mask&#39;), get_text: true, to_dec: true</code>
        </li>
      
        <li class="covered" data-hits="105" data-linenumber="48">
          <span class="hits">105</span>
          
          <code class="ruby">              if [reset_value, reset_mask].include? nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">                # Set default values for some register attributes</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="50">
          
          
          <code class="ruby">                reset_value, reset_mask = 0, 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">                # Do a logical bitwise AND with the reset value and mask</code>
        </li>
      
        <li class="covered" data-hits="105" data-linenumber="53">
          <span class="hits">105</span>
          
          <code class="ruby">                reset_value = reset_value &amp; reset_mask</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="105" data-linenumber="55">
          <span class="hits">105</span>
          
          <code class="ruby">              addr_block_obj.reg name, addr_offset, size: size, access: access, description: reg_description(register) do |reg|</code>
        </li>
      
        <li class="covered" data-hits="105" data-linenumber="56">
          <span class="hits">105</span>
          
          <code class="ruby">                register.xpath(&#39;spirit:field&#39;).each do |field|</code>
        </li>
      
        <li class="covered" data-hits="196" data-linenumber="57">
          <span class="hits">196</span>
          
          <code class="ruby">                  name = fetch field.at_xpath(&#39;spirit:name&#39;), downcase: true, to_sym: true, get_text: true</code>
        </li>
      
        <li class="covered" data-hits="196" data-linenumber="58">
          <span class="hits">196</span>
          
          <code class="ruby">                  bit_offset = fetch field.at_xpath(&#39;spirit:bitOffset&#39;), get_text: true, to_i: true</code>
        </li>
      
        <li class="covered" data-hits="196" data-linenumber="59">
          <span class="hits">196</span>
          
          <code class="ruby">                  bit_width = fetch field.at_xpath(&#39;spirit:bitWidth&#39;), get_text: true, to_i: true</code>
        </li>
      
        <li class="covered" data-hits="196" data-linenumber="60">
          <span class="hits">196</span>
          
          <code class="ruby">                  access = fetch field.at_xpath(&#39;spirit:access&#39;), get_text: true</code>
        </li>
      
        <li class="covered" data-hits="196" data-linenumber="61">
          <span class="hits">196</span>
          
          <code class="ruby">                  if access =~ /\S+\-\S+/</code>
        </li>
      
        <li class="covered" data-hits="65" data-linenumber="62">
          <span class="hits">65</span>
          
          <code class="ruby">                    access = access[/^(\S)/, 1] + access[/\-(\S)\S+$/, 1]</code>
        </li>
      
        <li class="covered" data-hits="65" data-linenumber="63">
          <span class="hits">65</span>
          
          <code class="ruby">                    access = access.downcase.to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">                  else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">                    # default to read-write if access is not specified</code>
        </li>
      
        <li class="covered" data-hits="131" data-linenumber="66">
          <span class="hits">131</span>
          
          <code class="ruby">                    access = :rw</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="covered" data-hits="196" data-linenumber="68">
          <span class="hits">196</span>
          
          <code class="ruby">                  range = nil</code>
        </li>
      
        <li class="covered" data-hits="196" data-linenumber="69">
          <span class="hits">196</span>
          
          <code class="ruby">                  if bit_width == 1</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="70">
          <span class="hits">27</span>
          
          <code class="ruby">                    range = bit_offset</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">                  else</code>
        </li>
      
        <li class="covered" data-hits="169" data-linenumber="72">
          <span class="hits">169</span>
          
          <code class="ruby">                    range = (bit_offset + bit_width - 1)..bit_offset</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="covered" data-hits="196" data-linenumber="74">
          <span class="hits">196</span>
          
          <code class="ruby">                  reg.bit range, name, reset: reset_value[range], access: access, description: bit_description(field)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">    # Returns a string representing the owner object in IP-XACT XML</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="84">
          <span class="hits">1</span>
          
          <code class="ruby">    def owner_to_xml(options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="85">
          <span class="hits">2</span>
          
          <code class="ruby">      require &#39;nokogiri&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="87">
          <span class="hits">2</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">        include_bit_field_values: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="91">
          <span class="hits">2</span>
          
          <code class="ruby">      @format = options[:format]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="93">
          <span class="hits">2</span>
          
          <code class="ruby">      schemas = [</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">        &#39;http://www.spiritconsortium.org/XMLSchema/SPIRIT/1.4&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">        &#39;http://www.spiritconsortium.org/XMLSchema/SPIRIT/1.4/index.xsd&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">      ]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="97">
          <span class="hits">2</span>
          
          <code class="ruby">      if uvm?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="98">
          <span class="hits">1</span>
          
          <code class="ruby">        schemas &lt;&lt; &#39;$IREG_GEN/XMLSchema/SPIRIT/VendorExtensions.xsd&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="101">
          <span class="hits">2</span>
          
          <code class="ruby">      headers = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">        &#39;xmlns:spirit&#39;       =&gt; &#39;http://www.spiritconsortium.org/XMLSchema/SPIRIT/1.4&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">        &#39;xmlns:xsi&#39;          =&gt; &#39;http://www.w3.org/2001/XMLSchema-instance&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">        &#39;xsi:schemaLocation&#39; =&gt; schemas.join(&#39; &#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">      }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="106">
          <span class="hits">2</span>
          
          <code class="ruby">      if uvm?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="107">
          <span class="hits">1</span>
          
          <code class="ruby">        headers[&#39;xmlns:vendorExtensions&#39;] = &#39;$IREG_GEN/XMLSchema/SPIRIT&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="110">
          <span class="hits">2</span>
          
          <code class="ruby">      builder = Nokogiri::XML::Builder.new(encoding: &#39;UTF-8&#39;) do |xml|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="111">
          <span class="hits">2</span>
          
          <code class="ruby">        spirit = xml[&#39;spirit&#39;]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="112">
          <span class="hits">2</span>
          
          <code class="ruby">        spirit.component(headers) do</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="113">
          <span class="hits">2</span>
          
          <code class="ruby">          spirit.vendor options[:vendor] || &#39;Origen&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="114">
          <span class="hits">2</span>
          
          <code class="ruby">          spirit.library options[:library] || &#39;Origen&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">          # I guess this should really be the register owner&#39;s owner&#39;s name?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="116">
          <span class="hits">2</span>
          
          <code class="ruby">          spirit.name try(:ip_name) || owner.class.to_s.split(&#39;::&#39;).last</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="117">
          <span class="hits">2</span>
          
          <code class="ruby">          spirit.version try(:ip_version, :version, :revision)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="118">
          <span class="hits">2</span>
          
          <code class="ruby">          spirit.memoryMaps do</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="119">
          <span class="hits">2</span>
          
          <code class="ruby">            memory_maps.each do |map_name, _map|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="120">
          <span class="hits">2</span>
          
          <code class="ruby">              spirit.memoryMap do</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="121">
          <span class="hits">2</span>
          
          <code class="ruby">                spirit.name map_name</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="122">
          <span class="hits">2</span>
          
          <code class="ruby">                address_blocks do |domain_name, _domain, sub_block|</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="123">
          <span class="hits">5</span>
          
          <code class="ruby">                  spirit.addressBlock do</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="124">
          <span class="hits">5</span>
          
          <code class="ruby">                    if sub_block == owner</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="125">
          <span class="hits">2</span>
          
          <code class="ruby">                      spirit.name nil</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="126">
          <span class="hits">2</span>
          
          <code class="ruby">                      spirit.baseAddress 0.to_hex</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">                    else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="128">
          <span class="hits">3</span>
          
          <code class="ruby">                      spirit.name address_block_name(domain_name, sub_block)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="129">
          <span class="hits">3</span>
          
          <code class="ruby">                      spirit.baseAddress sub_block.base_address.to_hex</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="131">
          <span class="hits">5</span>
          
          <code class="ruby">                    spirit.range range(sub_block)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="132">
          <span class="hits">5</span>
          
          <code class="ruby">                    spirit.width width(sub_block)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="133">
          <span class="hits">5</span>
          
          <code class="ruby">                    sub_block.regs.each do |name, reg|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby">                      # Required for now to ensure that the current value is the reset value</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="135">
          <span class="hits">12</span>
          
          <code class="ruby">                      reg.reset</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="136">
          <span class="hits">12</span>
          
          <code class="ruby">                      spirit.register do</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="137">
          <span class="hits">12</span>
          
          <code class="ruby">                        spirit.name name</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="138">
          <span class="hits">12</span>
          
          <code class="ruby">                        spirit.description try(reg, :name_full, :full_name)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="139">
          <span class="hits">12</span>
          
          <code class="ruby">                        spirit.addressOffset reg.offset.to_hex</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="140">
          <span class="hits">12</span>
          
          <code class="ruby">                        spirit.size reg.size</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="141">
          <span class="hits">12</span>
          
          <code class="ruby">                        if reg.bits.any?(&amp;:writable?)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="142">
          <span class="hits">10</span>
          
          <code class="ruby">                          spirit.access &#39;read-write&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">                        else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="144">
          <span class="hits">2</span>
          
          <code class="ruby">                          spirit.access &#39;read-only&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">                        end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="146">
          <span class="hits">12</span>
          
          <code class="ruby">                        spirit.reset do</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="147">
          <span class="hits">12</span>
          
          <code class="ruby">                          spirit.value reg.data.to_hex</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="148">
          <span class="hits">12</span>
          
          <code class="ruby">                          spirit.mask mask(reg).to_hex</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby">                        end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="150">
          <span class="hits">12</span>
          
          <code class="ruby">                        reg.named_bits do |name, bits|</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="151">
          <span class="hits">21</span>
          
          <code class="ruby">                          spirit.field do</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="152">
          <span class="hits">21</span>
          
          <code class="ruby">                            spirit.name name</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="153">
          <span class="hits">21</span>
          
          <code class="ruby">                            spirit.description try(bits, :brief_description, :name_full, :full_name)</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="154">
          <span class="hits">21</span>
          
          <code class="ruby">                            spirit.bitOffset bits.position</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="155">
          <span class="hits">21</span>
          
          <code class="ruby">                            spirit.bitWidth bits.size</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="156">
          <span class="hits">21</span>
          
          <code class="ruby">                            spirit.access bits.access</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="157">
          <span class="hits">21</span>
          
          <code class="ruby">                            if options[:include_bit_field_values]</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="158">
          <span class="hits">21</span>
          
          <code class="ruby">                              if bits.bit_value_descriptions[0]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="159">
          <span class="hits">2</span>
          
          <code class="ruby">                                bits.bit_value_descriptions.each do |val, desc|</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="160">
          <span class="hits">4</span>
          
          <code class="ruby">                                  spirit.values do</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="161">
          <span class="hits">4</span>
          
          <code class="ruby">                                    spirit.value val.to_hex</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="162">
          <span class="hits">4</span>
          
          <code class="ruby">                                    spirit.name &quot;val_#{val.to_hex}&quot;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="163">
          <span class="hits">4</span>
          
          <code class="ruby">                                    spirit.description desc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby">                                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby">                                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">                              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby">                            end</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="168">
          <span class="hits">21</span>
          
          <code class="ruby">                            if uvm?</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="169">
          <span class="hits">20</span>
          
          <code class="ruby">                              spirit.vendorExtensions do</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="170">
          <span class="hits">20</span>
          
          <code class="ruby">                                xml[&#39;vendorExtensions&#39;].hdl_path bits.path(relative_to: sub_block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">                              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby">                            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">                          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby">                        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">                      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="177">
          <span class="hits">5</span>
          
          <code class="ruby">                    if uvm?</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="178">
          <span class="hits">4</span>
          
          <code class="ruby">                      spirit.vendorExtensions do</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="179">
          <span class="hits">4</span>
          
          <code class="ruby">                        xml[&#39;vendorExtensions&#39;].hdl_path sub_block.path(relative_to: owner)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby">                      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="189">
          <span class="hits">2</span>
          
          <code class="ruby">      builder.to_xml</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="192">
          <span class="hits">1</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="194">
          <span class="hits">1</span>
          
          <code class="ruby">    def reg_description(register)</code>
        </li>
      
        <li class="covered" data-hits="105" data-linenumber="195">
          <span class="hits">105</span>
          
          <code class="ruby">      fetch register.at_xpath(&#39;spirit:description&#39;), get_text: true, whitespace: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="197">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="198">
          <span class="hits">1</span>
          
          <code class="ruby">    def bit_description(bit)</code>
        </li>
      
        <li class="covered" data-hits="196" data-linenumber="199">
          <span class="hits">196</span>
          
          <code class="ruby">      desc = fetch(bit.at_xpath(&#39;spirit:description&#39;), get_text: true, whitespace: true) || &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="196" data-linenumber="200">
          <span class="hits">196</span>
          
          <code class="ruby">      bit_val_present = false</code>
        </li>
      
        <li class="covered" data-hits="196" data-linenumber="201">
          <span class="hits">196</span>
          
          <code class="ruby">      bit.xpath(&#39;spirit:values&#39;).each do |val|</code>
        </li>
      
        <li class="covered" data-hits="210" data-linenumber="202">
          <span class="hits">210</span>
          
          <code class="ruby">        unless bit_val_present</code>
        </li>
      
        <li class="covered" data-hits="53" data-linenumber="203">
          <span class="hits">53</span>
          
          <code class="ruby">          desc += &quot;\n&quot;</code>
        </li>
      
        <li class="covered" data-hits="53" data-linenumber="204">
          <span class="hits">53</span>
          
          <code class="ruby">          bit_val_present = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="210" data-linenumber="206">
          <span class="hits">210</span>
          
          <code class="ruby">        value = extract(val, &#39;spirit:value&#39;, format: :integer, hex: true)</code>
        </li>
      
        <li class="covered" data-hits="210" data-linenumber="207">
          <span class="hits">210</span>
          
          <code class="ruby">        value_desc = extract val, &#39;spirit:description&#39;</code>
        </li>
      
        <li class="covered" data-hits="210" data-linenumber="208">
          <span class="hits">210</span>
          
          <code class="ruby">        if value &amp;&amp; value_desc</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="209">
          <span class="hits">2</span>
          
          <code class="ruby">          desc += &quot;\n#{value.to_s(2)} | #{value_desc}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="196" data-linenumber="212">
          <span class="hits">196</span>
          
          <code class="ruby">      desc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="215">
          <span class="hits">1</span>
          
          <code class="ruby">    def mask(reg)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="216">
          <span class="hits">12</span>
          
          <code class="ruby">      m = 0</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="217">
          <span class="hits">12</span>
          
          <code class="ruby">      reg.size.times do |i|</code>
        </li>
      
        <li class="covered" data-hits="160" data-linenumber="218">
          <span class="hits">160</span>
          
          <code class="ruby">        unless reg[i].reset_val == :undefined</code>
        </li>
      
        <li class="covered" data-hits="160" data-linenumber="219">
          <span class="hits">160</span>
          
          <code class="ruby">          m |= (1 &lt;&lt; i)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="222">
          <span class="hits">12</span>
          
          <code class="ruby">      m</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="225">
          <span class="hits">1</span>
          
          <code class="ruby">    def uvm?</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="226">
          <span class="hits">30</span>
          
          <code class="ruby">      @format == :uvm</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="229">
          <span class="hits">1</span>
          
          <code class="ruby">    def memory_maps</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="230">
          <span class="hits">2</span>
          
          <code class="ruby">      { nil =&gt; {} }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="231">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="232">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="233">
          <span class="hits">1</span>
          
          <code class="ruby">    def sub_blocks(domain_name)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="234">
          <span class="hits">2</span>
          
          <code class="ruby">      owner.all_sub_blocks.select do |sub_block|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby">        sub_block.owns_registers? &amp;&amp;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="236">
          <span class="hits">4</span>
          
          <code class="ruby">          (sub_block.domains[domain_name] || domain_name == :default)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="239">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="240">
          <span class="hits">1</span>
          
          <code class="ruby">    def address_blocks</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="241">
          <span class="hits">2</span>
          
          <code class="ruby">      domains = owner.register_domains</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="242">
          <span class="hits">2</span>
          
          <code class="ruby">      domains = { default: {} } if domains.empty?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="243">
          <span class="hits">2</span>
          
          <code class="ruby">      domains.each do |domain_name, domain|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="244">
          <span class="hits">2</span>
          
          <code class="ruby">        if owner.owns_registers?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="245">
          <span class="hits">2</span>
          
          <code class="ruby">          yield domain_name, domain, owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="247">
          <span class="hits">2</span>
          
          <code class="ruby">        sub_blocks(domain_name).each do |sub_block|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="248">
          <span class="hits">3</span>
          
          <code class="ruby">          yield domain_name, domain, sub_block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="251">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="253">
          <span class="hits">1</span>
          
          <code class="ruby">    def address_block_name(domain_name, sub_block)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="254">
          <span class="hits">3</span>
          
          <code class="ruby">      if domain_name == :default</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="255">
          <span class="hits">3</span>
          
          <code class="ruby">        sub_block.name.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="257">
          
          
          <code class="ruby">        &quot;#{domain_name}_#{sub_block.name}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="261">
          <span class="hits">1</span>
          
          <code class="ruby">    def width(sub_block)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="262">
          <span class="hits">10</span>
          
          <code class="ruby">      sub_block.try(:width) || 32</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="265">
          <span class="hits">1</span>
          
          <code class="ruby">    def range(sub_block)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="266">
          <span class="hits">5</span>
          
          <code class="ruby">      range = sub_block.try(:range) || begin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby">        # This is to work around an Origen bug where max_address_reg_size is not updated in the case of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="268">
          
          
          <code class="ruby">        # only one register being present</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="269">
          
          
          <code class="ruby">        # TODO: Fix in Origen</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="270">
          <span class="hits">5</span>
          
          <code class="ruby">        max_address_reg_size = sub_block.max_address_reg_size || sub_block.regs.first[1].size</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="271">
          <span class="hits">5</span>
          
          <code class="ruby">        (sub_block.max_reg_address + (max_address_reg_size / 8))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="273">
          <span class="hits">5</span>
          
          <code class="ruby">      width_in_bytes = width(sub_block) / 8</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="274">
          <span class="hits">5</span>
          
          <code class="ruby">      if range % width_in_bytes != 0</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="275">
          <span class="hits">4</span>
          
          <code class="ruby">        range += (width_in_bytes - (range % width_in_bytes))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="276">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="277">
          <span class="hits">5</span>
          
          <code class="ruby">      range</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="279">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="280">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="3551c29c2d1376214d0d501d2f155a648c8c83a0">
  <div class="header">
    <h3>lib/cross_origen/origen_format.rb</h3>
    <h4><span class="red">64.78 %</span> covered</h4>
    <div>
      <b>335</b> relevant lines. 
      <span class="green"><b>217</b> lines covered</span> and
      <span class="red"><b>118</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module CrossOrigen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  class OrigenFormat</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    require &#39;nokogiri&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">    SUB_BLOCK_ATTRS = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">      base_address:    &#39;IP base address&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">      byte_order:      &#39;Describes endianness of the IP.  Values possible are :big_endian and :little_endian&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">      lau:             &#39;IP Least Addressable Unit: Values possible are (1..32)&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">      version:         &#39;IP version&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      instance:        &#39;IP instance&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">      instance_module: &#39;IP module&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      class_name:      &#39;Class name&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">      instance:        &#39;IP instance&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      instance_module: &#39;IP module&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      addr_block_name: &#39;Address block name&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      space:           &#39;Address block space&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">    }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">    FILE_COMMENTS = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      class: &quot;\# This file is created by Origen via CrossOrigen::OrigenFormat#export, and is read-only.\n\# If you need to make changes, re-open the class\n&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      incl:  &quot;\# This file is created by Origen via CrossOrigen::OrigenFormat#export, and is read-only&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">    }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :obj, :top_level_class, :top_level_hierarchy, :output_dir, :top_level_path, :incl_path, :incl_dir, :file_content</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">        obj:  $dut,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">        path: &quot;#{Origen.root!}/output&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">      @obj = options[:obj]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">      @output_dir = options[:path]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">      @top_level_path = &quot;#{output_dir}/top_level.rb&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">      @incl_path = &quot;#{output_dir}/sub_blocks.rb&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">      @incl_dir = &quot;#{output_dir}/import&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">      @top_level_hierarchy = get_namespace(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby">      @top_level_class = @top_level_hierarchy.keys.last</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      # first key is file type (:bom or :incl) and second is object name</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="40">
          <span class="hits">1</span>
          
          <code class="ruby">      @file_content = Hash.new do |h, k|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="41">
          <span class="hits">2</span>
          
          <code class="ruby">        h[k] = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="45">
          <span class="hits">1</span>
          
          <code class="ruby">    def export</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">      # Delete any previous files</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">      FileUtils.rm_rf(@incl_dir) if File.exist?(@incl_dir)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="48">
          <span class="hits">1</span>
          
          <code class="ruby">      FileUtils.mkdir_p(@incl_dir)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      # Check if previous version of top-level files exist and delete them</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="51">
          <span class="hits">1</span>
          
          <code class="ruby">      File.delete(@top_level_path) if File.exist?(@top_level_path)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="52">
          <span class="hits">1</span>
          
          <code class="ruby">      File.delete(@incl_path) if File.exist?(@incl_path)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">      # Create the sub_block objects in the top_level.rb file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">      # This method will create each required class file recursively (indirectly)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">      # and will gather all of the information required to create the include file.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">      # In essence it does it all</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">      create_bom</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="61">
          <span class="hits">1</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">    # Creates the BoM file that creates the sub_blocks from the meta-modelled sub_blocks</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="64">
          <span class="hits">1</span>
          
          <code class="ruby">    def create_bom</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="65">
          <span class="hits">1</span>
          
          <code class="ruby">      indent = &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="66">
          <span class="hits">1</span>
          
          <code class="ruby">      file_content = {}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="67">
          <span class="hits">1</span>
          
          <code class="ruby">      full_class = @top_level_hierarchy.keys.last</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby">      klass = @top_level_class.demodulize</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="69">
          <span class="hits">1</span>
          
          <code class="ruby">      Origen.log.info &#39;Exporting to Origen format...&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="70">
          <span class="hits">1</span>
          
          <code class="ruby">      File.open(@top_level_path, &#39;w&#39;) do |bom_file|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">        # bom_file.chmod(0555)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="72">
          <span class="hits">1</span>
          
          <code class="ruby">        bom_file.puts(FILE_COMMENTS[:incl])</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="73">
          <span class="hits">1</span>
          
          <code class="ruby">        bom_file.puts(&quot;require_relative &#39;sub_blocks&#39;&quot;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="74">
          <span class="hits">1</span>
          
          <code class="ruby">        @top_level_hierarchy.each do |name, obj|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="75">
          <span class="hits">3</span>
          
          <code class="ruby">          bom_file.puts(&quot;#{indent}#{obj} #{name.split(&#39;::&#39;).last}&quot;)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="76">
          <span class="hits">3</span>
          
          <code class="ruby">          indent += &#39;  &#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="78">
          <span class="hits">1</span>
          
          <code class="ruby">        bom_file.puts(&quot;#{indent}include Origen::Model&quot;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="79">
          <span class="hits">1</span>
          
          <code class="ruby">        bom_file.puts(&#39;&#39;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="80">
          <span class="hits">1</span>
          
          <code class="ruby">        bom_file.puts(&quot;#{indent}def initialize(options = {})&quot;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="81">
          <span class="hits">1</span>
          
          <code class="ruby">        indent += &#39;  &#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">        # This method is recursive (indirectly) so file_content should find all BoM and include file strings</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="83">
          <span class="hits">1</span>
          
          <code class="ruby">        create_file_content(@obj, indent)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="84">
          <span class="hits">1</span>
          
          <code class="ruby">        @file_content.each do |file_type, str_hash|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="85">
          <span class="hits">2</span>
          
          <code class="ruby">          if file_type == :bom</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="86">
          <span class="hits">1</span>
          
          <code class="ruby">            str_hash.each do |_obj, str|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="87">
          <span class="hits">2</span>
          
          <code class="ruby">              bom_file.puts(str)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">          elsif file_type == :incl</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">            # Create the include file</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="91">
          <span class="hits">1</span>
          
          <code class="ruby">            File.open(@incl_path, &#39;w&#39;) do |incl_file|</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="92">
          <span class="hits">1</span>
          
          <code class="ruby">              str_hash.each do |_obj, str|</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="93">
          <span class="hits">4</span>
          
          <code class="ruby">                incl_file.puts(str)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="97">
          
          
          <code class="ruby">            Origen.log.error &#39;Incorrect key for @file_content instance variable Hash, must be :incl or :bom&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="100">
          <span class="hits">1</span>
          
          <code class="ruby">        if @obj.owns_registers?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="101">
          <span class="hits">1</span>
          
          <code class="ruby">          @obj.regs.each do |_reg_name, r|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="102">
          <span class="hits">2</span>
          
          <code class="ruby">            reg_path = r.path.gsub(/#{klass}./i, &#39;&#39;)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="103">
          <span class="hits">2</span>
          
          <code class="ruby">            reg_path.chop! if reg_path[-1] == &#39;.&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="104">
          <span class="hits">2</span>
          
          <code class="ruby">            r.description.each do |line|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="105">
          <span class="hits">2</span>
          
          <code class="ruby">              bom_file.puts(&quot;#{indent}# #{line}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="107">
          <span class="hits">2</span>
          
          <code class="ruby">            reg_string = &quot;#{indent}reg :#{r.name}, #{r.address.to_hex}, size: #{r.size}&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="108">
          <span class="hits">2</span>
          
          <code class="ruby">            if r.respond_to? :bit_order</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="109">
          
          
          <code class="ruby">              if r.bit_order.is_a?(String)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="110">
          
          
          <code class="ruby">                reg_string += &quot;, bit_order: &#39;#{r.bit_order}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">              elsif r.bit_order.is_a?(Symbol)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="112">
          
          
          <code class="ruby">                reg_string += &quot;, bit_order: :#{r.bit_order}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">              elsif r.bit_order.is_a?(NilClass)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">              # do not add bitorder if it is not available</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="116">
          
          
          <code class="ruby">                reg_string += &quot;, bit_order: #{r.bit_order}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="119">
          <span class="hits">2</span>
          
          <code class="ruby">            if r.respond_to? :space</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="120">
          
          
          <code class="ruby">              if r.space.is_a?(String)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="121">
          
          
          <code class="ruby">                reg_string += &quot;, space: &#39;#{r.space}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">              elsif r.space.is_a?(Symbol)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="123">
          
          
          <code class="ruby">                reg_string += &quot;, space: :#{r.space}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="125">
          
          
          <code class="ruby">                reg_string += &quot;, space: #{r.space}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="128">
          <span class="hits">2</span>
          
          <code class="ruby">            bom_file.puts(&quot;#{reg_string} do |reg|&quot;)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="129">
          <span class="hits">2</span>
          
          <code class="ruby">            indent += &#39;  &#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="130">
          <span class="hits">2</span>
          
          <code class="ruby">            r.named_bits do |field, bits|</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="131">
          <span class="hits">4</span>
          
          <code class="ruby">              if bits.size &gt; 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="132">
          
          
          <code class="ruby">                bit_index = &quot;#{bits.position}..#{bits.position + bits.size - 1}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="134">
          <span class="hits">4</span>
          
          <code class="ruby">                bit_index = bits.position.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="136">
          <span class="hits">4</span>
          
          <code class="ruby">              bits.description.each do |line|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="137">
          
          
          <code class="ruby">                bom_file.puts(&quot;#{indent}# #{line}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="139">
          <span class="hits">4</span>
          
          <code class="ruby">              bom_file.puts(&quot;#{indent}reg.bit #{bit_index}, :#{field}, reset: 0b#{bits.reset_val.to_s(2)}, access: :#{bits.access}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="141">
          <span class="hits">2</span>
          
          <code class="ruby">            indent = indent[0..-3]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="142">
          <span class="hits">2</span>
          
          <code class="ruby">            bom_file.puts(&quot;#{indent}end&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="145">
          <span class="hits">1</span>
          
          <code class="ruby">        indent = indent[0..-3]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="146">
          <span class="hits">1</span>
          
          <code class="ruby">        bom_file.puts(&quot;#{indent}end&quot;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="147">
          <span class="hits">1</span>
          
          <code class="ruby">        @top_level_hierarchy.each do |_name, _obj|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="148">
          <span class="hits">3</span>
          
          <code class="ruby">          indent = indent[0..-3]</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="149">
          <span class="hits">3</span>
          
          <code class="ruby">          bom_file.puts(&quot;#{indent}end&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">      # Give a newline on console to sepearate out the &#39;.&#39; used for progress indicator</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="153">
          <span class="hits">1</span>
          
          <code class="ruby">      puts</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">    # Create the bom string for the current object.  Recursive method until no more sub_blocks are found for the current object</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="157">
          <span class="hits">1</span>
          
          <code class="ruby">    def create_file_content(obj, indent)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="158">
          <span class="hits">1</span>
          
          <code class="ruby">      unless obj.respond_to?(:sub_blocks) &amp;&amp; obj.send(:sub_blocks)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="159">
          
          
          <code class="ruby">        Origen.log.warn &#39;Object argument does not have sub_blocks, ignoring it...&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="160">
          
          
          <code class="ruby">        return</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="161">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="162">
          <span class="hits">1</span>
          
          <code class="ruby">      obj.sub_blocks.each do |name, sb|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="163">
          <span class="hits">2</span>
          
          <code class="ruby">        @file_content[:bom][name] = &quot;#{indent}sub_block :#{name}&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="164">
          <span class="hits">2</span>
          
          <code class="ruby">        instance_vars_with_content(sb).each do |attr, value|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="165">
          <span class="hits">2</span>
          
          <code class="ruby">          if value.is_a?(String)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="166">
          
          
          <code class="ruby">            @file_content[:bom][name] += &quot;, #{attr}: &#39;#{value}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby">          elsif value.is_a?(Symbol)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="168">
          
          
          <code class="ruby">            @file_content[:bom][name] += &quot;, #{attr} = :#{value}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="170">
          <span class="hits">2</span>
          
          <code class="ruby">            if attr == :base_address</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="171">
          <span class="hits">2</span>
          
          <code class="ruby">              @file_content[:bom][name] += &quot;, #{attr}: #{value.to_hex}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="173">
          
          
          <code class="ruby">              @file_content[:bom][name] += &quot;, #{attr}: #{value}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="177">
          <span class="hits">2</span>
          
          <code class="ruby">        @file_content[:bom][name] += &quot;, abs_path: &#39;#{sb.path}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby">        # Add on the class_name attr as this is not part of the sub_block meta_model</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="179">
          <span class="hits">2</span>
          
          <code class="ruby">        class_name = sb.class.to_s.demodulize</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="180">
          <span class="hits">2</span>
          
          <code class="ruby">        if class_name == &#39;SubBlock&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="181">
          <span class="hits">1</span>
          
          <code class="ruby">          file_content[:bom][name] += &quot;, class_name: &#39;#{sb.name.upcase}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="183">
          <span class="hits">1</span>
          
          <code class="ruby">          file_content[:bom][name] += &quot;, class_name: &#39;#{class_name}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">        # Create the class file for this object</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="186">
          <span class="hits">2</span>
          
          <code class="ruby">        create_class_file(sb)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="190">
          <span class="hits">1</span>
          
          <code class="ruby">    def create_class_file(obj)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="191">
          <span class="hits">4</span>
          
          <code class="ruby">      ivars_content = {}</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="192">
          <span class="hits">4</span>
          
          <code class="ruby">      ivars_content = instance_vars_with_content(obj)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="193">
          <span class="hits">4</span>
          
          <code class="ruby">      indent = &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="194">
          <span class="hits">4</span>
          
          <code class="ruby">      klass = get_full_class(obj)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="195">
          <span class="hits">4</span>
          
          <code class="ruby">      class_path_addition = (klass.split(&#39;::&#39;) - @top_level_class.split(&#39;::&#39;)).join(&#39;/&#39;).downcase</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="196">
          <span class="hits">4</span>
          
          <code class="ruby">      @file_content[:incl][klass] = &quot;require_relative &#39;import/#{class_path_addition}&#39;&quot;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="197">
          <span class="hits">4</span>
          
          <code class="ruby">      class_file_name = Pathname.new(&quot;#{@incl_dir}/#{class_path_addition}.rb&quot;)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="198">
          <span class="hits">4</span>
          
          <code class="ruby">      class_file_dir = class_file_name.dirname</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="199">
          <span class="hits">4</span>
          
          <code class="ruby">      unless class_file_dir.exist?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="200">
          <span class="hits">1</span>
          
          <code class="ruby">        Origen.log.debug &quot;app: Directory #{class_file_dir} does not exist, creating it...&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="201">
          <span class="hits">1</span>
          
          <code class="ruby">        FileUtils.mkdir_p(class_file_dir)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="203">
          <span class="hits">4</span>
          
          <code class="ruby">      File.open(class_file_name, &#39;w&#39;) do |file|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">        # file.chmod(0555)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="205">
          <span class="hits">4</span>
          
          <code class="ruby">        file.puts(&#39;# -*- encoding : utf-8 -*-&#39;) if RUBY_VERSION &lt; &#39;2.0.0&#39;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="206">
          <span class="hits">4</span>
          
          <code class="ruby">        file.puts(FILE_COMMENTS[:class])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby">        # print out the top level object hierarchy</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="208">
          <span class="hits">4</span>
          
          <code class="ruby">        @top_level_hierarchy.each do |name, o|</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="209">
          <span class="hits">12</span>
          
          <code class="ruby">          file.puts(&quot;#{indent}#{o} #{name.split(&#39;::&#39;).last}&quot;)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="210">
          <span class="hits">12</span>
          
          <code class="ruby">          indent += &#39;  &#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">        # print out the current object&#39;s sub-hierarchy</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="213">
          <span class="hits">4</span>
          
          <code class="ruby">        sub_array = klass.split(&#39;::&#39;) - @top_level_class.split(&#39;::&#39;)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="214">
          <span class="hits">4</span>
          
          <code class="ruby">        object_type_array = %w(class) * sub_array.size</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="215">
          <span class="hits">4</span>
          
          <code class="ruby">        sub_hierarchy = Hash[sub_array.zip object_type_array]</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="216">
          <span class="hits">4</span>
          
          <code class="ruby">        sub_hierarchy.each do |name, o|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="217">
          <span class="hits">6</span>
          
          <code class="ruby">          if o == sub_hierarchy.values.last</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="218">
          <span class="hits">6</span>
          
          <code class="ruby">            file.puts(&quot;#{indent}#{o} #{name.split(&#39;::&#39;).last} # rubocop:disable ClassLength&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="220">
          
          
          <code class="ruby">            file.puts(&quot;#{indent}#{o} #{name.split(&#39;::&#39;).last}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="222">
          <span class="hits">6</span>
          
          <code class="ruby">          indent += &#39;  &#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="224">
          <span class="hits">4</span>
          
          <code class="ruby">        file.puts(&quot;#{indent}include Origen::Model&quot;)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="225">
          <span class="hits">4</span>
          
          <code class="ruby">        file.puts(&#39;&#39;)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="226">
          <span class="hits">4</span>
          
          <code class="ruby">        instance_vars_with_content(obj).each do |attr, _value|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="227">
          <span class="hits">6</span>
          
          <code class="ruby">          file.puts(&quot;#{indent}# #{SUB_BLOCK_ATTRS[attr]}&quot;)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="228">
          <span class="hits">6</span>
          
          <code class="ruby">          file.puts(&quot;#{indent}attr_reader :#{attr}&quot;)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="229">
          <span class="hits">6</span>
          
          <code class="ruby">          file.puts(&#39;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="231">
          <span class="hits">4</span>
          
          <code class="ruby">        file.puts(&quot;#{indent}def initialize(options = {})&quot;)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="232">
          <span class="hits">4</span>
          
          <code class="ruby">        indent += &#39;  &#39;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="233">
          <span class="hits">4</span>
          
          <code class="ruby">        instance_vars_with_content(obj).each do |attr, value|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="234">
          <span class="hits">6</span>
          
          <code class="ruby">          if value.is_a?(String)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="235">
          
          
          <code class="ruby">            file.puts(&quot;#{indent}\@#{attr} = &#39;#{value}&#39;&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">          elsif value.is_a?(Symbol)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="237">
          
          
          <code class="ruby">            file.puts(&quot;#{indent}\@#{attr} = :#{value}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="239">
          <span class="hits">6</span>
          
          <code class="ruby">            if attr == :base_address</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="240">
          <span class="hits">4</span>
          
          <code class="ruby">              file.puts(&quot;#{indent}\@#{attr} = #{value.to_hex}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="242">
          <span class="hits">2</span>
          
          <code class="ruby">              file.puts(&quot;#{indent}\@#{attr} = #{value}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby">        # If the current object has sub_block they need to be instantiated in the init</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="247">
          <span class="hits">4</span>
          
          <code class="ruby">        if obj.respond_to?(:sub_blocks)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="248">
          <span class="hits">4</span>
          
          <code class="ruby">          obj.sub_blocks.each do |n, block|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="249">
          <span class="hits">2</span>
          
          <code class="ruby">            bom_string = &quot;#{indent}sub_block :#{n}&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="250">
          <span class="hits">2</span>
          
          <code class="ruby">            instance_vars_with_content(block).each do |attr, value|</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="251">
          <span class="hits">4</span>
          
          <code class="ruby">              if value.is_a?(String)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="252">
          
          
          <code class="ruby">                bom_string += &quot;, #{attr}: &#39;#{value}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby">              elsif value.is_a?(Symbol)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="254">
          
          
          <code class="ruby">                bom_string += &quot;, #{attr}: :#{value}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="255">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="256">
          <span class="hits">4</span>
          
          <code class="ruby">                if attr == :base_address</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="257">
          <span class="hits">2</span>
          
          <code class="ruby">                  bom_string += &quot;, #{attr}: #{value.to_hex}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="259">
          <span class="hits">2</span>
          
          <code class="ruby">                  bom_string += &quot;, #{attr}: #{value}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="262">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="263">
          <span class="hits">2</span>
          
          <code class="ruby">            bom_string += &quot;, abs_path: &#39;#{block.path}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">            # Add on the class_name attr as this is not part of the sub_block meta_model</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="265">
          <span class="hits">2</span>
          
          <code class="ruby">            class_name = block.class.to_s.split(&#39;::&#39;).last</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="266">
          <span class="hits">2</span>
          
          <code class="ruby">            if class_name == &#39;SubBlock&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="267">
          <span class="hits">2</span>
          
          <code class="ruby">              bom_string += &quot;, class_name: &#39;#{block.name.upcase}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="268">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="269">
          
          
          <code class="ruby">              bom_string += &quot;, class_name: &#39;#{class_name}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="270">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="271">
          <span class="hits">2</span>
          
          <code class="ruby">            file.puts(bom_string)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="273">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="274">
          <span class="hits">4</span>
          
          <code class="ruby">        file.puts(&quot;#{indent}instantiate_registers(options)&quot;) if obj.owns_registers?</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="275">
          <span class="hits">4</span>
          
          <code class="ruby">        indent = indent[0..-3]</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="276">
          <span class="hits">4</span>
          
          <code class="ruby">        file.puts(&quot;#{indent}end&quot;)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="277">
          <span class="hits">4</span>
          
          <code class="ruby">        if obj.owns_registers?</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="278">
          <span class="hits">3</span>
          
          <code class="ruby">          file.puts(&#39;&#39;)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="279">
          <span class="hits">3</span>
          
          <code class="ruby">          file.puts(&quot;#{indent}# rubocop:disable LineLength&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="280">
          
          
          <code class="ruby">          # Need the register and bit_field descriptions to use double quotes</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="281">
          <span class="hits">3</span>
          
          <code class="ruby">          file.puts(&quot;#{indent}# rubocop:disable StringLiterals&quot;)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="282">
          <span class="hits">3</span>
          
          <code class="ruby">          file.puts(&quot;#{indent}def instantiate_registers(options = {}) # rubocop:disable MethodLength&quot;)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="283">
          <span class="hits">3</span>
          
          <code class="ruby">          indent += &#39;  &#39;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="284">
          <span class="hits">3</span>
          
          <code class="ruby">          obj.regs.each do |_reg_name, r|</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="285">
          <span class="hits">9</span>
          
          <code class="ruby">            reg_addr_offset = (r.address - obj.base_address).to_hex</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="286">
          <span class="hits">9</span>
          
          <code class="ruby">            reg_path = r.path.gsub(/#{klass}./i, &#39;&#39;)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="287">
          <span class="hits">9</span>
          
          <code class="ruby">            reg_path.chop! if reg_path[-1] == &#39;.&#39;</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="288">
          <span class="hits">9</span>
          
          <code class="ruby">            r.description.each do |line|</code>
        </li>
      
        <li class="covered" data-hits="75" data-linenumber="289">
          <span class="hits">75</span>
          
          <code class="ruby">              file.puts(&quot;#{indent}# #{line}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="291">
          <span class="hits">9</span>
          
          <code class="ruby">            reg_string = &quot;#{indent}reg :#{r.name}, #{reg_addr_offset}, size: #{r.size}&quot;</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="292">
          <span class="hits">9</span>
          
          <code class="ruby">            if r.respond_to? :bit_order</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="293">
          
          
          <code class="ruby">              if r.bit_order.is_a?(String)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="294">
          
          
          <code class="ruby">                reg_string += &quot;, bit_order: &#39;#{r.bit_order}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="295">
          
          
          <code class="ruby">              elsif r.bit_order.is_a?(Symbol)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="296">
          
          
          <code class="ruby">                reg_string += &quot;, bit_order: :#{r.bit_order}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="297">
          
          
          <code class="ruby">              elsif r.bit_order.is_a?(NilClass)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby">              # do not add bitorder if it is not available</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="300">
          
          
          <code class="ruby">                reg_string += &quot;, bit_order: #{r.bit_order}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="301">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="303">
          <span class="hits">9</span>
          
          <code class="ruby">            if r.respond_to? :space</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="304">
          
          
          <code class="ruby">              if r.space.is_a?(String)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="305">
          
          
          <code class="ruby">                reg_string += &quot;, space: &#39;#{r.space}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="306">
          
          
          <code class="ruby">              elsif r.space.is_a?(Symbol)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="307">
          
          
          <code class="ruby">                reg_string += &quot;, space: :#{r.space}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="308">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="309">
          
          
          <code class="ruby">                reg_string += &quot;, space: #{r.space}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="311">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="312">
          <span class="hits">9</span>
          
          <code class="ruby">            file.puts(&quot;#{reg_string} do |reg|&quot;)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="313">
          <span class="hits">9</span>
          
          <code class="ruby">            indent += &#39;  &#39;</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="314">
          <span class="hits">9</span>
          
          <code class="ruby">            r.named_bits do |field, bits|</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="315">
          <span class="hits">16</span>
          
          <code class="ruby">              plain_bit_description = Nokogiri::HTML(bits.description.join(&#39; &#39;).to_s).text</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="316">
          <span class="hits">16</span>
          
          <code class="ruby">              plain_bit_description.gsub!(/&quot;/, &quot;&#39;&quot;)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="317">
          <span class="hits">16</span>
          
          <code class="ruby">              if bits.size &gt; 1</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="318">
          <span class="hits">13</span>
          
          <code class="ruby">                bit_index = &quot;#{bits.position + bits.size - 1}..#{bits.position}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="320">
          <span class="hits">3</span>
          
          <code class="ruby">                bit_index = bits.position.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="321">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="322">
          <span class="hits">16</span>
          
          <code class="ruby">              bits.description.each do |line|</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="323">
          <span class="hits">5</span>
          
          <code class="ruby">                file.puts(&quot;#{indent}# #{line}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="324">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="325">
          <span class="hits">16</span>
          
          <code class="ruby">              file.puts(&quot;#{indent}reg.bit #{bit_index}, :#{field}, reset: 0b#{bits.reset_val.to_s(2)}, access: :#{bits.access}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="326">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="327">
          <span class="hits">9</span>
          
          <code class="ruby">            indent = indent[0..-3]</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="328">
          <span class="hits">9</span>
          
          <code class="ruby">            file.puts(&quot;#{indent}end&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="329">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="330">
          <span class="hits">3</span>
          
          <code class="ruby">          indent = indent[0..-3]</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="331">
          <span class="hits">3</span>
          
          <code class="ruby">          file.puts(&quot;#{indent}end&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="332">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="333">
          <span class="hits">4</span>
          
          <code class="ruby">        @top_level_hierarchy.each do |_name, _obj|</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="334">
          <span class="hits">12</span>
          
          <code class="ruby">          indent = indent[0..-3]</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="335">
          <span class="hits">12</span>
          
          <code class="ruby">          file.puts(&quot;#{indent}end&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="336">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="337">
          <span class="hits">4</span>
          
          <code class="ruby">        sub_hierarchy.each do |_name, _obj|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="338">
          <span class="hits">6</span>
          
          <code class="ruby">          indent = indent[0..-3]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="339">
          <span class="hits">6</span>
          
          <code class="ruby">          file.puts(&quot;#{indent}end&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="340">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="341">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="342">
          
          
          <code class="ruby">      # Place a &#39;.&#39; to the console to indicate file write progress to the user</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="343">
          <span class="hits">4</span>
          
          <code class="ruby">      print &#39;.&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="344">
          
          
          <code class="ruby">      # If the current obj has sub_blocks then write those class files</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="345">
          <span class="hits">4</span>
          
          <code class="ruby">      if obj.respond_to?(:sub_blocks) &amp;&amp; obj.send(:sub_blocks)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="346">
          <span class="hits">4</span>
          
          <code class="ruby">        obj.sub_blocks.each do |_name, sb|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="347">
          <span class="hits">2</span>
          
          <code class="ruby">          create_class_file(sb)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="348">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="349">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="350">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="351">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="352">
          
          
          <code class="ruby">    # Creates the class files for the sub_blocks instantiated in the BoM</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="353">
          <span class="hits">1</span>
          
          <code class="ruby">    def create_class_files</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="354">
          
          
          <code class="ruby">      indent = &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="355">
          
          
          <code class="ruby">      object_hierarchy = get_namespace(@obj)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="356">
          
          
          <code class="ruby">      klass = @obj.class.to_s.split(&#39;::&#39;).last</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="357">
          
          
          <code class="ruby">      File.open(@incl_path, &#39;w&#39;) do |incl_file|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="358">
          
          
          <code class="ruby">        incl_file.chmod(0555)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="359">
          
          
          <code class="ruby">        incl_file.puts(FILE_COMMENTS[:incl])</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="360">
          
          
          <code class="ruby">        @obj.sub_blocks.each do |_name, sb|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="361">
          
          
          <code class="ruby">          current_bist = nil</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="362">
          
          
          <code class="ruby">          bypass_addr = 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="363">
          
          
          <code class="ruby">          incl_file.puts(&quot;require_relative &#39;import/#{sb.name}.rb&#39;&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="364">
          
          
          <code class="ruby">          File.open(&quot;#{@incl_dir}/#{sb.name}.rb&quot;, &#39;w&#39;) do |file|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="365">
          
          
          <code class="ruby">            file.chmod(0555)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="366">
          
          
          <code class="ruby">            file.puts(&#39;# -*- encoding : utf-8 -*-&#39;) if RUBY_VERSION &lt; &#39;2.0.0&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="367">
          
          
          <code class="ruby">            file.puts(FILE_COMMENTS[:class])</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="368">
          
          
          <code class="ruby">            object_hierarchy.each do |name, obj|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="369">
          
          
          <code class="ruby">              file.puts(&quot;#{indent}#{obj} #{name.split(&#39;::&#39;).last}&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="370">
          
          
          <code class="ruby">              indent += &#39;  &#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="371">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="372">
          
          
          <code class="ruby">            file.puts(&quot;#{indent}class #{sb.name.upcase} # rubocop:disable ClassLength&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="373">
          
          
          <code class="ruby">            indent += &#39;  &#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="374">
          
          
          <code class="ruby">            file.puts(&quot;#{indent}include Origen::Model&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="375">
          
          
          <code class="ruby">            file.puts(&#39;&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="376">
          
          
          <code class="ruby">            SUB_BLOCK_ATTRS.each do |attr, comment|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="377">
          
          
          <code class="ruby">              attr_sym = &quot;:#{attr}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="378">
          
          
          <code class="ruby">              # First check that the attribute has content</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="379">
          
          
          <code class="ruby">              if sb.respond_to?(attr)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="380">
          
          
          <code class="ruby">                next if sb.send(eval(attr_sym)).nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="381">
          
          
          <code class="ruby">                file.puts(&quot;#{indent}# #{comment}&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="382">
          
          
          <code class="ruby">                file.puts(&quot;#{indent}attr_reader :#{attr}&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="383">
          
          
          <code class="ruby">                file.puts(&#39;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="384">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="385">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="386">
          
          
          <code class="ruby">            file.puts(&quot;#{indent}def initialize(options = {})&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="387">
          
          
          <code class="ruby">            indent += &#39;  &#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="388">
          
          
          <code class="ruby">            SUB_BLOCK_ATTRS.keys.each do |attr|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="389">
          
          
          <code class="ruby">              case attr</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="390">
          
          
          <code class="ruby">                when /base_address/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="391">
          
          
          <code class="ruby">                  attr_var = &quot;:@reg_#{attr}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="392">
          
          
          <code class="ruby">                  file.puts(&quot;#{indent}\@#{attr} = #{sb.instance_variable_get(eval(attr_var)).to_hex}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="393">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="394">
          
          
          <code class="ruby">                  attr_var = &quot;:@#{attr}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="395">
          
          
          <code class="ruby">                  attr_sym = &quot;:#{attr}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="396">
          
          
          <code class="ruby">                  # First check that the attribute has content</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="397">
          
          
          <code class="ruby">                  if sb.respond_to?(attr)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="398">
          
          
          <code class="ruby">                    next if sb.send(eval(attr_sym)).nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="399">
          
          
          <code class="ruby">                    if sb.instance_variable_get(eval(attr_var)).is_a?(String)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="400">
          
          
          <code class="ruby">                      file.puts(&quot;#{indent}\@#{attr} = &#39;#{sb.instance_variable_get(eval(attr_var))}&#39;&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="401">
          
          
          <code class="ruby">                    elsif sb.instance_variable_get(eval(attr_var)).is_a?(Symbol)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="402">
          
          
          <code class="ruby">                      file.puts(&quot;#{indent}\@#{attr} = :#{sb.instance_variable_get(eval(attr_var))}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="403">
          
          
          <code class="ruby">                    else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="404">
          
          
          <code class="ruby">                      file.puts(&quot;#{indent}\@#{attr} = #{sb.instance_variable_get(eval(attr_var))}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="405">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="406">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="407">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="408">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="409">
          
          
          <code class="ruby">            file.puts(&quot;#{indent}instantiate_registers(options)&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="410">
          
          
          <code class="ruby">            indent = indent[0..-3]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="411">
          
          
          <code class="ruby">            file.puts(&quot;#{indent}end&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="412">
          
          
          <code class="ruby">            file.puts(&#39;&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="413">
          
          
          <code class="ruby">            file.puts(&quot;#{indent}# rubocop:disable LineLength&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="414">
          
          
          <code class="ruby">            # Need the register and bit_field descriptions to use double quotes</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="415">
          
          
          <code class="ruby">            file.puts(&quot;#{indent}# rubocop:disable StringLiterals&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="416">
          
          
          <code class="ruby">            file.puts(&quot;#{indent}def instantiate_registers(options = {}) # rubocop:disable MethodLength&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="417">
          
          
          <code class="ruby">            indent += &#39;  &#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="418">
          
          
          <code class="ruby">            sb.regs.each do |_reg_name, r|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="419">
          
          
          <code class="ruby">              reg_addr_offset = (r.address - sb.base_address).to_hex</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="420">
          
          
          <code class="ruby">              reg_path = r.path.gsub(/#{klass}./i, &#39;&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="421">
          
          
          <code class="ruby">              reg_path.chop! if reg_path[-1] == &#39;.&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="422">
          
          
          <code class="ruby">              r.description.each do |line|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="423">
          
          
          <code class="ruby">                file.puts(&quot;#{indent}# #{line}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="424">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="425">
          
          
          <code class="ruby">              reg_string = &quot;#{indent}reg :#{r.name}, #{reg_addr_offset}, size: #{r.size}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="426">
          
          
          <code class="ruby">              if r.respond_to? :bit_order</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="427">
          
          
          <code class="ruby">                if r.bit_order.is_a?(String)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="428">
          
          
          <code class="ruby">                  reg_string += &quot;, bit_order: &#39;#{r.bit_order}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="429">
          
          
          <code class="ruby">                elsif r.bit_order.is_a?(Symbol)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="430">
          
          
          <code class="ruby">                  reg_string += &quot;, bit_order: :#{r.bit_order}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="431">
          
          
          <code class="ruby">                elsif r.bit_order.is_a?(NilClass)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="432">
          
          
          <code class="ruby">                  # do not add bitorder if it is not available</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="433">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="434">
          
          
          <code class="ruby">                  reg_string += &quot;, bit_order: #{r.bit_order}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="435">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="436">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="437">
          
          
          <code class="ruby">              if r.respond_to? :space</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="438">
          
          
          <code class="ruby">                if r.space.is_a?(String)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="439">
          
          
          <code class="ruby">                  reg_string += &quot;, space: &#39;#{r.space}&#39;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="440">
          
          
          <code class="ruby">                elsif r.space.is_a?(Symbol)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="441">
          
          
          <code class="ruby">                  reg_string += &quot;, space: :#{r.space}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="442">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="443">
          
          
          <code class="ruby">                  reg_string += &quot;, space: #{r.space}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="444">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="445">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="446">
          
          
          <code class="ruby">              file.puts(&quot;#{reg_string} do |reg|&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="447">
          
          
          <code class="ruby">              indent += &#39;  &#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="448">
          
          
          <code class="ruby">              r.named_bits do |field, bits|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="449">
          
          
          <code class="ruby">                plain_bit_description = Nokogiri::HTML(bits.description.join(&#39; &#39;).to_s).text</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="450">
          
          
          <code class="ruby">                plain_bit_description.gsub!(/&quot;/, &quot;&#39;&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="451">
          
          
          <code class="ruby">                if bits.size &gt; 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="452">
          
          
          <code class="ruby">                  bit_index = &quot;#{bits.position + bits.size - 1}..#{bits.position}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="453">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="454">
          
          
          <code class="ruby">                  bit_index = bits.position.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="455">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="456">
          
          
          <code class="ruby">                bits.description.each do |line|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="457">
          
          
          <code class="ruby">                  file.puts(&quot;#{indent}# #{line}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="458">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="459">
          
          
          <code class="ruby">                file.puts(&quot;#{indent}reg.bit #{bit_index}, :#{field}, reset: 0b#{bits.reset_val.to_s(2)}, access: :#{bits.access}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="460">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="461">
          
          
          <code class="ruby">              indent = indent[0..-3]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="462">
          
          
          <code class="ruby">              file.puts(&quot;#{indent}end&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="463">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="464">
          
          
          <code class="ruby">            indent = indent[0..-3]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="465">
          
          
          <code class="ruby">            file.puts(&quot;#{indent}end&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="466">
          
          
          <code class="ruby">            indent = indent[0..-3]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="467">
          
          
          <code class="ruby">            file.puts(&quot;#{indent}end&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="468">
          
          
          <code class="ruby">            object_hierarchy.each do |_name, _obj|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="469">
          
          
          <code class="ruby">              indent = indent[0..-3]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="470">
          
          
          <code class="ruby">              file.puts(&quot;#{indent}end&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="471">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="472">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="473">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="474">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="475">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="476">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="477">
          
          
          <code class="ruby">    # Returns a hash (key == scope, value is &#39;module&#39; or &#39;class&#39;) needed to</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="478">
          
          
          <code class="ruby">    # reconstruct the application hierarchy</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="479">
          <span class="hits">1</span>
          
          <code class="ruby">    def get_namespace(options)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="480">
          <span class="hits">1</span>
          
          <code class="ruby">      obj = options[:obj]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="481">
          <span class="hits">1</span>
          
          <code class="ruby">      namespace = []</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="482">
          <span class="hits">1</span>
          
          <code class="ruby">      object_hierarchy = {}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="483">
          <span class="hits">1</span>
          
          <code class="ruby">      namespace =  obj.class.to_s.split(&#39;::&#39;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="484">
          <span class="hits">1</span>
          
          <code class="ruby">      namespace.pop if options[:class_name]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="485">
          <span class="hits">1</span>
          
          <code class="ruby">      curr_eval = nil</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="486">
          <span class="hits">1</span>
          
          <code class="ruby">      scope = nil</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="487">
          <span class="hits">1</span>
          
          <code class="ruby">      namespace.each_with_index do |e, _i|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="488">
          <span class="hits">2</span>
          
          <code class="ruby">        scope.nil? ? scope = e : scope += &quot;::#{e}&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="489">
          <span class="hits">2</span>
          
          <code class="ruby">        curr_eval = &quot;#{scope}.class&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="490">
          <span class="hits">2</span>
          
          <code class="ruby">        object_hierarchy[&quot;#{scope}&quot;] = eval(curr_eval).to_s.downcase</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="491">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="492">
          <span class="hits">1</span>
          
          <code class="ruby">      if options[:class_name]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="493">
          <span class="hits">1</span>
          
          <code class="ruby">        if object_hierarchy.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="494">
          
          
          <code class="ruby">          object_hierarchy[options[:class_name]] = &#39;class&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="495">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="496">
          <span class="hits">1</span>
          
          <code class="ruby">          object_hierarchy[&quot;#{object_hierarchy.keys.last}::#{options[:class_name]}&quot;] = &#39;class&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="497">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="498">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="499">
          <span class="hits">1</span>
          
          <code class="ruby">      object_hierarchy</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="500">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="501">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="502">
          
          
          <code class="ruby">    # Returns a hash of all of the non-nil instance_variables for an instance</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="503">
          <span class="hits">1</span>
          
          <code class="ruby">    def instance_vars_with_content(obj)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="504">
          <span class="hits">16</span>
          
          <code class="ruby">      ivars_content = {}</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="505">
          <span class="hits">16</span>
          
          <code class="ruby">      obj.instance_variables.each do |ivar|</code>
        </li>
      
        <li class="covered" data-hits="248" data-linenumber="506">
          <span class="hits">248</span>
          
          <code class="ruby">        ivar_sym = ivar.to_s.gsub(&#39;@&#39;, &#39;&#39;).to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="507">
          
          
          <code class="ruby">        # Check for reg_base_address as method base_address refers to this instance variable</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="508">
          
          
          <code class="ruby">        # Could use reg_base_address but all docs show to use base_address in the sub_block calls</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="509">
          
          
          <code class="ruby">        # If not reg_base_address the ivar must be included in SUB_BLOCK_ATTRS</code>
        </li>
      
        <li class="covered" data-hits="248" data-linenumber="510">
          <span class="hits">248</span>
          
          <code class="ruby">        next unless ivar_sym == :reg_base_address || SUB_BLOCK_ATTRS.include?(ivar_sym)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="511">
          
          
          <code class="ruby">        # Skip the instance variable if it is nil</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="512">
          <span class="hits">40</span>
          
          <code class="ruby">        next if obj.send(ivar_sym).nil?</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="513">
          <span class="hits">24</span>
          
          <code class="ruby">        if ivar_sym == :reg_base_address</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="514">
          <span class="hits">16</span>
          
          <code class="ruby">          ivars_content[:base_address] = obj.send(ivar_sym)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="515">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="516">
          <span class="hits">8</span>
          
          <code class="ruby">          ivars_content[ivar_sym] = obj.send(ivar_sym)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="517">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="518">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="519">
          <span class="hits">16</span>
          
          <code class="ruby">      ivars_content</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="520">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="521">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="522">
          
          
          <code class="ruby">    # Recursively work through the object hierarchy and return the full class string</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="523">
          <span class="hits">1</span>
          
          <code class="ruby">    def get_full_class(obj)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="524">
          <span class="hits">4</span>
          
          <code class="ruby">      class_str = &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="525">
          <span class="hits">4</span>
          
          <code class="ruby">      until obj.nil?</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="526">
          <span class="hits">10</span>
          
          <code class="ruby">        if obj == Origen.top_level</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="527">
          <span class="hits">4</span>
          
          <code class="ruby">          class_str.prepend @top_level_hierarchy.keys.last</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="528">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="529">
          
          
          <code class="ruby">          # If the class method produces &quot;SubBlock&quot; then use the object name instead</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="530">
          <span class="hits">6</span>
          
          <code class="ruby">          if obj.class.to_s.split(&#39;::&#39;).last == &#39;SubBlock&#39;</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="531">
          <span class="hits">5</span>
          
          <code class="ruby">            class_str.prepend &quot;::#{obj.name.upcase}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="532">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="533">
          <span class="hits">1</span>
          
          <code class="ruby">            class_str.prepend &quot;::#{obj.class.to_s.split(&#39;::&#39;).last}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="534">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="535">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="536">
          <span class="hits">10</span>
          
          <code class="ruby">        obj = obj.parent</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="537">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="538">
          <span class="hits">4</span>
          
          <code class="ruby">      class_str</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="539">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="540">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="541">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="c7b538303da36e8b0652b69e08fcefb3728f0c48">
  <div class="header">
    <h3>lib/cross_origen/ralf.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>7</b> relevant lines. 
      <span class="green"><b>7</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module CrossOrigen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  class Ralf</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Returns the object that included the CrossOrigen module</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(owner)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      @owner = owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    # Returns a string representing the owner object in RALF format</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">    def owner_to_ralf(options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">      Origen.compile(&quot;#{Origen.root!}/templates/ralf/default.ralf.erb&quot;, options.merge(scope: owner))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="9a3421dbe6e431922a08363ea9e2497fa6f4bd8d">
  <div class="header">
    <h3>lib/cross_origen/test/dut.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>28</b> relevant lines. 
      <span class="green"><b>28</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module CrossOrigen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  module Test</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Simple DUT class used for testing</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    class DUT</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">      include Origen::TopLevel</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      include CrossOrigen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="9">
          <span class="hits">13</span>
          
          <code class="ruby">        @path = :hidden</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="10">
          <span class="hits">13</span>
          
          <code class="ruby">        sub_block :atx, class_name: &#39;D_IP_ANA_TEST_ANNEX_SYN&#39;, base_address: 0x4000_0000</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">        # Register defined solely to test out the top level register export</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="13">
          <span class="hits">13</span>
          
          <code class="ruby">        reg :dut_top_level_reg, 0x0, size: 32, bit_order: :msb0, lau: 8 do</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="14">
          <span class="hits">13</span>
          
          <code class="ruby">          bit 15, :pls_work, reset: 1, access: :rw</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="15">
          <span class="hits">13</span>
          
          <code class="ruby">          bit 14, :second_bit, reset: 0, access: :rw</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">        # Register defined solely to test out the top level register export</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="18">
          <span class="hits">13</span>
          
          <code class="ruby">        reg :dut_top_level_reg_number_two, 0x10, size: 32, bit_order: :lsb0, lau: 16 do</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="19">
          <span class="hits">13</span>
          
          <code class="ruby">          bit 0, :pls_work, reset: 0, access: :ro</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="20">
          <span class="hits">13</span>
          
          <code class="ruby">          bit 1, :second_bit, reset: 1, access: :rw</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">        # Import some data from IP-XACT</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="23">
          <span class="hits">13</span>
          
          <code class="ruby">        cr_import(path: &quot;#{Origen.root}/imports/ipxact.xml&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">      def add_atx2</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">        sub_block :atx2, class_name: &#39;ATX2&#39;, base_address: 0x6000_0000</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">      class ATX2</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">        include Origen::Model</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">        include CrossOrigen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">        def initialize</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">          cr_import(path: &quot;#{Origen.root}/approved/ip_xact_sub_block.xml&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">      class D_IP_ANA_TEST_ANNEX_SYN # rubocop:disable ClassAndModuleCamelCase</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="40">
          <span class="hits">1</span>
          
          <code class="ruby">        include Origen::Model</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">        include CrossOrigen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="43">
          <span class="hits">1</span>
          
          <code class="ruby">        def initialize</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">          # A manually defined register for testing the conversion of any specific attributes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">          # ** MGATE Clock Divider Register **</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">          # The MCLKDIV register is used to divide down the frequency of the HBOSCCLK input. If the MCLKDIV</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">          # register is set to value &quot;N&quot;, then the output (beat) frequency of the clock divider is OSCCLK / (N+1). The</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">          # resulting beats are, in turn, counted by the PTIMER module to control the duration of Flash high-voltage</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">          # operations.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">          # This is a test of potentially problematic characters &#39; &quot; \&#39; \&quot; &lt; &gt;</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="52">
          <span class="hits">13</span>
          
          <code class="ruby">          reg :mclkdiv, 0x0, size: 16, bit_order: &#39;decrement&#39; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">            # **Oscillator (Hi)** - Firmware FMU clk source selection. (Note that in addition to this firmware-controlled bit, the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">            # FMU clock source is also dependent on test and power control discretes).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">            #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">            # 0 | FMU clock is the externally supplied bus clock ipg_clk</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">            # 1 | FMU clock is the internal oscillator from the TFS hardblock</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="58">
          <span class="hits">13</span>
          
          <code class="ruby">            bit 15, :osch, reset: 1, access: :rw</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="91db8462c023ed0f75d0691014cdbdb2754f5730">
  <div class="header">
    <h3>lib/cross_origen/xml_doc.rb</h3>
    <h4><span class="yellow">84.68 %</span> covered</h4>
    <div>
      <b>111</b> relevant lines. 
      <span class="green"><b>94</b> lines covered</span> and
      <span class="red"><b>17</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;kramdown&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;sanitize&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">module CrossOrigen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">  # This is the base class of all doc formats that are</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">  # XML based</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">  class XMLDoc</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">    CreationInfo = Struct.new(:author, :date, :revision, :source)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">    ImportInfo = Struct.new(:name, :date)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :creation_info, :import_info</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">    # These (in many cases illegal) tags will be forced to their valid equivalents</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">    # These will be executed in the defined order, so for later xfrms you can for example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">    # assume that all &#39;rows&#39; have already been converted to &#39;tr&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">    # valid equivalents</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">    HTML_TRANSFORMS = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      &#39;table/title&#39;  =&gt; &#39;caption&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      &#39;table//row&#39;   =&gt; &#39;tr&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      &#39;thead//entry&#39; =&gt; &#39;th&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">      &#39;table//entry&#39; =&gt; &#39;td&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      &#39;td/p&#39;         =&gt; &#39;span&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      &#39;th/p&#39;         =&gt; &#39;span&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">    }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">    # This can be used to perform additional by-node transformation if required, normally</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">    # this should be used if transform of a node attribute is required</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">    HTML_TRANSFORMER = lambda do |env|</code>
        </li>
      
        <li class="covered" data-hits="449" data-linenumber="30">
          <span class="hits">449</span>
          
          <code class="ruby">      if env[:node_name] == &#39;td&#39; || env[:node_name] == &#39;th&#39;</code>
        </li>
      
        <li class="covered" data-hits="50" data-linenumber="31">
          <span class="hits">50</span>
          
          <code class="ruby">        if env[:node].attr(&#39;nameend&#39;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">          first = env[:node].attr(&#39;namest&#39;).sub(&#39;col&#39;, &#39;&#39;).to_i</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">          last = env[:node].attr(&#39;nameend&#39;).sub(&#39;col&#39;, &#39;&#39;).to_i</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">          env[:node].set_attribute(&#39;colspan&#39;, (last - first + 1).to_s)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">    # Defines the rules for sanitization of any HTML strings that will be converted</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">    # to markdown for representation within Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">    HTML_SANITIZATION_CONFIG = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      # Only these tags will be allowed through, everything else will be stripped</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">      # Note that this is applied after the transforms listed above</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      elements:     %w(b em i strong u p ul ol li table tr td th tbody thead),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">      attributes:   {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">        &#39;td&#39; =&gt; [&#39;colspan&#39;],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">        &#39;th&#39; =&gt; [&#39;colspan&#39;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">      },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      # Not planning to allow any of these right now, but keeping around</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      # as an example of how to do so</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      #:protocols =&gt; {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">      #  &#39;a&#39; =&gt; {&#39;href&#39; =&gt; [&#39;http&#39;, &#39;https&#39;, &#39;mailto&#39;]}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      # }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">      transformers: HTML_TRANSFORMER</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">    }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">    # Returns the object that included the CrossOrigen module</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="60">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(owner)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="61">
          <span class="hits">15</span>
          
          <code class="ruby">      @owner = owner</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="62">
          <span class="hits">15</span>
          
          <code class="ruby">      @creation_info = CreationInfo.new</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="63">
          <span class="hits">15</span>
          
          <code class="ruby">      @import_info = ImportInfo.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">    # Tries the given methods on the owner and returns the first one to return a value,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">    # ultimately returns nil if no value is found.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">    # To test an object other than the owner pass it as the first argument.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="70">
          <span class="hits">1</span>
          
          <code class="ruby">    def try(*methods)</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="71">
          <span class="hits">37</span>
          
          <code class="ruby">      if methods.first.is_a?(Symbol)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="72">
          <span class="hits">4</span>
          
          <code class="ruby">        obj = owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="74">
          <span class="hits">33</span>
          
          <code class="ruby">        obj = methods.shift</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="76">
          <span class="hits">37</span>
          
          <code class="ruby">      methods.each do |method|</code>
        </li>
      
        <li class="covered" data-hits="95" data-linenumber="77">
          <span class="hits">95</span>
          
          <code class="ruby">        if obj.respond_to?(method)</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="78">
          <span class="hits">37</span>
          
          <code class="ruby">          val = obj.send(method)</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="79">
          <span class="hits">37</span>
          
          <code class="ruby">          return val if val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">      nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">    # This returns the doc wrapped by a Nokogiri doc</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="86">
          <span class="hits">1</span>
          
          <code class="ruby">    def doc(path, _options = {})</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="87">
          <span class="hits">14</span>
          
          <code class="ruby">      require &#39;nokogiri&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="89">
          <span class="hits">14</span>
          
          <code class="ruby">      File.open(path) do |f|</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="90">
          <span class="hits">14</span>
          
          <code class="ruby">        yield Nokogiri::XML(f)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="94">
          <span class="hits">1</span>
          
          <code class="ruby">    def extract(element, path, options = {})</code>
        </li>
      
        <li class="covered" data-hits="420" data-linenumber="95">
          <span class="hits">420</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">        format:   :string,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">        hex:      false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">        default:  nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">        downcase: false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">        return:   :text,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">        # A value or array or values which are considered to be nil, if this is the value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">        # to be returned then nil will be returned instead</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">        nil_on:   false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="420" data-linenumber="105">
          <span class="hits">420</span>
          
          <code class="ruby">      node = element.at_xpath(path)</code>
        </li>
      
        <li class="covered" data-hits="420" data-linenumber="106">
          <span class="hits">420</span>
          
          <code class="ruby">      if node</code>
        </li>
      
        <li class="covered" data-hits="212" data-linenumber="107">
          <span class="hits">212</span>
          
          <code class="ruby">        if options[:format] == :string</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="108">
          <span class="hits">2</span>
          
          <code class="ruby">          str = node.send(options[:return]).strip</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="109">
          <span class="hits">2</span>
          
          <code class="ruby">          str = str.downcase if options[:downcase]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="110">
          <span class="hits">2</span>
          
          <code class="ruby">          if options[:nil_on] &amp;&amp; [options[:nil_on]].flatten.include?(str)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">            nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="113">
          <span class="hits">2</span>
          
          <code class="ruby">            str</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="210" data-linenumber="115">
          <span class="hits">210</span>
          
          <code class="ruby">        elsif options[:format] == :integer</code>
        </li>
      
        <li class="covered" data-hits="210" data-linenumber="116">
          <span class="hits">210</span>
          
          <code class="ruby">          val = node.send(options[:return])</code>
        </li>
      
        <li class="covered" data-hits="210" data-linenumber="117">
          <span class="hits">210</span>
          
          <code class="ruby">          if val =~ /^0x(.*)/</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="118">
          <span class="hits">2</span>
          
          <code class="ruby">            Regexp.last_match[1].to_i(16)</code>
        </li>
      
        <li class="covered" data-hits="208" data-linenumber="119">
          <span class="hits">208</span>
          
          <code class="ruby">          elsif options[:hex]</code>
        </li>
      
        <li class="covered" data-hits="208" data-linenumber="120">
          <span class="hits">208</span>
          
          <code class="ruby">            val.to_i(16)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="122">
          
          
          <code class="ruby">            val.to_i(10)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="125">
          
          
          <code class="ruby">          fail &quot;Unknown format: #{options[:format]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="208" data-linenumber="128">
          <span class="hits">208</span>
          
          <code class="ruby">        options[:default]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">    # Freescale register descriptions are like the wild west, need to do some pre-screening</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">    # to approach valid HTML before handing off to other off the shelf sanitizers</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="134">
          <span class="hits">1</span>
          
          <code class="ruby">    def pre_sanitize(html)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="135">
          <span class="hits">4</span>
          
          <code class="ruby">      html = Nokogiri::HTML.fragment(html)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="136">
          <span class="hits">4</span>
          
          <code class="ruby">      HTML_TRANSFORMS.each do |orig, new|</code>
        </li>
      
        <li class="covered" data-hits="108" data-linenumber="137">
          <span class="hits">108</span>
          
          <code class="ruby">        html.xpath(&quot;.//#{orig}&quot;).each { |node| node.name = new }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="139">
          <span class="hits">4</span>
          
          <code class="ruby">      html.to_html</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">    # Does its best to convert the given html fragment to markdown</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">    # The final markdown may still contain some HTML tags, but any weird</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">    # markup which may break a future markdown -&gt; html conversion will</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">    # be removed</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="147">
          <span class="hits">1</span>
          
          <code class="ruby">    def to_markdown(html, _options = {})</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="148">
          <span class="hits">4</span>
          
          <code class="ruby">      cleaned = html.scrub</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="149">
          <span class="hits">4</span>
          
          <code class="ruby">      cleaned = pre_sanitize(cleaned)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="150">
          <span class="hits">4</span>
          
          <code class="ruby">      cleaned = Sanitize.fragment(cleaned, HTML_SANITIZATION_CONFIG)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="151">
          <span class="hits">4</span>
          
          <code class="ruby">      Kramdown::Document.new(cleaned, input: :html).to_kramdown.strip</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">    rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="153">
          
          
          <code class="ruby">      &#39;The description could not be imported, the most likely cause of this is that it contained illegal HTML markup&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">    # Convert the given markdown string to HTML</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="157">
          <span class="hits">1</span>
          
          <code class="ruby">    def to_html(string, _options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">      # Escape any &quot; that are not already escaped</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="159">
          <span class="hits">2</span>
          
          <code class="ruby">      string.gsub!(/([^\\])&quot;/, &#39;\1\&quot;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">      # Escape any &#39; that are not already escaped</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="161">
          <span class="hits">2</span>
          
          <code class="ruby">      string.gsub!(/([^\\])&#39;/, %q(\1\\\&#39;))</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="162">
          <span class="hits">2</span>
          
          <code class="ruby">      html = Kramdown::Document.new(string, input: :kramdown).to_html</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby">    # fetch an XML snippet passed and extract and format the data</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="166">
          <span class="hits">1</span>
          
          <code class="ruby">    def fetch(xml, options = {})</code>
        </li>
      
        <li class="covered" data-hits="1837" data-linenumber="167">
          <span class="hits">1837</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">        type:          String,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">        downcase:      false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">        symbolize:     false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">        strip:         false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby">        squeeze:       false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">        squeeze_lines: false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby">        rm_specials:   false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">        whitespace:    false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby">        get_text:      false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby">        to_i:          false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby">        to_html:       false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">        to_bool:       false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby">        children:      false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby">        to_dec:        false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">        to_f:          false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">        underscore:    false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="1837" data-linenumber="185">
          <span class="hits">1837</span>
          
          <code class="ruby">      options[:symbolize] = options[:to_sym] if options[:to_sym]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">      # Check for incompatible options</code>
        </li>
      
        <li class="covered" data-hits="1837" data-linenumber="187">
          <span class="hits">1837</span>
          
          <code class="ruby">      xml_orig = xml</code>
        </li>
      
        <li class="covered" data-hits="1837" data-linenumber="188">
          <span class="hits">1837</span>
          
          <code class="ruby">      numeric_methods = [:to_i, :to_f, :to_dec]</code>
        </li>
      
        <li class="covered" data-hits="1837" data-linenumber="189">
          <span class="hits">1837</span>
          
          <code class="ruby">      if options[:get_text] == true &amp;&amp; options[:to_html] == true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="190">
          
          
          <code class="ruby">        fail &#39;Cannot use :get_text and :to_html options at the same time, exiting...&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1837" data-linenumber="192">
          <span class="hits">1837</span>
          
          <code class="ruby">      if options[:symbolize] == true</code>
        </li>
      
        <li class="covered" data-hits="1368" data-linenumber="193">
          <span class="hits">1368</span>
          
          <code class="ruby">        fail &#39;Cannot convert to a number of any type and symbolize at the same time&#39; if numeric_methods.reject { |arg| options[arg] == true }.size &lt; 3</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="7348" data-linenumber="195">
          <span class="hits">7348</span>
          
          <code class="ruby">      fail &#39;Cannot select multiple numeric conversion args at the same time&#39; if numeric_methods.reject { |arg| options[arg] == true }.size &lt; 2</code>
        </li>
      
        <li class="covered" data-hits="1837" data-linenumber="196">
          <span class="hits">1837</span>
          
          <code class="ruby">      if xml.nil?</code>
        </li>
      
        <li class="covered" data-hits="390" data-linenumber="197">
          <span class="hits">390</span>
          
          <code class="ruby">        Origen.log.debug &#39;XML data is nil!&#39;</code>
        </li>
      
        <li class="covered" data-hits="390" data-linenumber="198">
          <span class="hits">390</span>
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1447" data-linenumber="200">
          <span class="hits">1447</span>
          
          <code class="ruby">      xml = xml.text if options[:get_text] == true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby">      # Sometimes XML snippets get sent as nodes or as Strings</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">      # Must skip this code if a String as it is designed to change</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby">      # the XML node into a string</code>
        </li>
      
        <li class="covered" data-hits="1447" data-linenumber="204">
          <span class="hits">1447</span>
          
          <code class="ruby">      unless xml.is_a? String</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="205">
          
          
          <code class="ruby">        if options[:to_html] == true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="206">
          
          
          <code class="ruby">          if xml.children</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby">            # If there are children to this XMl node then grab the content there</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="208">
          
          
          <code class="ruby">            if xml.children.empty? || options[:children] == false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="209">
          
          
          <code class="ruby">              xml = xml.to_html</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="211">
          
          
          <code class="ruby">              xml = xml.children.to_html</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="215">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1447" data-linenumber="216">
          <span class="hits">1447</span>
          
          <code class="ruby">      unless xml.is_a? options[:type]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="217">
          
          
          <code class="ruby">        Origen.log.debug &quot;XML data is not of correct type &#39;#{options[:type]}&#39;&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="218">
          
          
          <code class="ruby">        Origen.log.debug &quot;xml is \n#{xml}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="219">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1447" data-linenumber="221">
          <span class="hits">1447</span>
          
          <code class="ruby">      if options[:type] == String</code>
        </li>
      
        <li class="covered" data-hits="1447" data-linenumber="222">
          <span class="hits">1447</span>
          
          <code class="ruby">        if xml.match(/\s+/) &amp;&amp; options[:whitespace] == false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="223">
          
          
          <code class="ruby">          Origen.log.debug &quot;XML data &#39;#{xml}&#39; cannot have white space&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="224">
          
          
          <code class="ruby">          return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1447" data-linenumber="226">
          <span class="hits">1447</span>
          
          <code class="ruby">        xml.downcase! if options[:downcase] == true</code>
        </li>
      
        <li class="covered" data-hits="1447" data-linenumber="227">
          <span class="hits">1447</span>
          
          <code class="ruby">        xml = xml.underscore if options[:underscore] == true</code>
        </li>
      
        <li class="covered" data-hits="1447" data-linenumber="228">
          <span class="hits">1447</span>
          
          <code class="ruby">        xml.strip! if options[:strip] == true</code>
        </li>
      
        <li class="covered" data-hits="1447" data-linenumber="229">
          <span class="hits">1447</span>
          
          <code class="ruby">        xml.squeeze!(&#39; &#39;) if options[:squeeze] == true</code>
        </li>
      
        <li class="covered" data-hits="1447" data-linenumber="230">
          <span class="hits">1447</span>
          
          <code class="ruby">        xml = xml.squeeze_lines if options[:squeeze_lines] == true</code>
        </li>
      
        <li class="covered" data-hits="1447" data-linenumber="231">
          <span class="hits">1447</span>
          
          <code class="ruby">        xml.gsub!(/[^0-9A-Za-z]/, &#39;_&#39;) if options[:rm_specials] == true</code>
        </li>
      
        <li class="covered" data-hits="1447" data-linenumber="232">
          <span class="hits">1447</span>
          
          <code class="ruby">        if options[:symbolize] == true</code>
        </li>
      
        <li class="covered" data-hits="342" data-linenumber="233">
          <span class="hits">342</span>
          
          <code class="ruby">          return xml.to_sym</code>
        </li>
      
        <li class="covered" data-hits="1105" data-linenumber="234">
          <span class="hits">1105</span>
          
          <code class="ruby">        elsif options[:to_i] == true</code>
        </li>
      
        <li class="covered" data-hits="524" data-linenumber="235">
          <span class="hits">524</span>
          
          <code class="ruby">          return xml.to_i</code>
        </li>
      
        <li class="covered" data-hits="581" data-linenumber="236">
          <span class="hits">581</span>
          
          <code class="ruby">        elsif options[:to_dec] == true</code>
        </li>
      
        <li class="covered" data-hits="369" data-linenumber="237">
          <span class="hits">369</span>
          
          <code class="ruby">          return xml.to_dec</code>
        </li>
      
        <li class="covered" data-hits="212" data-linenumber="238">
          <span class="hits">212</span>
          
          <code class="ruby">        elsif options[:to_f] == true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="239">
          
          
          <code class="ruby">          return xml.to_f</code>
        </li>
      
        <li class="covered" data-hits="212" data-linenumber="240">
          <span class="hits">212</span>
          
          <code class="ruby">        elsif [true, false].include?(xml.to_bool) &amp;&amp; options[:to_bool] == true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">          # If the string can convert to Boolean then return TrueClass or FalseClass</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="242">
          
          
          <code class="ruby">          return xml.to_bool</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="212" data-linenumber="244">
          <span class="hits">212</span>
          
          <code class="ruby">          return xml</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby">        # No real examples yet of non-string content</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="248">
          
          
          <code class="ruby">        return xml</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="251">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
      </div>
    </div>
  </body>
</html>
