<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Cross origen</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.10.2/application.js' type='text/javascript'></script>    
    <link href='./assets/0.10.2/application.css' media='screen, projection, print' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" type="image/png" href="./assets/0.10.2/favicon_red.png" />
    <link rel="icon" type="image/png" href="./assets/0.10.2/favicon.png" />
  </head>
  
  <body>
    <div id="loading">
      <img src="./assets/0.10.2/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" style="display:none;">
      <div class="timestamp">Generated <abbr class="timeago" title="2018-03-16T11:57:30+00:00">2018-03-16T11:57:30+00:00</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent"><span class="red">75.05%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         27.34
       </span>
    </span> hits/line)
  </h2>
  <a name="AllFiles"></a>
  <div>
    <b>8</b> files in total.
    <b>529</b> relevant lines. 
    <span class="green"><b>397</b> lines covered</span> and
    <span class="red"><b>132</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#9ec510400c27b8be7860749f5889b5d6a59f0b6b" class="src_link" title="lib/cross_origen.rb">lib/cross_origen.rb</a></td>
        <td class="yellow strong">85.48 %</td>
        <td>121</td>
        <td>62</td>
        <td>53</td>
        <td>9</td>
        <td>3.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#5c80fcae0e1e22e28b6e5d21ddb2303eda09ecc0" class="src_link" title="lib/cross_origen/cmsis_svd.rb">lib/cross_origen/cmsis_svd.rb</a></td>
        <td class="green strong">97.85 %</td>
        <td>155</td>
        <td>93</td>
        <td>91</td>
        <td>2</td>
        <td>39.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#0bd9c933097449897b013ae4d60198e8fd4f5ae6" class="src_link" title="lib/cross_origen/design_sync.rb">lib/cross_origen/design_sync.rb</a></td>
        <td class="red strong">26.67 %</td>
        <td>54</td>
        <td>30</td>
        <td>8</td>
        <td>22</td>
        <td>0.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#ce70f4f4b8d837a27fd2268fe827735811ef46ff" class="src_link" title="lib/cross_origen/headers.rb">lib/cross_origen/headers.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>21</td>
        <td>10</td>
        <td>10</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#33e6334167199897f91ea4fe9c85667fcb253780" class="src_link" title="lib/cross_origen/ip_xact.rb">lib/cross_origen/ip_xact.rb</a></td>
        <td class="red strong">59.79 %</td>
        <td>324</td>
        <td>189</td>
        <td>113</td>
        <td>76</td>
        <td>5.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#99a0583aea5f09b7135959e16a9a8a90cbdffd27" class="src_link" title="lib/cross_origen/ralf.rb">lib/cross_origen/ralf.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>15</td>
        <td>7</td>
        <td>7</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#85b7a135e365ddb56e82eb4da01de4917da11851" class="src_link" title="lib/cross_origen/xml_doc.rb">lib/cross_origen/xml_doc.rb</a></td>
        <td class="red strong">79.28 %</td>
        <td>252</td>
        <td>111</td>
        <td>88</td>
        <td>23</td>
        <td>84.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#b1c870e5d3be04159720126149db2deb71f5668b" class="src_link" title="lib/cross_origen_dev/dut.rb">lib/cross_origen_dev/dut.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>62</td>
        <td>27</td>
        <td>27</td>
        <td>0</td>
        <td>5.5</td>
      </tr>
      
    </tbody>
  </table>
</div>


        
      </div>
    
      <div id="footer">
        Generated by <a href="http://github.com/colszowka/simplecov">simplecov</a> v0.14.1 
        and simplecov-html v0.10.2<br/>
        using test
      </div>
    
      <div class="source_files">
      
        <div class="source_table" id="9ec510400c27b8be7860749f5889b5d6a59f0b6b">
  <div class="header">
    <h3>lib/cross_origen.rb</h3>
    <h4><span class="yellow">85.48 %</span> covered</h4>
    <div>
      <b>62</b> relevant lines. 
      <span class="green"><b>53</b> lines covered</span> and
      <span class="red"><b>9</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;origen&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">require_relative &#39;../config/application.rb&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">module CrossOrigen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">  autoload :XMLDoc,       &#39;cross_origen/xml_doc&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">  autoload :Headers,      &#39;cross_origen/headers&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">  autoload :Ralf,         &#39;cross_origen/ralf&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">  autoload :IpXact,       &#39;cross_origen/ip_xact&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">  autoload :DesignSync,   &#39;cross_origen/design_sync&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">  autoload :CMSISSVD,     &#39;cross_origen/cmsis_svd&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">  # Basic object that is used to capture imported data and then export/save</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">  # it to Origen format</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">  class Model</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">    include Origen::Model</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">  # Returns true if the --refresh switch was passed to the current Origen command</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">  def self.refresh?</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="20">
          <span class="hits">13</span>
          
          <code class="ruby">    @refresh || false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">  def self.include_timestamp?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="24">
          <span class="hits">2</span>
          
          <code class="ruby">    instance_variable_defined?(:@include_timestamp) ? @include_timestamp : true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">  def self.include_timestamp=(val)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="28">
          <span class="hits">15</span>
          
          <code class="ruby">    @include_timestamp = val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">  def instance_respond_to?(method_name)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="32">
          
          
          <code class="ruby">    public_methods.include?(method_name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_import(options = {})</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="36">
          <span class="hits">15</span>
          
          <code class="ruby">    options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      include_timestamp: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">    }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="39">
          <span class="hits">15</span>
          
          <code class="ruby">    CrossOrigen.include_timestamp = options[:include_timestamp]</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="40">
          <span class="hits">15</span>
          
          <code class="ruby">    file = cr_file(options)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="41">
          <span class="hits">15</span>
          
          <code class="ruby">    cr_translator(file, options).import(file, options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">  def to_ralf(options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="45">
          <span class="hits">1</span>
          
          <code class="ruby">    cr_ralf.owner_to_ralf(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="48">
          <span class="hits">1</span>
          
          <code class="ruby">  def to_ip_xact(options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="49">
          <span class="hits">2</span>
          
          <code class="ruby">    cr_ip_xact.owner_to_xml(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="51">
          <span class="hits">1</span>
          
          <code class="ruby">  alias_method :to_ipxact, :to_ip_xact</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="53">
          <span class="hits">1</span>
          
          <code class="ruby">  def to_header(options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="54">
          <span class="hits">1</span>
          
          <code class="ruby">    cr_headers.owner_to_header(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">  # Tries the given methods and returns the first one to return a value,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">  # ultimately returns nil if no value is found.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="59">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_try(*methods)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="60">
          <span class="hits">2</span>
          
          <code class="ruby">    methods.each do |method|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="61">
          <span class="hits">3</span>
          
          <code class="ruby">      if self.respond_to?(method)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="62">
          <span class="hits">2</span>
          
          <code class="ruby">        val = send(method)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="63">
          <span class="hits">2</span>
          
          <code class="ruby">        return val if val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">    nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">  # Returns an instance of the DesignSync interface</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="70">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_design_sync</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="71">
          
          
          <code class="ruby">    @cr_design_sync ||= DesignSync.new(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="74">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_headers</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="75">
          <span class="hits">1</span>
          
          <code class="ruby">    @cr_headers ||= Headers.new(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="78">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_ralf</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="79">
          <span class="hits">1</span>
          
          <code class="ruby">    @cr_ralf ||= Ralf.new(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="82">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_ip_xact</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="83">
          <span class="hits">16</span>
          
          <code class="ruby">    @cr_ip_xact ||= IpXact.new(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="86">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_cmsis_svd</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="87">
          <span class="hits">2</span>
          
          <code class="ruby">    @cr_cmsis_svd ||= CMSISSVD.new(self)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="90">
          <span class="hits">1</span>
          
          <code class="ruby">  private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">  # Returns an instance of the translator for the format of the given file</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="93">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_translator(file, options = {})</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="94">
          <span class="hits">15</span>
          
          <code class="ruby">    snippet = IO.read(file, 2000)  # Read first 2000 characters</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="95">
          <span class="hits">15</span>
          
          <code class="ruby">    case snippet</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">    when /spiritconsortium/</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="97">
          <span class="hits">13</span>
          
          <code class="ruby">      cr_ip_xact</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">    when /CMSIS-SVD.xsd/</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="99">
          <span class="hits">2</span>
          
          <code class="ruby">      cr_cmsis_svd</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">      # Give IP-XACT another opportunity if it looks like partial IP-XACT doc</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="102">
          
          
          <code class="ruby">      if snippet =~ /&lt;spirit:register&gt;/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="103">
          
          
          <code class="ruby">        options[:fragment] = true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="104">
          
          
          <code class="ruby">        cr_ip_xact</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="106">
          
          
          <code class="ruby">        fail &quot;Unknown file format for file: #{file}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">  # Returns a local path to the given file defined by the options.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="112">
          <span class="hits">1</span>
          
          <code class="ruby">  def cr_file(options = {})</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="113">
          <span class="hits">15</span>
          
          <code class="ruby">    if options[:path]</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="114">
          <span class="hits">15</span>
          
          <code class="ruby">      options[:path]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="115">
          
          
          <code class="ruby">    elsif options[:vault]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="116">
          
          
          <code class="ruby">      cr_design_sync.fetch(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="118">
          
          
          <code class="ruby">      fail &#39;You must supply a :path or :vault option pointing to the import file!&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="5c80fcae0e1e22e28b6e5d21ddb2303eda09ecc0">
  <div class="header">
    <h3>lib/cross_origen/cmsis_svd.rb</h3>
    <h4><span class="green">97.85 %</span> covered</h4>
    <div>
      <b>93</b> relevant lines. 
      <span class="green"><b>91</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module CrossOrigen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  class CMSISSVD &lt; XMLDoc</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    def import(file, options = {}) # rubocop:disable CyclomaticComplexity</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">      filename = Pathname.new(file).basename(&#39;.*&#39;).to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">      unless options[:refresh] || CrossOrigen.refresh?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="7">
          
          
          <code class="ruby">        return if owner.import(filename, allow_missing: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">      model = CrossOrigen::Model.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="12">
          <span class="hits">2</span>
          
          <code class="ruby">      doc(file, options) do |doc|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="13">
          <span class="hits">2</span>
          
          <code class="ruby">        peripherals = peripherals(doc)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="14">
          <span class="hits">8</span>
          
          <code class="ruby">        groups = peripherals.values.map { |v| v[:group] }.uniq</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="16">
          <span class="hits">4</span>
          
          <code class="ruby">        groups.each { |group| model.sub_block group }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">        peripherals.each do |name, attrs|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="19">
          <span class="hits">6</span>
          
          <code class="ruby">          base = attrs[:group] ? model.send(attrs[:group]) : model</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="20">
          <span class="hits">6</span>
          
          <code class="ruby">          block = base.sub_block name, base_address: attrs[:base_address]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="22">
          <span class="hits">6</span>
          
          <code class="ruby">          if attrs[:parent]</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="23">
          <span class="hits">4</span>
          
          <code class="ruby">            add_registers(block, find_peripheral_by_name(doc, attrs[:parent]))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="25">
          <span class="hits">6</span>
          
          <code class="ruby">          add_registers(block, find_peripheral_by_name(doc, name))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="28">
          <span class="hits">2</span>
          
          <code class="ruby">      model.export(filename, include_timestamp: CrossOrigen.include_timestamp?)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="29">
          <span class="hits">2</span>
          
          <code class="ruby">      owner.import(filename)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">    def add_registers(model, peripheral)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="35">
          <span class="hits">10</span>
          
          <code class="ruby">      peripheral.xpath(&#39;registers/register&#39;).each do |r|</code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="36">
          <span class="hits">48</span>
          
          <code class="ruby">        name = extract(r, &#39;name&#39;)</code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="37">
          <span class="hits">48</span>
          
          <code class="ruby">        di = extract(r, &#39;dim&#39;, format: :integer)</code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="38">
          <span class="hits">48</span>
          
          <code class="ruby">        dim = !!di</code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="39">
          <span class="hits">48</span>
          
          <code class="ruby">        if dim</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="40">
          <span class="hits">6</span>
          
          <code class="ruby">          dinc = extract(r, &#39;dimIncrement&#39;, format: :integer)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="41">
          <span class="hits">6</span>
          
          <code class="ruby">          dvals = extract(r, &#39;dimIndex&#39;).split(&#39;,&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="42" data-linenumber="43">
          <span class="hits">42</span>
          
          <code class="ruby">          di = 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="45">
          <span class="hits">48</span>
          
          <code class="ruby">        offset = extract(r, &#39;addressOffset&#39;, format: :integer, hex: true)</code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="46">
          <span class="hits">48</span>
          
          <code class="ruby">        size = extract(r, &#39;size&#39;, format: :integer)</code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="47">
          <span class="hits">48</span>
          
          <code class="ruby">        reset = extract(r, &#39;resetValue&#39;, format: :integer, hex: true)</code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="48">
          <span class="hits">48</span>
          
          <code class="ruby">        desc = (extract(r, &#39;description&#39;) || &#39;&#39;).gsub(&quot;&#39;&quot;, %q(\\\&#39;))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="48" data-linenumber="50">
          <span class="hits">48</span>
          
          <code class="ruby">        di.times do |i|</code>
        </li>
      
        <li class="covered" data-hits="66" data-linenumber="51">
          <span class="hits">66</span>
          
          <code class="ruby">          if dim</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="52">
          <span class="hits">24</span>
          
          <code class="ruby">            n = name.sub(&#39;[%s]&#39;, dvals[i])</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="53">
          <span class="hits">24</span>
          
          <code class="ruby">            addr = offset + (i * dinc)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="42" data-linenumber="55">
          <span class="hits">42</span>
          
          <code class="ruby">            n = name</code>
        </li>
      
        <li class="covered" data-hits="42" data-linenumber="56">
          <span class="hits">42</span>
          
          <code class="ruby">            addr = offset</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="66" data-linenumber="58">
          <span class="hits">66</span>
          
          <code class="ruby">          opts = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">            size:        size,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">            description: desc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">          }</code>
        </li>
      
        <li class="covered" data-hits="66" data-linenumber="62">
          <span class="hits">66</span>
          
          <code class="ruby">          opts[:reset] = reset if reset</code>
        </li>
      
        <li class="covered" data-hits="66" data-linenumber="63">
          <span class="hits">66</span>
          
          <code class="ruby">          reg_name = n.downcase.symbolize</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">          # The register could already exist if it was added by a parent peripheral definition and now it</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">          # is redefined/overridden by a descendent peripheral</code>
        </li>
      
        <li class="covered" data-hits="66" data-linenumber="66">
          <span class="hits">66</span>
          
          <code class="ruby">          model.del_reg(reg_name) if model.has_reg?(reg_name)</code>
        </li>
      
        <li class="covered" data-hits="66" data-linenumber="67">
          <span class="hits">66</span>
          
          <code class="ruby">          model.reg reg_name, addr, opts do |reg|</code>
        </li>
      
        <li class="covered" data-hits="66" data-linenumber="68">
          <span class="hits">66</span>
          
          <code class="ruby">            r.xpath(&#39;fields/field&#39;).each do |b|</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="69">
          <span class="hits">120</span>
          
          <code class="ruby">              bn = extract(b, &#39;name&#39;)</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="70">
          <span class="hits">120</span>
          
          <code class="ruby">              unless bn == &#39;RESERVED&#39;</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="71">
          <span class="hits">120</span>
          
          <code class="ruby">                bn = bn.to_s.downcase.symbolize</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="72">
          <span class="hits">120</span>
          
          <code class="ruby">                lsb = extract(b, &#39;lsb&#39;, format: :integer)</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="73">
          <span class="hits">120</span>
          
          <code class="ruby">                msb = extract(b, &#39;msb&#39;, format: :integer)</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="74">
          <span class="hits">120</span>
          
          <code class="ruby">                unless lsb</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="75">
          <span class="hits">120</span>
          
          <code class="ruby">                  lsb = extract(b, &#39;bitOffset&#39;, format: :integer)</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="76">
          <span class="hits">120</span>
          
          <code class="ruby">                  if lsb</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="77">
          
          
          <code class="ruby">                    msb = lsb + extract(b, &#39;msb&#39;, format: :integer) - 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="80">
          <span class="hits">120</span>
          
          <code class="ruby">                unless lsb</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="81">
          <span class="hits">120</span>
          
          <code class="ruby">                  range = extract(b, &#39;bitRange&#39;)</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="82">
          <span class="hits">120</span>
          
          <code class="ruby">                  range =~ /\[(\d+):(\d+)\]/</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="83">
          <span class="hits">120</span>
          
          <code class="ruby">                  lsb = Regexp.last_match(2).to_i</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="84">
          <span class="hits">120</span>
          
          <code class="ruby">                  msb = Regexp.last_match(1).to_i</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="86">
          <span class="hits">120</span>
          
          <code class="ruby">                access = extract(b, &#39;access&#39;)</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="87">
          <span class="hits">120</span>
          
          <code class="ruby">                desc = (extract(r, &#39;description&#39;) || &#39;&#39;).gsub(&quot;&#39;&quot;, %q(\\\&#39;))</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="88">
          <span class="hits">120</span>
          
          <code class="ruby">                case access</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">                when &#39;read-only&#39;</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="90">
          <span class="hits">18</span>
          
          <code class="ruby">                  ac = :ro</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="covered" data-hits="102" data-linenumber="92">
          <span class="hits">102</span>
          
          <code class="ruby">                  ac = :rw</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="covered" data-hits="120" data-linenumber="94">
          <span class="hits">120</span>
          
          <code class="ruby">                if lsb == msb</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="95">
          <span class="hits">60</span>
          
          <code class="ruby">                  reg.bit lsb, bn, access: ac, description: desc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">                else</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="97">
          <span class="hits">60</span>
          
          <code class="ruby">                  reg.bit msb..lsb, bn, access: ac, description: desc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="106">
          <span class="hits">1</span>
          
          <code class="ruby">    def find_peripheral_by_name(doc, pname)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="107">
          <span class="hits">10</span>
          
          <code class="ruby">      doc.xpath(&#39;device/peripherals/peripheral&#39;).find do |peripheral|</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="108">
          <span class="hits">16</span>
          
          <code class="ruby">        pname == name(peripheral)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="112">
          <span class="hits">1</span>
          
          <code class="ruby">    def clean_name(name)</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="113">
          <span class="hits">32</span>
          
          <code class="ruby">      name = name.to_s</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="114">
          <span class="hits">32</span>
          
          <code class="ruby">      unless name.empty?</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="115">
          <span class="hits">28</span>
          
          <code class="ruby">        name.downcase.symbolize</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="119">
          <span class="hits">1</span>
          
          <code class="ruby">    def name(peripheral)</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="120">
          <span class="hits">22</span>
          
          <code class="ruby">      clean_name(fetch(peripheral.xpath(&#39;name&#39;), get_text: true))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="123">
          <span class="hits">1</span>
          
          <code class="ruby">    def group_name(peripheral)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="124">
          <span class="hits">6</span>
          
          <code class="ruby">      clean_name(fetch(peripheral.xpath(&#39;groupName&#39;), get_text: true))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="127">
          <span class="hits">1</span>
          
          <code class="ruby">    def parent(peripheral)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="128">
          <span class="hits">6</span>
          
          <code class="ruby">      a = peripheral.attributes[&#39;derivedFrom&#39;]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="129">
          <span class="hits">6</span>
          
          <code class="ruby">      a ? clean_name(a.value) : nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="132">
          <span class="hits">1</span>
          
          <code class="ruby">    def base_address(peripheral)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="133">
          <span class="hits">6</span>
          
          <code class="ruby">      extract(peripheral, &#39;baseAddress&#39;, format: :integer, hex: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="136">
          <span class="hits">1</span>
          
          <code class="ruby">    def peripherals(doc)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="137">
          <span class="hits">2</span>
          
          <code class="ruby">      peripherals = {}</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="138">
          <span class="hits">2</span>
          
          <code class="ruby">      doc.xpath(&#39;device/peripherals/peripheral&#39;).each do |peripheral|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="139">
          <span class="hits">6</span>
          
          <code class="ruby">        peripherals[name(peripheral)] = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">          group:        group_name(peripheral),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">          parent:       parent(peripheral),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">          base_address: base_address(peripheral)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">        }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">      # Inherit missing values from parents...</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="146">
          <span class="hits">2</span>
          
          <code class="ruby">      p = {}</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="147">
          <span class="hits">2</span>
          
          <code class="ruby">      peripherals.each do |k, v|</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="148">
          <span class="hits">6</span>
          
          <code class="ruby">        v[:group] ||= peripherals[v[:parent]][:group]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="149">
          <span class="hits">6</span>
          
          <code class="ruby">        v[:base_address] ||= peripherals[v[:parent]][:base_address]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="150">
          <span class="hits">6</span>
          
          <code class="ruby">        p[k] = v</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="152">
          <span class="hits">2</span>
          
          <code class="ruby">      p</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="0bd9c933097449897b013ae4d60198e8fd4f5ae6">
  <div class="header">
    <h3>lib/cross_origen/design_sync.rb</h3>
    <h4><span class="red">26.67 %</span> covered</h4>
    <div>
      <b>30</b> relevant lines. 
      <span class="green"><b>8</b> lines covered</span> and
      <span class="red"><b>22</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module CrossOrigen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">  # Driver for talking to DesignSync</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">  class DesignSync</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    require &#39;digest/sha1&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">    # Returns the object that included the CrossOrigen module</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(owner)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="10">
          
          
          <code class="ruby">      @owner = owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">    def driver</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="14">
          
          
          <code class="ruby">      @driver ||= Origen::Utility::DesignSync.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">    # Returns a full path to the Design Sync import (cache) directory</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">    def import_dir</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="19">
          
          
          <code class="ruby">      return @import_dir if @import_dir</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="20">
          
          
          <code class="ruby">      @import_dir = &quot;#{Origen.app.workspace_manager.imports_directory}/design_sync&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="21">
          
          
          <code class="ruby">      FileUtils.mkdir_p(@import_dir) unless File.exist?(@import_dir)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="22">
          
          
          <code class="ruby">      @import_dir</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">    # This will be called if the user has supplied a :vault in the rs_import options. The corresponding</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">    # version of the file will be returned from the cache if it already exists locally, otherwise it</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">    # will be imported.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">    # This method returns a full path to the local cache copy of the file.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">    def fetch(options = {})</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="31">
          
          
          <code class="ruby">      unless options[:version]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="32">
          
          
          <code class="ruby">        puts &#39;You must supply a :version number (or tag) when importing data from Design Sync&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="33">
          
          
          <code class="ruby">        exit 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="35">
          
          
          <code class="ruby">      v = options[:vault]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="36">
          
          
          <code class="ruby">      f = v.split(&#39;/&#39;).last</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">      vault = v.sub(/\/#{f}$/, &#39;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">      # Consider that similarly named files could exist in different vaults, so attach</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">      # a representation of the vault to the filename</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="40">
          
          
          <code class="ruby">      vault_hash = Digest::SHA1.hexdigest(vault)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="41">
          
          
          <code class="ruby">      dir = &quot;#{import_dir}/#{vault_hash}-#{f}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="42">
          
          
          <code class="ruby">      file = &quot;#{dir}/#{options[:version]}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="43">
          
          
          <code class="ruby">      if f =~ /.*\.(.*)/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="44">
          
          
          <code class="ruby">        file += &quot;.#{Regexp.last_match[1]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="46">
          
          
          <code class="ruby">      if !File.exist?(file) || options[:force]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="47">
          
          
          <code class="ruby">        FileUtils.mkdir_p(dir) unless File.exist?(dir)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="48">
          
          
          <code class="ruby">        driver.import(f, vault, options[:version], dir)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="49">
          
          
          <code class="ruby">        FileUtils.mv(&quot;#{dir}/#{f}&quot;, file)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="51">
          
          
          <code class="ruby">      file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="ce70f4f4b8d837a27fd2268fe827735811ef46ff">
  <div class="header">
    <h3>lib/cross_origen/headers.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>10</b> relevant lines. 
      <span class="green"><b>10</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module CrossOrigen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  class Headers</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Returns the object that included the CrossOrigen module</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(owner)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      @owner = owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    # Returns a string representing the owner as a C header</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">    def owner_to_header(_options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">      Origen.compile(&quot;#{path_to_templates}/headers/default.h.erb&quot;, scope: owner)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">    def path_to_templates</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">      &quot;#{File.expand_path(File.dirname(__FILE__))}/../../templates&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="33e6334167199897f91ea4fe9c85667fcb253780">
  <div class="header">
    <h3>lib/cross_origen/ip_xact.rb</h3>
    <h4><span class="red">59.79 %</span> covered</h4>
    <div>
      <b>189</b> relevant lines. 
      <span class="green"><b>113</b> lines covered</span> and
      <span class="red"><b>76</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module CrossOrigen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  class IpXact &lt; XMLDoc</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    AddressSpace = Struct.new(:name, :range, :width)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">    MemoryMaps = Struct.new(:name, :address_blocks)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">    AddressBlock = Struct.new(:name, :base_address, :range, :width)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">    # Import/reader that currently only supports creating registers and bit fields</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">    def import(file, options = {}) # rubocop:disable CyclomaticComplexity</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="11">
          <span class="hits">13</span>
          
          <code class="ruby">      require &#39;kramdown&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="13">
          <span class="hits">13</span>
          
          <code class="ruby">      filename = Pathname.new(file).basename(&#39;.*&#39;).to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="15">
          <span class="hits">13</span>
          
          <code class="ruby">      unless options[:refresh] || CrossOrigen.refresh?</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="16">
          <span class="hits">13</span>
          
          <code class="ruby">        return if owner.import(filename, allow_missing: true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="19">
          
          
          <code class="ruby">      model = CrossOrigen::Model.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="21">
          
          
          <code class="ruby">      address_spaces = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="23">
          
          
          <code class="ruby">      doc(file, options) do |doc|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="24">
          
          
          <code class="ruby">        doc.xpath(&#39;//spirit:addressSpaces/spirit:addressSpace&#39;).each do |addr_space|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="25">
          
          
          <code class="ruby">          name = fetch addr_space.at_xpath(&#39;spirit:name&#39;), downcase: true, to_sym: true, get_text: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="26">
          
          
          <code class="ruby">          range = fetch addr_space.at_xpath(&#39;spirit:range&#39;), get_text: true, to_dec: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="27">
          
          
          <code class="ruby">          width = fetch addr_space.at_xpath(&#39;spirit:width&#39;), get_text: true, to_i: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="28">
          
          
          <code class="ruby">          address_spaces[name] = AddressSpace.new(name, range, width)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="30">
          
          
          <code class="ruby">        open_memory_map(doc) do |mem_map|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="31">
          
          
          <code class="ruby">          if mem_map</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="32">
          
          
          <code class="ruby">            mem_map_name = fetch mem_map.at_xpath(&#39;spirit:name&#39;), downcase: true, to_sym: true, get_text: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="33">
          
          
          <code class="ruby">            if mem_map_name.to_s.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="34">
          
          
          <code class="ruby">              mem_map_obj = model</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="36">
          
          
          <code class="ruby">              model.sub_block mem_map_name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">              mem_map_obj = model.send(mem_map_name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="39">
          
          
          <code class="ruby">            addr_blocks = mem_map.xpath(&#39;spirit:addressBlock&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="41">
          
          
          <code class="ruby">            mem_map_obj = model</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="42">
          
          
          <code class="ruby">            addr_blocks = doc.xpath(&#39;//spirit:addressBlock&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="44">
          
          
          <code class="ruby">          addr_blocks.each do |addr_block|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="45">
          
          
          <code class="ruby">            name = fetch addr_block.at_xpath(&#39;spirit:name&#39;), downcase: true, to_sym: true, get_text: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="46">
          
          
          <code class="ruby">            base_address = fetch addr_block.at_xpath(&#39;spirit:baseAddress&#39;), get_text: true, to_dec: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="47">
          
          
          <code class="ruby">            range = fetch addr_block.at_xpath(&#39;spirit:range&#39;), get_text: true, to_dec: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="48">
          
          
          <code class="ruby">            width = fetch addr_block.at_xpath(&#39;spirit:width&#39;), get_text: true, to_i: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="49">
          
          
          <code class="ruby">            if name.to_s.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="50">
          
          
          <code class="ruby">              addr_block_obj = mem_map_obj</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="52">
          
          
          <code class="ruby">              mem_map_obj.sub_block name, base_address: base_address, range: range, lau: width</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="53">
          
          
          <code class="ruby">              addr_block_obj = mem_map_obj.send(name)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="55">
          
          
          <code class="ruby">            addr_block.xpath(&#39;spirit:register&#39;).each do |register|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="56">
          
          
          <code class="ruby">              name = fetch register.at_xpath(&#39;spirit:name&#39;), downcase: true, to_sym: true, get_text: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="57">
          
          
          <code class="ruby">              size = fetch register.at_xpath(&#39;spirit:size&#39;), get_text: true, to_i: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="58">
          
          
          <code class="ruby">              addr_offset = fetch register.at_xpath(&#39;spirit:addressOffset&#39;), get_text: true, to_dec: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="59">
          
          
          <code class="ruby">              access = fetch register.at_xpath(&#39;spirit:access&#39;), get_text: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="60">
          
          
          <code class="ruby">              reset_value = fetch register.at_xpath(&#39;spirit:reset/spirit:value&#39;), get_text: true, to_dec: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="61">
          
          
          <code class="ruby">              reset_mask = fetch register.at_xpath(&#39;spirit:reset/spirit:mask&#39;), get_text: true, to_dec: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="62">
          
          
          <code class="ruby">              if [reset_value, reset_mask].include? nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">                # Set default values for some register attributes</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="64">
          
          
          <code class="ruby">                reset_value, reset_mask = 0, 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">              else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">                # Do a logical bitwise AND with the reset value and mask</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="67">
          
          
          <code class="ruby">                reset_value = reset_value &amp; reset_mask</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="69">
          
          
          <code class="ruby">              addr_block_obj.reg name, addr_offset, size: size, access: access, description: reg_description(register) do |reg|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="70">
          
          
          <code class="ruby">                register.xpath(&#39;spirit:field&#39;).each do |field|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="71">
          
          
          <code class="ruby">                  name = fetch field.at_xpath(&#39;spirit:name&#39;), downcase: true, to_sym: true, get_text: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="72">
          
          
          <code class="ruby">                  bit_offset = fetch field.at_xpath(&#39;spirit:bitOffset&#39;), get_text: true, to_i: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="73">
          
          
          <code class="ruby">                  bit_width = fetch field.at_xpath(&#39;spirit:bitWidth&#39;), get_text: true, to_i: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="74">
          
          
          <code class="ruby">                  access = fetch field.at_xpath(&#39;spirit:access&#39;), get_text: true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="75">
          
          
          <code class="ruby">                  if access =~ /\S+\-\S+/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="76">
          
          
          <code class="ruby">                    access = access[/^(\S)/, 1] + access[/\-(\S)\S+$/, 1]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="77">
          
          
          <code class="ruby">                    access = access.downcase.to_sym</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">                  else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">                    # default to read-write if access is not specified</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="80">
          
          
          <code class="ruby">                    access = :rw</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="82">
          
          
          <code class="ruby">                  range = nil</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="83">
          
          
          <code class="ruby">                  if bit_width == 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="84">
          
          
          <code class="ruby">                    range = bit_offset</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">                  else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="86">
          
          
          <code class="ruby">                    range = (bit_offset + bit_width - 1)..bit_offset</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="88">
          
          
          <code class="ruby">                  reg.bit range, name, reset: reset_value[range], access: access, description: bit_description(field)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="95">
          
          
          <code class="ruby">      model.export(filename, include_timestamp: CrossOrigen.include_timestamp?)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="96">
          
          
          <code class="ruby">      owner.import(filename)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="99">
          <span class="hits">1</span>
          
          <code class="ruby">    def doc(path, options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">      # If a fragment of IP-XACT is given, then wrap it with a valid header and we will try our best</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="101">
          
          
          <code class="ruby">      if options[:fragment]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="102">
          
          
          <code class="ruby">        require &#39;nokogiri&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="104">
          
          
          <code class="ruby">        content = %(</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">&lt;?xml version=&quot;1.0&quot;?&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">&lt;spirit:component xmlns:spirit=&quot;http://www.spiritconsortium.org/XMLSchema/SPIRIT/1.4&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">xsi:schemaLocation=&quot;$REGMEM_HOME/builder/ipxact/schema/ipxact</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">          $REGMEM_HOME/builder/ipxact/schema/ipxact/index.xsd&quot;&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">        #{File.read(path)}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">&lt;/spirit:component&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">        )</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="113">
          
          
          <code class="ruby">        yield Nokogiri::XML(content)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="115">
          
          
          <code class="ruby">        super</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">    # Returns a string representing the owner object in IP-XACT XML</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="120">
          <span class="hits">1</span>
          
          <code class="ruby">    def owner_to_xml(options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="121">
          <span class="hits">2</span>
          
          <code class="ruby">      require &#39;nokogiri&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="123">
          <span class="hits">2</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">        include_bit_field_values: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="127">
          <span class="hits">2</span>
          
          <code class="ruby">      @format = options[:format]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="129">
          <span class="hits">2</span>
          
          <code class="ruby">      schemas = [</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">        &#39;http://www.spiritconsortium.org/XMLSchema/SPIRIT/1.4&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">        &#39;http://www.spiritconsortium.org/XMLSchema/SPIRIT/1.4/index.xsd&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">      ]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="133">
          <span class="hits">2</span>
          
          <code class="ruby">      if uvm?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="134">
          <span class="hits">1</span>
          
          <code class="ruby">        schemas &lt;&lt; &#39;$IREG_GEN/XMLSchema/SPIRIT/VendorExtensions.xsd&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="137">
          <span class="hits">2</span>
          
          <code class="ruby">      headers = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">        &#39;xmlns:spirit&#39;       =&gt; &#39;http://www.spiritconsortium.org/XMLSchema/SPIRIT/1.4&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">        &#39;xmlns:xsi&#39;          =&gt; &#39;http://www.w3.org/2001/XMLSchema-instance&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">        &#39;xsi:schemaLocation&#39; =&gt; schemas.join(&#39; &#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">      }</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="142">
          <span class="hits">2</span>
          
          <code class="ruby">      if uvm?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="143">
          <span class="hits">1</span>
          
          <code class="ruby">        headers[&#39;xmlns:vendorExtensions&#39;] = &#39;$IREG_GEN/XMLSchema/SPIRIT&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="146">
          <span class="hits">2</span>
          
          <code class="ruby">      builder = Nokogiri::XML::Builder.new(encoding: &#39;UTF-8&#39;) do |xml|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="147">
          <span class="hits">2</span>
          
          <code class="ruby">        spirit = xml[&#39;spirit&#39;]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="148">
          <span class="hits">2</span>
          
          <code class="ruby">        spirit.component(headers) do</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="149">
          <span class="hits">2</span>
          
          <code class="ruby">          spirit.vendor options[:vendor] || &#39;Origen&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="150">
          <span class="hits">2</span>
          
          <code class="ruby">          spirit.library options[:library] || &#39;Origen&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">          # I guess this should really be the register owner&#39;s owner&#39;s name?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="152">
          <span class="hits">2</span>
          
          <code class="ruby">          spirit.name try(:ip_name) || owner.class.to_s.split(&#39;::&#39;).last</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="153">
          <span class="hits">2</span>
          
          <code class="ruby">          spirit.version try(:ip_version, :version, :revision)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="154">
          <span class="hits">2</span>
          
          <code class="ruby">          spirit.memoryMaps do</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="155">
          <span class="hits">2</span>
          
          <code class="ruby">            memory_maps.each do |map_name, _map|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="156">
          <span class="hits">2</span>
          
          <code class="ruby">              spirit.memoryMap do</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="157">
          <span class="hits">2</span>
          
          <code class="ruby">                spirit.name map_name</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="158">
          <span class="hits">2</span>
          
          <code class="ruby">                address_blocks do |domain_name, _domain, sub_block|</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="159">
          <span class="hits">5</span>
          
          <code class="ruby">                  spirit.addressBlock do</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="160">
          <span class="hits">5</span>
          
          <code class="ruby">                    if sub_block == owner</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="161">
          <span class="hits">2</span>
          
          <code class="ruby">                      spirit.name nil</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="162">
          <span class="hits">2</span>
          
          <code class="ruby">                      spirit.baseAddress 0.to_hex</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">                    else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="164">
          <span class="hits">3</span>
          
          <code class="ruby">                      spirit.name address_block_name(domain_name, sub_block)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="165">
          <span class="hits">3</span>
          
          <code class="ruby">                      spirit.baseAddress sub_block.base_address.to_hex</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="167">
          <span class="hits">5</span>
          
          <code class="ruby">                    spirit.range range(sub_block)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="168">
          <span class="hits">5</span>
          
          <code class="ruby">                    spirit.width width(sub_block)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="169">
          <span class="hits">5</span>
          
          <code class="ruby">                    sub_block.regs.each do |name, reg|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">                      # Required for now to ensure that the current value is the reset value</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="171">
          <span class="hits">12</span>
          
          <code class="ruby">                      reg.reset</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="172">
          <span class="hits">12</span>
          
          <code class="ruby">                      spirit.register do</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="173">
          <span class="hits">12</span>
          
          <code class="ruby">                        spirit.name name</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="174">
          <span class="hits">12</span>
          
          <code class="ruby">                        spirit.description try(reg, :name_full, :full_name)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="175">
          <span class="hits">12</span>
          
          <code class="ruby">                        spirit.addressOffset reg.offset.to_hex</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="176">
          <span class="hits">12</span>
          
          <code class="ruby">                        spirit.size reg.size</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="177">
          <span class="hits">12</span>
          
          <code class="ruby">                        if reg.bits.any?(&amp;:writable?)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="178">
          <span class="hits">10</span>
          
          <code class="ruby">                          spirit.access &#39;read-write&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">                        else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="180">
          <span class="hits">2</span>
          
          <code class="ruby">                          spirit.access &#39;read-only&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby">                        end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="182">
          <span class="hits">12</span>
          
          <code class="ruby">                        spirit.reset do</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="183">
          <span class="hits">12</span>
          
          <code class="ruby">                          spirit.value reg.data.to_hex</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="184">
          <span class="hits">12</span>
          
          <code class="ruby">                          spirit.mask mask(reg).to_hex</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">                        end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="186">
          <span class="hits">12</span>
          
          <code class="ruby">                        reg.named_bits do |name, bits|</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="187">
          <span class="hits">21</span>
          
          <code class="ruby">                          spirit.field do</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="188">
          <span class="hits">21</span>
          
          <code class="ruby">                            spirit.name name</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="189">
          <span class="hits">21</span>
          
          <code class="ruby">                            spirit.description try(bits, :brief_description, :name_full, :full_name)</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="190">
          <span class="hits">21</span>
          
          <code class="ruby">                            spirit.bitOffset bits.position</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="191">
          <span class="hits">21</span>
          
          <code class="ruby">                            spirit.bitWidth bits.size</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="192">
          <span class="hits">21</span>
          
          <code class="ruby">                            spirit.access bits.access</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="193">
          <span class="hits">21</span>
          
          <code class="ruby">                            if options[:include_bit_field_values]</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="194">
          <span class="hits">21</span>
          
          <code class="ruby">                              if bits.bit_value_descriptions[0]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="195">
          <span class="hits">2</span>
          
          <code class="ruby">                                bits.bit_value_descriptions.each do |val, desc|</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="196">
          <span class="hits">4</span>
          
          <code class="ruby">                                  spirit.values do</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="197">
          <span class="hits">4</span>
          
          <code class="ruby">                                    spirit.value val.to_hex</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="198">
          <span class="hits">4</span>
          
          <code class="ruby">                                    spirit.name &quot;val_#{val.to_hex}&quot;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="199">
          <span class="hits">4</span>
          
          <code class="ruby">                                    spirit.description desc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">                                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby">                                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">                              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby">                            end</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="204">
          <span class="hits">21</span>
          
          <code class="ruby">                            if uvm?</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="205">
          <span class="hits">20</span>
          
          <code class="ruby">                              spirit.vendorExtensions do</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="206">
          <span class="hits">20</span>
          
          <code class="ruby">                                xml[&#39;vendorExtensions&#39;].hdl_path bits.path(relative_to: sub_block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby">                              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="208">
          
          
          <code class="ruby">                            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby">                          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby">                        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">                      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="213">
          <span class="hits">5</span>
          
          <code class="ruby">                    if uvm?</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="214">
          <span class="hits">4</span>
          
          <code class="ruby">                      spirit.vendorExtensions do</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="215">
          <span class="hits">4</span>
          
          <code class="ruby">                        xml[&#39;vendorExtensions&#39;].hdl_path sub_block.path(relative_to: owner)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="216">
          
          
          <code class="ruby">                      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">                    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby">                  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="225">
          <span class="hits">2</span>
          
          <code class="ruby">      builder.to_xml</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="226">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="228">
          <span class="hits">1</span>
          
          <code class="ruby">    private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="230">
          <span class="hits">1</span>
          
          <code class="ruby">    def open_memory_map(doc)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="231">
          
          
          <code class="ruby">      maps = doc.xpath(&#39;//spirit:memoryMaps/spirit:memoryMap&#39;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="232">
          
          
          <code class="ruby">      maps = [nil] if maps.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="233">
          
          
          <code class="ruby">      maps.each do |mem_map|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="234">
          
          
          <code class="ruby">        yield mem_map</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="238">
          <span class="hits">1</span>
          
          <code class="ruby">    def reg_description(register)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="239">
          
          
          <code class="ruby">      fetch register.at_xpath(&#39;spirit:description&#39;), get_text: true, whitespace: true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="240">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="242">
          <span class="hits">1</span>
          
          <code class="ruby">    def bit_description(bit)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="243">
          
          
          <code class="ruby">      desc = fetch(bit.at_xpath(&#39;spirit:description&#39;), get_text: true, whitespace: true) || &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="244">
          
          
          <code class="ruby">      bit_val_present = false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="245">
          
          
          <code class="ruby">      bit.xpath(&#39;spirit:values&#39;).each do |val|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="246">
          
          
          <code class="ruby">        unless bit_val_present</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="247">
          
          
          <code class="ruby">          desc += &quot;\n&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="248">
          
          
          <code class="ruby">          bit_val_present = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="250">
          
          
          <code class="ruby">        value = extract(val, &#39;spirit:value&#39;, format: :integer, hex: true)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="251">
          
          
          <code class="ruby">        value_desc = extract val, &#39;spirit:description&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="252">
          
          
          <code class="ruby">        if value &amp;&amp; value_desc</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="253">
          
          
          <code class="ruby">          desc += &quot;\n#{value.to_s(2)} | #{value_desc}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="254">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="255">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="256">
          
          
          <code class="ruby">      desc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="257">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="259">
          <span class="hits">1</span>
          
          <code class="ruby">    def mask(reg)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="260">
          <span class="hits">12</span>
          
          <code class="ruby">      m = 0</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="261">
          <span class="hits">12</span>
          
          <code class="ruby">      reg.size.times do |i|</code>
        </li>
      
        <li class="covered" data-hits="160" data-linenumber="262">
          <span class="hits">160</span>
          
          <code class="ruby">        unless reg[i].reset_val == :undefined</code>
        </li>
      
        <li class="covered" data-hits="160" data-linenumber="263">
          <span class="hits">160</span>
          
          <code class="ruby">          m |= (1 &lt;&lt; i)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="266">
          <span class="hits">12</span>
          
          <code class="ruby">      m</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="268">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="269">
          <span class="hits">1</span>
          
          <code class="ruby">    def uvm?</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="270">
          <span class="hits">30</span>
          
          <code class="ruby">      @format == :uvm</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="271">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="273">
          <span class="hits">1</span>
          
          <code class="ruby">    def memory_maps</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="274">
          <span class="hits">2</span>
          
          <code class="ruby">      { nil =&gt; {} }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="276">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="277">
          <span class="hits">1</span>
          
          <code class="ruby">    def sub_blocks(domain_name)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="278">
          <span class="hits">2</span>
          
          <code class="ruby">      owner.all_sub_blocks.select do |sub_block|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="279">
          
          
          <code class="ruby">        sub_block.owns_registers? &amp;&amp;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="280">
          <span class="hits">4</span>
          
          <code class="ruby">          (sub_block.domains[domain_name] || domain_name == :default)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="283">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="284">
          <span class="hits">1</span>
          
          <code class="ruby">    def address_blocks</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="285">
          <span class="hits">2</span>
          
          <code class="ruby">      domains = owner.register_domains</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="286">
          <span class="hits">2</span>
          
          <code class="ruby">      domains = { default: {} } if domains.empty?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="287">
          <span class="hits">2</span>
          
          <code class="ruby">      domains.each do |domain_name, domain|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="288">
          <span class="hits">2</span>
          
          <code class="ruby">        if owner.owns_registers?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="289">
          <span class="hits">2</span>
          
          <code class="ruby">          yield domain_name, domain, owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="291">
          <span class="hits">2</span>
          
          <code class="ruby">        sub_blocks(domain_name).each do |sub_block|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="292">
          <span class="hits">3</span>
          
          <code class="ruby">          yield domain_name, domain, sub_block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="293">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="294">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="295">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="296">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="297">
          <span class="hits">1</span>
          
          <code class="ruby">    def address_block_name(domain_name, sub_block)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="298">
          <span class="hits">3</span>
          
          <code class="ruby">      if domain_name == :default</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="299">
          <span class="hits">3</span>
          
          <code class="ruby">        sub_block.name.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="300">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="301">
          
          
          <code class="ruby">        &quot;#{domain_name}_#{sub_block.name}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="303">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="305">
          <span class="hits">1</span>
          
          <code class="ruby">    def width(sub_block)</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="306">
          <span class="hits">10</span>
          
          <code class="ruby">      sub_block.try(:width) || 32</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="308">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="309">
          <span class="hits">1</span>
          
          <code class="ruby">    def range(sub_block)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="310">
          <span class="hits">5</span>
          
          <code class="ruby">      range = sub_block.try(:range) || begin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="311">
          
          
          <code class="ruby">        # This is to work around an Origen bug where max_address_reg_size is not updated in the case of</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby">        # only one register being present</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="313">
          
          
          <code class="ruby">        # TODO: Fix in Origen</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="314">
          <span class="hits">5</span>
          
          <code class="ruby">        max_address_reg_size = sub_block.max_address_reg_size || sub_block.regs.first[1].size</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="315">
          <span class="hits">5</span>
          
          <code class="ruby">        (sub_block.max_reg_address + (max_address_reg_size / 8))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="316">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="317">
          <span class="hits">5</span>
          
          <code class="ruby">      width_in_bytes = width(sub_block) / 8</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="318">
          <span class="hits">5</span>
          
          <code class="ruby">      if range % width_in_bytes != 0</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="319">
          <span class="hits">4</span>
          
          <code class="ruby">        range += (width_in_bytes - (range % width_in_bytes))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="320">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="321">
          <span class="hits">5</span>
          
          <code class="ruby">      range</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="322">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="323">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="324">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="99a0583aea5f09b7135959e16a9a8a90cbdffd27">
  <div class="header">
    <h3>lib/cross_origen/ralf.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>7</b> relevant lines. 
      <span class="green"><b>7</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module CrossOrigen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  class Ralf</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">    # Returns the object that included the CrossOrigen module</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(owner)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      @owner = owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    # Returns a string representing the owner object in RALF format</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">    def owner_to_ralf(options = {})</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">      Origen.compile(&quot;#{Origen.root!}/templates/ralf/default.ralf.erb&quot;, options.merge(scope: owner))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="85b7a135e365ddb56e82eb4da01de4917da11851">
  <div class="header">
    <h3>lib/cross_origen/xml_doc.rb</h3>
    <h4><span class="red">79.28 %</span> covered</h4>
    <div>
      <b>111</b> relevant lines. 
      <span class="green"><b>88</b> lines covered</span> and
      <span class="red"><b>23</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;kramdown&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;sanitize&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">module CrossOrigen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">  # This is the base class of all doc formats that are</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">  # XML based</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">  class XMLDoc</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">    CreationInfo = Struct.new(:author, :date, :revision, :source)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">    ImportInfo = Struct.new(:name, :date)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_accessor :creation_info, :import_info</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">    # These (in many cases illegal) tags will be forced to their valid equivalents</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">    # These will be executed in the defined order, so for later xfrms you can for example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">    # assume that all &#39;rows&#39; have already been converted to &#39;tr&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">    # valid equivalents</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">    HTML_TRANSFORMS = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      &#39;table/title&#39;  =&gt; &#39;caption&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      &#39;table//row&#39;   =&gt; &#39;tr&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      &#39;thead//entry&#39; =&gt; &#39;th&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">      &#39;table//entry&#39; =&gt; &#39;td&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      &#39;td/p&#39;         =&gt; &#39;span&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">      &#39;th/p&#39;         =&gt; &#39;span&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">    }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">    # This can be used to perform additional by-node transformation if required, normally</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">    # this should be used if transform of a node attribute is required</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">    HTML_TRANSFORMER = lambda do |env|</code>
        </li>
      
        <li class="covered" data-hits="449" data-linenumber="30">
          <span class="hits">449</span>
          
          <code class="ruby">      if env[:node_name] == &#39;td&#39; || env[:node_name] == &#39;th&#39;</code>
        </li>
      
        <li class="covered" data-hits="50" data-linenumber="31">
          <span class="hits">50</span>
          
          <code class="ruby">        if env[:node].attr(&#39;nameend&#39;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">          first = env[:node].attr(&#39;namest&#39;).sub(&#39;col&#39;, &#39;&#39;).to_i</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">          last = env[:node].attr(&#39;nameend&#39;).sub(&#39;col&#39;, &#39;&#39;).to_i</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">          env[:node].set_attribute(&#39;colspan&#39;, (last - first + 1).to_s)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">    # Defines the rules for sanitization of any HTML strings that will be converted</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">    # to markdown for representation within Origen</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">    HTML_SANITIZATION_CONFIG = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      # Only these tags will be allowed through, everything else will be stripped</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">      # Note that this is applied after the transforms listed above</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">      elements:     %w(b em i strong u p ul ol li table tr td th tbody thead),</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">      attributes:   {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">        &#39;td&#39; =&gt; [&#39;colspan&#39;],</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">        &#39;th&#39; =&gt; [&#39;colspan&#39;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">      },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      # Not planning to allow any of these right now, but keeping around</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      # as an example of how to do so</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">      #:protocols =&gt; {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">      #  &#39;a&#39; =&gt; {&#39;href&#39; =&gt; [&#39;http&#39;, &#39;https&#39;, &#39;mailto&#39;]}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      # }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">      transformers: HTML_TRANSFORMER</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">    }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">    # Returns the object that included the CrossOrigen module</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">    attr_reader :owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="60">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize(owner)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="61">
          <span class="hits">16</span>
          
          <code class="ruby">      @owner = owner</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="62">
          <span class="hits">16</span>
          
          <code class="ruby">      @creation_info = CreationInfo.new</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="63">
          <span class="hits">16</span>
          
          <code class="ruby">      @import_info = ImportInfo.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">    # Tries the given methods on the owner and returns the first one to return a value,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">    # ultimately returns nil if no value is found.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">    # To test an object other than the owner pass it as the first argument.</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="70">
          <span class="hits">1</span>
          
          <code class="ruby">    def try(*methods)</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="71">
          <span class="hits">37</span>
          
          <code class="ruby">      if methods.first.is_a?(Symbol)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="72">
          <span class="hits">4</span>
          
          <code class="ruby">        obj = owner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="74">
          <span class="hits">33</span>
          
          <code class="ruby">        obj = methods.shift</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="76">
          <span class="hits">37</span>
          
          <code class="ruby">      methods.each do |method|</code>
        </li>
      
        <li class="covered" data-hits="95" data-linenumber="77">
          <span class="hits">95</span>
          
          <code class="ruby">        if obj.respond_to?(method)</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="78">
          <span class="hits">37</span>
          
          <code class="ruby">          val = obj.send(method)</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="79">
          <span class="hits">37</span>
          
          <code class="ruby">          return val if val</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">      nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">    # This returns the doc wrapped by a Nokogiri doc</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="86">
          <span class="hits">1</span>
          
          <code class="ruby">    def doc(path, options = {})</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="87">
          <span class="hits">2</span>
          
          <code class="ruby">      require &#39;nokogiri&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="89">
          <span class="hits">2</span>
          
          <code class="ruby">      File.open(path) do |f|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="90">
          <span class="hits">2</span>
          
          <code class="ruby">        yield Nokogiri::XML(f)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="94">
          <span class="hits">1</span>
          
          <code class="ruby">    def extract(element, path, options = {})</code>
        </li>
      
        <li class="covered" data-hits="1146" data-linenumber="95">
          <span class="hits">1146</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">        format:   :string,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">        hex:      false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">        default:  nil,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">        downcase: false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">        return:   :text,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">        # A value or array or values which are considered to be nil, if this is the value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">        # to be returned then nil will be returned instead</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">        nil_on:   false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">      }.merge(options)</code>
        </li>
      
        <li class="covered" data-hits="1146" data-linenumber="105">
          <span class="hits">1146</span>
          
          <code class="ruby">      node = element.at_xpath(path)</code>
        </li>
      
        <li class="covered" data-hits="1146" data-linenumber="106">
          <span class="hits">1146</span>
          
          <code class="ruby">      if node</code>
        </li>
      
        <li class="covered" data-hits="744" data-linenumber="107">
          <span class="hits">744</span>
          
          <code class="ruby">        if options[:format] == :string</code>
        </li>
      
        <li class="covered" data-hits="582" data-linenumber="108">
          <span class="hits">582</span>
          
          <code class="ruby">          str = node.send(options[:return]).strip</code>
        </li>
      
        <li class="covered" data-hits="582" data-linenumber="109">
          <span class="hits">582</span>
          
          <code class="ruby">          str = str.downcase if options[:downcase]</code>
        </li>
      
        <li class="covered" data-hits="582" data-linenumber="110">
          <span class="hits">582</span>
          
          <code class="ruby">          if options[:nil_on] &amp;&amp; [options[:nil_on]].flatten.include?(str)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">            nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="582" data-linenumber="113">
          <span class="hits">582</span>
          
          <code class="ruby">            str</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="162" data-linenumber="115">
          <span class="hits">162</span>
          
          <code class="ruby">        elsif options[:format] == :integer</code>
        </li>
      
        <li class="covered" data-hits="162" data-linenumber="116">
          <span class="hits">162</span>
          
          <code class="ruby">          val = node.send(options[:return])</code>
        </li>
      
        <li class="covered" data-hits="162" data-linenumber="117">
          <span class="hits">162</span>
          
          <code class="ruby">          if val =~ /^0x(.*)/</code>
        </li>
      
        <li class="covered" data-hits="102" data-linenumber="118">
          <span class="hits">102</span>
          
          <code class="ruby">            Regexp.last_match[1].to_i(16)</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="119">
          <span class="hits">60</span>
          
          <code class="ruby">          elsif options[:hex]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="120">
          
          
          <code class="ruby">            val.to_i(16)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="122">
          <span class="hits">60</span>
          
          <code class="ruby">            val.to_i(10)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="125">
          
          
          <code class="ruby">          fail &quot;Unknown format: #{options[:format]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="402" data-linenumber="128">
          <span class="hits">402</span>
          
          <code class="ruby">        options[:default]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">    # Freescale register descriptions are like the wild west, need to do some pre-screening</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">    # to approach valid HTML before handing off to other off the shelf sanitizers</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="134">
          <span class="hits">1</span>
          
          <code class="ruby">    def pre_sanitize(html)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="135">
          <span class="hits">4</span>
          
          <code class="ruby">      html = Nokogiri::HTML.fragment(html)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="136">
          <span class="hits">4</span>
          
          <code class="ruby">      HTML_TRANSFORMS.each do |orig, new|</code>
        </li>
      
        <li class="covered" data-hits="108" data-linenumber="137">
          <span class="hits">108</span>
          
          <code class="ruby">        html.xpath(&quot;.//#{orig}&quot;).each { |node| node.name = new }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="139">
          <span class="hits">4</span>
          
          <code class="ruby">      html.to_html</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">    # Does its best to convert the given html fragment to markdown</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">    # The final markdown may still contain some HTML tags, but any weird</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">    # markup which may break a future markdown -&gt; html conversion will</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">    # be removed</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="147">
          <span class="hits">1</span>
          
          <code class="ruby">    def to_markdown(html, _options = {})</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="148">
          <span class="hits">4</span>
          
          <code class="ruby">      cleaned = html.scrub</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="149">
          <span class="hits">4</span>
          
          <code class="ruby">      cleaned = pre_sanitize(cleaned)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="150">
          <span class="hits">4</span>
          
          <code class="ruby">      cleaned = Sanitize.fragment(cleaned, HTML_SANITIZATION_CONFIG)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="151">
          <span class="hits">4</span>
          
          <code class="ruby">      Kramdown::Document.new(cleaned, input: :html).to_kramdown.strip</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">    rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="153">
          
          
          <code class="ruby">      &#39;The description could not be imported, the most likely cause of this is that it contained illegal HTML markup&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">    # Convert the given markdown string to HTML</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="157">
          <span class="hits">1</span>
          
          <code class="ruby">    def to_html(string, _options = {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">      # Escape any &quot; that are not already escaped</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="159">
          <span class="hits">2</span>
          
          <code class="ruby">      string.gsub!(/([^\\])&quot;/, &#39;\1\&quot;&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">      # Escape any &#39; that are not already escaped</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="161">
          <span class="hits">2</span>
          
          <code class="ruby">      string.gsub!(/([^\\])&#39;/, %q(\1\\\&#39;))</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="162">
          <span class="hits">2</span>
          
          <code class="ruby">      html = Kramdown::Document.new(string, input: :kramdown).to_html</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby">    # fetch an XML snippet passed and extract and format the data</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="166">
          <span class="hits">1</span>
          
          <code class="ruby">    def fetch(xml, options = {})</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="167">
          <span class="hits">28</span>
          
          <code class="ruby">      options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">        type:          String,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">        downcase:      false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">        symbolize:     false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">        strip:         false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby">        squeeze:       false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">        squeeze_lines: false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby">        rm_specials:   false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">        whitespace:    false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby">        get_text:      false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby">        to_i:          false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby">        to_html:       false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">        to_bool:       false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby">        children:      false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby">        to_dec:        false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">        to_f:          false,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">        underscore:    false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby">      }.update(options)</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="185">
          <span class="hits">28</span>
          
          <code class="ruby">      options[:symbolize] = options[:to_sym] if options[:to_sym]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">      # Check for incompatible options</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="187">
          <span class="hits">28</span>
          
          <code class="ruby">      xml_orig = xml</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="188">
          <span class="hits">28</span>
          
          <code class="ruby">      numeric_methods = [:to_i, :to_f, :to_dec]</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="189">
          <span class="hits">28</span>
          
          <code class="ruby">      if options[:get_text] == true &amp;&amp; options[:to_html] == true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="190">
          
          
          <code class="ruby">        fail &#39;Cannot use :get_text and :to_html options at the same time, exiting...&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="192">
          <span class="hits">28</span>
          
          <code class="ruby">      if options[:symbolize] == true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="193">
          
          
          <code class="ruby">        fail &#39;Cannot convert to a number of any type and symbolize at the same time&#39; if numeric_methods.reject { |arg| options[arg] == true }.size &lt; 3</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="112" data-linenumber="195">
          <span class="hits">112</span>
          
          <code class="ruby">      fail &#39;Cannot select multiple numeric conversion args at the same time&#39; if numeric_methods.reject { |arg| options[arg] == true }.size &lt; 2</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="196">
          <span class="hits">28</span>
          
          <code class="ruby">      if xml.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="197">
          
          
          <code class="ruby">        Origen.log.debug &#39;XML data is nil!&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="198">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="200">
          <span class="hits">28</span>
          
          <code class="ruby">      xml = xml.text if options[:get_text] == true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby">      # Sometimes XML snippets get sent as nodes or as Strings</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">      # Must skip this code if a String as it is designed to change</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby">      # the XML node into a string</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="204">
          <span class="hits">28</span>
          
          <code class="ruby">      unless xml.is_a? String</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="205">
          
          
          <code class="ruby">        if options[:to_html] == true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="206">
          
          
          <code class="ruby">          if xml.children</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby">            # If there are children to this XMl node then grab the content there</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="208">
          
          
          <code class="ruby">            if xml.children.empty? || options[:children] == false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="209">
          
          
          <code class="ruby">              xml = xml.to_html</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="211">
          
          
          <code class="ruby">              xml = xml.children.to_html</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="215">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="216">
          <span class="hits">28</span>
          
          <code class="ruby">      unless xml.is_a? options[:type]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="217">
          
          
          <code class="ruby">        Origen.log.debug &quot;XML data is not of correct type &#39;#{options[:type]}&#39;&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="218">
          
          
          <code class="ruby">        Origen.log.debug &quot;xml is \n#{xml}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="219">
          
          
          <code class="ruby">        return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="221">
          <span class="hits">28</span>
          
          <code class="ruby">      if options[:type] == String</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="222">
          <span class="hits">28</span>
          
          <code class="ruby">        if xml.match(/\s+/) &amp;&amp; options[:whitespace] == false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="223">
          
          
          <code class="ruby">          Origen.log.debug &quot;XML data &#39;#{xml}&#39; cannot have white space&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="224">
          
          
          <code class="ruby">          return nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="226">
          <span class="hits">28</span>
          
          <code class="ruby">        xml.downcase! if options[:downcase] == true</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="227">
          <span class="hits">28</span>
          
          <code class="ruby">        xml = xml.underscore if options[:underscore] == true</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="228">
          <span class="hits">28</span>
          
          <code class="ruby">        xml.strip! if options[:strip] == true</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="229">
          <span class="hits">28</span>
          
          <code class="ruby">        xml.squeeze!(&#39; &#39;) if options[:squeeze] == true</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="230">
          <span class="hits">28</span>
          
          <code class="ruby">        xml = xml.squeeze_lines if options[:squeeze_lines] == true</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="231">
          <span class="hits">28</span>
          
          <code class="ruby">        xml.gsub!(/[^0-9A-Za-z]/, &#39;_&#39;) if options[:rm_specials] == true</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="232">
          <span class="hits">28</span>
          
          <code class="ruby">        if options[:symbolize] == true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="233">
          
          
          <code class="ruby">          return xml.to_sym</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="234">
          <span class="hits">28</span>
          
          <code class="ruby">        elsif options[:to_i] == true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="235">
          
          
          <code class="ruby">          return xml.to_i</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="236">
          <span class="hits">28</span>
          
          <code class="ruby">        elsif options[:to_dec] == true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="237">
          
          
          <code class="ruby">          return xml.to_dec</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="238">
          <span class="hits">28</span>
          
          <code class="ruby">        elsif options[:to_f] == true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="239">
          
          
          <code class="ruby">          return xml.to_f</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="240">
          <span class="hits">28</span>
          
          <code class="ruby">        elsif [true, false].include?(xml.to_bool) &amp;&amp; options[:to_bool] == true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">          # If the string can convert to Boolean then return TrueClass or FalseClass</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="242">
          
          
          <code class="ruby">          return xml.to_bool</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="244">
          <span class="hits">28</span>
          
          <code class="ruby">          return xml</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby">        # No real examples yet of non-string content</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="248">
          
          
          <code class="ruby">        return xml</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="251">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="b1c870e5d3be04159720126149db2deb71f5668b">
  <div class="header">
    <h3>lib/cross_origen_dev/dut.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>27</b> relevant lines. 
      <span class="green"><b>27</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module CrossOrigenDev</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">  # Simple DUT class used for testing</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">  class DUT</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    include Origen::TopLevel</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">    include CrossOrigen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">    def initialize</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="8">
          <span class="hits">12</span>
          
          <code class="ruby">      @path = :hidden</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="9">
          <span class="hits">12</span>
          
          <code class="ruby">      sub_block :atx, class_name: &#39;D_IP_ANA_TEST_ANNEX_SYN&#39;, base_address: 0x4000_0000</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">      # Register defined solely to test out the top level register export</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="12">
          <span class="hits">12</span>
          
          <code class="ruby">      reg :dut_top_level_reg, 0x0, size: 32, bit_order: :msb0, lau: 8 do</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="13">
          <span class="hits">12</span>
          
          <code class="ruby">        bit 15, :pls_work, reset: 1, access: :rw</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="14">
          <span class="hits">12</span>
          
          <code class="ruby">        bit 14, :second_bit, reset: 0, access: :rw</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      # Register defined solely to test out the top level register export</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="17">
          <span class="hits">12</span>
          
          <code class="ruby">      reg :dut_top_level_reg_number_two, 0x10, size: 32, bit_order: :lsb0, lau: 16 do</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="18">
          <span class="hits">12</span>
          
          <code class="ruby">        bit 0, :pls_work, reset: 0, access: :ro</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="19">
          <span class="hits">12</span>
          
          <code class="ruby">        bit 1, :second_bit, reset: 1, access: :rw</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      # Import some data from IP-XACT</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="22">
          <span class="hits">12</span>
          
          <code class="ruby">      cr_import(path: &quot;#{Origen.root}/imports/ipxact.xml&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">    def add_atx2</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">      sub_block :atx2, class_name: &#39;ATX2&#39;, base_address: 0x6000_0000</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">    class ATX2</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">      include Origen::Model</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">      include CrossOrigen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">        cr_import(path: &quot;#{Origen.root}/approved/ip_xact_sub_block.xml&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">    class D_IP_ANA_TEST_ANNEX_SYN # rubocop:disable ClassAndModuleCamelCase</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">      include Origen::Model</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="40">
          <span class="hits">1</span>
          
          <code class="ruby">      include CrossOrigen</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="42">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">        # A manually defined register for testing the conversion of any specific attributes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">        # ** MGATE Clock Divider Register **</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">        # The MCLKDIV register is used to divide down the frequency of the HBOSCCLK input. If the MCLKDIV</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">        # register is set to value &quot;N&quot;, then the output (beat) frequency of the clock divider is OSCCLK / (N+1). The</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">        # resulting beats are, in turn, counted by the PTIMER module to control the duration of Flash high-voltage</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">        # operations.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">        # This is a test of potentially problematic characters &#39; &quot; \&#39; \&quot; &lt; &gt;</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="51">
          <span class="hits">12</span>
          
          <code class="ruby">        reg :mclkdiv, 0x0, size: 16, bit_order: &#39;decrement&#39; do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">          # **Oscillator (Hi)** - Firmware FMU clk source selection. (Note that in addition to this firmware-controlled bit, the</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">          # FMU clock source is also dependent on test and power control discretes).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">          #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">          # 0 | FMU clock is the externally supplied bus clock ipg_clk</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">          # 1 | FMU clock is the internal oscillator from the TFS hardblock</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="57">
          <span class="hits">12</span>
          
          <code class="ruby">          bit 15, :osch, reset: 1, access: :rw</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>

      
      </div>
    </div>
  </body>
</html>
