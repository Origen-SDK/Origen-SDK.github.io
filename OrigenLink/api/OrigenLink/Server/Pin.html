<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: OrigenLink::Server::Pin
  
    &mdash; origen_link 0.3.0
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "OrigenLink::Server::Pin";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (P)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../OrigenLink.html" title="OrigenLink (module)">OrigenLink</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Server.html" title="OrigenLink::Server (module)">Server</a></span></span>
     &raquo; 
    <span class="title">Pin</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: OrigenLink::Server::Pin
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">OrigenLink::Server::Pin</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/origen_link/server/pin.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The server pin class is used to perform IO using the UDOO pins</p>


  </div>
</div>
<div class="tags">
  

</div>
  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="pin_setup-classvariable" class="">@@pin_setup =
        
      </dt>
      <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='label'>in:</span>  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>in</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>out:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>out</span><span class='tstring_end'>&#39;</span></span>
<span class='rbrace'>}</span></pre></dd>
    
  </dl>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#gpio_valid-instance_method" title="#gpio_valid (instance method)">#<strong>gpio_valid</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>True if this pin exists in /sys/class/gpio after export.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#pattern_data-instance_method" title="#pattern_data (instance method)">#<strong>pattern_data</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This pin&#39;s vector data for the pattern cycle being executed.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#pattern_index-instance_method" title="#pattern_index (instance method)">#<strong>pattern_index</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This pin&#39;s index in the vector data received from the plug-in app.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#response-instance_method" title="#response (instance method)">#<strong>response</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This pin&#39;s response for the executing vector.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cycle_failure-instance_method" title="#cycle_failure (instance method)">#<strong>cycle_failure</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>cycle_failure   returns a boolean indicating pass/fail status of this pin.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#data_is_compare%3F-instance_method" title="#data_is_compare? (instance method)">#<strong>data_is_compare?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>data_is_compare?   returns whether the current pattern data is compare.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#data_is_drive%3F-instance_method" title="#data_is_drive? (instance method)">#<strong>data_is_drive?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>data_is_drive?   returns whether the current pattern data is drive.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy-instance_method" title="#destroy (instance method)">#<strong>destroy</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Close the file IO objects associated with this pin.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#in-instance_method" title="#in (instance method)">#<strong>in</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Reads and returns state of the pin.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(ionumber, direction = :in)  &#x21d2; Pin </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Export the pin io files through the system and take control of the IO.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_pattern_data-instance_method" title="#load_pattern_data (instance method)">#<strong>load_pattern_data</strong>(cycle)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>load_pattern_data   Grab this pin&#39;s data character from the pattern
data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#out-instance_method" title="#out (instance method)">#<strong>out</strong>(value)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the output state of the pin.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#process_event-instance_method" title="#process_event (instance method)">#<strong>process_event</strong>(operation, requested_action)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>process_event(event)   perform the requested pin operation and update the
response (if required).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns &#39;OrigenLinPin&#39; + io number.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_direction-instance_method" title="#update_direction (instance method)">#<strong>update_direction</strong>(direction)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the pin direction.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(ionumber, direction = :in)  &#x21d2; <tt><span class='object_link'><a href="" title="OrigenLink::Server::Pin (class)">Pin</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Export the pin io files through the system and take control of the IO</p>

<p>This method will execute system command “echo #ionumber &gt;
/sys/class/gpio/export” to create the IO file interface.  It will set the
direction, initial pin state and initialize instance variables</p>

<p>Receives</p>

<pre class="code ruby"><code class="ruby">ionumber - required, value indicating the pin number (BCM IO number,
           not the header pin number)
direction - optional, specifies the pin direction.  A pin is
            initialized as an input if a direction isn&#39;t specified.</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/pin.rb', line 38</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_ionumber'>ionumber</span><span class='comma'>,</span> <span class='id identifier rubyid_direction'>direction</span> <span class='op'>=</span> <span class='symbol'>:in</span><span class='rparen'>)</span>
  <span class='ivar'>@ionumber</span> <span class='op'>=</span> <span class='const'>Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_ionumber'>ionumber</span><span class='rparen'>)</span>
  <span class='ivar'>@pin_dir_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="../Server.html" title="OrigenLink::Server (module)">Server</a></span></span><span class='period'>.</span><span class='id identifier rubyid_gpio_dir'><span class='object_link'><a href="../Server.html#gpio_dir-class_method" title="OrigenLink::Server.gpio_dir (method)">gpio_dir</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/gpio</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ionumber</span><span class='embexpr_end'>}</span><span class='tstring_content'>/direction</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@pin_val_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="../Server.html" title="OrigenLink::Server (module)">Server</a></span></span><span class='period'>.</span><span class='id identifier rubyid_gpio_dir'><span class='object_link'><a href="../Server.html#gpio_dir-class_method" title="OrigenLink::Server.gpio_dir (method)">gpio_dir</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/gpio</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ionumber</span><span class='embexpr_end'>}</span><span class='tstring_content'>/value</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='ivar'>@pin_dir_name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_system'>system</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>echo </span><span class='embexpr_beg'>#{</span><span class='ivar'>@ionumber</span><span class='embexpr_end'>}</span><span class='tstring_content'> &gt; </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="../Server.html" title="OrigenLink::Server (module)">Server</a></span></span><span class='period'>.</span><span class='id identifier rubyid_gpio_dir'><span class='object_link'><a href="../Server.html#gpio_dir-class_method" title="OrigenLink::Server.gpio_dir (method)">gpio_dir</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>/export</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.05</span>
    <span class='kw'>if</span> <span class='gvar'>$CHILD_STATUS</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='ivar'>@gpio_valid</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>else</span>
      <span class='ivar'>@gpio_valid</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='ivar'>@gpio_valid</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='ivar'>@gpio_valid</span>
    <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_writable?'>writable?</span><span class='lparen'>(</span><span class='ivar'>@pin_dir_name</span><span class='rparen'>)</span>
      <span class='ivar'>@pin_dir_obj</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='ivar'>@pin_dir_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_update_direction'>update_direction</span><span class='lparen'>(</span><span class='id identifier rubyid_direction'>direction</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='ivar'>@gpio_valid</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@pin_dir_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not writable. Fix permissions or run as super user.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='ivar'>@pin_val_obj</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='ivar'>@pin_val_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r+</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@gpio_valid</span>
  <span class='kw'>end</span>
  <span class='ivar'>@pattern_data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@pattern_index</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
  <span class='ivar'>@response</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>W</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@cycle_failure</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@data_is_drive</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="gpio_valid-instance_method">
  
    #<strong>gpio_valid</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>True if this pin exists in /sys/class/gpio after export.  False otherwise.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/pin.rb', line 16</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gpio_valid'>gpio_valid</span>
  <span class='ivar'>@gpio_valid</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="pattern_data=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="pattern_data-instance_method">
  
    #<strong>pattern_data</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This pin&#39;s vector data for the pattern cycle being executed</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/pin.rb', line 18</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pattern_data'>pattern_data</span>
  <span class='ivar'>@pattern_data</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="pattern_index=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="pattern_index-instance_method">
  
    #<strong>pattern_index</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This pin&#39;s index in the vector data received from the plug-in app</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/pin.rb', line 20</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pattern_index'>pattern_index</span>
  <span class='ivar'>@pattern_index</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="response=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="response-instance_method">
  
    #<strong>response</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This pin&#39;s response for the executing vector</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/pin.rb', line 22</span>

<span class='kw'>def</span> <span class='id identifier rubyid_response'>response</span>
  <span class='ivar'>@response</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="cycle_failure-instance_method">
  
    #<strong>cycle_failure</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>cycle_failure</p>

<pre class="code ruby"><code class="ruby">returns a boolean indicating pass/fail status of this pin</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


84
85
86
87
88
89
90</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/pin.rb', line 84</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cycle_failure'>cycle_failure</span>
  <span class='kw'>if</span> <span class='ivar'>@response</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>W</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>true</span>		<span class='comment'># force failure if no operation performed
</span>  <span class='kw'>else</span>
    <span class='ivar'>@cycle_failure</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="data_is_compare?-instance_method">
  
    #<strong>data_is_compare?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>data_is_compare?</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_returns'>returns</span> <span class='id identifier rubyid_whether'>whether</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_current'>current</span> <span class='id identifier rubyid_pattern'>pattern</span> <span class='id identifier rubyid_data'>data</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_compare'>compare</span></code></pre>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/pin.rb', line 78</span>

<span class='kw'>def</span> <span class='id identifier rubyid_data_is_compare?'>data_is_compare?</span>
  <span class='op'>!</span><span class='ivar'>@data_is_drive</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="data_is_drive?-instance_method">
  
    #<strong>data_is_drive?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>data_is_drive?</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_returns'>returns</span> <span class='id identifier rubyid_whether'>whether</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_current'>current</span> <span class='id identifier rubyid_pattern'>pattern</span> <span class='id identifier rubyid_data'>data</span> <span class='id identifier rubyid_is'>is</span> <span class='id identifier rubyid_drive'>drive</span></code></pre>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/pin.rb', line 72</span>

<span class='kw'>def</span> <span class='id identifier rubyid_data_is_drive?'>data_is_drive?</span>
  <span class='ivar'>@data_is_drive</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="destroy-instance_method">
  
    #<strong>destroy</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Close the file IO objects associated with this pin</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153
154
155
156
157
158</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/pin.rb', line 151</span>

<span class='kw'>def</span> <span class='id identifier rubyid_destroy'>destroy</span>
  <span class='kw'>if</span> <span class='ivar'>@gpio_valid</span>
    <span class='ivar'>@pin_dir_obj</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
    <span class='ivar'>@pin_val_obj</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
    <span class='comment'># system(&quot;echo #{@ionumber} &gt; /sys/class/gpio/unexport&quot;)
</span>    <span class='comment'># puts &quot;pin #{@ionumber} is no longer exported&quot;
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="in-instance_method">
  
    #<strong>in</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Reads and returns state of the pin.</p>

<p>If the pin is setup as an output, the direction will first be changed to
input.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


180
181
182
183
184
185
186
187
188
189
190
191
192
193</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/pin.rb', line 180</span>

<span class='kw'>def</span> <span class='kw'>in</span>
  <span class='kw'>if</span> <span class='ivar'>@gpio_valid</span>
    <span class='kw'>if</span> <span class='ivar'>@direction</span> <span class='op'>==</span> <span class='symbol'>:out</span>
      <span class='id identifier rubyid_update_direction'>update_direction</span><span class='lparen'>(</span><span class='symbol'>:in</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='comment'># below is original read - slow to reopen every time
</span>    <span class='comment'># File.open(@pin_val_name, &#39;r&#39;) do |file|
</span>    <span class='comment'>#  file.read#.chomp
</span>    <span class='comment'># end
</span>    <span class='comment'># end original read
</span>    <span class='ivar'>@pin_val_obj</span><span class='period'>.</span><span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='ivar'>@pin_val_obj</span><span class='period'>.</span><span class='id identifier rubyid_getc'>getc</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_pattern_data-instance_method">
  
    #<strong>load_pattern_data</strong>(cycle)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>load_pattern_data</p>

<pre class="code ruby"><code class="ruby">Grab this pin&#39;s data character from the pattern data</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96
97
98
99
100
101
102
103
104
105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/pin.rb', line 94</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_pattern_data'>load_pattern_data</span><span class='lparen'>(</span><span class='id identifier rubyid_cycle'>cycle</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@pattern_index</span> <span class='op'>&gt;</span> <span class='op'>-</span><span class='int'>1</span>
    <span class='ivar'>@pattern_data</span> <span class='op'>=</span> <span class='id identifier rubyid_cycle'>cycle</span><span class='lbracket'>[</span><span class='ivar'>@pattern_index</span><span class='rbracket'>]</span>
    <span class='ivar'>@response</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>W</span><span class='tstring_end'>&#39;</span></span>
    <span class='ivar'>@cycle_failure</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>if</span> <span class='ivar'>@pattern_data</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span> <span class='op'>||</span> <span class='ivar'>@pattern_data</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span>
      <span class='ivar'>@data_is_drive</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>else</span>
      <span class='ivar'>@data_is_drive</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='ivar'>@gpio_valid</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="out-instance_method">
  
    #<strong>out</strong>(value)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the output state of the pin.</p>

<p>If the pin is setup as an input, the direction will first be changed to
output.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167
168
169
170
171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/pin.rb', line 165</span>

<span class='kw'>def</span> <span class='id identifier rubyid_out'>out</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@gpio_valid</span>
    <span class='kw'>if</span> <span class='ivar'>@direction</span> <span class='op'>==</span> <span class='symbol'>:in</span>
      <span class='id identifier rubyid_update_direction'>update_direction</span><span class='lparen'>(</span><span class='symbol'>:out</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='ivar'>@pin_val_obj</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
    <span class='ivar'>@pin_val_obj</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="process_event-instance_method">
  
    #<strong>process_event</strong>(operation, requested_action)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>process_event(event)</p>

<pre class="code ruby"><code class="ruby">perform the requested pin operation and update the response (if required)</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/pin.rb', line 111</span>

<span class='kw'>def</span> <span class='id identifier rubyid_process_event'>process_event</span><span class='lparen'>(</span><span class='id identifier rubyid_operation'>operation</span><span class='comma'>,</span> <span class='id identifier rubyid_requested_action'>requested_action</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_operation'>operation</span> <span class='op'>==</span> <span class='symbol'>:drive</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_data_is_drive?'>data_is_drive?</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_requested_action'>requested_action</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_out'>out</span><span class='lparen'>(</span><span class='ivar'>@pattern_data</span><span class='rparen'>)</span>
        <span class='ivar'>@response</span> <span class='op'>=</span> <span class='ivar'>@pattern_data</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_out'>out</span><span class='lparen'>(</span><span class='id identifier rubyid_requested_action'>requested_action</span><span class='rparen'>)</span>
      <span class='kw'>end</span> <span class='comment'># requested_action == &#39;data&#39;
</span>    <span class='kw'>end</span> <span class='comment'># data_is_drive?
</span>  <span class='kw'>end</span> <span class='comment'># operation == :drive
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_operation'>operation</span> <span class='op'>==</span> <span class='symbol'>:compare</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_data_is_compare?'>data_is_compare?</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_requested_action'>requested_action</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>case</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span>
          <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span>
            <span class='ivar'>@cycle_failure</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@pattern_data</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>H</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>if</span> <span class='ivar'>@pattern_data</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>X</span><span class='tstring_end'>&#39;</span></span>
              <span class='ivar'>@response</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>else</span>
              <span class='ivar'>@response</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>L</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>end</span>
          <span class='comment'># end of when &#39;0&#39;
</span>          <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span>
            <span class='ivar'>@cycle_failure</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@pattern_data</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>L</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>if</span> <span class='ivar'>@pattern_data</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>X</span><span class='tstring_end'>&#39;</span></span>
              <span class='ivar'>@response</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>`</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>else</span>
              <span class='ivar'>@response</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>H</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>end</span>
          <span class='comment'># end of when &#39;1&#39;
</span>          <span class='kw'>else</span>
            <span class='ivar'>@response</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>W</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>end</span> <span class='comment'># case
</span>      <span class='kw'>end</span> <span class='comment'># requested_action == &#39;data&#39;
</span>    <span class='kw'>end</span> <span class='comment'># data_is_compare?
</span>  <span class='kw'>end</span> <span class='comment'># operation == :compare
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_s-instance_method">
  
    #<strong>to_s</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns &#39;OrigenLinPin&#39; + io number</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


213
214
215</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/pin.rb', line 213</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OrigenLinkPin</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='ivar'>@ionumber</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_direction-instance_method">
  
    #<strong>update_direction</strong>(direction)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the pin direction</p>

<p>Receives:</p>

<pre class="code ruby"><code class="ruby">direction - specifies the pin direction.  Input is default.

Valid direction values:
  :in	-	input
  :out	-	output</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205
206
207
208
209
210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/pin.rb', line 203</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_direction'>update_direction</span><span class='lparen'>(</span><span class='id identifier rubyid_direction'>direction</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@gpio_valid</span>
    <span class='ivar'>@pin_dir_obj</span><span class='period'>.</span><span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='ivar'>@pin_dir_obj</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='cvar'>@@pin_setup</span><span class='lbracket'>[</span><span class='id identifier rubyid_direction'>direction</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='ivar'>@pin_dir_obj</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
    <span class='ivar'>@direction</span> <span class='op'>=</span> <span class='id identifier rubyid_direction'>direction</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Apr  6 14:00:20 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.8 (ruby-2.1.5).
</div>

    </div>
  </body>
</html>