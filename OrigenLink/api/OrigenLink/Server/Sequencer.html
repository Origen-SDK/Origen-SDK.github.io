<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: OrigenLink::Server::Sequencer
  
    &mdash; origen_link 0.4.1
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "OrigenLink::Server::Sequencer";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../OrigenLink.html" title="OrigenLink (module)">OrigenLink</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Server.html" title="OrigenLink::Server (module)">Server</a></span></span>
     &raquo; 
    <span class="title">Sequencer</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: OrigenLink::Server::Sequencer
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">OrigenLink::Server::Sequencer</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/origen_link/server/sequencer.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>OrigenLink::Server::Sequencer Class</p>

<pre class="code ruby"><code class="ruby">This class processes messages targeted for
pin sequencer interface (vector pattern
execution).

Supported messages:
  pin_assign (create pin mapping)
    ex: &quot;pin_assign:tck,3,extal,23,tdo,5&quot;

  pin_patternorder (define vector pin order)
    ex: &quot;pin_patternorder:tdo,extal,tck&quot;

  pin_cycle (execute vector data)
    ex: &quot;pin_cycle:H11&quot;

  pin_clear (clear all setup information)
    ex: &quot;pin_clear:&quot;

  pin_format (setup a pin with return format)
    first argument is the timeset
    ex: &quot;pin_format:1,tck,rl&quot;

  pin_timing (define when pin events happen)
    timing is stored in a timeset hash
    first argument is the timeset key
    ex: &quot;pin_timing:1,tdi,0,tdo,1,tms,0

  version (check version of app server is
    running)
    ex: &quot;version:&quot;
    response ex: &quot;P:0.2.0.pre0&quot;
</code></pre>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#cycletiming-instance_method" title="#cycletiming (instance method)">#<strong>cycletiming</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>hash holding programmed time set information.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#patternorder-instance_method" title="#patternorder (instance method)">#<strong>patternorder</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>array of pin names in pattern order.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#patternpinindex-instance_method" title="#patternpinindex (instance method)">#<strong>patternpinindex</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>hash holding pin pattern order (&#39;name&#39; =&gt; index).</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#pinmap-instance_method" title="#pinmap (instance method)">#<strong>pinmap</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>hash holding the pinmap (&#39;name&#39; =&gt; pin object).</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#version-instance_method" title="#version (instance method)">#<strong>version</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>code version of the server (populated by start_link_server).</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>  &#x21d2; Sequencer </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>initialize method    Create empty pinmap, pattern pin index    and pattern
order instance variables.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new_timeset-instance_method" title="#new_timeset (instance method)">#<strong>new_timeset</strong>(tset)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>new_timeset(tset)   creates a new empty timeset hash.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pin_assign-instance_method" title="#pin_assign (instance method)">#<strong>pin_assign</strong>(args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>pin_assign method    arguments: &lt;args&gt; from the message request     
see “processmessage” method    returns: “P:” or error message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pin_clear-instance_method" title="#pin_clear (instance method)">#<strong>pin_clear</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>pin_clear method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pin_cycle-instance_method" title="#pin_cycle (instance method)">#<strong>pin_cycle</strong>(args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>pin_cycle method    arguments: &lt;args&gt; from the message request   
returns: “P:” or “F:” followed by results.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pin_format-instance_method" title="#pin_format (instance method)">#<strong>pin_format</strong>(args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>pin_format method   arguments: &lt;args&gt; from the message request    
Should be &lt;timeset&gt;,&lt;pin&gt;,rl or rh     multi-clock not
currently supported.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pin_patternorder-instance_method" title="#pin_patternorder (instance method)">#<strong>pin_patternorder</strong>(args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>pin_patternorder method    arguments: &lt;args&gt; from the message request
returns: “P:” or error message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pin_timing-instance_method" title="#pin_timing (instance method)">#<strong>pin_timing</strong>(args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>pin_timing method   arguments: &lt;args&gt; from the message request    
Should be &#39;1,pin,-1,pin2,0,pin3,1&#39;     First integer is timeset
number     If argument is &#39;&#39;, default timing is created     Default
timeset number is 0, this is used     if no timeset is explicitly defined.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pin_timingv2-instance_method" title="#pin_timingv2 (instance method)">#<strong>pin_timingv2</strong>(args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>pin_timingv2 method   arguments: &lt;args&gt; from the message request    
Should be &#39;1,drive,5,pin,10,pin2,|compare,0,pin3&#39;     First integer
is timeset number.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#processmessage-instance_method" title="#processmessage (instance method)">#<strong>processmessage</strong>(message)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>processmessage method    arguments: message      message format is
&lt;group&gt;_&lt;command&gt;:&lt;args&gt;    returns: message response.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="OrigenLink::Server::Sequencer (class)">Sequencer</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>initialize method</p>

<pre class="code ruby"><code class="ruby">Create empty pinmap, pattern pin index
and pattern order instance variables</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106
107
108
109
110</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/sequencer.rb', line 104</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
  <span class='ivar'>@pinmap</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
  <span class='ivar'>@patternpinindex</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
  <span class='ivar'>@patternorder</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@cycletiming</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
  <span class='ivar'>@version</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="cycletiming-instance_method">
  
    #<strong>cycletiming</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>hash holding programmed time set information</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/sequencer.rb', line 95</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cycletiming'>cycletiming</span>
  <span class='ivar'>@cycletiming</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="patternorder-instance_method">
  
    #<strong>patternorder</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>array of pin names in pattern order</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/sequencer.rb', line 93</span>

<span class='kw'>def</span> <span class='id identifier rubyid_patternorder'>patternorder</span>
  <span class='ivar'>@patternorder</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="patternpinindex-instance_method">
  
    #<strong>patternpinindex</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>hash holding pin pattern order (&#39;name&#39; =&gt; index)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/sequencer.rb', line 97</span>

<span class='kw'>def</span> <span class='id identifier rubyid_patternpinindex'>patternpinindex</span>
  <span class='ivar'>@patternpinindex</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="pinmap-instance_method">
  
    #<strong>pinmap</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>hash holding the pinmap (&#39;name&#39; =&gt; pin object)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/sequencer.rb', line 91</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pinmap'>pinmap</span>
  <span class='ivar'>@pinmap</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="version=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="version-instance_method">
  
    #<strong>version</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>code version of the server (populated by start_link_server)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/sequencer.rb', line 89</span>

<span class='kw'>def</span> <span class='id identifier rubyid_version'>version</span>
  <span class='ivar'>@version</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="new_timeset-instance_method">
  
    #<strong>new_timeset</strong>(tset)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>new_timeset(tset)</p>

<pre class="code ruby"><code class="ruby">creates a new empty timeset hash

timing format:
  [&#39;events&#39;] = [0, 5, 10, 35]
  [&#39;drive_event_data&#39;] = {
        0: [&#39;data&#39;]
       10: [&#39;data&#39;,&#39;0&#39;]
       35: [&#39;0&#39;]
      }
  [&#39;drive_event_pins&#39;] = {
        0: [[pin_obj1, pin_obj2]]
       10: [[pin1,pin2], [pin3]]
        etc.
      }</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


255
256
257
258
259
260
261
262</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/sequencer.rb', line 255</span>

<span class='kw'>def</span> <span class='id identifier rubyid_new_timeset'>new_timeset</span><span class='lparen'>(</span><span class='id identifier rubyid_tset'>tset</span><span class='rparen'>)</span>
  <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset'>tset</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset'>tset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset'>tset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset'>tset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset'>tset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compare_event_data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset'>tset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compare_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pin_assign-instance_method">
  
    #<strong>pin_assign</strong>(args)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>pin_assign method</p>

<pre class="code ruby"><code class="ruby">arguments: &lt;args&gt; from the message request
  see &quot;processmessage&quot; method
returns: &quot;P:&quot; or error message

This method creates a pin instance for each
pin in the pin map and builds the pinmap
hash.  Before the pinmap is created, any
information from a previous pattern run is
cleared.</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/sequencer.rb', line 160</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pin_assign'>pin_assign</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pin_clear'>pin_clear</span>
  <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_fail_message'>fail_message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_argarr'>argarr</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='int'>0</span><span class='period'>.</span><span class='id identifier rubyid_step'>step</span><span class='lparen'>(</span><span class='id identifier rubyid_argarr'>argarr</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
    <span class='ivar'>@pinmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_argarr'>argarr</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Pin.html" title="OrigenLink::Server::Pin (class)">Pin</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Pin.html#initialize-instance_method" title="OrigenLink::Server::Pin#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_argarr'>argarr</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='ivar'>@pinmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_argarr'>argarr</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_gpio_valid'>gpio_valid</span>
      <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='id identifier rubyid_fail_message'>fail_message</span> <span class='op'>=</span> <span class='id identifier rubyid_fail_message'>fail_message</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pin </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_argarr'>argarr</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> gpio</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_argarr'>argarr</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> is invalid</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_success'>success</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>P:</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>F:</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_fail_message'>fail_message</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pin_clear-instance_method">
  
    #<strong>pin_clear</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>pin_clear method</p>

<pre class="code ruby"><code class="ruby">This method clears all storage objects.  It
is called by the &quot;pin_assign&quot; method</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


459
460
461
462
463
464
465
466</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/sequencer.rb', line 459</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pin_clear'>pin_clear</span>
  <span class='ivar'>@pinmap</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_pin_name'>pin_name</span><span class='comma'>,</span> <span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_destroy'>destroy</span> <span class='rbrace'>}</span>
  <span class='ivar'>@pinmap</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
  <span class='ivar'>@patternpinindex</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
  <span class='ivar'>@patternorder</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='kw'>true</span> <span class='rbrace'>}</span>
  <span class='ivar'>@cycletiming</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>P:</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pin_cycle-instance_method">
  
    #<strong>pin_cycle</strong>(args)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>pin_cycle method</p>

<pre class="code ruby"><code class="ruby">arguments: &lt;args&gt; from the message request
returns: &quot;P:&quot; or &quot;F:&quot; followed by results

This method executes one cycle of pin vector
data.  The vector data is decomposed and
sequenced.  Each pin object and pin data
is passed to the &quot;process_pindata&quot; method
for decoding and execution</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/sequencer.rb', line 394</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pin_cycle'>pin_cycle</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='comment'># set default repeats and timeset
</span>  <span class='id identifier rubyid_repeat_count'>repeat_count</span> <span class='op'>=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_tset'>tset</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>,</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_parsedargs'>parsedargs</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='id identifier rubyid_parsedargs'>parsedargs</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span>
    <span class='id identifier rubyid_parsedargs'>parsedargs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_arg'>arg</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_arg'>arg</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>repeat</span><span class='regexp_end'>/</span></span>
        <span class='id identifier rubyid_repeat_count'>repeat_count</span> <span class='op'>=</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>repeat</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_arg'>arg</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>tset</span><span class='regexp_end'>/</span></span>
        <span class='id identifier rubyid_tset'>tset</span> <span class='op'>=</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>tset</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='comment'># load pattern cycle data into pin objects
</span>  <span class='ivar'>@pinmap</span><span class='period'>.</span><span class='id identifier rubyid_each_value'>each_value</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_load_pattern_data'>load_pattern_data</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_cycle_failure'>cycle_failure</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='int'>0</span><span class='period'>.</span><span class='id identifier rubyid_upto'>upto</span><span class='lparen'>(</span><span class='id identifier rubyid_repeat_count'>repeat_count</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_count'>count</span><span class='op'>|</span>
    <span class='comment'># process timing events
</span>    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset'>tset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_event'>event</span><span class='op'>|</span>
      <span class='comment'># process drive events
</span>      <span class='kw'>if</span> <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset'>tset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
        <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset'>tset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_index'>each_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
          <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset'>tset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span>
            <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_process_event'>process_event</span><span class='lparen'>(</span><span class='symbol'>:drive</span><span class='comma'>,</span> <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset'>tset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>

      <span class='comment'># process compare events
</span>      <span class='kw'>if</span> <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset'>tset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compare_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
        <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset'>tset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compare_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_index'>each_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
          <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset'>tset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compare_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span>
            <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_process_event'>process_event</span><span class='lparen'>(</span><span class='symbol'>:compare</span><span class='comma'>,</span> <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset'>tset</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compare_event_data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span> <span class='comment'># event
</span>
    <span class='comment'># build response message
</span>    <span class='id identifier rubyid_message'>message</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>0</span>

    <span class='ivar'>@patternorder</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span>
      <span class='id identifier rubyid_message'>message</span> <span class='op'>+=</span> <span class='ivar'>@pinmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_p'>p</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_response'>response</span>
      <span class='id identifier rubyid_cycle_failure'>cycle_failure</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@pinmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_p'>p</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_cycle_failure'>cycle_failure</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span> <span class='comment'># count
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_cycle_failure'>cycle_failure</span>
    <span class='id identifier rubyid_rtnmsg'>rtnmsg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>F:</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_message'>message</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>    Expected:</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_args'>args</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_rtnmsg'>rtnmsg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>P:</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_message'>message</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_rtnmsg'>rtnmsg</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pin_format-instance_method">
  
    #<strong>pin_format</strong>(args)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>pin_format method</p>

<pre class="code ruby"><code class="ruby">arguments: &lt;args&gt; from the message request
  Should be &lt;timeset&gt;,&lt;pin&gt;,rl or rh
  multi-clock not currently supported</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/sequencer.rb', line 271</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pin_format'>pin_format</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_argarr'>argarr</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_tset_key'>tset_key</span> <span class='op'>=</span> <span class='id identifier rubyid_argarr'>argarr</span><span class='period'>.</span><span class='id identifier rubyid_delete_at'>delete_at</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_new_timeset'>new_timeset</span><span class='lparen'>(</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='ivar'>@cycletiming</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rparen'>)</span>
  <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span>
  <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span>
  <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_event'>event</span><span class='op'>|</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compare_event_data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='int'>0</span><span class='period'>.</span><span class='id identifier rubyid_step'>step</span><span class='lparen'>(</span><span class='id identifier rubyid_argarr'>argarr</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
    <span class='id identifier rubyid_drive_type'>drive_type</span> <span class='op'>=</span> <span class='id identifier rubyid_argarr'>argarr</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='int'>1</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_pin_name'>pin_name</span> <span class='op'>=</span> <span class='id identifier rubyid_argarr'>argarr</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@pinmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pin_name'>pin_name</span><span class='rbracket'>]</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@pinmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pin_name'>pin_name</span><span class='rbracket'>]</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compare_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='ivar'>@pinmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pin_name'>pin_name</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_drive_type'>drive_type</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rl</span><span class='tstring_end'>&#39;</span></span>
      <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
      <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>P:</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pin_patternorder-instance_method">
  
    #<strong>pin_patternorder</strong>(args)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>pin_patternorder method</p>

<pre class="code ruby"><code class="ruby">arguments: &lt;args&gt; from the message request
returns: &quot;P:&quot; or error message

This method is used to define the order
for pin vector data.</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/sequencer.rb', line 362</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pin_patternorder'>pin_patternorder</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_argarr'>argarr</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_index'>index</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_new_timeset'>new_timeset</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_argarr'>argarr</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span>
    <span class='ivar'>@patternorder</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pin'>pin</span>
    <span class='ivar'>@pinmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pin'>pin</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pattern_index'>pattern_index</span> <span class='op'>=</span> <span class='id identifier rubyid_index'>index</span>	<span class='comment'># pattern index stored in pin object now
</span>    <span class='ivar'>@patternpinindex</span><span class='lbracket'>[</span><span class='id identifier rubyid_pin'>pin</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_index'>index</span>		<span class='comment'># to be removed
</span>
    <span class='comment'># define default timing
</span>    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_index'>index</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='ivar'>@pinmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pin'>pin</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compare_event_data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compare_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='ivar'>@pinmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pin'>pin</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_index'>index</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>end</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>P:</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pin_timing-instance_method">
  
    #<strong>pin_timing</strong>(args)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>pin_timing method</p>

<pre class="code ruby"><code class="ruby">arguments: &lt;args&gt; from the message request
  Should be &#39;1,pin,-1,pin2,0,pin3,1&#39;
  First integer is timeset number
  If argument is &#39;&#39;, default timing is created
  Default timeset number is 0, this is used
  if no timeset is explicitly defined

  cycle arg:  0   1   2
  waveform : ___/***\___

returns &quot;P:&quot; or error message

This method sets up a time set.  All retrun
format pins are driven between 0 and 1 and
return between 1 and 2.  Non-return pins are
acted upon during the 0, 1 or 2 time period.</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/sequencer.rb', line 317</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pin_timing'>pin_timing</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_argarr'>argarr</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_tset_key'>tset_key</span> <span class='op'>=</span> <span class='id identifier rubyid_argarr'>argarr</span><span class='period'>.</span><span class='id identifier rubyid_delete_at'>delete_at</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_new_timeset'>new_timeset</span><span class='lparen'>(</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='ivar'>@cycletiming</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rparen'>)</span>
  <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_event'>event</span><span class='op'>|</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compare_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='comment'># process the information received
</span>  <span class='int'>0</span><span class='period'>.</span><span class='id identifier rubyid_step'>step</span><span class='lparen'>(</span><span class='id identifier rubyid_argarr'>argarr</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
    <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='id identifier rubyid_argarr'>argarr</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='comment'># reorder event number to allow rising/falling edges
</span>    <span class='id identifier rubyid_event'>event</span> <span class='op'>*=</span> <span class='int'>2</span>
    <span class='id identifier rubyid_pin_name'>pin_name</span> <span class='op'>=</span> <span class='id identifier rubyid_argarr'>argarr</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_event'>event</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@pinmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pin_name'>pin_name</span><span class='rbracket'>]</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compare_event_data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compare_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@pinmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pin_name'>pin_name</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='comment'># remove events with no associated pins
</span>  <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_uniq!'>uniq!</span>
  <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span>
  <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_event'>event</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>-=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_event'>event</span><span class='rbracket'>]</span>
      <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
      <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>drive_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
      <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compare_event_data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
      <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compare_event_pins</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>P:</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pin_timingv2-instance_method">
  
    #<strong>pin_timingv2</strong>(args)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>pin_timingv2 method</p>

<pre class="code ruby"><code class="ruby">arguments: &lt;args&gt; from the message request
  Should be &#39;1,drive,5,pin,10,pin2,|compare,0,pin3&#39;
  First integer is timeset number

returns &quot;P:&quot; or error message

This method sets up a time set.  Any arbitrary
waveform can be generated</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/sequencer.rb', line 191</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pin_timingv2'>pin_timingv2</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='comment'># get the tset number
</span>  <span class='id identifier rubyid_argarr'>argarr</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_tset_key'>tset_key</span> <span class='op'>=</span> <span class='id identifier rubyid_argarr'>argarr</span><span class='period'>.</span><span class='id identifier rubyid_delete_at'>delete_at</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_new_timeset'>new_timeset</span><span class='lparen'>(</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='id identifier rubyid_argarr'>argarr</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_invalid_pins'>invalid_pins</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='comment'># process and load the timeset
</span>  <span class='id identifier rubyid_waves'>waves</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>|</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_waves'>waves</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_w'>w</span><span class='op'>|</span>
    <span class='id identifier rubyid_argarr'>argarr</span> <span class='op'>=</span> <span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_wave_type'>wave_type</span> <span class='op'>=</span> <span class='id identifier rubyid_argarr'>argarr</span><span class='period'>.</span><span class='id identifier rubyid_delete_at'>delete_at</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_event_data_key'>event_data_key</span> <span class='op'>=</span> <span class='id identifier rubyid_wave_type'>wave_type</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_event_data</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_event_pins_key'>event_pins_key</span> <span class='op'>=</span> <span class='id identifier rubyid_wave_type'>wave_type</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_event_pins</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_w'>w</span> <span class='op'>=</span> <span class='id identifier rubyid_argarr'>argarr</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_events'>events</span> <span class='op'>=</span> <span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_events'>events</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span>
      <span class='id identifier rubyid_argarr'>argarr</span> <span class='op'>=</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_event_key'>event_key</span> <span class='op'>=</span> <span class='id identifier rubyid_argarr'>argarr</span><span class='period'>.</span><span class='id identifier rubyid_delete_at'>delete_at</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span>
      <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_event_key'>event_key</span>
      <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event_data_key'>event_data_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event_key'>event_key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event_data_key'>event_data_key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_event_key'>event_key</span><span class='rparen'>)</span>
      <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event_data_key'>event_data_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event_key'>event_key</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_argarr'>argarr</span><span class='period'>.</span><span class='id identifier rubyid_delete_at'>delete_at</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>
      <span class='comment'># now load the pins for this event
</span>      <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event_pins_key'>event_pins_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event_key'>event_key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event_pins_key'>event_pins_key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_event_key'>event_key</span><span class='rparen'>)</span>
      <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event_pins_key'>event_pins_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event_key'>event_key</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_argarr'>argarr</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='ivar'>@pinmap</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_pin'>pin</span><span class='rparen'>)</span>
          <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event_pins_key'>event_pins_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_event_key'>event_key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@pinmap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pin'>pin</span><span class='rbracket'>]</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_invalid_pins'>invalid_pins</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pin'>pin</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span> <span class='comment'># of argarr.each
</span>    <span class='kw'>end</span> <span class='comment'># of events.each
</span>  <span class='kw'>end</span> <span class='comment'># of waves.each
</span>  <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_uniq!'>uniq!</span>
  <span class='ivar'>@cycletiming</span><span class='lbracket'>[</span><span class='id identifier rubyid_tset_key'>tset_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span>

  <span class='comment'># return result
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_invalid_pins'>invalid_pins</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>F:Invalid pins (not in pinmap): </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_invalid_pins'>invalid_pins</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>P:</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="processmessage-instance_method">
  
    #<strong>processmessage</strong>(message)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>processmessage method</p>

<pre class="code ruby"><code class="ruby">arguments: message
  message format is &lt;group&gt;_&lt;command&gt;:&lt;args&gt;
returns: message response

This method splits a message into it&#39;s
command and arguments and passes this
information to the method that performs
the requested command</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/server/sequencer.rb', line 123</span>

<span class='kw'>def</span> <span class='id identifier rubyid_processmessage'>processmessage</span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_command'>command</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='kw'>case</span> <span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pin_assign</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin_assign'>pin_assign</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pin_patternorder</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin_patternorder'>pin_patternorder</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pin_cycle</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin_cycle'>pin_cycle</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pin_clear</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin_clear'>pin_clear</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pin_format</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin_format'>pin_format</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pin_timing</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin_timing'>pin_timing</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pin_timingv2</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_pin_timingv2'>pin_timingv2</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>version</span><span class='tstring_end'>&#39;</span></span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>P:</span><span class='embexpr_beg'>#{</span><span class='ivar'>@version</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Error Invalid command: </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Nov 16 14:16:45 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.8 (ruby-2.1.5).
</div>

    </div>
  </body>
</html>