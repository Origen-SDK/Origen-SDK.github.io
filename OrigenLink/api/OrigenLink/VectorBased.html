<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: OrigenLink::VectorBased
  
    &mdash; origen_link 0.4.2
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "OrigenLink::VectorBased";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (V)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../OrigenLink.html" title="OrigenLink (module)">OrigenLink</a></span></span>
     &raquo; 
    <span class="title">VectorBased</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: OrigenLink::VectorBased
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">OrigenLink::VectorBased</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="CaptureSupport.html" title="OrigenLink::CaptureSupport (module)">CaptureSupport</a></span>, <span class='object_link'><a href="ConfigurationCommands.html" title="OrigenLink::ConfigurationCommands (module)">ConfigurationCommands</a></span>, <span class='object_link'><a href="ServerCom.html" title="OrigenLink::ServerCom (module)">ServerCom</a></span>, OrigenTesters::VectorBasedTester</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/origen_link/vector_based.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>OrigenLink::VectorBased</p>

<pre class="code ruby"><code class="ruby">This class describes the OrigenLink app plug-in.  Vector data that Origen
generates is intercepted and sent to a debug device (typically will be a Udoo
Neo - www.udoo.org).  The debug device can be any device that is able to serve
a TCP socket, recieve and interpret the command set used by this class and send
the expected responses.</code></pre>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="Test/VectorBased.html" title="OrigenLink::Test::VectorBased (class)">Test::VectorBased</a></span></p>
</div>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#captured_data-instance_method" title="#captured_data (instance method)">#<strong>captured_data</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Data captured using tester.capture.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#comment_batch-instance_method" title="#comment_batch (instance method)">#<strong>comment_batch</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Array of comments received through push_comment.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#fail_count-instance_method" title="#fail_count (instance method)">#<strong>fail_count</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The number of cycles that fail.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#initial_comm_sent-instance_method" title="#initial_comm_sent (instance method)">#<strong>initial_comm_sent</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Indicates that communication has been initiated with the server.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#store_pins_batch-instance_method" title="#store_pins_batch (instance method)">#<strong>store_pins_batch</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Used with capture.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#total_comm_time-instance_method" title="#total_comm_time (instance method)">#<strong>total_comm_time</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The accumulated total time spent communicating with the server.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#total_connect_time-instance_method" title="#total_connect_time (instance method)">#<strong>total_connect_time</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The accumulated total time spent establishing the server connection.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#total_packets-instance_method" title="#total_packets (instance method)">#<strong>total_packets</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The accumulated total number of packets sent to the server.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#total_recv_time-instance_method" title="#total_recv_time (instance method)">#<strong>total_recv_time</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The accumulated total time spent receiving from the server app.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#total_xmit_time-instance_method" title="#total_xmit_time (instance method)">#<strong>total_xmit_time</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The accumulated total time spent transmitting to the server app.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#tsets_programmed-instance_method" title="#tsets_programmed (instance method)">#<strong>tsets_programmed</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The look up of programmed tsets.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_name-instance_method" title="#user_name (instance method)">#<strong>user_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The name of the user running OrigenLink.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#vector_batch-instance_method" title="#vector_batch (instance method)">#<strong>vector_batch</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Array of vectors waiting to be sent to the sever.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#vector_count-instance_method" title="#vector_count (instance method)">#<strong>vector_count</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The number of vector cycles generated.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#vector_repeatcount-instance_method" title="#vector_repeatcount (instance method)">#<strong>vector_repeatcount</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The accumulated number of times push_vector was called with the present
tset and pin info.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#finalize_pattern-instance_method" title="#finalize_pattern (instance method)">#<strong>finalize_pattern</strong>(output_file)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>finalize_pattern   This method flushes the final vector.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fix_ordered_pins-instance_method" title="#fix_ordered_pins (instance method)">#<strong>fix_ordered_pins</strong>(options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>fix_ordered_pins(options)   This method is called the first time
push_vector is called.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#flush_vector-instance_method" title="#flush_vector (instance method)">#<strong>flush_vector</strong>(programmed_data = &#39;&#39;, tset = &#39;&#39;, local_repeat = 1)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>flush_vector   Just as the name suggests, this method “flushes” a vector.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(address, port, options = {})  &#x21d2; VectorBased </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of VectorBased.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize_pattern-instance_method" title="#initialize_pattern (instance method)">#<strong>initialize_pattern</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>initialize_pattern   This method initializes variables at the start of a
pattern.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#method_missing-instance_method" title="#method_missing (instance method)">#<strong>method_missing</strong>(m, *args, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>warn but don&#39;t fail if an api for another tester is not implmented.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ordered_pins-instance_method" title="#ordered_pins (instance method)">#<strong>ordered_pins</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>ordered_pins(options = {})   expand pin groups to their component pins
after the pin ordering is completed   OrigenLink always operates on
individual pins.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#process_response-instance_method" title="#process_response (instance method)">#<strong>process_response</strong>(response, output_file = &#39;&#39;)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>process_response   This method will process a server response.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#process_vector_response-instance_method" title="#process_vector_response (instance method)">#<strong>process_vector_response</strong>(vector_response, output_obj = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>process_vector_response   This method exists to prevent code duplication
when handling an array of   batched responses versus a single response
string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#push_comment-instance_method" title="#push_comment (instance method)">#<strong>push_comment</strong>(msg)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>push_comment   This method intercepts comments so they can be correctly
placed in the output file   when vector batching is used.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#push_vector-instance_method" title="#push_vector (instance method)">#<strong>push_vector</strong>(options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>push_vector   This method intercepts vector data from Origen, removes white
spaces and compresses repeats.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#synchronize-instance_method" title="#synchronize (instance method)">#<strong>synchronize</strong>(output_file = &#39;&#39;)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>synchronize   This method will synchronize the DUT state with Origen.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>to_s   returns &#39;OrigenLink::VectorBased&#39;.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#transaction-instance_method" title="#transaction (instance method)">#<strong>transaction</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>transaction   returns true/false indicating whether the transaction passed 
true = pass   false = fail.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#wait-instance_method" title="#wait (instance method)">#<strong>wait</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>wait a fixed amount of time   This method will run the Sleep method to wait
rather than generating cycles.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ConfigurationCommands.html" title="OrigenLink::ConfigurationCommands (module)">ConfigurationCommands</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ConfigurationCommands.html#get_tset_number-instance_method" title="OrigenLink::ConfigurationCommands#get_tset_number (method)">#get_tset_number</a></span>, <span class='object_link'><a href="ConfigurationCommands.html#pinformat=-instance_method" title="OrigenLink::ConfigurationCommands#pinformat= (method)">#pinformat=</a></span>, <span class='object_link'><a href="ConfigurationCommands.html#pinmap=-instance_method" title="OrigenLink::ConfigurationCommands#pinmap= (method)">#pinmap=</a></span>, <span class='object_link'><a href="ConfigurationCommands.html#pinorder=-instance_method" title="OrigenLink::ConfigurationCommands#pinorder= (method)">#pinorder=</a></span>, <span class='object_link'><a href="ConfigurationCommands.html#pintiming=-instance_method" title="OrigenLink::ConfigurationCommands#pintiming= (method)">#pintiming=</a></span>, <span class='object_link'><a href="ConfigurationCommands.html#process_timeset-instance_method" title="OrigenLink::ConfigurationCommands#process_timeset (method)">#process_timeset</a></span>, <span class='object_link'><a href="ConfigurationCommands.html#replace_tset_name_w_number-instance_method" title="OrigenLink::ConfigurationCommands#replace_tset_name_w_number (method)">#replace_tset_name_w_number</a></span>, <span class='object_link'><a href="ConfigurationCommands.html#set_pinorder-instance_method" title="OrigenLink::ConfigurationCommands#set_pinorder (method)">#set_pinorder</a></span>, <span class='object_link'><a href="ConfigurationCommands.html#tset_argstr_from_events-instance_method" title="OrigenLink::ConfigurationCommands#tset_argstr_from_events (method)">#tset_argstr_from_events</a></span>, <span class='object_link'><a href="ConfigurationCommands.html#tset_warning-instance_method" title="OrigenLink::ConfigurationCommands#tset_warning (method)">#tset_warning</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="CaptureSupport.html" title="OrigenLink::CaptureSupport (module)">CaptureSupport</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="CaptureSupport.html#capture-instance_method" title="OrigenLink::CaptureSupport#capture (method)">#capture</a></span>, <span class='object_link'><a href="CaptureSupport.html#store-instance_method" title="OrigenLink::CaptureSupport#store (method)">#store</a></span>, <span class='object_link'><a href="CaptureSupport.html#store_next_cycle-instance_method" title="OrigenLink::CaptureSupport#store_next_cycle (method)">#store_next_cycle</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ServerCom.html" title="OrigenLink::ServerCom (module)">ServerCom</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ServerCom.html#send_batch-instance_method" title="OrigenLink::ServerCom#send_batch (method)">#send_batch</a></span>, <span class='object_link'><a href="ServerCom.html#send_cmd-instance_method" title="OrigenLink::ServerCom#send_cmd (method)">#send_cmd</a></span>, <span class='object_link'><a href="ServerCom.html#setup_cmd_response_logger-instance_method" title="OrigenLink::ServerCom#setup_cmd_response_logger (method)">#setup_cmd_response_logger</a></span></p>

  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(address, port, options = {})  &#x21d2; <tt><span class='object_link'><a href="" title="OrigenLink::VectorBased (class)">VectorBased</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of VectorBased</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 52</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@address</span> <span class='op'>=</span> <span class='id identifier rubyid_address'>address</span>
  <span class='ivar'>@port</span> <span class='op'>=</span> <span class='id identifier rubyid_port'>port</span>
  <span class='ivar'>@fail_count</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@vector_count</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@previous_vectordata</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@previous_tset</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@vector_repeatcount</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@total_comm_time</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@total_connect_time</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@total_xmit_time</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@total_recv_time</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@total_packets</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@max_packet_time</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@max_receive_time</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@tsets_programmed</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@tsets_warned</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@tset_count</span> <span class='op'>=</span> <span class='int'>1</span>
  <span class='ivar'>@store_pins</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@captured_data</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='comment'># A tester seems to be unable to register as a callback handler, so for now instantiating a
</span>  <span class='comment'># dedicated object to implement the handlers related to this tester
</span>  <span class='const'><span class='object_link'><a href="CallbackHandlers.html" title="OrigenLink::CallbackHandlers (class)">CallbackHandlers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@vector_batch</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@store_pins_batch</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@comment_batch</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@batch_vectors</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@pattern_link_messages</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@pattern_comments</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@user_name</span> <span class='op'>=</span> <span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_getlogin'>getlogin</span>
  <span class='ivar'>@initial_comm_sent</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@initial_vector_pushed</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@pinorder</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@pinmap_hash</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@batched_setup_cmds</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='comment'># check the server version against the plug-in version
</span>  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_send_cmd'>send_cmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>version</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Error</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>	<span class='comment'># prevent run time error in regression tests
</span>  <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_chomp!'>chomp!</span>
  <span class='id identifier rubyid_server_version'>server_version</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_server_version'>server_version</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>?.?.? - 0.2.0 or earlier</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_response'>response</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>Error</span><span class='regexp_end'>/</span></span>
  <span class='id identifier rubyid_app_version'>app_version</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../OrigenLink.html" title="OrigenLink (module)">OrigenLink</a></span></span><span class='op'>::</span><span class='const'>VERSION</span> <span class='comment'># Origen.app(:origen_link).version
</span>  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Plug-in link version: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_app_version'>app_version</span><span class='embexpr_end'>}</span><span class='tstring_content'>, Server link version: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_server_version'>server_version</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_app_version'>app_version</span> <span class='op'>==</span> <span class='id identifier rubyid_server_version'>server_version</span>
    <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Server version and plug-in link versions do not match</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>
<div id="method_missing_details" class="method_details_list">
  <h2>Dynamic Method Handling</h2>
  <p class="notice this">
    This class handles dynamic methods through the <tt>method_missing</tt> method
    
  </p>
  
    <div class="method_details first">
  <h3 class="signature first" id="method_missing-instance_method">
  
    #<strong>method_missing</strong>(m, *args, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>warn but don&#39;t fail if an api for another tester is not implmented</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


102
103
104</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 102</span>

<span class='kw'>def</span> <span class='id identifier rubyid_method_missing'>method_missing</span><span class='lparen'>(</span><span class='id identifier rubyid_m'>m</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_m'>m</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not implemented by origen_link and will be ignored</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="captured_data-instance_method">
  
    #<strong>captured_data</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Data captured using tester.capture</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 40</span>

<span class='kw'>def</span> <span class='id identifier rubyid_captured_data'>captured_data</span>
  <span class='ivar'>@captured_data</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="comment_batch-instance_method">
  
    #<strong>comment_batch</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Array of comments received through push_comment</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 46</span>

<span class='kw'>def</span> <span class='id identifier rubyid_comment_batch'>comment_batch</span>
  <span class='ivar'>@comment_batch</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="fail_count=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="fail_count-instance_method">
  
    #<strong>fail_count</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The number of cycles that fail</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 22</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fail_count'>fail_count</span>
  <span class='ivar'>@fail_count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="initial_comm_sent-instance_method">
  
    #<strong>initial_comm_sent</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Indicates that communication has been initiated with the server</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 50</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initial_comm_sent'>initial_comm_sent</span>
  <span class='ivar'>@initial_comm_sent</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="store_pins_batch-instance_method">
  
    #<strong>store_pins_batch</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Used with capture</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 44</span>

<span class='kw'>def</span> <span class='id identifier rubyid_store_pins_batch'>store_pins_batch</span>
  <span class='ivar'>@store_pins_batch</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="total_comm_time-instance_method">
  
    #<strong>total_comm_time</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The accumulated total time spent communicating with the server</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 26</span>

<span class='kw'>def</span> <span class='id identifier rubyid_total_comm_time'>total_comm_time</span>
  <span class='ivar'>@total_comm_time</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="total_connect_time-instance_method">
  
    #<strong>total_connect_time</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The accumulated total time spent establishing the server connection</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 28</span>

<span class='kw'>def</span> <span class='id identifier rubyid_total_connect_time'>total_connect_time</span>
  <span class='ivar'>@total_connect_time</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="total_packets-instance_method">
  
    #<strong>total_packets</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The accumulated total number of packets sent to the server</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 34</span>

<span class='kw'>def</span> <span class='id identifier rubyid_total_packets'>total_packets</span>
  <span class='ivar'>@total_packets</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="total_recv_time-instance_method">
  
    #<strong>total_recv_time</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The accumulated total time spent receiving from the server app</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_total_recv_time'>total_recv_time</span>
  <span class='ivar'>@total_recv_time</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="total_xmit_time-instance_method">
  
    #<strong>total_xmit_time</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The accumulated total time spent transmitting to the server app</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 30</span>

<span class='kw'>def</span> <span class='id identifier rubyid_total_xmit_time'>total_xmit_time</span>
  <span class='ivar'>@total_xmit_time</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="tsets_programmed-instance_method">
  
    #<strong>tsets_programmed</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The look up of programmed tsets.  Names are converted to a unique number
identifier</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 38</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tsets_programmed'>tsets_programmed</span>
  <span class='ivar'>@tsets_programmed</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="user_name-instance_method">
  
    #<strong>user_name</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The name of the user running OrigenLink</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_name'>user_name</span>
  <span class='ivar'>@user_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="vector_batch-instance_method">
  
    #<strong>vector_batch</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Array of vectors waiting to be sent to the sever</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 42</span>

<span class='kw'>def</span> <span class='id identifier rubyid_vector_batch'>vector_batch</span>
  <span class='ivar'>@vector_batch</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="vector_count-instance_method">
  
    #<strong>vector_count</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The number of vector cycles generated</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 24</span>

<span class='kw'>def</span> <span class='id identifier rubyid_vector_count'>vector_count</span>
  <span class='ivar'>@vector_count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="vector_repeatcount-instance_method">
  
    #<strong>vector_repeatcount</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The accumulated number of times push_vector was called with the present
tset and pin info</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_vector_repeatcount'>vector_repeatcount</span>
  <span class='ivar'>@vector_repeatcount</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="finalize_pattern-instance_method">
  
    #<strong>finalize_pattern</strong>(output_file)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>finalize_pattern</p>

<pre class="code ruby"><code class="ruby">This method flushes the final vector.  Then, it logs success or failure of the
pattern execution along with execution time information.</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 410</span>

<span class='kw'>def</span> <span class='id identifier rubyid_finalize_pattern'>finalize_pattern</span><span class='lparen'>(</span><span class='id identifier rubyid_output_file'>output_file</span><span class='rparen'>)</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Pattern generation completed. Sending all stored vector data</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span><span class='lparen'>(</span><span class='id identifier rubyid_output_file'>output_file</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_send_cmd'>send_cmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>session_end</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='comment'># for debug, report communication times
</span>  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>total communication time: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@total_comm_time</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>total connect time: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@total_connect_time</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>total transmit time: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@total_xmit_time</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>total receive time: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@total_recv_time</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>total packets: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@total_packets</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>total time per packet: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@total_comm_time</span> <span class='op'>/</span> <span class='ivar'>@total_packets</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connect time per packet: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@total_connect_time</span> <span class='op'>/</span> <span class='ivar'>@total_packets</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>transmit time per packet: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@total_xmit_time</span> <span class='op'>/</span> <span class='ivar'>@total_packets</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>receive time per packet: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@total_recv_time</span> <span class='op'>/</span> <span class='ivar'>@total_packets</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>max packet time: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@max_packet_time</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>max duration command - </span><span class='embexpr_beg'>#{</span><span class='ivar'>@longest_packet</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>max receive time: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@max_receive_time</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@fail_count</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='comment'># Origen.log.success(&quot;PASS - pattern execution passed (#{@vector_count} vectors pass)&quot;)
</span>    <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_app'>app</span><span class='period'>.</span><span class='id identifier rubyid_stats'>stats</span><span class='period'>.</span><span class='id identifier rubyid_report_pass'>report_pass</span>
  <span class='kw'>else</span>
    <span class='comment'># Origen.log.error(&quot;FAIL - pattern execution failed (#{@fail_count} failures)&quot;)
</span>    <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_app'>app</span><span class='period'>.</span><span class='id identifier rubyid_stats'>stats</span><span class='period'>.</span><span class='id identifier rubyid_report_fail'>report_fail</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_commands_file'>commands_file</span> <span class='op'>=</span> <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_app'>app</span><span class='period'>.</span><span class='id identifier rubyid_current_job'>current_job</span><span class='period'>.</span><span class='id identifier rubyid_output_file'>output_file</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_link_cmds.txt</span><span class='tstring_end'>&#39;</span></span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_commands_file'>commands_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pin_assign:</span><span class='embexpr_beg'>#{</span><span class='ivar'>@pinmap</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pin_patternorder:</span><span class='embexpr_beg'>#{</span><span class='ivar'>@pinorder</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='ivar'>@pattern_link_messages</span><span class='period'>.</span><span class='id identifier rubyid_each_index'>each_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
      <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span><span class='lparen'>(</span><span class='ivar'>@pattern_link_messages</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span><span class='lparen'>(</span><span class='ivar'>@pattern_comments</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@pattern_comments</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:session_end</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fix_ordered_pins-instance_method">
  
    #<strong>fix_ordered_pins</strong>(options)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>fix_ordered_pins(options)</p>

<pre class="code ruby"><code class="ruby">This method is called the first time push_vector is called.

This method will create the pinmap from pin meta data if needed.

This method will remove any pin data that doesn&#39;t correspond
to a pin in the link pinmap and remove those pins from the
@ordered_pins_cache to prevent them from being rendered
on the next cycle.
This will prevent unwanted behavior.  The link server
expects only pin data for pins in the pinmap.</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170
171
172
173
174
175
176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 168</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fix_ordered_pins'>fix_ordered_pins</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='comment'># remove non-mapped pins from the ordered pins cache - prevents them appearing in future push_vector calls
</span>  <span class='id identifier rubyid_orig_size'>orig_size</span> <span class='op'>=</span> <span class='ivar'>@ordered_pins_cache</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
  <span class='ivar'>@ordered_pins_cache</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='op'>!</span><span class='ivar'>@pinmap_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OrigenLink removed non-mapped pins from the cached pin order array</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_orig_size'>orig_size</span> <span class='op'>==</span> <span class='ivar'>@ordered_pins_cache</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
  <span class='comment'># update pin values for the current  push_vector call
</span>  <span class='id identifier rubyid_vals'>vals</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@ordered_pins_cache</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='id identifier rubyid_vals'>vals</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_to_vector'>to_vector</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin_vals</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_vals'>vals</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="flush_vector-instance_method">
  
    #<strong>flush_vector</strong>(programmed_data = &#39;&#39;, tset = &#39;&#39;, local_repeat = 1)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>flush_vector</p>

<pre class="code ruby"><code class="ruby">Just as the name suggests, this method &quot;flushes&quot; a vector.  This is necessary because
of repeat compression (a vector isn&#39;t sent until different vector data is encountered)</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 234</span>

<span class='kw'>def</span> <span class='id identifier rubyid_flush_vector'>flush_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_programmed_data'>programmed_data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_tset'>tset</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_local_repeat'>local_repeat</span> <span class='op'>=</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='comment'># prevent server crash when vector_flush is used during debug
</span>  <span class='kw'>unless</span> <span class='ivar'>@previous_vectordata</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>if</span> <span class='ivar'>@vector_repeatcount</span> <span class='op'>&gt;</span> <span class='int'>1</span>
      <span class='id identifier rubyid_repeat_prefix'>repeat_prefix</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>repeat</span><span class='embexpr_beg'>#{</span><span class='ivar'>@vector_repeatcount</span><span class='embexpr_end'>}</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_repeat_prefix'>repeat_prefix</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='ivar'>@tsets_programmed</span><span class='lbracket'>[</span><span class='ivar'>@previous_tset</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_tset_prefix'>tset_prefix</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tset</span><span class='embexpr_beg'>#{</span><span class='ivar'>@tsets_programmed</span><span class='lbracket'>[</span><span class='ivar'>@previous_tset</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='comment'># The hash of programmed tsets does not contain this tset
</span>      <span class='comment'># Check the timing api to see if there is timing info there
</span>      <span class='comment'># and send the timing info to the link server
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_dut'>dut</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:timeset</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_tset_prefix'>tset_prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_process_timeset'>process_timeset</span><span class='lparen'>(</span><span class='id identifier rubyid_tset'>tset</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_tset_warning'>tset_warning</span><span class='lparen'>(</span><span class='id identifier rubyid_tset'>tset</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_tset_prefix'>tset_prefix</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='ivar'>@batch_vectors</span>
      <span class='ivar'>@vector_batch</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pin_cycle:</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_tset_prefix'>tset_prefix</span> <span class='op'>+</span> <span class='id identifier rubyid_repeat_prefix'>repeat_prefix</span> <span class='op'>+</span> <span class='ivar'>@previous_vectordata</span>
      <span class='comment'># store capture pins for batch processing
</span>      <span class='kw'>unless</span> <span class='ivar'>@store_pins</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='ivar'>@store_pins_batch</span><span class='lbracket'>[</span><span class='ivar'>@vector_batch</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@store_pins</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_process_vector_response'>process_vector_response</span><span class='lparen'>(</span><span class='id identifier rubyid_send_cmd'>send_cmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pin_cycle</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_tset_prefix'>tset_prefix</span> <span class='op'>+</span> <span class='id identifier rubyid_repeat_prefix'>repeat_prefix</span> <span class='op'>+</span> <span class='ivar'>@previous_vectordata</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># make sure that only requested vectors are stored when batching is enabled
</span>    <span class='ivar'>@store_pins</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='ivar'>@vector_repeatcount</span> <span class='op'>=</span> <span class='id identifier rubyid_local_repeat'>local_repeat</span>
  <span class='ivar'>@previous_vectordata</span> <span class='op'>=</span> <span class='id identifier rubyid_programmed_data'>programmed_data</span>
  <span class='ivar'>@previous_tset</span> <span class='op'>=</span> <span class='id identifier rubyid_tset'>tset</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="initialize_pattern-instance_method">
  
    #<strong>initialize_pattern</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>initialize_pattern</p>

<pre class="code ruby"><code class="ruby">This method initializes variables at the start of a pattern.
It is called automatically when pattern generation starts.</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 384</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize_pattern'>initialize_pattern</span>
  <span class='ivar'>@fail_count</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@vector_count</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@vector_batch</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='kw'>true</span> <span class='rbrace'>}</span>
  <span class='ivar'>@store_pins_batch</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
  <span class='ivar'>@comment_batch</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
  <span class='ivar'>@pattern_link_messages</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='kw'>true</span> <span class='rbrace'>}</span>
  <span class='ivar'>@pattern_comments</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>

  <span class='ivar'>@total_packets</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@total_comm_time</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@total_connect_time</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@total_xmit_time</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@total_recv_time</span> <span class='op'>=</span> <span class='int'>0</span>

  <span class='comment'># moved to push_vector to allow auto-pinmap
</span>  <span class='comment'># if @pinmap.nil?
</span>  <span class='comment'>#   Origen.log.error(&#39;OrigenLink: pinmap has not been setup, use tester.pinmap= to initialize a pinmap&#39;)
</span>  <span class='comment'># else
</span>  <span class='comment'>#   Origen.log.debug(&#39;OrigenLink: executing pattern with pinmap:&#39; + @pinmap.to_s)
</span>  <span class='comment'># end
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ordered_pins-instance_method">
  
    #<strong>ordered_pins</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>ordered_pins(options = {})</p>

<pre class="code ruby"><code class="ruby">expand pin groups to their component pins after the pin ordering is completed
OrigenLink always operates on individual pins.  This saves other methods
from each needing to handle pins and/or groups of pins.</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 128</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ordered_pins'>ordered_pins</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>super</span>
  <span class='id identifier rubyid_groups'>groups</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='id identifier rubyid_groups'>groups</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_p'>p</span> <span class='kw'>if</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_groups'>groups</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_group'>group</span><span class='op'>|</span>
    <span class='comment'># locate this group in the result array
</span>    <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_group'>group</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_delete_at'>delete_at</span><span class='lparen'>(</span><span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_dut'>dut</span><span class='period'>.</span><span class='id identifier rubyid_pins'>pins</span><span class='lparen'>(</span><span class='id identifier rubyid_group'>group</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_sub_pin'>sub_pin</span><span class='op'>|</span>
      <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_insert'>insert</span><span class='lparen'>(</span><span class='id identifier rubyid_i'>i</span><span class='comma'>,</span> <span class='id identifier rubyid_sub_pin'>sub_pin</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_i'>i</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='ivar'>@pinmap</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='comment'># create the pinmap if pin metadata was provided
</span>    <span class='id identifier rubyid_pinarr'>pinarr</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_meta'>meta</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:link_io</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_pinarr'>pinarr</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
        <span class='id identifier rubyid_pinarr'>pinarr</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pin'>pin</span><span class='period'>.</span><span class='id identifier rubyid_meta'>meta</span><span class='lbracket'>[</span><span class='symbol'>:link_io</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_pinmap'>pinmap</span> <span class='op'>=</span> <span class='id identifier rubyid_pinarr'>pinarr</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_pinarr'>pinarr</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="process_response-instance_method">
  
    #<strong>process_response</strong>(response, output_file = &#39;&#39;)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>process_response</p>

<pre class="code ruby"><code class="ruby">This method will process a server response.  Send log info to the output,
keep track of fail count and captured data</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 291</span>

<span class='kw'>def</span> <span class='id identifier rubyid_process_response'>process_response</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='comma'>,</span> <span class='id identifier rubyid_output_file'>output_file</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
    <span class='comment'># if called from finalize_pattern -&gt; synchronize, open the output_file and store results
</span>    <span class='id identifier rubyid_output_obj'>output_obj</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_output_obj'>output_obj</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_output_file'>output_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a+</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_output_file'>output_file</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>

    <span class='comment'># in case there were only comments and no vectors, place comments (if any)
</span>    <span class='id identifier rubyid_microcode'>microcode</span> <span class='ivar'>@comment_batch</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>0</span>

    <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_each_index'>each_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
      <span class='comment'># restore store pins state for processing
</span>      <span class='kw'>if</span> <span class='ivar'>@store_pins_batch</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span><span class='rparen'>)</span>
        <span class='ivar'>@store_pins</span> <span class='op'>=</span> <span class='ivar'>@store_pins_batch</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span>
      <span class='kw'>else</span>
        <span class='ivar'>@store_pins</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_process_vector_response'>process_vector_response</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_output_obj'>output_obj</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='ivar'>@comment_batch</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_output_file'>output_file</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
          <span class='id identifier rubyid_microcode'>microcode</span> <span class='ivar'>@comment_batch</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span>
        <span class='kw'>else</span>
          <span class='comment'># get the header placed correctly, the below code doesn&#39;t work
</span>          <span class='comment'># if index == response.length - 1
</span>          <span class='comment'>#   output_obj.puts &#39;last comment&#39;
</span>          <span class='comment'>#   output_obj.lineno = 0
</span>          <span class='comment'># end
</span>          <span class='id identifier rubyid_output_obj'>output_obj</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span><span class='lparen'>(</span><span class='ivar'>@comment_batch</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_output_obj'>output_obj</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span> <span class='kw'>unless</span> <span class='id identifier rubyid_output_file'>output_file</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_process_vector_response'>process_vector_response</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="process_vector_response-instance_method">
  
    #<strong>process_vector_response</strong>(vector_response, output_obj = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>process_vector_response</p>

<pre class="code ruby"><code class="ruby">This method exists to prevent code duplication when handling an array of
batched responses versus a single response string.</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 330</span>

<span class='kw'>def</span> <span class='id identifier rubyid_process_vector_response'>process_vector_response</span><span class='lparen'>(</span><span class='id identifier rubyid_vector_response'>vector_response</span><span class='comma'>,</span> <span class='id identifier rubyid_output_obj'>output_obj</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>unless</span> <span class='ivar'>@store_pins</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  (Captured </span><span class='embexpr_beg'>#{</span><span class='ivar'>@store_pins</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>)\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_capture_data'>capture_data</span><span class='lparen'>(</span><span class='id identifier rubyid_vector_response'>vector_response</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_vector_response'>vector_response</span><span class='period'>.</span><span class='id identifier rubyid_strip!'>strip!</span>
    <span class='comment'># vector_response += msg
</span>  <span class='kw'>end</span>
  <span class='id identifier rubyid_vector_cycles'>vector_cycles</span> <span class='op'>=</span> <span class='id identifier rubyid_vector_response'>vector_response</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_expected_msg'>expected_msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_expected_msg'>expected_msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_vector_cycles'>vector_cycles</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span> <span class='kw'>if</span> <span class='id identifier rubyid_vector_cycles'>vector_cycles</span><span class='lbracket'>[</span><span class='id identifier rubyid_vector_cycles'>vector_cycles</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>Expected</span><span class='regexp_end'>/</span></span>
  <span class='id identifier rubyid_pfstatus'>pfstatus</span> <span class='op'>=</span> <span class='id identifier rubyid_vector_cycles'>vector_cycles</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span>
  <span class='id identifier rubyid_vector_cycles'>vector_cycles</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_vector_cycles'>vector_cycles</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_byteslice'>byteslice</span><span class='lparen'>(</span><span class='int'>2</span><span class='comma'>,</span> <span class='id identifier rubyid_vector_cycles'>vector_cycles</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>2</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_vector_cycles'>vector_cycles</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_cycle'>cycle</span><span class='op'>|</span>
    <span class='id identifier rubyid_thiscyclefail'>thiscyclefail</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_bad_pin_data'>bad_pin_data</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_pfstatus'>pfstatus</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>F</span><span class='tstring_end'>&#39;</span></span>
      <span class='comment'># check to see if this cycle failed
</span>      <span class='int'>0</span><span class='period'>.</span><span class='id identifier rubyid_upto'>upto</span><span class='lparen'>(</span><span class='id identifier rubyid_cycle'>cycle</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
        <span class='id identifier rubyid_bad_pin_data'>bad_pin_data</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_cycle'>cycle</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>W</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_thiscyclefail'>thiscyclefail</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_cycle'>cycle</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>H</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_expected_msg'>expected_msg</span><span class='lbracket'>[</span><span class='id identifier rubyid_expected_msg'>expected_msg</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='id identifier rubyid_cycle'>cycle</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>+</span> <span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>L</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_thiscyclefail'>thiscyclefail</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_cycle'>cycle</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>L</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_expected_msg'>expected_msg</span><span class='lbracket'>[</span><span class='id identifier rubyid_expected_msg'>expected_msg</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='id identifier rubyid_cycle'>cycle</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>+</span> <span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>H</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_thiscyclefail'>thiscyclefail</span>
      <span class='id identifier rubyid_expected_msg_prnt'>expected_msg_prnt</span> <span class='op'>=</span> <span class='id identifier rubyid_expected_msg'>expected_msg</span>
      <span class='id identifier rubyid_prepend'>prepend</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>F:</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_expected_msg_prnt'>expected_msg_prnt</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_prepend'>prepend</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>P:</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_bad_pin_data'>bad_pin_data</span>
      <span class='id identifier rubyid_expected_msg_prnt'>expected_msg_prnt</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>W indicates no operation, check timeset definition</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_prepend'>prepend</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>F:</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_output_obj'>output_obj</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_microcode'>microcode</span> <span class='id identifier rubyid_prepend'>prepend</span> <span class='op'>+</span> <span class='id identifier rubyid_cycle'>cycle</span> <span class='op'>+</span> <span class='id identifier rubyid_expected_msg_prnt'>expected_msg_prnt</span> <span class='op'>+</span> <span class='id identifier rubyid_msg'>msg</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_output_obj'>output_obj</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span><span class='lparen'>(</span><span class='id identifier rubyid_prepend'>prepend</span> <span class='op'>+</span> <span class='id identifier rubyid_cycle'>cycle</span> <span class='op'>+</span> <span class='id identifier rubyid_expected_msg_prnt'>expected_msg_prnt</span> <span class='op'>+</span> <span class='id identifier rubyid_msg'>msg</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_vector_response'>vector_response</span><span class='period'>.</span><span class='id identifier rubyid_chr'>chr</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>P</span><span class='tstring_end'>&#39;</span></span>
    <span class='comment'># TODO: Put this back with an option to disable, based on a serial or parallel interface being used
</span>    <span class='comment'># microcode &#39;E:&#39; + @previous_vectordata + &#39; //expected data for previous vector&#39;
</span>    <span class='ivar'>@fail_count</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="push_comment-instance_method">
  
    #<strong>push_comment</strong>(msg)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>push_comment</p>

<pre class="code ruby"><code class="ruby">This method intercepts comments so they can be correctly placed in the output file
when vector batching is used</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


109
110
111
112
113
114
115
116
117
118
119
120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 109</span>

<span class='kw'>def</span> <span class='id identifier rubyid_push_comment'>push_comment</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@batch_vectors</span>
    <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='ivar'>@vector_batch</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
    <span class='kw'>if</span> <span class='ivar'>@comment_batch</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
      <span class='ivar'>@comment_batch</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@comment_batch</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_msg'>msg</span>
    <span class='kw'>else</span>
      <span class='ivar'>@comment_batch</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_msg'>msg</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_pattern_key'>pattern_key</span> <span class='op'>=</span> <span class='ivar'>@pattern_link_messages</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>+</span> <span class='id identifier rubyid_key'>key</span>
    <span class='ivar'>@pattern_comments</span><span class='lbracket'>[</span><span class='id identifier rubyid_pattern_key'>pattern_key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@comment_batch</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_microcode'>microcode</span> <span class='id identifier rubyid_msg'>msg</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="push_vector-instance_method">
  
    #<strong>push_vector</strong>(options)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>push_vector</p>

<pre class="code ruby"><code class="ruby">This method intercepts vector data from Origen, removes white spaces and compresses repeats</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 182</span>

<span class='kw'>def</span> <span class='id identifier rubyid_push_vector'>push_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='ivar'>@initial_vector_pushed</span>
    <span class='kw'>if</span> <span class='ivar'>@pinmap</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OrigenLink: pinmap has not been setup, use tester.pinmap= to initialize a pinmap</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='const'>Origen</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OrigenLink: executing pattern with pinmap:</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='ivar'>@pinmap</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># remove pins not in the link pinmap
</span>    <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_fix_ordered_pins'>fix_ordered_pins</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

    <span class='comment'># now send any configuration commands that were saved prior to pinmap setup (clears all server configs)
</span>    <span class='ivar'>@batched_setup_cmds</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_cmd'>cmd</span><span class='op'>|</span>
      <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_send_cmd'>send_cmd</span><span class='lparen'>(</span><span class='id identifier rubyid_cmd'>cmd</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_cmd'>cmd</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_setup_cmd_response_logger'>setup_cmd_response_logger</span><span class='lparen'>(</span><span class='id identifier rubyid_cmd'>cmd</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='ivar'>@initial_vector_pushed</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_set_pinorder'>set_pinorder</span> <span class='kw'>if</span> <span class='ivar'>@pinorder</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_programmed_data'>programmed_data</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:pin_vals</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeset</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>No timeset defined!</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Add one to your top level startup method or target like this:</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tester.set_timeset(&quot;nvmbist&quot;, 40)   # Where 40 is the period in ns</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_exit'>exit</span> <span class='int'>1</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_tset'>tset</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:timeset</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_local_repeat'>local_repeat</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:repeat</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:repeat</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='ivar'>@vector_count</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='comment'># compressing repeats as we go
</span>    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_programmed_data'>programmed_data</span> <span class='op'>==</span> <span class='ivar'>@previous_vectordata</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='ivar'>@previous_tset</span> <span class='op'>==</span> <span class='id identifier rubyid_tset'>tset</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@store_pins</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='ivar'>@vector_repeatcount</span> <span class='op'>+=</span> <span class='id identifier rubyid_local_repeat'>local_repeat</span>
    <span class='kw'>else</span>
      <span class='comment'># all repeats of the previous vector have been counted
</span>      <span class='comment'># time to flush.  Don&#39;t panic though!  @previous_vectordata
</span>      <span class='comment'># is what gets flushed.  programmed_data is passed as an
</span>      <span class='comment'># arg to be set as the new @previous_vectordata
</span>      <span class='id identifier rubyid_flush_vector'>flush_vector</span><span class='lparen'>(</span><span class='id identifier rubyid_programmed_data'>programmed_data</span><span class='comma'>,</span> <span class='id identifier rubyid_tset'>tset</span><span class='comma'>,</span> <span class='id identifier rubyid_local_repeat'>local_repeat</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='comment'># if this is the first vector of the pattern, insure variables are initialized
</span>    <span class='ivar'>@previous_vectordata</span> <span class='op'>=</span> <span class='id identifier rubyid_programmed_data'>programmed_data</span>
    <span class='ivar'>@previous_tset</span> <span class='op'>=</span> <span class='id identifier rubyid_tset'>tset</span>
    <span class='ivar'>@vector_repeatcount</span> <span class='op'>=</span> <span class='int'>1</span>
  <span class='kw'>end</span> <span class='comment'># if vector_count &gt; 0
</span>  <span class='ivar'>@vector_count</span> <span class='op'>+=</span> <span class='int'>1</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="synchronize-instance_method">
  
    #<strong>synchronize</strong>(output_file = &#39;&#39;)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>synchronize</p>

<pre class="code ruby"><code class="ruby">This method will synchronize the DUT state with Origen.  All generated
vectors are sent to the DUT for execution and the responses are processed</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


278
279
280
281
282
283
284
285
286</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 278</span>

<span class='kw'>def</span> <span class='id identifier rubyid_synchronize'>synchronize</span><span class='lparen'>(</span><span class='id identifier rubyid_output_file'>output_file</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_flush_vector'>flush_vector</span>
  <span class='kw'>if</span> <span class='ivar'>@batch_vectors</span>
    <span class='id identifier rubyid_process_response'>process_response</span><span class='lparen'>(</span><span class='id identifier rubyid_send_batch'>send_batch</span><span class='lparen'>(</span><span class='ivar'>@vector_batch</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_output_file'>output_file</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='ivar'>@vector_batch</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@store_pins_batch</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
  <span class='ivar'>@comment_batch</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_s-instance_method">
  
    #<strong>to_s</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>to_s</p>

<pre class="code ruby"><code class="ruby">returns &#39;OrigenLink::VectorBased&#39;

No longer a use for this.  Use tester.link?</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


450
451
452</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 450</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OrigenLink::VectorBased</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="transaction-instance_method">
  
    #<strong>transaction</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>transaction</p>

<pre class="code ruby"><code class="ruby">returns true/false indicating whether the transaction passed
true = pass
false = fail</code></pre>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_tester'>tester</span><span class='period'>.</span><span class='id identifier rubyid_transaction'>transaction</span> <span class='lbrace'>{</span><span class='id identifier rubyid_dut'>dut</span><span class='period'>.</span><span class='id identifier rubyid_reg'>reg</span> <span class='id identifier rubyid_blah'>blah</span> <span class='id identifier rubyid_blah'>blah</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>transaction failed</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 463</span>

<span class='kw'>def</span> <span class='id identifier rubyid_transaction'>transaction</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_synchronize'>synchronize</span>
    <span class='id identifier rubyid_transaction_fail_count'>transaction_fail_count</span> <span class='op'>=</span> <span class='ivar'>@fail_count</span>
    <span class='kw'>yield</span>
    <span class='id identifier rubyid_synchronize'>synchronize</span>
    <span class='id identifier rubyid_transaction_fail_count'>transaction_fail_count</span> <span class='op'>=</span> <span class='ivar'>@fail_count</span> <span class='op'>-</span> <span class='id identifier rubyid_transaction_fail_count'>transaction_fail_count</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_transaction_fail_count'>transaction_fail_count</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='kw'>true</span>
    <span class='kw'>else</span>
      <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="wait-instance_method">
  
    #<strong>wait</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>wait a fixed amount of time</p>

<pre class="code ruby"><code class="ruby">This method will run the Sleep method to wait rather than generating cycles.
Cycle execution time is not predictable with OrigenLink.

If you want cycles to be generated by this method include apply_cycles: true
in the options hash

This method currently doesn&#39;t handle match blocks.</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/origen_link/vector_based.rb', line 488</span>

<span class='kw'>def</span> <span class='id identifier rubyid_wait'>wait</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>cycles:</span>         <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>time_in_cycles:</span> <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>time_in_us:</span>     <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>time_in_ns:</span>     <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>time_in_ms:</span>     <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>time_in_s:</span>      <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>match:</span>          <span class='kw'>false</span><span class='comma'>,</span>   <span class='comment'># Set to true to invoke a match loop where the supplied delay
</span>    <span class='label'>apply_cycles:</span>	  <span class='kw'>false</span>
    <span class='comment'># will become the timeout duration
</span>  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wait(match: true) is not yet implemented on Link</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:match</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_time_delay'>time_delay</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_time_delay'>time_delay</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:time_in_s</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_time_delay'>time_delay</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:time_in_ms</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='float'>0.001</span>
  <span class='id identifier rubyid_time_delay'>time_delay</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:time_in_us</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='float'>0.000001</span>
  <span class='id identifier rubyid_time_delay'>time_delay</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:time_in_ns</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='float'>0.000000001</span>
  <span class='id identifier rubyid_time_delay'>time_delay</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:cycles</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:time_in_cycles</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='id identifier rubyid_current_period_in_ns'>current_period_in_ns</span> <span class='op'>*</span> <span class='float'>0.000000001</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:apply_cycles</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_cycles'>cycles</span> <span class='op'>=</span> <span class='id identifier rubyid_time_delay'>time_delay</span> <span class='op'>/</span> <span class='float'>0.00003</span>		<span class='comment'># cycle execution time is unpredictable, but ~= 30us
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:cycles</span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>||</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:time_in_cycles</span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:repeat</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:cycles</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:time_in_cycles</span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:repeat</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_cycles'>cycles</span> <span class='op'>&gt;</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_cycles'>cycles</span> <span class='op'>:</span> <span class='int'>1</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_cycle'>cycle</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_synchronize'>synchronize</span>			<span class='comment'># ensure all generated cycles are executed before delay is run
</span>    <span class='id identifier rubyid_sleep'>sleep</span> <span class='id identifier rubyid_time_delay'>time_delay</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Mar 16 07:25:35 2018 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.3.0).
</div>

    </div>
  </body>
</html>